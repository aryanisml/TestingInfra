(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"0x2R":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var l=n("LoAr"),a=n("WT9V"),i=(n("SdtR"),l["ɵcrt"]({encapsulation:2,styles:[],data:{}}));function r(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"span",[["class","triangle-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,5,":svg:svg",[["height","20"],["viewBox","0 0 64 64"],["width","20"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,":svg:polygon",[["class","triangle"],["points","30,5,5,60,60,60"]],null,null,null,null,null)),l["ɵprd"](512,null,a["ɵNgClassImpl"],a["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](4,278528,null,0,a.NgClass,[a["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵeld"](5,0,null,null,1,":svg:text",[["class","triangle-text"],["text-anchor","middle"],["x","31"],["y","50"]],null,null,null,null,null)),(e()(),l["ɵted"](6,null,["",""]))],(function(e,t){e(t,4,0,"triangle",t.component.isReCalRequired?"triangle-stroke-red":"triangle-stroke-grey")}),(function(e,t){e(t,6,0,t.component.seqValue)}))}},BI6r:function(e,t,n){"use strict";var l=n("b9Vd");n.d(t,"a",(function(){return l.a}))},DoxM:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var l=n("6nV5"),a=n("wgY5"),i=n("pN2L"),r=n("Jg5f"),o=n("AouM"),s=n("G2Mx"),u=n("uMZP"),d=n("5IsW"),c=n("edQC"),p=n("PmYs"),h=a,m=function(){function e(e,t,n,l,a,i,r){this.dialog=e,this.localeAppResourcesService=t,this.errorTermsStoreService=n,this.payloadCommandService=l,this.baseConnectionService=a,this.dataService=i,this.appDataService=r,this.resetValidationErrorObject(),this.fetchCountryList()}return e.prototype.getDialogLabels=function(){return{ImportCountryDialogPrimaryHeader:this.localeAppResourcesService.getResource("Lbl_Import_Country_Plan"),ImportCountryDialogCopyHeader:this.localeAppResourcesService.getResource("Lbl_Copy_data_instruction"),OKLabel:this.localeAppResourcesService.getResource("OK"),CancelLabel:this.localeAppResourcesService.getResource("Cancel"),ErrorMessagesHeader:this.localeAppResourcesService.getResource("Lbl_Error_Messages_Header")}},e.prototype.resetValidationErrorObject=function(){this.validationErrors={errorIcon:d.kb.ICON_ERROR_MESSAGES,pasteLimit:{status:!1,message:this.errorTermsStoreService.getErrorMessage("PasteLimitExceededForImportCountry")},lockedCountry:{status:!1,message:this.errorTermsStoreService.getErrorMessage("CannotEditLockedCountry")},cellValidations:{country:{status:!1,message:this.errorTermsStoreService.getErrorMessage("InvalidCountryValidation")},number:{status:!1,message:this.errorTermsStoreService.getErrorMessage("InvalidNumericValidation")},date:{status:!1,message:this.errorTermsStoreService.getErrorMessage("InvalidDateValidation")}},emptyGrid:{status:!1,message:this.errorTermsStoreService.getErrorMessage("EmptyGrid")}}},e.prototype.getValidationErrorObject=function(){return JSON.parse(JSON.stringify(this.validationErrors))},e.prototype.openImportCountriesDialog=function(e,t){var n=this;return this.resetValidationErrorObject(),this.dialog.open(c.a,{width:d.F.IMPORT_COUNTRIES.WIDTH,data:{columnDefs:this.generateColumnDefinitions(),rowData:this.getRowData(e,t),validationErrors:this.validationErrors,countries:this.countries,dialogViewContents:this.getDialogLabels()},panelClass:d.F.IMPORT_COUNTRIES.PANEL_CLASS,id:d.F.IMPORT_COUNTRIES.ID,height:d.F.IMPORT_COUNTRIES.HEIGHT}).afterClosed().pipe(Object(r.a)((function(e){return e&&e.action===d.E.OK?e.data:null})),Object(o.a)((function(l){return l&&l.length>0?n.uploadCountryPlan(l,e,t):Object(i.a)(null)})))},e.prototype.generateColumnDefinitions=function(){return[{headerName:this.localeAppResourcesService.getResource("Lbl_Country"),field:"COUNTRY",pinned:"left",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.COUNTRY_COL_WIDTH,headerClass:'{"position":"initial"}',suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_Country")},{headerName:this.localeAppResourcesService.getResource("Lbl_Pr"),field:"PR",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_Pr")},{headerName:this.localeAppResourcesService.getResource("Lbl_PNS"),field:"PNS",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_PNS")},{headerName:this.localeAppResourcesService.getResource("Lbl_Days_FPA_FSI"),field:"Days_FPA_FSI",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_Days_FPA_FSI")},{headerName:this.localeAppResourcesService.getResource("Lbl_FSI"),field:"FSI",headerClass:"date-cell",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.DATE_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_FSI")},{headerName:this.localeAppResourcesService.getResource("Lbl_SI_TO_FSS"),field:"SI_TO_FSS",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_SI_TO_FSS")},{headerName:this.localeAppResourcesService.getResource("Lbl_FSS"),field:"FSS",headerClass:"date-cell",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.DATE_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_FSS")},{headerName:this.localeAppResourcesService.getResource("Lbl_SI_25_P"),field:"SI_25_P",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_SI_25_P")},{headerName:this.localeAppResourcesService.getResource("Lbl_SI_50_P"),field:"SI_50_P",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_SI_50_P")},{headerName:this.localeAppResourcesService.getResource("Lbl_SI_90_P"),field:"SI_90_P",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_SI_90_P")},{headerName:this.localeAppResourcesService.getResource("Lbl_SR"),field:"SR",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_SR")},{headerName:this.localeAppResourcesService.getResource("Lbl_SFR"),field:"SFR",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_SFR")},{headerName:this.localeAppResourcesService.getResource("Lbl_RR"),field:"RR",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_RR")},{headerName:this.localeAppResourcesService.getResource("Lbl_SAS"),field:"SAS",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_SAS")},{headerName:this.localeAppResourcesService.getResource("Lbl_OE"),field:"OE",width:d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_COL_WIDTH,suppressMenu:!0,headerTooltip:this.localeAppResourcesService.getResource("Tooltip_OE")}]},e.prototype.downloadCountriesImportTemplate=function(){this.dataService.get(d.I.url,d.I.headers).subscribe((function(e){var t=new Blob([e],{type:"text/csv"});l.d.getWindow().saveAs(t,d.H)}))},e.prototype.getRowData=function(e,t){var n=this;void 0===t&&(t=1);var l=new Array(d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.DEFAULT_ROW_COUNT),a=0;e&&e.geoList&&e.geoList.geography&&(e.geoList.geography=[].concat(e.geoList.geography),e.geoList.geography.forEach((function(i,r){"WW"!==i.geographyLevel&&(a++,l[r]=p.a.SpreadsheetModel([i.geographyName,i.planParamsDetails?i.planParamsDetails.enrollmentTarget:"",i.planParamsDetails?i.planParamsDetails.numSites:"",n.getFPAtoFSI(e.planProperties,i.planParamsDetails?i.planParamsDetails.FSI:null)||"",i.planParamsDetails&&i.planParamsDetails.FSI&&h(i.planParamsDetails.FSI).isValid()?h(i.planParamsDetails.FSI).format(d.x):"",i.planParamsDetails?i.planParamsDetails.SITOFSSDAYS:"",i.planParamsDetails&&i.planParamsDetails.FSS&&h(i.planParamsDetails.FSS).isValid()?h(i.planParamsDetails.FSS).format(d.x):"",n.getPercentDays(25,i.planParamsDetails),n.getPercentDays(50,i.planParamsDetails),n.getPercentDays(90,i.planParamsDetails),i.planParamsDetails?n.getSrRr(i.planParamsDetails.SR,i,t):"",i.planParamsDetails?i.planParamsDetails.SFR:"",i.planParamsDetails?n.getSrRr(i.planParamsDetails.RR,i,t):"",i.planParamsDetails?i.planParamsDetails.ARC:"",i.planParamsDetails?i.planParamsDetails.overRecruitmentPercent:""],!!i.planParamsDetails&&i.planParamsDetails.isCountryLocked,n.countries,[])),n.validationErrors.lockedCountry.status=i.planParamsDetails.isCountryLocked||n.validationErrors.lockedCountry.status})));for(var i=a;i<d.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.DEFAULT_ROW_COUNT;i++)l[i]=p.a.DefaultSpreadsheetModel();return l},e.prototype.getSrRr=function(e,t,n){return l.c.isDefined(e)?l.c.calcuaterRatePerFrequency(t.planParamsDetails.SR,n,!0):void 0},e.prototype.getFPAtoFSI=function(e,t){var n=null,l=null;return e&&(n=e.FPA),n&&t&&(l=h(t).diff(h(n),"days")),l},e.prototype.getPercentDays=function(e,t){var n=null;if(t&&t.centerInitInfo&&t.centerInitInfo.percentCenterInitInfo&&t.centerInitInfo.percentCenterInitInfo.centerInitSlot&&t.centerInitInfo.percentCenterInitInfo.centerInitSlot.length>0){var l=t.centerInitInfo.percentCenterInitInfo.centerInitSlot.find((function(t){return t.percOfCenterInit===e}));l&&(n=l.noOfPeriods)}return n},e.prototype.uploadCountryPlan=function(e,t,n){if(t&&t.planProperties){var a={studyKey:t.planProperties.studyKey,planKey:t.planProperties.planKey,version:t.planProperties.version},o=this.getCommandTags(e,n),s=u.m.getModuleInfo(d.D,a.studyKey),c=this.payloadCommandService.getCommandDetails(d.p.UPLOAD_PLAN,a,null,o,s),p={};return p.dependencyList=[l.l.GetPlanDetails+"_"+a.studyKey+"_"+a.planKey,l.l.GetPlanListKey+"_"+a.studyKey],this.baseConnectionService.sendRequest(c,p).pipe(Object(r.a)((function(e){return e})))}return Object(i.a)(null)},e.prototype.getCommandTags=function(e,t){var n=this,l={countryPlanUpdator:{value:[]}};return e&&e.forEach((function(e){var a={params:{countryKey:e.geographyKey,countryName:e.geographyName},value:n.transformPayLoad(e.planParamsDetails,t)};l.countryPlanUpdator.value.push({countryPlanParams:a})})),l},e.prototype.transformPayLoad=function(e,t){if(void 0===t&&(t=1),e){if(this.appDataService.isSRAvailable()?(e.SR=l.c.calcuaterRatePerFrequency(e.SR,t,!1),e.RR=0):(e.RR=l.c.calcuaterRatePerFrequency(e.RR,t,!1),e.SR=0),e.centerInitInfo&&e.centerInitInfo.percentCenterInitInfo){var n=e.centerInitInfo.percentCenterInitInfo.centerInitSlot;n&&(n=n.map((function(e){return{centerInitSlot:e}}))),e.centerInitInfo.percentCenterInitInfo=n}l.c.isDefined(e.FSI,!1)?e.FSI=h(e.FSI,d.x).format(d.y.SERVER_DATE_FORMAT):delete e.FSI,l.c.isDefined(e.FSS,!1)?e.FSS=h(e.FSS,d.x).format(d.y.SERVER_DATE_FORMAT):delete e.FSS}return e},e.prototype.fetchCountryList=function(){var e=this;this.countries=[];var t=u.m.getModuleInfo(),n=this.payloadCommandService.getCommandDetails(d.p.GET_FILTER_COUNTRY_DATA,null,null,null,t),a={};a.cacheKey=l.l.GetFilterCountryData,this.baseConnectionService.sendRequest(n,a).pipe(Object(s.a)(1),Object(r.a)((function(t){t.result===l.k.RESULT_OK&&t.countryRegionMappingList&&t.countryRegionMappingList.countryRegionMapping&&[].concat(t.countryRegionMappingList.countryRegionMapping).forEach((function(t){t&&t.countryDataList&&t.countryDataList.countryData&&(e.countries=e.countries.concat(t.countryDataList.countryData))}))}))).subscribe()},e.prototype.getModuleInfo=function(e){return{moduleName:d.Fb,pageName:"DFNSOLVE",studykey:e}},e}()},FRc0:function(e,t,n){"use strict";n("9S+C");var l=n("6nV5"),a=n("wgY5"),i=n("Jg5f"),r=n("uMZP"),o=n("5IsW"),s=(n("lVOy"),n("bFd/"),n("AvVu"),n("XllP"),n("IW84"),n("D57K")),u=n("PDk6"),d=n("66IH"),c=function(){function e(){}return e.prototype.transformPayLoad=function(e,t,n,a,i,r,s){if(e){var u={};return u.enrollmentTarget=e.enrollmentTarget,u.FSI=e.FSI,u.LSR=e.LSR,u.FSS=e.FSS,a?l.c.isDefined(e.LSR)&&(u.LSR=e.ARTB):l.c.isDefined(e.LSR)?u.LSR=e.LSR:t.LSR&&(u.LSR=t.LSR),u.SFR=e.SFR,n?n&&n.appMetadata&&n.appMetadata.isSRAvailable?(u.SR=e.calculatedSR,u.RR=u.SR*(1-u.SFR/100)):(u.RR=e.calculatedRR,u.SR=u.RR/(1-u.SFR/100)):(u.SR=e.calculatedSR,u.RR=e.calculatedRR),u.SITOFSSDAYS=e.SITOFSSDAYS,u.screeningTarget=e.screeningTarget,u.ARC=e.ARC,u.seedNumber=e.seedNumber,u.numSites=e.numSites,u.siteInitiationMethod=e.siteInitiationMethod,u.isSSV=e.isSSV,u.centerInitInfo=e.centerInitInfo,u.algorithmCode=e.algorithmCode,u.algorithmSiteCompId=e.algorithmSiteCompId,u.overRecruitmentPercent=e.overRecruitmentPercent,u.isOverRecruitmentEnabled=e.isOverRecruitmentEnabled,u.ARTB=e.ARTB,u.maxRT=e.maxRT,u.minRT=e.minRT,u.rateAdjustmentsTable=e.rateAdjustmentsTable,u.solvedPLSR=e.solvedPLSR,u.algorithmCode=e.algorithmCode,u.algorithmId=e.algorithmId,u.algorithmSiteCompId=e.algorithmSiteCompId,e.countryCalcQuantity&&(u.effectiveSR=e.countryCalcQuantity.effectiveSR,u.effectiveSFR=e.countryCalcQuantity.effectiveSFR,u.effectiveRR=e.countryCalcQuantity.effectiveRR,u.effectiveSAS=e.countryCalcQuantity.effectiveSAS),u.avgDaysToSiteInit=e.avgDaysToSiteInit,u.algorithmId=l.c.isDefined(e.algorithmId,!0)?o.e:0,i&&(u.cohortList=this.getCohortList(e.cohortList,n,r,s)),u}},e.prototype.getCohortList=function(e,t,n,l){var a=[];if(e)for(var i=0;i<e.length;i++){var r=e[i],o={};if(o.cohortKey=r.cohortKey,o.cohortName=r.cohortName,r.isCohortExcluded)o.isCohortExcluded=!0,o.isCohSelected=null!=l&&l.toString()===r.cohortKey.toString();else{if(o.enrollmentTarget=r.planParamsDetails.enrollmentTarget,o.screeningTarget=r.planParamsDetails.screeningTarget,o.SITOFSSDAYS=r.planParamsDetails.SITOFSSDAYS,o.FSS=r.planParamsDetails.FSS,o.LSR=r.planParamsDetails.ARTB,n)o.RR=r.planParamsDetails.calculatedRR;else{var s=t&&t.appMetadata&&t.appMetadata.isSRAvailable;o.SFR=r.planParamsDetails.SFR,s?(o.SR=r.planParamsDetails.calculatedSR,o.RR=r.planParamsDetails.calculatedSR*(1-r.planParamsDetails.SFR/100)):(o.RR=r.planParamsDetails.calculatedRR,o.SR=r.planParamsDetails.calculatedRR/(1-r.planParamsDetails.SFR/100))}o.ARC=r.planParamsDetails.ARC,o.overRecruitmentPercent=r.planParamsDetails.overRecruitmentPercent,o.isOverRecruitmentEnabled=r.planParamsDetails.overRecruitmentPercent>0,o.avgDaysToSiteInit=r.planParamsDetails.avgDaysToSiteInit,o.isCohortExcluded=!1,o.ARTB=r.planParamsDetails.ARTB,o.minRT=r.planParamsDetails.minRT,o.maxRT=r.planParamsDetails.maxRT,o.isCohModified=!!r.isCohModified,o.isCohSelected=null!=l&&l.toString()===r.cohortKey.toString()}a.push(o)}return a},e.prototype.getCommandTags=function(e,t,n,l,a,i,r,s,c,p){for(var h={countryPlanUpdator:{value:[]}},m=0;m<e.length;m++){var g=e[m];if(a.isCohortPlan===o.qb){var S={params:{countryKey:g.geographyKey,countryName:g.geographyName},value:(new d.a).getCountryPlanParams(this.transformPayLoad(g.planParamsDetails,a,l),this.getCountryPlanParam(t,g.geographyKey),n,!1,l)};h.countryPlanUpdator.value.push({countryPlanParams:S})}else{var f={params:{countryKey:g.geographyKey,countryName:g.geographyName},value:(new u.a).getCountryPlanParams(this.transformPayLoad(g.planParamsDetails,a,l,!1,r,s,c),n,g,!0,l,s,a.isDepCohortPlan,void 0!==a.isOverThreshold&&a.isOverThreshold,p)};h.countryPlanUpdator.value.push({countryPlanParams:f})}}return h},e.prototype.getCountryPlanParam=function(e,t){if(e)for(var n=0;n<e.length;n++)if(e[n].geographyKey===t)return e[n].planParamsDetails;return null},e.prototype.getCommandTagsForMCS=function(e,t,n,l,a,i,r,s,c,p){var h={},m=!!s;s=s||o.hc.NUMBER_OF_SUBJECTS,h.multiCountryPlanUpdator={value:[]};for(var g=0;g<e.length;g++){var S=e[g],f={params:{solveFor:s},countryPlanParams:{}},v={params:{countryKey:S.geographyKey,countryName:S.geographyName}},C=a.isCohortPlan===o.qb?(new d.a).getCountryPlanParams(this.transformPayLoad(S.planParamsDetails,a,l,m),this.getCountryPlanParam(t,S.geographyKey),n,!1,l):(new u.a).getCountryPlanParams(this.transformPayLoad(S.planParamsDetails,a,l,!1,i,r,c),n,S,!0,l,r,"",void 0!==a.isOverThreshold&&a.isOverThreshold,p);s===o.hc.LAST_SUBJECT_RANDOMIZED_DATE&&(delete C.LSR,delete C.ARTB),v.value=C,f.countryPlanParams=v,h.multiCountryPlanUpdator.value.push({countryPlanUpdator:f})}return h},e}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.transformPayLoad=function(t,n,l,a,i,r,o){if(t){var s=e.prototype.transformPayLoad.call(this,t,n,l,a,!1,!1);return t.isAdjustable&&(s.redistSites=t.redistSites),!n.isPlan&&t.isRevertToApprovedPlan&&(s.isRevertToApprovedPlan=t.isRevertToApprovedPlan),t.isAdjustable&&t.redistSites>0&&(s.redistFSI=t.redistFSI),s.isTargetAdjusted=t.isTargetAdjusted,s.isSitesAdjusted=t.isSitesAdjusted,t.projectedValues&&(t.projectedValues.SR&&(s.SR=t.projectedValues.SR),t.projectedValues.RR&&(s.RR=t.planParamsDetails.projections.RR),t.projectedValues.SFR&&(s.SFR=t.planParamsDetails.projections.SFR),t.projectedValues.SAS&&(s.ARC=t.planParamsDetails.projections.ARC)),t.actEnrlWhnSRMod&&(s.actEnrlWhnSRMod=t.actEnrlWhnSRMod),t.actEnrlWhnSFRMod&&(s.actEnrlWhnSFRMod=t.actEnrlWhnSFRMod),t.dateSRMod&&(s.dateSRMod=t.dateSRMod),t.dateSFRMod&&(s.dateSFRMod=t.dateSFRMod),i&&(s.cohortList=this.getCohortList(t.cohortList,l,r,o)),s}},t.prototype.getCohortList=function(e,t,n,l){for(var a=[],i=0;i<e.length;i++){var r=e[i],o={};if(o.cohortKey=r.cohortKey,o.cohortName=r.cohortName,r.isCohortExcluded)o.isCohortExcluded=!0,o.isCohSelected=null!=l&&l.toString()===r.cohortKey.toString();else{if(o.enrollmentTarget=r.planParamsDetails.enrollmentTarget,o.screeningTarget=r.planParamsDetails.screeningTarget,o.SITOFSSDAYS=r.planParamsDetails.SITOFSSDAYS,o.FSS=r.planParamsDetails.FSS,o.LSR=r.planParamsDetails.ARTB,n)o.RR=r.planParamsDetails.calculatedRR;else{var s=t&&t.appMetadata&&t.appMetadata.isSRAvailable;o.SFR=r.planParamsDetails.SFR,s?(o.SR=r.planParamsDetails.calculatedSR,o.RR=r.planParamsDetails.calculatedSR*(1-r.planParamsDetails.SFR/100)):(o.RR=r.planParamsDetails.calculatedRR,o.SR=r.planParamsDetails.calculatedRR/(1-r.planParamsDetails.SFR/100))}o.ARC=r.planParamsDetails.ARC,o.overRecruitmentPercent=r.planParamsDetails.overRecruitmentPercent,o.isOverRecruitmentEnabled=r.planParamsDetails.overRecruitmentPercent>0,o.avgDaysToSiteInit=r.planParamsDetails.avgDaysToSiteInit,o.isCohortExcluded=!1,o.ARTB=r.planParamsDetails.ARTB,o.minRT=r.planParamsDetails.minRT,o.maxRT=r.planParamsDetails.maxRT,o.isCohModified=!!r.isCohModified,o.isCohSelected=null!=l&&l.toString()===r.cohortKey.toString(),o.isTargetAdjusted=r.planParamsDetails.isTargetAdjusted,r.planParamsDetails.actEnrlWhnSRMod&&(o.actEnrlWhnSRMod=r.planParamsDetails.actEnrlWhnSRMod),r.planParamsDetails.actEnrlWhnSFRMod&&(o.actEnrlWhnSFRMod=r.planParamsDetails.actEnrlWhnSFRMod),r.planParamsDetails.dateSRMod&&(o.dateSRMod=r.planParamsDetails.dateSRMod),r.planParamsDetails.dateSFRMod&&(o.dateSFRMod=r.planParamsDetails.dateSFRMod)}r.planParamsDetails.countryCalcQuantity&&(o.effectiveSR=r.planParamsDetails.countryCalcQuantity.effectiveSR,o.effectiveSFR=r.planParamsDetails.countryCalcQuantity.effectiveSFR,o.effectiveRR=r.planParamsDetails.countryCalcQuantity.effectiveRR,o.effectiveSAS=r.planParamsDetails.countryCalcQuantity.effectiveSAS),a.push(o)}return a},t.prototype.getCommandTags=function(e,t,n,l,a,i,r,o,s,c){for(var p={adjustCountryPlanUpdator:{value:[]}},h=0;h<e.length;h++){var m=e[h];if("N"===a.isCohortPlan){var g={params:{countryKey:m.geographyKey,countryName:m.geographyName},value:(new d.a).getCountryPlanParams(this.transformPayLoad(m.planParamsDetails,a),this.getCountryPlanParam(t,m.geographyKey),n,!0,l)};p.adjustCountryPlanUpdator.value.push({adjustCountryPlanParams:g})}else g={params:{countryKey:m.geographyKey,countryName:m.geographyName},value:(new u.a).getCountryPlanParams(this.transformPayLoad(m.planParamsDetails,a,l,!1,r,o,s),n,m,!1,l,o,a.isDepCohortPlan,void 0!==a.isOverThreshold&&a.isOverThreshold,c)},p.adjustCountryPlanUpdator.value.push({adjustCountryPlanParams:g})}return p},t.prototype.getCountryPlanParam=function(e,t){if(e)for(var n=0;n<e.length;n++)if(e[n].geographyKey===t)return e[n].planParamsDetails;return null},t.prototype.getCommandTagsForMCS=function(e,t,n,l,a,i,r,s,c,p){for(var h=!!(s=s||o.hc.NUMBER_OF_SUBJECTS),m={adjustMultiCountryPlanUpdator:{value:[]}},g=0;g<e.length;g++){var S=e[g],f={params:{solveFor:s},adjustCountryPlanParams:{}},v={params:{countryKey:S.geographyKey,countryName:S.geographyName}},C="N"===a.isCohortPlan?(new d.a).getCountryPlanParams(this.transformPayLoad(S.planParamsDetails,a,l,h),this.getCountryPlanParam(t,S.geographyKey),n,!0,l):(new u.a).getCountryPlanParams(this.transformPayLoad(S.planParamsDetails,a,l,!1,i,r,c),n,S,!1,l,r,"",void 0!==a.isOverThreshold&&a.isOverThreshold,p);s===o.hc.LAST_SUBJECT_RANDOMIZED_DATE&&(delete C.LSR,delete C.ARTB),v.value=C,f.adjustCountryPlanParams=v,m.adjustMultiCountryPlanUpdator.value.push({adjustCountryPlanUpdator:f})}return m},t}(c),h=n("2xY0"),m=(n("ut0E"),n("TSSw"),n("+Ve9")),g=(n("DoxM"),n("qy3m")),S=function(){return function(){}}();n.d(t,"a",(function(){return v}));var f=a,v=function(){function e(e,t,n,l,a,i,r,o,s,u,d,c,p,h,m,g,S,f,v){var C=this;this.planDetailsService=e,this.studySummaryService=t,this.localAppResources=n,this.userDataService=l,this.userPrevilegeService=a,this.studyListService=i,this.appDataService=r,this.plansService=o,this.dialog=s,this.payloadCommandService=u,this.baseConnectionService=d,this.errorTermsStoreService=c,this.individualCountryOptionService=p,this.importExportCountriesService=h,this.pceService=m,this.datePipe=g,this.pceHeaderResourceService=S,this.applicationContextService=f,this.geographyService=v,this.isSolverActive=!1,this.isOverThreshold=!1,this.isDepCohortPlan=!1,this.currentSolver="",this.planDetailsService.getPlanDetails().subscribe((function(e){C.planDetails=e}))}return Object.defineProperty(e.prototype,"pceOptions",{get:function(){return this._pceOptions},set:function(e){this._pceOptions=e},enumerable:!0,configurable:!0}),e.prototype.getSolverBasedValidationFlag=function(){return this.isSolverActive},e.prototype.setSolverBasedValidationFlag=function(e){this.isSolverActive=e},e.prototype.getCountryNotesResources=function(){return this.countryNotesResources||(this.countryNotesResources={TITLE:this.localAppResources.getResource("COUNTRY_NOTES"),TYPE_TO_ADD_COMMENT:this.localAppResources.getResource("TYPE_TO_ADD_COMMENT"),ADD_COMMENT:this.localAppResources.getResource("ADD_COMMENT"),MODIFIED_DATE:this.localAppResources.getResource("MODIFIED_DATE"),USER_NAME:this.localAppResources.getResource("Username"),CONTENT:this.localAppResources.getResource("notesDialogTableContentHeader"),OK:this.localAppResources.getResource("OkLabel"),CANCEL:this.localAppResources.getResource("CancelLabel"),SAVE:this.localAppResources.getResource("Save")}),this.countryNotesResources},e.prototype.getCountryGridResources=function(){return this.countryGridResources||(this.countryGridResources={STATUS:this.localAppResources.getResource("STATUS"),COUNTRY_NAME:this.localAppResources.getResource("COUNTRY_NAME"),REGION:this.localAppResources.getResource("REGION"),CUSTOM:this.localAppResources.getResource("CUSTOM"),TWENTY_FIVE_FIFTY_NINTY:this.localAppResources.getResource("TWENTY_FIVE_FIFTY_NINTY"),RANDOM:this.localAppResources.getResource("RANDOM"),LINEAR:this.localAppResources.getResource("LINEAR"),COUNTRY_COHORTS:this.localAppResources.getResource("COUNTRY_COHORTS"),COHORT_NAME:this.localAppResources.getResource("SDTColCohortName"),INCLUDE_EXCLUDE_COUNTRY_COHORTS:this.localAppResources.getResource("INCLUDE_EXCLUDE_COUNTRY_COHORTS"),RANDOMIZATION_TARGET:this.localAppResources.getResource("MCEPanelRTTT"),ACHIEVE_RANDOMIZATION_BY:this.localAppResources.getResource("ACHIEVE_RANDOMIZATION_BY"),OVER_ENROLLMENT:this.localAppResources.getResource("OVER_ENROLLMENT"),SCREENING_RATE:this.localAppResources.getResource("SCREENING_RATE"),RANDOMIZATION_RATE:this.localAppResources.getResource("RANDOMIZATION_RATE"),OVER_ENR:this.localAppResources.getResource("MCEOVER_ENR"),RE_DIST:this.localAppResources.getResource("MCERE_DIST"),PROJ_RR:this.localAppResources.getResource("MCEPROJ_RR"),PROJ_SR:this.localAppResources.getResource("MCEPROJ_SR"),PROJ_SF_PERCENT:this.localAppResources.getResource("MCEPROJ_SF_PERCENT"),PROJ_SAS_PERCENT:this.localAppResources.getResource("MCEPROJ_SAS_PERCENT"),CAL_VALUE:this.localAppResources.getResource("MCECAL_VALUE"),CAL_LSR:this.localAppResources.getResource("MCECAL_LSR"),MAX_RT:this.localAppResources.getResource("MCEMAX_RT"),MIN_RT:this.localAppResources.getResource("MCEMIN_RT"),RT:this.localAppResources.getResource("MCERT"),PLSR:this.localAppResources.getResource("MCEPLSR"),RR:this.localAppResources.getResource("MCERR"),SR:this.localAppResources.getResource("MCESR"),SIM:this.localAppResources.getResource("MCESIM"),ARTB:this.localAppResources.getResource("MCEARTB"),SF_PERCENTAGE:this.localAppResources.getResource("MCESF_PERCENTAGE"),FPA:this.localAppResources.getResource("MCEFPA"),FPA_TO_FSI:this.localAppResources.getResource("MCEFPA_TO_FSI"),FSI:this.localAppResources.getResource("MCEFSI"),FSI_TO_FSS:this.localAppResources.getResource("MCEFSI_TO_FSS"),FSS:this.localAppResources.getResource("MCEFSS"),NUM_SITES:this.localAppResources.getResource("MCENUM_SITES"),SAS_PERCENTAGE:this.localAppResources.getResource("MCESAS_PERCENTAGE"),SI:this.localAppResources.getResource("MCESI"),TWENTY_FIVE_SI:this.localAppResources.getResource("MCETWENTY_FIVE_SI"),FIFTY_SI:this.localAppResources.getResource("MCEFIFTY_SI"),NINTY_SI:this.localAppResources.getResource("MCENINTY_SI"),SCREEN_FAILURE_PERCENTAGE:this.localAppResources.getResource("SCREEN_FAILURE_PERCENTAGE"),FINAL_PROTOCOL_APPROVED:this.localAppResources.getResource("FINAL_PROTOCOL_APPROVED"),DAYS_FROM_FPA_TO_FSI:this.localAppResources.getResource("DAYS_FROM_FPA_TO_FSI"),FIRST_SITE_INITIATED:this.localAppResources.getResource("FIRST_SITE_INITIATED"),DAYS_FROM_FSI_TO_FSS:this.localAppResources.getResource("DAYS_FROM_FSI_TO_FSS"),FIRST_SUBJECT_SCREENED:this.localAppResources.getResource("FIRST_SUBJECT_SCREENED"),NUMBER_OF_SITES:this.localAppResources.getResource("NUMBER_OF_SITES"),SITES_TO_REDISTRIBUTE:this.localAppResources.getResource("SITES_TO_REDISTRIBUTE"),SITES_ACTIVELY_SCREENING_PERCENTAGE:this.localAppResources.getResource("SITES_ACTIVELY_SCREENING_PERCENTAGE"),SITE_INITIATION:this.localAppResources.getResource("SITE_INITIATION"),SITE_INITIATION_METHOD:this.localAppResources.getResource("SITE_INITIATION_METHOD"),DAYS_TO_25_PERCENT_SITES_INITIATED:this.localAppResources.getResource("DAYS_TO_25_PERCENT_SITES_INITIATED"),DAYS_TO_50_PERCENT_SITES_INITIATED:this.localAppResources.getResource("DAYS_TO_50_PERCENT_SITES_INITIATED"),DAYS_TO_90_PERCENT_SITES_INITIATED:this.localAppResources.getResource("DAYS_TO_90_PERCENT_SITES_INITIATED"),MINIMUM_RANDOMIZATION:this.localAppResources.getResource("MinimumRT"),MAXIMUM_RANDOMIZATION:this.localAppResources.getResource("MaximumRT"),SOLVED_LAST_SUBJECT_RANDOMIZED:this.localAppResources.getResource("CalculatedLSR"),CALULATED_VALUE:this.localAppResources.getResource("MCECalcTT"),PLANNED_LSR:this.localAppResources.getResource("MCEPLSRHeader"),COUNTRY_SOLVERS:this.localAppResources.getResource("CountrySolvers"),SUBJECT_DISTRIBUTION_SOLVER_TAB:this.localAppResources.getResource("SubjectDistributionSolverTab"),LAST_SUBJECT_SOLVER_TAB:this.localAppResources.getResource("LastSubjectSolverTab"),MINIMUM_RATE_SOLVER_TAB:this.localAppResources.getResource("MinimumRateSolverTab"),SUBJECTS_SOLVER_TAB:this.localAppResources.getResource("SubjectsSolverTab"),SOLVERS_VALIDATION_ERROR_MSG:this.errorTermsStoreService.getErrorMessage("SolversValidationErrorMessage"),SOLVERS_CALCULATION_ERROR_MSG:this.errorTermsStoreService.getErrorMessage("SolversCalculationErrorMsg"),UNEDITABLE_PLAN_MSG:this.localAppResources.getResource("PECDisableApprovedMsg"),ADD_COUNTRIES:this.localAppResources.getResource("ADD_COUNTRIES"),SELECT_ALL:this.localAppResources.getResource("SELECT_ALL"),ENABLE_UPDATED_PROJECTIONS:this.localAppResources.getResource("ENABLE_UPDATED_PROJECTIONS"),SELECT_COHORTS_TO_EDIT:this.localAppResources.getResource("SELECT_COHORTS_TO_EDIT"),EMPTY_COHORT_LIST_MSG:"This plan does not have any cohorts selected.\n          Select at least one cohort before adding a country (or countries).",PECFrProjSR:l.Z.interpolate(this.localAppResources.getResource("PECFrProjSR"),[this.planDetailsService.getReportingPeriodLabel()]),PECFrProjRR:l.Z.interpolate(this.localAppResources.getResource("PECFrProjRR"),[this.planDetailsService.getReportingPeriodLabel()]),PECFrProjActiveSites:this.localAppResources.getResource("PECFrProjActiveSites"),PECFrProjSFR:this.localAppResources.getResource("PECFrProjSFR"),ALL_COUNTRIES_LOCKED:this.localAppResources.getResource("AllCountriesLockedForSolve"),CLICK_TO_CALCULATE:this.localAppResources.getResource("ClickToCalculate"),CLICK_TO_APPLY:this.localAppResources.getResource("ClickToApply"),SELECT_COUNTRIES:this.localAppResources.getResource("SELECT_COUNTRIES"),SELECT_COUNTRIES_MSG:this.localAppResources.getResource("SelectCountryMsg"),SOLVER_NAV_MSG_UNSAVED_CHANGES:this.localAppResources.getResource("unsavedMessageForSolver"),ADJUST_COUNTRY_PARAMETERS:this.localAppResources.getResource("AdjustCountryParameters"),SOLVERS_SELECTION_CONFIRMATION:this.localAppResources.getResource("SolversSelectionConfirmation"),ALL_SELECTED_NODES_NOT_ELIGIBLE:this.localAppResources.getResource("AllSelectedNodesNotEligible"),ALL_LOCKED_SELECTED_NODES_NOT_ELIGIBLE:this.localAppResources.getResource("AllLockedSelectedNodesNotEligible"),DEPENDENT_COHORT_CARD_EMPTY_CELL_VALUE:this.localAppResources.getResource("DependentCohortCardEmptyCellValue"),PRINT:this.localAppResources.getResource("Print"),COPY:this.localAppResources.getResource("Copy"),EXPORT:this.localAppResources.getResource("Export"),OVER_THRESHOLD_MCE_DCP_SEQUENCE_MSG:this.localAppResources.getResource("OVER_THRESHOLD_MCE_DCP_SEQUENCE_MSG"),OVER_THRESHOLD_MCE_DCP_PARALLEL_COHORT_MSG:this.localAppResources.getResource("OVER_THRESHOLD_MCE_DCP_PARALLEL_COHORT_MSG"),OVER_THRESHOLD_MCE_DCP_COMPLEX_MSG:this.localAppResources.getResource("OVER_THRESHOLD_MCE_DCP_COMPLEX_MSG"),EXPANDGRID:this.localAppResources.getResource("Expand"),COLLAPSEGRID:this.localAppResources.getResource("Collapse"),OK:this.localAppResources.getResource("OK"),Cancel:this.localAppResources.getResource("Cancel"),SOLVER_CONTINUE:this.localAppResources.getResource("Continue"),DISABLED_25_50_90_MSG:this.localAppResources.getResource("DISABLED_25_50_90_MSG"),MANGECOUNTRYGRID:this.localAppResources.getResource("MANGECOUNTRYGRID"),MANAGECOUNTRYGRIDEDIT:this.localAppResources.getResource("MANAGECOUNTRYGRIDEDIT"),SCREENTARGET:this.localAppResources.getResource("MCESCREENTARGET"),SCREENING_TARGET:this.localAppResources.getResource("SCREENING_TARGET"),FSR:this.localAppResources.getResource("MCEFSR"),FIRST_SUBJECT_RANDOMIZED:this.localAppResources.getResource("FIRST_SUBJECT_RANDOMIZED"),LSS:this.localAppResources.getResource("MCELSS"),LAST_SUBJECT_SCREENED:this.localAppResources.getResource("LAST_SUBJECT_SCREENED"),CALCSAS:this.localAppResources.getResource("MCECALCSAS"),CALC_SAS_PERCENTAGE:this.localAppResources.getResource("CALC_SAS_PERCENTAGE"),MC_GRID_TOGGLE_LEFT_MESSAGE:this.localAppResources.getResource(o.wb.MC_GRID_TOGGLE_LEFT_MESSAGE),MC_GRID_TOGGLE_RIGHT_MESSAGE:this.localAppResources.getResource(o.wb.MC_GRID_TOGGLE_RIGHT_MESSAGE)}),this.countryGridResources},e.prototype.getCountryLogResources=function(){return this.countryLogResources||(this.countryLogResources={TITLE:this.localAppResources.getResource("LockCountryTitle"),USER_NAME:this.localAppResources.getResource("Username"),LOCK:this.localAppResources.getResource("PMCLockIndHeaderShort"),USER_ID:this.localAppResources.getResource("UserId"),ACTION_DATE:this.localAppResources.getResource("ActionDate"),OK:this.localAppResources.getResource("OK"),NOTES:this.localAppResources.getResource("Notes"),RateAdjustment:this.localAppResources.getResource("RateAdjustment"),Lock:this.localAppResources.getResource("Lock")}),this.countryLogResources},e.prototype.getCountryOptionsResources=function(){return this.countryOptionsResources||(this.countryOptionsResources={EDIT_COUNTRY:this.localAppResources.getResource("EDIT_COUNTRY"),LOCK_UNLOCK_COUNTRY:this.localAppResources.getResource("LOCK_UNLOCK_COUNTRY"),DUPLICATE_COUNTRY:this.localAppResources.getResource("DUPLICATE_COUNTRY"),COPY_PARAMETERS:this.localAppResources.getResource("COPY_PARAMETERS"),PASTE_PARAMETERS:this.localAppResources.getResource("PASTE_PARAMETERS"),DELETE_COUNTRY:this.localAppResources.getResource("DELETE_COUNTRY")}),this.countryOptionsResources},e.prototype.getBatchCountryOptionsResources=function(){return this.batchCountryOptionsResources||(this.batchCountryOptionsResources={LOCK_COUNTRIES:"Lock Selected Countries",UNLOCK_COUNTRIES:"Unlock Selected Countries",DUPLICATE_COUNTRIES:"Duplicate Selected Countries",COPY_PARAMETERS:"Copy Selected Parameters",PASTE_PARAMETERS:"Paste Selected Parameters",DELETE_COUNTRIES:"Delete Selected Countries"}),this.batchCountryOptionsResources},e.prototype.getStudyTargetAndWorldWide=function(){return{Study_Target:this.localAppResources.getResource("STUDY_TARGET"),WW:this.localAppResources.getResource("WORLD_WIDE")}},e.prototype.getAddCountryOptionsResources=function(){return this.addCountryOptionsResources||(this.addCountryOptionsResources={DOWNLOAD_PLANS_TEMPLATE:this.localAppResources.getResource("DownloadPlanTemplateButtonLabel"),SELECT_COUNTRIES_FROM_SOURCE_OR_TEMPLATE:this.localAppResources.getResource("ImportCountryButtonLabelTT")}),this.addCountryOptionsResources},e.prototype.getUserId=function(){return this.userDataService.getUserId()},e.prototype.getUserName=function(){return this.userDataService.getUserName()},e.prototype.hasEditAccess=function(){var e=this.userDataService.getUserPrivilegesForModule(r.F.MODULE_PLANNING);return this.userPrevilegeService.hasApprovePlanAccess(e)||this.userPrevilegeService.hasEditPlanAccess(e)},e.prototype.hasLockUnlockAccess=function(){var e=this.userDataService.getUserPrivilegesForModule(r.F.MODULE_PLANNING);return this.userPrevilegeService.hasLockCountryPlanAccess(e)||this.userPrevilegeService.hasUnlockCountryPlanAccess(e)},e.prototype.hasCountryListImportAccess=function(){var e=this.userDataService.getUserPrivilegesForModule(r.F.MODULE_PLANNING);return this.userPrevilegeService.hasCountryListImportAccess(e)},e.prototype.isAFSIAchieved=function(e){return e.data.planParamsDetails&&e.data.planParamsDetails.actuals&&e.data.planParamsDetails.actuals.FSI},e.prototype.getCountryOptions=function(){return this.countryOptions||(this.countryOptions=[{name:this.getCountryOptionsResources().EDIT_COUNTRY,isVisible:!0,isEnabled:this.hasEditAccess()},{name:this.getCountryOptionsResources().LOCK_UNLOCK_COUNTRY,isVisible:!0,isEnabled:this.hasLockUnlockAccess()},{name:this.getCountryOptionsResources().DUPLICATE_COUNTRY,isVisible:!0,isEnabled:this.hasEditAccess()},{name:this.getCountryOptionsResources().COPY_PARAMETERS,isVisible:!0,isEnabled:this.hasEditAccess()},{name:this.getCountryOptionsResources().PASTE_PARAMETERS,isVisible:!0,isEnabled:this.hasEditAccess()},{name:this.getCountryOptionsResources().DELETE_COUNTRY,isVisible:!0,isEnabled:this.hasEditAccess()}]),this.countryOptions},e.prototype.setTooltipMessage=function(e){if(e.data.geographyLevel!==this.getStudyTargetAndWorldWide().WW&&e.data.geographyLevel===g.a.COUNTRY)return e.node.expanded?this.getCountryGridResources().COLLAPSEGRID:this.getCountryGridResources().EXPANDGRID},e.prototype.getAddCountryOptions=function(){var e=this;return e.addCountryOptions?e.addCountryOptions.forEach((function(t){t.isEnabled=e.isAddCountryOptionEnabled()})):e.addCountryOptions=[{name:e.getAddCountryOptionsResources().DOWNLOAD_PLANS_TEMPLATE,isVisible:!0,isEnabled:e.isAddCountryOptionEnabled(),tooltipMsg:e.localAppResources.getResource("OptionNotAccessible")},{name:e.getAddCountryOptionsResources().SELECT_COUNTRIES_FROM_SOURCE_OR_TEMPLATE,isVisible:!0,isEnabled:e.isAddCountryOptionEnabled(),tooltipMsg:e.localAppResources.getResource("OptionNotAccessible")}],this.addCountryOptions},e.prototype.isAddCountryOptionEnabled=function(){return this.planDetails.planProperties.isPlan&&this.planDetails.planProperties.isCohortPlan===o.Gb&&!this.planDetails.planProperties.isPlanApproved&&!this.planDetails.planProperties.isReadOnly&&!this.planDetails.planProperties.isPrevApproved},e.prototype.getReportingPeriod=function(e){var t=this.studyListService.getStudyInfoByKey(e),n={};return t&&(n=this.appDataService.getReportingFreqDefByName(t.reportingPeriod)),n.Value},e.prototype.isSRAvailable=function(){return this.appDataService.isSRAvailable()},e.prototype.getStudyTarget=function(e){return{geoHierarchy:[this.getStudyTargetAndWorldWide().Study_Target],geographyKey:0,geographyLevel:this.getStudyTargetAndWorldWide().Study_Target,geographyName:this.getStudyTargetAndWorldWide().Study_Target,isCohortCountry:!1,planParamsDetails:{enrollmentTarget:e.planProperties.enrollmentTarget,FSI:e.planProperties.FSI,PLSR:e.planProperties.LSR,PLSS:e.planProperties.LSS,FPA:e.planProperties.FPA}}},e.prototype.calculateSASPercentage=function(e,t){if(0===e||0===t)return 0;var n=Math.floor(e*(t/100));return l.c.formatDecimal(n/e*100)},e.prototype.calculateDaysfromFPAToFSI=function(e,t){var n=l.c.dayDiff(e,t);return n>0?n:0},e.prototype.getBatchCountryOptions=function(){return this.batchCountryOptions||(this.batchCountryOptions=[{name:this.getBatchCountryOptionsResources().LOCK_COUNTRIES,isVisible:!0,isEnabled:this.hasEditAccess()},{name:this.getBatchCountryOptionsResources().UNLOCK_COUNTRIES,isVisible:!0,isEnabled:this.hasLockUnlockAccess()},{name:this.getBatchCountryOptionsResources().DUPLICATE_COUNTRIES,isVisible:!0,isEnabled:this.hasEditAccess()},{name:this.getBatchCountryOptionsResources().COPY_PARAMETERS,isVisible:!0,isEnabled:this.hasEditAccess()},{name:this.getBatchCountryOptionsResources().PASTE_PARAMETERS,isVisible:!0,isEnabled:this.hasEditAccess()},{name:this.getBatchCountryOptionsResources().DELETE_COUNTRIES,isVisible:!0,isEnabled:this.hasEditAccess()}]),this.batchCountryOptions},e.prototype.validateSitesToRedistribute=function(e,t,n,a,i){var o=new Array;if(!a||!i)return this.getValidationMessage(o);n=n||0,a=a||0;var s=0;(t=l.c.isDefined(t,!0)?t:0)>a?s=n<=t?0:n-t:t<=a&&(s=n<=a?0:n-a);var u=n-a<0?0:n-a,d=Object(r.ib)(e,s,u);null==e&&Object.assign(d,{requiredFieldError:!0});var c=this.plansService.consolidateValidationErrors(d);return c&&o.push(c),this.getValidationMessage(o)},e.prototype.applyValidationOnPercentSI=function(e){return!e||!this.isCohortAdjustment||e.planParamsDetails.siteInitiationMethod===o.ac.PERCENT},e.prototype.validateDaysTo90=function(e,t,n,a,i,s,u){var d=new Array;if(!0===this.applyValidationOnPercentSI(i)&&!i.isCohortCountry){var c=Object(r.fb)(e,t,null,0);if(a&&!l.c.isDefined(e,!0)&&i.planParamsDetails.siteInitiationMethod===o.ac.PERCENT&&Object.assign(c,{requiredFieldError:!0}),l.c.isDefined(e,!0)&&l.c.isDefined(u,!0)){var p=this.checkForAfterARTBValue(e,u);Object.assign(c,p)}if(l.c.isDefined(e,!0)&&l.c.isDefined(s,!0)){var h=this.checkForMaxValue(e,s);Object.assign(c,h)}var m=this.plansService.consolidateValidationErrors(c);if(m&&d.push(m),i.planParamsDetails.siteInitiationMethod===o.ac.PERCENT){var g=Object(r.eb)(n,t,e);(m=this.plansService.consolidateValidationErrors(g))&&d.push(m)}}return this.getValidationMessage(d)},e.prototype.validateDaysTo50=function(e,t,n,a,i,s,u){var d=new Array;if(!0===this.applyValidationOnPercentSI(i)&&!i.isCohortCountry){var c=Object(r.fb)(e,n,t,0);if(a&&!l.c.isDefined(e,!0)&&i.planParamsDetails.siteInitiationMethod===o.ac.PERCENT&&Object.assign(c,{requiredFieldError:!0}),l.c.isDefined(t,!0)&&l.c.isDefined(u,!0)){var p=this.checkForAfterARTBValue(e,u);Object.assign(c,p)}if(l.c.isDefined(e,!0)&&l.c.isDefined(s,!0)){var h=this.checkForMaxValue(e,s);Object.assign(c,h)}var m=this.plansService.consolidateValidationErrors(c);m&&d.push(m)}return this.getValidationMessage(d)},e.prototype.validateDaysTo25=function(e,t,n,a,i,s,u){var d=new Array;if(!0===this.applyValidationOnPercentSI(i)&&(e=void 0===e?null:e,!i.isCohortCountry)){var c=Object(r.fb)(n,null,e,0);if(a&&!l.c.isDefined(n,!0)&&i.planParamsDetails.siteInitiationMethod===o.ac.PERCENT&&Object.assign(c,{requiredFieldError:!0}),l.c.isDefined(t,!0)&&l.c.isDefined(u,!0)){var p=this.checkForAfterARTBValue(n,u);Object.assign(c,p)}if(l.c.isDefined(n,!0)&&l.c.isDefined(s,!0)){var h=this.checkForMaxValue(n,s);Object.assign(c,h)}var m=this.plansService.consolidateValidationErrors(c);m&&d.push(m)}return this.getValidationMessage(d)},e.prototype.checkForMaxValue=function(e,t){return Number(e)>Number(t)?{max:{max:t}}:null},e.prototype.checkForAfterARTBValue=function(e,t){return Number(e)>Number(t)?{daysToSIAfterARTB:{daysToSIAfterARTB:t}}:null},e.prototype.getValidationMessage=function(e){var t="";return e&&e.length>0&&e.forEach((function(e){""!==t&&(t+=" \n "),t+=e})),t},e.prototype.isFSIRequired=function(e,t,n){return!(!n&&e.planParamsDetails&&e.planParamsDetails.isAdjustable&&(void 0===e.planParamsDetails.redistSites||0===e.planParamsDetails.redistSites))},e.prototype.hasFSIActuals=function(e){return e.planParamsDetails.actuals&&e.planParamsDetails.actuals.FSI&&void 0!==e.planParamsDetails.actuals.FSI&&""!==e.planParamsDetails.actuals.FSI},e.prototype.validateFSI=function(e,t,n,a,i,o,s,u){var d=new Array;if(this.isFSICellEnabled(t,!o)&&!0!==t.isCohortCountry){var c=Object(r.gb)(e,n,a,o,s,u);i&&!l.c.isDefined(e)&&Object.assign(c,{requiredFieldError:!0});var p=this.plansService.consolidateValidationErrors(c);p&&d.push(p)}return this.getValidationMessage(d)},e.prototype.validateFSS=function(e,t,n){var l=new Array,a=Object(r.hb)(e,t);if(n){var i=this.plansService.consolidateValidationErrors(a);i&&l.push(i)}return this.getValidationMessage(l)},e.prototype.calculateSR=function(e,t){if(l.c.isValidNumber(e)&&l.c.isValidNumber(t))return e/(1-t/100)},e.prototype.calculateRR=function(e,t){if(l.c.isValidNumber(e)&&l.c.isValidNumber(t))return e*(1-t/100)},e.prototype.isValidSR=function(e,t){var n=this.calculateSR(e,t);return!!(l.c.isValidNumber(n)&&n<=1e3)},e.prototype.validateRR=function(e,t,n,a,i,s,u){var d,c=new Array;if(this.isRRValidationRequired()&&!s&&!u){var p=Object(r.ib)(e,n,a,null,i);l.c.isDefined(e,!0)||this.currentSolver===o.gc.MIN_NUM_RATE||Object.assign(p,{requiredFieldError:!0}),i&&!l.c.isDefined(e,!0)&&Object.assign(p,{minNumRequiredError:!0});var h=this.plansService.consolidateValidationErrors(p);h&&(h=h.replace("{0}",""+n),c.push(h)),l.c.isValidNumber(e)&&l.c.isValidNumber(t)&&l.c.isValidNumber(d=e/(1-t/100))&&d>1e3&&c.push(this.errorTermsStoreService.getErrorMessage("maxSrExceedError"))}return this.getValidationMessage(c)},e.prototype.validateSAS=function(e,t,n,a,i,o){var s=new Array;if(!i&&!o){var u=this.calculateActiveSites(t,e),d=Object(r.jb)(e,u,n);l.c.isDefined(e,!0)||Object.assign(d,{requiredFieldError:!0}),a&&!l.c.isDefined(e,!0)&&Object.assign(d,{ActiveSitesZeroError:!0});var c=this.plansService.consolidateValidationErrors(d);c&&s.push(c)}return this.getValidationMessage(s)},e.prototype.calculateActiveSites=function(e,t){var n;return l.c.isDefined(e,!0)&&l.c.isDefined(t,!0)&&(n=Math.floor(e*t/100),l.c.isDefined(n,!0)||(n="")),n},e.prototype.validateSR=function(e,t,n,a,i,s,u){var d=new Array;if(this.isSRValidationRequired()&&!s&&!u){var c=Object(r.ib)(e,n,a,null,i);this.isSRAvailable()&&this.currentSolver!==o.gc.MIN_NUM_RATE&&(l.c.isDefined(e,!0)||Object.assign(c,{requiredFieldError:!0})),i&&!l.c.isDefined(e,!0)&&Object.assign(c,{minNumRequiredError:!0});var p=this.plansService.consolidateValidationErrors(c);p&&(p=p.replace("{0}",""+n),d.push(p))}return this.getValidationMessage(d)},e.prototype.validateScreenFailure=function(e,t,n,a,i,o,s,u){void 0===a&&(a=!1);var d=new Array;if(!s){var c=Object(r.ib)(e,i,o);l.c.isDefined(e,!0)||(c=this.requiredFieldValidation(c,u,!0));var p=this.plansService.consolidateValidationErrors(c);return p&&d.push(p),this.getValidationMessage(d)}},e.prototype.validateARTB=function(e,t,n){var a=new Array,i=Object(r.db)(e,t,n);this.isSolverActive&&this.currentSolver!==o.gc.LAST_SUBJECT&&(l.c.isDefined(e,!1)||Object.assign(i,{requiredFieldError:!0}));var s=this.plansService.consolidateValidationErrors(i);return s&&a.push(s),this.getValidationMessage(a)},e.prototype.getNoOfPeriodsByPercOfCenterInit=function(e,t){var n,a=this;return e&&e.planParamsDetails&&e.planParamsDetails.centerInitInfo&&e.planParamsDetails.centerInitInfo.percentCenterInitInfo&&e.planParamsDetails.centerInitInfo.percentCenterInitInfo.centerInitSlot.forEach((function(l){a.planDetailsService.isCohortPlan()||!e.planParamsDetails.isAdjustable||e.planParamsDetails.redistSites?l.percOfCenterInit===t&&(n=l.noOfPeriods):l.percOfCenterInit===t&&!0===l.redistributed&&(n=l.noOfPeriods)})),l.c.isValidNumber(n)?n:null},e.prototype.getNoOfPeriodsByPercent=function(e,t,n){var a;return e&&t&&n&&(e===o.ac.PERCENT?n.percentCenterInitInfo&&n.percentCenterInitInfo.centerInitSlot&&n.percentCenterInitInfo.centerInitSlot.forEach((function(e){e.percOfCenterInit===t&&(a=e.noOfPeriods)})):e===o.ac.GRANULAR&&n.granularCenterInitInfo.centerInitSlot.forEach((function(e){e.percOfCenterInit===t&&(a=e.noOfPeriods)}))),l.c.isValidNumber(a)?a:null},e.prototype.initializeCenterInitInfo=function(e){var t;return e&&(t=JSON.parse(JSON.stringify(e))),t?t.percentCenterInitInfo?t.percentCenterInitInfo.centerInitSlot||(t.percentCenterInitInfo.centerInitSlot=[]):t.percentCenterInitInfo={centerInitSlot:[]}:t={percentCenterInitInfo:{centerInitSlot:[]}},t},e.prototype.setCenterInitSlotForCenterInitInfo=function(e,t,n,l,a,i,r,o){var s=null;if(e){var u=(s=JSON.parse(JSON.stringify(e))).percentCenterInitInfo.centerInitSlot.findIndex((function(e){return e.percOfCenterInit===t}));u>-1?s.percentCenterInitInfo.centerInitSlot[u].noOfPeriods=n:s.percentCenterInitInfo.centerInitSlot.push({percOfCenterInit:t,noOfPeriods:n,slotNum:l,slotStartDate:a,slotEndDate:i,redistributed:r,slotPlannedDate:o})}return s},e.prototype.calculatePercentCenterInit=function(e,t,n,a,i,r,o){var s={centerInitSlot:[]};return s&&(s.centerInitSlot.push(this.calculateCenterInitSlot(i,i,e,t,25,1,r,o)),s.centerInitSlot.push(this.calculateCenterInitSlot(i,l.c.formatDate(l.c.dateAdd(i,t)),e,n,50,2,r,o)),s.centerInitSlot.push(this.calculateCenterInitSlot(i,l.c.formatDate(l.c.dateAdd(i,n)),e,a,90,3,r,o))),s},e.prototype.isRedistributed=function(e,t){return e&&!t?e.planParamsDetails.isAdjustable&&e.planParamsDetails.redistSites>0:null},e.prototype.has25_50_90=function(e){var t=this.getNoOfPeriodsByPercOfCenterInit(e.node.data,25),n=this.getNoOfPeriodsByPercOfCenterInit(e.node.data,50),a=this.getNoOfPeriodsByPercOfCenterInit(e.node.data,90);return l.c.isDefined(t,!0)&&l.c.isDefined(n,!0)&&l.c.isDefined(a,!0)},e.prototype.hasAnyDaysToSIDefined=function(e){if(e&&e.planParamsDetails&&(!e.planParamsDetails.isAdjustable||e.planParamsDetails.isAdjustable&&e.planParamsDetails.redistSites>0)){var t=this.getNoOfPeriodsByPercOfCenterInit(e,25),n=this.getNoOfPeriodsByPercOfCenterInit(e,50),a=this.getNoOfPeriodsByPercOfCenterInit(e,90);return l.c.isDefined(t,!0)||l.c.isDefined(n,!0)||l.c.isDefined(a,!0)}return!1},e.prototype.calculateCenterInitSlot=function(e,t,n,a,i,r,o,s){var u=new S;return u.slotStartDate=l.c.isDefined(t)?t:"",u.slotEndDate=l.c.isDefined(e)&&l.c.isDefined(a,!0)?l.c.formatDate(l.c.dateAdd(e,a)):"",u.noOfPeriods=l.c.isDefined(a,!0)?a:null,u.percOfCenterInit=i,u.noOfCenters=l.c.isDefined(n,!0)?Math.floor(n*(i/100)):null,u.slotNum=r,u.redistributed=o,u.slotPlannedDate=s,u},e.prototype.findCenterInitSlot=function(e,t){return e?e.find((function(e){return e.percOfCenterInit===t})):null},e.prototype.validateMinRT=function(e){var t=new Array,n=e.minRT;if(e.actuals&&e.actuals.RT&&+e.actuals.RT>0){0==+e.minRT&&(n=0);var l=Object(r.ib)(n,e.actuals.RT,null,"minRTNumExceedError"),a=this.plansService.consolidateValidationErrors(l);a&&t.push(a)}return this.getValidationMessage(t)},e.prototype.validateMaxRT=function(e){var t=new Array;if(void 0!==e.maxRT&&e.maxRT>-1){var n=Object(r.ib)(e.maxRT,e.minRT,null,"maxRTLessError"),l=this.plansService.consolidateValidationErrors(n);l&&t.push(l)}return this.getValidationMessage(t)},e.prototype.validateRT=function(e,t,n,a){var i=new Array,s=Object(r.ib)(e,t,n);l.c.isDefined(e,!0)||this.currentSolver===o.gc.SUBJECT_DISTRIBUTION||this.currentSolver===o.gc.SUBJECTS||(s=this.requiredFieldValidation(s,a));var u=this.plansService.consolidateValidationErrors(s);return u&&i.push(u),this.getValidationMessage(i)},e.prototype.requiredFieldValidation=function(e,t,n){return void 0===n&&(n=!1),this.isCohortPlan()?n&&this.plansService.isRTypeCohortStudy()?t||Object.assign(e,{requiredFieldError:!0}):t&&Object.assign(e,{requiredFieldError:!0}):Object.assign(e,{requiredFieldError:!0}),e},e.prototype.validateOverEnrollment=function(e,t,n,a){var i=new Array,o=Object(r.ib)(e,t,n);l.c.isDefined(e,!0)||(o=this.requiredFieldValidation(o,a));var s=this.plansService.consolidateValidationErrors(o);return s&&i.push(s),this.getValidationMessage(i)},e.prototype.validateNumberOfSites=function(e,t,n,a,i,o,s,u){var d,c=new Array;if(!o&&!s){if(!0===this.planDetailsService.checkAdjustmentSitesFiled1(u))return"";d=Object(r.ib)(e,t,n),!i&&!a||null!=e&&0!==e||Object.assign(d,{min:{min:t}}),console.log("validationOutput : ",d),l.c.isDefined(e,!0)||Object.assign(d,{requiredFieldError:!0});var p=this.plansService.consolidateValidationErrors(d);p&&c.push(p)}return this.getValidationMessage(c)},e.prototype.isWWorStudyTarget=function(e){return e.data.geographyLevel===this.getStudyTargetAndWorldWide().WW||e.data.geographyLevel===this.getStudyTargetAndWorldWide().Study_Target},e.prototype.getFilteredGeographies=function(e,t,n,a,i){var r=this,o=JSON.parse(JSON.stringify(e)),s=[],u=(this.getReportingPeriod(this.planDetailsService.studyKey),[]);return r.planDetailsService.setReadOnly(!0),o.forEach((function(e){if(!i&&a&&e.geographyLevel!==g.a.WW||!a&&e.geographyLevel===g.a.WW||i){var o;if(o=t?r.findCountryInAllEditedCountries(e,n.isCohorPlan):r.findCountryInEditedCountries(e,n),e.geographyLevel===r.getStudyTargetAndWorldWide().Study_Target||e.isCohortCountry&&e.geographyLevel===r.getStudyTargetAndWorldWide().WW||(e.planParamsDetails.CalcSAS=r.calculateSASPercentage(e.planParamsDetails.numSites,e.planParamsDetails.ARC)),e.planParamsDetails&&n.FPA&&e.planParamsDetails.FSI&&!0!==e.isCohortCountry&&e.geographyLevel!==r.getStudyTargetAndWorldWide().WW){var d=r.getCountryFSI(e);""===d&&(e.planParamsDetails.daysToFSI=""),e.planParamsDetails.daysToFSI=r.calculateDaysfromFPAToFSI(n.FPA,d)}o?(s.push(o),u.push(o),r.planDetailsService.setSaveDisability(!1),r.planDetailsService.setReadOnly(!1),r.planDetailsService.setFormStatus(!0)):(e.planParamsDetails.calculatedRR=l.c.isDefined(e.planParamsDetails.RR,!0)?e.planParamsDetails.RR:null,e.planParamsDetails.calculatedSR=l.c.isDefined(e.planParamsDetails.SR,!0)?e.planParamsDetails.SR:null,e.isSelectedCohort=!r.selectedCohort||!(!e.isCohortCountry||r.selectedCohort.cohortKey!==e.cohortKey&&-1!==r.selectedCohort.cohortKey),void 0!==e.planParamsDetails.actuals&&void 0!==e.planParamsDetails.actuals.RT&&e.planParamsDetails.actuals.RT>0&&(void 0===e.planParamsDetails.minRT||-1===e.planParamsDetails.minRT)&&e.geographyLevel!==r.getStudyTargetAndWorldWide().WW&&(e.planParamsDetails.minRT=e.planParamsDetails.actuals.RT),r.isCohortAdjustmentPlan()&&r.isCustomSiteInitiation(e)&&(e.planParamsDetails.FSI=r.getCohortAdjustmentFSI(r.planDetails,e)),e.errorFields={},r.hasPercentCenterInitInfo(e)&&(e.planParamsDetails.centerInitInfo.percentCenterInitInfo=r.calculatePercentCenterInit(e.planParamsDetails.numSites,r.getNoOfPeriodsByPercOfCenterInit(e,25),r.getNoOfPeriodsByPercOfCenterInit(e,50),r.getNoOfPeriodsByPercOfCenterInit(e,90),r.getCountryFSI(e),r.isRedistributed(e,n.isPlan),null)),e.geoHierarchy=e.isCohortCountry?[e.geographyName,e.cohortName]:[e.geographyName],a||e.geographyLevel!==g.a.WW||(e.isHiddenWWData=!1,e.label=!1===e.isCohortCountry?g.a.COUNTRY:g.a.COHORT),s.push(e))}})),this.setEditedCountries(u),s},e.prototype.findCountryInEditedCountries=function(e,t){var n=this.getEditedButNotSavedCountries();if(n&&n.length>0)for(var l=0;l<n.length;l++){var a=n[l];if(a.geographyKey===e.geographyKey){if("N"===t.isCohorPlan)return a;if(!1===e.isCohortCountry)return a;if(a.hasOwnProperty("cohortKey")&&e.hasOwnProperty("cohortKey")&&a.cohortKey===e.cohortKey)return a}}},e.prototype.findCountryInAllEditedCountries=function(e,t){var n=this.getAllEditedRows();if(n&&n.length>0)for(var l=0;l<n.length;l++){var a=n[l];if(a.geographyKey===e.geographyKey){if("N"===t)return a;if(!1===a.isCohortCountry&&!1===e.isCohortCountry)return a;if(a.hasOwnProperty("cohortKey")&&e.hasOwnProperty("cohortKey")&&a.cohortKey===e.cohortKey)return a}}},e.prototype.hasPercentCenterInitInfo=function(e){return e.planParamsDetails&&e.planParamsDetails.siteInitiationMethod===o.ac.PERCENT&&e.planParamsDetails.centerInitInfo&&e.planParamsDetails.centerInitInfo.percentCenterInitInfo},e.prototype.validateCountryData=function(e,t){if(e&&e.length>0)for(var n=0;n<e.length;n++)e[n]=this.validateSingleCountryRowData(e[n],t);return e},e.prototype.resetValidationOfCountryData=function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++)e[t].errorFields={};return e},e.prototype.validateSingleCountryRowData=function(e,t){var n=e;return n.errorFields=n.errorFields||{},this.hasCountryAchievedLSR(e,t)||this.isExcludedCohortCountryData(e)?(n.errorFields={},n):(n.errorFields[m.a.RT]=this.validateRT(n.planParamsDetails.enrollmentTarget,o.sc.MIN_ENROLLMENT_TARGET,o.sc.MAX_ENROLLMENT_TARGET,n.isCohortCountry),n.errorFields[m.a.DAYS_TO_25]=this.validateDaysTo25(this.getNoOfPeriodsByPercOfCenterInit(n,50),this.getNoOfPeriodsByPercOfCenterInit(n,90),this.getNoOfPeriodsByPercOfCenterInit(n,25),this.isFSIRequired(n,!0,this.planDetails.planProperties.isPlan),e,o.sc.MAX_PERIOD_25),n.errorFields[m.a.DAYS_TO_50]=this.validateDaysTo50(this.getNoOfPeriodsByPercOfCenterInit(n,50),this.getNoOfPeriodsByPercOfCenterInit(n,90),this.getNoOfPeriodsByPercOfCenterInit(n,25),this.isFSIRequired(n,!0,this.planDetails.planProperties.isPlan),e,o.sc.MAX_PERIOD_50),n.errorFields[m.a.DAYS_TO_90]=this.validateDaysTo90(this.getNoOfPeriodsByPercOfCenterInit(n,90),this.getNoOfPeriodsByPercOfCenterInit(n,50),this.getNoOfPeriodsByPercOfCenterInit(n,25),this.isFSIRequired(n,!0,this.planDetails.planProperties.isPlan),e,o.sc.MAX_PERIOD_90,l.c.dayDiff(n.planParamsDetails.FSI,this.planDetails.planProperties.LSS)),n.errorFields[m.a.FSI]=this.validateFSI(this.getCountryFSI(n),n,t.FSI,t.LSS,this.isFSIRequired(n,this.isSolverActive,this.planDetails.planProperties.isPlan),!this.planDetails.planProperties.isPlan,n.planParamsDetails.isAdjustable,this.planDetails.planProperties.isCohortPlan===o.pb),n.errorFields[m.a.FSS]=this.validateFSS(n.planParamsDetails.FSS,this.getCountryFSI(n),this.isFSSFieldEditable(n,this.planDetails.planProperties.isPlan,this.planDetails.planProperties.isDepCohort)),n.errorFields[m.a.NUM_SITES]=this.validateNumberOfSites(n.planParamsDetails.numSites,this.calculateMinNumSites(n,this.planDetails.planProperties.isPlan),o.sc.MAX_NUM_SITES,this.hasAnyDaysToSIDefined(n),this.isSolverActive,n.isCohortCountry,n.isCohortExcluded,n),(!this.isCohortPlan()||this.isCohortPlan()&&n.isCohortCountry)&&(n.errorFields[m.a.OE]=this.validateOverEnrollment(n.planParamsDetails.overRecruitmentPercent,o.sc.MIN_OVER_RECRUITMENT_PERCENT,o.sc.MAX_OVER_RECRUITMENT_PERCENT,n.isCohortCountry)),(!this.isCohortPlan()||this.isCohortPlan()&&n.isCohortCountry)&&(n.errorFields[m.a.RR]=this.validateRR(n.planParamsDetails.RR,n.planParamsDetails.SFR,0,o.sc.MAX_RR,this.isSolverActive,n.isCohortExcluded,this.isCohortPlanCountryRow(n))),(!this.isCohortPlan()||this.isCohortPlan()&&n.isCohortCountry)&&(n.errorFields[m.a.SR]=this.validateSR(n.planParamsDetails.SR,n.planParamsDetails.SFR,0,o.sc.MAX_SR,this.isSolverActive,n.isCohortExcluded,this.isCohortPlanCountryRow(n))),(!this.isCohortPlan()||this.isCohortPlan()&&n.isCohortCountry)&&(n.errorFields[m.a.SFR]=this.validateScreenFailure(n.planParamsDetails.SFR,n.planParamsDetails.calculatedRR,n.planParamsDetails.calculatedSR,this.isSRAvailable(),0,o.sc.MAX_SFR,n.isCohortExcluded,n.isCohortCountry)),(!this.isCohortPlan()||this.isCohortPlan()&&n.isCohortCountry)&&(n.errorFields[m.a.SAS]=this.validateSAS(n.planParamsDetails.ARC,n.planParamsDetails.numSites,o.sc.MAX_CALC_SAS,this.isSolverActive,n.isCohortExcluded,this.isCohortPlanCountryRow(n))),n)},e.prototype.isInvalidCountryData=function(e,t){if(e&&e.length>0)for(var n=0;n<e.length;n++){var a=e[n];if(this.validateRT(a.planParamsDetails.enrollmentTarget,o.sc.MIN_ENROLLMENT_TARGET,o.sc.MAX_ENROLLMENT_TARGET,a.isCohortCountry))return!0;if(this.validateDaysTo25(this.getNoOfPeriodsByPercOfCenterInit(a,50),this.getNoOfPeriodsByPercOfCenterInit(a,90),this.getNoOfPeriodsByPercOfCenterInit(a,25),this.isFSIRequired(a,this.isSolverActive,this.planDetails.planProperties.isPlan),a,o.sc.MAX_PERIOD_25))return!0;if(this.validateDaysTo50(this.getNoOfPeriodsByPercOfCenterInit(a,50),this.getNoOfPeriodsByPercOfCenterInit(a,90),this.getNoOfPeriodsByPercOfCenterInit(a,25),this.isFSIRequired(a,this.isSolverActive,this.planDetails.planProperties.isPlan),a,o.sc.MAX_PERIOD_50))return!0;if(this.validateDaysTo90(this.getNoOfPeriodsByPercOfCenterInit(a,90),this.getNoOfPeriodsByPercOfCenterInit(a,50),this.getNoOfPeriodsByPercOfCenterInit(a,25),this.isFSIRequired(a,this.isSolverActive,this.planDetails.planProperties.isPlan),a,o.sc.MAX_PERIOD_90,l.c.dayDiff(a.planParamsDetails.FSI,this.planDetails.planProperties.LSS)))return!0;if(this.validateFSI(this.getCountryFSI(a),a,t.FSI,t.LSS,this.isFSIRequired(a,this.isSolverActive,this.planDetails.planProperties.isPlan),!this.planDetails.planProperties.isPlan,a.planParamsDetails.isAdjustable))return!0;if(this.validateFSS(a.planParamsDetails.FSS,this.getCountryFSI(a),this.isFSSFieldEditable(a,this.planDetails.planProperties.isPlan,this.planDetails.planProperties.isDepCohortPlan)))return!0;if(this.validateNumberOfSites(a.planParamsDetails.numSites,this.calculateMinNumSites(a,this.planDetails.planProperties.isPlan),o.sc.MAX_NUM_SITES,this.hasAnyDaysToSIDefined(a),this.isSolverActive,a.isCohortCountry,a.isCohortExcluded,a))return!0;if(this.validateOverEnrollment(a.planParamsDetails.overRecruitmentPercent,o.sc.MIN_OVER_RECRUITMENT_PERCENT,o.sc.MAX_OVER_RECRUITMENT_PERCENT,a.isCohortCountry))return!0;if(this.validateRR(a.planParamsDetails.RR,a.planParamsDetails.SFR,0,o.sc.MAX_RR,this.isSolverActive,a.isCohortExcluded,this.isCohortPlanCountryRow(a)))return!0;if(this.validateSR(a.planParamsDetails.SR,a.planParamsDetails.SFR,0,o.sc.MAX_SR,this.isSolverActive,a.isCohortExcluded,this.isCohortPlanCountryRow(a)))return!0;if(this.validateScreenFailure(a.planParamsDetails.SFR,a.planParamsDetails.RR,a.planParamsDetails.SR,this.isSRAvailable(),0,o.sc.MAX_SFR,a.isCohortExcluded,a.isCohortCountry))return!0;if(this.validateSAS(a.planParamsDetails.ARC,a.planParamsDetails.numSites,o.sc.MAX_CALC_SAS,this.isSolverActive,a.isCohortExcluded,this.isCohortPlanCountryRow(a)))return!0}return!1},e.prototype.isInvalidCountryGrid=function(e,t,n){if(void 0===t&&(t=!0),this.planDetailsService.resetInvalidCountryName(),e&&e.length>0){var l=[m.a.RT,m.a.OE,m.a.SR,m.a.RR,m.a.SFR,m.a.FSI,m.a.FSS,m.a.NUM_SITES,m.a.RE_DIST_SITES,m.a.SAS,m.a.DAYS_TO_25,m.a.DAYS_TO_50,m.a.DAYS_TO_90,"planParamsDetails.minRT","planParamsDetails.maxRT"],a=!1;if(e&&e.length>0){for(var i=0;i<e.length;i++)for(var r=e[i],s=r.planParamsDetails.siteInitiationMethod,u=0;u<l.length;u++)t&&s===o.ac.GRANULAR&&l[u]===m.a.NUM_SITES?this.planDetailsService.checkAdjustmentSitesFiled1(r):r.errorFields[l[u]]&&(a=!0);return a}return!1}return!0},e.prototype.isConfirmationPopupRequired=function(){var e=this.getSelectedAndEditedCountriesGridData(),t=this.getEditedButNotSavedCountries();return e&&t&&(e.length>0||t.length>0)},e.prototype.getEditedCountries=function(){return this.getEditedButNotSavedCountries()},e.prototype.setEditedCountries=function(e){this.setEditedButNotSavedCountries(e)},e.prototype.setSaveDisability=function(e){this.planDetailsService.setSaveDisability(e)},e.prototype.updatePlanDetails=function(e,t,n,l,a){this.setSelectedAndEditedCountriesGridData(e),this.setEditedCountries(n),this.isInvalidCountryGrid(t,!0,l),this.planDetailsService.setSavePlanCommandTags(this.getCommandTagsByPlanType(t,l.isPlan,!1,this.planDetails.planProperties,a))},e.prototype.isFormValidForallCountries=function(e,t){return void 0===t&&(t=!0),this.isInvalidCountryGrid(e,t)},e.prototype.getCommandTagsByPlanType=function(e,t,n,l,a){void 0===n&&(n=!1);var i=this.planDetailsService.getSourceCountriesList(),r=this.getReportingPeriod(this.planDetailsService.studyKey);return t?n?(new c).getCommandTagsForMCS(e,i,r,this.appDataService.appDataResponse,l,this.isCohortPlan(),this.plansService.isRTypeCohortStudy(),"",a,this.planDetailsService.planDetailsResponseData):(new c).getCommandTags(e,i,r,this.appDataService.appDataResponse,l,!1,l.isCohortPlan===o.pb,this.plansService.isRTypeCohortStudy(),a,this.planDetailsService.planDetailsResponseData):n?(new p).getCommandTagsForMCS(e,i,r,this.appDataService.appDataResponse,l,this.isCohortPlan(),this.plansService.isRTypeCohortStudy(),"",a,this.planDetailsService.planDetailsResponseData):(new p).getCommandTags(e,i,r,this.appDataService.appDataResponse,l,!1,l.isCohortPlan===o.pb,this.plansService.isRTypeCohortStudy(),a,this.planDetailsService.planDetailsResponseData)},e.prototype.getCommandTagsByPlanTypeForMCS=function(e,t,n,l,a,i){void 0===n&&(n=!1);var r=this.planDetailsService.getSourceCountriesList(),o=this.getReportingPeriod(this.planDetailsService.studyKey);return t?(new c).getCommandTagsForMCS(e,r,o,this.appDataService.appDataResponse,l,this.isCohortPlan(),this.plansService.isRTypeCohortStudy(),a,i):(new p).getCommandTagsForMCS(e,r,o,this.appDataService.appDataResponse,l,this.isCohortPlan(),this.plansService.isRTypeCohortStudy(),a,i,this.planDetailsService.planDetailsResponseData)},e.prototype.setSaveDisabilityByValidation=function(e,t){this.isInvalidCountryGrid(e,t)},e.prototype.clearCountriesData=function(){this.setEditedCountries(null),this.setSelectedAndEditedCountriesGridData(null),this.planDetailsService.setSavePlanCommandTags(null)},e.prototype.showUnsavedDataConfirmation=function(){return this.planDetailsService.showUnsavedDataConfirmation()},e.prototype.getConfirmProp=function(){return{heading:this.localAppResources.getResource("unsavedTitle"),message:this.localAppResources.getResource("unsavedMessage"),okLabel:this.localAppResources.getResource(r.a.OkLabel),cancelLabel:this.localAppResources.getResource(r.a.CancelLabel)}},e.prototype.getSelectedAndEditedCountriesGridData=function(){return this.selectedAndEditedCountriesGridData},e.prototype.setSelectedAndEditedCountriesGridData=function(e){this.selectedAndEditedCountriesGridData=e},e.prototype.getEditedButNotSavedCountries=function(){return this.editedButNotSavedCountries},e.prototype.setEditedButNotSavedCountries=function(e){this.editedButNotSavedCountries=e},e.prototype.addCountryList=function(e,t,n){var a,s=this,u=r.m.getModuleInfo(o.Db,this.planDetails.planProperties.studyKey?this.planDetails.planProperties.studyKey.toString():null);if(a=this.payloadCommandService.getCommandDetails(e?o.p.ADD_COUNTRY:o.p.ADD_ADJUST_COUNTRY_PLAN,t,{},n,u)){var d={};return d.dependencyList=[l.l.GetPlanDetails+"_"+this.planDetailsService.studyKey+"_"+this.planDetails.planProperties.planKey,l.l.GetPlanListKey+"_"+this.planDetailsService.studyKey],this.baseConnectionService.sendRequest(a,d).pipe(Object(i.a)((function(e){if(e.result.toUpperCase()===l.k.RESULT_OK)return e&&e.studyPlanDetails?(s.planDetailsService.setCopyPlanVal(e,!0),e.studyPlanDetails):null;if(e.result.toUpperCase()===l.k.RESULT_ERROR)if(e.error.errorCode.toString()===o.Y.PLAN_ALREADY_APPROVED){var t=s.errorTermsStoreService.getErrorMessage(o.U+o.Y.ADD_COUNTRY_TO_APPROVED_PLAN);s.plansService.showErrorMessage(t)}else t=s.errorTermsStoreService.getErrorMessage(+e.error.errorCode),s.plansService.showErrorMessage(t)})))}},e.prototype.getSourceSummary=function(e){if(console.log("get source summary",e),e)return console.log("get source summary",this.studySummaryService.getSourceSummary(e)),this.studySummaryService.getSourceSummary(e).pipe(Object(i.a)((function(e){return e})))},e.prototype.updateCountryNotes=function(e,t){var n=r.m.getModuleInfo(o.Db,this.planDetails.planProperties.studyKey?this.planDetails.planProperties.studyKey.toString():null),l=this.updateCountryNotesParam(t),a=this.setParamsBasedOnPlantype(e);if(this.planDetails.planProperties.isPlan){var i=this.payloadCommandService.getCommandDetails(o.p.UPDATE_COUNTRY_PLAN_NOTES,a,{},l,n);return this.sendRequestToServer(i)}var s=this.payloadCommandService.getCommandDetails(o.p.UPDATE_ADJUST_COUNTRY_PLAN_NOTES,a,{},l,n);return this.sendRequestToServer(s)},e.prototype.sendRequestToServer=function(e,t){var n=this;return t||(t={}),t.dependencyList=[l.l.GetPlanDetails+"_"+this.planDetailsService.studyKey+"_"+this.planDetails.planProperties.planKey],this.baseConnectionService.sendRequest(e,t).pipe(Object(i.a)((function(e){if(e.error&&e.error.errorCode){var t=n.errorTermsStoreService.getErrorMessage(+e.error.errorCode);return n.plansService.showErrorMessage(t),null}return e})))},e.prototype.createAddCountryParam=function(e){var t={planCountries:[]};return e.length>0&&e.forEach((function(e){e&&(void 0!==e.geographyKey||null!==e.geographyKey)&&e.geographyName&&t.planCountries.push({country:{params:{countryKey:e.geographyKey,countryName:e.geographyName}}})})),t},e.prototype.updateCountryNotesParam=function(e){var t={noteList:[]};return e.length>0&&e.forEach((function(e){if(e){var n={note:{content:e.content,userId:e.userId,lastModifiedDate:e.lastModifiedDate,indicator:e.indicator}};e.isModified&&(n.note.oldUserId=e.oldUserId),t.noteList.push(n)}})),t},e.prototype.setParamsBasedOnPlantype=function(e){if(void 0===e&&(e=null),this.planDetails&&this.planDetails.planProperties&&void 0!==this.planDetails.planProperties.isPlan||null!==this.planDetails.planProperties.isPlan)return this.createParamObject(this.planDetails.planProperties.isPlan?"planKey":"adjustStudyPlanKey",e)},e.prototype.createParamObject=function(e,t){var n={};return this.planDetails&&this.planDetails.planProperties&&(n.studyKey=this.planDetails.planProperties.studyKey?this.planDetails.planProperties.studyKey:"",n[e]=this.planDetails.planProperties.planKey?this.planDetails.planProperties.planKey:"",t&&(n.countryKey=t),n.version=this.planDetails.planProperties.version?this.planDetails.planProperties.version:"",n.updatePlanDetails=!0,n.isCohortPlan=this.planDetails.planProperties.isCohortPlan),n},e.prototype.updateUsageMetrics=function(){var e=this.userDataService.getLastVisitedStudyKey(),t={usageMetric:{viewVisit:{module:o.Fb,page:o.Db,studykey:e,localTime:(new Date).toString()}}},n=this.userDataService.updateUsageMetrics(t).subscribe((function(){n.unsubscribe()}))},e.prototype.isRowEditable=function(e,t){try{return!e.data.planParamsDetails.isCountryLocked}catch(n){throw new l.e(null,null)}},e.prototype.hasCountryAchievedLSR=function(e,t){try{return!t.isPlan&&l.c.isDefined(e.planParamsDetails.actuals)&&l.c.isDefined(e.planParamsDetails.actuals.LSR)}catch(n){}},e.prototype.getCountriesGridSolverResponse=function(e,t,n){var a,i=r.m.getModuleInfo(o.D,this.planDetails.planProperties.studyKey?this.planDetails.planProperties.studyKey.toString():null),s=[];e.api.forEachNode((function(e){var t=JSON.parse(JSON.stringify(e.data));l.c.isDefined(t.planParamsDetails.enrollmentTarget)||(t.planParamsDetails.enrollmentTarget=0),s.push(t)})),this.isBasePlan()||(s=this.setProjectionValueForNewAdjustment(e,s,this.getSelectedCohort())),this.planDetails.planProperties.isCohortPlan===o.pb&&(s=this.getCountriesForCohort(this.planDetails,s,this.getSelectedCohort()),console.log("data : ",s));var u=this.getCommandTagsByPlanType(s,this.planDetails.planProperties.isPlan,!0,this.planDetails.planProperties);return a=this.payloadCommandService.getCommandDetails(t,this.getMetaData({},n),{},u,i),this.baseConnectionService.sendRequest(a)},e.prototype.isBasePlan=function(){return this.planDetails&&this.planDetails.planProperties&&this.planDetails.planProperties.isPlan},e.prototype.getCountriesForCohort=function(e,t,n){var l=[];if(n)for(var a=0;a<t.length;a++)if(!1===t[a].isCohortCountry&&"WW"!==t[a].geographyLevel){var i=t[a],r=this.getCohortListForCountry(t,i,n);r&&r.length>0&&(i.planParamsDetails.cohortList=r,i.cohortList=r,l.push(i))}return l},e.prototype.getCountryListForSolver=function(e,t,n){var l=[],a=new Map,i=new Map;return e.forEachNode((function(e){if(t){if(!1===e.data.isCohortCountry&&"WW"!==e.data.geographyLevel)a.set(e.data.geographyKey,e.data);else if(e.data.cohortKey===n.cohortKey)if(a.get(e.data.geographyKey)){var l=a.get(e.data.geographyKey);l.planParamsDetails.cohortList&&0!==l.planParamsDetails.cohortList.length||(l.planParamsDetails.cohortList=i.get(e.data.geographyKey)?i.get(e.data.geographyKey):[]),l.planParamsDetails.cohortList.push(e.data),a.set(e.data.geographyKey,l)}else i.get(e.data.geographyKey)?i.set(e.data.geographyKey,i.get(e.data.geographyKey).concat(e.data)):i.set(e.data.geographyKey,[].concat(e.data))}else a.set(e.data.geographyKey,e.data)})),a.forEach((function(e){l.push(a.get(e))})),l},e.prototype.getCohortListForCountry=function(e,t,n){for(var l=[],a=0;a<e.length;a++)e[a].geographyKey===t.geographyKey&&!0===e[a].isCohortCountry&&e[a].cohortKey===n.cohortKey&&l.push(e[a]);return l},e.prototype.getMCSCountriesSolversResponse=function(e,t,n,l,a){var i={},s=r.m.getModuleInfo(o.D,this.planDetails.planProperties.studyKey?this.planDetails.planProperties.studyKey.toString():null),u=[];if(l&&e&&e.node&&e.node.data&&e.node.data.planParamsDetails&&!e.node.data.planParamsDetails.isCountryLocked&&u.push(JSON.parse(JSON.stringify(e.node.data))),this.planDetails&&this.planDetails.planProperties){if(this.planDetails.planProperties.isPlan){var d=this.getCommandTagsByPlanTypeForMCS(u,!0,!1,this.planDetails.planProperties,a),c=this.payloadCommandService.getCommandDetails(t,this.getMetaData(i,n),{},d,s);return this.baseConnectionService.sendRequest(c)}var p;p=this.appDataService.appDataResponse.appMetadata.isEnableProjRates?this.setMCSProjectionValueForNewAdjustment(e,u,l,a):u,d=this.getCommandTagsByPlanTypeForMCS(p,!1,!1,this.planDetails.planProperties,a);var h=this.payloadCommandService.getCommandDetails(t,this.getMetaData(i,n),{},d,s);return this.baseConnectionService.sendRequest(h)}},e.prototype.setMCSProjectionValueForNewAdjustment=function(e,t,n,l){var a=this,i=this.getReportingPeriod(this.planDetailsService.studyKey),r=[];return n&&e.api.forEachNode((function(e){if(t[0].geographyKey===e.data.geographyKey){var n=a.getCountryPlanParam(t,e.data.geographyKey);if(e.data.planParamsDetails.isAdjustable&&!n.isCountryAdjusted){var s=e.data.planParamsDetails.SR,u=e.data.planParamsDetails.RR,d=a.getProjectedValues(e.data.planParamsDetails,n,a.appDataService.appDataResponse,i);l===o.hc.LAST_SUBJECT_RANDOMIZED_DATE?(e.setDataValue(m.a.SFR,d.SFR),e.setDataValue(m.a.SR,d.SR),e.setDataValue(m.a.RR,d.RR),e.setDataValue(m.a.SAS,d.ARC)):l===o.hc.MINIMUM_MONTHLY_SCREEN_RATE&&(e.setDataValue(m.a.SFR,d.SFR),e.setDataValue(m.a.SAS,d.ARC),e.data.planParamsDetails.RR=u,e.data.planParamsDetails.SR=s)}r.push(e.data)}})),r},e.prototype.getMetaData=function(e,t){return e.studyKey=this.planDetails.planProperties.studyKey?this.planDetails.planProperties.studyKey:"",e[t]=this.planDetails.planProperties.planKey?this.planDetails.planProperties.planKey:"",e.version=this.planDetails.planProperties.version?this.planDetails.planProperties.version:"",e.isCohortPlan=this.planDetails.planProperties.isCohortPlan,e},e.prototype.getBaseCenterInitInfo=function(e,t){var n={};if(t===o.ac.PERCENT){n.percentCenterInitInfo=[];var a=[];e.percentCenterInitInfo&&(a=e.percentCenterInitInfo.centerInitSlot?e.percentCenterInitInfo.centerInitSlot:e.percentCenterInitInfo),a.map((function(e){var t={},a=e.centerInitSlot?e.centerInitSlot:e;t.slotNum=a.slotNum,t.percOfCenterInit=a.percOfCenterInit,t.noOfCenters=a.noOfCenters,t.noOfPeriods=a.noOfPeriods?a.noOfPeriods:o.yc,t.slotStartDate=a.slotStartDate?a.slotStartDate:"",t.slotEndDate=a.slotEndDate?a.slotEndDate:"",l.c.isDefined(t.noOfCenters,!0)&&t.slotEndDate&&n.percentCenterInitInfo.push({centerInitSlot:t})}))}else t===o.ac.GRANULAR&&(n.granularCenterInitInfo=e.granularCenterInitInfo.centerInitSlot?e.granularCenterInitInfo.centerInitSlot:e.granularCenterInitInfo);return n},e.prototype.setCountriesGridAPI=function(e){this.gridApi=e},e.prototype.getAllEditedRows=function(){var e=[];return this.gridApi&&this.gridApi.forEachNode((function(t){t.data.isEdited&&e.push(t.data)})),e},e.prototype.isFSICellEnabled=function(e,t){var n=e.planParamsDetails.redistSites,a=e.planParamsDetails.siteInitiationMethod===o.ac.PERCENT;if(e.planParamsDetails.isCountryLocked||!a)return!1;if(t)return!!a;if(e.planParamsDetails.isAdjustable){if(this.planDetails.planProperties.isCohortPlan===o.pb)return!0;if(this.planDetails.planProperties.isCohortPlan!==o.pb)return!!(l.c.isDefined(n,!0)&&n>0)}return!0},e.prototype.getNextDayDate=function(){return f().add(1,"days").toDate()},e.prototype.setCountrySFRForProjectedValues=function(e){this.gridApi.forEachNode((function(t){t.data.geographyKey===e&&!1===t.data.isCohortCountry&&(t.data.planParamsDetails.SFR===t.data.planParamsDetails.parentPlan.SFR&&t.setDataValue(m.a.SFR,t.data.planParamsDetails.countryCalcQuantity.effectiveSFR),t.data.planParamsDetails.actuals&&(t.data.planParamsDetails.actEnrlWhnSFRMod=t.data.planParamsDetails.actuals.RT,t.data.planParamsDetails.dateSFRMod=new Date))}))},e.prototype.setProjectionValueForNewAdjustment=function(e,t,n){var l=this,a=this.getReportingPeriod(this.planDetailsService.studyKey),i=null;n&&(i=n.cohortKey);var r=[];return e.api.forEachNode((function(e){var n=l.getCountryPlanParam(t,e.data.geographyKey,i,l.isCohortPlan()),o=l.appDataService.appDataResponse;if(e.data.planParamsDetails.isAdjustable&&!e.data.planParamsDetails.isCountryLocked&&(!l.isCohortPlan()||e.data.isCohortCountry&&e.data.cohortKey===i)){var s=null;l.isCohortPlan()?l.plansService.isRTypeCohortStudy()?(l.setCountrySFRForProjectedValues(e.data.geographyKey),s=l.getProjectedValuesForRTypeCohort(JSON.parse(JSON.stringify(e.data.planParamsDetails)),n,a),e.data.planParamsDetails.actuals&&(e.data.planParamsDetails.actEnrlWhnSRMod=e.data.planParamsDetails.actuals.RT,e.data.planParamsDetails.dateSFRMod=new Date)):(s=l.getProjectedValuesForSTypeCohort(JSON.parse(JSON.stringify(e.data.planParamsDetails)),n,o,a),e.data.planParamsDetails.actuals&&(e.data.planParamsDetails.actEnrlWhnSRMod=e.data.planParamsDetails.actuals.RT,e.data.planParamsDetails.dateSRMod=new Date,e.data.planParamsDetails.actEnrlWhnSFRMod=e.data.planParamsDetails.actuals.RT,e.data.planParamsDetails.dateSFRMod=new Date)):(s=l.getProjectedValues(JSON.parse(JSON.stringify(e.data.planParamsDetails)),n,o,a),e.data.planParamsDetails.actuals&&(e.data.planParamsDetails.actEnrlWhnSRMod=e.data.planParamsDetails.actuals.RT,e.data.planParamsDetails.dateSRMod=new Date,e.data.planParamsDetails.actEnrlWhnSFRMod=e.data.planParamsDetails.actuals.RT,e.data.planParamsDetails.dateSFRMod=new Date)),l.plansService.isRTypeCohortStudy()?(e.setDataValue(m.a.SFR,s.SFR),e.setDataValue(m.a.RR,s.RR),e.setDataValue(m.a.SAS,s.ARC)):(e.setDataValue(m.a.SFR,s.SFR),e.setDataValue(m.a.SR,s.SR),e.setDataValue(m.a.RR,s.RR),e.setDataValue(m.a.SAS,s.ARC))}r.push(e.data)})),r},e.prototype.getProjectedValuesForRTypeCohort=function(e,t,n){if(e&&!e.isCountryAdjusted){var a={rr:null,sas:null};a.sas=e.ARC,a.rr=e.calculatedRR;var i=l.c.calcuaterRatePerFrequency(t.parentPlan.RR,n,!0);t&&t.countryCalcQuantity&&(e.effectiveSAS=t.countryCalcQuantity.effectiveSAS),e.calculatedRR===i&&(a.rr=l.c.calcuaterRatePerFrequency(t.countryCalcQuantity.effectiveRR,n,!0)),a.sas===t.parentPlan.ARC&&0!==e.effectiveSAS&&(a.sas=e.effectiveSAS),e.actEnrlWhnSRMod=t.actuals.RT,e.dateSRMod=new Date,e.RR=a.rr,e.ARC=a.sas}return e},e.prototype.getProjectedValuesForSTypeCohort=function(e,t,n,a){if(e){var i={isSolverRateChange:!1,isSolverSFRRateChange:!1,sr:0,rr:0,sfr:0,sas:0};i.rr=l.c.calcuaterRatePerFrequency(e.calculatedRR,a),i.sr=l.c.calcuaterRatePerFrequency(e.calculatedSR,a),i.sfr=e.SFR,i.sas=e.ARC,t.countryCalcQuantity&&(e.effectiveSR=t.countryCalcQuantity&&t.countryCalcQuantity.effectiveSR,e.effectiveSFR=t.countryCalcQuantity&&t.countryCalcQuantity.effectiveSFR,e.effectiveSAS=t.countryCalcQuantity&&t.countryCalcQuantity.effectiveSAS);var r=n&&n.appMetadata&&n.appMetadata.isSRAvailable,o=n&&n.appMetadata&&!n.appMetadata.isSRAvailable,s=l.c.calcuaterRatePerFrequency(t.parentPlan.SR,a,!0),u=l.c.calcuaterRatePerFrequency(t.parentPlan.RR,a,!0);if(r&&e.calculatedSR!==s&&(i.isSolverRateChange=!0),o&&e.calculatedRR!==u&&(i.isSolverRateChange=!0),i.sfr!==t.parentPlan.SFR&&(i.isSolverSFRRateChange=!0),i.isSolverRateChange||i.isSolverSFRRateChange)i.isSolverRateChange&&!i.isSolverSFRRateChange?(100!==e.effectiveSFR&&(i.sfr=e.effectiveSFR),d=Number(i.sfr)/100,o?i.sr=i.rr/(1-d):i.rr=Number(i.sr)*(1-d)):!i.isSolverRateChange&&i.isSolverSFRRateChange&&(d=i.sfr/100,o?(i.rr=e.effectiveSR*(1-e.effectiveSFR/100),i.sr=i.rr/(1-d)):(i.sr=e.effectiveSR,i.rr=Number(i.sr)*(1-d)));else{100!==e.effectiveSFR&&(i.sfr=e.effectiveSFR);var d=Number(i.sfr)/100;o?(i.rr=Number(e.effectiveSR)*(1-d),i.sr=i.rr/(1-d)):(i.sr=e.effectiveSR,i.rr=Number(i.sr)*(1-d))}i.sas===t.parentPlan.ARC&&0!==e.effectiveSAS&&(i.sas=e.effectiveSAS),e.actEnrlWhnSRMod=t.actuals.RT,e.dateSRMod=new Date,e.actEnrlWhnSFRMod=t.actuals.RT,e.dateSFRMod=new Date,e.SR=l.c.calcuaterRatePerFrequency(i.sr,a,!0),e.SFR=i.sfr,e.RR=l.c.calcuaterRatePerFrequency(i.rr,a,!0),e.ARC=i.sas}return e},e.prototype.getCountryPlanParam=function(e,t,n,l){if(e)for(var a=0;a<e.length;a++){if(!l&&e[a].geographyKey===t)return e[a].planParamsDetails;if(l&&e[a].geographyKey===t&&e[a].cohortKey===n)return e[a].planParamsDetails}return null},e.prototype.isEditablePlan=function(e){return e&&!e.isReadOnly&&!e.isPlanApproved&&!e.isPrevApproved&&this.hasEditAccess()},e.prototype.showSolverUIErrorDialog=function(e,t){var n=this.localAppResources.getResource(e);this.plansService.openDialog(t,n,"SolverComponent")},e.prototype.showNumSitesError=function(){this.planDetailsService.showValidationPopup(!0)},e.prototype.getResourceMessageWithParameters=function(e,t){return this.localAppResources.getResource(e).replace("<{0}>","&lt;"+t+"&gt;")},e.prototype.showErrorBanner=function(e){var t=this.errorTermsStoreService.getErrorMessage(e);this.plansService.showErrorMessage(t)},e.prototype.showClientSideValidationErrorPopup=function(e,t,n){this.plansService.openDialog(e,t,n)},e.prototype.getCountryData=function(){var e=[];return this.gridApi&&this.gridApi.forEachNode((function(t){e.push(t.data)})),e},e.prototype.isResetPlanOptionFormRequired=function(){var e=this.getEditedCountries();return e&&0===e.length},e.prototype.getProjectedValues=function(e,t,n,l){var a={isSolverRateChange:!1,isSolverSFRRateChange:!1,sr:0,rr:0,sfr:0,sas:0};a.rr=e.RR,a.sr=e.SR,a.sfr=e.SFR,a.sas=e.ARC,t.countryCalcQuantity&&(e.effectiveSR=t.countryCalcQuantity.effectiveSR,e.effectiveSFR=t.countryCalcQuantity.effectiveSFR,e.effectiveSAS=t.countryCalcQuantity.effectiveSAS);var i=n&&n.appMetadata&&!n.appMetadata.isSRAvailable;if(n&&n.appMetadata&&n.appMetadata.isSRAvailable&&e.SR!==t.parentPlan.SR&&(a.isSolverRateChange=!0),i&&e.RR!==t.parentPlan.RR&&(a.isSolverRateChange=!0),a.sfr!==t.parentPlan.SFR&&(a.isSolverSFRRateChange=!0),a.isSolverRateChange||a.isSolverSFRRateChange)a.isSolverRateChange&&!a.isSolverSFRRateChange?(100!==e.effectiveSFR&&(a.sfr=e.effectiveSFR),r=Number(a.sfr)/100,i?a.sr=a.rr/(1-r):a.rr=Number(a.sr)*(1-r)):!a.isSolverRateChange&&a.isSolverSFRRateChange&&(r=a.sfr/100,i?(a.rr=e.effectiveSR*(1-e.effectiveSFR/100),a.sr=a.rr/(1-r)):(a.sr=e.effectiveSR,a.rr=Number(a.sr)*(1-r)));else{100!==e.effectiveSFR&&(a.sfr=e.effectiveSFR);var r=Number(a.sfr)/100;i?(a.rr=Number(e.effectiveSR)*(1-r),a.sr=a.rr/(1-r)):(a.sr=e.effectiveSR,a.rr=Number(a.sr)*(1-r))}return a.sas===t.parentPlan.ARC&&0!==e.effectiveSAS&&void 0!==e.effectiveSAS&&(a.sas=e.effectiveSAS),e.actEnrlWhnSRMod=t.actuals.RT,e.dateSRMod=new Date,e.actEnrlWhnSFRMod=t.actuals.RT,e.dateSFRMod=new Date,e.SR=this.calcuaterRatePerFrequency(a.sr,l,!0),e.SFR=a.sfr,e.RR=this.calcuaterRatePerFrequency(a.rr,l,!0),e.ARC=a.sas,e},e.prototype.getMCSProjectedValues=function(e,t,n,a){var i={isSolverRateChange:!1,isSolverSFRRateChange:!1,sr:0,rr:0,sfr:0,sas:0};if(i.rr=this.calcuaterRatePerFrequency(e.RR,a),i.sr=this.calcuaterRatePerFrequency(e.SR,a),i.sfr=e.SFR,i.sas=e.ARC,t.countryCalcQuantity&&(e.effectiveSR=t.countryCalcQuantity.effectiveSR,e.effectiveSFR=t.countryCalcQuantity.effectiveSFR,e.effectiveSAS=t.countryCalcQuantity.effectiveSAS),!t.isCountryAdjusted){var r=n&&n.appMetadata&&n.appMetadata.isSRAvailable,o=n&&n.appMetadata&&!n.appMetadata.isSRAvailable,s=this.calcuaterRatePerFrequency(t.parentPlan.SR,a,!0);s=l.c.formatDecimal(s,"0.1-3");var u=this.calcuaterRatePerFrequency(t.parentPlan.RR,a,!0);if(u=l.c.formatDecimal(u,"0.1-3"),r&&e.SR!==s&&(i.isSolverRateChange=!0),o&&e.RR!==u&&(i.isSolverRateChange=!0),i.sfr!==t.parentPlan.SFR&&(i.isSolverSFRRateChange=!0),i.isSolverRateChange||i.isSolverSFRRateChange)i.isSolverRateChange&&!i.isSolverSFRRateChange?(100!==e.effectiveSFR&&(i.sfr=e.effectiveSFR),d=Number(i.sfr)/100,o?i.sr=i.rr/(1-d):i.rr=Number(i.sr)*(1-d)):!i.isSolverRateChange&&i.isSolverSFRRateChange&&(d=i.sfr/100,o?(i.rr=e.effectiveSR*(1-e.effectiveSFR/100),i.sr=i.rr/(1-d)):(i.sr=e.effectiveSR,i.rr=Number(i.sr)*(1-d)));else{100!==e.effectiveSFR&&(i.sfr=e.effectiveSFR);var d=Number(i.sfr)/100;o?(i.rr=Number(e.effectiveSR)*(1-d),i.sr=i.rr/(1-d)):(i.sr=e.effectiveSR,i.rr=Number(i.sr)*(1-d))}i.sas===t.parentPlan.ARC&&0!==e.effectiveSAS&&(i.sas=e.effectiveSAS),e.actEnrlWhnSRMod=t.actuals.RT,e.dateSRMod=new Date,e.actEnrlWhnSFRMod=t.actuals.RT,e.dateSFRMod=new Date,e.SR=this.calcuaterRatePerFrequency(i.sr,a,!0),e.SFR=i.sfr,e.RR=this.calcuaterRatePerFrequency(i.rr,a,!0),e.ARC=i.sas}return e},e.prototype.calcuaterRatePerFrequency=function(e,t,n){return l.c.isDefined(e)&&e!==o.yc?e:o.yc},e.prototype.calculateMCSRatePerFrequency=function(e){var t=this.getReportingPeriod(this.planDetailsService.studyKey);return this.calcuaterRatePerFrequency(e,t)},e.prototype.isFSSFieldEditable=function(e,t,n){return!(!e||this.isCohortPlan()&&(!1===e.isCohortCountry||!0===e.hasDependencies)||this.hasCountryAchievedFSS(e)&&e.planParamsDetails.parentPlan)},e.prototype.hasCountryAchievedFSS=function(e){return!!e&&!(!e.planParamsDetails.actuals||!e.planParamsDetails.actuals.FSS)},e.prototype.getCountryCohortFSI=function(e){var t=this,n="";return console.log("geCountryCohortFSI",e),this.gridApi.forEachNode((function(l){l.data.geographyKey!==e.geographyKey||!1!==l.data.isCohortCountry||(n=t.getCountryFSI(l.data))})),n},e.prototype.getCountryFSI=function(e){return(this.planDetails.planProperties.isCohortPlan!==o.pb&&e.planParamsDetails.isAdjustable&&l.c.isDefined(e.planParamsDetails.redistSites,!0)&&e.planParamsDetails.redistSites>0?e.planParamsDetails.redistFSI:e.planParamsDetails.FSI)||""},e.prototype.getCountryFSR=function(e){return e.planParamsDetails.FSR},e.prototype.getCohortAdjustmentFSI=function(e,t){if(this.isCohortAdjustmentPlan()){if(!1===t.planParamsDetails.isFromBasePlan)return t.planParamsDetails.FSI;var n=this.getActualSlots(t);return 0===n.length&&0===this.getProjectedSlots(t).length?this.getNextDayDate():n.length>0?t.planParamsDetails.actuals.FSI:this.getCohortAdjustmentFsiFromSlots(t)}},e.prototype.getCohortAdjustmentFsiFromSlots=function(e){var t=this.getProjectedSlots(e);return e&&e.planParamsDetails&&e.planParamsDetails.centerInitInfo&&e.planParamsDetails.centerInitInfo.granularCenterInitInfo&&e.planParamsDetails.centerInitInfo.granularCenterInitInfo.centerInitSlot?t&&t.length>0?t[0].slotStartDate:void 0:e.planParamsDetails.FSI},e.prototype.getProjectedSlots=function(e){var t=[];if(e.planParamsDetails.centerInitInfo&&this.hasGranularCenterInitSlots(e)){var n=this.getGranularSlots(e);n.length>0&&(t=n.filter((function(e){return e.slotType!==o.cc.ACTUAL})))}return t},e.prototype.getRedistributedSlotsForCustomCohortAdjustment=function(){},e.prototype.setGranularCenterInitSlots=function(e){var t=this.getGranularSlots(e).filter((function(e){return!0===e.redistributed}));t.length>0&&(e.planParamsDetails.centerInitInfo.granularCenterInitInfo.centerInitSlot=t)},e.prototype.getActualSlots=function(e){return this.getGranularSlots(e).filter((function(e){return e.slotType===o.cc.ACTUAL}))},e.prototype.getRedistributedSlotsBySloptType=function(e){return e&&Array.isArray(e)?e.filter((function(e){return!0===e.redistributed&&e.slotType===o.cc.REDISTRIBUTED})):[]},e.prototype.getIsCountrySlotDistributed=function(e){return this.getRedistributedSlotsBySloptType(this.getGranularSlots(e)).length>0},e.prototype.hasGranularCenterInitSlots=function(e){var t=this.getGranularCenterInitInfo(e);return t&&t.centerInitSlot},e.prototype.getGranularCenterInitInfo=function(e){var t=this.getCenterInitInfo(e);return t&&t.granularCenterInitInfo?t.granularCenterInitInfo:null},e.prototype.getCenterInitInfo=function(e){return e&&e.planParamsDetails?e.planParamsDetails.centerInitInfo:null},e.prototype.getGranularSlots=function(e){var t=[],n=this.getGranularCenterInitInfo(e);return n&&(!1===Array.isArray(n.centerInitSlot)?t.push(n.centerInitSlot):t=n.centerInitSlot),t},e.prototype.isActualFSIPresentForCustomCohortAdjustment=function(e){return this.isCohortAdjustmentPlan()&&e.planParamsDetails.siteInitiationMethod===o.ac.GRANULAR&&this.hasFSIActuals(e)},e.prototype.isCountryDistributedForNonCohort=function(e){return!this.isCohortPlan()&&e.planParamsDetails.isAdjustable&&l.c.isDefined(e.planParamsDetails.redistSites,!0)&&e.planParamsDetails.redistSites>0},e.prototype.isCustomCohortAdjustment=function(e){return this.isCohortAdjustmentPlan()&&e.planParamsDetails.siteInitiationMethod===o.ac.GRANULAR},e.prototype.isCohortAdjustmentPlan=function(){return this.planDetails.planProperties.isCohortPlan===o.pb&&!this.planDetails.planProperties.isPlan},e.prototype.isCustomSiteInitiation=function(e){return e&&e.planParamsDetails&&e.planParamsDetails.siteInitiationMethod===o.ac.GRANULAR},e.prototype.getCountryFSS=function(e){return(this.isCohortAdjustmentPlan()?this.calculateFSS(e):this.hasCountryAchievedFSS(e)&&e.planParamsDetails.parentPlan?e.planParamsDetails.parentPlan.TFSS:e.planParamsDetails.FSS)||""},e.prototype.calculateFSS=function(e,t){if(t=l.c.isDefined(t,!0)?t:e.planParamsDetails.SITOFSSDAYS,e){if(!l.c.isDefined(t))return e.planParamsDetails.FSS;var n;if(n=this.isCohortPlanCountryRow(e)||this.isCountryRow(e)?this.getCountryFSI(e):this.getCountryCohortFSI(e),l.c.isDefined(n))return f(n).add(t,"days").toDate()}},e.prototype.calculateMinNumSites=function(e,t){var n=1;return t?n=o.sc.MIN_NUM_SITES:e.planParamsDetails.actuals&&e.planParamsDetails.actuals.numSites&&(n=e.planParamsDetails.actuals.numSites),n},e.prototype.showSolversErrorMsg=function(e){this.plansService.showErrorMessage(e)},e.prototype.fetchCohortList=function(e){var t=[];if(e&&e.cohortList&&e.cohortList.cohortPlanParams)if(Array.isArray(e.cohortList.cohortPlanParams))(t=e.cohortList.cohortPlanParams).forEach((function(e){e.isExcludable=!0}));else{var n=e.cohortList.cohortPlanParams;n.isExcludable=!0,t.push(n)}return t},e.prototype.fetchIncludedCohortsKey=function(e){var t=[];return e&&e.length>0&&(t=e.map((function(e){return e.cohortKey}))),t},e.prototype.getMCSMultipleCountriesSolversResponse=function(e,t,n,l,a){var i={},s=r.m.getModuleInfo(o.D,this.planDetails.planProperties.studyKey?this.planDetails.planProperties.studyKey.toString():null),u=[];if(e.forEach((function(e){e&&e.data&&e.data.planParamsDetails&&u.push(JSON.parse(JSON.stringify(e.data)))})),this.planDetails.planProperties.isCohortPlan===o.pb&&(u=this.getHierarchicalCountryCohortData(u),console.log("getHierarchicalCountryCohortData : ",u)),this.planDetails&&this.planDetails.planProperties){if(this.planDetails.planProperties.isPlan){var d=this.getCommandTagsByPlanTypeForMCS(u,!0,!1,this.planDetails.planProperties,l,a),c=this.payloadCommandService.getCommandDetails(t,this.getMetaData(i,n),{},d,s);return this.baseConnectionService.sendRequest(c)}var p=void 0;this.appDataService.appDataResponse.appMetadata.isEnableProjRates?(p=this.setMCSProjectionValueForMultiCountry(e,l),this.planDetails.planProperties.isCohortPlan===o.pb&&(p=this.getHierarchicalCountryCohortData(p))):p=u,d=this.getCommandTagsByPlanTypeForMCS(p,!1,!1,this.planDetails.planProperties,l,a);var h=this.payloadCommandService.getCommandDetails(t,this.getMetaData(i,n),{},d,s);return this.baseConnectionService.sendRequest(h)}},e.prototype.getHierarchicalCountryCohortData=function(e){var t=[];if(e){var n=[],l=[];e.forEach((function(e){e.isCohortCountry?l.push(e):n.push(e)})),l.forEach((function(e){var l=n.find((function(t){return t.geographyKey===e.geographyKey}));l.planParamsDetails.cohortList=[e],t.push(JSON.parse(JSON.stringify(l)))}))}return t},e.prototype.setMCSProjectionValueForMultiCountry=function(e,t){var n=this,l=this.getReportingPeriod(this.planDetailsService.studyKey),a=[];return e.forEach((function(e){var i=JSON.parse(JSON.stringify(e.data.planParamsDetails)),r=n.appDataService.appDataResponse;if(i.isAdjustable&&!i.isCountryAdjusted){var s=i.SR,u=i.RR;if(n.plansService.isRTypeCohortStudy()){var d=(new h.a).getProjectedValues(i,i,r,l,!0,n.isCountryRow(e.data));t!==o.hc.LAST_SUBJECT_RANDOMIZED_DATE&&t!==o.hc.MINIMUM_MONTHLY_SCREEN_RATE||(n.isCountryRow(e.data)?e.setDataValue(m.a.SFR,d.SFR):(t===o.hc.LAST_SUBJECT_RANDOMIZED_DATE&&e.setDataValue(m.a.RR,d.RR),e.setDataValue(m.a.SAS,d.ARC)))}else{var c=n.getProjectedValues(i,i,r,l);t===o.hc.LAST_SUBJECT_RANDOMIZED_DATE?(e.setDataValue(m.a.SFR,c.SFR),e.setDataValue(m.a.SR,c.SR),e.setDataValue(m.a.RR,c.RR),e.setDataValue(m.a.SAS,c.ARC)):t===o.hc.MINIMUM_MONTHLY_SCREEN_RATE&&(e.setDataValue(m.a.SFR,c.SFR),e.setDataValue(m.a.SAS,c.ARC),e.data.planParamsDetails.RR=u,e.data.planParamsDetails.SR=s)}}a.push(e.data)})),a},e.prototype.showErrorForSolverOnMultiCohortSelect=function(e,t,n,l){return void 0===l&&(l=!1),!(this.planDetails&&this.planDetails.planProperties&&this.planDetails.planProperties.isCohortPlan===o.pb&&n&&-1===n.cohortKey&&!l)},e.prototype.getSelectedCohort=function(){return this.selectedCohort},e.prototype.setSelectedCohort=function(e){this.selectedCohort=e,this.planDetailsService.selectedCohort=e},e.prototype.isCohortPlan=function(){return this.planDetails.planProperties.isCohortPlan===o.pb},e.prototype.isNonCohortPlan=function(){return this.planDetails.planProperties.isCohortPlan===o.nb},e.prototype.isSRValidationRequired=function(){var e=!this.plansService.isRTypeCohortStudy()&&this.isSRAvailable();return!this.isCohortPlan()||this.isCohortPlan()&&e},e.prototype.isRRValidationRequired=function(){var e=!!this.plansService.isRTypeCohortStudy()||!this.isSRAvailable();return!this.isCohortPlan()||this.isCohortPlan()&&e},e.prototype.isGridEdited=function(){return this.getAllEditedRows().length>0},e.prototype.getLastVisitedStudyKey=function(){return this.userDataService.getLastVisitedStudyKey()},e.prototype.getConfirmDialogProp=function(){return{heading:this.localAppResources.getResource("SI_AWAY_NAV_CD_HEADING"),message:this.localAppResources.getResource("SI_AWAY_NAV_CD_MSG_CUSTOM"),okLabel:this.localAppResources.getResource("OK"),cancelLabel:this.localAppResources.getResource("Cancel")}},e.prototype.updateCalculatedSRRR=function(e,t){e.data.planParamsDetails.calculatedRR=l.c.isDefined(e.data.planParamsDetails.RR,!0)?e.data.planParamsDetails.RR:null,e.data.planParamsDetails.calculatedSR=l.c.isDefined(e.data.planParamsDetails.SR,!0)?e.data.planParamsDetails.SR:null},e.prototype.importExportCountries=function(e){var t=this;if(e)var n=JSON.parse(JSON.stringify(this.planDetailsService.planDetailsSubject.value)),l=this.importExportCountriesService.openImportCountriesDialog(n,this.planDetailsService.getReportingPeriodValue()).subscribe((function(e){if(e)if(e.result&&e.result.toString().toLowerCase()===o.Yb.Okay.toString().toLowerCase())t.plansService.showSuccessMessage(t.localAppResources.getResource("CountryPlanParamsSavedMsg")),t.planDetailsService.getBriefStudyPlan(Number(n.planProperties.planKey)).subscribe();else{var a=e.error.errorCode,i=void 0;a.toString()===o.Y.PLAN_OUTDATED?(i=t.errorTermsStoreService.getErrorMessage(o.U+a),t.planDetailsService.setReadOnly(!1)):i=t.errorTermsStoreService.getErrorMessage(e.error.errorCode),t.plansService.showErrorMessage(i)}return l.unsubscribe(),!0}));else this.importExportCountriesService.downloadCountriesImportTemplate()},Object.defineProperty(e.prototype,"studyKey",{get:function(){return this.studyId?this.studyId:this.userDataService.lastVisitedStudy.toString()},enumerable:!0,configurable:!0}),e.prototype.getStudyRefreshDate=function(e){return this.studySummaryService.getStudyRefreshDate(e)},e.prototype.sendExcelExport=function(e,t,n){var l=e;this.pceService.planCardHeaderData(this.CountriesHeaderData()),this.pceService.exportExcelData(l,n)},e.prototype.sendDataToPrint=function(e,t){var n=e;this.pceService.planCardHeaderData(this.CountriesHeaderData()),this.pceService.setDataForPrint(n)},e.prototype.sendDataToCopy=function(e,t){var n=e;this.pceService.planCardHeaderData(this.CountriesHeaderData()),this.pceService.setDataForCopy(n)},Object.defineProperty(e.prototype,"headerResource",{get:function(){return this.pceHeaderResourceService.PCEHeaderResource},enumerable:!0,configurable:!0}),e.prototype.CountriesHeaderData=function(){var e,t,n,l,a=this.userDataService.getUserName(),i=this.planDetails.planProperties.name;this.planDetails.planProperties.studyKey&&this.planDetails.planProperties.studyKey.toString(),l=this.plansService.studyRefreshDate;var r=this.currentStudyDetails;t=r?r.id:"",n=r?r.name:"";var o=this.headerResource;return(e={})[o.userName]=a,e[o.date]=this.datePipe.transform(Date.now(),"dd-MMM-yyyy"),e[o.tabName]="Countries",e[o.studyId]=t,e[o.studyName]=n,e[o.planName]=i,e[o.componentName]="Countries Table",e[o.lastSourceDataUpdate]=this.datePipe.transform(l,"dd-MMM-yyyy"),e},e.prototype.getApprovedPlanDetails=function(e){var t=this.userDataService.getLastVisitedStudyKey();if(t&&e){var n={studyKey:t,planKey:e},l=r.m.getModuleInfo(o.D,this.planDetails.planProperties.studyKey?this.planDetails.planProperties.studyKey.toString():null),a=this.payloadCommandService.getCommandDetails(o.p.GET_PLAN_DETAILS,n,null,null,l);return this.baseConnectionService.sendRequest(a)}},e.prototype.getCountryFromPlan=function(e,t){return t?(t.geoList.geography=[].concat(t.geoList.geography),t.geoList.geography.find((function(t){return t.geographyKey===e}))):null},e.prototype.isHighlightFieldAplicable=function(){return this.planDetails.planProperties&&!this.planDetails.planProperties.isPlan},e.prototype.getCenterInitSlotObject=function(e,t){return e.planParamsDetails.centerInitInfo.percentCenterInitInfo?e.planParamsDetails.centerInitInfo.percentCenterInitInfo.centerInitSlot.find((function(n){return e.planParamsDetails.redistSites>0?n.percOfCenterInit.toString()===t&&n.redistributed:n.percOfCenterInit.toString()===t})):null},e.prototype.getFSI=function(e,t){return t?(t.planProperties.isCohortPlan!==o.pb&&e.planParamsDetails.isAdjustable?e.planParamsDetails.redistFSI:e.planParamsDetails.FSI)||"":null},e.prototype.getFPAToFSIDiff=function(e,t){var n=0;return e&&t&&(n=f(e).diff(f(t,"DD-MMM-YYYY"),"days")),n>0?n:0},e.prototype.getFinalFPAToFSIDiff=function(e,t){if(!t)return null;var n="";t.planProperties.FPA&&(n=f(t.planProperties.FPA).format("DD-MMM-YYYY"));var l=this.getFSI(e,t);return""===l?null:this.getFPAToFSIDiff(l,n)},e.prototype.isCellHighlighted=function(e,t){if(!this.isHighlightFieldAplicable())return!1;if(e.data.isCohortCountry)return!1;var n=e.data.geographyKey,l=this.getCountryFromPlan(n,this.planDetails);if(!l)return!1;if(this.isWWorStudyTarget(e))return!1;var a=this.getCountryFromPlan(n,this.approvedPlanDetails);if(!a)return!1;if("25"===t||"50"===t||"90"===t){var i=this.getCenterInitSlotObject(l,t),r=this.getCenterInitSlotObject(a,t);return null!=i.noOfPeriods&&i.noOfPeriods!==r.noOfPeriods&&void 0===e.data.isEdited}if("redistSites"===t&&(null==e.data.planParamsDetails.redistSites||0===e.data.planParamsDetails.redistSites))return!1;if("CalcSAS"===t){if(!(e.data.geographyLevel===this.getStudyTargetAndWorldWide().Study_Target||e.data.isCohortCountry&&e.data.geographyLevel===this.getStudyTargetAndWorldWide().WW)){var o=this.calculateSASPercentage(l.planParamsDetails.numSites,l.planParamsDetails.ARC),s=this.calculateSASPercentage(a.planParamsDetails.numSites,a.planParamsDetails.ARC);return null!=o&&o!==s&&void 0===e.data.isEdited}return!1}if("daysToFSI"===t){var u=this.getFinalFPAToFSIDiff(a,this.approvedPlanDetails),d=this.getFinalFPAToFSIDiff(l,this.planDetails);return null!=d&&d!==u&&void 0===e.data.isEdited}return(null!=l.planParamsDetails[t]&&""!==l.planParamsDetails[t]||0===l.planParamsDetails[t])&&!(!l.planParamsDetails[t]&&0!==l.planParamsDetails[t])&&l.planParamsDetails[t]!==a.planParamsDetails[t]&&void 0===e.data.isEdited},e.prototype.getCohortEnrollmentTarget=function(e,t){if("Y"===e.isCohortPlan&&t.data.isCohortCountry){var n,l=e.cohortList?e.cohortList.cohortPlanParams:null;return l&&[].concat(l).forEach((function(e){e.cohortKey===t.data.cohortKey&&(n=e.enrollmentTarget)})),n}return null},e.prototype.getCalculatedSR=function(e){return this.getReportingPeriod(this.planDetailsService.studyKey),e.planParamsDetails.SR},e.prototype.getCalculatedRR=function(e){return this.getReportingPeriod(this.planDetailsService.studyKey),e.planParamsDetails.RR},e.prototype.setPCE=function(){this.pceOptions=[],this.setExpandCollapseOption(!1),this.pceOptions.push({name:void 0!==this.planDetailsService.isExpand&&!0===this.planDetailsService.isExpand?this.getCountryGridResources().COLLAPSEGRID:this.getCountryGridResources().EXPANDGRID,value:void 0!==this.planDetailsService.isExpand&&!0===this.planDetailsService.isExpand?o.Ob.COLLAPSE:o.Ob.EXPAND},{name:this.getCountryGridResources().PRINT,value:o.Ob.PRINT},{name:this.getCountryGridResources().COPY,value:o.Ob.COPY},{name:this.getCountryGridResources().EXPORT,value:o.Ob.EXPORT})},e.prototype.setExpandCollapseOption=function(e){this.pceOptions&&this.pceOptions.length===o.Nb&&this.pceOptions.splice(0,1,{name:e?this.getCountryGridResources().COLLAPSEGRID:this.getCountryGridResources().EXPANDGRID,value:e?o.Ob.COLLAPSE:o.Ob.EXPAND})},e.prototype.getSiteInitiationType=function(e){var t=this.getCountryGridResources();return e.node.data.planParamsDetails.siteInitiationMethod===o.ac.GRANULAR?t.CUSTOM:t.TWENTY_FIVE_FIFTY_NINTY},e.prototype.setCountryGridHeight=function(e,t,n,l,a){n.setDomLayout(o.G.normal);var i,r=0;if(i=a*o.eb.rowHeight+o.eb.headerHeight,e===o.Ob.EXPAND){var s=(r=window.innerHeight-t.offsetTop-l-o.eb.margin)-n.getPinnedTopRowCount()*o.eb.rowHeight;return s>o.eb.minHeight?i<r?i:r:r+o.eb.minHeight-s}if(e===o.Ob.COLLAPSE){if(r=window.innerHeight-t.offsetTop-l,window.innerHeight<i){var u=n.getDisplayedRowCount();return u>o.eb.fixedRowCount?n.getPinnedTopRowCount()>o.eb.collpasedPinnedRowCount?n.getPinnedTopRowCount()*o.eb.rowHeight+o.eb.minHeight:n.getPinnedTopRowCount()*o.eb.rowHeight+o.eb.fixedRowCount*o.eb.rowHeight:n.getPinnedTopRowCount()*o.eb.rowHeight+(null!=u&&0===u?o.eb.headerHeight:u*o.eb.rowHeight)}return r>i?i:i-o.eb.bufferPixel}},Object.defineProperty(e.prototype,"isCohortAdjustment",{get:function(){return!(!this.planDetails||this.planDetails.planProperties.isPlan||"Y"!==this.planDetails.planProperties.isCohortPlan)},enumerable:!0,configurable:!0}),e.prototype.isCohortPlanCountryRow=function(e){return this.isCohortPlan()&&!e.isCohortCountry},e.prototype.isCountryRow=function(e){return this.isNonCohortPlan()||!e.isCohortCountry},e.prototype.hasFSIActualsForCohortAdjustment=function(e){return this.isCohortAdjustmentPlan()&&this.hasFSIActuals(e)},e.prototype.setRowExpandState=function(e){var t=this;if(e){var n=this.applicationContextService.getCollapsedStateOfRows(),l=this.planDetails&&this.planDetails.planProperties?n.get(this.planDetails.planProperties.planKey):[];e.forEachNode((function(e){console.log(e),e.expanded=!0,n&&l&&l.length>0&&!e.data.isCohortCountry&&t.planDetails&&t.planDetails.planProperties&&n.has(t.planDetails.planProperties.planKey)&&l.map((function(t){e.data.geographyKey===t.geographyKey&&(e.expanded=t.expanded)}))})),l&&l.length>0?l.map((function(e){e.geographyKey==="WW"+t.planDetails.planProperties.planKey&&(t.worldWideExpandRow=e.expanded)})):this.worldWideExpandRow=!1}},e.prototype.showManageCountryGrid=function(){if(!this.isGridEdited())return!0;this.planDetailsService.getConfirmProp(),this.planDetailsService.showUnsavedDataConfirmation().afterClosed().subscribe((function(e){}))},e.prototype.rateAdjustmentClicked=function(e,t){e&&this.planDetailsService.navigateFromCountryToRA(e,t)},e.prototype.processDataForPCE=function(e,t,n,a,i){var r=this;return n.getAllGridColumns().forEach((function(n){var s=n.getColDef(),u=!1;if(Boolean(s.headerTooltip)&&s.field){if(n.getColDef().field!==s.field||!n.isVisible())return!0;var d=s.field.split("."),c=e.data;if(d.length&&(d.forEach((function(e){c=c[e]||0===c[e]?c[e]:""})),l.c.isDefined(c)||(c="")),s.field!==m.a.SFR&&s.field!==m.a.SAS&&s.field!==m.a.PROJECTED_SAS&&s.field!==m.a.PROJECTED_SFR||(l.c.isDefined(c)?0===(c=l.c.formatDecimal(c,"0.1-1"))&&r.isWWorStudyTarget(e)&&(c=""):c=""),(s.field===m.a.SR||s.field===m.a.RR||s.field===m.a.PROJECTED_RR||s.field===m.a.PROJECTED_SR)&&(r.getReportingPeriod(r.planDetailsService.studyKey),l.c.isDefined(c)?0===(c=l.c.formatDecimal(c,"0.1-3"))&&r.isWWorStudyTarget(e)&&(c=""):c=""),s.field===m.a.RR&&(l.c.isDefined(c)||(c="")),s.field===m.a.DAYS_TO_25){var p=r.getNoOfPeriodsByPercOfCenterInit(e.data,25);l.c.isDefined(c=!1!==e.data.isCohortCountry?"":void 0===p?"":p)||(c="")}if(s.field===m.a.DAYS_TO_50&&(p=r.getNoOfPeriodsByPercOfCenterInit(e.data,50),l.c.isDefined(c=!1!==e.data.isCohortCountry?"":void 0===p?"":p)||(c="")),s.field===m.a.DAYS_TO_90&&(p=r.getNoOfPeriodsByPercOfCenterInit(e.data,90),l.c.isDefined(c=!1!==e.data.isCohortCountry?"":void 0===p?"":p)||(c="")),s.field===m.a.SITE_COMP_ID&&(l.c.isDefined(c)||(c="Random"),c=!0===e.data.isCohortCountry||r.isWWorStudyTarget(e)?"":c),s.field===m.a.SI&&(c=!0===e.data.isCohortCountry||r.isAdjustmentAndHasAchievedLSR(e.data,i,a)?"":e.data.planParamsDetails.siteInitiationMethod===o.ac.GRANULAR?"Custom":"25/50/90",c=!0===e.data.isCohortCountry||r.isWWorStudyTarget(e)?"":c,u=!0),s.field===m.a.DAYS_TO_FSS&&(c=l.c.isDefined(e.data.planParamsDetails.SITOFSSDAYS,!0)?e.data.planParamsDetails.SITOFSSDAYS>=0?e.data.planParamsDetails.SITOFSSDAYS:0:""),s.field===m.a.DAYS_TO_FSI&&(c=l.c.isDefined(e.data.planParamsDetails.daysToFSI,!0)?e.data.planParamsDetails.daysToFSI>=0?e.data.planParamsDetails.daysToFSI:0:""),s.field===m.a.OE&&l.c.isDefined(c)&&(c=l.c.formatDecimal(c,"0.1-1")),s.field===m.a.CALC_SAS&&l.c.isDefined(c)&&(c=l.c.formatDecimal(c,"0.1-1")),s.field===m.a.OE&&e.data.geographyLevel===r.getStudyTargetAndWorldWide().WW&&e.data.isCohortCountry&&(c=""),s.field===m.a.FIRST_SUBJECT_RANDOMIZED&&e.data.geographyLevel===r.getStudyTargetAndWorldWide().WW&&e.data.isCohortCountry&&(c=""),s.field===m.a.RT&&(l.c.isDefined(c)||(c=""),e.data.geographyLevel===r.getStudyTargetAndWorldWide().WW&&e.data.isCohortCountry)){var h=r.getCohortEnrollmentTarget(r.planDetails.planProperties,e);c=e.data.planParamsDetails.enrollmentTarget+" (Target "+h+")",u=!0}if("string"==typeof c&&s.field===m.a.COHORT_NAME&&e.data.isCohortCountry&&(u=!0),s.field===m.a.GEOGRAPHY_NAME&&(u=!0),"string"==typeof c&&f(c).isValid()&&!u&&(c=l.c.formatDate(c,"DD-MMM-YYYY")),Boolean(s.field)&&(l.c.isDefined(c)||(c=""),Boolean(s.headerTooltip)?t[s.headerTooltip]=c:t[s.field]=c),"Status"===s.field&&(t.Status=c),s.field===m.a.GEOGRAPHY_REGION_NAME){var g=r.geographyService.getRegionByCountry({key:e.data.geographyKey});t["Region Name"]=g?g.name:""}}})),t},e.prototype.isAdjustmentAndHasAchievedLSR=function(e,t,n){return!(t.planProperties.isPlan||!this.achievedLSR(e,n))},e.prototype.achievedLSR=function(e,t){var n=!1;return this.isCohortPlan()?t&&t.forEachNode((function(t){t.data.geographyKey===e.geographyKey&&!1===t.data.isCohortCountry&&t.data.planParamsDetails&&t.data.planParamsDetails.actuals&&void 0!==t.data.planParamsDetails.actuals.LSR&&(n=!0)})):n=e.planParamsDetails&&e.planParamsDetails.actuals&&void 0!==e.planParamsDetails.actuals.LSR,n},e.prototype.isExcludedCohortCountryData=function(e){return!(!this.isCohortPlan()||!e)&&e.isCohortCountry&&e.isCohortExcluded},e.prototype.anyInvalidCustomSites=function(){return this.planDetailsService.invalidCountryName.length>0},e.prototype.getCountryLevelFSI=function(e){if(this.gridApi&&e){var t=null;return this.gridApi.forEachNode((function(n){n.data.geographyKey===e.geographyKey&&!1===n.data.isCohortCountry&&(t=n.data)})),this.getCountryFSI(t)}},e}()},GD9e:function(e,t,n){"use strict";n("Jg5f"),n("VQ//"),n("U3QC"),n("pN2L"),n("HnWI"),n("JpoA"),n("LoAr");var l=n("D57K"),a=(n("GiBk"),n("IMYO"),n("4HYP"),n("Ws1Q")),i=(n("fQLH"),n("gQst"),n("iUUs"),n("iJR/"),n("mUyW"),n("0cIN"),n("QB3Q"),n("z5yO"),n("AouM"),n("mhnT"),n("/gsZ"),n("lqvn"),n("G2Mx"),n("4S5C"),n("/VsW"),n("etrl"),n("d9YI"),n("WT9V"),n("abkR"),n("QIIz"),n("eXL1"),n("s8WJ"),function(e){function t(n,l){var a=e.call(this,n)||this;return a.message=n,a.errorCode=l,a.name=t.name,Object.setPrototypeOf(a,t.prototype),a}return l.__extends(t,e),t}(Error));n("wIp5"),window,n("981U"),n("e5Hd"),n("wgY5"),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a.a}))},GSwp:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var l=n("6nV5"),a=n("wgY5"),i=n("R+ki"),r=n("uMZP"),o=n("5IsW"),s=(n("IW84"),a),u=function(){function e(e,t){this.appDataService=e,this.plansService=t,this.isARTBInvalid=!1}return e.prototype.getEPFormDataObject=function(e){var t={};if(e){var n=e.PLSR;n=n?s(n).format("DD-MMM-YYYY"):"";var a=r.m.computeActiveSites(e.numSites,e.ARC),i=r.m.computeSAS(e.numSites,Number(a));t={enrollmentTarget:e.enrollmentTarget,overRecruitmentPercent:l.c.formatDecimal(e.overRecruitmentPercent,"0.1-1"),maximumEnrollment:e.maximumEnrollment,ARTB:e.ARTB,solvedLSR:n,SR:l.c.formatDecimal(e.SR,"0.1-3"),SFR:l.c.formatDecimal(e.SFR,"0.1-1"),RR:l.c.formatDecimal(e.RR,"0.1-3"),numSites:e.numSites,ARC:l.c.formatDecimal(e.ARC,"0.1-1"),activeSites:a,calcSAS:l.c.formatDecimal(parseFloat(i.toString()),"0.1-1"),FSS:e.FSS,SITOFSSDAYS:e.SITOFSSDAYS,avgDaysToSiteInit:l.c.formatDecimal(e.avgDaysToSiteInit,"0.1-1")},this.setCalcParams(e.countryCalcQuantity,t)}return t},e.prototype.isSRAvailable=function(){return!this.plansService.isRTypeCohortStudy()&&this.appDataService.isSRAvailable()},e.prototype.setCalcParams=function(e,t){t&&(e?(t.projSR=l.c.formatDecimal(e.effectiveSR,"0.1-3"),t.projSFR=l.c.formatDecimal(e.effectiveSFR,"0.1-1"),t.projRR=l.c.formatDecimal(e.effectiveRR,"0.1-3"),t.projARC=l.c.formatDecimal(e.effectiveSAS,"0.1-1")):(t.projSR="",t.projSFR="",t.projRR="",t.projARC=""))},e.prototype.subscribeToEnrollmentTargetValueChange=function(e,t){var n=this;if(e&&t){var a="enrollmentTargetSubscription";if(e.get("cohortKey")&&(a+=e.get("cohortKey").value),!t.has(a)&&e.get("enrollmentTarget")){var r=e.get("enrollmentTarget").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){l.c.isDefined(t,!0)?(t=Number(t),Number.isInteger(t)&&t>=0&&n.setMaximumEnrollment(e)):n.setMaximumEnrollment(e,!0)}));t.set(a,r)}}},e.prototype.setMaximumEnrollment=function(e,t){void 0===t&&(t=!1);var n="";if(e&&e.get("maximumEnrollment")){var l=e.get("maximumEnrollment");if(!t){var a=e.get("enrollmentTarget"),i=e.get("overRecruitmentPercent");if(a&&i){var o=Number(a.value),s=Number(i.value);n=r.m.computeMaximumEnrollment(o,s)}}l.setValue(n)}},e.prototype.subscribeToProjARCValueChange=function(e,t){var n=this;if(e&&t){var a="projARCSubscription";if(e.get("cohortKey")&&(a+=e.get("cohortKey").value),!t.has(a)&&e.get("projARC")){var r=e.get("projARC").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){l.c.isDefined(t,!0)&&(t=l.c.formatDecimal(t,"0.1-1"),e.get("projARC").setValue(t,{emitEvent:!1}),n.setActiveSites(e))}));t.set(a,r)}}},e.prototype.subscribeToProjRRValueChange=function(e,t){if(e&&t){var n="projRRSubscription";if(e.get("cohortKey")&&(n+=e.get("cohortKey").value),!t.has(n)&&e.get("projRR")){var a=e.get("projRR").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){l.c.isDefined(t,!0)&&(t=l.c.formatDecimal(t,"0.1-3"),e.get("projRR").setValue(t,{emitEvent:!1}))}));t.set(n,a)}}},e.prototype.subscribeToProjSFRValueChange=function(e,t){if(e&&t){var n="projSFRSubscription";if(e.get("cohortKey")&&(n+=e.get("cohortKey").value),!t.has(n)&&e.get("projSFR")){var a=e.get("projSFR").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){l.c.isDefined(t,!0)&&(t=l.c.formatDecimal(t,"0.1-1"),e.get("projSFR").setValue(t,{emitEvent:!1}))}));t.set(n,a)}}},e.prototype.subscribeToProjSRValueChange=function(e,t){if(e&&t){var n="projSRSubscription";if(e.get("cohortKey")&&(n+=e.get("cohortKey").value),!t.has(n)&&e.get("projSR")){var a=e.get("projSR").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){l.c.isDefined(t,!0)&&(t=l.c.formatDecimal(t,"0.1-3"),e.get("projSR").setValue(t,{emitEvent:!1}))}));t.set(n,a)}}},e.prototype.subscribeToActiveSitesValueChange=function(e,t){var n=this;if(e&&t){var l="activeSitesSubscription";if(e.get("cohortKey")&&(l+=e.get("cohortKey").value),!t.has(l)&&e.get("activeSites")){var a=e.get("activeSites").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){n.setSAS(e)}));t.set(l,a)}}},e.prototype.subscribeToAvgDaysToSiteInitValueChange=function(e,t){if(e&&t){var n="avgDaysToSiteInitSubscription";if(e.get("cohortKey")&&(n+=e.get("cohortKey").value),!t.has(n)&&e.get("avgDaysToSiteInit")){var a=e.get("avgDaysToSiteInit").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){l.c.isDefined(t,!0)&&(t=l.c.formatDecimal(t,"0.1-1"),e.get("avgDaysToSiteInit").setValue(t,{emitEvent:!1}))}));t.set(n,a)}}},e.prototype.subscribeToNumSitesValueChange=function(e,t){var n=this;if(e&&t){var l="numSitesSubscription";if(e.get("cohortKey")&&(l+=e.get("cohortKey").value),!t.has(l)&&e.get("numSites")){var a=e.get("numSites").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){n.setActiveSites(e),n.setSAS(e)}));t.set(l,a)}}},e.prototype.subscribeToSITOFSSDAYSValueChange=function(e,t,n){var l=this;if(e&&n){var a="SITOFSSDAYSSubscription";if(e.get("cohortKey")&&(a+=e.get("cohortKey").value),!n.has(a)&&e.get("SITOFSSDAYS")){var r=e.get("SITOFSSDAYS").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(n){l.setFSS(e,t,!1)}));n.set(a,r)}}},e.prototype.subscribeToFSSValueChange=function(e,t,n){var l=this;if(e&&n){var a="FSSSubscription";if(e.get("cohortKey")&&(a+=e.get("cohortKey").value),!n.has(a)&&e.get("FSS")){var r=e.get("FSS").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(n){l.setSITOFSSDAYS(e,t)}));n.set(a,r)}}},e.prototype.subscribeToARTBValueChange=function(e,t){var n=this;if(e&&t){var a="ARTBSubscription";if(e.get("cohortKey")&&(a+=e.get("cohortKey").value),!t.has(a)&&e.get("ARTB")){var r=e.get("ARTB").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(e){l.c.isDefined(e)&&(n.isARTBInvalid=!1)}));t.set(a,r)}}},e.prototype.subscribeToCalcSASValueChange=function(e,t){if(e&&t){var n="calcSASSubscription";if(e.get("cohortKey")&&(n+=e.get("cohortKey").value),!t.has(n)&&e.get("calcSAS")){var a=e.get("calcSAS").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){l.c.isDefined(t,!0)&&(t=l.c.formatDecimal(t,"0.1-1"),e.get("calcSAS").setValue(t,{emitEvent:!1}))}));t.set(n,a)}}},e.prototype.subscribeToARCValueChange=function(e,t){var n=this;if(e&&t){var a="ARCSubscription";if(e.get("cohortKey")&&(a+=e.get("cohortKey").value),!t.has(a)&&e.get("ARC")){var r=e.get("ARC").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){l.c.isDefined(t,!0)&&(t=l.c.formatDecimal(t,"0.1-1"),e.get("ARC").setValue(t,{emitEvent:!1})),n.setActiveSites(e)}));t.set(a,r)}}},e.prototype.subscribeToRRValueChange=function(e,t){var n=this;if(e&&t){var a="RRSubscription";if(e.get("cohortKey")&&(a+=e.get("cohortKey").value),!t.has(a)&&e.get("RR")){var r=e.get("RR").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){l.c.isDefined(t,!0)&&e.get("originalRR").setValue(Number(t)),n.onRateParameterChange(t,"RR","0.1-3",e)}));t.set(a,r)}}},e.prototype.subscribeToSFRValueChange=function(e,t){var n=this;if(e&&t){var l="SFRSubscription";if(e.get("cohortKey")&&(l+=e.get("cohortKey").value),!t.has(l)&&e.get("SFR")){var a=e.get("SFR").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){n.onRateParameterChange(t,"SFR","0.1-1",e)}));t.set(l,a)}}},e.prototype.subscribeToSRValueChange=function(e,t){var n=this;if(e&&t){var a="SRSubscription";if(e.get("cohortKey")&&(a+=e.get("cohortKey").value),!t.has(a)&&e.get("SR")){var r=e.get("SR").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){l.c.isDefined(t,!0)&&e.get("originalSR").setValue(Number(t)),n.onRateParameterChange(t,"SR","0.1-3",e)}));t.set(a,r)}}},e.prototype.onRateParameterChange=function(e,t,n,a){a&&t&&a.get(t)&&l.c.isDefined(e,!0)&&(e=l.c.formatDecimal(e,n),a.get(t).setValue(e,{emitEvent:!1}),this.setActualEnrolment(e,t,a)),this.plansService.isRTypeCohortStudy()||this.calculateRate(a)},e.prototype.setActualEnrolment=function(e,t,n){var a,i,r,o,s;switch(t){case"SR":a=n.get("actEnrlWhnSRMod"),i=n.get("dateSRMod"),r=n.get("parentPlanSR");break;case"RR":a=n.get("actEnrlWhnSRMod"),i=n.get("dateSRMod"),r=n.get("parentPlanRR");break;case"SFR":a=n.get("actEnrlWhnSFRMod"),i=n.get("dateSFRMod"),r=n.get("parentPlanSFR")}if(o=r.value,s=n.get("actualRT").value,!a.value&&l.c.isDefined(o,!0)&&e!==o){var u=new Date;a.setValue(s),i.setValue(u)}},e.prototype.subscribeToOverrecruitmentPercentValueChange=function(e,t){var n=this;if(e&&t){var a="overRecruitmentPercentSubscription";if(e.get("cohortKey")&&(a+=e.get("cohortKey").value),!t.has(a)&&e.get("overRecruitmentPercent")){var r=e.get("overRecruitmentPercent").valueChanges.pipe(Object(i.a)(o.A)).subscribe((function(t){l.c.isDefined(t,!0)&&(t=l.c.formatDecimal(t,"0.1-1"),e.get("overRecruitmentPercent").setValue(t,{emitEvent:!1})),n.setMaximumEnrollment(e)}));t.set(a,r)}}},e.prototype.calculateRate=function(e){if(e){var t=this.isSRAvailable(),n=e.get("SFR"),l=void 0,a=void 0,i=void 0,o=void 0;if(n){var s=parseFloat(n.value);t?(l="SR",a="RR",i="originalSR",o="originalRR"):(l="RR",a="SR",i="originalRR",o="originalSR");var u=e.get(l),d=e.get(i);if(u){var c=parseFloat(u.value),p=parseFloat(d.value),h=void 0,m=void 0;t?(h=r.m.computeRR(c,s),m=r.m.computeRR(p,s,!1)):(h=r.m.computeSR(c,s),m=r.m.computeRR(p,s,!1)),e.get(a).setValue(h,{emitEvent:!1}),e.get(o).setValue(m)}}}},e.prototype.setActiveSites=function(e){if(e&&e.get("activeSites")&&e.get("activeSites").setValue){var t=e.get("activeSites"),n=this.extractAndComputeActiveSites(e),a="";l.c.isDefined(n,!0)&&(a=n),t.setValue(a)}},e.prototype.setSITOFSSDAYS=function(e,t){if(e&&t&&e.get("SITOFSSDAYS")&&e.get("FSS")){var n=e.get("SITOFSSDAYS"),a=e.get("FSS");if(l.c.isDefined(t.value)&&l.c.isDefined(a.value)){var i=s(t.value),r=s(a.value);if(i.isValid()&&r.isValid()){var o=r.diff(i,"days");o>=0&&n.setValue(o,{emitEvent:!1})}}else n.setValue("",{emitEvent:!1})}},e.prototype.setFSS=function(e,t,n){if(void 0===n&&(n=!0),e&&t&&l.c.isDefined(t.value)){var a=s(t.value);if(a.isValid())if(n){for(var i in e.controls)if(e.get(i)){var r=e.get(i);this.setFSSInFormgroup(r,s(a))}}else this.setFSSInFormgroup(e,a)}},e.prototype.setFSSInFormgroup=function(e,t){if(e&&e.get&&!e.get("isCohortExcluded").value){var n=e.get("FSS"),l=e.get("SITOFSSDAYS");if(n&&l){var a=parseInt(l.value,10),i=r.m.computeFSS(t,a);n.setValue(i)}}},e.prototype.setSAS=function(e){if(e&&e.get("calcSAS")&&e.get("calcSAS").setValue){var t=e.get("calcSAS"),n=this.extractAndComputeSAS(e);n=l.c.isDefined(n,!0)?l.c.formatDecimal(parseFloat(n.toString()),"0.1-1"):"",t.setValue(n,{emitEvent:!1})}},e.prototype.extractAndComputeActiveSites=function(e){var t="";if(e&&e.get("ARC")&&e.get("numSites")){var n=e.get("ARC"),l=e.get("numSites"),a=parseFloat(n.value),i=parseFloat(l.value);t=r.m.computeActiveSites(i,a)}return t},e.prototype.extractAndComputeSAS=function(e){var t="";if(e&&e.get("activeSites")&&e.get("numSites")){var n=e.get("activeSites"),l=e.get("numSites"),a=parseFloat(n.value),i=parseFloat(l.value);t=r.m.computeSAS(i,a)}return t},e.prototype.updateCountryForm=function(e,t){if(e&&e.planParamsDetails&&t){var n=this.getEPFormDataObject(e.planParamsDetails);t.patchValue(n)}},e}()},HY2n:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var l=n("6nV5"),a=n("5IsW"),i=function(){function e(){}return e.isPlanNonEditable=function(e,t,n){void 0===n&&(n=!1);var l=!1;return e&&(l=l||this.isNotEnrollingPlan(e)),t&&(l=l||this.isCountryLocked(t)),l=l||!n,e&&t&&(l=l||this.hasAchievedALSR(e,t)),l},e.isNotEnrollingPlan=function(e){return e&&(e.isReadOnly||e.isPlanApproved||e.isPrevApproved)},e.isCountryLocked=function(e){return e&&e.planParamsDetails&&e.planParamsDetails.isCountryLocked},e.hasAchievedALSR=function(e,t){return e&&!e.isPlan&&t&&t.planParamsDetails&&t.planParamsDetails.actuals&&l.c.isDefined(t.planParamsDetails.actuals.LSR)},e.isCohortAdjustment=function(e){return!(!e||e.isPlan||"Y"!==e.isCohortPlan)},e.isCohortPlan=function(e){var t=!1;return e&&(t=e.isCohortPlan===a.N.COHORT_PLAN||!0===e.isCohortPlan),t},e.fetchIncludedCohorts=function(e){var t=[];return e&&e.cohortList&&e.cohortList.reduce((function(e,t){return t.isCohortExcluded||e.push(t.cohortKey),e}),t),t},e.cloneSICustomScheduler=function(e){return{toDisableFSI:e.toDisableFSI,maxRowsAllowed:e.maxRowsAllowed,range:e.range,planProperties:e.planProperties,countryDetails:e.countryDetails,cohortList:e.cohortList,dataSource:e.dataSource,includedCohorts:e.includedCohorts,redistSites:e.redistSites}},e}()},HkWN:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var l=function(e){return e.NUMERIC_VALIDATION="NUMERIC",e.DATE_VALIDATION="DATE",e.COUNTRY_VALIDATION="COUNTRY",e}({})},Pd9Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var l=n("6nV5"),a=function(){function e(e){this._el=e,this.hasDecimals=!1}return e.prototype.onkeyup=function(e){var t=this._el.nativeElement.value;/^\d+(\.\d{1,2})?$/.test(t)||(this._el.nativeElement.value=this.formatValue(t))},e.prototype.formatValue=function(e){var t;if(e){var n=e.indexOf(".");-1===n?t=l.c.stripNonnumbers(e):(t=l.c.stripNonnumbers(e.substr(0,n)),this.hasDecimals&&(t+="."+l.c.stripNonnumbers(e.substr(n+1))))}else t=e||"";return t},e}()},PmYs:function(e,t,n){"use strict";var l=n("6nV5"),a=n("wgY5"),i=n("5IsW"),r=n("XlyW"),o=function(){return function(e){this.value="",this.isValid=!0,this.type=e}}(),s=n("HkWN");n.d(t,"a",(function(){return d}));var u=a,d=function(){function e(){}return e.DefaultSpreadsheetModel=function(){var e={IS_COUNTRY_LOCKED:!1};return e.COUNTRY=new o(s.a.COUNTRY_VALIDATION),e.PR=new o(s.a.NUMERIC_VALIDATION),e.PNS=new o(s.a.NUMERIC_VALIDATION),e.Days_FPA_FSI=new o(s.a.NUMERIC_VALIDATION),e.FSI=new o(s.a.DATE_VALIDATION),e.SI_TO_FSS=new o(s.a.NUMERIC_VALIDATION),e.FSS=new o(s.a.DATE_VALIDATION),e.SI_25_P=new o(s.a.NUMERIC_VALIDATION),e.SI_50_P=new o(s.a.NUMERIC_VALIDATION),e.SI_90_P=new o(s.a.NUMERIC_VALIDATION),e.SR=new o(s.a.NUMERIC_VALIDATION),e.SFR=new o(s.a.NUMERIC_VALIDATION),e.RR=new o(s.a.NUMERIC_VALIDATION),e.SAS=new o(s.a.NUMERIC_VALIDATION),e.OE=new o(s.a.NUMERIC_VALIDATION),e},e.SpreadsheetModel=function(e,t,n,a){void 0===e&&(e=[]);var i=null;if(e.length>0){if(1===e.length&&0===e[r.a.COUNTRY].toString().trim().length)return i;(i={IS_COUNTRY_LOCKED:t}).COUNTRY=new o(s.a.COUNTRY_VALIDATION),l.c.isDefined(e[r.a.COUNTRY])&&(i.COUNTRY.value=e[r.a.COUNTRY],i.COUNTRY.isValid=this.isValidCountry(i.COUNTRY.value,n,a)),i.PR=new o(s.a.NUMERIC_VALIDATION),l.c.isDefined(e[r.a.PR])&&(i.PR.value=e[r.a.PR],i.PR.isValid=this.isValidNumber(i.PR.value)),i.PNS=new o(s.a.NUMERIC_VALIDATION),l.c.isDefined(e[r.a.PNS])&&(i.PNS.value=e[r.a.PNS],i.PNS.isValid=this.isValidNumber(i.PNS.value)),i.Days_FPA_FSI=new o(s.a.NUMERIC_VALIDATION),l.c.isDefined(e[r.a.Days_FPA_FSI])&&(i.Days_FPA_FSI.value=e[r.a.Days_FPA_FSI],i.Days_FPA_FSI.isValid=this.isValidNumber(i.Days_FPA_FSI.value)),i.FSI=new o(s.a.DATE_VALIDATION),l.c.isDefined(e[r.a.FSI])&&(i.FSI.value=e[r.a.FSI],i.FSI.isValid=this.isValidDate(i.FSI.value)),i.SI_TO_FSS=new o(s.a.NUMERIC_VALIDATION),l.c.isDefined(e[r.a.SI_TO_FSS])&&(i.SI_TO_FSS.value=e[r.a.SI_TO_FSS],i.SI_TO_FSS.isValid=this.isValidNumber(i.SI_TO_FSS.value)),i.FSS=new o(s.a.DATE_VALIDATION),l.c.isDefined(e[r.a.FSS])&&(i.FSS.value=e[r.a.FSS],i.FSS.isValid=this.isValidDate(i.FSS.value)),i.SI_25_P=new o(s.a.NUMERIC_VALIDATION),l.c.isDefined(e[r.a.SI_25_P])&&(i.SI_25_P.value=e[r.a.SI_25_P],i.SI_25_P.isValid=this.isValidNumber(i.SI_25_P.value)),i.SI_50_P=new o(s.a.NUMERIC_VALIDATION),l.c.isDefined(e[r.a.SI_50_P])&&(i.SI_50_P.value=e[r.a.SI_50_P],i.SI_50_P.isValid=this.isValidNumber(i.SI_50_P.value)),i.SI_90_P=new o(s.a.NUMERIC_VALIDATION),l.c.isDefined(e[r.a.SI_90_P])&&(i.SI_90_P.value=e[r.a.SI_90_P],i.SI_90_P.isValid=this.isValidNumber(i.SI_90_P.value)),i.SR=new o(s.a.NUMERIC_VALIDATION),l.c.isDefined(e[r.a.SR])&&(i.SR.value=e[r.a.SR],i.SR.isValid=this.isValidNumber(i.SR.value)),i.SFR=new o(s.a.NUMERIC_VALIDATION),l.c.isDefined(e[r.a.SFR])&&(i.SFR.value=e[r.a.SFR],i.SFR.isValid=this.isValidNumber(i.SFR.value)),i.RR=new o(s.a.NUMERIC_VALIDATION),l.c.isDefined(e[r.a.RR])&&(i.RR.value=e[r.a.RR],i.RR.isValid=this.isValidNumber(i.RR.value)),i.SAS=new o(s.a.NUMERIC_VALIDATION),l.c.isDefined(e[r.a.SAS])&&(i.SAS.value=e[r.a.SAS],i.SAS.isValid=this.isValidNumber(i.SAS.value)),i.OE=new o(s.a.NUMERIC_VALIDATION),l.c.isDefined(e[r.a.OE])&&(i.OE.value=e[r.a.OE],i.OE.isValid=this.isValidNumber(i.OE.value))}return i},e.isValidNumber=function(e){var t=!0;return l.c.isDefined(e)&&(t=l.c.isDefined(e,!0)&&e>=i.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_RANGE.MIN&&e<=i.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.NUMBER_RANGE.MAX),t},e.isValidDate=function(e){var t=!0;return l.c.isDefined(e)&&(t=u(e,i.x,!0).isValid()),t},e.isValidCountry=function(e,t,n,a){var i;if(void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===a&&(a=!1),l.c.isDefined(e,!1)){var r=t.find((function(t){return t.countryName.toLowerCase()===e.toLowerCase()})),o=n.filter((function(t){return t.toLowerCase()===e.toLowerCase()}));i=!(!r||o&&o.length>(a?1:0))}else i=!0;return i},e.convertSpreadsheetToGeography=function(e,t){void 0===t&&(t=[]);var n=null;if(e&&l.c.isDefined(e.COUNTRY.value)){if(e.IS_COUNTRY_LOCKED)throw new Error(i.sb);var a=t.find((function(t){return t.countryName.toLowerCase()===e.COUNTRY.value.toString().toLowerCase()}));a&&((n={}).geographyName=a.countryName,n.geographyKey=a.countryKey,n.geographyLevel=i.db.COUNTRY,n.planParamsDetails={enrollmentTarget:e.PR.value||0,FPAtoFSI:e.Days_FPA_FSI.value||0,FSI:e.FSI.value,SITOFSSDAYS:e.SI_TO_FSS.value||0,FSS:e.FSS.value,SR:l.c.isDefined(e.SR.value,!0)?e.SR.value:0,SFR:e.SFR.value||0,RR:l.c.isDefined(e.RR.value,!0)?e.RR.value:0,ARC:e.SAS.value||0,numSites:e.PNS.value||0,siteInitiationMethod:i.ac.PERCENT,centerInitInfo:{percentCenterInitInfo:{centerInitSlot:[{slotNum:1,percOfCenterInit:25,noOfPeriods:e.SI_25_P.value||0},{slotNum:2,percOfCenterInit:50,noOfPeriods:e.SI_50_P.value||0},{slotNum:3,percOfCenterInit:90,noOfPeriods:e.SI_90_P.value||0}]}},overRecruitmentPercent:e.OE.value||0,isOverRecruitmentEnabled:e.OE.value>0,isCountryLocked:e.IS_COUNTRY_LOCKED},n&&n.planParamsDetails&&(l.c.isDefined(n.planParamsDetails.SR,!0)||delete n.planParamsDetails.SR,l.c.isDefined(n.planParamsDetails.RR,!0)||delete n.planParamsDetails.RR))}return n},e}()},SdtR:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var l=function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){e&&e.isReCalRequired&&e.isReCalRequired.currentValue&&(this.isReCalRequired=e.isReCalRequired.currentValue),e&&e.seqValue&&e.seqValue.currentValue&&(this.seqValue=e.seqValue.currentValue)},e}()},V7sF:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var l=function(e){return e[e.COUNTRY=0]="COUNTRY",e[e.COHORT=1]="COHORT",e}({})},"VQ//":function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"i",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"g",(function(){return r})),n.d(t,"j",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"h",(function(){return c})),n.d(t,"e",(function(){return p}));var l={RESULT_OK:"OK",RESULT_ERROR:"ERROR"},a={commandName:"Logout"},i="dv/StudyOptimizer",r=window.location.origin+"/dv/StudyOptimizer/dispatch",o=(window,["MM-DD-YYYY","MM/DD/YYYY","YYYY-MM-DD","YYYY/MM/DD","DD-MMM-YYYY","DD/MMM/YYYY","DDMMMYYYY","YYYY-MMM-DD","YYYY/MMM/DD","MMM-DD-YYYY","MMM/DD/YYYY"]),s={LOGOUT:{ID:"LogoutDialog",WIDTH:"25%",PANEL_CLASS:"logout-dialog"},ABOUT:{ID:"AboutDialog",WIDTH:"50%",PANEL_CLASS:"about-dialog"},PASSWORD:{ID:"PasswordDialog",WIDTH:"50%",PANEL_CLASS:"password-dialog"},CONFIRM_UNSAVED_DATA:{WIDTH:"310px",HEIGHT:"190",PANEL_CLASS:"unsaved-data-confirmation-dialog"},DELETE_PLAN:{ID:"DeletePlanDialog",WIDTH:"310px",HEIGHT:"180px",PANEL_CLASS:"delete-plan-confirmation-dialog"}},u={CancelLabel:"CancelLabel",OkLabel:"OkLabel",OK:"OK",YesLabel:"YesLabel",NoLabel:"NoLabel"},d={FSI_REQUIRED_FOR_FSS:{error:"FSIRequiredForFSS",message:"NonEmptyField"},REQUIRED:{error:"required",message:"NonEmptyField"},MIN:{error:"min",message:"minNumExceedError"},MAX:{error:"max",message:"maxNumExceedError"},MAT_DATEPICKER_PARSE:{error:"matDatepickerParse",message:"DateFormatIncorrect"},DAYS_TO_SI_AFTER_ARTB:{error:"daysToSIAfterARTB",message:"SIDateError"},ARTB_LT_EQ_FSI:{error:"ARTB_LT_EQ_FSI",message:"ARTblteqFSI"},ARTB__LT_EQ_FSS:{error:"ARTB__LT_EQ_FSS",message:"ARTblteqFSS"},FSI_GT_TLSS:{error:"FSI_GT_TLSS",message:"FSIgtTLSS"},FSILT_ERROR:{error:"FSILT_ERROR",message:"FSILTError"},DEPENDENCY_ERROR:{error:"DEPENDENCY_ERROR",message:"dependencyError"}},c={INSERT:"I",UPDATE:"U",DELETE:"D"},p={NOTE_API_DATE_FORMAT:"MMM-DD-YYYY HH:MM:SS",NOTE_API_DATE_FORMAT_SMALL:"MMM-DD-YYYY HH:mm:ss",SERVER_DATE_FORMAT:"YYYY-MM-DD",MONTH_DATE_FORMAT:"DD-MMM-YYYY"}},Ws1Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var l=n("D57K"),a=n("WT9V"),i=n("wgY5"),r=function(){function e(){}return e.checkElementExistsInArray=function(e,t){if(null==e)throw new Error("arr should be defined");if(!(e instanceof Array))throw new Error("arr should be an array");if(null==t)throw new Error("element should be defined");return e.some((function(e){return e.key===t.key}))},e.extractPathFromUrl=function(e){if(null==e)throw new Error("url must be defined");if(!(e instanceof Array))throw new Error("url must be of type UrlSegment");return e.map((function(e){return e.path})).join("/")},e.getInitials=function(e,t){if(null==e)throw new Error("text should be defined");if("string"!=typeof e)throw new Error("text should be string");return e.split(t).map((function(e){return e.trim().charAt(0).toUpperCase()})).join("")},e.getNameInitials=function(e,t){if(null==e)throw new Error("name should be defined");if("string"!=typeof e)throw new Error("name should be string");var n=e.split(t),l=[];return n.length>0&&l.push(n[0].trim().charAt(0).toUpperCase()),n.length>1&&l.push(n[n.length-1].trim().charAt(0).toUpperCase()),l.join("")},e.generateUrl=function(e,t){var n=window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/";return e&&(n+=e+"/"),t&&(n+=t+"/"),n+"index.html"},e.generateFlexUrl=function(e){var t="";return t+=window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/",e&&(t+=e+"/"),t},e.dayDiff=function(e,t){var n=i(e);return i(t).diff(n,"days")},e.dateDiff=function(e,t,n,l){var a=i(e),r=i(t).diff(a,"d");return"d"===n?r:((r+1)/7).toFixed(l)},e.dateAdd=function(e,t){return i(e).add(t,"days")},e.dateSubstract=function(e,t){return i(e).subtract(t,"days")},e.dateFormatter=function(e){return i(e).format("YYYY-MM-DD")},e.formatDate=function(e,t){return void 0===t&&(t="YYYY-MM-DD"),i(e).format(t)},e.formatDateStrict=function(e,t,n){return void 0===t&&(t="DD-MMM-YYYY"),void 0===n&&(n=""),this.isDefined(e)?i(e).format(t):n},e.dateCompare=function(e,t){var n=e;return i(t).diff(i(n),"days")>=0},e.isValidDate=function(e){if(""===e&&e)return!1;var t=e.match(/^(([1-9]|0[1-9]|1[0-9]|2[0-9]|3[0-1])(-)(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)(-)((19|20)\d{2}))$/i);if(null==t)return!1;var n=parseInt(t[1],10),l=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"].indexOf(t[4].toUpperCase())+1,a=parseInt(t[6],10);if(isNaN(l))for(var i=4;i<=15;i++)if(t[i]){l=i-3;break}return!(l<1||l>12||n<1||n>31||(4===l||6===l||9===l||11===l)&&31===n||2===l&&(n>29||29===n&&(a%4!=0||a%100==0&&a%400!=0)))},e.isDefined=function(e,t){void 0===t&&(t=!1);var n=!1;return null!=e&&(n=!0,t?(e=parseFloat(e.toString().split(",").join("")),n=n&&!isNaN(e)&&isFinite(e)):n=n&&""!==e.toString().trim()),n},e.formatDecimal=function(e,t){var n=Object(a.formatNumber)(e,"en-US",t);return e=Number(n.split(",").join("")),isNaN(e)&&(e=null),e},e.stripNonnumbers=function(e){return e?e.replace(/[^0-9]/g,""):e},e.isValidNumber=function(e){return e&&"string"==typeof e&&(e=e.toString().trim()),!(!e&&0!==e||isNaN(e))},e.areArraysEqual=function(e,t){var n=!1;return e&&t&&(n=l.__spread(e).sort().join(",")===l.__spread(t).sort().join(",")),n},e.clearFormGroupValidators=function(e){if(e){for(var t in e.controls)if(e.get(t)){var n=e.get(t);n.clearValidators(),n.updateValueAndValidity(),n.controls&&this.clearFormGroupValidators(n)}e.clearValidators(),e.updateValueAndValidity()}},e.resetFormErrors=function(e){if(e){e.setErrors(null);var t=e;if(t&&t.controls&&Object.keys(t.controls).length>0)for(var n in t.controls)if(t.get(n)){var l=t.get(n);this.resetFormErrors(l)}}},e.calcuaterRatePerFrequency=function(e,t,n){return this.isDefined(e)&&0!==e?e:0},e.checkNotEmpty=function(e){return null!=e&&""!==e},e.dateFormatters=function(e){return this.isDefined(e)?i(e).format("YYYY-MM-DD"):""},e}()},XlyW:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var l=function(e){return e[e.COUNTRY=0]="COUNTRY",e[e.PR=1]="PR",e[e.PNS=2]="PNS",e[e.Days_FPA_FSI=3]="Days_FPA_FSI",e[e.FSI=4]="FSI",e[e.SI_TO_FSS=5]="SI_TO_FSS",e[e.FSS=6]="FSS",e[e.SI_25_P=7]="SI_25_P",e[e.SI_50_P=8]="SI_50_P",e[e.SI_90_P=9]="SI_90_P",e[e.SR=10]="SR",e[e.SFR=11]="SFR",e[e.RR=12]="RR",e[e.SAS=13]="SAS",e[e.OE=14]="OE",e}({})},Z0E0:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var l=n("D57K"),a=n("IfiR"),i=n("6nV5"),r=n("wgY5"),o=n("5IsW"),s=n("HY2n"),u=n("VbXj"),d=n("GF7X"),c=r,p=function(){function e(e,t,n,l,a){this.errorTermsStoreService=e,this.localeAppResourcesService=t,this.dialog=n,this.userDataService=l,this.fb=a,this.buttonsDisabled=!0}return Object.defineProperty(e.prototype,"cohortsMapped",{get:function(){return this._cohortsMapped},set:function(e){this._cohortsMapped=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"siCustomSchedulerControls",{get:function(){return this._siCustomSchedulerControls},set:function(e){this._siCustomSchedulerControls=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"siCustomSchedulerData",{get:function(){return this._siCustomSchedulerData},set:function(e){this._siCustomSchedulerData=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeOfUsedCohortKeys",{get:function(){return this._changeOfUsedCohortKeys},set:function(e){this._changeOfUsedCohortKeys=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resetFSS",{get:function(){return this._resetFSS},set:function(e){this._resetFSS=e},enumerable:!0,configurable:!0}),e.prototype.consolidateValidationErrors=function(e){return e?this.errorTermsStoreService.consolidateValidationErrors(e):""},e.prototype.getConsolidatedErrors=function(e){if(e&&e.errors&&e.errors.hasOwnProperty("matDatepickerParse")){var t=this.errorTermsStoreService.getErrorMessage("DateFormatIncorrect");e.setErrors({matDatepickerParse:t})}if(e&&e.errors){var n=Object.keys(e.errors).map((function(t){return e.errors[t]}));return n?n.join("\n"):""}return""},e.prototype.openMapCohortsDialog=function(e){var t=this;e.has("MapCohortsDialogRefClosedSubscription")&&e.get("MapCohortsDialogRefClosedSubscription").unsubscribe();var n=this.getMapCohortsProps(),l={labels:n,dataSource:this.getDataSourceValues(),disabledControls:this.isPlanNonEditable(),isCohortAdjustment:s.a.isCohortAdjustment(this.siCustomSchedulerData.planProperties)},a=this.dialog.open(u.a,{data:l,panelClass:o.F.MAP_COHORTS.PANEL_CLASS,id:o.F.MAP_COHORTS.ID}).afterClosed().subscribe((function(e){e&&e.action===n.okLabel&&t.mapCohorts(e.data,e.isFormDirty)}));e.set("MapCohortsDialogRefClosedSubscription",a)},e.prototype.getMapCohortsProps=function(){return{heading:this.localeAppResourcesService.getResource("MAP_COHORTS_HEADING"),subHeading:this.localeAppResourcesService.getResource("MAP_COHORTS_SUB_HEADING"),SITES:this.localeAppResourcesService.getResource("CSI_SCHEDULER_SITES"),START_DATE:this.localeAppResourcesService.getResource("CSI_SCHEDULER_START_DATE"),END_DATE:this.localeAppResourcesService.getResource("CSI_SCHEDULER_END_DATE"),TABLE_SI_HEADING:this.localeAppResourcesService.getResource("MAP_COHORTS_TABLE_SI_HEADING"),TABLE_PC_HEADING:this.localeAppResourcesService.getResource("MAP_COHORTS_TABLE_PC_HEADING"),okLabel:this.localeAppResourcesService.getResource("OkLabel"),cancelLabel:this.localeAppResourcesService.getResource("CancelLabel")}},e.prototype.getDataSourceValues=function(){var e=this,t=this.siCustomSchedulerData.dataSource;return t&&t.value?t.value.map((function(e){return e.getRawValue()})).map((function(t){if(t)return{noOfCenters:t.noOfCenters,slotStartDate:i.c.formatDateStrict(t.slotStartDate,"DD-MMM-YYYY"),slotEndDate:i.c.formatDateStrict(t.slotEndDate,"DD-MMM-YYYY"),includedCohorts:e.getCohortsForMapCohorts(t.usedCohortKeys),slotType:t.slotType,hasSubjEvent:t.hasSubjEvent}})):null},e.prototype.mapCohorts=function(e,t){var n=this;e&&(t&&this.markFormAsDirty(),e.forEach((function(e,t){if(e){var l=n.setSelectionDataForEachSlot(e,t);n.siCustomSchedulerControls.initiationSchedule.at(t).get(o.vb.USED_COHORT_KEYS).setValue(l),n.triggerChangeInCEP()}})))},e.prototype.getCohortsForMapCohorts=function(e){var t=this,n=this.siCustomSchedulerData.cohortList,a=this.siCustomSchedulerData.includedCohorts;return a&&n?n.filter((function(e){var t=[];if(a.forEach((function(n){return e.cohortKey===n?t.push(e):null})),0!==t.length)return t})).map((function(n){return l.__assign({},n,{selection:t.getSelectionDataForEachSlotCohort(e,n)})})):null},e.prototype.setSelectionDataForEachSlot=function(e,t){var n=Object.keys(e).filter((function(t){if(e[t])return t}));return n&&Object.keys(e).length===n.length&&(n=[o.g]),n.join(",")},e.prototype.triggerChangeInCEP=function(){this.cohortsMapped.emit(this.siCustomSchedulerControls.initiationSchedule.getRawValue())},e.prototype.getSelectionDataForEachSlotCohort=function(e,t){return null!=e&&""===e?new a.h(!1):e.toString().toLowerCase()===o.g.toLowerCase()?new a.h(!0):-1!==e.toString().split(",").indexOf(t.cohortKey.toString())?new a.h(!0):new a.h(!1)},e.prototype.isMapCohortDisabled=function(){return this.buttonsDisabled||this.siCustomSchedulerData.includedCohorts&&0===this.siCustomSchedulerData.includedCohorts.length},e.prototype.openPasteDatesDialog=function(e){var t=this;e.has("PasteDialogRefClosedSubscription")&&e.get("PasteDialogRefClosedSubscription").unsubscribe();var n=this.siCustomSchedulerData.countryDetails?this.siCustomSchedulerData.countryDetails.geographyName:null,l=this.getPasteDateProps(),a=this.dialog.open(d.a,{width:o.F.PASTE_DATES.WIDTH,data:{labels:l,maxRowsAllowed:this.getMaxRowsAllowed(this.isCohortPlan()),maxRowsAllowedForPasteDate:this.getMaxRowsAllowedForPasteDate(this.isCohortPlan()),countryName:n},panelClass:o.F.PASTE_DATES.PANEL_CLASS,id:o.F.PASTE_DATES.ID}).afterClosed().subscribe((function(e){e&&e.action.toLowerCase()===l.okLabel.toLowerCase()&&(e.isFormDirty&&t.markFormAsDirty(),t.applyToSISchedule(e.data))}));e.set("PasteDialogRefClosedSubscription",a)},e.prototype.getPasteDateProps=function(){return{heading:this.localeAppResourcesService.getResource("PASTE_DATE_HEADING"),subHeading:this.localeAppResourcesService.getResource("PASTE_DATE_SUB_HEADING"),placeHolder:this.localeAppResourcesService.getResource("PASTE_DATE_PLACEHOLDER"),validationMsgs:this.getPasteDateValidationMsgs(),okLabel:this.localeAppResourcesService.getResource("APPLY_TO_SI"),cancelLabel:this.localeAppResourcesService.getResource("CancelLabel")}},e.prototype.getMaxRowsAllowed=function(e){return console.log(this.localeAppResourcesService.getResource("COHORT_CSI_MAX_ROWS")),e?parseInt(this.localeAppResourcesService.getResource("COHORT_CSI_MAX_ROWS"),10):parseInt(this.localeAppResourcesService.getResource("NON_COHORT_CSI_MAX_ROWS"),10)},e.prototype.getMaxRowsAllowedForPasteDate=function(e){var t=this.siCustomSchedulerControls.initiationSchedule,n=this.getMaxRowsAllowed(e);return t.length===o.Kb.ONE&&this.isInitiationScheduleRowEmpty(t.at(o.Kb.ZERO))?n:t?n-t.length:n},e.prototype.deleteRow=function(e,t,n){e&&(this.siCustomSchedulerControls.initiationSchedule.removeAt(t),this.markFormAsDirty(),n||(this.updateView(),this.triggerChangeInCEP()))},e.prototype.markFormAsDirty=function(){this.siCustomSchedulerControls.containerFormGroup.markAsDirty()},e.prototype.addRowButtonClicked=function(){if(!0===s.a.isCohortAdjustment(this.siCustomSchedulerData.planProperties))this.addRowInCohortAdjustment();else{var e=this.siCustomSchedulerControls.initiationSchedule.at(this.siCustomSchedulerControls.initiationSchedule.length-1);e&&this.addRow({action:"delete",noOfCenters:null,slotStartDate:e.get("slotEndDate")?c(e.get("slotEndDate").value).add(1,"days").toDate():null,slotEndDate:e.get("slotEndDate")?c(e.get("slotEndDate").value).add(1,"days").toDate():null})}this.markFormAsDirty()},e.prototype.addRowInCohortAdjustment=function(){var e,t=this.siCustomSchedulerControls.initiationSchedule,n=t.at(t.length-1),l=n?n.controls.slotType.value:null;e=null!==l&&l!==o.cc.ACTUAL?c(n.get("slotEndDate").value).add(1,"days").toDate():c().add(1,"days").toDate(),this.addRow({action:"delete",noOfCenters:1,slotStartDate:e||null,slotEndDate:e||null,slotType:o.cc.NEW})},e.prototype.getTotalRemainingSites=function(){if(this.siCustomSchedulerData.dataSource){var e=0;return this.siCustomSchedulerData.dataSource.value.filter((function(e){return!0===e.enabled})).forEach((function(t){t.get("noOfCenters").value&&(e+=parseInt(t.get("noOfCenters").value,10))})),(parseInt(this.siCustomSchedulerControls.totalNoOfSitesControlForRemaining?this.siCustomSchedulerControls.totalNoOfSitesControlForRemaining.value:o.Kb.ZERO,10)||o.Kb.ZERO)-e}return null},e.prototype.isPlanNonEditable=function(e){var t;return void 0===e&&(e=!0),e&&(t=this.userDataService.checkModulePrivilege(o.L)),s.a.isPlanNonEditable(this.siCustomSchedulerData.planProperties,this.siCustomSchedulerData.countryDetails,t)},e.prototype.getPasteDateValidationMsgs=function(){return{REQUIRED:this.localeAppResourcesService.getResource("PASTE_DATE_REQUIRED"),MAX_ROWS:this.localeAppResourcesService.getResource("PASTE_DATE_MAX_ROWS"),MAX_ROWS_EXTRA_1:this.localeAppResourcesService.getResource("PASTE_DATE_MAX_ROWS_EXTRA_1"),MAX_ROWS_EXTRA_2:this.localeAppResourcesService.getResource("PASTE_DATE_MAX_ROWS_EXTRA_2"),MAX_ROWS_EXTRA_3:this.localeAppResourcesService.getResource("PASTE_DATE_MAX_ROWS_EXTRA_3"),MAX_ROWS_EXTRA_PLU_2:this.localeAppResourcesService.getResource("PASTE_DATE_MAX_ROWS_EXTRA_PLU_2"),MAX_ROWS_EXTRA_PLU_3:this.localeAppResourcesService.getResource("PASTE_DATE_MAX_ROWS_EXTRA_PLU_3"),INVALID_ROW_PART_1:this.localeAppResourcesService.getResource("PASTE_DATE_INVALID_ROW_PART_1"),INVALID_ROW_PART_2:this.localeAppResourcesService.getResource("PASTE_DATE_INVALID_ROW_PART_2")}},e.prototype.isInitiationScheduleRowEmpty=function(e){return!e.get("noOfCenters").value&&!e.get("slotStartDate").value&&!e.get("slotEndDate").value},e.prototype.addRow=function(e,t,n,l){var a=this.fb.group({action:[{value:e&&e.action?e.action:null,disabled:l}],noOfCenters:[{value:e&&i.c.isDefined(e.noOfCenters,!0)?e.noOfCenters:null,disabled:l}],slotStartDate:[{value:e&&e.slotStartDate?e.slotStartDate:null,disabled:n}],slotEndDate:[{value:e&&e.slotEndDate?e.slotEndDate:null,disabled:l}],usedCohortKeys:this.siCustomSchedulerData&&this.siCustomSchedulerData.planProperties&&this.siCustomSchedulerData.planProperties.isCohortPlan&&this.siCustomSchedulerData.planProperties.isCohortPlan.toString().toUpperCase()===o.xc?this.getUsedCohortKeys(e):"",slotType:[e&&e.slotType?e.slotType:""],centerKey:[e&&e.centerKey?e.centerKey:""],hasSubjEvent:[e&&e.hasSubjEvent?e.hasSubjEvent:""]});this.siCustomSchedulerControls.initiationSchedule.push(a),t||this.updateView()},e.prototype.getUsedCohortKeys=function(e){var t=e.usedCohortKeys;return null==t||""===t?null==e.slotType||""===e.slotType||e.slotType===o.cc.NEW?o.g:"":e.usedCohortKeys},e.prototype.updateView=function(){var e=this.siCustomSchedulerControls.initiationSchedule,t=this.siCustomSchedulerData.dataSource;t&&t.next&&e&&e.controls&&t.next(e.controls)},e.prototype.getSiCustomSchedulerResource=function(){return{SI_TOTAL_NUMBER_OF_SITES:this.localeAppResourcesService.getResource("SI_TOTAL_NUMBER_OF_SITES"),PARENT:this.localeAppResourcesService.getResource("PARENT"),ACTUALS:this.localeAppResourcesService.getResource("ACTUALS"),PROJECTED:this.localeAppResourcesService.getResource("PROJECTED"),MAP_COHORTS:this.localeAppResourcesService.getResource("MAP_COHORTS"),ENTER_SLOT_DATES:this.localeAppResourcesService.getResource("ENTER_SLOT_DATES"),SI_UNITITIATED_SITES:this.localeAppResourcesService.getResource("SI_UNITITIATED_SITES"),SITES:this.localeAppResourcesService.getResource("CSI_SCHEDULER_SITES"),START_DATE:this.localeAppResourcesService.getResource("CSI_SCHEDULER_START_DATE"),END_DATE:this.localeAppResourcesService.getResource("CSI_SCHEDULER_END_DATE"),SITES_REMAINING_TO_REPLAN:this.localeAppResourcesService.getResource("CSI_SCHEDULER_SITES_TO_REPLAN"),SITES_REMAINING:this.localeAppResourcesService.getResource("CSI_SCHEDULER_SITES_REMAINING"),SI_SITES_TO_REDISTRIBUTE:this.localeAppResourcesService.getResource("SI_SITES_TO_REDISTRIBUTE"),SI_FSID:this.localeAppResourcesService.getResource("SI_FSID"),DELETE_ICON:this.localeAppResourcesService.getResource("CSI_SCHEDULER_DELETE_ICON")}},e.prototype.setSIScheduleEnability=function(e){var t=s.a.isCohortAdjustment(this.siCustomSchedulerData.planProperties);this.isAdjustable()&&t?(this.toggleSIScheduleenability(!0,t),this.buttonsDisabled=!1):e?(this.toggleSIScheduleenability(!1,t),this.buttonsDisabled=!0):(this.toggleSIScheduleenability(!0,t),this.buttonsDisabled=!1)},e.prototype.toggleSIScheduleenability=function(e,t){var n=this.siCustomSchedulerControls.initiationSchedule;e?(n.enable(),n.at(o.Kb.ZERO)&&n.at(o.Kb.ZERO).get("slotStartDate").disable()):n.disable(),!0===t&&this.disableActualSlots(n),this.updateView()},e.prototype.disableActualSlots=function(e){if(e&&e.length>0)for(var t=0,n=e.at(t);n&&n.get("slotType").value===o.cc.ACTUAL;)n.get("noOfCenters").disable(),n.get("slotStartDate").disable(),n.get("slotEndDate").disable(),n.get("action").disable(),n=++t>e.length-1?null:e.at(t)},e.prototype.countryDetailsChanged=function(){if(this.siCustomSchedulerData&&this.siCustomSchedulerData.countryDetails){var e=this.siCustomSchedulerData.countryDetails;this.updateSIData(e),this.updateScheduleData(e),this.updateView(),this.triggerChangeInCEP(),this.triggerChangeOfUsedCohortKeys()}},e.prototype.updateSIData=function(e){var t=this;if(e&&e.planParamsDetails){var n,l={},a=null;l.totalNumOfSites=i.c.isDefined(e.planParamsDetails.numSites)?e.planParamsDetails.numSites:"",a=e.planParamsDetails.actuals&&i.c.isDefined(e.planParamsDetails.actuals.numSites)?parseInt(e.planParamsDetails.actuals.numSites,10):"",n=e.planParamsDetails.parentPlan&&i.c.isDefined(e.planParamsDetails.parentPlan.numSites)?e.planParamsDetails.parentPlan.numSites:"",l.uninitiatedSite=this.calculateUninitiatedSite(parseInt(l.totalNumOfSites.toString(),10),parseInt(a.toString(),10));var r=this.calculateRangeMin(parseInt(n,10),parseInt(l.totalNumOfSites.toString(),10),parseInt(a,10));this.siCustomSchedulerData.range="( "+r+" -  "+l.uninitiatedSite+" )",this.siCustomSchedulerData.redistSites=e.planParamsDetails.redistSites,!this.isPlan()&&this.isAdjustable()?((void 0===e.planParamsDetails.redistSites||void 0!==e.planParamsDetails.redistSites&&0===e.planParamsDetails.redistSites)&&(l.sitesToRedistribute=o.yc),i.c.isDefined(e.planParamsDetails.redistSites,!0)&&e.planParamsDetails.redistSites>0?(l.fsi=e.planParamsDetails.redistFSI,l.sitesToRedistribute=e.planParamsDetails.redistSites,this.disableFSI(!1)):(l.fsi=e.planParamsDetails.parentPlan?e.planParamsDetails.parentPlan.FSI:"",this.disableFSI(!0)),i.c.isDefined(l.sitesToRedistribute)&&l.sitesToRedistribute===o.yc&&(l.fsi="")):i.c.isDefined(e.planParamsDetails.FSI.toString())?(l.fsi=e.planParamsDetails.FSI,this.disableFSI(!1)):(l.fsi="",this.disableFSI(!1)),this.patchFormValue(l),setTimeout((function(){t.setCohortAdjustmentFsi(e)}),1e3)}},e.prototype.setCohortAdjustmentFsi=function(e){if(!this.isPlan()&&s.a.isCohortAdjustment(this.siCustomSchedulerData.planProperties))if(!1===e.planParamsDetails.isFromBasePlan)this.proceedToSetFsi(e.planParamsDetails.FSI,!1);else{var t=this.getActualSlots(e);if(0===t.length&&0===this.getProjectedSlots(e).length){var n=c().add(1,"days").toDate();this.proceedToSetFsi(n,!1)}else if(t.length>0)this.proceedToSetFsi(e.planParamsDetails.actuals.FSI,!0);else{var l=this.getCohortAdjustmentFsi(e);this.proceedToSetFsi(l,!1)}}},e.prototype.isCountrySlotRedistributed=function(e){return e.planParamsDetails.centerInitInfo.granularCenterInitInfo.centerInitSlot.filter((function(e){return e.slotType===o.cc.REDISTRIBUTED})).length>0},e.prototype.getActualSlots=function(e){return[].concat(e.planParamsDetails.centerInitInfo.granularCenterInitInfo.centerInitSlot).filter((function(e){return e.slotType===o.cc.ACTUAL}))},e.prototype.getProjectedSlots=function(e){return e.planParamsDetails.centerInitInfo.granularCenterInitInfo.centerInitSlot.filter((function(e){return e.slotType!==o.cc.ACTUAL}))},e.prototype.getGranularSlots=function(e){return e.planParamsDetails.centerInitInfo.granularCenterInitInfo.centerInitSlot||[]},e.prototype.getSavedSIMethod=function(e){return e&&e.planParamsDetails?e.planParamsDetails.siteInitiationMethod:o.ac.PERCENT},e.prototype.proceedToSetFsi=function(e,t){this.siCustomSchedulerControls.FSIDate.setValue(e,{emitEvent:!1}),this.triggerResetFSS(),this.disableFSI(t)},e.prototype.triggerResetFSS=function(){this.resetFSS.next(!0)},e.prototype.getCohortAdjustmentFsi=function(e){return this.getGranularSlots(e)&&this.getGranularSlots(e).length>0?this.getGranularSlots(e)[0].slotStartDate:e.planParamsDetails.FSI},e.prototype.patchFormValue=function(e){this.siCustomSchedulerControls.totalNoOfSites.patchValue(e.totalNumOfSites),this.siCustomSchedulerControls.uninitiatedSite.patchValue(e.uninitiatedSite),this.siCustomSchedulerControls.sitesToRedistribute.patchValue(e.sitesToRedistribute?e.sitesToRedistribute:o.yc),this.siCustomSchedulerControls.FSIDate.patchValue(e.fsi)},e.prototype.updateScheduleData=function(e){var t=this;this.emptyTable(!1),e&&e.planParamsDetails&&(e.planParamsDetails.centerInitInfo&&e.planParamsDetails.centerInitInfo.granularCenterInitInfo&&e.planParamsDetails.centerInitInfo.granularCenterInitInfo.centerInitSlot&&this.showInitSlotsRequired(e.planParamsDetails)?[].concat(e.planParamsDetails.centerInitInfo.granularCenterInitInfo.centerInitSlot).forEach((function(e,n){n===o.Kb.ZERO?t.addRow(e,!1,!0):(e.action=t.getSiCustomSchedulerResource().DELETE_ICON,t.addRow(e,!1,!1))})):this.siCustomSchedulerControls.FSIDate?this.addRow({slotStartDate:this.siCustomSchedulerControls.FSIDate.value,noOfCenters:null,slotEndDate:this.siCustomSchedulerControls.FSIDate.value},!1,!0):this.addRow(),this.disableSISchedule(this.siCustomSchedulerData.redistSites),this.siCustomSchedulerControls.totalNoOfSitesControlForRemaining=this.isValidationOnTotalSites(e.planParamsDetails)?this.siCustomSchedulerControls.totalNoOfSites:this.siCustomSchedulerControls.sitesToRedistribute)},e.prototype.emptyTable=function(e){for(void 0===e&&(e=!0);0!==this.siCustomSchedulerControls.initiationSchedule.length;)this.siCustomSchedulerControls.initiationSchedule.removeAt(0);e&&this.updateView()},e.prototype.isPlan=function(){return!!(this.siCustomSchedulerData&&this.siCustomSchedulerData.planProperties&&this.siCustomSchedulerData.planProperties.isPlan)},e.prototype.isCohortPlan=function(){return!!(this.siCustomSchedulerData&&this.siCustomSchedulerData.planProperties&&s.a.isCohortPlan(this.siCustomSchedulerData.planProperties))},e.prototype.isAdjustable=function(){return!!(this.siCustomSchedulerData&&this.siCustomSchedulerData.countryDetails&&this.siCustomSchedulerData.countryDetails.planParamsDetails&&this.siCustomSchedulerData.countryDetails.planParamsDetails.isAdjustable)},e.prototype.toDisplayRedistributedFields=function(){return!(this.siCustomSchedulerData.planProperties&&this.siCustomSchedulerData.planProperties.isPlan||!this.hasActualFSI()||!this.isAdjustable()||this.isCohortPlan())},e.prototype.hasActualFSI=function(){var e=!1;if(this.siCustomSchedulerData&&this.siCustomSchedulerData.countryDetails&&this.siCustomSchedulerData.countryDetails.planParamsDetails){var t=this.siCustomSchedulerData.countryDetails.planParamsDetails;if(!1===t.isFromBasePlan)e=!1;else if(t.actuals&&t.actuals.FSI){var n=t.actuals.FSI;e=null!=n&&n.trim().length>0}}return e},e.prototype.getPlanParam=function(e){return this.siCustomSchedulerData&&this.siCustomSchedulerData.countryDetails&&this.siCustomSchedulerData.countryDetails.planParamsDetails?this.siCustomSchedulerData.countryDetails.planParamsDetails[e]:null},e.prototype.isValidationOnTotalSites=function(e){return!this.siCustomSchedulerData.planProperties.isPlan&&"Y"===this.siCustomSchedulerData.planProperties.isCohortPlan||!e.isAdjustable},e.prototype.triggerChangeOfUsedCohortKeys=function(){this.changeOfUsedCohortKeys.next(!0)},e.prototype.showInitSlotsRequired=function(e){if(e){if(this.isPlan()||this.isCohortPlan())return!this.isPlan()&&this.isCohortPlan()?e.FSI:this.isPlan()&&e.FSI;if(!e.isAdjustable)return!0;if(!e.redistSites||e.redistSites===o.Kb.ZERO)return!1;if(e.redistSites>o.Kb.ZERO)return!0}return!0},e.prototype.applyToSISchedule=function(e){e&&this.addOrReplaceRows(e)},e.prototype.addOrReplaceRows=function(e){var t=e?e.split("\n"):[];this.addBulkRows(t,!1)},e.prototype.addBulkRows=function(e,t){for(var n=this,l=0;l<e.length;l++){var a=this.formCustomSIObject(e[l]),i=a.noOfCenters,r=a.slotStartDate,u=a.slotEndDate;if(i&&u&&r){var d={action:"delete",noOfCenters:i,slotStartDate:r.toDate(),slotEndDate:u.toDate(),usedCohortKeys:o.g};!0===s.a.isCohortAdjustment(this.siCustomSchedulerData.planProperties)&&(d.slotType="new"),this.addRow(d,!0)}}setTimeout((function(){n.updateView(),n.triggerChangeInCEP()}),0)},e.prototype.formCustomSIObject=function(e){var t=e.trim().split(/\s+/),n=c(t[0],"DD-MMM-YYYY",!0),l=c(t[1],"DD-MMM-YYYY",!0);return{noOfCenters:parseInt(t[2],10),slotStartDate:n,slotEndDate:l}},e.prototype.calculateUninitiatedSite=function(e,t){var n=0;return null!=t&&null!=e&&(n=e>t?e-t:0),!1===s.a.isCohortAdjustment(this.siCustomSchedulerData.planProperties)&&this.siCustomSchedulerControls.sitesToRedistributeMaxValue.setValue(n),n},e.prototype.calculateRangeMin=function(e,t,n){var l=0;return i.c.isDefined(n,!0)&&i.c.isDefined(t,!0)&&i.c.isDefined(e,!0)&&(e>n?l=t<=e?0:t-e:e<=n&&(l=t<=n?0:t-n)),!1===s.a.isCohortAdjustment(this.siCustomSchedulerData.planProperties)&&this.siCustomSchedulerData.countryDetails&&this.siCustomSchedulerData.countryDetails.planParamsDetails.isAdjustable&&this.siCustomSchedulerControls.sitesToRedistributeMinValue.setValue(l),l},e.prototype.disableSISchedule=function(e){if(null!=this.siCustomSchedulerData.planProperties.isPlan){var t=!1;this.isAdjustable()&&(t=!(e&&i.c.isDefined(e,!0)&&e>o.Kb.ZERO)),this.setSIScheduleEnability(t)}},e.prototype.disableFSI=function(e){this.siCustomSchedulerData.toDisableFSI=null,this.siCustomSchedulerData&&(this.siCustomSchedulerData.toDisableFSI=e,this.siCustomSchedulerControls&&this.siCustomSchedulerControls.FSIDate&&(e?this.siCustomSchedulerControls.FSIDate.disable():this.siCustomSchedulerControls.FSIDate.enable()),this.setSIScheduleEnability(e))},e.prototype.getUpdatedFSI=function(e,t){var n;return!this.isPlan()&&this.isAdjustable()&&(e>this.actualNumSites()&&e>this.parentNumSites()||t>0?(this.disableFSI(!1),n=c().add(1,"days").toDate()):(this.disableFSI(!0),n="")),n},e.prototype.parentNumSites=function(){var e=null;return this.siCustomSchedulerData&&this.siCustomSchedulerData.countryDetails&&this.siCustomSchedulerData.countryDetails.planParamsDetails&&this.siCustomSchedulerData.countryDetails.planParamsDetails.parentPlan&&i.c.isDefined(this.siCustomSchedulerData.countryDetails.planParamsDetails.parentPlan.numSites,!0)&&(e=this.siCustomSchedulerData.countryDetails.planParamsDetails.parentPlan.numSites),e},e.prototype.actualNumSites=function(){var e=null;return this.siCustomSchedulerData&&this.siCustomSchedulerData.countryDetails&&this.siCustomSchedulerData.countryDetails.planParamsDetails&&this.siCustomSchedulerData.countryDetails.planParamsDetails.actuals&&i.c.isDefined(this.siCustomSchedulerData.countryDetails.planParamsDetails.actuals.numSites,!0)&&(e=parseInt(this.siCustomSchedulerData.countryDetails.planParamsDetails.actuals.numSites,10)),e},e.prototype.projectedNumSites=function(){var e=null;return this.siCustomSchedulerData&&this.siCustomSchedulerData.countryDetails&&this.siCustomSchedulerData.countryDetails.planParamsDetails&&this.siCustomSchedulerData.countryDetails.planParamsDetails.projections&&i.c.isDefined(this.siCustomSchedulerData.countryDetails.planParamsDetails.projections.numSites,!0)&&(e=parseInt(this.siCustomSchedulerData.countryDetails.planParamsDetails.projections.numSites,10)),e},e.prototype.resetSIMethod=function(){this.siCustomSchedulerControls&&this.siCustomSchedulerControls.containerFormGroup&&this.siCustomSchedulerControls.containerFormGroup.get("siMethod")&&i.c.clearFormGroupValidators(this.siCustomSchedulerControls.containerFormGroup.get("siMethod"))},e}()},ZQmJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var l=n("HkWN"),a=function(){function e(){}return e.prototype.agInit=function(e){this.item=e.value,this.isDateCell=this.item.type===l.a.DATE_VALIDATION},e.prototype.refresh=function(){return!0},e}()},ZxdE:function(e,t,n){"use strict";n.r(t);var l=n("LoAr"),a=function(){return function(){}}(),i=n("C9Ky"),r=n("1i3o"),o=n("uMZP"),s=n("6nV5"),u=n("WT9V"),d=n("SECt"),c=n("eXL1"),p=n("IvSS"),h=n("WV+C"),m=n("0xYh"),g=n("C7Lb"),S=n("SeAg"),f=n("EQPj"),v=n("981U"),C=n("wgY5"),y=n("IW84"),R=n("TSSw"),D=n("FRc0"),P=n("+Ve9"),b=n("5IsW"),E=C,T=function(){function e(e,t,n,l,a){this.countriesGridService=e,this.errorTermsStoreService=t,this.planDetailsService=n,this.dialog=l,this.plansService=a}return e.prototype.solveForMCS=function(e,t,n,l,a,i,r,o,u){var d=this;void 0===o&&(o=!0),void 0===u&&(u=!1);var c=this;c.countriesGridService.setSolverBasedValidationFlag(!0);var p=[],h=[];c.nodesCycleTime=[];var m=!1,g={ARTB:!1,RT:!1,MR:!1,SAS:!1,SR:!1,RR:!1,OVER_ENROLLMENT:!1,SFR:!1},S=new Set,f=new Set;if(e.forEach((function(e){if(c.isNodeEnabled(e,l)){p.push(e),e.data.isCohortCountry?(f.add(e.data.geographyKey),d.resetCountryValidatorCheckFlags(g,!1,t)):(S.add(e.data.geographyKey),d.resetCountryValidatorCheckFlags(g,i===b.xc,t));var a=c.validateNodeForSolver(e,g,n,i===b.xc);m=m||!a}e.data.planParamsDetails.isCountryLocked&&h.push(e)})),e.length>0&&p.length<1)c.countriesGridService.showSolversErrorMsg(e.length===h.length?c.countriesGridService.getCountryGridResources().ALL_LOCKED_SELECTED_NODES_NOT_ELIGIBLE:c.countriesGridService.getCountryGridResources().ALL_SELECTED_NODES_NOT_ELIGIBLE);else if(!(p.length<1))if(i!==b.xc||0!==f.size)if(f.forEach((function(e){if(!S.has(e)){var l=null;if(n.forEachNode((function(t){t.data.geographyKey!==e||t.data.isCohortCountry||(l=t)})),l){p.push(l),d.resetCountryValidatorCheckFlags(g,!0,t);var a=c.validateNodeForSolver(l,g,n,i===b.xc);m=m||!a}}})),m)c.showSolversValidationErrorMessage();else if(this.planDetailsService.invalidCountryName.length>0)this.planDetailsService.showValidationPopup(!0);else{var v=[],C=[];if(o&&(n.forEachNode((function(e){e.data.isEdited&&(i===b.xc&&e.data.isCohortExcluded||v.push(e))})),C=v.filter((function(e){return-1===p.indexOf(e)}))),o&&C.length>0){var y=this.countriesGridService.getCountryGridResources().SOLVERS_SELECTION_CONFIRMATION,R=this.countriesGridService.getCountryGridResources();this.dialog.open(s.t,{width:b.F.CONFIRM_DIALOG.WIDTH,data:{heading:R.SELECT_COUNTRIES,message:y,okLabel:R.SOLVER_CONTINUE,cancelLabel:R.Cancel,showCancel:!0},panelClass:b.F.CONFIRM_DIALOG.PANEL_CLASS,id:"SolversSelectionConfirmation"}).afterClosed().subscribe((function(e){e&&e.action===R.SOLVER_CONTINUE&&d.getMCSCohortSolverResponse(p,l,t,a,i,n,r)}))}else this.getMCSCohortSolverResponse(p,l,t,a,i,n,r,u)}else c.countriesGridService.showSolversErrorMsg(c.countriesGridService.getCountryGridResources().ALL_SELECTED_NODES_NOT_ELIGIBLE)},e.prototype.getMCSCohortSolverResponse=function(e,t,n,l,a,i,r,o){var u=this;void 0===o&&(o=!1);var d=this;if(n===b.fc.MRS&&d.nodesCycleTime.length>0){var c={heading:this.errorTermsStoreService.getErrorMessage("CYCLE_TIME_ERR_DIALOG_HEADING"),message:d.getCycleTimeErrorMessage(),okLabel:this.errorTermsStoreService.getErrorMessage("CYCLE_TIME_ERR_DIALOG_OK"),showCancel:!1};this.dialog.open(s.t,{width:b.F.CYCLE_TIME_ERROR.WIDTH,data:c,panelClass:b.F.CYCLE_TIME_ERROR.PANEL_CLASS,id:b.F.CYCLE_TIME_ERROR.ID}).afterClosed().subscribe((function(e){if(e&&e.action&&e&&e.action===c.okLabel)return!1}))}else{var p,h=d.getCommandName(t),m=d.getSolveForValue(n);p=a===b.xc?"countryCohortPlanSolver":"countryPlanSolver";var g=d.getAllNodes(i),S=d.countriesGridService.isOverThreshold&&d.countriesGridService.getSelectedCohort()&&d.countriesGridService.getSelectedCohort().cohortKey;d.countriesGridService.getMCSMultipleCountriesSolversResponse(e,h.commandName,h.planKey,m,S).subscribe((function(t){if(t.result.toUpperCase()===s.k.RESULT_ERROR.toUpperCase())d.countriesGridService.showErrorBanner(+t.error.errorCode);else if(t.multiCountryPlanSolver&&t.multiCountryPlanSolver[p]){var c=null;c=Array.isArray(t.multiCountryPlanSolver[p])?t.multiCountryPlanSolver[p]:[t.multiCountryPlanSolver[p]];var h=[];if(c.forEach((function(t){var l=Object.assign({},t);t.hasOwnProperty("errorCode")&&(h.push(t),9058===t.errorCode&&n===b.fc.MRS&&(l.minScreenRate=0));var o={geographyKey:t.countryKey};a===b.xc&&(o.cohortKey=t.cohortKey),r===b.xc&&(o.isCohortCountry=t.isCohort);var s=d.findNode(g,o);if(s){var u=!0;a===b.xc&&(u=u&&t.isCohort),u=u&&-1!==e.indexOf(s);var c=d.populateSolvedValue(s,l,n,g,a,i,u);u&&!c&&h.push(t)}})),h.length>0)if(o&&m!==b.hc.NUMBER_OF_SUBJECTS){var S=d.getCohortPropertyObject(h[0].cohortKey);s.c.isDefined(S.sourceCohortsInDepPlan)?d.cohortHasFss(h[0].cohortName,c)?d.planDetailsService.showErrorMsg(m):d.planDetailsService.showDepCohortErrorMsg(S.sourceCohortsInDepPlan):d.planDetailsService.showErrorMsg(m)}else d.planDetailsService.showErrorMsg(m);u.updateDependentCohortCard(c,l)}d.countriesGridService.setSolverBasedValidationFlag(!1)}))}},e.prototype.getCycleTimeErrorMessage=function(){var e=this.errorTermsStoreService.getErrorMessage("CYCLE_TIME_ERR_DIALOG_MESSAGE");return this.nodesCycleTime.forEach((function(t){e=e+"<br/>"+t.name+": SP is "+t.SP+", CT is "+t.CT})),e=e+"<br/>"+this.errorTermsStoreService.getErrorMessage("CYCLE_TIME_ERR_DIALOG_MESSAGE_2")},e.prototype.checkForCycleTime=function(e,t){if(e&&e.planParamsDetails){var n=E(e.planParamsDetails.ARTB,s.bb,!0),l=E(e.planParamsDetails.FSS,s.bb,!0),a=this.getScreeningPeriod(e,t);if(n&&l){var i=n.diff(l.add(1,"days"),"days");a>i&&this.nodesCycleTime.push({name:e.isCohortCountry?e.geographyName+"-"+e.cohortName:e.geographyName,SP:Number(a),CT:i})}}},e.prototype.getScreeningPeriod=function(e,t){return t?this.getScreeningPeriodForCohort(e.cohortKey):this.countriesGridService.planDetails.planProperties.screeningPeriod},e.prototype.getScreeningPeriodForCohort=function(e){var t=0;if(this.countriesGridService&&this.countriesGridService.planDetails&&this.countriesGridService.planDetails.planProperties&&this.countriesGridService.planDetails.planProperties.cohortList&&this.countriesGridService.planDetails.planProperties.cohortList.cohortPlanParams){var n=[].concat(this.countriesGridService.planDetails.planProperties.cohortList.cohortPlanParams).find((function(t){return t.cohortKey===e}));n&&(t=n.screeningPeriod)}return t},e.prototype.isNodeEnabled=function(e,t){var n=e.data,l=(!n.isCohortCountry||n.isSelectedCohort&&!n.isCohortExcluded)&&!n.planParamsDetails.isCountryLocked;return t||(l=l&&(!s.c.isDefined(n.planParamsDetails.actuals)||!s.c.isDefined(n.planParamsDetails.actuals.LSR))),l},e.prototype.getCommandName=function(e){return e?{commandName:b.p.EVALUATE_COUNTRY_PLAN,planKey:"planKey"}:{commandName:b.p.EVALUATE_ADJUST_COUNTRY_PLAN,planKey:"adjustStudyPlanKey"}},e.prototype.getSolveForValue=function(e){var t="";switch(e){case b.fc.LSR:t=b.hc.LAST_SUBJECT_RANDOMIZED_DATE;break;case b.fc.MRS:t=b.hc.MINIMUM_MONTHLY_SCREEN_RATE;break;case b.fc.CRT:t=b.hc.NUMBER_OF_SUBJECTS}return t},e.prototype.findNode=function(e,t){return e.find((function(e){var n=e.data,l=!0;return Object.keys(t).forEach((function(e){l=l&&n[e]===t[e]})),l}))},e.prototype.populateSolvedValue=function(e,t,n,l,a,i,r){var u=!0;switch(n){case b.fc.LSR:s.c.isDefined(t.LSR,!1)?e.setDataValue("planParamsDetails.calculatedLSR",t.LSR):u=!1;break;case b.fc.MRS:var d=s.c.formatDecimal(this.planDetailsService.calculateRateAsPerFrequency(t.minScreenRate),"0.1-3"),c=this.planDetailsService.calculateRateAsPerFrequency(t.minScreenRate);this.isSRAvailable()||(d=o.m.computeRR(d,this.getSFRForNode(e,l)),c*=1-this.getSFRForNode(e,l)/100),s.c.isDefined(d,!0)?(e.setDataValue("planParamsDetails.calculatedMRS",d),e.data.planParamsDetails.calculatedMRSWithOutFormat=c):(r&&e.setDataValue("planParamsDetails.calculatedMRS",0),u=!1),s.c.isDefined(t.LSR,!1)&&e.setDataValue("planParamsDetails.calculatedMRLSR",t.LSR);break;case b.fc.CRT:s.c.isDefined(t.optimumRT,!0)?e.setDataValue("planParamsDetails.calculatedCRT",t.optimumRT):u=!1,s.c.isDefined(t.LSR,!1)&&e.setDataValue("planParamsDetails.calculatedCRTLSR",t.LSR)}return a!==b.xc?e.data.planParamsDetails.seedNumber=t.seedNumber:i.forEachNode((function(n){n.data.geographyKey!==e.data.geographyKey||n.data.isCohortCountry||(n.data.planParamsDetails.seedNumber=t.seedNumber)})),u},e.prototype.updateDependentCohortCard=function(e,t){var n=this.getWWCohortData(e);t.emit(n)},e.prototype.getWWCohortData=function(e){var t=[],n=this.countriesGridService.getCountryGridResources().DEPENDENT_COHORT_CARD_EMPTY_CELL_VALUE;return e.reduce((function(e,t){return"WW"===t.geographyLevel&&e.push({label:t.isCohort?t.cohortName:t.countryName,FSS:{calculated:s.c.formatDateStrict(t.FSS,b.y.MONTH_DATE_FORMAT,n)},FSR:{calculated:s.c.formatDateStrict(t.FSR,b.y.MONTH_DATE_FORMAT,n)},LSS:{calculated:s.c.formatDateStrict(t.LSS,b.y.MONTH_DATE_FORMAT,n)},LSR:{calculated:s.c.formatDateStrict(t.LSR,b.y.MONTH_DATE_FORMAT,n)}}),e}),t),t},e.prototype.showNoSelectDialog=function(){this.planDetailsService.showSolverErrorDialog(this.countriesGridService.getCountryGridResources().SELECT_COUNTRIES_MSG,this.countriesGridService.getCountryGridResources().SELECT_COUNTRIES)},e.prototype.validateNodeForSolver=function(e,t,n,l){var a=e.data;a.errorFields=a.errorFields||{};var i="";t&&!t.RT&&(i=a.errorFields[P.a.RT]=this.countriesGridService.validateRT(a.planParamsDetails.enrollmentTarget,b.sc.MIN_ENROLLMENT_TARGET,b.sc.MAX_ENROLLMENT_TARGET,a.isCohortCountry))&&this.refreshCells(e,[P.a.RT],n);var r="";t&&!t.RT&&(r=a.errorFields[P.a.OE]=this.countriesGridService.validateOverEnrollment(a.planParamsDetails.overRecruitmentPercent,b.sc.MIN_OVER_RECRUITMENT_PERCENT,b.sc.MAX_OVER_RECRUITMENT_PERCENT,a.isCohortCountry));var o="";t&&!t.MR&&(this.isSRAvailable()?t.SR||(o=a.errorFields[P.a.SR]=this.countriesGridService.validateSR(a.planParamsDetails.SR,a.planParamsDetails.SFR,0,b.sc.MAX_SR,this.countriesGridService.isSolverActive,a.isCohortExcluded,this.countriesGridService.isCohortPlanCountryRow(a)))&&this.refreshCells(e,[P.a.SR],n):t.RR||(o=a.errorFields[P.a.RR]=this.countriesGridService.validateRR(a.planParamsDetails.RR,a.planParamsDetails.SFR,0,b.sc.MAX_RR,this.countriesGridService.isSolverActive,a.isCohortExcluded,this.countriesGridService.isCohortPlanCountryRow(a)))&&this.refreshCells(e,[P.a.RR],n));var u="";t&&!t.SFR&&(u=a.errorFields[P.a.SFR]=this.countriesGridService.validateScreenFailure(a.planParamsDetails.SFR,a.planParamsDetails.RR,a.planParamsDetails.SR,this.isSRAvailable(),0,b.sc.MAX_SFR,a.isCohortExcluded,a.isCohortCountry))&&this.refreshCells(e,[P.a.SFR],n);var d="";t&&!t.ARTB&&(d=a.errorFields[P.a.ARTB]=this.countriesGridService.validateARTB(a.planParamsDetails.ARTB,this.countriesGridService.getCountryFSI(a),this.countriesGridService.getCountryFSS(a)))&&this.refreshCells(e,[P.a.ARTB],n);var c=a.errorFields[P.a.NUM_SITES]=this.countriesGridService.validateNumberOfSites(a.planParamsDetails.numSites,this.countriesGridService.calculateMinNumSites(a,this.countriesGridService.planDetails.planProperties.isPlan),b.sc.MAX_NUM_SITES,this.countriesGridService.hasAnyDaysToSIDefined(a),this.countriesGridService.isSolverActive,a.isCohortCountry,a.isCohortExcluded,a);c&&this.refreshCells(e,[P.a.NUM_SITES],n);var p="";!1===this.countriesGridService.planDetails.planProperties.isPlan&&a.planParamsDetails.isAdjustable&&this.countriesGridService.planDetails.planProperties.isCohortPlan===b.Gb&&(void 0===a.planParamsDetails.redistSites&&(a.planParamsDetails.redistSites=0),(p=a.errorFields[P.a.RE_DIST_SITES]=this.countriesGridService.validateSitesToRedistribute(a.planParamsDetails.redistSites,a.planParamsDetails.parentPlan.numSites,a.planParamsDetails.numSites,a.planParamsDetails.actuals?a.planParamsDetails.actuals.numSites:null,a.planParamsDetails.isAdjustable))&&this.refreshCells(e,[P.a.RE_DIST_SITES],n));var h="";t&&!t.SAS&&(h=a.errorFields[P.a.SAS]=this.countriesGridService.validateSAS(a.planParamsDetails.ARC,a.planParamsDetails.numSites,b.sc.MAX_CALC_SAS,this.countriesGridService.isSolverActive,a.isCohortExcluded,this.countriesGridService.isCohortPlanCountryRow(a)))&&this.refreshCells(e,[P.a.SAS],n);var m=a.errorFields[P.a.FSI]=this.countriesGridService.validateFSI(this.countriesGridService.getCountryFSI(a),a,this.countriesGridService.planDetails.planProperties.FSI,this.countriesGridService.planDetails.planProperties.LSS,this.countriesGridService.isFSIRequired(a,this.countriesGridService.isSolverActive,this.countriesGridService.planDetails.planProperties.isPlan),!this.countriesGridService.planDetails.planProperties.isPlan,a.planParamsDetails.isAdjustable,this.countriesGridService.planDetails.planProperties.isCohortPlan===b.xc);m&&this.refreshCells(e,[P.a.FSI],n);var g="";this.countriesGridService.planDetails.planProperties.isCohortPlan===b.Gb?g=a.errorFields[P.a.FSS]=this.countriesGridService.validateFSS(this.countriesGridService.getCountryFSS(a),this.countriesGridService.getCountryFSI(a),!0):a.isCohortCountry&&(g=a.errorFields[P.a.FSS]=this.countriesGridService.validateFSS(this.countriesGridService.getCountryFSS(a),this.countriesGridService.getCountryLevelFSI(a),!0)),g&&this.refreshCells(e,[P.a.FSS],n);var S=a.errorFields[P.a.DAYS_TO_25]=this.countriesGridService.validateDaysTo25(this.countriesGridService.getNoOfPeriodsByPercOfCenterInit(a,50),this.countriesGridService.getNoOfPeriodsByPercOfCenterInit(a,90),this.countriesGridService.getNoOfPeriodsByPercOfCenterInit(a,25),this.countriesGridService.isFSIRequired(a,this.countriesGridService.isSolverActive,this.countriesGridService.planDetails.planProperties.isPlan),a,b.sc.MAX_PERIOD_25,this.countriesGridService.planDetails.planProperties.LSS&&s.c.dayDiff(a.planParamsDetails.FSI,this.countriesGridService.planDetails.planProperties.LSS));S&&this.refreshCells(e,[P.a.DAYS_TO_25],n);var f=a.errorFields[P.a.DAYS_TO_50]=this.countriesGridService.validateDaysTo50(this.countriesGridService.getNoOfPeriodsByPercOfCenterInit(a,50),this.countriesGridService.getNoOfPeriodsByPercOfCenterInit(a,90),this.countriesGridService.getNoOfPeriodsByPercOfCenterInit(a,25),this.countriesGridService.isFSIRequired(a,this.countriesGridService.isSolverActive,this.countriesGridService.planDetails.planProperties.isPlan),a,b.sc.MAX_PERIOD_50);f&&this.refreshCells(e,[P.a.DAYS_TO_50],n);var v=a.errorFields[P.a.DAYS_TO_90]=this.countriesGridService.validateDaysTo90(this.countriesGridService.getNoOfPeriodsByPercOfCenterInit(a,90),this.countriesGridService.getNoOfPeriodsByPercOfCenterInit(a,50),this.countriesGridService.getNoOfPeriodsByPercOfCenterInit(a,25),this.countriesGridService.isFSIRequired(a,!0,this.countriesGridService.planDetails.planProperties.isPlan),a,b.sc.MAX_PERIOD_90,this.countriesGridService.planDetails.planProperties.LSS&&s.c.dayDiff(a.planParamsDetails.FSI,this.countriesGridService.planDetails.planProperties.LSS));return v&&this.refreshCells(e,[P.a.DAYS_TO_90],n),this.checkForCycleTime(a,l),!(i||r||o||u||d||c||p||h||m||S||f||v||g)},e.prototype.refreshCells=function(e,t,n){var l={force:!0},a=new Array;a.push(e),l.rowNodes=a,t&&t.length>0&&(l.columns=t),n.refreshCells(l)},e.prototype.showSolversValidationErrorMessage=function(){var e=this.errorTermsStoreService.getErrorMessage("SolversValidationErrorMessage");this.countriesGridService.showSolversErrorMsg(e)},e.prototype.getAllNodes=function(e){var t=new Array;return e.forEachNode((function(e){t.push(e)})),t},e.prototype.resetCountryValidatorCheckFlags=function(e,t,n){Object.keys(e).forEach((function(n){e[n]=t})),t||(n===b.fc.MRS?e.MR=!0:n===b.fc.CRT?e.RT=!0:e.ARTB=!0)},e.prototype.isSRAvailable=function(){return!this.plansService.isRTypeCohortStudy()&&this.countriesGridService.isSRAvailable()},e.prototype.getSFRForNode=function(e,t){var n;if(this.plansService.isRTypeCohortStudy()){var l=this.findNode(t,{geographyKey:e.data.geographyKey,isCohortCountry:!1});n=Number(l.data.planParamsDetails.SFR)}else n=Number(e.data.planParamsDetails.SFR);return n},e.prototype.updateDataStatus=function(e){this.planDetailsService.setSaveDisability(e),this.planDetailsService.setFormStatus(!e),this.planDetailsService.setReadOnly(e)},e.prototype.getCohortPropertyObject=function(e){return this.planDetailsService.planDetailsSubject.value.planProperties.cohortList.cohortPlanParams.find((function(t){return t.cohortKey===e}))},e.prototype.cohortHasFss=function(e,t){var n=this.getWWCohortData(t).find((function(t){return t.label===e})),l=this.countriesGridService.getCountryGridResources().DEPENDENT_COHORT_CARD_EMPTY_CELL_VALUE,a=null;return n&&n.FSS&&n.FSS.calculated&&n.FSS.calculated!==l&&(a=n.FSS.calculated),s.c.isDefined(a)},e}(),A=n("s8WJ"),I=function(){function e(e,t,n){this.planDetailsService=e,this.dialog=t,this.router=n}return Object.defineProperty(e.prototype,"gridAPI",{get:function(){return this.planDetailsService.gridAPI},enumerable:!0,configurable:!0}),e.prototype.showPopupForNoCountriesSelection=function(){var e=this,t=this.planDetailsService.getResourcesForUnsavedCountriesForMCE(),n={};n.okLabel=t.okLabel,n.heading=t.Countries_SaveTitle,n.message=t.Countries_SaveMessage,n.showCancel=!1,this.dialog.open(s.t,{width:b.F.CONFIRM_DIALOG_IH.WIDTH,data:n,panelClass:b.F.CONFIRM_DIALOG.PANEL_OK_CLASS}).afterClosed().subscribe((function(n){n&&n.action&&n.action===t.okLabel&&e.planDetailsService.setSaveDisability(!1)}))},e.prototype.showValidationPopup=function(e){var t=this.planDetailsService.getResourcesForUnsavedCountriesForMCE(),n={};if(n.okLabel=t.okLabel,n.heading=!1===e?t.requiredFieldValidationTitle:t.invalidSites_Title,n.message=!1===e?t.requiredFieldValidationMsg:t.customSitesValidationMsg,!0===e){var l=this.planDetailsService.invalidCountryName.join(", ");n.message=n.message.replace(b.Vb,l)}n.showCancel=!1,this.dialog.open(s.t,{width:b.F.CONFIRM_DIALOG_IH.WIDTH,data:n,panelClass:b.F.CONFIRM_DIALOG.PANEL_OK_CLASS}).afterClosed().subscribe((function(e){}))},e.prototype.showAllCohortExcludedPopup=function(){var e=this.planDetailsService.getResourcesForUnsavedCountriesForMCE(),t={};t.okLabel=e.okLabel,t.heading=e.requiredFieldValidationTitle,t.message=e.allCohortsExcludedMsg,t.showCancel=!1,this.dialog.open(s.t,{width:b.F.CONFIRM_DIALOG_IH.WIDTH,data:t,panelClass:b.F.CONFIRM_DIALOG.PANEL_OK_CLASS}).afterClosed().subscribe((function(e){}))},e.prototype.showConfirmationPopupForUnsavedCountries=function(e){var t=this,n=this.planDetailsService.getResourcesForUnsavedCountriesForMCE(),l={};l.okLabel=n.okLabel,l.cancelLabel=n.cancelLabel,l.heading=n.randTargetConfirmTitle,l.message=n.randTargetConfirmMsg.toString().replace("{0}",e),this.dialog.open(s.t,{width:b.F.CONFIRM_DIALOG_IH.WIDTH,data:l,panelClass:b.F.PLAN_OUTDATED.PANEL_CLASS}).afterClosed().subscribe((function(e){e&&e.action&&e.action===n.okLabel&&t.showRTConfirmationForMCE()}))},e.prototype.showDialogForCountriesWithRTLessThanActual=function(e){var t=this,n=this.planDetailsService.getResourcesForRTConfirmationForMCE(),l={};l.okLabel=n.okLabel,l.cancelLabel=n.cancelLabel,l.heading=n.randTargetConfirmTitle,l.message=n.randTargetConfirmMsg.toString().replace("{0}",e),this.dialog.open(s.t,{width:b.F.CONFIRM_DIALOG_IH.WIDTH,data:l,panelClass:b.F.PLAN_OUTDATED.PANEL_CLASS}).afterClosed().subscribe((function(e){e&&e.action&&e.action===n.okLabel&&t.executeMultiCountrySave()}))},e.prototype.showRTConfirmationForMCE=function(){var e=this.planDetailsService.getCountriesWithRTLessThanActual();if(e)if(this.planDetailsService.planDetailsResponseData&&this.planDetailsService.planDetailsResponseData.planProperties&&void 0!==this.planDetailsService.planDetailsResponseData.planProperties.isOverThreshold&&!0===this.planDetailsService.planDetailsResponseData.planProperties.isOverThreshold){if(this.planDetailsService.selectedCohort&&this.planDetailsService.selectedCohort.cohortName){var t=e.toString().split("[")[0]+" ["+this.planDetailsService.selectedCohort.cohortName+"]";(e=-1!==e.indexOf(this.planDetailsService.selectedCohort.cohortName)?t:"")?this.showDialogForCountriesWithRTLessThanActual(e):this.executeMultiCountrySave()}}else this.showDialogForCountriesWithRTLessThanActual(e);else this.executeMultiCountrySave()},e.prototype.getSelectedCountries=function(){var e=[],t=this,n=this.planDetailsService.planDetailsResponseData;if(t.gridAPI)return t.gridAPI.forEachNode((function(l){t.planDetailsService.getCohortType(l,n.planProperties.isCohortPlan)&&l.isSelected()&&e.push(l.data)})),e},e.prototype.executeMultiCountrySave=function(){var e=this,t=this;t.planDetailsService.setSaveDisability(!0),this.planDetailsService.multiCountrySave().subscribe((function(n){if(n.result&&n.result.toUpperCase()===s.k.RESULT_ERROR){if(n.error.errorCode===b.bb)var l=e.planDetailsService.getInfoProp(n.error.errorCode,b.U),a=t.showDialogForDeletedPlan(l).afterClosed().subscribe((function(e){a.unsubscribe(),e&&e.action&&e.action===l.okLabel&&t.redirectToAllPlans()}))}else n&&t.planDetailsService.setSavePlanSuccess(n)}))},e.prototype.showDialogForDeletedPlan=function(e){return this.dialog.open(s.t,{width:b.F.CONFIRM_DIALOG_IH.WIDTH,height:b.F.CONFIRM_DIALOG_IH.HEIGHT,data:e,panelClass:b.F.PLAN_OUTDATED.PANEL_CLASS})},e.prototype.multiCountrySave=function(){if(0===this.getSelectedCountries().length)this.showPopupForNoCountriesSelection();else if(this.planDetailsService.isInvalidCountryGrid(this.planDetailsService.getSelectedCountriesAndCohorts()))this.planDetailsService.showValidationPopup();else if(this.planDetailsService.invalidCountryName.length>0)this.planDetailsService.showValidationPopup(!0);else if(this.planDetailsService.getAllCohortExcludedList())this.showAllCohortExcludedPopup();else{var e=this.planDetailsService.getEditedCountryNames(),t=this.planDetailsService.mapCohortStatusList();if(t&&t.length>0){var n=[];t.forEach((function(e){n.push(e.countryName)}));var l=n.join();this.planDetailsService.openErrorDialogForMapCohort(!0,l)}else e?this.showConfirmationPopupForUnsavedCountries(e):this.showRTConfirmationForMCE()}},e.prototype.countriesWithInvalidSiData=function(e){return[]},e.prototype.redirectToAllPlans=function(){this.router.navigate(["/plans","manageplan"])},e}(),_=n("+vxY"),N=n("8raB"),O=n("DH3O"),M=n("9S+C"),F=n("pN2L"),L=n("BI6r"),w=(n("XllP"),n("3hp2")),G=function(){return function(){}}(),k=function(){function e(e,t,n,l,a,i,r,o,s,u,d){this.route=e,this.activatedRoute=t,this.plansService=n,this.planDetailsService=l,this.planOptionsService=a,this.studySummaryService=i,this.studyListService=r,this.changeDetector=o,this.studySearchFB=s,this.dialog=u,this.dialogService=d,this.showSaveButton=!0,this.showRefreshButton=!0,this.countryTabPlanDropdownChanged=!1}return e.prototype.ngAfterViewChecked=function(){this.changeDetector.detectChanges()},e.prototype.ngOnInit=function(){var e=this;this.route.events.subscribe((function(t){t instanceof v.e&&(e.tabValue=t.url,e.selectedItem=e.planDetailsService.getPreviousTabSelected(e.tabValue.substring(e.tabValue.lastIndexOf("/")+1))),e.showSaveButton=!e.route.url.includes("/reports"),e.showRefreshButton=!e.route.url.includes("/reports")})),this.subscriptions=new Array,this.userActionData=this.plansService.getUserActionData(),this.planDetails=new G,this.planDetails.isSinglePlan=!1,this.planDetails.saveDisabled=!1,this.planDetails.tabItems=this.planDetailsService.getTabItems(),this.planDetails.planOptionLabels=this.planOptionsService.getPlanOptionsResources(),this.planDetails.resources=this.planDetailsService.getPlanDetailsResources(),this.planDetails.isEnable=!0,this.planDetails.isReadOnly=!1,this.planDetails.copiedPlan=null,this.getStudySourceDetails(),this.rateAdjustmentSave(),this.subscriptions.push(this.planDetailsService.getSavePlanSuccessObservable().subscribe((function(t){e.plan=t&&t.studyPlanDetails?t.studyPlanDetails.planProperties:t&&(t.key||t.planKey)?t:e.plan}))),this.subscriptions.push(this.planDetailsService.getCopyPlanVal().subscribe((function(t){e.plan=t&&t.studyPlanDetails?t.studyPlanDetails.planProperties:t&&t.planProperties?t.planProperties:e.plan}))),this.chkPlanKeyExist()?(this.setPlanListItems(),this.subscriptions.push(this.planOptionsService.navigateAwaySelection$.asObservable().subscribe((function(t){t&&e.resetPage(!1)}))),this.subscriptions.push(this.activatedRoute.queryParams.subscribe((function(t){t&&t.type===L.a.ADJUSTEMENT&&e.activatedRoute.parent&&e.activatedRoute.parent.parent&&e.activatedRoute.parent.parent.snapshot.paramMap&&(e.toggleEnablility(!1,!1),e.setTabEnability())})))):(this.planDetails.isEnable=!1,this.planDetails.isReadOnly=!0,this.setTabEnability()),this.subscriptions.push(this.planOptionsService.responseObservable$.subscribe((function(t){switch(t.actionItem){case e.planDetails.planOptionLabels.PLAN_ACTION_LABELS.DELETE_PLAN:e.planDetailsService.onDeletePlanSuccess(t.response,e.planDetails.planOptionLabels,e.userActionData);break;case e.planDetails.planOptionLabels.PLAN_ACTION_LABELS.COPY_PLAN:e.planDetailsService.onCopyPlanSuccess(t.response,e.planDetails.planOptionLabels,"plan_details_copyPlanSuccessDialog"+Math.random(),e.userActionData).subscribe((function(n){if(n&&n.action===e.planDetails.planOptionLabels.BANNER_LABELS.SUCCESS.COPY_PLAN.MODAL_ACTION_GO){if(t.response.responseData&&t.response.responseData.planList&&t.response.responseData.planList.planThumbnail&&e.planDetails){if(Array.isArray(t.response.responseData.planList.planThumbnail))if(t.response.requestData.isPlan)e.planDetails.copiedPlan=t.response.responseData.planList.planThumbnail.find((function(e){return e.name===t.response.requestData.destPlanName}));else{var l=t.response.responseData.planList.planThumbnail.find((function(e){return e.key===t.response.requestData.parentPlanKey}));l&&l.planStatus.value===b.Ub.APPROVED?l.adjustPlanList&&(l.adjustPlanList.adjustPlanThumbnail=l.adjustPlanList.adjustPlanThumbnail?[].concat(l.adjustPlanList.adjustPlanThumbnail):[],e.planDetails.copiedPlan=l.adjustPlanList.adjustPlanThumbnail.find((function(e){return e.name===t.response.requestData.destPlanName}))):e.planDetails.copiedPlan=t.response.responseData.planList.planThumbnail.find((function(e){return e.name===t.response.requestData.destPlanName}))}else e.planDetails.copiedPlan=t.response.requestData;e.planDetails.copiedPlan&&(e.planDetailsService.setSavePlanSuccess(e.planDetails.copiedPlan),e.setPlanListItems(t.response.requestData.destStudyKey,{planKey:e.planDetails.copiedPlan.key,navigation:{isNavigate:!0,path:b.Mb.PLAN_PROPERTY}}),e.planDetailsService.changedPlanKey(e.planDetails.copiedPlan.key),e.selectedItem=e.planDetailsService.getTabItem())}t.response.requestData.destStudyKey!==t.response.requestData.studyKey&&(e.studyListService.shareStudyKey({key:t.response.requestData.destStudyKey}),e.studySummaryService.searchListFormGroupName=e.studySearchFB.group({searchListControl:[t.response.requestData.destStudyName],filterListControl:[""]}),e.subscriptions.push(e.plansService.updatePreferenceBookmarks({key:t.response.requestData.destStudyKey}).subscribe((function(e){console.log("updatePreferenceBookmarks success",e)}),(function(e){console.error(e)}))),e.selectedItem=e.planDetailsService.getTabItem(),e.subscriptions.push(e.studySummaryService.getStudyName(t.response.requestData.destStudyKey).subscribe((function(t){e.plansService.studyDetailData=t}))))}else e.setPlanListItems()}));break;case e.planDetails.planOptionLabels.PLAN_ACTION_LABELS.APPROVE_PLAN:e.planDetailsService.onApprovePlanSuccess(t.response,e.planDetails.planOptionLabels,e.userActionData)&&(e.planDetails.approvedPlan=!0,e.setPlanListItems(e.planDetailsService.studyKey,{planKey:e.planDetails.selectedPlanKey,navigation:{isNavigate:!0,path:b.Mb.PLAN_PROPERTY}}),e.selectedItem=e.planDetailsService.getTabItem(),e.planDetailsService.changedPlanKey(e.planDetails.selectedPlanKey),e.getBriefStudyPlan(!1),console.log("inside approve plan success reload plan details action"))}}))),this.subscriptions.push(this.plansService.studyKey$.subscribe((function(t){e.planDetails.copiedPlan?(e.goToPlanDetails(t,e.planDetails.copiedPlan.key,!0),e.planDetails.copiedPlan=null):e.goToPlanDetails(t,null,!1)}))),this.subscriptions.push(this.planDetailsService.saveEnability$.subscribe((function(t){e.planDetails.saveDisabled=t}))),this.subscriptions.push(this.planDetailsService.planReadOnly$.subscribe((function(t){e.planDetails.isReadOnly=t}))),this.subscriptions.push(this.planDetailsService.planPropertySave$.subscribe((function(t){e.planDetails.isEnable=!0,e.setTabEnability(t),e.setPlanListItems(null,t)}))),this.milestone=this.studySummaryService.getMilestones(b.jc),this.subscriptions.push(this.planDetailsService.navigateAwaySelection$.subscribe((function(t){e.selectedItem=!1===t?e.planDetailsService.getTabItem():null}))),this.setRefreshPlanListSubscription(),this.plansService.setFormStatus(!1),this.updateTabEnability(),this.planDetailsService.isExpand=!1},e.prototype.setRefreshPlanListSubscription=function(){var e=this;this.subscriptions.push(e.planDetailsService.getRefreshPlanListObservable().subscribe((function(t){t&&e.refreshPlanList()})))},e.prototype.refreshPlanList=function(){var e=this,t=this,n=t.planDetailsService.getBriefPlanList().subscribe((function(n){t.planDetails.planListItems=n,e.setSinglePlan(n)}));t.subscriptions.push(n)},e.prototype.toggleEnablility=function(e,t){this.planDetails.isEnable=e,this.planDetails.isReadOnly=t},e.prototype.goToPlanDetails=function(e,t,n){console.log("goToPlanDetails: studyKey: ",e),this.planDetailsService.studyKey=parseInt(e,10),this.planDetails.isEnable=!0,this.planDetails.isReadOnly=!1,this.getStudySourceDetails(parseInt(e,10)),null!=t?n?this.route.navigate(["/plans","plandetails",t,"plan-properties"]):this.setPlanListItems(parseInt(e,10),{planKey:t,navigation:{isNavigate:!0}}):this.setPlanListItems(parseInt(e,10))},e.prototype.setPlanListItems=function(e,t){var n=this;console.log("setPlanListItems: studyKey: ",e);var l=this.planDetailsService.getBriefPlanList(e).subscribe((function(l){n.planDetails.planListItems=l;var a=1===l.length&&l[0]&&void 0!==l[0].briefAdjustPlanList?void 0:!(1!==l.length||!l[0]||void 0!==l[0].briefAdjustPlanList)||void 0,i={};t?(i.key=t.planKey,n.planDetailsService.planKey=i.key,n.setSelectedPlan(t.planKey),n.planDetails.planListItems=l,n.setSinglePlan(l),n.onPlanSelected(i,t.navigation,a,e)):(i.key=s.c.isDefined(e)?n.getFirstPlanKeyFromPlanList():parseInt(n.activatedRoute.snapshot.paramMap.get("plankey"),10),n.setSinglePlan(l),n.planDetailsService.planKey=i.key,n.onPlanSelected(i,null,a,e))}));this.subscriptions.push(l)},e.prototype.setSinglePlan=function(e){var t=this;e&&(e.length>1?this.planDetails.isSinglePlan=!1:1===e.length&&(e[0].briefAdjustPlanList?this.planDetails.isSinglePlan=!1:this.planDetails.planListItems.map((function(e){t.planDetails.singlePlanInfo={},t.planDetails.singlePlanInfo={name:"",planImageStatus:""},t.planDetails.singlePlanInfo.name=e.name,t.planDetails.singlePlanInfo.planImageStatus=e.planImageStatus}))))},e.prototype.getCurveAndMilstoneData=function(e){console.log("this.plan...",e);var t=null;e&&e.isCohortPlan&&"Y"===e.isCohortPlan&&(t={key:-1,name:"All Cohorts",studyCohortKey:-1});var n=this.planDetailsService.studyKey,l={};l.key=this.planDetailsService.planKey,this.getCurveData(n,l,t),this.getMileStoneData(n,l,t)},e.prototype.getBriefStudyPlan=function(e){var t,n=this;void 0===e&&(e=!1),e?e&&(t=e):t=!(!this.planDetails.copiedPlan&&!this.planDetails.approvedPlan),this.planDetailsService.getBriefStudyPlan(this.planDetails.selectedPlanKey,t).subscribe((function(e){e&&(n.plan=e.planProperties,n.isCohortPlan=n.plan.isCohortPlan,n.resetValues(),n.setTabEnability({isCohort:n.plan.isCohortPlan}),n.getCurveAndMilstoneData(n.plan),n.countryTabPlanDropdownChanged&&n.countryTabToCohortDesignTab(n.plan))}))},e.prototype.revertToLatestSaved=function(){var e=this;this.planDetailsService.getBriefStudyPlanForRevertToLatestSaved(this.planDetails.selectedPlanKey,!0).subscribe((function(t){t&&(e.plan=t.planProperties,e.resetValues(),e.setTabEnability({isCohort:e.plan.isCohortPlan}))}))},e.prototype.resetValues=function(){!this.planDetails||!0!==this.planDetails.approvedPlan&&!1!==this.planDetails.approvedPlan||(this.planDetails.approvedPlan=!1),this.planDetails.copiedPlan=null},e.prototype.setSelectedPlan=function(e){e||(e=parseInt(this.activatedRoute.snapshot.paramMap.get("plankey"),10)),this.planDetails.selectedPlanKey=e},e.prototype.getStudySourceDetails=function(e){this.subscriptions.push(this.planDetailsService.getSourceDetails(e).subscribe())},e.prototype.navigateToAllPlans=function(){var e=this,t=this.checkFormStatus();this.canDeactivate(t.isDirty).subscribe((function(t){t&&(e.planDetailsService.setFormStatus(!1),e.redirectToAllPlans())}))},e.prototype.redirectToAllPlans=function(){this.route.navigate(["/plans","manageplan"])},e.prototype.getFirstPlanKeyFromPlanList=function(){return this.planDetails&&this.planDetails.planListItems&&this.planDetails.planListItems.length>0?this.planDetails.planListItems[0].key:null},e.prototype.onPlanSelected=function(e,t,n,l,a){e&&e.key&&(this.planDetailsService.planKey=e.key),this.setPlan(e,t,n,l)},e.prototype.setPlanToPreviousSelection=function(){this.setSelectedPlan(),this.planDetailsService.setRefreshPlanList(!0)},e.prototype.setPlan=function(e,t,n,l){if(null!=e&&null!=e.key){var a,i=!1,r=this.activatedRoute.snapshot.firstChild.url[0].path;"countries"===r&&this.activatedRoute&&this.activatedRoute.children[0]&&!this.activatedRoute.children[0].snapshot.params.countrykey&&(i=!0),this.planDetailsService.plan=e,this.setSelectedPlan(e.key),i||this.getBriefStudyPlan(),n&&!0===n&&(this.planDetails.isSinglePlan=!0),t?t.isNavigate&&this.route.navigate(["/plans","plandetails",e.key,a=t.path]):(a=this.activatedRoute.snapshot.firstChild.url[0].path)===b.Mb.PLAN_PROPERTY||a===b.Mb.PLAN_DESIGN?(this.planDetailsService.changedPlanKey(e.key),this.route.navigate(["/plans","plandetails",e.key,a])):"countries"===a?(this.planDetailsService.setPlanChanged(!0),"countries"===r&&this.activatedRoute&&this.activatedRoute.children[0]&&!this.activatedRoute.children[0].snapshot.params.countrykey&&(this.countryTabPlanDropdownChanged=!0,this.getBriefStudyPlan())):this.route.navigate(["/plans","plandetails",e.key,a])}else this.navigateToAllPlans()},e.prototype.onTabClicked=function(e){var t=this,n=this.checkFormStatus();this.canDeactivate(n.isDirty).subscribe((function(l){l?(t.changeTab(e),t.planDetailsService.setFormStatus(!1)):t.selectedItem=t.planDetailsService.getPreviousTabSelected(n.currentPath)}))},e.prototype.setTabToPreviousSelection=function(){},e.prototype.changeTab=function(e){var t=this;null!=e&&null!=e.routePath&&(this.planDetailsService.planKey=this.planDetails.selectedPlanKey,void 0===this.planDetailsService.planKey&&(this.planDetailsService.planKey=0),this.disabledRevertLink(e.routePath),this.route.navigate(["/plans","plandetails",this.planDetailsService.planKey,e.routePath]).then((function(e){t.userActionData=t.plansService.getUserActionData()})))},e.prototype.disabledRevertLink=function(e){"reports"===e&&(this.planDetails.isReadOnly=!0)},e.prototype.refreshData=function(){console.log("Refresh Data")},e.prototype.resetPage=function(e){console.log("Reset Page");var t=this.activatedRoute.snapshot.firstChild.url[0].path,n=parseInt(this.activatedRoute.snapshot.paramMap.get("plankey"),10);if(t===b.Mb.PLAN_PROPERTY)this.planDetailsService.resetPlanProperty({planKey:n,isConfirmationRequired:e});else if(t===b.Mb.COUNTRIES)if(this.planDetailsService.revertCalled=!0,this.activatedRoute&&this.activatedRoute.children[0]&&this.activatedRoute.children[0].snapshot.params.countrykey)if(this.planDetailsService.isResetConfirmed&&!0===e){var l=this.planDetailsService.getRevertToLatestSavedConfirmProp(),a=this.planDetailsService.showUnsavedDataConfirmation(l);this.handleDialogEventForRevertToLatestSaved(a,event,null,null,null,!0)}else this.executeRevertToLatestSaved(!0);else this.planDetailsService.getIsPopupConfirmationRequired()&&!0===e||this.planDetailsService.isCountryRevertConfirmation?(l=this.planDetailsService.getRevertToLatestSavedConfirmProp(),a=this.planDetailsService.showUnsavedDataConfirmation(l),this.handleDialogEventForRevertToLatestSaved(a,event)):this.executeRevertToLatestSaved(),this.planDetailsService.setPasteVisisibility();else t===b.Mb.RATE_ADJUSTMENT?this.setRevertRateAdjustment(e):this.planDetailsService.resetPlan({planKey:n,isConfirmationRequired:e,currentRoutePath:t})},e.prototype.setRevertRateAdjustment=function(e){if(e){this.planDetailsService.setRevertClicked(e);var t=this.planDetailsService.getRevertToLatestSavedConfirmProp(),n=this.planDetailsService.showUnsavedDataConfirmation(t);this.handleDialogEventForRevertToLatestSaved(n,event,null,null,null,!0)}else this.executeRevertToLatestSaved(!0)},e.prototype.handleDialogEventForRevertToLatestSaved=function(e,t,n,l,a,i){var r=this,o=this,s=this.planDetailsService.getRevertToLatestSavedConfirmProp();e.afterClosed().subscribe((function(e){e&&e.action===s.okLabel?(console.log("Ok clicked!"),r.planDetailsService.setFormStatus(!1),o.executeRevertToLatestSaved(!!i),r.planDetailsService.isCountryRevertConfirmation=!1):console.log("Cancel clicked!")}))},e.prototype.executeRevertToLatestSaved=function(e){var t=this;this.planDetailsService.getBriefStudyPlanForRevertToLatestSaved(this.planDetails.selectedPlanKey,!0,e).subscribe((function(n){n&&(t.planDetailsService.setFormStatus(!1),t.planDetailsService.setSaveDisability(!0),t.planDetailsService.setRevertConfirmationRequired(!1),t.planDetailsService.onSaveAndRevertSubject.next(!0),void 0!==e&&!0===e&&t.planDetailsService.setReadOnly(!0))}))},e.prototype.chkPlanKeyExist=function(){return this.planDetailsService.planKey=parseInt(this.activatedRoute.snapshot.paramMap.get("plankey"),10),this.activatedRoute.snapshot.queryParams.type===L.a.ADJUSTEMENT?(this.planDetails.isEnable=!1,this.planDetails.isReadOnly=!0,this.setTabEnability(),!1):0!==parseInt(this.activatedRoute.snapshot.paramMap.get("plankey"),10)},e.prototype.updateTabEnability=function(){var e=this;this.subscriptions.push(this.planDetailsService.disableCountryTab$.subscribe((function(t){e.setTabEnability(t)})))},e.prototype.setTabEnability=function(e){e?(this.planDetails.tabItems.map((function(e){e.enable=!0})),e.isCohort!==b.pb?this.planDetails.tabItems[1].enable=!0:this.plan&&this.plan.cohortList&&this.plan.cohortList.cohortPlanParams?(Array.isArray(this.plan.cohortList.cohortPlanParams)&&this.plan.cohortList.cohortPlanParams.length>0||!Array.isArray(this.plan.cohortList.cohortPlanParams)&&this.plan.cohortList.cohortPlanParams.cohortKey)&&(this.planDetails.tabItems[2].enable=!0):this.planDetails.tabItems[2].enable=!1):(this.planDetails.tabItems.map((function(e){"plan-properties"!==e.routePath&&(e.enable=!1)})),this.selectedItem=this.planDetailsService.getPreviousTabSelected("plan-properties"),void 0!==this.plan&&(this.planDetails.tabItems[1].enable=!0,this.selectedItem=this.planDetailsService.getPreviousTabSelected("plan-design")))},e.prototype.save=function(){var e=this.activatedRoute.snapshot.firstChild.url[0].path;switch(e){case"plan-properties":case"plan-design":this.planDetailsService.emitSaveData(e);break;case"countries":this.activatedRoute&&this.activatedRoute.children[0]&&this.activatedRoute.children[0].snapshot.params.countrykey?this.singleCountrySave():this.planDetailsService.emitSaveData(e);break;case"rate-adjustments":this.planDetailsService.emitSaveData(e)}},e.prototype.rateAdjustmentSave=function(){var e=this;this.planDetailsService.rateAdjustmentSave$.subscribe((function(t){t===b.Yb.Okay&&e.setPlanListItems(e.planDetailsService.studyKey,{planKey:e.planDetailsService.planKey})}))},e.prototype.singleCountrySave=function(){this.planDetailsService.saveClicked=!0,this.planDetails.saveDisabled=!0;var e=this.activatedRoute.children[0].snapshot.params.countrykey;if(this.planDetailsService.planDetailsResponseData.geoList&&this.planDetailsService.planDetailsResponseData.geoList.geography){for(var t=this.planDetailsService.planDetailsResponseData.geoList.geography.find((function(t){return!t.cohortName&&t.geographyKey.toString()===e.toString()})),n=this.planDetailsService.isCohortPlan(),l=!1,a=this.planDetailsService.updatePlanCommandObj.get("cohortList"),i=this.planDetailsService.updatePlanCommandObj.get("siBody.siCustomMethod.initiationSchedule").getRawValue(),r=0;r<i.length;r++){var o=i[r];o&&o.slotType&&o.slotType===b.cc.ACTUAL?l=!1:o.usedCohortKeys&&!this.mapCohortRowEmpty(a.value.cohortList,o)||(l=!0)}n&&l?this.planDetailsService.openErrorDialogForMapCohort(!1):this.isMethodChangeConfirmDialogReq(t)?this.siMethodChangeConfirmDialog(this.planDetailsService.updatePlanCommandObj.value.siHeader.siteInitiationMethod===b.ac.GRANULAR?"P_TO_C":"C_TO_P"):this.proceedSingleCountrySave()}else this.singleCountryNonCohortSaveCall()},e.prototype.mapCohortRowEmpty=function(e,t){var n=0,l=t.usedCohortKeys;return!(t.slotType&&t.slotType===b.cc.ACTUAL||(l&&e&&l.toString().split(",").forEach((function(t){(t===b.g||e.includes(parseInt(t,10)))&&n++})),n>0))},e.prototype.isMethodChangeConfirmDialogReq=function(e){return this.planDetailsService.updatePlanCommandObj&&this.planDetailsService.updatePlanCommandObj.value.siHeader.siteInitiationMethod&&e.planParamsDetails.centerInitInfo&&(e.planParamsDetails.centerInitInfo.percentCenterInitInfo||e.planParamsDetails.centerInitInfo.granularCenterInitInfo)&&e.planParamsDetails.siteInitiationMethod!==this.planDetailsService.updatePlanCommandObj.value.siHeader.siteInitiationMethod},e.prototype.siMethodChangeConfirmDialog=function(e){var t=this,n=this.planDetailsService.getSIMethodChangeConfirmProp(e);this.dialog.open(s.t,{width:b.F.CONFIRM_SI_METHOD_CHANGE.WIDTH,data:n,panelClass:b.F.CONFIRM_SI_METHOD_CHANGE.PANEL_CLASS,id:b.F.CONFIRM_SI_METHOD_CHANGE.ID}).afterClosed().subscribe((function(e){if(e&&e.action){if(!e||e.action!==n.okLabel)return t.planDetails.saveDisabled=!1,!1;t.proceedSingleCountrySave()}}))},e.prototype.saveRateAdjustment=function(){var e=this.planDetailsService.saveRateAdjustments();console.log("xmlObj",e)},e.prototype.proceedSingleCountrySave=function(){var e=this.planDetailsService.isCohortPlan();e?this.proceedSingleCountryCohortSaveCall(e):this.proceedSingleCountryNonCohortSaveCall(e)},e.prototype.proceedSingleCountryNonCohortSaveCall=function(e){var t=this.planDetailsService.getRTValidation();if(t&&t.countryValidation&&t.countryValidation.isRTConfirm&&!0===t.countryValidation.isRTConfirm){var n=this.planDetailsService.getResouces(),l={};l.okLabel=n.okLabel,l.heading=n.randTargetConfirmTitle,l.message=n.randTargetConfirmMsg.toString().replace("{0}",t.countryValidation.enrollmentTarget).replace("{1}",t.countryValidation.actualEnrollmentTarget),this.confirmRandTargetDialog(l,w.b.single,e)}else this.singleCountryNonCohortSaveCall()},e.prototype.proceedSingleCountryCohortSaveCall=function(e){var t=this.planDetailsService.getRTCohortValidation();if(t&&t.isRTConfirm&&!0===t.isRTConfirm&&t.cohortNames!==b.M){var n=this.planDetailsService.getResouces(),l={};l.okLabel=n.okLabel,l.heading=n.randTargetConfirmTitle,l.message=n.cohortRandTargetConfirmMsg.toString().replace("{0}",t.cohortNames),this.confirmRandTargetDialog(l,w.b.single,e)}else this.singleCountryCohortSaveCall()},e.prototype.singleCountryCohortSaveCall=function(){var e=this;this.planDetailsService.singleCountryCohortSave().subscribe((function(t){t===b.Yb.Okay?(e.planDetailsService.setFormStatus(!1),e.planDetailsService.saveCalled=!0,e.setPlanListItems(e.planDetailsService.studyKey,{planKey:e.planDetailsService.planKey}),e.planDetails.saveDisabled=!0,e.planDetailsService.setReadOnly(!0)):(e.planDetails.saveDisabled=!1,console.log(t)),e.planDetailsService.saveClicked=!1}))},e.prototype.confirmRandTargetDialog=function(e,t,n){var l=this;this.dialog.open(s.t,{width:b.F.CONFIRM_DIALOG_IH.WIDTH,height:b.F.CONFIRM_DIALOG_IH.HEIGHT,data:e,panelClass:b.F.PLAN_OUTDATED.PANEL_CLASS}).afterClosed().subscribe((function(e){if(e&&e.action){if(e.action!==l.planDetailsService.getResouces().okLabel)return l.planDetailsService.saveClicked=!1,l.planDetails.saveDisabled=!1,!1;t===w.b.single&&(n&&!0===n?l.singleCountryCohortSaveCall():l.singleCountryNonCohortSaveCall())}}))},e.prototype.singleCountryNonCohortSaveCall=function(){var e=this;this.planDetailsService.singleCountrySave().subscribe((function(t){t===b.Yb.Okay?(e.planDetailsService.setFormStatus(!1),e.planDetailsService.saveCalled=!0,e.setPlanListItems(e.planDetailsService.studyKey,{planKey:e.planDetailsService.planKey}),e.planDetails.saveDisabled=!0,e.planDetailsService.setReadOnly(!0)):(e.planDetails.saveDisabled=!1,console.log(t)),e.planDetailsService.saveClicked=!1}))},e.prototype.showDialogForDeletedPlan=function(e){return this.dialog.open(s.t,{width:b.F.CONFIRM_DIALOG_IH.WIDTH,height:b.F.CONFIRM_DIALOG_IH.HEIGHT,data:e,panelClass:b.F.PLAN_OUTDATED.PANEL_CLASS})},e.prototype.ngOnDestroy=function(){this.planDetails=null,this.subscriptions.forEach((function(e){e.unsubscribe()})),this.subscriptions=null,this.route=null,this.activatedRoute=null},e.prototype.getCurveData=function(e,t,n){this.subscriptions.push(this.planDetailsService.getCurveData(e,t,null,n,!0).subscribe((function(e){console.log(e)}))),this.subscriptions.push(this.planDetailsService.getCurveDataRegion(e,t,null,n,!0).subscribe((function(e){console.log(e)}))),this.subscriptions.push(this.planDetailsService.getCurveDataWW(e,t,n,!0).subscribe((function(e){console.log(e)})))},e.prototype.getMileStoneData=function(e,t,n){this.subscriptions.push(this.planDetailsService.getMilestoneData(e,t,null,n,!0).subscribe((function(e){console.log("getMileStoneData",e)})))},e.prototype.canDeactivate=function(e){return e?this.dialogService.confirm():Object(F.a)(!0)},e.prototype.checkFormStatus=function(){var e={isDirty:!1,currentPath:""},t=this.activatedRoute.snapshot.firstChild.url[0].path;switch(e.currentPath=t,t){case"plan-properties":case"plan-design":e.isDirty=this.plansService.getFormStatus();break;case"countries":e.isDirty=this.activatedRoute&&this.activatedRoute.children[0]&&this.activatedRoute.children[0].snapshot.params.countrykey?this.planDetailsService.updatePlanCommandObj&&this.planDetailsService.updatePlanCommandObj.dirty:this.planDetailsService.getIsPopupConfirmationRequired();break;case"rate-adjustments":e.isDirty=this.planDetailsService.getConfirmationRequired()}return e},e.prototype.onPlanApproved=function(e){this.studySummaryService.resetStudyList()},e.prototype.countryTabToCohortDesignTab=function(e){this.countryTabPlanDropdownChanged&&(this.countryTabPlanDropdownChanged=!1,e&&"Y"===e.isCohortPlan&&e.cohortList?(e.cohortList&&e.cohortList.cohortPlanParams||e.cohortList.cohortPlanParams.length>0)&&this.getBriefStudyPlan():e&&"N"===e.isCohortPlan?this.getBriefStudyPlan():(this.planDetailsService.changedPlanKey(e.planKey),this.route.navigate(["/plans","plandetails",e.planKey,b.Mb.PLAN_DESIGN])))},e}(),V=n("+xO1"),x=n("IfiR"),K=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function U(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-so-plan-dropdown-list",[["class","ctos-so-plan-dropdown-list"]],null,[[null,"planSelect"]],(function(e,t,n){var l=!0;return"planSelect"===t&&(l=!1!==e.component.onPlanSelected(n)&&l),l}),r.u,r.j)),l["ɵdid"](1,770048,null,0,o.nb,[s.M,o.ab,s.y],{items:[0,"items"],selectedPlanKey:[1,"selectedPlanKey"]},{planSelect:"planSelect"})],(function(e,t){var n=t.component;e(t,1,0,n.planDetails.planListItems,n.planDetails.selectedPlanKey)}),null)}function j(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","col-6 mx-auto d-flex justify-content-center"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,U)),l["ɵdid"](2,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,2,0,t.component.planDetails.isEnable)}),null)}function B(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,3,"div",[["class","col-6 mx-auto d-flex justify-content-center"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0;return"longpress"===t&&(a=!1!==l["ɵnov"](e,1).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,1)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,1)._handleTouchend()&&a),a}),null,null)),l["ɵdid"](1,212992,null,0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{message:[0,"message"],tooltipClass:[1,"tooltipClass"]},null),(e()(),l["ɵeld"](2,0,null,null,0,"img",[["class","plan-status-icon"]],[[8,"src",4]],null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"label",[["class","option-text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["ɵand"](0,null,null,0))],(function(e,t){var n=t.component;e(t,1,0,null==n.planDetails?null:null==n.planDetails.singlePlanInfo?null:n.planDetails.singlePlanInfo.name,"ctos-tooltip")}),(function(e,t){var n=t.component;e(t,2,0,null==n.planDetails?null:null==n.planDetails.singlePlanInfo?null:n.planDetails.singlePlanInfo.planImageStatus),e(t,3,0,null==n.planDetails?null:null==n.planDetails.singlePlanInfo?null:n.planDetails.singlePlanInfo.name)}))}function W(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-so-plan-options",[],null,[[null,"planApprovedEvent"]],(function(e,t,n){var l=!0;return"planApprovedEvent"===t&&(l=!1!==e.component.onPlanApproved(n)&&l),l}),r.r,r.g)),l["ɵdid"](1,638976,null,0,o.N,[o.O,u.DatePipe],{milestone:[0,"milestone"],userActionData:[1,"userActionData"],planData:[2,"planData"]},{planApprovedEvent:"planApprovedEvent"})],(function(e,t){var n=t.component;e(t,1,0,n.milestone,n.userActionData,n.plan)}),null)}function H(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","col-2 mx-auto d-flex justify-content-center bottom-padding"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"button",[["class","ctos-btn ctos-btn-primary"]],[[8,"innerHTML",1],[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.save()&&l),l}),null,null))],null,(function(e,t){var n=t.component;e(t,1,0,n.planDetails.resources.SAVE_PLANS_LABEL,n.planDetails.saveDisabled)}))}function Y(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,9,"div",[["class","col-5 d-flex justify-content-end top-padding"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,8,"a",[["class","ctos-nav-link ctos-reset-icon"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.resetPage(!0)&&l),l}),null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{disabled:0}),(e()(),l["ɵeld"](5,0,null,null,3,"i",[["class","material-icons icon-arrow-back"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](7,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵted"](-1,null,["undo"])),(e()(),l["ɵeld"](9,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],(function(e,t){var n=t.component,l=e(t,4,0,n.planDetails.isReadOnly);e(t,3,0,"ctos-nav-link ctos-reset-icon",l),e(t,7,0,"material-icons icon-arrow-back",n.planDetails.isReadOnly?"icon-arrow-back-inactive":"icon-arrow-back-active")}),(function(e,t){e(t,9,0,t.component.planDetails.resources.REVERT_LABEL)}))}function q(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,29,"div",[["class","plan-details "]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,25,"div",[["class","fixed-plan-details-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,24,"div",[["class","plan-details-row"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,23,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,22,"div",[["class","plan-details-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,11,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,3,"div",[["class","col-3 d-flex justify-content-start no-left-padding"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,2,"a",[["class","ctos-nav-link"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.navigateToAllPlans()&&l),l}),null,null)),(e()(),l["ɵeld"](8,0,null,null,0,"img",[["class","icon-arrow-back"]],[[8,"src",4]],null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,j)),l["ɵdid"](11,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,B)),l["ɵdid"](13,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](14,0,null,null,2,"div",[["class","col-3 d-flex justify-content-end"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,W)),l["ɵdid"](16,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](17,0,null,null,9,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,8,"div",[["class","col ctos-tab-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](19,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,2,"div",[["class","col-5 d-flex justify-content-start top-padding"]],null,null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,1,"ctos-tab",[["class","ctos-tab"]],null,[[null,"tabClicked"]],(function(e,t,n){var l=!0;return"tabClicked"===t&&(l=!1!==e.component.onTabClicked(n)&&l),l}),f.r,f.j)),l["ɵdid"](22,770048,null,0,s.ob,[v.a],{isCohortPlan:[0,"isCohortPlan"],items:[1,"items"],selectedTabItem:[2,"selectedTabItem"]},{tabClicked:"tabClicked"}),(e()(),l["ɵand"](16777216,null,null,1,null,H)),l["ɵdid"](24,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Y)),l["ɵdid"](26,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](27,0,null,null,2,"div",[["class","plan-details-content"]],null,null,null,null,null)),(e()(),l["ɵeld"](28,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),l["ɵdid"](29,212992,null,0,v.s,[v.b,l.ViewContainerRef,l.ComponentFactoryResolver,[8,null],l.ChangeDetectorRef],null,null)],(function(e,t){var n=t.component;e(t,11,0,!n.planDetails.isSinglePlan),e(t,13,0,n.planDetails.isSinglePlan),e(t,16,0,n.planDetails.isEnable),e(t,22,0,n.isCohortPlan,n.planDetails.tabItems,n.selectedItem),e(t,24,0,n.showSaveButton),e(t,26,0,n.showRefreshButton),e(t,29,0)}),(function(e,t){var n=t.component;e(t,8,0,n.planDetails.resources.ICON_ARROW_BACK),e(t,9,0,n.planDetails.resources.ALL_PLANS_LABEL)}))}function J(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"ctos-plan-details",[],null,null,null,q,K)),l["ɵprd"](4608,null,T,T,[D.a,s.D,R.a,A.e,y.a]),l["ɵprd"](4608,null,I,I,[R.a,A.e,v.n]),l["ɵprd"](512,null,_.a,_.a,[s.S,s.h,s.M,s.D,A.e,N.c,v.n]),l["ɵprd"](512,null,R.a,R.a,[s.M,s.S,s.h,o.cb,y.a,A.e,o.ab,o.O,v.n,o.e,_.a,v.a,s.D,O.a,M.a]),l["ɵdid"](5,8634368,null,0,k,[v.n,v.a,y.a,R.a,o.O,V.a,o.ab,l.ChangeDetectorRef,x.g,A.e,s.y],null,null)],(function(e,t){e(t,5,0)}),null)}var X=l["ɵccf"]("ctos-plan-details",k,J,{},{},[]),z=n("Gien"),Z=n("5kg2"),$=n("GcYS"),Q=n("Z5FQ"),ee=n("Hc9t"),te=n("rXXt"),ne=n("bdSb"),le=n("wX4V"),ae=n("PVb+"),ie=n("Pd9Q"),re=n("Ho7M"),oe=n("dgjn"),se=n("O0P8"),ue=n("LYzL"),de=n("+3V+"),ce=n("UUMc"),pe=n("AvVu"),he=function(){function e(e,t,n,a,i,r){this.planDetailsService=e,this.fb=t,this.userDataService=n,this.userPrevilegeService=a,this.errorTermsStoreService=i,this.plansService=r,this.isAdjustmentPlan=!1,this.isApprovedOrPreApprovedPlan=!1,this.createForm(),this.cohortCardInfoEmit=new l.EventEmitter,this.copyPasteCohort=new l.EventEmitter,this.cohortCardInfoEmitDirty=new l.EventEmitter,this.hasEditAccess(),this.hasViewAccess()}return Object.defineProperty(e.prototype,"nodeData",{set:function(e){if("cohort"===e.category){if(this.basePlanInAdjustment=!0,e&&this.cohortLinks){this.cohortCardData=[],this.cohortCardData=e,this.sourceEventAchievedDaysEnable=!1;for(var t=0;t<this.cohortLinks.length;t++)this.cohortLinks[t].to===this.cohortCardData.key&&(this.sourceEventAchievedDaysEnable=!0,""===this.cohortCardData.cohortcardConfiguration.startScreening&&(this.cohortCardData.cohortcardConfiguration.startScreening="dateSourceEvent"));!1===this.sourceEventAchievedDaysEnable&&(this.cohortCardData.cohortcardConfiguration.startScreening="")}this.updateCard(this.cohortCardData)}},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.resources=this.planDetailsService.getPlanDetailsResources(),this.cohortCardLables=this.planDetailsService.getCohortCardLabels(),this.mandatoryMessage=this.cohortCardLables.mandatoryMessage,this.getPlanDetails(),this.kebabMenu="kebabMenu",this.optionsMenu=this.planDetailsService.getCohortCardMenuOptions(),this.onSelect()},e.prototype.ngOnChanges=function(){console.log("changes"),this.onSelect(),this.cohortCardData&&this.updateCard(this.cohortCardData)},e.prototype.onSelect=function(){this.selected="cohort"===this.selectedNode.category&&this.cohortCardData.cohortKey===this.selectedNode.key},e.prototype.updateCard=function(e){this.cardTitle=e.cohortName,this.cohortCardForm.get("randomizationTarget").setValue(e.cohortcardConfiguration.randomizationTarget),this.cohortCardForm.get("TLSR").setValue(e.cohortcardConfiguration.TLSR),this.cohortCardForm.get("screeningPeriod").setValue(e.cohortcardConfiguration.screeningPeriod),this.cohortCardForm.get("noOfDaysAfter").setValue(e.cohortcardConfiguration.noOfDaysAfter),this.cohortCardForm.get("noOfDaysBefore").setValue(e.cohortcardConfiguration.noOfDaysBefore),this.sourceEventAchievedDays=e.cohortcardConfiguration.startScreening,this.enrollmentPauseName=e.cohortcardConfiguration.IAName,this.actualsCohortData=e.cohortcardConfiguration.actuals,this.updateAdjustmentActualsApprovedPlan(e,this.adjustmentData)},e.prototype.createForm=function(){this.cohortCardForm=this.fb.group({randomizationTarget:[""],TLSR:[""],screeningPeriod:[""],noOfDaysBefore:[""],noOfDaysAfter:[""],startScreeningRadioButton:[""]})},e.prototype.dateFormatter=function(e){return e?C(e).format("YYYY-MM-DD"):this.cohortCardForm.value.TLSR},e.prototype.hasValidationMsg=function(e){if("screeningPeriod"===e)return this.warningBorder=!0,this.cohortCardForm.value.screeningPeriod||0===this.cohortCardForm.value.screeningPeriod?this.cohortCardForm.value.screeningPeriod<0?(this.mandatoryMessage=this.cohortCardLables.screeningPeriodMessage,this.warningBorder=!0,!1):(this.warningBorder=!1,!0):(this.mandatoryMessage=null==this.cohortCardForm.value.screeningPeriod?this.cohortCardLables.screeningPeriodMessage:this.cohortCardLables.mandatoryMessage,!1);if(this.basePlanInAdjustment)return this.randomizationErrorMessage=this.cohortCardLables.mandatoryMessage,this.errorBorder=!0,this.cohortCardForm.value.randomizationTarget||0===this.cohortCardForm.value.randomizationTarget?this.cohortCardForm.value.randomizationTarget>15e4||this.cohortCardForm.value.randomizationTarget<0?(this.randomizationErrorMessage=this.cohortCardLables.value_range,this.errorBorder=!0,!1):(this.errorBorder=!1,!0):(null===this.cohortCardForm.value.randomizationTarget&&(this.randomizationErrorMessage=this.cohortCardLables.value_range,this.errorBorder=!0),!1);if(this.cohortDirtyData.length>0)for(var t=0;t<this.cohortDirtyData.length;t++)if(this.cohortDirtyData[t].cohortName===this.cardTitle&&(this.cohortCardForm.controls.randomizationTarget.dirty||this.cohortDirtyData[t].isRtDirty))if(this.cohortCardForm.value.randomizationTarget||0===this.cohortCardForm.value.randomizationTarget){if(!(this.cohortCardForm.value.randomizationTarget<this.isAdjustmentActualRt||this.cohortCardForm.value.randomizationTarget>15e4))return this.errorBorder=!1,!0;if(this.randomizationErrorMessage=this.cohortCardLables.templateText+this.isAdjustmentActualRt+" to 150000",!this.isApprovedOrPreApprovedPlan)return this.errorBorder=!0,!1}else if(this.randomizationErrorMessage=this.cohortCardLables.templateText+this.isAdjustmentActualRt+" to 150000",!this.isApprovedOrPreApprovedPlan)return this.errorBorder=!0,!1},e.prototype.updateStartScreening=function(){"beforeSourceEvent"===this.sourceEventAchievedDays?this.cohortCardForm.get("noOfDaysAfter").setValue(""):"afterSourceEvent"===this.sourceEventAchievedDays?this.cohortCardForm.get("noOfDaysBefore").setValue(""):(this.cohortCardForm.get("noOfDaysAfter").setValue(""),this.cohortCardForm.get("noOfDaysBefore").setValue(""))},e.prototype.onInputChange=function(){console.log(this.cohortCardForm),this.plansService.setFormStatus(this.cohortCardForm.dirty),this.updateStartScreening(),this.cohortCardInfo={status:this.cohortCardForm.status,cohortName:this.cardTitle,isAdjustment:this.basePlanInAdjustment,cohortcardConfiguration:{randomizationTarget:this.cohortCardForm.value.randomizationTarget,TLSR:this.cohortCardForm.value.TLSR?this.dateFormatter(this.cohortCardForm.value.TLSR._d):"",screeningPeriod:this.cohortCardForm.value.screeningPeriod,startScreening:this.cohortCardForm.value.startScreeningRadioButton,noOfDaysBefore:this.cohortCardForm.value.noOfDaysBefore,noOfDaysAfter:this.cohortCardForm.value.noOfDaysAfter,IAName:this.enrollmentPauseName,actuals:this.actualsCohortData}},this.cohortCardInfoEmit.emit(this.cohortCardInfo),this.cohortCardInfoEmitDirty.emit({cohortName:this.cardTitle,isRtDirty:this.cohortCardForm.controls.randomizationTarget.dirty,isTlsrDirty:this.cohortCardForm.controls.TLSR.dirty})},e.prototype.validateDate=function(e){var t="";if(this.TLSRavailability&&(this.redBorder=!0),e.errors)return e.errors.hasOwnProperty("matDatepickerParse")?(t=this.errorTermsStoreService.getErrorMessage("DateFormatIncorrect"),e.setErrors({matDatepickerParse:t}),t):t=this.cohortCardLables.mandatoryMessage;if(this.redBorder=!1,this.cohortCardForm.value.TLSR){var n=C(this.cohortCardForm.value.TLSR,"YYYY-MM-DD",!0);if((n.isBefore(this.planPropTFSI)||n.isAfter(this.planPropTLSR))&&(t=this.cohortCardLables.tlsrRange+this.cohortCardLables.tlsrRange2,!this.isApprovedOrPreApprovedPlan))return this.redBorder=!0,t}},e.prototype.validateNoOfDaysBefore=function(e){var t="";return this.redBorderForNoOfDaysBefore=!1,e.errors?(t=this.cohortCardLables.mandatoryMessage,this.redBorderForNoOfDaysBefore=!0,t):this.cohortCardForm.value.noOfDaysBefore<=0||isNaN(this.cohortCardForm.value.noOfDaysBefore)?(t=this.cohortCardLables.noOfDaysBeforeRange,this.redBorderForNoOfDaysBefore=!0,t):void 0},e.prototype.validateNoOfDaysAfter=function(e){var t="";return this.redBorderForNoOfDaysAfter=!1,e.errors?(t=this.cohortCardLables.mandatoryMessage,this.redBorderForNoOfDaysAfter=!0,t):this.cohortCardForm.value.noOfDaysAfter<=0||isNaN(this.cohortCardForm.value.noOfDaysAfter)?(t=this.cohortCardLables.noOfDaysBeforeRange,this.redBorderForNoOfDaysAfter=!0,t):void 0},e.prototype.checkValidNumber=function(e){var t=e.target.value;return(1!==t.length||"0"!==t)&&e.charCode>=48&&e.charCode<=57},e.prototype.hasEditAccess=function(){var e=this.userDataService.getUserPrivilegesForModule(o.F.MODULE_PLANNING);return this.userPrevilegeService.hasApprovePlanAccess(e)||this.userPrevilegeService.hasEditPlanAccess(e)},e.prototype.hasViewAccess=function(){var e=this.userDataService.getUserPrivilegesForModule(o.F.MODULE_PLANNING);return this.userPrevilegeService.hasViewPlanAccess(e)},e.prototype.getPlanDetails=function(){var e=this;this.planDetailsService.getPlanDetails().subscribe((function(t){var n=C;e.TLSRavailability=t.planProperties.LSR,e.planPropTLSR=n(t.planProperties.LSR,"YYYY-MM-DD",!0),e.planPropTFSI=n(t.planProperties.FSI,"YYYY-MM-DD",!0)}))},e.prototype.updateAdjustmentActualsApprovedPlan=function(e,t){if(t.approvedAndAdjustment.isApprovedOrPreApprovedPlan)this.cohortCardForm.disable(),this.basePlanInAdjustment=!1,this.isApprovedOrPreApprovedPlan=!0,this.isAdjustmentPlan=!1;else if(t.approvedAndAdjustment.isAdjustmentPlan)if(this.isAdjustmentPlan=!0,this.isApprovedOrPreApprovedPlan=!1,t.oldServerCohortData.length>0)for(var n=0;n<t.oldServerCohortData.length;n++){if(t.oldServerCohortData[n].cohortKey===this.cohortCardData.cohortKey){this.validateIsAdjustmentCohort(e);break}this.cohortCardForm.enable()}else this.cohortCardForm.enable(),this.basePlanInAdjustment=!0;else this.cohortCardForm.enable(),this.basePlanInAdjustment=!0,this.isAdjustmentPlan=!1,this.isApprovedOrPreApprovedPlan=!1},e.prototype.validateIsAdjustmentCohort=function(e){e.cohortcardConfiguration.actuals?(this.isAdjustmentActualServerData=e.cohortcardConfiguration.actuals,this.isAdjustmentActualServerData.LSR?(this.isAdjustmentActualLsr=this.isAdjustmentActualServerData.LSR,this.isAdjustmentActualRt=this.isAdjustmentActualServerData.RT,this.cohortCardForm.controls.randomizationTarget.disable(),this.cohortCardForm.controls.TLSR.disable(),this.basePlanInAdjustment=!1):(this.isAdjustmentActualServerData.RT>=0?(this.isAdjustmentActualRt=this.isAdjustmentActualServerData.RT,this.basePlanInAdjustment=!!e.isEditable):this.basePlanInAdjustment=!0,this.cohortCardForm.controls.TLSR.enable(),this.cohortCardForm.controls.randomizationTarget.enable())):(this.cohortCardForm.controls.randomizationTarget.enable(),this.cohortCardForm.controls.TLSR.enable(),this.basePlanInAdjustment=!0),this.isAdjustmentReadonlyScreeningField=!0},e.prototype.validateAdjustmentTlsrDate=function(e){var t="";if(this.redBorder=!1,e.errors)return e.errors.hasOwnProperty("matDatepickerParse")?(t=this.errorTermsStoreService.getErrorMessage("DateFormatIncorrect"),e.setErrors({matDatepickerParse:t}),t):t=this.cohortCardLables.mandatoryMessage;if(this.cohortCardForm.value.TLSR){var n=C,l=n(this.cohortCardForm.value.TLSR,"YYYY-MM-DD",!0),a=new Date,i=a.getDate().toString(),r=(a.getMonth()+1).toString();a.getFullYear().toString(),1===i.length&&(i="0"+i),1===r.length&&(r="0"+r);var o=n(a,"YYYY-MM-DD",!0);if(this.cohortDirtyData.length>0)for(var s=0;s<this.cohortDirtyData.length;s++)if(this.cohortDirtyData[s].cohortName===this.cardTitle&&(this.cohortCardForm.controls.TLSR.dirty||this.cohortDirtyData[s].isTlsrDirty))if(l.isBefore(o)){if(t=this.cohortCardLables.tlsrRange3,!this.isApprovedOrPreApprovedPlan)return this.redBorder=!0,t}else if((l.isBefore(this.planPropTFSI)||l.isAfter(this.planPropTLSR))&&(t=this.cohortCardLables.tlsrRange4,!this.isApprovedOrPreApprovedPlan))return this.redBorder=!0,t}},e.prototype.KebabMenuClicked=function(e){var t={};e===this.optionsMenu[0].name&&(t={cohortKey:this.cohortCardData.cohortKey,action:"copy"}),e===this.optionsMenu[1].name&&(t={cohortKey:this.cohortCardData.cohortKey,action:"paste"}),this.copyPasteCohort.emit(t)},e}(),me=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ge(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"ctos-context-menu",[],null,[[null,"fireEvent"]],(function(e,t,n){var l=!0;return"fireEvent"===t&&(l=!1!==e.component.KebabMenuClicked(n)&&l),l}),f.q,f.i)),l["ɵdid"](1,114688,[["menu",4]],0,s.nb,[],{contextMenuClass:[0,"contextMenuClass"],xPosition:[1,"xPosition"],yPosition:[2,"yPosition"],options:[3,"options"]},{fireEvent:"fireEvent"}),(e()(),l["ɵeld"](2,16777216,null,0,5,"button",[["aria-haspopup","true"],["class","mat-menu-trigger"],["mat-icon-button",""]],[[1,"aria-expanded",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var a=!0;return"mousedown"===t&&(a=!1!==l["ɵnov"](e,3)._handleMousedown(n)&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,3)._handleKeydown(n)&&a),"click"===t&&(a=!1!==l["ɵnov"](e,3)._handleClick(n)&&a),a}),z.b,z.a)),l["ɵdid"](3,1196032,null,0,Z.g,[c.c,l.ElementRef,l.ViewContainerRef,Z.c,[2,Z.d],[8,null],[2,g.b],m.h],{menu:[0,"menu"]},null),l["ɵdid"](4,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵeld"](5,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,ee.b,ee.a)),l["ɵdid"](6,9158656,null,0,te.b,[l.ElementRef,te.d,[8,null],[2,te.a],[2,l.ErrorHandler]],null,null),(e()(),l["ɵted"](-1,0,["more_vert"]))],(function(e,t){var n=t.component;e(t,1,0,n.kebabMenu,"before","below",n.optionsMenu),e(t,3,0,l["ɵnov"](t,1).matMenu),e(t,6,0)}),(function(e,t){e(t,2,0,l["ɵnov"](t,3).menuOpen||null,l["ɵnov"](t,4).disabled||null,"NoopAnimations"===l["ɵnov"](t,4)._animationMode),e(t,5,0,l["ɵnov"](t,6).inline,"primary"!==l["ɵnov"](t,6).color&&"accent"!==l["ɵnov"](t,6).color&&"warn"!==l["ɵnov"](t,6).color)}))}function Se(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,12,"input",[["class","form-control input-box"],["formControlName","noOfDaysBefore"],["id","noOfDaysBefore"],["matTooltip",""],["matTooltipPosition","left"],["step","1"],["type","number"]],[[8,"readOnly",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keypress"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,1)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,1).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,1)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,1)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,2).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,2).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,2).onTouched()&&a),"longpress"===t&&(a=!1!==l["ɵnov"](e,12).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,12)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,12)._handleTouchend()&&a),"keypress"===t&&(a=!1!==i.checkValidNumber(n)&&a),"change"===t&&(a=!1!==i.onInputChange()&&a),a}),null,null)),l["ɵdid"](1,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](2,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵdid"](3,16384,null,0,x.z,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,x.p,(function(e){return[e]}),[x.z]),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](6,671744,null,0,x.j,[[3,x.d],[6,x.p],[8,null],[6,x.q],[2,x.E]],{name:[0,"name"]},null),l["ɵprd"](2048,null,x.r,null,[x.j]),l["ɵdid"](8,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](10,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](11,{"red-border-class":0}),l["ɵdid"](12,212992,[["tooltipSP",4]],0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{position:[0,"position"],message:[1,"message"],tooltipClass:[2,"tooltipClass"]},null),(e()(),l["ɵand"](0,null,null,0))],(function(e,t){var n=t.component;e(t,3,0,"beforeSourceEvent"===n.sourceEventAchievedDays),e(t,6,0,"noOfDaysBefore");var l=e(t,11,0,n.redBorderForNoOfDaysBefore);e(t,10,0,"form-control input-box",l),e(t,12,0,"left",n.validateNoOfDaysBefore(n.cohortCardForm.controls.noOfDaysBefore),"warn ctos-tooltip")}),(function(e,t){var n=t.component;e(t,0,0,n.isAdjustmentReadonlyScreeningField&&!n.basePlanInAdjustment,l["ɵnov"](t,3).required?"":null,l["ɵnov"](t,8).ngClassUntouched,l["ɵnov"](t,8).ngClassTouched,l["ɵnov"](t,8).ngClassPristine,l["ɵnov"](t,8).ngClassDirty,l["ɵnov"](t,8).ngClassValid,l["ɵnov"](t,8).ngClassInvalid,l["ɵnov"](t,8).ngClassPending)}))}function fe(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,12,"input",[["class","form-control input-box"],["formControlName","noOfDaysAfter"],["id","noOfDaysAfter"],["matTooltip",""],["matTooltipPosition","left"],["step","1"],["type","number"]],[[8,"readOnly",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keypress"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,1)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,1).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,1)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,1)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,2).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,2).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,2).onTouched()&&a),"longpress"===t&&(a=!1!==l["ɵnov"](e,12).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,12)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,12)._handleTouchend()&&a),"keypress"===t&&(a=!1!==i.checkValidNumber(n)&&a),"change"===t&&(a=!1!==i.onInputChange()&&a),a}),null,null)),l["ɵdid"](1,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](2,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵdid"](3,16384,null,0,x.z,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,x.p,(function(e){return[e]}),[x.z]),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](6,671744,null,0,x.j,[[3,x.d],[6,x.p],[8,null],[6,x.q],[2,x.E]],{name:[0,"name"]},null),l["ɵprd"](2048,null,x.r,null,[x.j]),l["ɵdid"](8,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](10,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](11,{"red-border-class":0}),l["ɵdid"](12,212992,[["tooltipSP",4]],0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{position:[0,"position"],message:[1,"message"],tooltipClass:[2,"tooltipClass"]},null),(e()(),l["ɵand"](0,null,null,0))],(function(e,t){var n=t.component;e(t,3,0,"afterSourceEvent"===n.sourceEventAchievedDays),e(t,6,0,"noOfDaysAfter");var l=e(t,11,0,n.redBorderForNoOfDaysAfter);e(t,10,0,"form-control input-box",l),e(t,12,0,"left",n.validateNoOfDaysAfter(n.cohortCardForm.controls.noOfDaysAfter),"warn ctos-tooltip")}),(function(e,t){var n=t.component;e(t,0,0,n.isAdjustmentReadonlyScreeningField&&!n.basePlanInAdjustment,l["ɵnov"](t,3).required?"":null,l["ɵnov"](t,8).ngClassUntouched,l["ɵnov"](t,8).ngClassTouched,l["ɵnov"](t,8).ngClassPristine,l["ɵnov"](t,8).ngClassDirty,l["ɵnov"](t,8).ngClassValid,l["ɵnov"](t,8).ngClassInvalid,l["ɵnov"](t,8).ngClassPending)}))}function ve(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,29,"div",[["class","cohortCardItem"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"label",[["class","ctos-card-header ctos-card-title ctos-nav-link cardName"],["for","startScreening"]],null,null,null,null,null)),(e()(),l["ɵted"](2,null,[" "," "])),(e()(),l["ɵeld"](3,0,null,null,26,"div",[["class","startScreeningRadioButton"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,25,"mat-radio-group",[["aria-labelledby","example-radio-group-label"],["class","example-radio-group mat-radio-group"],["formControlName","startScreeningRadioButton"],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"]],(function(e,t,n){var l=!0,a=e.component;return"ngModelChange"===t&&(l=!1!==(a.sourceEventAchievedDays=n)&&l),"change"===t&&(l=!1!==a.onInputChange()&&l),l}),null,null)),l["ɵdid"](5,1064960,null,1,ne.c,[l.ChangeDetectorRef],null,{change:"change"}),l["ɵqud"](603979776,2,{_radios:1}),l["ɵprd"](1024,null,x.q,(function(e){return[e]}),[ne.c]),l["ɵdid"](8,671744,null,0,x.j,[[3,x.d],[8,null],[8,null],[6,x.q],[2,x.E]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.j]),l["ɵdid"](10,16384,null,0,x.s,[[4,x.r]],null,null),(e()(),l["ɵeld"](11,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,3,"div",[["class","col-md-8"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,2,"mat-radio-button",[["class","example-radio-button ctos-labels mat-radio-button"],["value","beforeSourceEvent"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,14)._inputElement.nativeElement.focus()&&a),a}),le.b,le.a)),l["ɵdid"](14,4440064,[[2,4]],0,ne.b,[[2,ne.c],l.ElementRef,l.ChangeDetectorRef,m.h,ae.d,[2,Q.a],[2,ne.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),l["ɵted"](15,0,[" ",""])),(e()(),l["ɵeld"](16,0,null,null,2,"div",[["class","col-md-4"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Se)),l["ɵdid"](18,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](19,0,null,null,2,"mat-radio-button",[["class","example-radio-button ctos-labels mat-radio-button"],["value","dateSourceEvent"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,20)._inputElement.nativeElement.focus()&&a),a}),le.b,le.a)),l["ɵdid"](20,4440064,[[2,4]],0,ne.b,[[2,ne.c],l.ElementRef,l.ChangeDetectorRef,m.h,ae.d,[2,Q.a],[2,ne.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),l["ɵted"](21,0,[" ",""])),(e()(),l["ɵeld"](22,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,3,"div",[["class","col-md-8"]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,null,null,2,"mat-radio-button",[["class","example-radio-button ctos-labels mat-radio-button"],["value","afterSourceEvent"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,25)._inputElement.nativeElement.focus()&&a),a}),le.b,le.a)),l["ɵdid"](25,4440064,[[2,4]],0,ne.b,[[2,ne.c],l.ElementRef,l.ChangeDetectorRef,m.h,ae.d,[2,Q.a],[2,ne.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),l["ɵted"](26,0,[" ",""])),(e()(),l["ɵeld"](27,0,null,null,2,"div",[["class","col-md-4"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,fe)),l["ɵdid"](29,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,8,0,"startScreeningRadioButton",n.sourceEventAchievedDays),e(t,14,0,"beforeSourceEvent",n.isAdjustmentReadonlyScreeningField&&!n.basePlanInAdjustment),e(t,18,0,"beforeSourceEvent"===n.sourceEventAchievedDays),e(t,20,0,"dateSourceEvent",n.isAdjustmentReadonlyScreeningField&&!n.basePlanInAdjustment),e(t,25,0,"afterSourceEvent",n.isAdjustmentReadonlyScreeningField&&!n.basePlanInAdjustment),e(t,29,0,"afterSourceEvent"===n.sourceEventAchievedDays)}),(function(e,t){var n=t.component;e(t,2,0,n.cohortCardLables.startScreening),e(t,4,0,l["ɵnov"](t,10).ngClassUntouched,l["ɵnov"](t,10).ngClassTouched,l["ɵnov"](t,10).ngClassPristine,l["ɵnov"](t,10).ngClassDirty,l["ɵnov"](t,10).ngClassValid,l["ɵnov"](t,10).ngClassInvalid,l["ɵnov"](t,10).ngClassPending),e(t,13,1,[l["ɵnov"](t,14).checked,l["ɵnov"](t,14).disabled,"NoopAnimations"===l["ɵnov"](t,14)._animationMode,"primary"===l["ɵnov"](t,14).color,"accent"===l["ɵnov"](t,14).color,"warn"===l["ɵnov"](t,14).color,-1,l["ɵnov"](t,14).id,null,null,null]),e(t,15,0,n.cohortCardLables.numberOfDaysBeforeSourceEventAchieved),e(t,19,1,[l["ɵnov"](t,20).checked,l["ɵnov"](t,20).disabled,"NoopAnimations"===l["ɵnov"](t,20)._animationMode,"primary"===l["ɵnov"](t,20).color,"accent"===l["ɵnov"](t,20).color,"warn"===l["ɵnov"](t,20).color,-1,l["ɵnov"](t,20).id,null,null,null]),e(t,21,0,n.cohortCardLables.dateSourceEventAchieved),e(t,24,1,[l["ɵnov"](t,25).checked,l["ɵnov"](t,25).disabled,"NoopAnimations"===l["ɵnov"](t,25)._animationMode,"primary"===l["ɵnov"](t,25).color,"accent"===l["ɵnov"](t,25).color,"warn"===l["ɵnov"](t,25).color,-1,l["ɵnov"](t,25).id,null,null,null]),e(t,26,0,n.cohortCardLables.numberOfDaysAfterSourceEventAchieved)}))}function Ce(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[["class","cohortCardItem"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"label",[["class","ctos-card-header ctos-card-title ctos-nav-link cardName"],["for","enrollmentPause"]],null,null,null,null,null)),(e()(),l["ɵted"](2,null,[" "," "])),(e()(),l["ɵeld"](3,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](4,16777216,null,null,2,"span",[["class","ctos-labels enrollmentPauseName"],["id","enrollmentPause"],["matTooltip",""],["matTooltipPosition","right"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0;return"longpress"===t&&(a=!1!==l["ɵnov"](e,5).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,5)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,5)._handleTouchend()&&a),a}),null,null)),l["ɵdid"](5,212992,null,0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{position:[0,"position"],message:[1,"message"],tooltipClass:[2,"tooltipClass"]},null),(e()(),l["ɵted"](6,null,["",""]))],(function(e,t){e(t,5,0,"right",t.component.enrollmentPauseName,"ctos-tooltip")}),(function(e,t){var n=t.component;e(t,2,0,n.cohortCardLables.epName),e(t,6,0,n.enrollmentPauseName)}))}function ye(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,92,"div",[["class","cohortCardContainer"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{selectedCohort:0}),(e()(),l["ɵeld"](4,0,null,null,88,"form",[["class","ctos-card-content"],["ng-disabled","!hasEditAccess"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var a=!0;return"submit"===t&&(a=!1!==l["ɵnov"](e,6).onSubmit(n)&&a),"reset"===t&&(a=!1!==l["ɵnov"](e,6).onReset()&&a),a}),null,null)),l["ɵdid"](5,16384,null,0,x.G,[],null,null),l["ɵdid"](6,540672,null,0,x.l,[[8,null],[8,null]],{form:[0,"form"]},null),l["ɵprd"](2048,null,x.d,null,[x.l]),l["ɵdid"](8,16384,null,0,x.t,[[4,x.d]],null,null),(e()(),l["ɵeld"](9,0,null,null,9,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,5,"div",[["class","col-md-9"]],null,null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,4,"label",[["class","ctos-card-header ctos-card-title ctos-nav-link"],["for","cohortCard"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,0,"div",[["class","bridcrum-icon"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,16777216,null,null,2,"span",[["class","cardName ellipse-cardTitle"],["id","cardHeader"],["matTooltip",""],["matTooltipPosition","right"],["type","text"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0;return"longpress"===t&&(a=!1!==l["ɵnov"](e,14).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,14)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,14)._handleTouchend()&&a),a}),null,null)),l["ɵdid"](14,212992,null,0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{position:[0,"position"],message:[1,"message"],tooltipClass:[2,"tooltipClass"]},null),(e()(),l["ɵted"](15,null,["",""])),(e()(),l["ɵeld"](16,0,null,null,2,"div",[["class","col-md-3 right-btn-algn"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ge)),l["ɵdid"](18,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](19,0,null,null,73,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,20,"div",[["class","row cohortCardItem"]],null,null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,3,"label",[["class","col-sm-12 col-md-7 col-lg-6 col-xs-12 ctos-labels"],["for","rt"]],null,null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["*"])),(e()(),l["ɵted"](24,null,["",""])),(e()(),l["ɵeld"](25,0,null,null,15,"div",[["class","col-sm-12 col-md-5 col-xs-12 col-lg-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](26,16777216,null,null,14,"input",[["class","form-control input-box"],["ctosNumbersOnly",""],["ctosSignedInteger",""],["formControlName","randomizationTarget"],["id","randomizationTarget"],["matTooltip",""],["matTooltipPosition","left"],["max","150000"],["min","0"],["required",""],["step","1"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"longpress"],[null,"keydown"],[null,"touchend"],[null,"paste"],[null,"drop"],[null,"keyup"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,27)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,27).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,27)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,27)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,28).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,28).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,28).onTouched()&&a),"longpress"===t&&(a=!1!==l["ɵnov"](e,38).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,38)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,38)._handleTouchend()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,39).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,39).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,39).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,39).onChange(n)&&a),"keyup"===t&&(a=!1!==l["ɵnov"](e,40).onkeyup(n)&&a),"change"===t&&(a=!1!==i.onInputChange()&&a),a}),null,null)),l["ɵdid"](27,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](28,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵdid"](29,16384,null,0,x.z,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,x.p,(function(e){return[e]}),[x.z]),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](32,671744,null,0,x.j,[[3,x.d],[6,x.p],[8,null],[6,x.q],[2,x.E]],{name:[0,"name"]},null),l["ɵprd"](2048,null,x.r,null,[x.j]),l["ɵdid"](34,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](36,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](37,{"red-border-class":0}),l["ɵdid"](38,212992,[["tooltipSP",4]],0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{position:[0,"position"],disabled:[1,"disabled"],message:[2,"message"],tooltipClass:[3,"tooltipClass"]},null),l["ɵdid"](39,16384,null,0,s.W,[l.ElementRef],null,null),l["ɵdid"](40,16384,null,0,ie.a,[l.ElementRef],null,null),(e()(),l["ɵeld"](41,0,null,null,26,"div",[["class","row cohortCardItem"]],null,null,null,null,null)),(e()(),l["ɵeld"](42,0,null,null,1,"label",[["class","col-sm-12 col-md-7 ctos-labels col-lg-6"],["for","tlsr"]],null,null,null,null,null)),(e()(),l["ɵted"](43,null,["",""])),(e()(),l["ɵeld"](44,0,null,null,23,"div",[["class","col-sm-12 col-md-5 col-lg-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](45,0,null,null,22,"span",[],null,null,null,null,null)),(e()(),l["ɵeld"](46,16777216,null,null,15,"input",[["class","form-control input-box mat-input-element mat-form-field-autofill-control"],["formControlName","TLSR"],["id","TLSR"],["matInput",""],["matTooltipPosition","left"],["type","text"]],[[1,"required",0],[1,"aria-haspopup",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"change"],[null,"dateChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"keydown"],[null,"longpress"],[null,"touchend"],[null,"focus"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,48)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,48).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,48)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,48)._compositionEnd(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,50)._onInput(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,50)._onChange()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,50)._onBlur()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,50)._onKeydown(n)&&a),"longpress"===t&&(a=!1!==l["ɵnov"](e,59).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,59)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,59)._handleTouchend()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,61)._focusChanged(!1)&&a),"focus"===t&&(a=!1!==l["ɵnov"](e,61)._focusChanged(!0)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,61)._onInput()&&a),"change"===t&&(a=!1!==i.onInputChange()&&a),"dateChange"===t&&(a=!1!==i.onInputChange()&&a),a}),null,null)),l["ɵprd"](6144,null,re.d,null,[oe.b]),l["ɵdid"](48,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](49,16384,null,0,x.z,[],{required:[0,"required"]},null),l["ɵdid"](50,147456,null,0,se.h,[l.ElementRef,[2,ue.a],[2,ue.e],[2,re.c]],{matDatepicker:[0,"matDatepicker"]},{dateChange:"dateChange"}),l["ɵprd"](1024,null,x.p,(function(e,t){return[e,t]}),[x.z,se.h]),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,se.h]),l["ɵdid"](53,671744,null,0,x.j,[[3,x.d],[6,x.p],[8,null],[6,x.q],[2,x.E]],{name:[0,"name"]},null),l["ɵprd"](2048,null,x.r,null,[x.j]),l["ɵdid"](55,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](57,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](58,{"red-border-class":0}),l["ɵdid"](59,212992,null,0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{position:[0,"position"],message:[1,"message"],tooltipClass:[2,"tooltipClass"]},null),l["ɵprd"](2048,null,oe.a,null,[se.h]),l["ɵdid"](61,999424,null,0,oe.b,[l.ElementRef,h.a,[6,x.r],[2,x.u],[2,x.l],ue.b,[6,oe.a],de.a,l.NgZone],{id:[0,"id"],required:[1,"required"],type:[2,"type"]},null),(e()(),l["ɵeld"](62,0,null,null,3,"mat-datepicker-toggle",[["class","datePick mat-datepicker-toggle"],["matSuffix",""]],[[1,"tabindex",0],[2,"mat-datepicker-toggle-active",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,64)._button.focus()&&a),a}),ce.e,ce.d)),l["ɵdid"](63,16384,null,0,re.h,[],null,null),l["ɵdid"](64,1753088,null,1,se.k,[se.i,l.ChangeDetectorRef,[8,null]],{datepicker:[0,"datepicker"]},null),l["ɵqud"](603979776,1,{_customIcon:0}),(e()(),l["ɵeld"](66,16777216,null,null,1,"mat-datepicker",[],null,null,null,ce.f,ce.c)),l["ɵdid"](67,180224,[["picker4",4]],0,se.f,[A.e,c.c,l.NgZone,l.ViewContainerRef,se.a,[2,ue.a],[2,g.b],[2,u.DOCUMENT]],null,null),(e()(),l["ɵeld"](68,0,null,null,20,"div",[["class","row cohortCardItem"]],null,null,null,null,null)),(e()(),l["ɵeld"](69,0,null,null,3,"label",[["class","col-sm-12 col-md-7 ctos-labels col-lg-6"],["for","sp"]],null,null,null,null,null)),(e()(),l["ɵeld"](70,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["*"])),(e()(),l["ɵted"](72,null,["",""])),(e()(),l["ɵeld"](73,0,null,null,15,"div",[["class","col-sm-12 col-md-5 col-lg-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](74,16777216,null,null,14,"input",[["class","form-control input-box"],["ctosNumbersOnly",""],["ctosSignedInteger",""],["formControlName","screeningPeriod"],["id","screeningPeriod"],["matTooltip",""],["matTooltipPosition","left"],["min","0"],["required",""],["step","1"],["type","number"]],[[8,"readOnly",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"longpress"],[null,"keydown"],[null,"touchend"],[null,"paste"],[null,"drop"],[null,"keyup"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,75)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,75).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,75)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,75)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,76).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,76).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,76).onTouched()&&a),"longpress"===t&&(a=!1!==l["ɵnov"](e,86).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,86)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,86)._handleTouchend()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,87).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,87).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,87).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,87).onChange(n)&&a),"keyup"===t&&(a=!1!==l["ɵnov"](e,88).onkeyup(n)&&a),"change"===t&&(a=!1!==i.onInputChange()&&a),a}),null,null)),l["ɵdid"](75,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](76,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵdid"](77,16384,null,0,x.z,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,x.p,(function(e){return[e]}),[x.z]),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](80,671744,null,0,x.j,[[3,x.d],[6,x.p],[8,null],[6,x.q],[2,x.E]],{name:[0,"name"]},null),l["ɵprd"](2048,null,x.r,null,[x.j]),l["ɵdid"](82,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](84,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](85,{"red-border-class":0}),l["ɵdid"](86,212992,[["tooltipSP",4]],0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{position:[0,"position"],disabled:[1,"disabled"],message:[2,"message"],tooltipClass:[3,"tooltipClass"]},null),l["ɵdid"](87,16384,null,0,s.W,[l.ElementRef],null,null),l["ɵdid"](88,16384,null,0,ie.a,[l.ElementRef],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,ve)),l["ɵdid"](90,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ce)),l["ɵdid"](92,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component,a=e(t,3,0,n.selected);e(t,2,0,"cohortCardContainer",a),e(t,6,0,n.cohortCardForm),e(t,14,0,"right",n.cardTitle,"ctos-tooltip"),e(t,18,0,!n.isApprovedOrPreApprovedPlan),e(t,29,0,""),e(t,32,0,"randomizationTarget");var i=e(t,37,0,n.errorBorder);e(t,36,0,"form-control input-box",i),e(t,38,0,"left",n.hasValidationMsg("randomizationTarget"),n.randomizationErrorMessage,"warn ctos-tooltip"),e(t,49,0,!!n.TLSRavailability),e(t,50,0,l["ɵnov"](t,67)),e(t,53,0,"TLSR");var r=e(t,58,0,n.redBorder);e(t,57,0,"form-control input-box",r),e(t,59,0,"left",n.basePlanInAdjustment?n.validateDate(n.cohortCardForm.controls.TLSR):n.validateAdjustmentTlsrDate(n.cohortCardForm.controls.TLSR),"warn ctos-tooltip"),e(t,61,0,"TLSR",!!n.TLSRavailability,"text"),e(t,64,0,l["ɵnov"](t,67)),e(t,77,0,""),e(t,80,0,"screeningPeriod");var o=e(t,85,0,n.warningBorder);e(t,84,0,"form-control input-box",o),e(t,86,0,"left",n.hasValidationMsg("screeningPeriod"),n.mandatoryMessage,"warn ctos-tooltip"),e(t,90,0,n.sourceEventAchievedDaysEnable),e(t,92,0,n.enrollmentPauseName)}),(function(e,t){var n=t.component;e(t,4,0,l["ɵnov"](t,8).ngClassUntouched,l["ɵnov"](t,8).ngClassTouched,l["ɵnov"](t,8).ngClassPristine,l["ɵnov"](t,8).ngClassDirty,l["ɵnov"](t,8).ngClassValid,l["ɵnov"](t,8).ngClassInvalid,l["ɵnov"](t,8).ngClassPending),e(t,15,0,n.cardTitle),e(t,24,0,n.cohortCardLables.randomizationTarget),e(t,26,0,l["ɵnov"](t,29).required?"":null,l["ɵnov"](t,34).ngClassUntouched,l["ɵnov"](t,34).ngClassTouched,l["ɵnov"](t,34).ngClassPristine,l["ɵnov"](t,34).ngClassDirty,l["ɵnov"](t,34).ngClassValid,l["ɵnov"](t,34).ngClassInvalid,l["ɵnov"](t,34).ngClassPending),e(t,43,0,n.cohortCardLables.targetLastSubjectRandomized),e(t,46,1,[l["ɵnov"](t,49).required?"":null,l["ɵnov"](t,50)._datepicker?"dialog":null,(null==l["ɵnov"](t,50)._datepicker?null:l["ɵnov"](t,50)._datepicker.opened)&&l["ɵnov"](t,50)._datepicker.id||null,l["ɵnov"](t,50).min?l["ɵnov"](t,50)._dateAdapter.toIso8601(l["ɵnov"](t,50).min):null,l["ɵnov"](t,50).max?l["ɵnov"](t,50)._dateAdapter.toIso8601(l["ɵnov"](t,50).max):null,l["ɵnov"](t,50).disabled,l["ɵnov"](t,55).ngClassUntouched,l["ɵnov"](t,55).ngClassTouched,l["ɵnov"](t,55).ngClassPristine,l["ɵnov"](t,55).ngClassDirty,l["ɵnov"](t,55).ngClassValid,l["ɵnov"](t,55).ngClassInvalid,l["ɵnov"](t,55).ngClassPending,l["ɵnov"](t,61)._isServer,l["ɵnov"](t,61).id,l["ɵnov"](t,61).placeholder,l["ɵnov"](t,61).disabled,l["ɵnov"](t,61).required,l["ɵnov"](t,61).readonly&&!l["ɵnov"](t,61)._isNativeSelect||null,l["ɵnov"](t,61)._ariaDescribedby||null,l["ɵnov"](t,61).errorState,l["ɵnov"](t,61).required.toString()]),e(t,62,0,-1,l["ɵnov"](t,64).datepicker&&l["ɵnov"](t,64).datepicker.opened,l["ɵnov"](t,64).datepicker&&"accent"===l["ɵnov"](t,64).datepicker.color,l["ɵnov"](t,64).datepicker&&"warn"===l["ɵnov"](t,64).datepicker.color),e(t,72,0,n.cohortCardLables.screeningPeriod),e(t,74,0,n.isAdjustmentReadonlyScreeningField&&!n.basePlanInAdjustment,l["ɵnov"](t,77).required?"":null,l["ɵnov"](t,82).ngClassUntouched,l["ɵnov"](t,82).ngClassTouched,l["ɵnov"](t,82).ngClassPristine,l["ɵnov"](t,82).ngClassDirty,l["ɵnov"](t,82).ngClassValid,l["ɵnov"](t,82).ngClassInvalid,l["ɵnov"](t,82).ngClassPending)}))}var Re=function(){function e(e,t,n){this.fb=e,this.plansService=t,this.localAppResources=n,this.kebabMenuOptions=[],this.dependencyCardInfoEmit=new l.EventEmitter}return e.prototype.ngOnInit=function(){this.bindFormdata(),this.onSelect(),this.getResources()},e.prototype.ngOnChanges=function(){this.bindFormdata(),this.onInputChange(!0),this.onSelect()},e.prototype.onSelect=function(){this.selected="dependency"===this.selectedNode.category&&this.depCardData.dependencyKey===this.selectedNode.key},e.prototype.getResources=function(){return this.depCardResources={dep_PrecedingCohort:this.localAppResources.getResource("dep_PrecedingCohort"),dep_PrecedingCohort_Msg:this.localAppResources.getResource("dep_PrecedingCohort_Msg"),dep_Event:this.localAppResources.getResource("dep_Event"),dep_NumberOfSubjects:this.localAppResources.getResource("dep_NumberOfSubjects"),dep_EnrollmentComplete:this.localAppResources.getResource("dep_EnrollmentComplete"),dep_EnrollmentDelay:this.localAppResources.getResource("dep_EnrollmentDelay"),dep_DependentCohort:this.localAppResources.getResource("dep_DependentCohort"),dep_DependentCohort_Msg:this.localAppResources.getResource("dep_DependentCohort_Msg")},this.depCardResources},e.prototype.bindFormdata=function(){if(this.selectedDepEvent=this.depCardData.dependencyCardConfiguration.enrollmentComplete?"epComplete":"noOfSubjects",this.dependencyCardForm=this.fb.group({numberOfSubjects:new x.h,dependencyEventsRadio:this.selectedDepEvent,enrollmentPauseDuration:new x.h}),this.dependencyCardForm.get("numberOfSubjects").setValue(this.depCardData.dependencyCardConfiguration.numberOfSubjects),this.dependencyCardForm.get("enrollmentPauseDuration").setValue(this.depCardData.dependencyCardConfiguration.enrollmentPauseDuration),this.depCardData.isApprovedOrPreApprovedPlan)this.dependencyCardForm.disable();else if(this.depCardData.isAdjustmentPlan)if(this.depCardData.targetCohorts.length>0){for(var e=0;e<this.depCardData.targetCohorts.length;e++)if(this.depCardData.targetCohorts[e].cohortcardConfiguration.actuals.FSS&&this.depCardData.targetCohorts[e].hasOwnProperty("isEditable")&&!1===this.depCardData.targetCohorts[e].isEditable){this.actualsFssData=this.depCardData.targetCohorts[e].cohortcardConfiguration.actuals.FSS;break}this.actualsFssData?this.depCardData.isEditable?this.dependencyCardForm.enable():this.dependencyCardForm.disable():this.dependencyCardForm.enable()}else this.dependencyCardForm.enable();else this.dependencyCardForm.enable()},e.prototype.onInputChange=function(e){e||this.plansService.setFormStatus(this.dependencyCardForm.dirty),this.depCardData.dependencyCardConfiguration="noOfSubjects"===this.selectedDepEvent&&this.depCardData.sourceCohorts.length<2?{numberOfSubjects:this.dependencyCardForm.value.numberOfSubjects,enrollmentComplete:!1,enrollmentPauseDuration:this.dependencyCardForm.value.enrollmentPauseDuration}:{numberOfSubjects:"",enrollmentComplete:!0,enrollmentPauseDuration:this.dependencyCardForm.value.enrollmentPauseDuration},"noOfSubjects"!==this.selectedDepEvent||""!==this.dependencyCardForm.value.numberOfSubjects&&null!=this.dependencyCardForm.value.numberOfSubjects?"noOfSubjects"===this.selectedDepEvent&&1===this.depCardData.sourceCohorts.length&&this.dependencyCardForm.value.numberOfSubjects>this.depCardData.sourceCohorts[0].cohortcardConfiguration.randomizationTarget?(this.noOfSubjectsMandatory="Number of subjects should not be greater than the RT value of the Preceding Cohort",this.errorBorder=!0,this.isDepDataValid=!1):(this.noOfSubjectsMandatory="",this.errorBorder=!1,this.isDepDataValid=!0):(this.noOfSubjectsMandatory="This field is Mandatory",this.errorBorder=!0,this.isDepDataValid=!1),0!==this.depCardData.sourceCohorts.length&&0!==this.depCardData.targetCohorts.length||(this.isDepDataValid=!1),""===this.dependencyCardForm.value.enrollmentPauseDuration||null==this.dependencyCardForm.value.enrollmentPauseDuration?(this.enrollmentPauseDurationMandatory="This field is Mandatory",this.errorBorderEP=!0,this.isDepDataValid=!1):(this.enrollmentPauseDurationMandatory="",this.errorBorderEP=!1,this.isDepDataValid=!0),this.dependencyCardInfoEmit.emit({key:this.depCardData.key,dependencyKey:this.depCardData.dependencyKey,loc:this.depCardData.loc,dependencyName:this.depCardData.dependencyName,isEditable:this.depCardData.isEditable,operationType:this.depCardData.operationType,category:this.depCardData.category,dependencyCardConfiguration:this.depCardData.dependencyCardConfiguration,sourceCohorts:this.depCardData.sourceCohorts,targetCohorts:this.depCardData.targetCohorts,isDepDataValid:this.isDepDataValid})},e.prototype.hasErrorInNoOfSubjects=function(){if("noOfSubjects"===this.selectedDepEvent&&1===this.depCardData.sourceCohorts.length&&this.dependencyCardForm.value.numberOfSubjects>this.depCardData.sourceCohorts[0].cohortcardConfiguration.randomizationTarget)return this.noOfSubjectsMandatory="Number of subjects should not be greater than the RT value of the Preceding Cohort",this.errorBorder=!0,this.isDepDataValid=!1,!1},e}(),De=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Pe(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"p",[["class","ctos-labels cohortsItems"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.context.$implicit.cohortName)}))}function be(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Pe)),l["ɵdid"](2,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,2,0,t.component.depCardData.sourceCohorts)}),null)}function Ee(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),l["ɵdid"](2,16384,null,0,re.b,[],null,null),(e()(),l["ɵted"](3,null,[" "," ",". "]))],null,(function(e,t){var n=t.component;e(t,1,0,l["ɵnov"](t,2).id),e(t,3,0,n.depCardData.dependencyName,n.depCardResources.dep_PrecedingCohort_Msg)}))}function Te(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"p",[["class","ctos-labels cohortsItems"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.context.$implicit.cohortName)}))}function Ae(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Te)),l["ɵdid"](2,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,2,0,t.component.depCardData.targetCohorts)}),null)}function Ie(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),l["ɵdid"](2,16384,null,0,re.b,[],null,null),(e()(),l["ɵted"](3,null,[" "," ",". "]))],null,(function(e,t){var n=t.component;e(t,1,0,l["ɵnov"](t,2).id),e(t,3,0,n.depCardData.dependencyName,n.depCardResources.dep_DependentCohort_Msg)}))}function _e(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,86,"div",[["class","dependencyCardContainer"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{selectedDependency:0}),(e()(),l["ɵeld"](4,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,8,"div",[["class","col-md-9"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" settings "])),(e()(),l["ɵeld"](8,0,null,null,5,"input",[["class","cardName"],["name","dependencyName"],["readonly",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,9)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,9).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,9)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,9)._compositionEnd(n.target.value)&&a),"ngModelChange"===t&&(a=!1!==(i.depCardData.dependencyName=n)&&a),a}),null,null)),l["ɵdid"](9,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵprd"](1024,null,x.q,(function(e){return[e]}),[x.e]),l["ɵdid"](11,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](13,16384,null,0,x.s,[[4,x.r]],null,null),(e()(),l["ɵeld"](14,0,null,null,0,"div",[["class","col-md-3"]],null,null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,1,"label",[["class","ctos-card-header ctos-card-title ctos-nav-link"],["for","sourceCohort"]],null,null,null,null,null)),(e()(),l["ɵted"](17,null,[" "," "])),(e()(),l["ɵand"](16777216,null,null,1,null,be)),l["ɵdid"](19,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ee)),l["ɵdid"](21,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](22,0,null,null,57,"div",[["class","dependencyCardItem"]],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,1,"label",[["class","ctos-card-header ctos-card-title ctos-nav-link sub-header"],["for","event"]],null,null,null,null,null)),(e()(),l["ɵted"](24,null,[" "," "])),(e()(),l["ɵeld"](25,0,null,null,54,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var a=!0;return"submit"===t&&(a=!1!==l["ɵnov"](e,27).onSubmit(n)&&a),"reset"===t&&(a=!1!==l["ɵnov"](e,27).onReset()&&a),a}),null,null)),l["ɵdid"](26,16384,null,0,x.G,[],null,null),l["ɵdid"](27,540672,null,0,x.l,[[8,null],[8,null]],{form:[0,"form"]},null),l["ɵprd"](2048,null,x.d,null,[x.l]),l["ɵdid"](29,16384,null,0,x.t,[[4,x.d]],null,null),(e()(),l["ɵeld"](30,0,null,null,28,"mat-radio-group",[["aria-labelledby","example-radio-group-label"],["class","example-radio-group mat-radio-group"],["formControlName","dependencyEventsRadio"],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"]],(function(e,t,n){var l=!0,a=e.component;return"ngModelChange"===t&&(l=!1!==(a.selectedDepEvent=n)&&l),"change"===t&&(l=!1!==a.onInputChange(!1)&&l),l}),null,null)),l["ɵdid"](31,1064960,null,1,ne.c,[l.ChangeDetectorRef],null,{change:"change"}),l["ɵqud"](603979776,1,{_radios:1}),l["ɵprd"](1024,null,x.q,(function(e){return[e]}),[ne.c]),l["ɵdid"](34,671744,null,0,x.j,[[3,x.d],[8,null],[8,null],[6,x.q],[2,x.E]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.j]),l["ɵdid"](36,16384,null,0,x.s,[[4,x.r]],null,null),(e()(),l["ɵeld"](37,0,null,null,18,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](38,0,null,null,3,"div",[["class","col-md-7"]],null,null,null,null,null)),(e()(),l["ɵeld"](39,0,null,null,2,"mat-radio-button",[["class","example-radio-button ctos-labels mat-radio-button"],["value","noOfSubjects"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,40)._inputElement.nativeElement.focus()&&a),a}),le.b,le.a)),l["ɵdid"](40,4440064,[[1,4]],0,ne.b,[[2,ne.c],l.ElementRef,l.ChangeDetectorRef,m.h,ae.d,[2,Q.a],[2,ne.a]],{checked:[0,"checked"],value:[1,"value"],disabled:[2,"disabled"]},null),(e()(),l["ɵted"](41,0,["",""])),(e()(),l["ɵeld"](42,0,null,null,13,"div",[["class","col-md-5"]],null,null,null,null,null)),(e()(),l["ɵeld"](43,16777216,null,null,12,"input",[["class","form-control input-box"],["formControlName","numberOfSubjects"],["matTooltip",""],["matTooltipPosition","left"],["min","1"],["onkeypress","return event.charCode >= 48 && event.charCode <= 57"],["type","number"]],[[8,"readOnly",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,44)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,44).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,44)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,44)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,45).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,45).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,45).onTouched()&&a),"longpress"===t&&(a=!1!==l["ɵnov"](e,55).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,55)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,55)._handleTouchend()&&a),"ngModelChange"===t&&(a=!1!==(i.depCardData.dependencyCardConfiguration.numberOfSubjects=n)&&a),a}),null,null)),l["ɵdid"](44,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](45,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵdid"](46,16384,null,0,x.z,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,x.p,(function(e){return[e]}),[x.z]),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](49,671744,null,0,x.j,[[3,x.d],[6,x.p],[8,null],[6,x.q],[2,x.E]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.j]),l["ɵdid"](51,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](53,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](54,{"red-border-class":0}),l["ɵdid"](55,212992,[["tooltipSP",4]],0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{position:[0,"position"],disabled:[1,"disabled"],message:[2,"message"],tooltipClass:[3,"tooltipClass"]},null),(e()(),l["ɵeld"](56,0,null,null,2,"mat-radio-button",[["class","example-radio-button ctos-labels mat-radio-button"],["value","epComplete"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,57)._inputElement.nativeElement.focus()&&a),a}),le.b,le.a)),l["ɵdid"](57,4440064,[[1,4]],0,ne.b,[[2,ne.c],l.ElementRef,l.ChangeDetectorRef,m.h,ae.d,[2,Q.a],[2,ne.a]],{checked:[0,"checked"],value:[1,"value"]},null),(e()(),l["ɵted"](58,0,["",""])),(e()(),l["ɵeld"](59,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](60,0,null,null,4,"div",[["class","col-sm-12 col-md-12 col-xs-12"]],null,null,null,null,null)),(e()(),l["ɵeld"](61,0,null,null,3,"label",[["class","ctos-labels"],["for","epd"]],null,null,null,null,null)),(e()(),l["ɵeld"](62,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["*"])),(e()(),l["ɵted"](64,null,["",""])),(e()(),l["ɵeld"](65,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](66,0,null,null,13,"div",[["class","col-md-7"]],null,null,null,null,null)),(e()(),l["ɵeld"](67,16777216,null,null,12,"input",[["class","form-control input-box"],["formControlName","enrollmentPauseDuration"],["matTooltip",""],["matTooltipPosition","right"],["min","0"],["onkeypress","return event.charCode >= 47 && event.charCode <= 57"],["required",""],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,68)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,68).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,68)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,68)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,69).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,69).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,69).onTouched()&&a),"longpress"===t&&(a=!1!==l["ɵnov"](e,79).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,79)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,79)._handleTouchend()&&a),"ngModelChange"===t&&(a=!1!==(i.depCardData.dependencyCardConfiguration.enrollmentPauseDuration=n)&&a),"change"===t&&(a=!1!==i.onInputChange(!1)&&a),a}),null,null)),l["ɵdid"](68,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](69,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵdid"](70,16384,null,0,x.z,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,x.p,(function(e){return[e]}),[x.z]),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](73,671744,null,0,x.j,[[3,x.d],[6,x.p],[8,null],[6,x.q],[2,x.E]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.j]),l["ɵdid"](75,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](77,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](78,{"red-border-class":0}),l["ɵdid"](79,212992,[["tooltipSP",4]],0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{position:[0,"position"],message:[1,"message"],tooltipClass:[2,"tooltipClass"]},null),(e()(),l["ɵeld"](80,0,null,null,6,"div",[["class","dependencyCardItem"]],null,null,null,null,null)),(e()(),l["ɵeld"](81,0,null,null,1,"label",[["class","ctos-card-header ctos-card-title ctos-nav-link"],["for","targetCohort"]],null,null,null,null,null)),(e()(),l["ɵted"](82,null,[" "," "])),(e()(),l["ɵand"](16777216,null,null,1,null,Ae)),l["ɵdid"](84,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ie)),l["ɵdid"](86,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component,l=e(t,3,0,n.selected);e(t,2,0,"dependencyCardContainer",l),e(t,11,0,"dependencyName",n.depCardData.dependencyName),e(t,19,0,n.depCardData.sourceCohorts.length>0),e(t,21,0,0===n.depCardData.sourceCohorts.length),e(t,27,0,n.dependencyCardForm),e(t,34,0,"dependencyEventsRadio",n.selectedDepEvent),e(t,40,0,!1===n.depCardData.dependencyCardConfiguration.enrollmentComplete,"noOfSubjects",n.depCardData.sourceCohorts.length>1),e(t,46,0,"noOfSubjects"===n.selectedDepEvent),e(t,49,0,"numberOfSubjects",n.depCardData.dependencyCardConfiguration.numberOfSubjects);var a=e(t,54,0,!0===n.errorBorder);e(t,53,0,"form-control input-box",a),e(t,55,0,"left",n.hasErrorInNoOfSubjects(),n.noOfSubjectsMandatory,"warn ctos-tooltip"),e(t,57,0,!0===n.depCardData.dependencyCardConfiguration.enrollmentComplete,"epComplete"),e(t,70,0,""),e(t,73,0,"enrollmentPauseDuration",n.depCardData.dependencyCardConfiguration.enrollmentPauseDuration);var i=e(t,78,0,n.errorBorderEP);e(t,77,0,"form-control input-box",i),e(t,79,0,"right",n.enrollmentPauseDurationMandatory,"warn ctos-tooltip"),e(t,84,0,n.depCardData.targetCohorts.length>0),e(t,86,0,0===n.depCardData.targetCohorts.length)}),(function(e,t){var n=t.component;e(t,8,0,l["ɵnov"](t,13).ngClassUntouched,l["ɵnov"](t,13).ngClassTouched,l["ɵnov"](t,13).ngClassPristine,l["ɵnov"](t,13).ngClassDirty,l["ɵnov"](t,13).ngClassValid,l["ɵnov"](t,13).ngClassInvalid,l["ɵnov"](t,13).ngClassPending),e(t,17,0,n.depCardResources.dep_PrecedingCohort),e(t,24,0,n.depCardResources.dep_Event),e(t,25,0,l["ɵnov"](t,29).ngClassUntouched,l["ɵnov"](t,29).ngClassTouched,l["ɵnov"](t,29).ngClassPristine,l["ɵnov"](t,29).ngClassDirty,l["ɵnov"](t,29).ngClassValid,l["ɵnov"](t,29).ngClassInvalid,l["ɵnov"](t,29).ngClassPending),e(t,30,0,l["ɵnov"](t,36).ngClassUntouched,l["ɵnov"](t,36).ngClassTouched,l["ɵnov"](t,36).ngClassPristine,l["ɵnov"](t,36).ngClassDirty,l["ɵnov"](t,36).ngClassValid,l["ɵnov"](t,36).ngClassInvalid,l["ɵnov"](t,36).ngClassPending),e(t,39,1,[l["ɵnov"](t,40).checked,l["ɵnov"](t,40).disabled,"NoopAnimations"===l["ɵnov"](t,40)._animationMode,"primary"===l["ɵnov"](t,40).color,"accent"===l["ɵnov"](t,40).color,"warn"===l["ɵnov"](t,40).color,-1,l["ɵnov"](t,40).id,null,null,null]),e(t,41,0,n.depCardResources.dep_NumberOfSubjects),e(t,43,0,"epComplete"===n.selectedDepEvent,l["ɵnov"](t,46).required?"":null,l["ɵnov"](t,51).ngClassUntouched,l["ɵnov"](t,51).ngClassTouched,l["ɵnov"](t,51).ngClassPristine,l["ɵnov"](t,51).ngClassDirty,l["ɵnov"](t,51).ngClassValid,l["ɵnov"](t,51).ngClassInvalid,l["ɵnov"](t,51).ngClassPending),e(t,56,1,[l["ɵnov"](t,57).checked,l["ɵnov"](t,57).disabled,"NoopAnimations"===l["ɵnov"](t,57)._animationMode,"primary"===l["ɵnov"](t,57).color,"accent"===l["ɵnov"](t,57).color,"warn"===l["ɵnov"](t,57).color,-1,l["ɵnov"](t,57).id,null,null,null]),e(t,58,0,n.depCardResources.dep_EnrollmentComplete),e(t,64,0,n.depCardResources.dep_EnrollmentDelay),e(t,67,0,l["ɵnov"](t,70).required?"":null,l["ɵnov"](t,75).ngClassUntouched,l["ɵnov"](t,75).ngClassTouched,l["ɵnov"](t,75).ngClassPristine,l["ɵnov"](t,75).ngClassDirty,l["ɵnov"](t,75).ngClassValid,l["ɵnov"](t,75).ngClassInvalid,l["ɵnov"](t,75).ngClassPending),e(t,82,0,n.depCardResources.dep_DependentCohort)}))}var Ne=function(){function e(e){this.localAppResources=e}return e.prototype.ngOnInit=function(){},Object.defineProperty(e.prototype,"getConfiguationMsg",{get:function(){return this.localAppResources.getResource("Configuration_Msg")},enumerable:!0,configurable:!0}),e}(),Oe=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Me(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"p",[["class","ctos-labels message"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" ","\n"]))],null,(function(e,t){e(t,1,0,t.component.getConfiguationMsg)}))}var Fe=n("Hfg7"),Le=n("qeu8"),we=n("Jg5f"),Ge=n("bFd/"),ke=function(){function e(e,t,n,l,a,i,r,o,s,u,d){this.userDataService=e,this.payloadCommandService=t,this.baseConnectionService=n,this.localeAppResourcesService=l,this.pceService=a,this.studySummaryService=i,this.datePipe=r,this.planDetailsService=o,this.dialog=s,this.errorTermsService=u,this.pceHeaderResourceService=d,this.getPlanDetails()}return Object.defineProperty(e.prototype,"studyKey",{get:function(){return this.studyId?this.studyId:this.userDataService.lastVisitedStudy},set:function(e){this.studyId=e},enumerable:!0,configurable:!0}),e.prototype.getPlanDetails=function(){var e=this;this.planDetailsService.getPlanDetails().subscribe((function(t){e.planName=t.planProperties.name?t.planProperties.name:""}))},e.prototype.getCohortsDataList=function(e){var t={commandName:b.p.ALLCOHORTLIST,param:{studyKey:this.studyKey}},n=this.payloadCommandService.getCommandDetails(t.commandName,t.param,null,null,e);return this.baseConnectionService.sendRequest(n).pipe(Object(we.a)((function(e){return e})))},e.prototype.savePlanDesign=function(e,t){var n={commandName:b.p.SAVE_PLAN_DESIGN,param:{studyKey:this.studyKey,planKey:e.planKey,version:e.version,planDesignJson:JSON.stringify(e.cohortData)}};t||(t={}),t.dependencyList=[s.l.GetInterimAnalysisList+"_"+this.studyKey+"_"+e.planKey];var l=this.payloadCommandService.getCommandDetails(n.commandName,n.param,{},{},e.userActionData);return this.baseConnectionService.sendRequest(l,t).pipe(Object(we.a)((function(e){return e})))},e.prototype.revertSaved=function(e){var t={commandName:b.p.GET_PLAN_DESIGN,param:{studyKey:this.studyKey,planKey:e.planKey}},n={};n.dependencyList=[s.l.GetPlanDetails+"_"+this.studyKey+"_"+e.planKey,s.l.GetPlanListKey+"_"+this.studyKey];var l=this.payloadCommandService.getCommandDetails(t.commandName,t.param,{},{},e.userActionData);return this.baseConnectionService.sendRequest(l,n).pipe(Object(we.a)((function(e){return e})))},e.prototype.getBannerLabels=function(){return{SUCCESS:{PLAN_DESIGN:{SAVE_PLAN_DESIGN:this.localeAppResourcesService.getResource("SAVE_PLAN_DESIGN"),LOCKED_COHORT_PLAN_DESIGN:this.localeAppResourcesService.getResource("LOCKED_COHORT_PLAN_DESIGN")}}}},e.prototype.getCohortDesignLabels=function(){return{COHORT_DESIGN:{MANAGE_COHORTS:this.localeAppResourcesService.getResource("MANAGE_COHORTS"),SELECT_COHORTS:this.localeAppResourcesService.getResource("SELECT_COHORTS"),ADD_DEPENDENCY:this.localeAppResourcesService.getResource("ADD_DEPENDENCY"),TOTAL_RANDOMIZATION_TARGET:this.localeAppResourcesService.getResource("TOTAL_RANDOMIZATION_TARGET"),DIAGRAM_CANVAS:this.localeAppResourcesService.getResource("DIAGRAM_CANVAS"),COHORTS_STARTED_MSG:this.localeAppResourcesService.getResource("COHORTS_STARTED_MSG"),DRAG_AND_CONNECT_MSG:this.localeAppResourcesService.getResource("DRAG_AND_CONNECT_MSG"),CONFIGURATION_CARDS:this.localeAppResourcesService.getResource("CONFIGURATION_CARDS"),COHORT_CARD:this.localeAppResourcesService.getResource("COHORT_CARD"),DEPENDENCY_CARD:this.localeAppResourcesService.getResource("DEPENDENCY_CARD"),COHORTS_AVAILABLE_MSG:this.localeAppResourcesService.getResource("COHORTS_AVAILABLE_MSG")}}},e.prototype.getSourceSummaryDetails=function(e,t){var n={commandName:b.p.SOURCESUMMARY,param:{studyKey:e}},l=o.m.getModuleInfo(null,e),a=this.payloadCommandService.getCommandDetails(n.commandName,n.param,null,null,l);return t||(t={}),t.cacheKey="GetSourceSummaryKey_"+n.param.studyKey,this.baseConnectionService.sendRequest(a,t).pipe(Object(we.a)((function(e){return e})))},Object.defineProperty(e.prototype,"headerResource",{get:function(){return this.pceHeaderResourceService.PCEHeaderResource},enumerable:!0,configurable:!0}),e.prototype.getHeaderData=function(e,t,n){var l,a,i=this,r=this.userDataService.getUserName();this.studySummaryService.getStudyName(this.studyKey).subscribe((function(o){var s;l=o.id,a=o.name;var u=i.headerResource;(s={})[u.userName]=r,s[u.date]=i.datePipe.transform(Date.now(),"dd-MMM-yyyy"),s[u.tabName]="New Plans Tab",s[u.studyId]=l,s[u.studyName]=a,s[u.planName]=i.planName,s[u.planTabName]="Cohort Design Tab",s[u.componentName]="Configuration Card",s[u.lastSourceDataUpdate]=i.datePipe.transform(Date.now(),"dd-MMM-yyyy"),e.header=s,i.pceService.execPCECommand(e,t,n).subscribe((function(e){console.log("Promise end ")}))}))},e.prototype.execPCECommand=function(e,t,n,l,a){this.getHeaderData({action:e,domElement:t,metaData:a},n,l)},e.prototype.showErrorInfo=function(e){this.dialog.open(s.t,{width:b.F.PLAN_OUTDATED.WIDTH,height:b.F.PLAN_OUTDATED.HEIGHT,data:this.getInfoProp(e),panelClass:b.F.PLAN_OUTDATED.PANEL_CLASS,id:"infoDialog"})},e.prototype.getInfoProp=function(e){return{heading:this.getErrorMessage("Info"),message:this.getErrorMessage(e),okLabel:this.localeAppResourcesService.getResource(o.a.OkLabel),showCancel:!1}},e.prototype.getErrorMessage=function(e){return this.errorTermsService.getErrorMessage(e)},e}(),Ve=n("iEqU"),xe=n("vV4x"),Ke=n("gntc"),Ue=n("D57K"),je=n("ptpt"),Be=n("LR82"),We=n("OqOl"),He=function(){function e(e,t,n){this.dialogRef=e,this.cohortListData=t,this.localAppResources=n}return e.prototype.ngOnInit=function(){var e=this;this.displayedColumns=["select","name","description","source","isAdjustment"],this.dataSource=this.cohortListData.cohortsData,this.study=this.cohortListData.cohortInd,this.selection=new ae.c(!0,[]),this.cohortListData.selectedCohort.forEach((function(t){return e.selection.select(t)})),this.cohortListData.selectedCohort.map((function(e){e.isEditable=!0})),this.getResources()},e.prototype.isAllSelected=function(){return this.selection.selected.length===this.dataSource.length},e.prototype.masterToggle=function(){var e=this;this.isAllSelected()?this.selection.clear():this.dataSource.forEach((function(t){t.isAdjustment||e.selection.select(t)})),this.cohortListData.selectedCohort&&this.cohortListData.selectedCohort.length>0&&this.cohortListData.selectedCohort.forEach((function(t){return e.selection.select(t)}))},e.prototype.cancel=function(){this.dialogRef.close()},e.prototype.ok=function(){var e=this;this.dataSource.forEach((function(t){t.isAdjustment&&e.selection.selected.push(t)})),this.selection.selected&&this.selection.selected.length>0&&this.selection.selected.map((function(e){delete e.isEditable})),this.dialogRef.close({action:b.E.OK,selectedCohorts:this.getUniqueArr(this.selection.selected,"cohortKey")})},e.prototype.getResources=function(){return this.selectCohortResources={SelectCohorts:this.localAppResources.getResource("SelectCohorts"),SelectCohorts_CohortID_Msg:this.localAppResources.getResource("SelectCohorts_CohortID_Msg"),SelectCohorts_Randomization:this.localAppResources.getResource("SelectCohorts_Randomization"),SelectCohorts_Screening:this.localAppResources.getResource("SelectCohorts_Screening"),SelectCohorts_CohortName:this.localAppResources.getResource("SelectCohorts_CohortName"),SelectCohorts_Description:this.localAppResources.getResource("SelectCohorts_Description"),SelectCohorts_CohortID:this.localAppResources.getResource("SelectCohorts_CohortID"),SelectCohorts_OK:this.localAppResources.getResource("SelectCohorts_OK"),SelectCohorts_Cancel:this.localAppResources.getResource("SelectCohorts_Cancel")},this.selectCohortResources},e.prototype.getUniqueArr=function(e,t){return e.map((function(e){return e[t]})).map((function(e,t,n){return n.indexOf(e)===t&&t})).filter((function(t){return e[t]})).map((function(t){return e[t]}))},e}(),Ye=function(){function e(e,t,n,l,a,i,r,o,s,u,d,c){this.planDetailsService=e,this.dialog=t,this.planDesignService=n,this.plansService=l,this.errorTermsServiceStore=a,this.userDataService=i,this.matDialog=r,this.managePlansService=o,this.localAppResources=s,this.userPrivilegesService=u,this.loadingScreenService=d,this.ref=c,this.node=new je.Node,this.model=new je.GraphLinksModel,this.subscription=new Be.a,this.cohortListArray=[],this.cohortLinkArray=[],this.cohortLinkArrayServer=[],this.studySourceSummaryData={info:Object},this.prop={sourceSummarySubscription:null},this.dataSource=[],this.cohortDependencyArray=[],this.cohortDependencyArrayServer=[],this.invalidNodeArray=[],this.isApprovedOrPreApprovedPlan=!1,this.isAdjustmentPlan=!1,this.userPrivilegeObj={editPrivilege:!1,viewPrivilege:!1,approvePrivilege:!1},this.adjustmentPlanInvalidDependencyArr=[],this.cohortNameListHavingFss=[],this.dirtyCohortListAdjustment=[],this.onPlanKeyChangedCall=!1,this.isAnyCohortLocked=!1,this.hideCanvas=!0}return e.prototype.ngOnInit=function(){this.resources=this.planDetailsService.getPlanDetailsResources(),this.sourceLabeldata=this.planDetailsService.getConfirmProp(),this.cohortListArray=[],this.cohortLinkArray=[],this.cohortDependencyArray=[],this.planOptionLabels=this.planDesignService.getBannerLabels(),this.cohortDesignLabels=this.planDesignService.getCohortDesignLabels(),this.userActionData=this.plansService.getUserActionData(),this.userDataService.updateUsageMetrics({usageMetric:{viewVisit:{module:this.userActionData.moduleName,page:this.userActionData.pageName,studykey:this.userActionData.studykey,localTime:(new Date).toString()}}}).subscribe(),this.study=this.userDataService.lastVisitedStudy,this.onSaveChange(),this.onPlanKeyChanged(),this.onLoadSaved(),this.manageLoadSaved(),this.getSourceSummary(),this.getResources(),this.getUserAccessActions(),this.getPlanDetails(),this.planDetailsService.setReadOnly(!0),this.saveEnability(!1),this.fullCardEnable=!1,this.optionsMenu=this.planDetailsService.getPlanDesignMenuOptions(),this.kebabMenu="kebabMenu",this.onPlanKeyChangedCall=!1,this.UNEDITABLE_PLAN_COUNTRY_LOCKED_COMMON_MSG="You cannot perform any operations on the Cohort Design tab of plans and adjustments with locked countries."},e.prototype.showDetails=function(e){if(this.node=e,e&&e.data&&this.cohortListArray.length>0){this.enableCard=e.data.category,this.selectedNode={},"cohort"===e.data.category&&(this.selectedNode={category:"cohort",key:e.data.cohortKey}),"dependency"===e.data.category&&(this.selectedNode={category:"dependency",key:e.data.dependencyKey}),this.nodeData=[],this.nodeData.push(e.data),this.approvedAdjustmentObj={isApprovedOrPreApprovedPlan:this.isApprovedOrPreApprovedPlan,isAdjustmentPlan:this.isAdjustmentPlan,depServerKeyCounter:this.depServerKeyCounter},this.adjustmentData={},this.adjustmentData={cohortLinkArray:this.cohortLinkArray,approvedAndAdjustment:this.approvedAdjustmentObj,oldServerCohortData:this.oldCohortArray},this.depCardDetails=[];var t=Object.assign({},e.data,this.approvedAdjustmentObj);this.depCardDetails.push(t),this.fullCardEnable&&this.LoadFullCohortList(this.enableCard)}else this.enableCard="",this.depCardDetails=null},e.prototype.checkFormStatusForFullCard=function(){this.plansService.getFormStatus()||!this.fullCardButtonClicked||this.valueChange?this.plansService.setFormStatus(!0):this.plansService.setFormStatus(!1)},e.prototype.onModelChanged=function(e){this.loadingScreenService.startLoading(),this.showDetails(this.node),this.modelChange=!0,this.checkFormStatusForFullCard(),this.isApprovedOrPreApprovedPlan&&this.plansService.setFormStatus(!1),this.initialLoad&&(this.plansService.setFormStatus(!1),this.initialLoad=!1),this.planDetailsService.setReadOnly(!1),"Undo"===e.oldValue&&null===e.newValue&&(this.updateDepArrAfterDelete(this.cohortListArray),this.model=new je.GraphLinksModel(this.cohortListArray,this.cohortLinkArray)),"Delete"===e.oldValue&&null===e.newValue&&(e.object.changes.each((function(e){if(e.change===je.ChangedEvent.Remove&&"linkDataArray"===e.propertyName){var t=e.oldValue;console.log("removed link { from: "+t.from+", to: "+t.to+"}")}})),this.updateDepArrAfterDelete(this.cohortListArray)),this.updateDepArrSourceTargetCohorts(),this.updateLengthOfCohortArray(),this.saveEnability(!0),this.isApprovedOrPreApprovedPlan&&(this.saveEnability(!1),this.planDetailsService.setReadOnly(!0)),this.calculateTotalRandomization(this.cohortListArray),this.fullCardEnable&&this.LoadFullCohortList(this.enableCard),this.cohortListArray.length>0&&"0 0"===this.cohortListArray[0].loc&&this.manageLoadSaved(),this.loadingScreenService.stopLoading(),this.resetFullCardFlags()},e.prototype.resetFullCardFlags=function(){this.fullCardButtonClicked=!1,this.valueChange=!1},e.prototype.updateLengthOfCohortArray=function(){this.cohortListLength=[],this.showTotalRandomization=!1;for(var e=0;e<this.cohortListArray.length;e++)"cohort"===this.cohortListArray[e].category&&this.cohortListLength.push(this.cohortListArray[e]);this.cohortListLength.length>0&&(this.showTotalRandomization=!0)},e.prototype.getResources=function(){return this.localApplicationResources={okLabel:this.localAppResources.getResource("OK"),cancelLabel:this.localAppResources.getResource("Cancel"),PLNDT_REVERT:this.localAppResources.getResource("PLNDT_REVERT"),REVERT_PLN_DSGN_MSG:this.localAppResources.getResource("REVERT_PLN_DSGN_MSG"),enterReqField:this.localAppResources.getResource("enterReqField"),enterMandatoryParam:this.localAppResources.getResource("enterMandatoryParam"),randomizationTargetNotMet:this.localAppResources.getResource("randomizationTargetNotMet"),RANDOMIZATION_VLDN_MSG:this.localAppResources.getResource("RANDOMIZATION_VLDN_MSG")},this.localApplicationResources},e.prototype.getPlanDetails=function(){var e=this;this.planDetailsService.getBriefStudyPlan(this.planDetailsService.planKey).subscribe((function(t){t&&e.planDetailsService.setCopyPlanVal(t),e.isCohortPlan=t.planProperties.isCohortPlan;var n=C;e.screeningPeriod=t.planProperties.screeningPeriod,e.TLSRavailability=t.planProperties.LSR,e.version=t.planProperties.version,e.planPropTLSR=n(t.planProperties.LSR,"YYYY-MM-DD",!0),e.planPropTFSI=n(t.planProperties.FSI,"YYYY-MM-DD",!0);var l=new Date,a=l.getDate().toString(),i=(l.getMonth()+1).toString();l.getFullYear().toString(),1===a.length&&(a="0"+a),1===i.length&&(i="0"+i),e.todaysDateInMoment=n(l,"YYYY-MM-DD",!0),e.userPrivilegeObj.approvePrivilege||e.userPrivilegeObj.editPrivilege?t.planProperties.isPlan?(e.isAdjustmentPlan=!1,t.planProperties.isPlanApproved||t.planProperties.isPrevApproved||e.isCohortPlan&&"N"===e.isCohortPlan?(e.isApprovedOrPreApprovedPlan=!0,e.planDetailsService.setReadOnly(!0),e.saveEnability(!1)):(e.isApprovedOrPreApprovedPlan=!1,e.planDetailsService.setReadOnly(!1),e.saveEnability(!0))):t.planProperties.isPrevApproved||t.planProperties.isReadOnly||e.isCohortPlan&&"N"===e.isCohortPlan?(e.isAdjustmentPlan=!1,e.isApprovedOrPreApprovedPlan=!0,e.planDetailsService.setReadOnly(!0),e.saveEnability(!1)):(e.isAdjustmentPlan=!0,e.isApprovedOrPreApprovedPlan=!1,e.planDetailsService.setReadOnly(!1),e.saveEnability(!0)):(e.isApprovedOrPreApprovedPlan=!0,e.planDetailsService.setReadOnly(!0),e.saveEnability(!1)),e.onPlanKeyChangedCall&&e.manageLoadSaved()}))},e.prototype.openSelectCohortDialog=function(){var e=this,t=[],n=[];if(this.cohortListArray.length>0&&this.dataSource.length>0)for(var l=0;l<this.cohortListArray.length;l++)for(var a=0;a<this.dataSource.length;a++)Number(this.cohortListArray[l].cohortKey)===Number(this.dataSource[a].cohortKey)&&t.push(this.dataSource[a]);if(this.isAdjustmentPlan){if(this.oldCohortArray.length>0&&this.dataSource.length>0)for(l=0;l<this.oldCohortArray.length;l++)for(a=0;a<this.dataSource.length;a++)Number(this.oldCohortArray[l].cohortKey)===Number(this.dataSource[a].cohortKey)&&n.push(this.dataSource[a]);if(t.length>0&&n.length>0)for(l=0;l<n.length;l++)for(a=0;a<t.length;a++)Number(n[l].cohortKey)===Number(t[a].cohortKey)&&(t[a].isAdjustment=!0)}this.dialog.open(He,{width:b.F.SELECT_COHORT.WIDTH,data:{cohortsData:this.dataSource,selectedCohort:t,cohortInd:this.studySourceSummaryData},panelClass:b.F.SELECT_COHORT.PANEL_CLASS,id:"selectCohortDialog"}).afterClosed().subscribe((function(t){if(t&&t.action===b.E.OK){for(var n=t.selectedCohorts,l=0;l<n.length;l++)for(var a=0;a<e.cohortListArray.length;a++)Number(e.cohortListArray[a].cohortKey)===Number(n[l].cohortKey)&&(n[l]=e.cohortListArray[a]);for(l=0;l<n.length;l++)if(!n[l].loc){for(n[l].cohortcardConfiguration={randomizationTarget:"",TLSR:e.TLSRavailability?e.TLSRavailability:"",screeningPeriod:e.screeningPeriod,startScreening:"",noOfDaysBefore:"",noOfDaysAfter:"",actuals:{LSR:null,RT:0,FSS:null}},a=0;a<e.oldCohortArray.length;a++){if(Number(e.oldCohortArray[a].cohortKey)===Number(n[l].cohortKey)){n[l].isIAPresent=e.oldCohortArray[a].isIAPresent,n[l].cohortcardConfiguration.IAName=e.oldCohortArray[a].cohortcardConfiguration.IAName;break}n[l].isIAPresent=!1,n[l].cohortcardConfiguration.IAName=""}n[l].key=Number(Math.random()*(l+1)*1e3),console.log(n[l].key),n[l].loc="0 "+30*(l+1),n[l].category="cohort",n[l].isCohortLocked=!1}e.calculateTotalRandomization(n),e.cohortDependencyArray=e.getUniqueArr(e.cohortDependencyArray,"dependencyKey"),e.cohortListArray=n.concat(e.cohortDependencyArray),e.updateDepArrSourceTargetCohorts(),e.model=new je.GraphLinksModel(e.cohortListArray,e.cohortLinkArray)}}))},e.prototype.getSourceSummary=function(){var e=this;this.studyKey=this.userDataService.getLastVisitedStudyKey(),this.prop.sourceSummarySubscription=this.planDesignService.getSourceSummaryDetails(this.studyKey).subscribe((function(t){t.result===s.k.RESULT_OK&&(e.studySourceSummaryData.info=t.sourceSummary)}))},e.prototype.getCohortsList=function(){var e=this;this.planDesignService.getCohortsDataList(this.userActionData).subscribe((function(t){if(console.log(t),e.allCohortServerData=t,e.dataSource=[],e.allCohortServerData&&e.allCohortServerData.result===s.k.RESULT_OK)e.allCohortServerData&&e.allCohortServerData.cohortThumbnailList&&(e.allCohortServerData.cohortThumbnailList.cohortThumbnail?(e.allCohortServerData.cohortThumbnailList.cohortThumbnail.constructor===Array?e.dataSource=e.allCohortServerData.cohortThumbnailList.cohortThumbnail:e.dataSource.push(e.allCohortServerData.cohortThumbnailList.cohortThumbnail),e.dataSource=Ue.__spread(e.dataSource)):e.dataSource=[]),e.openSelectCohortDialog();else{var n=e.errorTermsServiceStore.getErrorMessage(parseInt(t.error.errorCode,10));e.plansService.showErrorMessage(n)}}))},e.prototype.manageLoadSaved=function(e){var t=this;this.hideCanvas=!0,this.loadingScreenService.startLoading();var n={planKey:this.planDetailsService.planKey,userActionData:this.userActionData};e&&(n.planKey=e),this.planDesignService.revertSaved(n).subscribe((function(e){if("OK"===e.result){if(void 0!==e.planDesignJson.cohortNodeArray){t.onPlanKeyChangedCall=!1,t.getPlanDetails(),t.planDetailsService.setRefreshPlanList(!0),t.dirtyCohortListAdjustment=[],t.enableCard="",t.initialLoad=!0,t.planDetailsService.setReadOnly(!0),t.totalRandomization=e.planDesignJson.totalRandomization,t.calculateTotalRandomization(e.planDesignJson.cohortNodeArray),t.oldCohortArray=JSON.parse(JSON.stringify(e.planDesignJson.cohortNodeArray));var n,l,a=[];a=e.planDesignJson.cohortNodeArray,n=e.planDesignJson.dependencyArray,t.cohortDependencyArrayServer=JSON.parse(JSON.stringify(e.planDesignJson.dependencyArray)),t.cohortDependencyArray=e.planDesignJson.dependencyArray,l=a.concat(n),t.cohortListArray=l,t.depKeyCounter=n.length>0?n[n.length-1].dependencyKey:1e3,t.depServerKeyCounter=t.depKeyCounter,t.cohortLinkArrayServer=JSON.parse(JSON.stringify(e.planDesignJson.cohortLinkArray)),t.cohortLinkArray=e.planDesignJson.cohortLinkArray,t.updateDepArrSourceTargetCohorts(),t.model=new je.GraphLinksModel(t.cohortListArray,t.cohortLinkArray)}}else{var i=t.errorTermsServiceStore.getErrorMessage(e.error.errorCode);t.plansService.showErrorMessage(i)}})),setTimeout((function(){t.hideCanvas=!1,t.loadingScreenService.stopLoading()}),3e3)},e.prototype.calculateTotalRandomization=function(e){if(e){this.randomizationTargetUsed=0;for(var t=0;t<e.length;t++)e[t].cohortcardConfiguration&&e[t].cohortcardConfiguration.randomizationTarget&&(this.randomizationTargetUsed=this.randomizationTargetUsed+e[t].cohortcardConfiguration.randomizationTarget);for(this.randomizationTargetLeftOver=this.totalRandomization-this.randomizationTargetUsed,this.randomizationTargetLeftOver<0?(this.randomizationTargetLeftOver=this.randomizationTargetUsed-this.totalRandomization,this.leftOverText="over"):this.leftOverText="left",t=0;t<e.length;t++){if(e[t].isCohortLocked){this.isAnyCohortLocked=!0;break}this.isAnyCohortLocked=!1}}},e.prototype.updateOperationTypeForCohort=function(e){this.cohortNameListHavingFss=[];for(var t=e,n=0;n<t.length;n++)"cohort"===t[n].category&&(delete t[n].cohortID,delete t[n].dummyKey,delete t[n].isDeletable,delete t[n].isDeletedFromSource,delete t[n].usedInPlan,delete t[n].__gohashid,t[n].cohortcardConfiguration.actuals.FSS&&this.cohortNameListHavingFss.push(t[n].cohortName));for(n=0;n<t.length;n++){"cohort"===t[n].category&&(t[n].hasOwnProperty("isEditable")||(t[n].operationType="I"));for(var l=0;l<this.oldCohortArray.length;l++)"cohort"===t[n].category&&t[n].cohortKey===this.oldCohortArray[l].cohortKey&&(JSON.stringify(t[n])===JSON.stringify(this.oldCohortArray[l])?(t[n].operationType="N",this.oldCohortArray[l].deleted="N"):(t[n].operationType="U",this.oldCohortArray[l].deleted="N"))}for(n=0;n<this.oldCohortArray.length;n++)"N"!==this.oldCohortArray[n].deleted&&(this.oldCohortArray[n].operationType="D",t.push(this.oldCohortArray[n]));return t},e.prototype.updateInvalidCohort=function(e){var t=C,n=this.dirtyCohortListAdjustment;if(e.length>0)for(var l=0;l<e.length;l++)if("cohort"===e[l].category&&"D"!==e[l].operationType)if(this.isAdjustmentPlan){if("U"!==e[l].operationType||e[l].isEditable)this.basePlanInvalidPlanCohortValidation(e[l]);else if(n.length>0)for(var a=0;a<n.length;a++)if(n[a].cohortName===e[l].cohortName&&(!e[l].cohortcardConfiguration.actuals.LSR&&n[a].isRtDirty&&(e[l].cohortcardConfiguration.randomizationTarget<0||e[l].cohortcardConfiguration.randomizationTarget<e[l].cohortcardConfiguration.actuals.RT||e[l].cohortcardConfiguration.randomizationTarget>15e4)||n[a].isTlsrDirty&&(!e[l].cohortcardConfiguration.TLSR||t(e[l].cohortcardConfiguration.TLSR,"YYYY-MM-DD",!0).isBefore(this.todaysDateInMoment)||t(e[l].cohortcardConfiguration.TLSR,"YYYY-MM-DD",!0).isBefore(this.planPropTFSI)||t(e[l].cohortcardConfiguration.TLSR,"YYYY-MM-DD",!0).isAfter(this.planPropTLSR)))){this.invalidNodeArray.push(e[l].cohortName);break}}else this.basePlanInvalidPlanCohortValidation(e[l])},e.prototype.updateInvalidDependency=function(e){if(e.length>0)for(var t=0;t<e.length;t++)this.basePlanInvalidPlanDependencyValidation(e[t])},e.prototype.onSaveChange=function(){var e=this;this.subscription.add(this.planDetailsService.saveOption$.subscribe((function(t){if(t.toLowerCase()===b.Mb.PLAN_DESIGN.toLowerCase()){for(var n={planDesignJson:{cohortLinkArray:[],cohortNodeArray:[],dependencyArray:[]}},l=[],a=0;a<e.cohortListArray.length;a++)"cohort"===e.cohortListArray[a].category.toLowerCase()?n.planDesignJson.cohortNodeArray.push(e.cohortListArray[a]):"dependency"===e.cohortListArray[a].category.toLowerCase()&&l.push(e.cohortListArray[a]);n.planDesignJson.cohortNodeArray=e.updateOperationTypeForCohort(n.planDesignJson.cohortNodeArray),e.invalidNodeArray=[],e.updateInvalidCohort(n.planDesignJson.cohortNodeArray),e.updateInvalidDependency(l),0===e.invalidNodeArray.length&&e.randomizationTargetUsed<=e.totalRandomization?(n.planDesignJson.cohortLinkArray=e.createCohortLinkArrayToSave(),n.planDesignJson.dependencyArray=e.createDependencyArrayToSave(l),e.planDesignService.savePlanDesign({planKey:e.planDetailsService.planKey,cohortData:n.planDesignJson,version:e.version,userActionData:e.userActionData}).subscribe((function(t){if("OK"===t.result)e.plansService.showSuccessMessage(e.planOptionLabels.SUCCESS.PLAN_DESIGN.SAVE_PLAN_DESIGN),e.manageLoadSaved(),e.userDataService.updateUsageMetrics({usageMetric:{viewVisit:{module:e.userActionData.moduleName,page:e.userActionData.pageName,studykey:e.userActionData.studykey,localTime:(new Date).toString()}}}).subscribe(),e.saveEnability(!1),e.dirtyCohortListAdjustment=[],e.planDetailsService.updateTabEnability(e.showTotalRandomization);else{var n=t.error.errorCode;if(n.toString()===b.Y.PLAN_LOCKED_PLAN_DESIGN)e.planDesignService.showErrorInfo(b.U+n);else{var l=e.errorTermsServiceStore.getErrorMessage(n);e.plansService.showErrorMessage(l)}}}))):e.invalidSavePlanErrorPopup()}})))},e.prototype.onLoadSaved=function(){var e=this;this.subscription.add(this.planDetailsService.planReset$.subscribe((function(t){t.currentRoutePath.toLowerCase()===b.Mb.PLAN_DESIGN.toLowerCase()&&e.dialog.open(s.t,{width:b.F.CONFIRM_DIALOG.WIDTH,height:b.F.CONFIRM_DIALOG.HEIGHT,data:{heading:e.localApplicationResources.PLNDT_REVERT,message:e.localApplicationResources.REVERT_PLN_DSGN_MSG,okLabel:e.localApplicationResources.okLabel,cancelLabel:e.localApplicationResources.cancelLabel},panelClass:b.F.CONFIRM_DIALOG.PANEL_CLASS}).afterClosed().subscribe((function(t){if(t&&t.action){if(t.action!==e.sourceLabeldata.okLabel)return!1;e.manageLoadSaved()}}))})))},e.prototype.onPlanKeyChanged=function(){var e=this;this.onPlanKeyChangedCall=!1,this.subscription.add(this.planDetailsService.planKeyChanged$.subscribe((function(t){t&&(e.onPlanKeyChangedCall=!0,e.getPlanDetails(),e.selectedNode={})})))},e.prototype.createDependencyNode=function(){this.depKeyCounter++;var e,t=[];if(this.cohortDependencyArray=[],this.dependencyNode={key:this.depKeyCounter,dependencyKey:this.depKeyCounter,loc:"200 100",dependencyName:"D"+(this.depKeyCounter-1e3),isEditable:!0,category:"dependency",dependencyCardConfiguration:{numberOfSubjects:"",enrollmentComplete:!0,enrollmentPauseDuration:0},sourceCohorts:[],targetCohorts:[],operationType:"I"},this.cohortListArray.length>0)for(var n=0;n<this.cohortListArray.length;n++)"dependency"===this.cohortListArray[n].category.toLowerCase()?this.cohortDependencyArray.push(this.cohortListArray[n]):"cohort"===this.cohortListArray[n].category.toLowerCase()&&t.push(this.cohortListArray[n]);this.cohortDependencyArray=this.getUniqueArr(this.cohortDependencyArray,"dependencyKey"),this.cohortDependencyArray.push(this.dependencyNode),e=t.concat(this.cohortDependencyArray),this.cohortListArray=e,this.model=new je.GraphLinksModel(this.cohortListArray,this.cohortLinkArray)},e.prototype.manageCohortsDialog=function(){var e=this;this.matDialog.open(We.a,{width:"600px",data:this.studySourceSummaryData}).afterClosed().subscribe((function(t){if("success"===t.result||t.deletedCohort){var n=[];e.planDesignService.getCohortsDataList(e.userActionData).subscribe((function(l){if(l&&l.result===s.k.RESULT_OK&&l&&l.cohortThumbnailList&&l.cohortThumbnailList.cohortThumbnail){l.cohortThumbnailList.cohortThumbnail.constructor===Array?n=l.cohortThumbnailList.cohortThumbnail:n.push(l.cohortThumbnailList.cohortThumbnail);for(var a=0;a<e.cohortListArray.length;a++)if("cohort"===e.cohortListArray[a].category)for(var i=0;i<n.length;i++)e.cohortListArray[a].cohortKey===n[i].cohortKey&&(e.cohortListArray[a].cohortName=n[i].cohortName),t.deletedCohort&&e.cohortListArray[a].cohortKey===t.deletedCohort.cohortThumbnailList.cohortThumbnail[0].cohortKey&&e.cohortListArray.splice(a,1);e.model=new je.GraphLinksModel(e.cohortListArray,e.cohortLinkArray)}})),e.manageLoadSaved()}}))},e.prototype.getUniqueArr=function(e,t){return e.map((function(e){return e[t]})).map((function(e,t,n){return n.indexOf(e)===t&&t})).filter((function(t){return e[t]})).map((function(t){return e[t]}))},e.prototype.saveEnability=function(e){this.planDetailsService.setSaveDisability(!e)},e.prototype.cohortCardInfo=function(e){this.cohortCardData=e;for(var t=0;t<this.cohortListArray.length;t++)this.cohortListArray[t].cohortName===this.cohortCardData.cohortName&&(this.cohortListArray[t].cohortcardConfiguration=this.cohortCardData.cohortcardConfiguration,JSON.stringify(this.cohortListArray[t].cohortcardConfiguration)!==JSON.stringify(this.cohortCardData.cohortcardConfiguration)&&(this.valueChange=!0));this.calculateTotalRandomization(this.cohortListArray),this.isApprovedOrPreApprovedPlan&&(this.saveEnability(!1),this.planDetailsService.setReadOnly(!0))},e.prototype.dependencyCardInfo=function(e){this.dependencyCardData=e;for(var t=0;t<this.cohortListArray.length;t++)this.cohortListArray[t].dependencyKey===this.dependencyCardData.dependencyKey&&(this.cohortListArray[t].dependencyCardConfiguration=this.dependencyCardData.dependencyCardConfiguration,JSON.stringify(this.cohortListArray[t].dependencyCardConfiguration)!==JSON.stringify(this.dependencyCardData.dependencyCardConfiguration)&&(this.valueChange=!0));this.isApprovedOrPreApprovedPlan&&(this.saveEnability(!1),this.planDetailsService.setReadOnly(!0))},e.prototype.createCohortLinkArrayToSave=function(){var e=[];if(this.cohortLinkArray.length>0||this.cohortLinkArrayServer.length>0){if(this.cohortLinkArray.length>0)for(var t=0;t<this.cohortLinkArray.length;t++)if(this.cohortLinkArray[t].hasOwnProperty("isEditable")){if(this.cohortLinkArrayServer.length>0)for(var n=0;n<this.cohortLinkArrayServer.length;n++)this.cohortLinkArray[t].hasOwnProperty("isEditable")&&(this.cohortLinkArrayServer[n].from===this.cohortLinkArray[t].from&&this.cohortLinkArrayServer[n].to===this.cohortLinkArray[t].to&&(this.cohortLinkArray[t].operationType="N",this.cohortLinkArrayServer[n].deleted="N"),e.push(this.cohortLinkArray[t]))}else this.cohortLinkArray[t].operationType="I",e.push(this.cohortLinkArray[t]);if(this.cohortLinkArrayServer.length>0)for(n=0;n<this.cohortLinkArrayServer.length;n++)this.cohortLinkArrayServer[n].hasOwnProperty("isEditable")&&"N"!==this.cohortLinkArrayServer[n].deleted&&(this.cohortLinkArrayServer[n].operationType="D",e.push(this.cohortLinkArrayServer[n]));var l,a=[],i=[];for(t=0;t<e.length;t++)"U"===e[t].operationType||"N"===e[t].operationType?a.push(e[t]):i.push(e[t]);return l=this.getUniqueArr(a,"__gohashid"),i.concat(l).map((function(e){return{from:e.from,to:e.to,operationType:e.operationType}}))}return e},e.prototype.createDependencyArrayToSave=function(e){var t=[],n=[];if((t=this.getUniqueArr(e,"dependencyKey")).length>0)for(var l=0;l<t.length;l++){var a=[],i=[];if(t[l].sourceCohorts&&t[l].sourceCohorts.length>0)for(var r=0;r<t[l].sourceCohorts.length;r++)a.push(t[l].sourceCohorts[r].cohortName);if(t[l].targetCohorts&&t[l].targetCohorts.length>0)for(r=0;r<t[l].targetCohorts.length;r++)i.push(t[l].targetCohorts[r].cohortName);t[l].sourceCohorts=a,t[l].targetCohorts=i}if(t.length>0||this.cohortDependencyArrayServer.length>0){for(l=0;l<t.length;l++)for(delete t[l].__gohashid,t[l].hasOwnProperty("operationType")&&(t[l].operationType="I",n.push(t[l])),r=0;r<this.cohortDependencyArrayServer.length;r++)t[l].dependencyKey===this.cohortDependencyArrayServer[r].dependencyKey&&(JSON.stringify(t[l])===JSON.stringify(this.cohortDependencyArrayServer[r])?(t[l].operationType="N",this.cohortDependencyArrayServer[r].deleted="N"):(t[l].operationType="U",this.cohortDependencyArrayServer[r].deleted="N")),n.push(t[l]);for(l=0;l<this.cohortDependencyArrayServer.length;l++)"N"!==this.cohortDependencyArrayServer[l].deleted&&(this.cohortDependencyArrayServer[l].operationType="D",n.push(this.cohortDependencyArrayServer[l]));return(t=this.getUniqueArr(n,"dependencyKey")).map((function(e){return{key:e.key,dependencyKey:e.dependencyKey,loc:e.loc,dependencyName:e.dependencyName,isEditable:e.isEditable,category:e.category,dependencyCardConfiguration:e.dependencyCardConfiguration,sourceCohorts:e.sourceCohorts,targetCohorts:e.targetCohorts,operationType:e.operationType}}))}return t},e.prototype.invalidSavePlanErrorPopup=function(){var e=this;if(this.invalidNodeArray.length>0||this.randomizationTargetUsed>this.totalRandomization){var t={heading:this.localApplicationResources.enterReqField,message:this.localApplicationResources.enterMandatoryParam+": <b>"+this.invalidNodeArray+"<b>",okLabel:this.localApplicationResources.okLabel,cancelLabel:this.localApplicationResources.cancelLabel};this.randomizationTargetUsed>this.totalRandomization&&(t.message=this.localApplicationResources.RANDOMIZATION_VLDN_MSG,t.heading=this.localApplicationResources.randomizationTargetNotMet),this.dialog.open(s.t,{width:b.F.CONFIRM_DIALOG.WIDTH,data:t,panelClass:b.F.CONFIRM_DIALOG.PANEL_CLASS}).afterClosed().subscribe((function(t){t&&t.action&&(e.model=new je.GraphLinksModel(e.cohortListArray,e.cohortLinkArray))}))}},e.prototype.updateDepArrAfterDelete=function(e){for(var t=[],n=0;n<e.length;n++)"dependency"===e[n].category&&t.push(e[n]);this.cohortDependencyArray=this.getUniqueArr(t,"dependencyKey")},e.prototype.updateDepArrSourceTargetCohorts=function(){if(this.cohortDependencyArray.length>0&&this.cohortLinkArray.length>0&&this.cohortListArray.length>0)for(var e=0;e<this.cohortDependencyArray.length;e++){this.cohortDependencyArray[e].sourceCohorts=[],this.cohortDependencyArray[e].targetCohorts=[];for(var t=0;t<this.cohortLinkArray.length;t++)if(this.cohortDependencyArray[e].key===this.cohortLinkArray[t].to||this.cohortDependencyArray[e].key===this.cohortLinkArray[t].from)for(var n=0;n<this.cohortListArray.length;n++)this.cohortListArray[n].key===this.cohortLinkArray[t].from&&void 0!==this.cohortListArray[n].cohortName?this.cohortDependencyArray[e].sourceCohorts.push(this.cohortListArray[n]):this.cohortListArray[n].key===this.cohortLinkArray[t].to&&void 0!==this.cohortListArray[n].cohortName&&this.cohortDependencyArray[e].targetCohorts.push(this.cohortListArray[n])}else if(this.cohortDependencyArray.length>0&&0===this.cohortLinkArray.length)for(e=0;e<this.cohortDependencyArray.length;e++)this.cohortDependencyArray[e].sourceCohorts=[],this.cohortDependencyArray[e].targetCohorts=[]},e.prototype.ApplyFullCardView=function(e){this.fullCardEnable=!this.fullCardEnable,this.LoadFullCohortList(e)},e.prototype.LoadFullCohortList=function(e){if(this.enableCard=e,"cohort"===e){var t=[];this.cohortListArray.map((function(e){"cohort"===e.category&&t.push(e)})),t.sort((function(e,t){var n=e.loc.split(" ")[0],l=t.loc.split(" ")[0];return console.log(n,l),n-l})),this.nodeData=t,this.adjustmentData={},this.adjustmentData={cohortLinkArray:this.cohortLinkArray,approvedAndAdjustment:this.approvedAdjustmentObj,oldServerCohortData:this.oldCohortArray}}if("dependency"===e){var n=[];if(this.cohortListArray.map((function(e){"dependency"===e.category&&n.push(e)})),n.sort((function(e,t){var n=e.loc.split(" ")[0],l=t.loc.split(" ")[0];return console.log(n,l),n-l})),this.depCardDetails=[],n.length>0)for(var l=0;l<n.length;l++){var a=Object.assign({},n[l],this.approvedAdjustmentObj);this.depCardDetails.push(a)}}!1===this.fullCardEnable&&(this.fullCardButtonClicked=!0,this.model=new je.GraphLinksModel(this.cohortListArray,this.cohortLinkArray))},e.prototype.getUserAccessActions=function(){var e=this.userDataService.getUserPrivilegesForModule(o.F.MODULE_PLANNING),t=this.userPrivilegesService.hasEditPlanAccess(e),n=this.userPrivilegesService.hasViewPlanAccess(e),l=this.userPrivilegesService.hasApprovePlanAccess(e);t&&(this.userPrivilegeObj.editPrivilege=!0),n&&(this.userPrivilegeObj.viewPrivilege=!0),l&&(this.userPrivilegeObj.approvePrivilege=!0)},e.prototype.KebabMenuClicked=function(e){var t;switch(t=this.fullCardEnable?this.fullCard.nativeElement:this.planDesignCanvas.nativeElement,e){case"Print":this.planDesignService.execPCECommand("PrintGraph",t,null,null,null);break;case this.optionsMenu[1].name:this.planDesignService.execPCECommand("ExportGraph",t,null,"export",null);break;case this.optionsMenu[0].name:var n=[],l=[];this.cohortListArray.map((function(e){if("cohort"===e.category)n.push({"Cohort Name":e.cohortName,"Randomization Target":e.cohortcardConfiguration.randomizationTarget,TLSR:e.cohortcardConfiguration.TLSR?e.cohortcardConfiguration.TLSR:"","Screening Period":e.cohortcardConfiguration.screeningPeriod,"Enrollment Pause Name":e.cohortcardConfiguration.IAName,"Start Screening":"dateSourceEvent"===e.cohortcardConfiguration.startScreening?"Date Source Event Achieved":"beforeSourceEvent"===e.cohortcardConfiguration.startScreening?"Number of Days before Source Event Achieved = "+e.cohortcardConfiguration.noOfDaysBefore:"afterSourceEvent"===e.cohortcardConfiguration.startScreening?"Number of Days after Source Event Achieved = "+e.cohortcardConfiguration.noOfDaysAfter:""});else{var t="";e.sourceCohorts.map((function(e){t+=e.cohortName+","}));var a="";e.targetCohorts.map((function(e){a+=e.cohortName+","})),l.push({"Dependency Name":e.dependencyName,"Preceding Cohorts":t.replace(/,\s*$/,""),"Dependent Cohorts":a.replace(/,\s*$/,""),"Enrollment Complete":e.dependencyCardConfiguration.enrollmentComplete?"Yes":"No","Number Of Subjects":e.dependencyCardConfiguration.numberOfSubjects,"Duration of Enrollment Pause (Days)":e.dependencyCardConfiguration.enrollmentPauseDuration})}})),this.planDesignService.execPCECommand("copyCohortData",t,null,"copy",{cohortData:n,dependencyData:l})}},e.prototype.basePlanInvalidPlanCohortValidation=function(e){var t=C;(!e.cohortcardConfiguration.randomizationTarget&&0!==e.cohortcardConfiguration.randomizationTarget||e.cohortcardConfiguration.randomizationTarget<0||e.cohortcardConfiguration.randomizationTarget>15e4||!e.cohortcardConfiguration.screeningPeriod&&0!==e.cohortcardConfiguration.screeningPeriod||e.cohortcardConfiguration.screeningPeriod<0||this.TLSRavailability&&(!e.cohortcardConfiguration.TLSR||t(e.cohortcardConfiguration.TLSR,"YYYY-MM-DD",!0).isBefore(this.planPropTFSI)||t(e.cohortcardConfiguration.TLSR,"YYYY-MM-DD",!0).isAfter(this.planPropTLSR))||!this.TLSRavailability&&(t(e.cohortcardConfiguration.TLSR,"YYYY-MM-DD",!0).isBefore(this.planPropTFSI)||t(e.cohortcardConfiguration.TLSR,"YYYY-MM-DD",!0).isAfter(this.planPropTLSR))||"beforeSourceEvent"===e.cohortcardConfiguration.startScreening&&(!e.cohortcardConfiguration.noOfDaysBefore||e.cohortcardConfiguration.noOfDaysBefore<=0)||"afterSourceEvent"===e.cohortcardConfiguration.startScreening&&(!e.cohortcardConfiguration.noOfDaysAfter||e.cohortcardConfiguration.noOfDaysAfter<=0))&&this.invalidNodeArray.push(e.cohortName)},e.prototype.basePlanInvalidPlanDependencyValidation=function(e){""!==e.dependencyCardConfiguration.numberOfSubjects&&null!=e.dependencyCardConfiguration.numberOfSubjects||!1!==e.dependencyCardConfiguration.enrollmentComplete?1===e.sourceCohorts.length&&e.dependencyCardConfiguration.numberOfSubjects>e.sourceCohorts[0].cohortcardConfiguration.randomizationTarget&&!1===e.dependencyCardConfiguration.enrollmentComplete?this.invalidNodeArray.push(e.dependencyName):0===e.sourceCohorts.length||0===e.targetCohorts.length?this.invalidNodeArray.push(e.dependencyName):""!==e.dependencyCardConfiguration.enrollmentPauseDuration&&null!=e.dependencyCardConfiguration.enrollmentPauseDuration||this.invalidNodeArray.push(e.dependencyName):this.invalidNodeArray.push(e.dependencyName)},e.prototype.copyPasteCohortParameters=function(e){var t=this;this.selectedNode={category:"cohort",key:e.cohortKey},"copy"===e.action&&this.cohortListArray.map((function(n){"cohort"===n.category&&n.cohortKey===e.cohortKey&&(t.tempCopy=n.cohortcardConfiguration)})),"paste"===e.action&&this.tempCopy&&this.cohortListArray.map((function(n){"cohort"===n.category&&n.cohortKey===e.cohortKey&&(t.isAdjustmentPlan&&!1===n.isEditable?(n.cohortcardConfiguration.randomizationTarget=t.tempCopy.randomizationTarget,n.cohortcardConfiguration.TLSR=t.tempCopy.TLSR,t.cohortCardInfoDirty({cohortName:n.cohortName,isRtDirty:!0,isTlsrDirty:!0})):n.cohortcardConfiguration.startScreening?(n.cohortcardConfiguration.randomizationTarget=t.tempCopy.randomizationTarget,n.cohortcardConfiguration.TLSR=t.tempCopy.TLSR,n.cohortcardConfiguration.screeningPeriod=t.tempCopy.screeningPeriod,t.tempCopy.startScreening&&(n.cohortcardConfiguration.startScreening=t.tempCopy.startScreening,n.cohortcardConfiguration.noOfDaysBefore=t.tempCopy.noOfDaysBefore,n.cohortcardConfiguration.noOfDaysAfter=t.tempCopy.noOfDaysAfter),t.model=new je.GraphLinksModel(t.cohortListArray,t.cohortLinkArray)):(n.cohortcardConfiguration.randomizationTarget=t.tempCopy.randomizationTarget,n.cohortcardConfiguration.TLSR=t.tempCopy.TLSR,n.cohortcardConfiguration.screeningPeriod=t.tempCopy.screeningPeriod,n.cohortcardConfiguration.startScreening="",n.cohortcardConfiguration.noOfDaysBefore="",n.cohortcardConfiguration.noOfDaysAfter="",t.model=new je.GraphLinksModel(t.cohortListArray,t.cohortLinkArray)))}))},e.prototype.onSelectNode=function(e){this.selectedNode="cohort"===e.category?{category:e.category,key:e.cohortKey}:{category:e.category,key:e.dependencyKey}},e.prototype.cohortCardInfoDirty=function(e){for(var t=e,n=0;n<this.cohortListArray.length;n++)if(this.cohortListArray[n].cohortName===t.cohortName&&!this.dirtyCohortListAdjustment.some((function(e){return typeof e.cohortName===t.cohortName}))){this.dirtyCohortListAdjustment.push(t);break}},e.prototype.ngOnDestroy=function(){this.prop.sourceSummarySubscription&&this.prop.sourceSummarySubscription.unsubscribe(),this.subscription.unsubscribe()},e}(),qe=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Je(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"span",[["class","totalRandomizationText ctos-labels"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," : "])),(e()(),l["ɵeld"](2,0,null,null,1,"b",[],null,null,null,null,null)),(e()(),l["ɵted"](3,null,[" "," ( "," "," ) "]))],null,(function(e,t){var n=t.component;e(t,1,0,n.cohortDesignLabels.COHORT_DESIGN.TOTAL_RANDOMIZATION_TARGET),e(t,3,0,n.randomizationTargetUsed,n.randomizationTargetLeftOver,n.leftOverText)}))}function Xe(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","labels__header"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.component.cohortDesignLabels.COHORT_DESIGN.DIAGRAM_CANVAS)}))}function ze(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","ctos-labels"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.component.cohortDesignLabels.COHORT_DESIGN.COHORTS_STARTED_MSG)}))}function Ze(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","ctos-labels"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.component.cohortDesignLabels.COHORT_DESIGN.DRAG_AND_CONNECT_MSG)}))}function $e(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","uneditable-plan-design-tab-message"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.UNEDITABLE_PLAN_COUNTRY_LOCKED_COMMON_MSG)}))}function Qe(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"span",[["class","fullScreenIcon"]],null,[[null,"click"]],(function(e,t,n){var l=!0,a=e.component;return"click"===t&&(l=!1!==a.ApplyFullCardView(a.enableCard)&&l),l}),null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["fullscreen"]))],null,null)}function et(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"ctos-cohort-card",[],null,[[null,"click"],[null,"cohortCardInfoEmit"],[null,"copyPasteCohort"],[null,"cohortCardInfoEmitDirty"]],(function(e,t,n){var l=!0,a=e.component;return"click"===t&&(l=!1!==a.onSelectNode(e.context.$implicit)&&l),"cohortCardInfoEmit"===t&&(l=!1!==a.cohortCardInfo(n)&&l),"copyPasteCohort"===t&&(l=!1!==a.copyPasteCohortParameters(n)&&l),"cohortCardInfoEmitDirty"===t&&(l=!1!==a.cohortCardInfoDirty(n)&&l),l}),ye,me)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](3,{cardSizeExpanded:0}),l["ɵdid"](4,638976,null,0,he,[R.a,x.g,o.cb,pe.a,s.D,y.a],{cohortLinks:[0,"cohortLinks"],adjustmentData:[1,"adjustmentData"],selectedNode:[2,"selectedNode"],cohortDirtyData:[3,"cohortDirtyData"],nodeData:[4,"nodeData"]},{cohortCardInfoEmit:"cohortCardInfoEmit",copyPasteCohort:"copyPasteCohort",cohortCardInfoEmitDirty:"cohortCardInfoEmitDirty"})],(function(e,t){var n=t.component,l=e(t,3,0,n.fullCardEnable);e(t,2,0,l),e(t,4,0,n.cohortLinkArray,n.adjustmentData,n.selectedNode,n.dirtyCohortListAdjustment,t.context.$implicit)}),null)}function tt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](3,{cohortListDiv:0}),(e()(),l["ɵand"](16777216,null,null,1,null,et)),l["ɵdid"](5,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component,l=e(t,3,0,n.fullCardEnable);e(t,2,0,l),e(t,5,0,n.nodeData)}),null)}function nt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"ctos-dependency-card",[],null,[[null,"click"],[null,"dependencyCardInfoEmit"]],(function(e,t,n){var l=!0,a=e.component;return"click"===t&&(l=!1!==a.onSelectNode(e.context.$implicit)&&l),"dependencyCardInfoEmit"===t&&(l=!1!==a.dependencyCardInfo(n)&&l),l}),_e,De)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](3,{cardSizeExpanded:0}),l["ɵdid"](4,638976,null,0,Re,[x.g,y.a,s.M],{depCardData:[0,"depCardData"],selectedNode:[1,"selectedNode"]},{dependencyCardInfoEmit:"dependencyCardInfoEmit"})],(function(e,t){var n=t.component,l=e(t,3,0,n.fullCardEnable);e(t,2,0,l),e(t,4,0,t.context.$implicit,n.selectedNode)}),null)}function lt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](3,{cohortListDiv:0}),(e()(),l["ɵand"](16777216,null,null,1,null,nt)),l["ɵdid"](5,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component,l=e(t,3,0,n.fullCardEnable);e(t,2,0,l),e(t,5,0,n.depCardDetails)}),null)}function at(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-configuration-card",[],null,null,null,Me,Oe)),l["ɵdid"](1,114688,null,0,Ne,[s.M],null,null)],(function(e,t){e(t,1,0)}),null)}function it(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,76,"div",[["class","PlanDesign-tab"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"div",[["class","manage-cohort-button"]],[[2,"disable-link-approved-plan-class",null]],null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"a",[["class","ctos-nav-link"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.manageCohortsDialog()&&l),l}),null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"div",[["class","bridcrum-icon"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](5,null,["",""])),(e()(),l["ɵeld"](6,0,null,null,5,"div",[["class","select-cohort-button"]],[[2,"disable-link-approved-plan-class",null]],null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,4,"a",[["class","ctos-nav-link"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.getCohortsList()&&l),l}),null,null)),(e()(),l["ɵeld"](8,0,null,null,1,"i",[["class","material-icons mat-adjust"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" add_circle_outline "])),(e()(),l["ɵeld"](10,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](11,null,["",""])),(e()(),l["ɵeld"](12,0,null,null,5,"div",[["class","cohort-dependency-button"],["id","cohortDepId"]],[[2,"disable-link-approved-plan-class",null]],null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,4,"a",[["class","ctos-nav-link"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.createDependencyNode()&&l),l}),null,null)),(e()(),l["ɵeld"](14,0,null,null,1,"i",[["class","material-icons mat-adjust"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" settings "])),(e()(),l["ɵeld"](16,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](17,null,["",""])),(e()(),l["ɵeld"](18,0,null,null,2,"div",[["class","totalRandomizationBox"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Je)),l["ɵdid"](20,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](21,0,null,null,12,"div",[["class","headerText row"]],null,null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,6,"div",[["class","col-md-9"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Xe)),l["ɵdid"](24,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ze)),l["ɵdid"](26,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ze)),l["ɵdid"](28,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](29,0,null,null,4,"div",[["class","col-md-3"]],null,null,null,null,null)),(e()(),l["ɵeld"](30,0,null,null,3,"span",[],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](32,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),(e()(),l["ɵted"](33,null,["",""])),(e()(),l["ɵand"](16777216,null,null,1,null,$e)),l["ɵdid"](35,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](36,0,[[1,0],["planDesignCanvas",1]],null,40,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](37,0,null,null,2,"div",[["class","col-md-9 canvasDesign"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["ɵeld"](38,0,null,null,1,"ctos-so-gojs-canvas",[],null,[[null,"nodeSelected"],[null,"modelChanged"]],(function(e,t,n){var l=!0,a=e.component;return"nodeSelected"===t&&(l=!1!==a.showDetails(n)&&l),"modelChanged"===t&&(l=!1!==a.onModelChanged(n)&&l),l}),r.w,r.l)),l["ɵdid"](39,114688,null,0,o.tb,[],{selectedNode:[0,"selectedNode"],model:[1,"model"],isApprovedPlan:[2,"isApprovedPlan"]},{modelChanged:"modelChanged",nodeSelected:"nodeSelected"}),(e()(),l["ɵeld"](40,0,[[2,0],["fullCard",1]],null,36,"div",[["class","cardView"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](42,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵeld"](43,0,null,null,33,"div",[["class","ctos-card"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Qe)),l["ɵdid"](45,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](46,0,null,null,24,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](47,0,null,null,11,"div",[["class","col-md-10"]],null,null,null,null,null)),(e()(),l["ɵeld"](48,0,null,null,10,"mat-button-toggle-group",[["class","mat-button-toggle-group"],["role","group"]],[[1,"aria-disabled",0],[2,"mat-button-toggle-vertical",null],[2,"mat-button-toggle-group-appearance-standard",null]],null,null,null,null)),l["ɵprd"](5120,null,x.q,(function(e){return[e]}),[Fe.c]),l["ɵprd"](6144,null,Fe.d,null,[Fe.c]),l["ɵdid"](51,1130496,[["group",4]],1,Fe.c,[l.ChangeDetectorRef,[2,Fe.a]],{value:[0,"value"]},null),l["ɵqud"](603979776,3,{_buttonToggles:1}),(e()(),l["ɵeld"](53,0,null,null,2,"mat-button-toggle",[["class","cardButton mat-button-toggle"],["value","cohort"]],[[2,"mat-button-toggle-standalone",null],[2,"mat-button-toggle-checked",null],[2,"mat-button-toggle-disabled",null],[2,"mat-button-toggle-appearance-standard",null],[1,"tabindex",0],[1,"id",0],[1,"name",0]],[[null,"change"],[null,"focus"]],(function(e,t,n){var a=!0,i=e.component;return"focus"===t&&(a=!1!==l["ɵnov"](e,54).focus()&&a),"change"===t&&(a=!1!==i.LoadFullCohortList("cohort")&&a),a}),Le.b,Le.a)),l["ɵdid"](54,245760,[[3,4]],0,Fe.b,[[2,Fe.c],l.ChangeDetectorRef,l.ElementRef,m.h,[8,null],[2,Fe.a]],{value:[0,"value"],disabled:[1,"disabled"]},{change:"change"}),(e()(),l["ɵted"](55,0,[" "," "])),(e()(),l["ɵeld"](56,0,null,null,2,"mat-button-toggle",[["class","cardButton mat-button-toggle"],["value","dependency"]],[[2,"mat-button-toggle-standalone",null],[2,"mat-button-toggle-checked",null],[2,"mat-button-toggle-disabled",null],[2,"mat-button-toggle-appearance-standard",null],[1,"tabindex",0],[1,"id",0],[1,"name",0]],[[null,"change"],[null,"focus"]],(function(e,t,n){var a=!0,i=e.component;return"focus"===t&&(a=!1!==l["ɵnov"](e,57).focus()&&a),"change"===t&&(a=!1!==i.LoadFullCohortList("dependency")&&a),a}),Le.b,Le.a)),l["ɵdid"](57,245760,[[3,4]],0,Fe.b,[[2,Fe.c],l.ChangeDetectorRef,l.ElementRef,m.h,[8,null],[2,Fe.a]],{value:[0,"value"],disabled:[1,"disabled"]},{change:"change"}),(e()(),l["ɵted"](58,0,[" "," "])),(e()(),l["ɵeld"](59,0,null,null,11,"div",[["class","col-md-2 top-nav-pd"]],null,null,null,null,null)),(e()(),l["ɵeld"](60,0,null,null,10,"ctos-context-menu",[],null,[[null,"fireEvent"]],(function(e,t,n){var l=!0;return"fireEvent"===t&&(l=!1!==e.component.KebabMenuClicked(n)&&l),l}),f.q,f.i)),l["ɵdid"](61,114688,[["menu",4]],0,s.nb,[],{contextMenuClass:[0,"contextMenuClass"],xPosition:[1,"xPosition"],yPosition:[2,"yPosition"],options:[3,"options"]},{fireEvent:"fireEvent"}),(e()(),l["ɵeld"](62,16777216,null,0,8,"button",[["aria-haspopup","true"],["class","mat-menu-trigger"],["mat-icon-button",""]],[[1,"aria-expanded",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var a=!0;return"mousedown"===t&&(a=!1!==l["ɵnov"](e,66)._handleMousedown(n)&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,66)._handleKeydown(n)&&a),"click"===t&&(a=!1!==l["ɵnov"](e,66)._handleClick(n)&&a),a}),z.b,z.a)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](64,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](65,{kebabMenu:0}),l["ɵdid"](66,1196032,null,0,Z.g,[c.c,l.ElementRef,l.ViewContainerRef,Z.c,[2,Z.d],[8,null],[2,g.b],m.h],{menu:[0,"menu"]},null),l["ɵdid"](67,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵeld"](68,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,ee.b,ee.a)),l["ɵdid"](69,9158656,null,0,te.b,[l.ElementRef,te.d,[8,null],[2,te.a],[2,l.ErrorHandler]],null,null),(e()(),l["ɵted"](-1,0,["more_vert"])),(e()(),l["ɵand"](16777216,null,null,1,null,tt)),l["ɵdid"](72,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,lt)),l["ɵdid"](74,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,at)),l["ɵdid"](76,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,20,0,n.showTotalRandomization),e(t,24,0,!n.fullCardEnable),e(t,26,0,0==n.cohortListArray.length&&!n.fullCardEnable),e(t,28,0,n.cohortListArray.length>0&&!n.fullCardEnable),e(t,32,0,n.fullCardEnable?"labels__header":"configCardHeader"),e(t,35,0,n.isAnyCohortLocked),e(t,39,0,n.selectedNode,n.model,n.isApprovedOrPreApprovedPlan?n.isApprovedOrPreApprovedPlan:n.isAnyCohortLocked),e(t,42,0,"cardView",n.fullCardEnable?"col-md-12":"col-md-3 m-0 p-0"),e(t,45,0,n.cohortListArray.length>0&&""!==n.enableCard),e(t,51,0,n.enableCard),e(t,54,0,"cohort",!n.fullCardEnable),e(t,57,0,"dependency",!n.fullCardEnable),e(t,61,0,n.kebabMenu,"after","below",n.optionsMenu);var a=e(t,65,0,n.fullCardEnable);e(t,64,0,a),e(t,66,0,l["ɵnov"](t,61).matMenu),e(t,69,0),e(t,72,0,"cohort"==n.enableCard),e(t,74,0,"dependency"==n.enableCard),e(t,76,0,""==n.enableCard)}),(function(e,t){var n=t.component;e(t,1,0,n.isAnyCohortLocked),e(t,5,0,n.cohortDesignLabels.COHORT_DESIGN.MANAGE_COHORTS),e(t,6,0,n.isApprovedOrPreApprovedPlan||n.isAnyCohortLocked),e(t,11,0,n.cohortDesignLabels.COHORT_DESIGN.SELECT_COHORTS),e(t,12,0,n.isApprovedOrPreApprovedPlan||n.isAnyCohortLocked),e(t,17,0,n.cohortDesignLabels.COHORT_DESIGN.ADD_DEPENDENCY),e(t,33,0,n.cohortDesignLabels.COHORT_DESIGN.CONFIGURATION_CARDS),e(t,37,0,n.hideCanvas),e(t,48,0,l["ɵnov"](t,51).disabled,l["ɵnov"](t,51).vertical,"standard"===l["ɵnov"](t,51).appearance),e(t,53,0,!l["ɵnov"](t,54).buttonToggleGroup,l["ɵnov"](t,54).checked,l["ɵnov"](t,54).disabled,"standard"===l["ɵnov"](t,54).appearance,-1,l["ɵnov"](t,54).id,null),e(t,55,0,n.cohortDesignLabels.COHORT_DESIGN.COHORT_CARD),e(t,56,0,!l["ɵnov"](t,57).buttonToggleGroup,l["ɵnov"](t,57).checked,l["ɵnov"](t,57).disabled,"standard"===l["ɵnov"](t,57).appearance,-1,l["ɵnov"](t,57).id,null),e(t,58,0,n.cohortDesignLabels.COHORT_DESIGN.DEPENDENCY_CARD),e(t,62,0,l["ɵnov"](t,66).menuOpen||null,l["ɵnov"](t,67).disabled||null,"NoopAnimations"===l["ɵnov"](t,67)._animationMode),e(t,68,0,l["ɵnov"](t,69).inline,"primary"!==l["ɵnov"](t,69).color&&"accent"!==l["ɵnov"](t,69).color&&"warn"!==l["ɵnov"](t,69).color)}))}function rt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","plan-design-tab-non-cohort"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),l["ɵted"](2,null,["",""]))],null,(function(e,t){e(t,2,0,t.component.cohortDesignLabels.COHORT_DESIGN.COHORTS_AVAILABLE_MSG)}))}function ot(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{planDesignCanvas:0}),l["ɵqud"](402653184,2,{fullCard:0}),(e()(),l["ɵand"](16777216,null,null,1,null,it)),l["ɵdid"](3,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,rt)),l["ɵdid"](5,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,3,0,n.isCohortPlan&&"Y"===n.isCohortPlan),e(t,5,0,n.isCohortPlan&&"N"===n.isCohortPlan)}),null)}function st(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"ctos-plan-design",[],null,null,null,ot,qe)),l["ɵprd"](512,null,ke,ke,[o.cb,s.S,s.h,s.M,s.R,V.a,u.DatePipe,R.a,A.e,s.D,Ge.a]),l["ɵprd"](512,null,Ve.a,Ve.a,[o.cb]),l["ɵprd"](512,null,xe.a,xe.a,[]),l["ɵprd"](512,null,Ke.a,Ke.a,[V.a,Ve.a,o.cb,o.ab,s.h,s.S,xe.a,o.J,u.DecimalPipe,u.DatePipe,s.M,s.R,o.e,y.a,o.O,A.e,v.n,Ge.a]),l["ɵdid"](5,245760,null,0,Ye,[R.a,A.e,ke,y.a,s.D,o.cb,A.e,Ke.a,s.M,pe.a,o.D,l.ChangeDetectorRef],null,null)],(function(e,t){e(t,5,0)}),null)}var ut=l["ɵccf"]("ctos-plan-design",Ye,st,{},{},[]),dt=n("EAoM"),ct=n("X7Hn"),pt=n("x8+N"),ht=function(){function e(){}return e.prototype.ngOnInit=function(){this.displayedColumns||(this.displayedColumns=[]),this.dataSource||(this.dataSource=[]),this.displayedColumns=Object.keys(this.dataSource[0])},e.prototype.getkeys=function(e){return Object.keys(e)},e.prototype.isObject=function(e){return"object"==typeof e},e}(),mt=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function gt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,dt.h,[ct.d,l.ElementRef],null,null),(e()(),l["ɵted"](2,null,["",""]))],null,(function(e,t){e(t,2,0,t.parent.context.$implicit.label)}))}function St(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","col"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.parent.parent.context.$implicit[t.parent.parent.parent.context.$implicit.key][t.context.$implicit])}))}function ft(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"span",[["class","col column-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,"span",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,St)),l["ɵdid"](4,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,4,0,t.component.getkeys(t.parent.context.$implicit[t.parent.parent.context.$implicit.key]))}),null)}function vt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","col"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" ",""]))],null,(function(e,t){e(t,1,0,t.parent.context.$implicit[t.parent.parent.context.$implicit.key])}))}function Ct(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵdid"](3,16384,null,0,dt.a,[ct.d,l.ElementRef],null,null),(e()(),l["ɵeld"](4,0,null,null,4,"span",[["class","cell-container row"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ft)),l["ɵdid"](6,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,vt)),l["ɵdid"](8,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,t.parent.context.$implicit.class),e(t,6,0,n.isObject(t.context.$implicit[t.parent.context.$implicit.key])),e(t,8,0,!n.isObject(t.context.$implicit[t.parent.context.$implicit.key]))}),null)}function yt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,13,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,12,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[dt.c]),l["ɵdid"](3,16384,null,3,dt.c,[],{name:[0,"name"]},null),l["ɵqud"](603979776,5,{cell:0}),l["ɵqud"](603979776,6,{headerCell:0}),l["ɵqud"](603979776,7,{footerCell:0}),l["ɵprd"](2048,[[1,4]],ct.d,null,[dt.c]),(e()(),l["ɵand"](0,null,null,2,null,gt)),l["ɵdid"](9,16384,null,0,dt.i,[l.TemplateRef],null,null),l["ɵprd"](2048,[[6,4]],ct.j,null,[dt.i]),(e()(),l["ɵand"](0,null,null,2,null,Ct)),l["ɵdid"](12,16384,null,0,dt.b,[l.TemplateRef],null,null),l["ɵprd"](2048,[[5,4]],ct.b,null,[dt.b])],(function(e,t){e(t,3,0,t.context.$implicit.key)}),null)}function Rt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"tr",[["class","mat-header-row"],["mat-header-row",""],["role","row"]],null,null,null,pt.f,pt.b)),l["ɵprd"](6144,null,ct.k,null,[dt.j]),l["ɵdid"](2,49152,null,0,dt.j,[],null,null)],null,null)}function Dt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"tr",[["class","mat-row"],["mat-row",""],["role","row"]],null,null,null,pt.g,pt.c)),l["ɵprd"](6144,null,ct.m,null,[dt.l]),l["ɵdid"](2,49152,null,0,dt.l,[],null,null)],null,null)}function Pt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,17,"div",[["class","cue-card-container-div"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"h5",[["class","ctos-card-header ctos-card-title"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Cohort Reference Card"])),(e()(),l["ɵeld"](3,0,null,null,14,"table",[["class","ctos-reference-card mat-table"],["mat-table",""]],null,null,null,pt.h,pt.d)),l["ɵprd"](6144,null,ct.o,null,[dt.n]),l["ɵdid"](5,2342912,null,4,dt.n,[l.IterableDiffers,l.ChangeDetectorRef,l.ElementRef,[8,null],[2,g.b],u.DOCUMENT,h.a],{dataSource:[0,"dataSource"]},null),l["ɵqud"](603979776,1,{_contentColumnDefs:1}),l["ɵqud"](603979776,2,{_contentRowDefs:1}),l["ɵqud"](603979776,3,{_contentHeaderRowDefs:1}),l["ɵqud"](603979776,4,{_contentFooterRowDefs:1}),(e()(),l["ɵand"](16777216,null,null,1,null,yt)),l["ɵdid"](11,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵand"](0,null,null,2,null,Rt)),l["ɵdid"](13,540672,null,0,dt.k,[l.TemplateRef,l.IterableDiffers],{columns:[0,"columns"]},null),l["ɵprd"](2048,[[3,4]],ct.l,null,[dt.k]),(e()(),l["ɵand"](0,null,null,2,null,Dt)),l["ɵdid"](16,540672,null,0,dt.m,[l.TemplateRef,l.IterableDiffers],{columns:[0,"columns"]},null),l["ɵprd"](2048,[[2,4]],ct.n,null,[dt.m])],(function(e,t){var n=t.component;e(t,5,0,n.dataSource),e(t,11,0,n.columnDefinition),e(t,13,0,n.displayedColumns),e(t,16,0,n.displayedColumns)}),null)}var bt=n("2tfK"),Et=n("0x2R"),Tt=n("SdtR"),At=n("QH8h"),It=n("QsvA"),_t=n("rW4h"),Nt=n("CRa1"),Ot=n("euho"),Mt=n("y7gG"),Ft=l["ɵcrt"]({encapsulation:2,styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px,0,0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px,0,0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}.mat-slide-toggle-bar,[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-right:8px;margin-left:0}.mat-slide-toggle-label-before .mat-slide-toggle-bar,[dir=rtl] .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0,0,0);transition:all 80ms linear;transition-property:transform;cursor:-webkit-grab;cursor:grab}.mat-slide-toggle-thumb-container.mat-dragging{transition-duration:0s}.mat-slide-toggle-thumb-container:active{cursor:-webkit-grabbing;cursor:grabbing}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media (hover:none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}@media (-ms-high-contrast:active){.mat-slide-toggle-thumb{background:#fff;border:1px solid #000}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background:#000;border:1px solid #fff}.mat-slide-toggle-bar{background:#fff}.mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:1px dotted;outline-offset:5px}}@media (-ms-high-contrast:black-on-white){.mat-slide-toggle-bar{border:1px solid #000}}"],data:{}});function Lt(e){return l["ɵvid"](2,[l["ɵqud"](671088640,1,{_thumbEl:0}),l["ɵqud"](671088640,2,{_thumbBarEl:0}),l["ɵqud"](671088640,3,{_inputElement:0}),(e()(),l["ɵeld"](3,0,[["label",1]],null,13,"label",[["class","mat-slide-toggle-label"]],[[1,"for",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,[[2,0],["toggleBar",1]],null,7,"div",[["class","mat-slide-toggle-bar"]],[[2,"mat-slide-toggle-bar-no-side-margin",null]],null,null,null,null)),(e()(),l["ɵeld"](5,0,[[3,0],["input",1]],null,0,"input",[["class","mat-slide-toggle-input cdk-visually-hidden"],["role","switch"],["type","checkbox"]],[[8,"id",0],[8,"required",0],[8,"tabIndex",0],[8,"checked",0],[8,"disabled",0],[1,"name",0],[1,"aria-checked",0],[1,"aria-label",0],[1,"aria-labelledby",0]],[[null,"change"],[null,"click"]],(function(e,t,n){var l=!0,a=e.component;return"change"===t&&(l=!1!==a._onChangeEvent(n)&&l),"click"===t&&(l=!1!==a._onInputClick(n)&&l),l}),null,null)),(e()(),l["ɵeld"](6,0,[[1,0],["thumbContainer",1]],null,5,"div",[["class","mat-slide-toggle-thumb-container"]],null,[[null,"slidestart"],[null,"slide"],[null,"slideend"]],(function(e,t,n){var l=!0,a=e.component;return"slidestart"===t&&(l=!1!==a._onDragStart()&&l),"slide"===t&&(l=!1!==a._onDrag(n)&&l),"slideend"===t&&(l=!1!==a._onDragEnd()&&l),l}),null,null)),(e()(),l["ɵeld"](7,0,null,null,0,"div",[["class","mat-slide-toggle-thumb"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,3,"div",[["class","mat-slide-toggle-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),l["ɵdid"](9,212992,null,0,ue.u,[l.ElementRef,l.NgZone,h.a,[2,ue.k],[2,Q.a]],{centered:[0,"centered"],radius:[1,"radius"],animation:[2,"animation"],disabled:[3,"disabled"],trigger:[4,"trigger"]},null),l["ɵpod"](10,{enterDuration:0}),(e()(),l["ɵeld"](11,0,null,null,0,"div",[["class","mat-ripple-element mat-slide-toggle-persistent-ripple"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,[["labelContent",1]],null,4,"span",[["class","mat-slide-toggle-content"]],null,[[null,"cdkObserveContent"]],(function(e,t,n){var l=!0;return"cdkObserveContent"===t&&(l=!1!==e.component._onLabelTextChange()&&l),l}),null,null)),l["ɵdid"](13,1196032,null,0,Mt.a,[Mt.b,l.ElementRef,l.NgZone],null,{event:"cdkObserveContent"}),(e()(),l["ɵeld"](14,0,null,null,1,"span",[["style","display:none"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),l["ɵncd"](null,0)],(function(e,t){var n=t.component,a=e(t,10,0,150);e(t,9,0,!0,20,a,n.disableRipple||n.disabled,l["ɵnov"](t,3))}),(function(e,t){var n=t.component;e(t,3,0,n.inputId),e(t,4,0,!l["ɵnov"](t,12).textContent||!l["ɵnov"](t,12).textContent.trim()),e(t,5,0,n.inputId,n.required,n.tabIndex,n.checked,n.disabled,n.name,n.checked.toString(),n.ariaLabel,n.ariaLabelledby),e(t,8,0,l["ɵnov"](t,9).unbounded)}))}var wt=function(){function e(){this.toggle=new l.EventEmitter}return Object.defineProperty(e.prototype,"checked",{set:function(e){this.isChecked=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.onChange=function(e){this.toggle.emit(e)},e}(),Gt=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function kt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"span",[["class","label-left"]],null,null,null,null,null)),(e()(),l["ɵted"](2,null,["",""]))],null,(function(e,t){e(t,2,0,t.component.leftDisplayText)}))}function Vt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"span",[["class","label-right"]],null,null,null,null,null)),(e()(),l["ɵted"](2,null,["",""]))],null,(function(e,t){e(t,2,0,t.component.rightDisplayText)}))}function xt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","toggle-btn-container"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,kt)),l["ɵdid"](2,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](3,0,null,null,2,"mat-slide-toggle",[["class","mat-slide-toggle"]],[[8,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null],[2,"_mat-animation-noopable",null]],[[null,"change"],[null,"focus"]],(function(e,t,n){var a=!0,i=e.component;return"focus"===t&&(a=!1!==l["ɵnov"](e,5)._inputElement.nativeElement.focus()&&a),"change"===t&&(a=!1!==i.onChange(n)&&a),a}),Lt,Ft)),l["ɵprd"](5120,null,x.q,(function(e){return[e]}),[Ot.b]),l["ɵdid"](5,1228800,null,0,Ot.b,[l.ElementRef,m.h,l.ChangeDetectorRef,[8,null],l.NgZone,Ot.a,[2,Q.a],[2,g.b]],{checked:[0,"checked"]},{change:"change"}),(e()(),l["ɵand"](16777216,null,null,1,null,Vt)),l["ɵdid"](7,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.leftDisplayText),e(t,5,0,!n.isChecked),e(t,7,0,n.rightDisplayText)}),(function(e,t){e(t,3,0,l["ɵnov"](t,5).id,l["ɵnov"](t,5).disabled?null:-1,null,null,l["ɵnov"](t,5).checked,l["ɵnov"](t,5).disabled,"before"==l["ɵnov"](t,5).labelPosition,"NoopAnimations"===l["ɵnov"](t,5)._animationMode)}))}var Kt=n("pnMH"),Ut=n("6RHh"),jt=l["ɵcrt"]({encapsulation:2,styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;min-height:48px;flex:1;overflow:hidden;word-wrap:break-word}.mat-nested-tree-ndoe{border-bottom-width:0}"],data:{}});function Bt(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{_nodeOutlet:0}),(e()(),l["ɵeld"](1,16777216,null,null,2,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,Kt.g,null,[Ut.g]),l["ɵdid"](3,16384,[[1,4]],0,Ut.g,[l.ViewContainerRef,[2,Kt.a]],null,null)],null,null)}var Wt=function(){return function(e,t,n,l,a,i){this.expandable=e,this.name=t,this.level=n,this.key=a,this.code=i}}(),Ht=function(){function e(){var e=this;this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.checklistSelection=new ae.c(!0),this.getLevel=function(e){return e.level},this.isExpandable=function(e){return e.expandable},this.getChildren=function(e){return e.countries},this.hasChild=function(e,t){return t.expandable},this.hasNoContent=function(e,t){return""===t.name},this.transformer=function(t,n){var l=e.nestedNodeMap.get(t),a=l&&l.name===t.name?l:new Wt;return a.name=t.name,a.level=n,a.key=t.key,a.code=t.code,a.expandable=!!t.countries,e.flatNodeMap.set(a,t),e.nestedNodeMap.set(t,a),a},this.treeFlattener=new Ut.c(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new Kt.j(this.getLevel,this.isExpandable),this.dataSource=new Ut.b(this.treeControl,this.treeFlattener)}return e.prototype.ngOnChanges=function(e){var t=this;if(e.data&&(this.dataSource.data=this.getFilteredData(this.searchText,JSON.parse(JSON.stringify(e.data.currentValue))),this.treeControl.expandAll(),this.checklistSelection=new ae.c(!0)),e.searchText)if(this.searchText=e.searchText.currentValue,this.searchText){var n=JSON.parse(JSON.stringify(this.data));n=n.filter((function(e){var n=e.countries.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.searchText.toLowerCase())}));return n.length>0&&(e.countries=n),n.length>0})),this.dataSource.data=JSON.parse(JSON.stringify(n)),this.treeControl.expandAll()}else this.dataSource.data=JSON.parse(JSON.stringify(this.data)),this.treeControl.expandAll()},e.prototype.getFilteredData=function(e,t){var n=this;return e?JSON.parse(JSON.stringify(t)).filter((function(e){var t=e.countries.filter((function(e){return-1!==e.name.toLowerCase().indexOf(n.searchText.toLowerCase())}));return t.length>0&&(e.countries=t),t.length>0})):t},e.prototype.descendantsAllSelected=function(e){var t=this;return this.treeControl.getDescendants(e).every((function(e){return t.checklistSelection.isSelected(e)}))},e.prototype.getSelectionList=function(){var e=this,t=new Array;return this.checklistSelection.selected.forEach((function(n){if(n.expandable&&0===n.level){var l={};l.name=n.name,l.key=n.key,l.code=n.code,l.countries=[],l.isSelected=!1,e.treeControl.getDescendants(n).forEach((function(t){e.checklistSelection.selected.indexOf(t)>-1&&l.countries.push({name:t.name,key:t.key,code:t.code,isSelected:!1})})),t.push(l)}})),t},e.prototype.descendantsPartiallySelected=function(e){var t=this;return this.treeControl.getDescendants(e).some((function(e){return t.checklistSelection.isSelected(e)}))&&!this.descendantsAllSelected(e)},e.prototype.countryItemSelectionToggle=function(e,t){var n,l,a=this;!0!==t.ctrlKey&&this.checklistSelection.clear(),this.checklistSelection.toggle(e);var i=this.treeControl.getDescendants(e);this.checklistSelection.isSelected(e)?(n=this.checklistSelection).select.apply(n,Ue.__spread(i)):(l=this.checklistSelection).deselect.apply(l,Ue.__spread(i)),i.every((function(e){return a.checklistSelection.isSelected(e)})),this.checkAllParentsSelection(e)},e.prototype.countryLeafItemSelectionToggle=function(e,t){!0!==t.ctrlKey&&this.checklistSelection.clear(),this.checklistSelection.toggle(e),this.checkAllParentsSelection(e)},e.prototype.checkAllParentsSelection=function(e){for(var t=this.getParentNode(e);t;)this.checkRootNodeSelection(t),t=this.getParentNode(t)},e.prototype.checkRootNodeSelection=function(e){var t=this,n=this.checklistSelection.isSelected(e),l=this.treeControl.getDescendants(e).some((function(e){return t.checklistSelection.isSelected(e)}));n&&!l?this.checklistSelection.deselect(e):!n&&l&&this.checklistSelection.select(e)},e.prototype.getParentNode=function(e){var t=this.getLevel(e);if(t<1)return null;for(var n=this.treeControl.dataNodes.indexOf(e)-1;n>=0;n--){var l=this.treeControl.dataNodes[n];if(this.getLevel(l)<t)return l}return null},e}(),Yt=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function qt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,12,"mat-tree-node",[["class","mat-tree-node"],["matTreeNodePadding",""],["matTreeNodeToggle",""]],[[1,"aria-expanded",0],[1,"aria-level",0],[1,"role",0]],[[null,"click"]],(function(e,t,n){var a=!0,i=e.component;return"click"===t&&(a=!1!==l["ɵnov"](e,6)._toggle(n)&&a),"click"===t&&(a=!1!==i.countryLeafItemSelectionToggle(e.context.$implicit,n)&&a),a}),null,null)),l["ɵprd"](6144,null,Kt.h,null,[Ut.h]),l["ɵprd"](6144,null,Kt.i,null,[Ut.i]),l["ɵdid"](3,16384,null,0,Ut.e,[l.ElementRef,Kt.c,[8,null]],null,null),l["ɵprd"](2048,null,Kt.e,null,[Ut.e]),l["ɵdid"](5,147456,null,0,Ut.h,[Kt.e,Kt.c,l.Renderer2,l.ElementRef,[2,g.b]],{level:[0,"level"],indent:[1,"indent"]},null),l["ɵdid"](6,16384,null,0,Ut.i,[Kt.c,Kt.e],null,null),(e()(),l["ɵeld"](7,0,null,null,1,"button",[["disabled",""],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,z.b,z.a)),l["ɵdid"](8,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],{disabled:[0,"disabled"]},null),(e()(),l["ɵeld"](9,0,null,null,3,"div",[["class","country-node"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](11,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵted"](12,null,["",""]))],(function(e,t){var n=t.component;e(t,5,0,"",0),e(t,8,0,""),e(t,11,0,"country-node",n.checklistSelection.isSelected(t.context.$implicit)?"selected":"")}),(function(e,t){e(t,0,0,l["ɵnov"](t,3).isExpanded,"treeitem"===l["ɵnov"](t,3).role?l["ɵnov"](t,3).level:null,l["ɵnov"](t,3).role),e(t,7,0,l["ɵnov"](t,8).disabled||null,"NoopAnimations"===l["ɵnov"](t,8)._animationMode),e(t,12,0,t.context.$implicit.name)}))}function Jt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,14,"mat-tree-node",[["class","mat-tree-node"],["matTreeNodePadding",""]],[[1,"aria-expanded",0],[1,"aria-level",0],[1,"role",0]],[[null,"click"]],(function(e,t,n){var l=!0,a=e.component;return"click"===t&&(a.descendantsAllSelected(e.context.$implicit),l=!1!==a.countryItemSelectionToggle(e.context.$implicit,n)&&l),l}),null,null)),l["ɵprd"](6144,null,Kt.h,null,[Ut.h]),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵdid"](4,16384,null,0,Ut.e,[l.ElementRef,Kt.c,[8,null]],null,null),l["ɵprd"](2048,null,Kt.e,null,[Ut.e]),l["ɵdid"](6,147456,null,0,Ut.h,[Kt.e,Kt.c,l.Renderer2,l.ElementRef,[2,g.b]],{level:[0,"level"]},null),(e()(),l["ɵeld"](7,0,null,null,6,"button",[["mat-icon-button",""],["matTreeNodeToggle",""]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var a=!0;return"click"===t&&(a=!1!==l["ɵnov"](e,9)._toggle(n)&&a),a}),z.b,z.a)),l["ɵprd"](6144,null,Kt.i,null,[Ut.i]),l["ɵdid"](9,16384,null,0,Ut.i,[Kt.c,Kt.e],null,null),l["ɵdid"](10,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵeld"](11,0,null,0,2,"mat-icon",[["class","mat-icon-rtl-mirror mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,ee.b,ee.a)),l["ɵdid"](12,9158656,null,0,te.b,[l.ElementRef,te.d,[8,null],[2,te.a],[2,l.ErrorHandler]],null,null),(e()(),l["ɵted"](13,0,[" "," "])),(e()(),l["ɵted"](14,null,[" "," "]))],(function(e,t){e(t,3,0,t.component.checklistSelection.isSelected(t.context.$implicit)?"selected":""),e(t,6,0,""),e(t,12,0)}),(function(e,t){var n=t.component;e(t,0,0,l["ɵnov"](t,4).isExpanded,"treeitem"===l["ɵnov"](t,4).role?l["ɵnov"](t,4).level:null,l["ɵnov"](t,4).role),e(t,7,0,"toggle "+t.context.$implicit.name,l["ɵnov"](t,10).disabled||null,"NoopAnimations"===l["ɵnov"](t,10)._animationMode),e(t,11,0,l["ɵnov"](t,12).inline,"primary"!==l["ɵnov"](t,12).color&&"accent"!==l["ɵnov"](t,12).color&&"warn"!==l["ɵnov"](t,12).color),e(t,13,0,n.treeControl.isExpanded(t.context.$implicit)?"expand_more":"chevron_right"),e(t,14,0,t.context.$implicit.name)}))}function Xt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,9,"mat-tree",[["class","mat-tree"],["role","tree"]],null,null,null,Bt,jt)),l["ɵprd"](6144,null,Kt.c,null,[Ut.a]),l["ɵdid"](2,2342912,null,1,Ut.a,[l.IterableDiffers,l.ChangeDetectorRef],{dataSource:[0,"dataSource"],treeControl:[1,"treeControl"]},null),l["ɵqud"](603979776,1,{_nodeDefs:1}),(e()(),l["ɵand"](0,null,null,2,null,qt)),l["ɵdid"](5,16384,null,0,Ut.f,[l.TemplateRef],null,null),l["ɵprd"](2048,[[1,4]],Kt.f,null,[Ut.f]),(e()(),l["ɵand"](0,null,null,2,null,Jt)),l["ɵdid"](8,16384,null,0,Ut.f,[l.TemplateRef],{when:[0,"when"]},null),l["ɵprd"](2048,[[1,4]],Kt.f,null,[Ut.f])],(function(e,t){var n=t.component;e(t,2,0,n.dataSource,n.treeControl),e(t,8,0,n.hasChild)}),null)}var zt=n("ut0E"),Zt=function(){function e(e,t,n){this.geographyService=e,this.planDetailsService=t,this.elRef=n,this.addCountries=new l.EventEmitter,this.bottom="unset",this.resources={},this.availableCountryRegions=[],this.selectedCountryRegions=[],this.showPanel=!1,this.existingCountries=[],this.subscriptions=[],this.displaySourceCountriesAlreadyPresent=!1,this.resources=e.getSelectCountriesLabels()}return e.prototype.ngOnInit=function(){var e=this;this.subscriptions.push(this.geographyService.availableCountriesChange.subscribe((function(t){e.availableCountryRegions=t}))),this.subscriptions.push(this.geographyService.selectedCountriesChange.subscribe((function(t){e.selectedCountryRegions=t})))},e.prototype.ngOnChanges=function(e){e.existingCountries&&this.geographyService.resetLists(e.existingCountries.currentValue)},e.prototype.toggleShowPanel=function(){this.showPanel=!this.showPanel,this.showPanel&&(this.bottom=this.elRef.nativeElement.offsetTop+730>window.innerHeight?"10px":"unset")},e.prototype.isOpen=function(){return this.showPanel},e.prototype.copyToSelected=function(){this.displaySourceCountriesAlreadyPresent=!1,this.geographyService.copyToSelected(this.availableCountriesTree.getSelectionList())},e.prototype.copyToAvailable=function(){this.displaySourceCountriesAlreadyPresent=!1,this.geographyService.copyToAvailable(this.selectedCountriesTree.getSelectionList())},e.prototype.copyAllToAvailable=function(){this.displaySourceCountriesAlreadyPresent=!1,this.geographyService.copyAllToAvailable()},e.prototype.copyAllToSelected=function(){this.displaySourceCountriesAlreadyPresent=!1,this.geographyService.copyAllToSelected()},e.prototype.pullFromSource=function(){var e=this;if(this.planDetailsService.getSourceCountries()&&0!==this.planDetailsService.getSourceCountries().length){var t=this.getFilteredSourceCountries(this.planDetailsService.getSourceCountries()),n=t.filter((function(e){return"Country"===e.geographyLevel}));this.displaySourceCountriesAlreadyPresent=n.length<=0,this.geographyService.pullFromSource(t)}else this.planDetailsService.getBriefPlanList().subscribe((function(t){var n=e.getFilteredSourceCountries(e.planDetailsService.getSourceCountries()),l=n.filter((function(e){return"Country"===e.geographyLevel}));e.displaySourceCountriesAlreadyPresent=l.length<=0,e.geographyService.pullFromSource(n)}))},e.prototype.getFilteredSourceCountries=function(e){var t=this;return e.filter((function(e){return-1===t.existingCountries.map((function(e){return e.geographyKey})).indexOf(e.geographyKey)}))},e.prototype.onAddCountriesClicked=function(){this.selectCountriesPanelToggle(),this.addCountries.emit(this.selectedCountryRegions),this.searchText="",this.geographyService.resetLists(this.existingCountries),this.displaySourceCountriesAlreadyPresent=!1},e.prototype.onCancelClicked=function(){this.searchText="",this.geographyService.resetLists(this.existingCountries),this.selectCountriesPanelToggle(),this.displaySourceCountriesAlreadyPresent=!1},e.prototype.selectCountriesPanelToggle=function(){this.showPanel=!this.showPanel,this.displaySourceCountriesAlreadyPresent=!1},e.prototype.ngOnDestroy=function(){this.geographyService.resetLists(),this.displaySourceCountriesAlreadyPresent=!1,this.subscriptions.forEach((function(e){e.unsubscribe()}))},e}(),$t=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Qt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","empty-pull-from-source"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.component.resources.NO_MORE_SOURCE_COUNTRIES)}))}function en(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,44,"div",[["class","country-select-container"]],[[4,"bottom",null]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"h4",[["class","select-country-title"]],null,null,null,null,null)),(e()(),l["ɵted"](2,null,["",""])),(e()(),l["ɵeld"](3,0,null,null,12,"div",[["class","row search-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,7,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"span",[["class","icon-search"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,5,"input",[["class","col-sm-10 search-box"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,7)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,7).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,7)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,7)._compositionEnd(n.target.value)&&a),"ngModelChange"===t&&(a=!1!==(i.searchText=n)&&a),a}),null,null)),l["ɵdid"](7,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵprd"](1024,null,x.q,(function(e){return[e]}),[x.e]),l["ɵdid"](9,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](11,16384,null,0,x.s,[[4,x.r]],null,null),(e()(),l["ɵeld"](12,0,null,null,3,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,2,"button",[["class","btn btn-pull-from-source"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.pullFromSource()&&l),l}),null,null)),(e()(),l["ɵeld"](14,0,null,null,0,"span",[["class","pull-from-source-icon"]],null,null,null,null,null)),(e()(),l["ɵted"](15,null,["",""])),(e()(),l["ɵeld"](16,0,null,null,19,"div",[["class","row country-list-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,5,"div",[["class","available-countries"],["id","available-countries"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,1,"div",[["class","list-header"]],null,null,null,null,null)),(e()(),l["ɵted"](19,null,["",""])),(e()(),l["ɵeld"](20,0,null,null,2,"div",[["class","list-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,1,"ctos-countries-tree",[],null,null,null,Xt,Yt)),l["ɵdid"](22,573440,[[1,4],["available",4]],0,Ht,[],{data:[0,"data"],listName:[1,"listName"],searchText:[2,"searchText"]},null),(e()(),l["ɵeld"](23,0,null,null,4,"div",[["class","actions"],["id","actions"]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,null,null,0,"div",[["class","btn-action btn-two-arrows-right"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.copyAllToSelected()&&l),l}),null,null)),(e()(),l["ɵeld"](25,0,null,null,0,"div",[["class","btn-action btn-arrow-right"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.copyToSelected()&&l),l}),null,null)),(e()(),l["ɵeld"](26,0,null,null,0,"div",[["class","btn-action btn-arrow-left"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.copyToAvailable()&&l),l}),null,null)),(e()(),l["ɵeld"](27,0,null,null,0,"div",[["class","btn-action btn-two-arrows-left"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.copyAllToAvailable()&&l),l}),null,null)),(e()(),l["ɵeld"](28,0,null,null,7,"div",[["class",""],["id","selected-countries"]],null,null,null,null,null)),(e()(),l["ɵeld"](29,0,null,null,1,"div",[["class","list-header"]],null,null,null,null,null)),(e()(),l["ɵted"](30,null,["",""])),(e()(),l["ɵeld"](31,0,null,null,4,"div",[["class","list-container"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Qt)),l["ɵdid"](33,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](34,0,null,null,1,"ctos-countries-tree",[],null,null,null,Xt,Yt)),l["ɵdid"](35,573440,[[2,4],["selected",4]],0,Ht,[],{data:[0,"data"],listName:[1,"listName"]},null),(e()(),l["ɵeld"](36,0,null,null,8,"mat-dialog-actions",[["class","mat-dialog-actions"]],null,null,null,null,null)),l["ɵdid"](37,16384,null,0,A.f,[],null,null),(e()(),l["ɵeld"](38,0,null,null,6,"div",[["class","row button-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](39,0,null,null,2,"div",[["class","col-sm-6 no-padding"]],null,null,null,null,null)),(e()(),l["ɵeld"](40,0,null,null,1,"button",[["class","ctos-btn ctos-btn-secondary"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onCancelClicked()&&l),l}),null,null)),(e()(),l["ɵted"](41,null,["",""])),(e()(),l["ɵeld"](42,0,null,null,2,"div",[["class","col-sm-6 no-padding"]],null,null,null,null,null)),(e()(),l["ɵeld"](43,0,null,null,1,"button",[["class","ctos-btn right ctos-btn-primary"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onAddCountriesClicked()&&l),l}),null,null)),(e()(),l["ɵted"](44,null,["",""]))],(function(e,t){var n=t.component;e(t,9,0,n.searchText),e(t,22,0,n.availableCountryRegions,"available_country",n.searchText),e(t,33,0,n.displaySourceCountriesAlreadyPresent),e(t,35,0,n.selectedCountryRegions,"selected_country")}),(function(e,t){var n=t.component;e(t,0,0,n.bottom),e(t,2,0,n.resources.SELECT_COUNTRIES),e(t,6,0,l["ɵinlineInterpolate"](1,"",n.resources.SEARCH_FOR_COUNTRIES,""),l["ɵnov"](t,11).ngClassUntouched,l["ɵnov"](t,11).ngClassTouched,l["ɵnov"](t,11).ngClassPristine,l["ɵnov"](t,11).ngClassDirty,l["ɵnov"](t,11).ngClassValid,l["ɵnov"](t,11).ngClassInvalid,l["ɵnov"](t,11).ngClassPending),e(t,15,0,n.resources.PULL_FROM_SOURCE),e(t,19,0,n.resources.AVAILABLE_COUNTRIES),e(t,30,0,n.resources.SELECTED_COUNTRIES),e(t,41,0,n.resources.CANCEL),e(t,44,0,n.resources.SAVE)}))}function tn(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{availableCountriesTree:0}),l["ɵqud"](402653184,2,{selectedCountriesTree:0}),(e()(),l["ɵeld"](2,0,null,null,2,"div",[["class","select-countries-container"],["id","countries-multiselect"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,en)),l["ɵdid"](4,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,4,0,t.component.showPanel)}),null)}var nn=n("+ZRC"),ln=n("fWMV"),an=n("o1p7"),rn=n("IK5s"),on=n("lVOy"),sn=n("DoxM"),un=n("R+ki"),dn=n("GD9e"),cn=function(e){return e.MCE_GRID="MCEGrid",e.MCE_GRID_ORDER="MCEGridOrder",e.MANAGECOUNTRIES_GRID="ManageCountriesGrid",e.MANAGECOUNTRIES_GRID_ORDER="ManageCountriesGridOrder",e}({}),pn=function(e){return e.VISIBLE="1",e.INVISIBLE="0",e}({}),hn=n("LiEJ"),mn=function(){function e(e){this.userDataService=e,this.DEFAULT_MCE_COL_VISIBILITY_PREFERENCE="1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1",this.DEFAULT_MCE_ORDER_PREF=[P.a.CHECKBOX,P.a.PLAN_STATUS,P.a.GEOGRAPHY_NAME,P.a.COUNTRY_OPTION_ID,P.a.GEOGRAPHY_REGION_NAME,P.a.IS_COHORT_EXCLUDED,P.a.COHORT_NAME,P.a.RT,P.a.SCREENING_TARGET,P.a.ARTB,P.a.PLSS,P.a.PLSR,P.a.OE,P.a.SR,P.a.RR,P.a.SFR,P.a.FPA,P.a.DAYS_TO_FSI,P.a.FSI,P.a.DAYS_TO_FSS,P.a.FSS,P.a.FIRST_SUBJECT_RANDOMIZED,P.a.NUM_SITES,P.a.RE_DIST_SITES,P.a.SAS,P.a.CALC_SAS,P.a.SI,P.a.SITE_COMP_ID,P.a.DAYS_TO_25,P.a.DAYS_TO_50,P.a.DAYS_TO_90,P.a.PROJECTED_RR,P.a.PROJECTED_SR,P.a.PROJECTED_SFR,P.a.PROJECTED_SAS],this.COLUMN_ORDER_SEPERATOR="|",this.COLUMN_VISIBILITY_SPERATOR="-",this.MCEColumnVisibilityPref=[],this.columnVisibilityPref={},this.MCE_COLUMN_ID_ARRAY=Object.values(P.a),this.userDataSubject=new hn.a(null),this.getUserData()}return e.prototype.getMCEPreference=function(){return this.userDataSubject.asObservable()},e.prototype.getUserData=function(){var e=this,t=this.userDataService.getUserData(o.bb).pipe(Object(un.a)(500)).subscribe((function(n){e.loadMCEColumnVisibilityPref(),e.loadMCEColumnOrderPref(),e.userDataSubject.next(n),t?(console.log("userDataSubscription is defined : ",n),t.unsubscribe()):console.log("userDataSubscription is undefined : ",n)}))},e.prototype.getColumnPreferencesForCountriesGrid=function(e){var t=null,n=this.getPrefForGridColumns();return dn.a.isDefined(n)&&(t=n[o.P.PreferenceGridColumns][e]),t},e.prototype.getPrefForGridColumns=function(){return JSON.parse(JSON.stringify(this.userDataService.getPreferencesByCategory(o.P.PreferenceGridColumns)))},e.prototype.loadMCEColumnVisibilityPref=function(){this.setMCEColumnVisibilityPref(this.getColumnPreferencesForCountriesGrid(cn.MCE_GRID))},e.prototype.loadMCEColumnOrderPref=function(){this.setMCEColumnOrderPref(this.getColumnPreferencesForCountriesGrid(cn.MCE_GRID_ORDER))},e.prototype.setMCEColumnVisibilityPref=function(e){var t=dn.a.isDefined(e)?e:this.DEFAULT_MCE_COL_VISIBILITY_PREFERENCE;this.MCEColumnVisibilityPref=t.split(this.COLUMN_VISIBILITY_SPERATOR),this.columnVisibilityPref={};for(var n=this.MCE_COLUMN_ID_ARRAY,l=0;l<this.MCEColumnVisibilityPref.length;l++)this.columnVisibilityPref[n[l]]=this.MCEColumnVisibilityPref[l]===pn.INVISIBLE},e.prototype.getMCEColumnVisibilityPref=function(){return this.columnVisibilityPref},e.prototype.updateColumnPreference=function(e,t){var n=this.MCE_COLUMN_ID_ARRAY.indexOf(e);if(-1!==n){this.MCEColumnVisibilityPref[n]=t?pn.VISIBLE:pn.INVISIBLE,console.log("updated pref string : ",this.constructMCEVisibilityGridPrefString());var l=this.constructMCEVisibilityGridPrefString();this.setMCEColumnVisibilityPref(l),this.sendUpdateColumnPrefRequest(l,cn.MCE_GRID)}else console.warn("Unknown Column "+e+" : Column is missing in MCEGridColumns Please add column id in MCEGridColumns and update DEFAULT_GRID_PREFERENCE")},e.prototype.getColumnVisibilityFromPref=function(e){var t=this.MCE_COLUMN_ID_ARRAY.indexOf(e);return this.MCEColumnVisibilityPref[t]===pn.VISIBLE},e.prototype.constructMCEVisibilityGridPrefString=function(){return this.MCEColumnVisibilityPref.join(this.COLUMN_VISIBILITY_SPERATOR)},e.prototype.sendUpdateColumnPrefRequest=function(e,t){var n=this,l=this.getPrefForGridColumns();l&&null!==l||(l=b.B),l[o.P.PreferenceGridColumns][t]=e;var a=this.userDataService.updatePreferencesByCategory(l).pipe(Object(un.a)(500)).subscribe((function(e){e&&n.refreshPreferenceData(),a?(console.log("updatePrefSubscription is defined : ",e),a.unsubscribe()):console.log("updatePrefSubscription is undefined : ",e)}))},e.prototype.refreshPreferenceData=function(){this.getUserData()},e.prototype.updateColumnPreferenceOnMoveColumn=function(e){var t=e.join(this.COLUMN_ORDER_SEPERATOR);this.setMCEColumnOrderPref(t),console.log("MCEGridPrefString : ",t),this.sendUpdateColumnPrefRequest(t,cn.MCE_GRID_ORDER)},e.prototype.setMCEColumnOrderPref=function(e){var t=dn.a.isDefined(e)?e:this.getDefaultColumnPref();this.MCEColumnOrderPref=t.split(this.COLUMN_ORDER_SEPERATOR)},e.prototype.isGridColumnChanged=function(e){for(var t=[P.a.CHECKBOX],n=e.split(this.COLUMN_ORDER_SEPERATOR),l=0;l<this.DEFAULT_MCE_ORDER_PREF.length;l++)if(!(t.indexOf(this.DEFAULT_MCE_ORDER_PREF[l])>-1)&&-1===n.indexOf(this.DEFAULT_MCE_ORDER_PREF[l]))return!0;return!1},e.prototype.getDefaultColumnPref=function(){return this.DEFAULT_MCE_ORDER_PREF.join(this.COLUMN_ORDER_SEPERATOR)},e.prototype.getMCEColumnOrderPref=function(){return this.MCEColumnOrderPref},e}(),gn=(n("5Ln5"),n("fU9P"),n("HY2n")),Sn=n("fQLH"),fn=n("pday"),vn=n("gX7u"),Cn=function(){function e(e,t,n,l,a,i){this.planDetailsService=e,this.localeAppResourcesService=t,this.fb=n,this.plansService=l,this.route=a,this.userDataService=i,this.dataSource=new hn.a([]),this.buttonsDisabled=!0,this.userActionData=null,this.countryDetailForm=new hn.a({}),this.planKeyChangedCount=0,this.countryKeyChangedCount=0,this.isCountrySlotRedistributed=!1,this.granularSlots=[],this.actualSlots=[],this.projectedSlots=[],this.responseData=new Sn.a,this.subscriptions=new Map,this.countryDetailsSubject=new hn.a({}),this.planPropertiesSubject=new hn.a({}),this.selectedCountryKeySubject=new hn.a(void 0),this.planPropertiesSubject=new hn.a({}),this._emptySIScheduleSubject=new hn.a(!1),this._applyToSISchedule=new Sn.a,this.fetchCountryDetailFormObject(),this.fetchPlanDetails(),this.observeSelectedCountryKey(),this.observeSelectedPlanKey()}return e.prototype.observeSelectedPlanKey=function(){var e=this,t=!1;if(!this.subscriptions.has("planKeyChangedSubscription")){var n=this.planDetailsService.onPlanKeyChanged$.subscribe((function(n){if(e.countryKeyChangedCount=0,e.selectedPlanKey=n,t=!0,e.planDetailsService.setReadOnly(!0),s.c.isDefined(n)&&!e.subscriptions.has("getCountryListSubscription")){var l=e.getCountryList().pipe(Object(fn.a)(750)).subscribe((function(n){if(t){var l=["/plans","plandetails",e.selectedPlanKey,"countries"],a=void 0;e.planDetailsService.saveCalled||e.planDetailsService.revertCalled?(e.planDetailsService.saveCalled=!1,e.planDetailsService.revertCalled=!1,e.planKeyChangedCount=e.planKeyChangedCount+1):e.planKeyChangedCount>0&&e.planKeyChangedCount--,(a=e.selectedCountryKeySubject.value)&&(l.push(a.toString()),l.push(e.activeSiMethod||"percent"),e.route.navigate(l),t=!1)}}));e.subscriptions.set("getCountryListSubscription",l)}}));this.subscriptions.set("planKeyChangedSubscription",n)}},e.prototype.observeSelectedCountryKey=function(){if(!this.subscriptions.has("selectedCountryKeySubjectSubscription")){var e=this.selectedCountryKeySubject.subscribe((function(e){console.log(e)}));this.subscriptions.set("selectedCountryKeySubjectSubscription",e)}},e.prototype.extractCountryDetails=function(e,t){var n=null;if(null!=t&&e&&e.hasOwnProperty("geoList")&&e.geoList.hasOwnProperty("geography")&&e.geoList.geography.length>0){var l=e.geoList.geography.filter((function(e){return e.geographyKey===t}));if(n=l.find((function(e){return!1===e.isCohortCountry}))){var a=l.filter((function(e){return!0===e.isCohortCountry}));n.cohortList=[].concat(a)}}return n},e.prototype.fetchPlanDetails=function(e){var t=this;if(e)this.planDetails=e,this.sourcePlanDetails=JSON.parse(JSON.stringify(e)),this.setPlanProperties(this.planDetails.planProperties),this.setHiddenPlanFormControls();else if(!this.subscriptions.has("getPlanDetailsSubscription")){var n=this.planDetailsService.getPlanDetails().subscribe((function(e){e&&(t.planDetails=e,t.setPlanProperties(e.planProperties),t.sourcePlanDetails=JSON.parse(JSON.stringify(e)),t.setHiddenPlanFormControls())}));this.subscriptions.set("getPlanDetailsSubscription",n)}},e.prototype.setHiddenPlanFormControls=function(){var e=this.countryDetailFormObject;if(this.planDetails&&e&&e.patchValue){var t={};if(this.planDetails.planProperties){var n=this.planDetails.planProperties.FSI;n&&(t.studyFSI=n);var l=this.planDetails.planProperties.LSS;l&&(t.TLSS=l);var a=!1;null!=this.planDetails.planProperties.isPlan&&(a=!this.planDetails.planProperties.isPlan),t.isAdjustment=a}e.patchValue(t)}},e.prototype.setHiddenCountryFormControls=function(e){var t=this.countryDetailFormObject,n=e;if(t&&t.patchValue&&n){var l={};if(l.ActualNumSite=b.sc.MIN_NUM_SITES,n.planParamsDetails&&n.planParamsDetails.isAdjustable&&n.planParamsDetails.actuals&&n.planParamsDetails.actuals.numSites){var a=n.planParamsDetails.actuals.numSites;a&&(l.ActualNumSite=a)}n.planParamsDetails&&n.planParamsDetails.hasOwnProperty("isAdjustable")&&(l.isAdjustable=n.planParamsDetails.isAdjustable),l.countryKey=n.geographyKey,l.countryName=n.geographyName,n.planParamsDetails&&n.planParamsDetails.actEnrlWhnSRMod&&(l.actEnrlWhnSRMod=n.planParamsDetails.actEnrlWhnSRMod?n.planParamsDetails.actEnrlWhnSRMod:b.yc),n.planParamsDetails&&n.planParamsDetails.actEnrlWhnSRMod&&(l.actEnrlWhnSRMod=n.planParamsDetails.actEnrlWhnSRMod?n.planParamsDetails.actEnrlWhnSRMod:b.yc),n.planParamsDetails&&n.planParamsDetails.actEnrlWhnSFRMod&&(l.actEnrlWhnSFRMod=n.planParamsDetails.actEnrlWhnSFRMod?n.planParamsDetails.actEnrlWhnSFRMod:b.yc),n.planParamsDetails&&n.planParamsDetails.dateSRMod&&(l.dateSRMod=n.planParamsDetails.dateSRMod?n.planParamsDetails.dateSRMod:b.M),n.planParamsDetails&&n.planParamsDetails.dateSFRMod&&(l.dateSFRMod=n.planParamsDetails.dateSFRMod?n.planParamsDetails.dateSFRMod:b.M),t.patchValue(l)}},e.prototype.fetchCountryDetailFormObject=function(){var e=this;if(!this.subscriptions.has("getCountryDetailFormSubscription")){var t=this.getCountryDetailForm().subscribe((function(t){e.countryDetailFormObject=t,e.updateFormValues()}));this.subscriptions.set("getCountryDetailFormSubscription",t)}},e.prototype.updateFormValues=function(){this.setHiddenPlanFormControls(),this.setHiddenCountryFormControls()},e.prototype.setCountryDetails=function(e){if(this.selectedCountryDetails=e,void 0!==e&&null!=e){var t=JSON.parse(JSON.stringify(e));if(this.isCountrySlotRedistributed=!1,this.actualSlots=[],this.projectedSlots=[],t.planParamsDetails&&t.planParamsDetails.centerInitInfo){var n=t.planParamsDetails.centerInitInfo,l=n&&n.granularCenterInitInfo?n.granularCenterInitInfo:null;if(l&&l.centerInitSlot&&(this.granularSlots=[],!1===Array.isArray(l.centerInitSlot)?this.granularSlots.push(l.centerInitSlot):this.granularSlots=l.centerInitSlot,this.granularSlots.length>0)){var a=this.granularSlots.filter((function(e){return!0===e.redistributed}));a.length>0&&(t.planParamsDetails.centerInitInfo.granularCenterInitInfo.centerInitSlot=a);var i=this.granularSlots.filter((function(e){return e.slotType===b.cc.REDISTRIBUTED}));this.isCountrySlotRedistributed=i.length>0,this.actualSlots=this.granularSlots.filter((function(e){return e.slotType===b.cc.ACTUAL})),this.projectedSlots=this.granularSlots.filter((function(e){return e.slotType!==b.cc.ACTUAL}))}}this.countryDetailsSubject.next(t)}else this.countryDetailsSubject.next({})},e.prototype.getCountryDetails=function(){return this.countryDetailsSubject.asObservable()},e.prototype.setSelectedCountryKey=function(e){this.selectedCountryKeySubject.next(e)},e.prototype.getCountryList=function(){var e=this;return this.planDetailsService.getPlanDetails().pipe(Object(we.a)((function(t){if(t&&t.hasOwnProperty("geoList")&&t.geoList.hasOwnProperty("geography")&&t.geoList.geography.length>0){var n=[];return t.geoList.geography.reduce((function(n,l){return 0===l.geographyKey||l.isCohortCountry||n.push({countryKey:l.geographyKey,countryName:l.geographyName,countryImageStatus:e.getCountryImageStatus(l,t.planProperties.isPlan)}),n}),n),n.sort((function(e,t){return e.countryName.localeCompare(t.countryName)}))}return new Array})))},e.prototype.getCountryImageStatus=function(e,t){return e&&e.hasOwnProperty("planParamsDetails")&&e.planParamsDetails.hasOwnProperty("planStatus")&&void 0!==e.planParamsDetails.planStatus.value?this.plansService.getPlanStatusImg(t?vn.b.BASE:vn.b.ADJ,e.planParamsDetails.planStatus.value):t?b.kb.STATUS.INVALID:b.kb.STATUS.ADJUSTMENT.INVALID},e.prototype.setCountryDetailForm=function(e){this.countryDetailForm.next(e),this.planDetailsService.updatePlanCommandObj=e},e.prototype.getCountryDetailForm=function(){return this.countryDetailForm.asObservable()},e.prototype.createCountryDetailForm=function(){this.setCountryDetailForm(this.fb.group({siHeader:this.fb.group({siMethod:[""],reRandomize:[""],siteInitiationMethod:[""],siteInitiationSubMethod:[""]}),siBody:this.fb.group({siField:this.fb.group({totalNoOfSites:["",x.B.required],uninitiatedSite:[{value:"",disabled:!0}],sitesToRedistribute:[""],FSIDate:["",x.B.required],sitesToRedistributeMinValue:[""],sitesToRedistributeMaxValue:[""]}),siMethod:this.fb.group({noOfSite25:[""],period25:[""],endDate25:[""],noOfSite50:[""],period50:[""],endDate50:[""],noOfSite90:[""],period90:[""],endDate90:[""]}),siCustomMethod:this.fb.group({initiationSchedule:this.fb.array([])})}),enrolmentParameters:this.createEnrolmentParametersFormgroup(),studyFSI:[""],TLSS:[""],ActualNumSite:[b.sc.MIN_NUM_SITES],isAdjustment:[""],isAdjustable:[""],countryKey:[""],countryName:[""],actEnrlWhnSRMod:[""],dateSRMod:[""],actEnrlWhnSFRMod:[""],dateSFRMod:[""],cohortEnrollmentParameters:this.fb.group({}),cohortList:this.fb.group({})}))},e.prototype.setCountryDetailFormValidators=function(e,t,n){if(e&&e.get&&t&&n&&n.planParamsDetails){if(e.get("siHeader.siMethod")&&e.get("siHeader.siMethod").setValidators([]),e.get("siBody.siMethod")){var l=e.get("siBody.siMethod");l.get("period25")&&l.get("period25").setValidators([x.B.required,x.B.max(b.sc.MAX_PERIOD_25)]),l.get("period50")&&l.get("period50").setValidators([x.B.required,x.B.max(b.sc.MAX_PERIOD_50)]),l.get("period90")&&l.get("period90").setValidators([x.B.required,x.B.max(b.sc.MAX_PERIOD_90)])}if(e.get("siBody")&&e.get("siBody.siField")){var a=e.get("siBody.siField");a.get("totalNoOfSites")&&a.get("totalNoOfSites").setValidators([x.B.required])}e.get("siBody.siField")&&e.get("siBody.siField").setValidators([Object(o.R)("sitesToRedistribute","sitesToRedistributeMinValue",!1,"sitesToRedistributeMaxValue",!1)]),e.get("siBody.siCustomMethod.initiationSchedule")&&e.get("siBody.siCustomMethod.initiationSchedule").setValidators(Object(o.g)(["slotStartDate","slotEndDate","noOfCenters"],this.getBlankFieldValidationMsg())),this.isValidationOnTotalSites(n.planParamsDetails,t)?e.get("siBody.siField.sitesToRedistribute").clearValidators():e.get("siBody.siField.sitesToRedistribute").setValidators(x.B.required);var i=this.plansService.isCohortStudy(),r=this.isValidationOnTotalSites(n.planParamsDetails,t);e.setValidators([Object(o.y)("siBody.siField.FSIDate","studyFSI",!1,"TLSS",!1,"isAdjustment",!1,"isAdjustable",!1,i),Object(o.z)("enrolmentParameters.FSS","siBody.siField.FSIDate",!1),Object(o.R)("siBody.siField.totalNoOfSites","ActualNumSite",!1,b.sc.MAX_NUM_SITES,!0),Object(o.v)("siBody.siMethod.period25",0,void 0,void 0,"siBody.siMethod.period50",!1),Object(o.v)("siBody.siMethod.period50",0,"siBody.siMethod.period25",!1,"siBody.siMethod.period90",!1),Object(o.v)("siBody.siMethod.period90",0,"siBody.siMethod.period50",!1,void 0,void 0,"siBody.siMethod.endDate90",!1,"TLSS",!1),Object(o.c)("siBody.siMethod.period90",["siBody.siMethod.period25","siBody.siMethod.period50","siBody.siMethod.period90"],!1),Object(o.X)(r?"siBody.siField.totalNoOfSites":"siBody.siField.sitesToRedistribute","siBody.siCustomMethod.initiationSchedule","noOfCenters",this.getValidationMsg(r)),Object(o.s)("siBody.siCustomMethod.initiationSchedule","slotStartDate","slotEndDate","siBody.siField.FSIDate","TLSS",this.getValidationMsg_Dates(),this.isCohortPlan({planProperties:t}))])}},e.prototype.isValidationOnTotalSites=function(e,t){return!this.planDetails.planProperties.isPlan&&"Y"===this.planDetails.planProperties.isCohortPlan||!e.isAdjustable||this.isCohortPlan({planProperties:t})},e.prototype.getPlanProperties=function(){return this.planPropertiesSubject.asObservable()},e.prototype.setPlanProperties=function(e){void 0!==e&&null!=e?(e.cohortList&&e.cohortList.cohortPlanParams&&(e.cohortList.cohortPlanParams=[].concat(e.cohortList.cohortPlanParams)),this.planPropertiesSubject.next(e)):this.planPropertiesSubject.next({})},e.prototype.checkModulePrivilege=function(e){return this.userDataService.checkModulePrivilege(e)},e.prototype.getValidationMsg=function(e){return{totalNotEqual:this.localeAppResourcesService.getResource(e?"totalNotEqualPlan":"totalNotEqualAdj"),allZero:this.localeAppResourcesService.getResource("allZero")}},e.prototype.getValidationMsg_Dates=function(){return{beforeCurrStartDate:this.localeAppResourcesService.getResource("beforeCurrStartDate"),afterPrevEndDate:this.localeAppResourcesService.getResource("afterPrevEndDate"),afterNextStartDate:this.localeAppResourcesService.getResource("afterNextStartDate"),beforeFSIDate:this.localeAppResourcesService.getResource("beforeFSIDate"),afterLSSDate:this.localeAppResourcesService.getResource("afterLSSDate")}},e.prototype.getBlankFieldValidationMsg=function(){return{BLANK_FIELD:this.localeAppResourcesService.getResource("CSI_BLANK_FIELD")}},e.prototype.isPlanNonEditable=function(e,t,n){void 0===n&&(n=!0);var l=!1;if(e&&(l=l||this.isNotEnrollingPlan(e)),t&&(l=l||this.isCountryLocked(t)),n){var a=this.checkModulePrivilege(b.L);l=l||!a}return e&&t&&(l=l||gn.a.hasAchievedALSR(e,t)),l},e.prototype.isNotEnrollingPlan=function(e){return e&&(e.isReadOnly||e.isPlanApproved||e.isPrevApproved)},e.prototype.isCountryLocked=function(e){return e&&e.planParamsDetails&&e.planParamsDetails.isCountryLocked},e.prototype.createEnrolmentParametersFormgroup=function(){return this.fb.group({enrollmentTarget:[""],overRecruitmentPercent:[""],maximumEnrollment:[{value:"",disabled:!0}],ARTB:[""],solvedLSR:[{value:"",disabled:!0}],SR:[""],SFR:[""],RR:[""],numSites:[{value:"",disabled:!0}],ARC:[""],activeSites:[{value:"",disabled:!0}],calcSAS:[{value:"",disabled:!0}],FSS:[""],SITOFSSDAYS:[""],avgDaysToSiteInit:[{value:"",disabled:!0}],projSR:[{value:"",disabled:!0}],projSFR:[{value:"",disabled:!0}],projRR:[{value:"",disabled:!0}],projARC:[{value:"",disabled:!0}]})},e.prototype.fetchCohortList=function(e){var t=[];return e&&e.cohortList&&e.cohortList.cohortPlanParams&&(t=e.cohortList.cohortPlanParams),t},e.prototype.isCohortPlan=function(e){var t=!1;return e&&e.planProperties&&(t=e.planProperties.isCohortPlan===b.N.COHORT_PLAN||!0===e.planProperties.isCohortPlan),t},e.prototype.getMaxRowsAllowed=function(e){return this.plansService.getMaxRowsAllowed(e)},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){e.unsubscribe()})),this.subscriptions=null,this.route=null},e}(),yn=function(){function e(e,t,n,l){this.dialogRef=e,this.siCustomData=t,this.localeAppResourcesService=n,this.siCustomService=l,this.subscriptions=new Map}return e.prototype.ngOnInit=function(){void 0!==this.siCustomData&&(this.showCheckBox=this.siCustomData.showCheckBox,this.siCustomService.fetchPlanDetails(this.siCustomData.planDetails)),this.checked=!1,this.siLabels=this.getSILabels(),this.setSICustomForm(),this.setSelectedCountryKey(),this.setSiCustomSchedulerData(),this.setPlanPropertiesData(),this.setSchedulerDetails(),this.setSiCustomSchedulerControls(),this.okEnability()},e.prototype.setSiCustomSchedulerData=function(){this.siCustomSchedulerData={}},e.prototype.setPlanPropertiesData=function(){var e=this;if(!this.subscriptions.has("PlanPropertiesSubscription")){var t=this.siCustomService.getPlanProperties().subscribe((function(t){t&&null!=t.isPlan&&e.updateSiCustomSchedulerDataPlanProperties(t)}));this.subscriptions.set("PlanPropertiesSubscription",t)}},e.prototype.updateSiCustomSchedulerDataPlanProperties=function(e){this.siCustomSchedulerData.planProperties=e,this.siCustomSchedulerData.maxRowsAllowed=this.getMaxRowsAllowed(),this.siCustomSchedulerData.cohortList=this.siCustomService.fetchCohortList(e)},e.prototype.getMaxRowsAllowed=function(){return this.siCustomService.getMaxRowsAllowed(this.isCohortPlan())},e.prototype.isCohortPlan=function(){return gn.a.isCohortPlan(this.siCustomSchedulerData.planProperties)},e.prototype.setSiCustomSchedulerControls=function(){var e=this.countryDetailsForm.get("siBody");this.siCustomSchedulerControls={totalNoOfSites:e.get("siField.totalNoOfSites"),uninitiatedSite:e.get("siField.uninitiatedSite"),sitesToRedistribute:e.get("siField.sitesToRedistribute"),FSIDate:e.get("siField.FSIDate"),initiationSchedule:e.get("siCustomMethod.initiationSchedule"),containerFormGroup:e,sitesToRedistributeMinValue:e.get("siField.sitesToRedistributeMinValue"),sitesToRedistributeMaxValue:e.get("siField.sitesToRedistributeMaxValue")}},e.prototype.setSchedulerDetails=function(){var e=this;if(!this.subscriptions.has("GetSchedulerSubscription")){var t=this.siCustomService.getCountryDetails().subscribe((function(t){t.planParamsDetails&&(e.resetSIMethod(),e.siCustomService.includedCohorts=gn.a.fetchIncludedCohorts(t),e.siCustomService.setCountryDetailFormValidators(e.countryDetailsForm,e.siCustomSchedulerData.planProperties,t),e.isFormDisabled=!!e.siCustomService.isPlanNonEditable(e.siCustomSchedulerData.planProperties,e.siCustomSchedulerData.countryDetails),e.updateSiCustomSchedulerDataCountryDetails(t))}));this.subscriptions.set("GetSchedulerSubscription",t)}},e.prototype.updateButtonStatus=function(e){this.customSivForm=e.customSivForm,this.buttonEnability=e.buttonStatus,!this.showCheckBox&&this.customSivForm.dirty?this.enableOkButton=e.buttonStatus:this.checked&&(this.enableOkButton=e.buttonStatus)},e.prototype.onCheckboxChange=function(){this.enableOkButton=!(!this.checked||!this.buttonEnability)},e.prototype.cancel=function(){this.dialogRef.close()},e.prototype.ok=function(){this.dialogRef.close({action:this.siLabels.OK,customForm:this.customSivForm,cohortNumSites:this.cohortNumSites})},e.prototype.getSILabels=function(){return{OK:this.localeAppResourcesService.getResource("OK"),Cancel:this.localeAppResourcesService.getResource("Cancel"),CUSTOM_SITE_INITIATION:this.localeAppResourcesService.getResource("MCECustomSITitle"),CUSTOM_OVERRIDE_MESSAGE:this.localeAppResourcesService.getResource("MCESiteOverrideMessageCustom")}},e.prototype.updateSites=function(e){e&&this.updateCohortCountryNumSites(e)},e.prototype.updateCohortCountryNumSites=function(e){var t=this;this.siCustomSchedulerData.planProperties&&this.siCustomSchedulerData.planProperties.cohortList&&(this.cohortNumSites=[],this.siCustomSchedulerData.planProperties.cohortList.cohortPlanParams.map((function(n){if(t.siCustomSchedulerData.planProperties.cohortList.cohortPlanParams.length>0){var l=n.cohortKey,a=0;l&&(e.forEach((function(e){e&&e.usedCohortKeys&&e.usedCohortKeys.toString().toLowerCase()!==b.g.toLowerCase()&&e.noOfCenters?-1!==e.usedCohortKeys.toString().split(",").indexOf(l.toString())&&(a+=parseInt(e.noOfCenters.toString(),10)):e.noOfCenters&&(a+=parseInt(e.noOfCenters.toString(),10))})),t.cohortNumSites.push({cohortKey:l,numSites:a}))}})))},e.prototype.triggerChangeOfUsedCohortKeys=function(){},e.prototype.setSICustomForm=function(){var e=this;if(!this.subscriptions.has("SIcustomFormSubscription")){this.siCustomService.createCountryDetailForm();var t=this.siCustomService.getCountryDetailForm().subscribe((function(t){e.countryDetailsForm=t;var n=t.get("siBody"),l=t.get("siHeader");n.get("siField").addControl("subHeaderForm",l),t&&t.get("siBody.siMethod")&&s.c.resetFormErrors(t.get("siBody.siMethod"))}));this.subscriptions.set("SIcustomFormSubscription",t)}},e.prototype.resetSIMethod=function(){this.countryDetailsForm&&this.countryDetailsForm.get("siBody")&&this.countryDetailsForm.get("siBody").get("siMethod")&&s.c.resetFormErrors(this.countryDetailsForm.get("siBody").get("siMethod"))},e.prototype.updateSiCustomSchedulerDataCountryDetails=function(e){this.siCustomSchedulerData.countryDetails=e,this.siCustomSchedulerData.dataSource=this.siCustomService.dataSource,this.siCustomSchedulerData.includedCohorts=this.siCustomService.includedCohorts},e.prototype.okEnability=function(){var e=this;if(!this.subscriptions.has("formStatusChangeSubscription")){var t=this.countryDetailsForm;if(t){var n=t.statusChanges.subscribe((function(n){e.enableOk=!(!t.valid||e.isFormDisabled),e.updateButtonStatus({buttonStatus:e.enableOk,customSivForm:t})}));this.subscriptions.set("formStatusChangeSubscription",n)}}},e.prototype.setSelectedCountryKey=function(){if(this.siCustomService.setSelectedCountryKey(this.siCustomData.countryKey),this.siCustomData.countryDetails.cohortList)this.siCustomService.setCountryDetails(this.siCustomData.countryDetails);else{var e=this.siCustomService.extractCountryDetails(this.siCustomData.planDetails,this.siCustomData.countryKey);this.siCustomData.countryDetails.cohortList=e.cohortList,this.siCustomService.setCountryDetails(this.siCustomData.countryDetails)}this.siCustomService.setHiddenCountryFormControls(this.siCustomData.countryDetails)},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){e.unsubscribe()}))},e}(),Rn=function(){function e(e,t){this.dialogRef=e,this.countryLogProp=t}return e.prototype.ngOnInit=function(){},e.prototype.ok=function(){this.dialogRef.close()},e}(),Dn=n("qy3m"),Pn=function(){function e(e,t,n){this.localAppResources=e,this.geographyService=t,this.planService=n}return e.prototype.getStudyTargetAndWorldWide=function(){return{Study_Target:this.localAppResources.getResource("STUDY_TARGET"),WW:this.localAppResources.getResource("WORLD_WIDE")}},e.prototype.isActualOrProject=function(e){var t=e.data.label;return!(!t||t!==Dn.a.ACTUALS&&t!==Dn.a.PROJECTED)},e.prototype.isParentPlan=function(e){var t=e.data.label;return t&&t===Dn.a.PARENT},e.prototype.isStudyTargetRow=function(e){var t=e.data.label;return t&&t===Dn.a.STUDY_TARGET},e.prototype.isWorldWideRow=function(e){var t=e.data.geographyLevel;return t&&t===b.db.WW},e.prototype.getCohortName=function(e){return e.isMCGrid?!e.data.isCohortCountry||this.isActualOrProject(e)||this.isParentPlan(e)?"":e.data.cohortName:e.data.isCohortCountry?e.data.cohortName:"All Cohorts"},e.prototype.getCountryAndCohortData=function(e,t,n){var l=[].concat(e.geoList.geography).filter((function(e){return e.label!==Dn.a.PROJECTED&&e.label!==Dn.a.ACTUALS&&(t&&n?e.geographyKey===t&&e.isCohortCountry&&e.cohortKey===n:e.geographyKey===t&&!e.isCohortCountry)}));return l&&l[0]?l[0]:l},e.prototype.getRegionByCountry=function(e){var t=this.geographyService.getRegionByCountry(e);return t?t.name:""},Object.defineProperty(e.prototype,"isRTypeCohortStudy",{get:function(){return this.planService.isRTypeCohortStudy()},enumerable:!0,configurable:!0}),e}(),bn=n("Ws1Q"),En=function(){function e(e,t,n,l,a,i){this.dialog=e,this.countriesGridService=t,this.planDetailsService=n,this.appDataService=l,this.manageCountriesService=a,this.localAppResources=i,this.rowLabel=Dn.a,this.isExcludeCohortCountryForMcGrid=!1,this.showStatusIcons=!0}return e.prototype.ngOnInit=function(){},e.prototype.agInit=function(e){this.params=e,this.planKey=e.planKey,this.router=e.router,this.toShowExpandCollapse="Y"===e.data.isCohortCountry,this.countryMetaData={countryKey:e.data.geographyKey,countryName:e.data.geographyName,userId:this.countriesGridService.getUserId(),userName:this.countriesGridService.getUserName(),hasEditAccess:this.countriesGridService.hasEditAccess(),countryLogResources:this.countriesGridService.getCountryLogResources(),countryNotesResources:this.countriesGridService.getCountryNotesResources(),isLockEnabled:!1===e.data.isCohortCountry&&this.isCountryLockEnable()&&!this.countriesGridService.isWWorStudyTarget(e),lockStatus:!(!e.data.planParamsDetails||!e.data.planParamsDetails.isCountryLocked),isNoteEnabled:!e.data.isCohortCountry&&!this.countriesGridService.isWWorStudyTarget(e),noteStatus:e.data.planParamsDetails&&e.data.planParamsDetails.noteList&&e.data.planParamsDetails.noteList.note&&0!==e.data.planParamsDetails.noteList.note.length,rateAdjustmentStatus:!!(e.data.planParamsDetails&&e.data.planParamsDetails.rateAdjustmentsTable&&e.data.planParamsDetails.rateAdjustmentsTable.rateAdjustment&&e.data.planParamsDetails.rateAdjustmentsTable.rateAdjustment.length>0),isEdited:e.data.isEdited,isNewCountry:e.data.isNewCountry,isCohortCountry:e.data.isCohortCountry,isCohortExcluded:e.data.isCohortExcluded,isSelectedCohort:e.data.isSelectedCohort,isEditablePlan:e.isEditablePlan,isWWorStudyTarget:this.countriesGridService.isWWorStudyTarget(e),invalidParams:this.getInvalidParamsOfGrid(e)},this.setNoteIcon(),this.setLockIcon(),this.setShowAdjustment(),e.mcGrid&&this.setFlagsForMCGrid()},e.prototype.setFlagsForMCGrid=function(){this.isActualOrProjectRow=!!this.manageCountriesService.isActualOrProject(this.params),this.isParentPlan=this.manageCountriesService.isParentPlan(this.params),this.isStudyTargetRow=this.manageCountriesService.isStudyTargetRow(this.params),(this.manageCountriesService.isActualOrProject(this.params)||this.manageCountriesService.isStudyTargetRow(this.params)||this.manageCountriesService.isWorldWideRow(this.params)||this.isParentPlan)&&(this.showStatusIcons=!1),this.isExcludeCohortCountryForMcGrid=!!(this.countryMetaData.isCohortCountry||this.manageCountriesService.isActualOrProject(this.params)||this.manageCountriesService.isStudyTargetRow(this.params)||this.manageCountriesService.isWorldWideRow(this.params)||this.isParentPlan)},e.prototype.isCountryLockEnable=function(){return!!(this.appDataService&&this.appDataService.appDataResponse&&this.appDataService.appDataResponse.appMetadata&&this.appDataService.appDataResponse.appMetadata.isCountryLockEnable)&&this.appDataService.appDataResponse.appMetadata.isCountryLockEnable},e.prototype.hasNotes=function(){return Array.isArray(this.params.data.planParamsDetails.noteList.note)?this.params.data.planParamsDetails.noteList.note.filter((function(e){return e.indicator!==b.lb.DELETE})).length>1:this.params.data.planParamsDetails.noteList&&this.params.data.planParamsDetails.noteList.note&&this.params.data.planParamsDetails.noteList.note.indicator&&this.params.data.planParamsDetails.noteList.note.indicator!==b.lb.DELETE},e.prototype.getLock=function(){return this.countryMetaData&&!0===this.countryMetaData.lockStatus?"icon-locked":"icon-unlocked"},e.prototype.getNotes=function(){return this.countryMetaData&&!0===this.countryMetaData.noteStatus?"icon-comments":"icon-no-comments"},e.prototype.getAdjustments=function(){return!(!this.countryMetaData||!this.countryMetaData.rateAdjustmentStatus)},e.prototype.setShowAdjustment=function(){this.showAdjustment=this.getAdjustments()},e.prototype.showCountryLogPopup=function(){var e=this.dialog.open(Rn,{width:b.F.COUNTRY_LOG.WIDTH,data:{logList:this.params.data.planParamsDetails.logList&&this.params.data.planParamsDetails.logList.loginfo?[].concat(this.params.data.planParamsDetails.logList.loginfo):[],resources:this.countryMetaData.countryLogResources},panelClass:b.F.CREATE_TEMPLATE.PANEL_CLASS,id:"CountryLogDialog"}).afterClosed().subscribe((function(t){e.unsubscribe()}))},e.prototype.showNotesPopup=function(){var e=this,t=this,n=this.dialog.open(s.Q,{width:b.F.COUNTRY_NOTES.WIDTH,data:{noteList:this.params.data.planParamsDetails.noteList&&this.params.data.planParamsDetails.noteList.note?JSON.parse(JSON.stringify([].concat(this.params.data.planParamsDetails.noteList.note))):[],userId:this.countryMetaData.userId,userName:this.countryMetaData.userName,resources:this.countryMetaData.countryNotesResources,titleLabel:this.countryMetaData.countryNotesResources.TITLE,titleValue:this.countryMetaData.countryName,areNotesEditable:this.countryMetaData.hasEditAccess&&this.countryMetaData.isEditablePlan},panelClass:b.F.CREATE_TEMPLATE.PANEL_CLASS,id:"CountryNotesDialog"}).afterClosed().subscribe((function(l){if(n.unsubscribe(),l&&l.action===e.countryMetaData.countryNotesResources.SAVE){t.params.data.planParamsDetails.noteList.note||(t.params.data.planParamsDetails.noteList={});var a=t.countryMetaData.countryKey,i=e.countriesGridService.updateCountryNotes(a,l.noteList).subscribe((function(n){if(n.studyPlanDetails){e.planDetailsService.onPlanDetailsRefresh(n);var l=n.studyPlanDetails.geoList.geography.findIndex((function(e){return e.geographyKey===a}));l>-1&&(t.params.data.planParamsDetails.noteList=n.studyPlanDetails.geoList.geography[l].planParamsDetails.noteList),t.countryMetaData.noteStatus=t.hasNotes(),t.setNoteIcon()}i.unsubscribe()}))}}))},e.prototype.setNoteIcon=function(){this.noteIcon=this.getNotes()},e.prototype.setLockIcon=function(){this.lockIcon=this.getLock()},e.prototype.countryNameClicked=function(){this.params.data.isCohortCountry||this.params.context.componentParent.countryNameClicked(this.countryMetaData.countryKey,this.params)},e.prototype.ngOnDestroy=function(){},e.prototype.refresh=function(){return this.params&&this.countryMetaData&&(this.countryMetaData.invalidParams=this.getInvalidParamsOfGrid(this.params)),!1},e.prototype.expandAll=function(){console.log(this.params.api.getPinnedTopRowCount());for(var e=0;e<this.params.api.getPinnedTopRowCount();e++)console.log(this.params.getPinnedTopRow(e));this.params.api.expandAll(),this.expand=!1},e.prototype.collapseAll=function(){this.params.api.collapseAll(),this.expand=!0},e.prototype.refreshExpand=function(){if(this.params&&this.params.api){var e=[];if(this.params.api.forEachNode((function(t){e.push(t)})),e){var t=e.some((function(e){if(e)return!1===e.expanded}));this.expand=!!t}}},e.prototype.rateAdjustmentClicked=function(){this.params.context.componentParent.rateAdjustmentClicked()},e.prototype.getInvalidParamsOfGrid=function(e){var t,n,l=this.localAppResources.getResource("STUDY_TARGET"),a=this.localAppResources.getResource("WORLD_WIDE");if(e.mcGrid||e.value===l||e.value===a)return null;var i=[],r=e.api.columnController.allDisplayedColumns,o=function(t,n){bn.a.isDefined(e.data.errorFields[t])&&r.forEach((function(n){n.colId===t&&n.colDef.editable&&("function"==typeof n.colDef.editable&&n.colDef.editable(e)?i.push(n.colDef.headerName):"function"!=typeof n.colDef.editable&&n.colDef.editable&&i.push(n.colDef.headerName))}))};try{for(var s=Ue.__values(Object.entries(e.data.errorFields)),u=s.next();!u.done;u=s.next())o(Ue.__read(u.value,2)[0])}catch(d){t={error:d}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i.length?b.v.VALIDATIONMSG+" "+i.join(", "):null},e}(),Tn=function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.agInit=function(e){this.params=e},e.prototype.getData=function(){return this.params},e.prototype.ngOnDestroy=function(){},e.prototype.refresh=function(){return!1},e}(),An=function(){function e(e,t){this.manageCountriesService=e,this.countriesGridService=t,this.showStatusIcon=!1}return e.prototype.ngOnInit=function(){},e.prototype.agInit=function(e){this.params=e,this.showStatusIcon=!this.params.hideStatusIcon,this.params.hideStatusIcon||this.fetchStatusIcon()},e.prototype.fetchStatusIcon=function(){this.statusIcon=this.params.value?"status-"+this.params.value.toLowerCase():"status-incomplete",this.showStatusIcon=!0},e.prototype.ngOnDestroy=function(){},e.prototype.refresh=function(){return!1},e}(),In=function(){function e(){}return e.prototype.agInit=function(e){this.params=e},e.prototype.refresh=function(){return!1},e.prototype.getData=function(){return this.params},e}(),_n=function(){function e(e,t){this.countriesGridService=e,this.solversService=t,this.refreshIcon=b.kb.ICON_REFRESH,this.toolTipText="",this.toHideNodeSolver=!1}return e.prototype.agInit=function(e){this.params=e,this.toHideNodeSolver=this.isNodeSolverHidden(),this.toolTipText=this.countriesGridService.getCountryGridResources().CLICK_TO_CALCULATE,this.isWWorStudyTarget=this.countriesGridService.isWWorStudyTarget(e)},e.prototype.refresh=function(){return!1},e.prototype.calculateSolverValues=function(){this.params.api.stopEditing(),this.solveForMCS()},e.prototype.solveForMCS=function(){this.solversService.solveForMCS([this.params.node],this.params.solverType,this.params.api,this.params.isPlan,this.params.updateDependentCohortCard,this.params.planProperties.isCohortPlan,this.params.planProperties.isDepCohortPlan,!1,!0)},e.prototype.isNodeSolverHidden=function(){var e=this.params.node.data.planParamsDetails,t=!this.params.isEditablePlan||this.params.node.data.isCohortExcluded||e.isCountryLocked||this.countriesGridService.planDetails.planProperties.isCohortPlan===b.xc&&!this.params.node.data.isCohortCountry;return!this.countriesGridService.planDetails.planProperties.isPlan&&e.actuals&&(t=t||dn.a.isDefined(e.actuals.LSR)),t},e}(),Nn=function(){function e(e,t){this.countriesGridService=e,this.solversService=t,this.refreshIcon=b.kb.ICON_REFRESH,this.toolTipText="",this.disableButton=!1,this.toolTipText=this.countriesGridService.getCountryGridResources().CLICK_TO_CALCULATE}return e.prototype.agInit=function(e){this.params=e,this.disableButton=this.params.disableSolver,this.countriesGridService.setSolverBasedValidationFlag(this.params.solverType===b.fc.CRT)},e.prototype.refresh=function(){return!1},e.prototype.getSolverForMCS=function(){this.params.api.stopEditing();var e=this.params.api.getSelectedNodes();e.length<1&&this.solversService.showNoSelectDialog(),this.solversService.solveForMCS(e,this.params.solverType,this.params.api,this.params.isPlan,this.params.updateDependentCohortCard,this.params.planProperties.isCohortPlan,this.params.planProperties.isDepCohortPlan,!0)},e}(),On=function(){function e(e,t){this.countriesGridService=e,this.solversService=t,this.toolTipText="",this.iconArrowLeft=b.kb.ICON_ARROW_LEFT,this.toolTipText=this.countriesGridService.getCountryGridResources().CLICK_TO_APPLY}return e.prototype.agInit=function(e){this.params=e},e.prototype.refresh=function(){return!1},e.prototype.onApplyclick=function(){var e=this;if(this.params.isEditablePlan){var t=this.params.solverType,n=this.params.api.getSelectedNodes(),l=this.countriesGridService.planDetails.planProperties;switch(t){case b.fc.SDS:this.params.api.forEachNode((function(t){s.c.isDefined(t.data.planParamsDetails.optimumRT,!0)&&!0!==t.data.planParamsDetails.isCountryLocked&&(t.setDataValue(P.a.RT,t.data.planParamsDetails.optimumRT),t.setDataValue("planParamsDetails.optimumRT",b.M),t.data.isEdited=!0,t.setSelected(!0),t.data.isCohortCountry&&(t.data.isCohModified=!0),e.solversService.updateDataStatus(!1))}));break;case b.fc.LSR:n.forEach((function(t){s.c.isDefined(t.data.planParamsDetails.calculatedLSR,!1)&&e.isNodeEligible(t,l)&&(t.setDataValue(P.a.ARTB,t.data.planParamsDetails.calculatedLSR),t.data.planParamsDetails.LSR=t.data.planParamsDetails.calculatedLSR,t.setDataValue("planParamsDetails.calculatedLSR",b.M),t.data.isEdited=!0,t.setSelected(!0),t.data.isCohortCountry&&(t.data.isCohModified=!0),e.solversService.updateDataStatus(!1))}));break;case b.fc.MRS:var a;a=this.solversService.isSRAvailable()?P.a.SR:P.a.RR,n.forEach((function(t){s.c.isDefined(t.data.planParamsDetails.calculatedMRS,!0)&&e.isNodeEligible(t,l)&&(t.setDataValue(a,t.data.planParamsDetails.calculatedMRSWithOutFormat),s.c.isDefined(t.data.planParamsDetails.calculatedMRLSR)&&(t.data.planParamsDetails.LSR=t.data.planParamsDetails.calculatedMRLSR),t.setDataValue("planParamsDetails.calculatedMRS",b.M),t.data.isEdited=!0,t.setSelected(!0),t.data.isCohortCountry&&(t.data.isCohModified=!0),e.solversService.updateDataStatus(!1))}));break;case b.fc.CRT:n.forEach((function(t){s.c.isDefined(t.data.planParamsDetails.calculatedCRT,!0)&&e.isNodeEligible(t,l)&&(t.setDataValue(P.a.RT,t.data.planParamsDetails.calculatedCRT),s.c.isDefined(t.data.planParamsDetails.calculatedCRTLSR)&&(t.data.planParamsDetails.LSR=t.data.planParamsDetails.calculatedCRTLSR),t.setDataValue("planParamsDetails.calculatedCRT",b.M),t.data.isEdited=!0,t.setSelected(!0),t.data.isCohortCountry&&(t.data.isCohModified=!0),e.solversService.updateDataStatus(!1))}))}}},e.prototype.isNodeEligible=function(e,t){var n=!0,l=e.data;return t.isCohortPlan===b.xc&&(n=n&&l.isCohortCountry&&l.isSelectedCohort&&!l.isCohortExcluded&&!l.planParamsDetails.isCountryLocked,t.isPlan||(n=n&&!(l.planParamsDetails.actuals&&s.c.isDefined(l.planParamsDetails.actuals.LSR)))),n},e}(),Mn=function(){function e(e,t){this.countriesGridService=e,this.solversService=t,this.toolTipText="",this.iconArrowLeft=b.kb.ICON_ARROW_LEFT,this.disbleSolverApply=!1,this.hideCopyArrow=!1}return e.prototype.agInit=function(e){this.params=e,this.isWWorStudyTarget=this.countriesGridService.isWWorStudyTarget(e);var t=this.params.solverType;t===b.fc.LSR||t===b.fc.MRS||t===b.fc.CRT?(this.disbleSolverApply=this.isCountryInValid(),this.toolTipText=this.disbleSolverApply?"":this.countriesGridService.getCountryGridResources().CLICK_TO_APPLY):this.toolTipText=this.countriesGridService.getCountryGridResources().CLICK_TO_APPLY,this.hideCopyArrowForParentCountryInCohort()},e.prototype.hideCopyArrowForParentCountryInCohort=function(){if(this.params.planProperties.isCohortPlan===b.xc){var e=!this.params.isEditablePlan||this.params.node.data.isCohortExcluded||this.params.node.data.planParamsDetails.isCountryLocked||!this.params.node.data.isCohortCountry;this.params.solverType===b.fc.SDS&&(e=e||!this.params.cohortData||this.params.cohortData.cohortKey!==this.params.node.data.cohortKey),!this.countriesGridService.planDetails.planProperties.isPlan&&this.params.node.data.actuals&&(e=e||s.c.isDefined(this.params.node.data.actuals.LSR)),this.hideCopyArrow=e}else this.hideCopyArrow=this.params.solverType===b.fc.SDS?this.params.node.data.planParamsDetails.isCountryLocked:this.isNodeSolverHidden()},e.prototype.isNodeSolverHidden=function(){var e=this.params.node.data.planParamsDetails,t=!this.params.isEditablePlan||e.isCountryLocked;return!this.countriesGridService.planDetails.planProperties.isPlan&&e.actuals&&(t=t||s.c.isDefined(e.actuals.LSR)),t},e.prototype.refresh=function(){return!0},e.prototype.onApplyClick=function(){if(!this.disbleSolverApply)switch(this.params.solverType){case b.fc.SDS:s.c.isDefined(this.params.data.planParamsDetails.optimumRT,!0)&&(this.params.node.setDataValue(P.a.RT,this.params.data.planParamsDetails.optimumRT),this.params.node.setDataValue("planParamsDetails.optimumRT",b.M),this.params.node.data.isEdited=!0,this.params.node.setSelected(!0),this.params.node.data.isCohortCountry&&(this.params.data.isCohModified=!0),this.solversService.updateDataStatus(!1));break;case b.fc.LSR:s.c.isDefined(this.params.data.planParamsDetails.calculatedLSR,!1)&&(this.params.node.setDataValue(P.a.ARTB,this.params.data.planParamsDetails.calculatedLSR),this.params.node.data.planParamsDetails.LSR=this.params.data.planParamsDetails.calculatedLSR,this.params.node.setDataValue("planParamsDetails.calculatedLSR",b.M),this.params.node.data.isEdited=!0,this.params.node.setSelected(!0),this.params.node.data.isCohortCountry&&(this.params.data.isCohModified=!0),this.solversService.updateDataStatus(!1));break;case b.fc.MRS:s.c.isDefined(this.params.data.planParamsDetails.calculatedMRS,!0)&&(!0===this.countriesGridService.isSRAvailable()?this.params.node.setDataValue(P.a.SR,this.params.data.planParamsDetails.calculatedMRSWithOutFormat):this.params.node.setDataValue(P.a.RR,this.params.data.planParamsDetails.calculatedMRSWithOutFormat),s.c.isDefined(this.params.data.planParamsDetails.calculatedMRLSR)&&(this.params.node.data.planParamsDetails.LSR=this.params.data.planParamsDetails.calculatedMRLSR),this.params.node.setDataValue("planParamsDetails.calculatedMRS",b.M),this.params.node.data.isEdited=!0,this.params.node.setSelected(!0),this.params.node.data.isCohortCountry&&(this.params.data.isCohModified=!0),this.solversService.updateDataStatus(!1));break;case b.fc.CRT:s.c.isDefined(this.params.data.planParamsDetails.calculatedCRT,!0)&&(this.params.node.setDataValue(P.a.RT,this.params.data.planParamsDetails.calculatedCRT),s.c.isDefined(this.params.data.planParamsDetails.calculatedCRTLSR)&&(this.params.node.data.planParamsDetails.LSR=this.params.data.planParamsDetails.calculatedCRTLSR),this.params.node.setDataValue("planParamsDetails.calculatedCRT",b.M),this.params.node.data.isEdited=!0,this.params.node.setSelected(!0),this.params.node.data.isCohortCountry&&(this.params.data.isCohModified=!0),this.solversService.updateDataStatus(!1))}},e.prototype.isCountryInValid=function(){var e=this.params.node.data.planParamsDetails;return this.countriesGridService.planDetails.planProperties.isPlan?e.isCountryLocked:e.isCountryLocked||(e.actuals?s.c.isDefined(e.actuals.LSR):e.isCountryLocked)},e}(),Fn=function(){function e(e){this.countriesGridService=e,this.refreshIcon=b.kb.ICON_REFRESH,this.disableButton=!1}return e.prototype.agInit=function(e){this.params=e,this.disableButton=this.params.disableSolver,this.countriesGridService.setSolverBasedValidationFlag(!0)},e.prototype.refresh=function(){return!1},e.prototype.getSolverForSubjectDistribution=function(){var e,t=this;this.params.api.stopEditing();var n=[];this.params.api.forEachNode((function(e){"Y"===t.params.planProperties.isCohortPlan?(!e.data.isCohortCountry||e.data.isCohortCountry&&t.params.cohortData&&e.data.cohortKey===t.params.cohortData.cohortKey)&&n.push(e.data):n.push(e.data)})),this.countriesGridService.validateCountryData(n,this.params.planProperties);var l=0,a=0,i=!1;if(this.params.isEditable)if(this.countriesGridService.isFormValidForallCountries(n))this.countriesGridService.showSolverUIErrorDialog("EmptyValidationError",b.X);else if(!0===this.countriesGridService.anyInvalidCustomSites())this.countriesGridService.showNumSitesError();else{var r;i=this.shouldSkipMaxRTSumValidation(i),a=(e=this.getSumOfRandomizedParameter(l,a)).sumOfMaxRT,(l=e.sumOfMinRT)>(r="N"===this.params.planProperties.isCohortPlan?this.params.enrollmentTarget:this.params.cohortData.enrollmentTarget)?this.countriesGridService.showSolverUIErrorDialog(this.getErrorMsgKeyForSumOfMinRTGTWWRT(),b.X):!i&&a<r?this.countriesGridService.showSolverUIErrorDialog(this.getErrorMsgKeyForSumOfMaxRTLTWWRT(),b.X):this.getSolverResponse()}},e.prototype.getSolverResponse=function(){var e,t=this,n=[],l=t.getCommandName();e="Y"===t.params.planProperties.isCohortPlan?"countryCohortPlanSolver":"countryPlanSolver",this.countriesGridService.getCountriesGridSolverResponse(t.params,l.commandName,l.planKey).subscribe((function(l){l.result.toUpperCase()===s.k.RESULT_ERROR.toUpperCase()?t.countriesGridService.showErrorBanner(+l.error.errorCode):l.multiCountryPlanSolver&&l.multiCountryPlanSolver[e]&&Array.isArray(l.multiCountryPlanSolver[e])?(t.errorCheckForMinRTPerCountryBasis(n=l.multiCountryPlanSolver[e]),t.errorCheckForStudyTargetAchieved(n)):l.multiCountryPlanSolver&&l.multiCountryPlanSolver[e]&&t.checkErrorStatusForSingleCountry(l.multiCountryPlanSolver[e])}))},e.prototype.getCommandName=function(){return this.params.isPlan?{commandName:b.p.EVALUATE_MULTI_COUNTRY_PLAN,planKey:"planKey"}:{commandName:b.p.EVALUATE_ADJUST_MULTI_COUNTRY_PLAN,planKey:"adjustStudyPlanKey"}},e.prototype.updateSeedNumber=function(e,t,n){e.forEachNode((function(e){e.data.geographyKey!==t||e.data.isCohortCountry||(e.data.planParamsDetails.seedNumber=n)}))},e.prototype.checkErrorStatusForSingleCountry=function(e){var t=this,n=this,l=[],a=!1;n.params.api.forEachNode((function(i){if(n.params.cohortData?i.data.geographyKey===e.countryKey&&i.data.cohortKey===e.cohortKey&&(a=!0,i.setDataValue("planParamsDetails.solvedPLSR",e.LSR),i.setDataValue("planParamsDetails.optimumRT",e.optimumRT),n.updateSeedNumber(n.params.api,i.data.geographyKey,e.seedNumber)):(a=!0,i.setDataValue("planParamsDetails.solvedPLSR",e.LSR),i.setDataValue("planParamsDetails.optimumRT",e.optimumRT),n.updateSeedNumber(n.params.api,i.data.geographyKey,e.seedNumber)),a){if(e.optimumRT<i.data.planParamsDetails.minRT){l.push(i.data.geographyName);var r=n.countriesGridService.getResourceMessageWithParameters(t.getErrorMsgKeyForOptimumRTLTMinRT(),i.data.geographyName);n.countriesGridService.showClientSideValidationErrorPopup(b.X,r,"SolverComponent")}e.optimumRT<("N"===n.params.planProperties.isCohortPlan?n.params.enrollmentTarget:n.params.cohortData.enrollmentTarget)&&t.countriesGridService.showSolverUIErrorDialog("DSPStudyTargetStatus",b.X)}}))},e.prototype.errorCheckForStudyTargetAchieved=function(e){var t=0;e.forEach((function(e){t+=e.optimumRT})),t<("N"===this.params.planProperties.isCohortPlan?this.params.enrollmentTarget:this.params.cohortData.enrollmentTarget)&&this.countriesGridService.showSolverUIErrorDialog("DSPStudyTargetStatus",b.X)},e.prototype.errorCheckForMinRTPerCountryBasis=function(e){var t=this,n=[];if(t.params.api.forEachNode((function(l){var a=null;"Y"===t.params.planProperties.isCohortPlan?!0===l.data.isCohortCountry&&(a=t.getCountryData(l.data.geographyKey,e,l.data.cohortKey)):a=t.getCountryData(l.data.geographyKey,e,l.data.cohortKey),a&&(l.setDataValue("planParamsDetails.solvedPLSR",a.LSR),l.setDataValue("planParamsDetails.optimumRT",a.optimumRT),t.updateSeedNumber(t.params.api,l.data.geographyKey,a.seedNumber),a.optimumRT<l.data.planParamsDetails.minRT&&n.push(l.data.geographyName))})),n.length>0){var l=t.countriesGridService.getResourceMessageWithParameters(this.getErrorMsgKeyForOptimumRTLTMinRT(),n);t.countriesGridService.showClientSideValidationErrorPopup(b.X,l,"SolverComponent")}},e.prototype.shouldSkipMaxRTSumValidation=function(e){var t=this;return this.params.api.forEachNode(this.params.cohortData?function(n){void 0!==n.data.cohortKey&&t.params.cohortData.cohortKey===n.data.cohortKey&&n.data.planParamsDetails&&null==n.data.planParamsDetails.maxRT&&(e=!0)}:function(t){t.data.planParamsDetails&&null==t.data.planParamsDetails.maxRT&&(e=!0)}),e},e.prototype.getSumOfRandomizedParameter=function(e,t){var n=this;return this.params.api.forEachNode(this.params.cohortData?function(l){var a;void 0!==l.data.cohortKey&&n.params.cohortData.cohortKey===l.data.cohortKey&&l.data.planParamsDetails&&(a=n.getMinMaxSumOfSelectedRow(l,e,t),e=a.sumOfMinRT,t=a.sumOfMaxRT)}:function(l){var a;l.data.planParamsDetails&&(a=n.getMinMaxSumOfSelectedRow(l,e,t),e=a.sumOfMinRT,t=a.sumOfMaxRT)}),{sumOfMinRT:e,sumOfMaxRT:t}},e.prototype.getMinMaxSumOfSelectedRow=function(e,t,n){return e.data.planParamsDetails.minRT&&(t+=+e.data.planParamsDetails.minRT),e.data.planParamsDetails.maxRT&&(n+=+e.data.planParamsDetails.maxRT),{sumOfMinRT:t,sumOfMaxRT:n}},e.prototype.getCountryData=function(e,t,n){return t.find(void 0!==n?function(t){return t.countryKey===e&&t.cohortKey===n}:function(t){return t.countryKey===e})},e.prototype.isCohortPlan=function(){return"Y"===this.params.planProperties.isCohortPlan},e.prototype.getErrorMsgKeyForOptimumRTLTMinRT=function(){return this.isCohortPlan()?"DSPMinRTStatusForCohort":"DSPMinRTStatus"},e.prototype.getErrorMsgKeyForSumOfMaxRTLTWWRT=function(){return this.isCohortPlan()?"DSPMaxRTValidationTextForCohort":"DSPMaxRTValidationText"},e.prototype.getErrorMsgKeyForSumOfMinRTGTWWRT=function(){return this.isCohortPlan()?"DSPMinRTValidationTextForCohort":"DSPMinRTValidationText"},e}(),Ln=n("V7sF"),wn=(n("seAx"),function(){function e(){this.displayCohortList=!1}return e.prototype.ngAfterViewInit=function(){var e=this;this.container&&window.setTimeout((function(){e.container.element.nativeElement.focus()}))},e.prototype.getValue=function(){return JSON.stringify(this.cohortList)},e.prototype.isPopup=function(){return!0},e.prototype.agInit=function(e){this.cohortList=e.cohortList,this.planCohortList=e.planCohortList,this.params=e},e.prototype.refresh=function(){return!1},e.prototype.toggleAll=function(){var e=!this.areAllChecked();if(this.cohortList.forEach((function(t){console.log("%ctoggleAllCohorts","font-weight: bold; color: #AD4536",t),t.checked=!t.isExcludable||e})),this.params.context.componentParent.excludeCohort(),e){var t=this.params.node.data.planParamsDetails.centerInitInfo.granularCenterInitInfo.centerInitSlot;if(t&&t.length>0){t.map((function(e){e.usedCohortKeys="ALL"}));var n=this.updateCohortCountryNumSites(t,this.params.node.data);this.params.node.data.planParamsDetails.cohortNumSites=n}}},e.prototype.cohortChange=function(e,t,n){if(this.params.node.data.isEdited=!0,this.params.context.componentParent.excludeCohort(),t){var l=this.params.node.data.planParamsDetails.centerInitInfo.granularCenterInitInfo.centerInitSlot;if(l&&l.length>0){l.map((function(t){if("ALL"!==t.usedCohortKeys){var l=t.usedCohortKeys.toString().split(",");l.includes(e.toString())||(l.push(e),t.usedCohortKeys=l.length===n.length?"ALL":l.toString())}}));var a=this.updateCohortCountryNumSites(l,this.params.node.data);this.params.node.data.planParamsDetails.cohortNumSites=a}}},e.prototype.updateCohortCountryNumSites=function(e,t){var n=this;if(t.cohortList&&t.cohortList.length>0)return this.cohortNumSites=[],t.cohortList.map((function(l){if(t.cohortList.length>0){var a=l.cohortKey,i=0;a&&(e.forEach((function(e){e&&e.usedCohortKeys&&e.usedCohortKeys.toString().toLowerCase()!==b.g.toLowerCase()&&e.noOfCenters?-1!==e.usedCohortKeys.toString().split(",").indexOf(a.toString())&&(i+=parseInt(e.noOfCenters.toString(),10)):e.noOfCenters&&(i+=parseInt(e.noOfCenters.toString(),10))})),n.cohortNumSites.push({cohortKey:a,numSites:i}))}})),this.cohortNumSites},e.prototype.onKeyDown=function(e){var t=e.which||e.keyCode;37!==t&&39!==t||e.stopPropagation()},e.prototype.areAllChecked=function(){return!!this.cohortList&&this.cohortList.filter((function(e){return!e.checked})).length<=0},e}()),Gn=n("gtvs"),kn=function(){function e(e,t){this.countryDetailsService=e,this.countriesGridService=t,this.displayCohortList=!1,console.log("I am in cohort selection renderer...")}return e.prototype.agInit=function(e){this.params=e,this.isCohortCountry=e.data.isCohortCountry,this.cohortList=e.cohortList,this.disabled=e.disabled,this.countryMetaData={countryKey:e.data.geographyKey,cohortName:this.params.data.cohortName,isCohortCountry:e.data.isCohortCountry,isReCalRequired:!!this.params.data.isReCalRequired&&this.params.data.isReCalRequired,isWorldWideCohort:e.data.isCohortCountry&&e.data.geographyLevel===this.countriesGridService.getStudyTargetAndWorldWide().WW,isWWorStudyTarget:this.countriesGridService.isWWorStudyTarget(e)}},e.prototype.cohortNameClicked=function(){this.params.data.isCohortCountry&&this.params.context.componentParent.countryNameClicked(this.countryMetaData.countryKey,this.params)},Object.defineProperty(e.prototype,"countryCohorts",{get:function(){return this.countryDetailsService.getCountryDetailsResources().COUNTRY_COHORTS},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){return!1},e.prototype.toggleCohortSelector=function(){this.displayCohortList=!this.displayCohortList},e}(),Vn=function(){function e(){}return e.prototype.agInit=function(e){this.params=e,this.value=this.params.value},e.prototype.getValue=function(){return this.value},e.prototype.isCancelAfterEnd=function(){return!1},e.prototype.ngAfterViewInit=function(){var e=this;window.setTimeout((function(){e.input.element.nativeElement.focus(),e.input.element.nativeElement.select()}))},e}(),xn=function(){function e(){}return e.prototype.agInit=function(e){this.params=e},e.prototype.refresh=function(){return!1},e.prototype.hasValidationMsg=function(){return!(!this.params.data.errorFields[this.params.column.colId]||""===this.params.data.errorFields[this.params.column.colId])},e}(),Kn=function(){function e(){}return e.prototype.agInit=function(e){this.params=e,"number"===this.params.fieldType&&(this.decimals="0.0-"+e.numDecimals)},e.prototype.refresh=function(){return!1},e}(),Un=function(){function e(){}return e.prototype.agInit=function(e){this.params=e},e.prototype.refresh=function(){return!1},e}(),jn=function(){function e(){}return e.prototype.agInit=function(e){this.params=e},e.prototype.refresh=function(){return!1},e}(),Bn=function(){function e(){}return e.prototype.agInit=function(e){this.params=e,this.value=this.params.value,this.step=this.params.step,this.decimals=this.params.decimals,this.minValue=this.params.minValue,this.maxValue=this.params.maxValue,this.signedInteger=this.params.signedInteger,this.signedDecimal=this.params.signedDecimal},e.prototype.getValue=function(){return this.value},e.prototype.isCancelAfterEnd=function(){var e=!1;return this.minValue&&(e=e||this.value<this.minValue),this.maxValue&&(e=e||this.value>this.maxValue),e},e.prototype.onKeyUp=function(e){var t=String.fromCharCode(e.keyCode);if(!/[0-9]/.test(t))return e.preventDefault(),e.stopPropagation(),!1},e.prototype.onKeyDown=function(e){this.value=dn.a.formatDecimal(e,"1.0-"+this.decimals)},e.prototype.validate=function(e){this.value=dn.a.formatDecimal(e,"1.0-"+this.decimals)},e.prototype.ngAfterViewInit=function(){var e=this;window.setTimeout((function(){e.input.element.nativeElement.focus(),e.input.element.nativeElement.select()}))},e.prototype.getCharCodeFromEvent=function(e){return void 0===(e=e||window.event).which?e.keyCode:e.which},e.prototype.isCharNumeric=function(e){return!!/\d/.test(e)},e.prototype.isKeyPressedNumeric=function(e){var t=this.getCharCodeFromEvent(e),n=e.key?e.key:String.fromCharCode(t);return this.isCharNumeric(n)},e}(),Wn=function(){function e(){}return e.prototype.agInit=function(e){this.params=e,this.decimals="0.0-"+e.numDecimals},e.prototype.refresh=function(){return!1},e.prototype.hasValidationMsg=function(){return!(!this.params.data.errorFields[this.params.column.colId]||""===this.params.data.errorFields[this.params.column.colId])},e}(),Hn=function(){function e(){this.colId=P.a.SI}return e.prototype.agInit=function(e){this.params=e,this.labels=e.labels,e.value||(e.value=e.defaultValue)},e.prototype.onChange=function(e){this.params.node.setDataValue(this.params.column.colId,e.value)},e.prototype.refresh=function(){return!1},e}(),Yn=function(){function e(e){this.localAppResources=e,this.expand=!1}return e.prototype.ngOnInit=function(){},e.prototype.agInit=function(e){this.params=e,this.rowData=e.rowData,this.pinnedTopRowData=e.pinnedTopRowData,this.showIcon=!1,this.refreshExpand(),this.customHeaderResources={ExpandAll:this.localAppResources.getResource("ExpandAll"),CollapseAll:this.localAppResources.getResource("CollapseAll")}},e.prototype.refresh=function(){return!1},e.prototype.expandAll=function(){this.params.api.expandAll(),this.expand=!1,this.pinnedTopRowData&&this.params.context.componentParent.worldWideNameClicked(!1)},e.prototype.collapseAll=function(){this.params.api.collapseAll(),this.expand=!0,this.pinnedTopRowData&&this.params.context.componentParent.worldWideNameClicked(!0)},e.prototype.refreshExpand=function(){var e=this;if(this.params&&this.params.api){var t=[];if(this.params.api.forEachNode((function(e){t.push(e)})),t){var n=t.some((function(e){if(e.data&&!e.data.isCohortCountry)return!1===e.expanded}));this.expand=!!n}}this.rowData&&this.rowData.map((function(t){(t.isCohortCountry||t.label===Dn.a.ACTUALS||t.label===Dn.a.PROJECTED||t.label===Dn.a.PARENT)&&(e.showIcon=!0)})),this.pinnedTopRowData&&this.pinnedTopRowData.length>0&&(this.isHiddenWWData=!1,this.pinnedTopRowData.map((function(t){t.isHiddenWWData&&(e.isHiddenWWData=!0)}))),(this.expand||this.isHiddenWWData)&&(this.expand=!0)},e}(),qn=function(){function e(){this.filterApplied=!1}return e.prototype.refresh=function(e){return!0},e.prototype.agInit=function(e){this.params=e,this.filterApplied=this.params.filterApplied,this.isCohortPlan=this.params.isCohortPlan,this.localResources=this.params.localResources?this.params.localResources:""},e.prototype.worldWideNameClicked=function(e,t){this.params.node.data.isHiddenWWData=e,this.params.context.componentParent.worldWideNameClicked(e,t)},e.prototype.setCollapsed=function(e){return e.api.getPinnedTopRowCount()===e.MIN_ROW_COUNT},e.prototype.ngOnInit=function(){},e}(),Jn=function(){function e(e){this.localAppResources=e}return e.prototype.updatePinnedRowGrop=function(e,t,n,l,a){var i=this;return e?t?e.filter((function(e){if(a)return"Worldwide"===n?e.geoHierarchy.length===l:e.geoHierarchy.includes(n)&&e.geoHierarchy.length>l?(e.isHiddenWWData=t,!1):!e.isHiddenWWData||e.label!==Dn.a.ACTUALS&&e.label!==Dn.a.PROJECTED&&e.label!==Dn.a.PARENT;var r=e.geoHierarchy[e.geoHierarchy.length-1];return"Worldwide"===r||r===Dn.a.STUDY_TARGET||r===i.localAppResources.getResource("STUDY_TARGET")||r===i.localAppResources.getResource("WORLD_WIDE")||void 0})).map((function(e){return i.updatecollpaseStateForEachNode(e,n,a,t)})):e.filter((function(e){return!a||("Worldwide"===n||e.geoHierarchy.includes(n)&&e.geoHierarchy.length>l&&(e.isHiddenWWData=t),!e.isHiddenWWData||"Cohort"===e.label||e.label===Dn.a.STUDY_TARGET)})).map((function(e){return i.updatecollpaseStateForEachNode(e,n,a,t)})):[]},e.prototype.updatecollpaseStateForEachNode=function(e,t,n,l){return e.geoHierarchy[e.geoHierarchy.length-1]!==t&&n||(e.isHiddenWWData=l),e},e.prototype.worldWideNameClicked=function(e,t,n,l){var a=this.getNodeClickedInfo(l);this.pinnedTopRowFilterData=this.updatePinnedRowGrop(n,e,a.groupedNode,a.groupingLength,l),t.setPinnedTopRowData(this.pinnedTopRowFilterData)},e.prototype.getNodeClickedInfo=function(e){var t="";return e&&(t=e.geoHierarchy[e.geoHierarchy.length-1]),{groupedNode:t,groupingLength:"Worldwide"===t?1:2}},e.prototype.getPinnedTopRowData=function(){return this.pinnedTopRowFilterData},e}(),Xn=n("cpEJ"),zn=function(){function e(){var e=this;this.nthPercentage={25:25,50:50,90:90,75:75,100:100},this.styleSheet={dateWidth:110,numberWidth:100,labelWidth:100},this.styleClasses={PINNED_ROW_FONT_WEIGHT:"ag-pinned-row-font-bold"},this.rowSelectionClass={ROW_SELECTION:"single"},this.columnConfiguration={autoGroupColumnDef:{headerName:"Grouping",width:35,suppressMovable:!0,lockPosition:!0,pinned:"left",cellStyle:function(e,t){return t?{width:"35px","z-index":9e3}:{width:"1px"}}},planStatus:{width:this.styleSheet.labelWidth,pinned:"left",suppressMovable:!0,lockPosition:!0,suppressToolPanel:!0,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},geographyName:{pinned:"left",suppressMovable:!0,lockPosition:!0,menuTabs:["filterMenuTab","columnsMenuTab"],width:220,suppressToolPanel:!0,cellStyle:{"text-align":"left","font-weight":"normal"},cellClass:function(t){return e.getGridRowClass(t)}},cohortName:{width:120,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"left",overflow:"hidden","font-weight":"normal",color:"#d0d0d0"},suppressColumnsToolPanel:!0,suppressToolPanel:!0},regionName:{menuTabs:["filterMenuTab","columnsMenuTab"],width:130,suppressToolPanel:!0,cellStyle:{"text-align":"left",overflow:"hidden","font-weight":"normal"}},enrollmentTarget:{width:120,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},screeningTarget:{width:90,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},overRecruitmentPercent:{width:70,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},numSites:{width:90,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},ARC:{width:90,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},CalSAS:{width:100,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},SR:{width:100,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},SFR:{width:100,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},RR:{width:100,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},FSI:{width:this.styleSheet.dateWidth,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},FSI_TO_FSS:{width:100,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},FSS:{width:this.styleSheet.dateWidth,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},FSR:{width:this.styleSheet.dateWidth,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},daysTo:{width:this.styleSheet.dateWidth,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},LSS:{width:this.styleSheet.dateWidth,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},LSR:{width:this.styleSheet.dateWidth,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},ModBy:{width:150,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}},ModDate:{width:this.styleSheet.dateWidth,menuTabs:["filterMenuTab","columnsMenuTab"],cellStyle:{"text-align":"center"}}},this.countryNameComparator=function(e,t){return null===e&&null===t?0:null===e?-1:null===t?1:e.localeCompare(t)},this.oneDecimalFormatter=function(e){var t=new u.DecimalPipe("en_US");return isNaN(e.value)?"":t.transform(e.value,"1.0-1")},this.threeDecimalFormatter=function(e){var t=new u.DecimalPipe("en_US");return isNaN(e.value)?"":t.transform(e.value,"1.0-3")},this.dateFormatter=function(e){var t=new u.DatePipe("en_US"),n=null;return n=e.value instanceof Date?e.value:new Date((e.value||"").replace(/-/g,"/")),!e.value||isNaN(n.getTime())?"":t.transform(n,"dd-MMM-yyyy")},this.solverDateFormatter=function(e){var t=new u.DatePipe("en_US"),n=new Date((e.value||"").replace(/-/g,"/"));return!e.value||isNaN(n.getTime())?"":t.transform(n,"dd-MMM-yyyy")},this.timeRemoveFormatter=function(e){var t,n=new u.DatePipe("en_US");return t=e.value&&e.value.split(" ")[0],e.value&&isNaN(t)?n.transform(t,"dd-MMM-yyyy"):""}}return e.prototype.isJSONEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e.prototype.getSiteInitPercDate=function(e,t){if(e.planParamsDetails.siteInitPercDates){var n=e.planParamsDetails.siteInitPercDates.percDate.find((function(e){return e.perc.toString()===t}));return n&&this.getSIPercent(e.planParamsDetails,t)?n.content:""}return""},e.prototype.getSIPercent=function(e,t){return!(!e||void 0===e.numSites)&&Math.floor(e.numSites*this.nthPercentage[t]/100)>0},e.prototype.getGroupLabel=function(e){return e.data.label===Dn.a.COHORT?e.data.cohortName:e.data.label===Dn.a.COUNTRY?e.data.geographyName:e.data.displayLabel},e.prototype.isActualOrProject=function(e){var t=e.data.label;return!(!t||t!==Dn.a.ACTUALS&&t!==Dn.a.PROJECTED)},e.prototype.calculateSAS=function(e){if(!e.data)return"";if(this.isActualOrProject(e))return"";var t=o.m.computeActiveSites(e.data.planParamsDetails.numSites,e.data.planParamsDetails.ARC);return o.m.computeSAS(e.data.planParamsDetails.numSites,Number(t))},e.prototype.getFSSValue=function(e,t){return e.data?t&&this.isCohortCountry(e)?"":this.isActualOrProject(e)||this.isParentPlan(e)?e.data.planParamsDetails.FSS?e.data.planParamsDetails.FSS:"":e.data.planParamsDetails.PFSS:""},e.prototype.getFSRValue=function(e,t,n){return e.data?n&&this.isAdjustment(t)&&this.isCohortRow(e)?"":this.isActualOrProject(e)||this.isParentPlan(e)?e.data.planParamsDetails.FSR?e.data.planParamsDetails.FSR:"":e.data.planParamsDetails.PFSR:""},e.prototype.getLSSValue=function(e,t){return e.data?this.isCohortRow(e)&&t?"":this.isActualOrProject(e)||this.isParentPlan(e)?e.data.planParamsDetails.LSS?e.data.planParamsDetails.LSS:"":e.data.planParamsDetails.PLSS:""},e.prototype.getLSRValue=function(e){return e.data?this.isActualOrProject(e)||this.isParentPlan(e)?e.data.planParamsDetails.LSR?e.data.planParamsDetails.LSR:"":e.data.planParamsDetails.PLSR:""},e.prototype.getEnrollmentTargetValue=function(e){return e.data?this.isActualOrProject(e)||this.isParentPlan(e)?this.isWWRollupRow(e)&&void 0===e.data.planParamsDetails.RT?"":e.data.planParamsDetails.RT:e.data.planParamsDetails.enrollmentTarget:""},e.prototype.getGridRowClass=function(e){return!e.data||e.data.label!==Dn.a.STUDY_TARGET&&e.data.geographyLevel!==b.db.WW||this.styleClasses.PINNED_ROW_FONT_WEIGHT},e.prototype.getModifiedBy=function(e){return this.resetLoggerValue(e)?"":e&&e.data&&e.data.planParamsDetails&&e.data.planParamsDetails.lastModifiedUserName?e.data.planParamsDetails.lastModifiedUserName:""},e.prototype.getModifiedDate=function(e){return this.resetLoggerValue(e)?"":e&&e.data&&e.data.planParamsDetails&&e.data.planParamsDetails.lastModifiedDate?e.data.planParamsDetails.lastModifiedDate:""},e.prototype.isCohortCountry=function(e){return!!(e&&e.data&&void 0!==e.data.isCohortCountry&&e.data.isCohortCountry)},e.prototype.resetLoggerValue=function(e){return!!(e&&e.data&&(e.data.geographyLevel===b.db.WW||this.isActualOrProject(e)||this.isCohortCountry(e)||this.isParentPlan(e)))},e.prototype.isActual=function(e){var t=e.data.label;return!(!t||t!==Dn.a.ACTUALS)},e.prototype.isProjected=function(e){var t=e.data.label;return!(!t||t!==Dn.a.PROJECTED)},e.prototype.isStudyTargetRow=function(e){return e.data&&e.data.label===Dn.a.STUDY_TARGET},e.prototype.isCohortRow=function(e){return e.data&&e.data.label===Dn.a.COHORT},e.prototype.isWWRollupRow=function(e){return e.data&&e.data.geographyLevel===b.db.WW},e.prototype.isAdjustment=function(e){return!(!e||!e.planProperties||e.planProperties.isPlan)},e.prototype.getFSIValue=function(e){return e.data?this.isActual(e)||this.isParentPlan(e)?e.data.planParamsDetails.FSI?e.data.planParamsDetails.FSI:"":this.isProjected(e)?"":e.data.planParamsDetails.PFSI:""},e.prototype.getScreeningTargetValue=function(e,t){return e.data?t&&this.isCohortCountry(e)?"":this.isProjected(e)?"":e.data.planParamsDetails.screeningTarget:""},e.prototype.getOEValue=function(e,t){return e.data?this.isActualOrProject(e)?"":void 0!==e.data.planParamsDetails.overRecruitmentPercent?0===Number(e.data.planParamsDetails.overRecruitmentPercent)?"":e.data.planParamsDetails.overRecruitmentPercent:"":""},e.prototype.isParentPlan=function(e){var t=e.data.label;return!(!t||t!==Dn.a.PARENT)},e.prototype.getRegionByCountry=function(e){return e.data&&(!e.data||e.data.label!==Dn.a.STUDY_TARGET&&e.data.geographyLevel!==b.db.WW)?{key:e.data.geographyKey}:""},e.prototype.getNumSites=function(e){return e.data?this.isProjected(e)?"":void 0!==e.data.planParamsDetails.numSites?e.data.planParamsDetails.numSites:"":""},e.prototype.getRowClassRules=function(){return{"ag-row-focus":function(e){return e.data.rowSelected}}},e.prototype.getSRValue=function(e,t){return e.data?t&&this.isCohortCountry(e)?"":e.data.planParamsDetails.SR:""},e.prototype.getSFValue=function(e,t){return e.data?t&&this.isCohortCountry(e)?"":e.data.planParamsDetails.SFR:""},e.prototype.getWWCohortEnrollmentTargetValue=function(e,t){if(!e.data)return"";if(this.isActualOrProject(e)||this.isParentPlan(e))return e.data.planParamsDetails.RT;if(t&&t.planProperties.isCohortPlan===b.pb){var n=0,l=t.planProperties.cohortList&&t.planProperties.cohortList?t.planProperties.cohortList.cohortPlanParams:null;if(l&&e.data.cohortName){var a=Ue.__spread([].concat(l)).find((function(t){return t.cohortName===e.data.cohortName}));a&&(n=a.enrollmentTarget)}return e.data.planParamsDetails.enrollmentTarget+" ("+Dn.a.TARGET+" "+n+")"}return""},e.ngInjectableDef=l["ɵɵdefineInjectable"]({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Zn=function(){function e(){this.isParentPlanRow=function(e){return e.label&&e.label===Dn.a.PARENT},this.isProjectedRow=function(e){return e.label&&e.label===Dn.a.PROJECTED},this.isCohortRow=function(e){return e&&e.label===Dn.a.COHORT},this.isWWRollupRow=function(e){return e&&e.geographyLevel===b.db.WW},this.isAdjustment=function(e){return!(!e||!e.planProperties||e.planProperties.isPlan)}}return e.prototype.isCohortPlan=function(e){return e.planProperties.isCohortPlan===b.pb},e.prototype.isPlan=function(e){return e.planProperties.isPlan},e.prototype.getFSSValue=function(e,t){return e?(this.isCohortRow(e)||this.isActualOrProject(e))&&t?"":this.isActualOrProject(e)||this.isParentPlanRow(e)?e.planParamsDetails.FSS?e.planParamsDetails.FSS:"":e.planParamsDetails.PFSS:""},e.prototype.getFSRValue=function(e,t,n){return e?t&&this.isCohortRow(e)?"":this.isActualOrProject(e)||this.isParentPlanRow(e)?e.planParamsDetails.FSR?e.planParamsDetails.FSR:"":e.planParamsDetails.PFSR:""},e.prototype.getLSSValue=function(e,t){return e?this.isCohortRow(e)&&t?"":this.isActualOrProject(e)||this.isParentPlanRow(e)?e.planParamsDetails.LSS?e.planParamsDetails.LSS:"":e.planParamsDetails.PLSS:""},e.prototype.getLSRValue=function(e){return e?this.isActualOrProject(e)||this.isParentPlanRow(e)?e.planParamsDetails.LSR?e.planParamsDetails.LSR:"":e.planParamsDetails.PLSR:""},e.prototype.getModifiedBy=function(e){return this.resetLoggerValue(e)?"":e&&e.planParamsDetails&&e.planParamsDetails.lastModifiedUserName?e.planParamsDetails.lastModifiedUserName:""},e.prototype.getModifiedDate=function(e){return this.resetLoggerValue(e)?"":e&&e.planParamsDetails&&e.planParamsDetails.lastModifiedDate?e.planParamsDetails.lastModifiedDate:""},e.prototype.isCohortCountry=function(e){return!(!e||void 0===e.isCohortCountry||!e.isCohortCountry)},e.prototype.resetLoggerValue=function(e){return!(!e||!(e.geographyLevel===b.db.WW||this.isActualOrProject(e)||this.isCohortCountry(e)||this.isParentPlanRow(e)))},e.prototype.isActualOrProject=function(e){return e.label&&(e.label===Dn.a.ACTUALS||e.label===Dn.a.PROJECTED)},e.prototype.getFSIValue=function(e){return e&&(e.label===Dn.a.ACTUALS||this.isParentPlanRow(e))?e.planParamsDetails.FSI?e.planParamsDetails.FSI:"":this.isProjectedRow(e)?"":e.planParamsDetails.PFSI},e.prototype.getEnrollmentTargetValue=function(e){return this.isActualOrProject(e)||this.isParentPlanRow(e)?this.isWWRollupRow(e)&&0===e.planParamsDetails.RT?"":e.planParamsDetails.RT:e.planParamsDetails.enrollmentTarget},e.prototype.calculateSAS=function(e){if(this.isActualOrProject(e))return"";var t=o.m.computeActiveSites(e.planParamsDetails.numSites,e.planParamsDetails.ARC);return o.m.computeSAS(e.planParamsDetails.numSites,Number(t))},e.prototype.getNumSites=function(e){return this.isProjectedRow(e)?"":e.planParamsDetails.numSites?e.planParamsDetails.numSites:""},e.prototype.getWWCohortEnrollmentTargetValue=function(e,t){if(!e)return"";if(!t)return"";if(this.isActualOrProject(e)||this.isParentPlanRow(e))return e.planParamsDetails.RT;if(t&&t.planProperties.isCohortPlan===b.pb){var n=0,l=t.planProperties.cohortList?t.planProperties.cohortList.cohortPlanParams:null;if(l&&e.cohortName){var a=Ue.__spread([].concat(l)).find((function(t){return t.cohortName===e.cohortName}));a&&(n=a.enrollmentTarget)}return e.planParamsDetails.enrollmentTarget+" ("+Dn.a.TARGET+" "+n+")"}return""},e.ngInjectableDef=l["ɵɵdefineInjectable"]({factory:function(){return new e},token:e,providedIn:"root"}),e}(),$n=function(){function e(e,t,n,l){this.planDetailsService=e,this.loggerService=t,this.manageCountriesService=n,this.planDetailsHelperService=l,this.defaultSelectedRowID=null}return e.prototype.setSelectedRowPreference=function(e){var t=this.getSelectedCountriesGridRowPref();if(t)if("number"==typeof t)this.setSelectedGridRow(e,t);else{var n=t.split("-");2===n.length&&this.setSelectedGridRow(e,+n[0],+n[1])}else this.setSelectedGridRow(e,null,null)},e.prototype.getSelectedCountriesGridRowPref=function(){return this.planDetailsService.planDetailsResponseData?this.planDetailsService.getSelectedCountriesGridRowPref(this.planDetailsService.planDetailsResponseData.planProperties.planKey):null},e.prototype.getCurrentPlanKey=function(){return this.planDetailsService.planDetailsResponseData?this.planDetailsService.planDetailsResponseData.planProperties.planKey:null},e.prototype.setSelectedCountriesGridRowPref=function(e){var t;t=e.geographyKey&&e.cohortKey?e.geographyKey+"-"+e.cohortKey:e.geographyKey,this.planDetailsService.setSelectedCountriesGridRowPref(this.getCurrentPlanKey(),t),this.loggerService.log(this.planDetailsService.getSelectedCountriesGridRowPref(this.getCurrentPlanKey()))},e.prototype.removePreviousSelected=function(e){if(null!==this.defaultSelectedRowID){var t=e.getRowNode(this.defaultSelectedRowID);if(t){var n=[];t.data.rowSelected=!1,n.push(t.data),e.updateRowData({update:n})}this.defaultSelectedRowID=null}},e.prototype.setCardAndGraphData=function(e,t){if(this.countrySelectedForGraph===t)return!0;if(this.countrySelectedForGraph=t,this.setSelectedCountriesGridRowPref(t),this.removePreviousSelected(e),this.planDetailsHelperService.isActualOrProject(t)||this.planDetailsHelperService.isParentPlanRow(t)){var n=t.geographyKey&&t.cohortKey?this.manageCountriesService.getCountryAndCohortData(this.planDetailsService.planDetailsResponseData,t.geographyKey,t.cohortKey):this.manageCountriesService.getCountryAndCohortData(this.planDetailsService.planDetailsResponseData,t.geographyKey);this.planDetailsService.selectedCountrySubject.next(n)}else this.planDetailsService.selectedCountrySubject.next(t)},e.prototype.setSelectedGridRow=function(e,t,n){var l=this;if(e){this.defaultSelectedRowID=null,e.clearFocusedCell();var a=[],i=!1;t||n?(e.forEachNode((function(r){l.planDetailsHelperService.isActualOrProject(r.data)||l.planDetailsHelperService.isParentPlanRow(r.data)||(t&&n?r.data.geographyKey===t&&r.data.isCohortCountry&&r.data.cohortKey===n&&(r.data.isCohortExcluded?i=!0:(r.data.rowSelected=!0,a.push(r.data),l.updateGridRow(e,a),l.defaultSelectedRowID=r.id)):r.data.geographyKey!==t||r.data.isCohortCountry||(r.data.rowSelected=!0,a.push(r.data),l.updateGridRow(e,a),l.defaultSelectedRowID=r.id))})),t&&n&&i?(this.planDetailsService.setSelectedCountriesGridRowPref(this.getCurrentPlanKey(),t.toString()),this.setSelectedGridRow(e,t)):0===a.length&&(this.defaultSelectFirstRow(e,a),this.planDetailsService.setSelectedCountriesGridRowPref(this.getCurrentPlanKey(),null))):this.defaultSelectFirstRow(e,a)}},e.prototype.defaultSelectFirstRow=function(e,t){var n=e.getDisplayedRowAtIndex(0);n&&(n.data.rowSelected=!0,t.push(n.data),e.updateRowData({update:t}),this.setCardAndGraphData(e,n.data),this.defaultSelectedRowID=n.id)},e.prototype.updateGridRow=function(e,t){t.length>0&&(e.updateRowData({update:t}),this.setCardAndGraphData(e,t[0]))},e}(),Qn=C,el=function(){function e(e,t,n,a,i,r,o,s,u,d,c,p,h,m,g,S,f){var v=this;this.planDetailsService=e,this.geographyService=t,this.countriesGridService=n,this.planOptionsService=a,this.activatedRoute=i,this.router=r,this.studySummaryService=o,this.plansService=s,this.dialog=u,this.appDataService=d,this.columnPreferencesService=c,this.applicationContextService=p,this.renderer=h,this.mceSaveService=m,this.localeAppResourcesService=g,this.gridCustomGroupingService=S,this.gridRowSelectionPreferencesService=f,this.countrySelectionChange=new l.EventEmitter,this.moveToCard=new l.EventEmitter,this.updateDependentCohortCard=new l.EventEmitter,this.setGridVisibility=new l.EventEmitter,this.sticky=!1,this.formGroup=new x.k({}),this.contextMenuClass="countries-grid-context-menu",this.domLayout="autoHeight",this.subscriptions=new Array,this.studySummary={},this.rowData=[],this.isDynamicProjectionEnabled=!1,this.isDynamicProjectionChecked=!1,this.isSubjectDistributionTabEnabled=!1,this.isCountryOptionsOperation=!1,this.isInvalidGrid=!1,this.isMCSViewActive=!1,this.setRTEnable=!0,this.currentSolver="",this.disabledSubjectSolver=!1,this.disabledSolvers=!1,this.countrySolversLabel="",this.subjectDistributionLabel="",this.lastSubjectLabel="",this.minimumRateLabel="",this.subjetsLabel="",this.showCollapse=!1,this.selectedCohorts=[209],this.cohortData={},this.cohortSelectedList=[],this.isCohortPlan=!1,this.isSolversOpened=!1,this.selectedCohortKey=0,this.showCountyGridMessage=!1,this.PCEOption=Array(),this.isOverThreshold=!1,this.isOverThresholdSequence=!1,this.isCohortOptionSelectedTriangle=!1,this.isDepCohortPlan=!1,this.cohortToSolveFirstInSequence="",this.overThresholdSequenceMsg="",this.overThresholdComplexMsg="",this.overThresholdParallelMsg="",this.parallelPlanMessupCohort=!1,this.isHiddenWWData=!1,this.groupDefaultExpanded=-1,this.setReportingPeriod(),this.setDefaultColumnDef(),this.columnDefs=this.buildColumnDefs(),this.isDynamicProjectionChecked=this.planDetailsService.isDynamicProjectionChecked,this.countriesForm=new x.k({}),this.allColumnsDefined=new hn.a(!1),this.gridOptions={suppressMovableColumns:!1,suppressNoRowsOverlay:!0,getRowClass:function(e){return v.countriesGridService.isWWorStudyTarget(e)?"st-ww":""}},this.getMainMenuItems=function(e){return e.column.getId(),e.defaultItems};var C=this;C.subscriptions.push(this.planDetailsService.selectedCountrySubject$.subscribe((function(e){e&&(v.geoKeyForDynamicPrj={geoKey:e.geographyKey,geoLevel:e.geographyLevel},v.geoKeyForDynamicPrjRegion={geoKey:e.planParamsDetails.regionKey,geoLevel:"Region"},v.selectedRow=e)}))),this.setFrameworkComponent(),C.subscriptions.push(C.plansService.studyKey$.subscribe((function(e){e&&(C.currentSolver="")})))}return e.prototype.getCurrentStudyDetail=function(e){var t=this,n=e.planProperties.studyKey;n&&this.subscriptions.push(this.studySummaryService.getStudyName(n).subscribe((function(e){e&&(t.countriesGridService.currentStudyDetails=e)})))},e.prototype.setReportingPeriod=function(){switch(this.countriesGridService.getReportingPeriod(this.planDetailsService.studyKey?this.planDetailsService.studyKey:this.countriesGridService.getLastVisitedStudyKey())){case b.Wb.MONTH.VAL:this.reportingPeriod=b.Wb.MONTH.LABEL;break;case b.Wb.QUARTER.VAL:this.reportingPeriod=b.Wb.QUARTER.LABEL;break;case b.Wb.WEEK.VAL:this.reportingPeriod=b.Wb.WEEK.LABEL;break;default:this.reportingPeriod=b.Wb.DAY.LABEL}},e.prototype.setPCE=function(){this.countriesGridService.setPCE(),this.PCEOption=this.countriesGridService.pceOptions},e.prototype.getPCEData=function(){return Ue.__spread(this.getPCEDataForPinnedRows(),this.getPCEDataForGridRows())},e.prototype.getPCEDataForPinnedRows=function(){var e=this,t=[];return this.pinnedTopRowData.forEach((function(n){var l={};l=e.countriesGridService.processDataForPCE({data:n},l,e.columnApi,e.gridApi,e.planDetails),t.push(l)})),t},e.prototype.getPCEDataForGridRows=function(){var e=this,t=[];return this.gridApi.forEachNodeAfterFilterAndSort((function(n){var l={};l=e.countriesGridService.processDataForPCE(n,l,e.columnApi,e.gridApi,e.planDetails),t.push(l)})),t},e.prototype.optionClicked=function(e){switch(e.value){case b.Ob.EXPORT:this.countriesGridService.sendExcelExport(this.getPCEData(),!1,b.r);break;case b.Ob.PRINT:this.countriesGridService.sendDataToPrint(this.getPCEData());break;case b.Ob.COPY:this.countriesGridService.sendDataToCopy(this.getPCEData());break;case b.Ob.EXPAND:this.planDetailsService.expandCollapseCountriesGrid.next("Expand"),this.showCollapse=!0,this.countriesGridService.setExpandCollapseOption(!0),this.setCountryGridHeight(b.Ob.EXPAND);break;case b.Ob.COLLAPSE:this.planDetailsService.expandCollapseCountriesGrid.next(null),this.showCollapse=!1,this.countriesGridService.setExpandCollapseOption(!1),this.setCountryGridHeight(b.Ob.COLLAPSE)}},e.prototype.getResources=function(){this.localResources={slideToggleLeftText:this.countriesGridService.getCountryGridResources().MC_GRID_TOGGLE_LEFT_MESSAGE,slideToggleRightText:this.countriesGridService.getCountryGridResources().MC_GRID_TOGGLE_RIGHT_MESSAGE,expand:this.countriesGridService.getCountryGridResources().EXPANDGRID,collapse:this.countriesGridService.getCountryGridResources().COLLAPSEGRID}},e.prototype.onCountryViewChange=function(e){var t=this;if(this.countriesGridService.isGridEdited()){this.isMCEVisible=!1;var n=this.planDetailsService.showUnsavedDataConfirmation(),l=this.planDetailsService.getConfirmProp();n.afterClosed().subscribe((function(e){e&&e.action===l.okLabel?(t.planDetailsService.setFormStatus(!1),t.setMCEVisibility(!1)):t.isMCEVisible=!0}))}else this.setMCEVisibility(!1)},e.prototype.getCenterInitDetails=function(e,t){var n,l=this,a=!t.isPlan,i=e.value.isAdjustable,r=e.controls.siBody.controls.siField.controls;if("granular"===b.ac.PERCENT){n={percentCenterInitInfo:[]};var o=e.controls.siBody.controls.siMethod.controls,s={},u={},d={};s.slotNum=1,s.percOfCenterInit=25,s.noOfCenters=o.noOfSite25.value,s.noOfPeriods=o.period25.value,s.slotStartDate=this.dateFormatter(r.FSIDate.value),s.slotEndDate=this.dateFormatter(o.endDate25.value),u.slotNum=2,u.percOfCenterInit=50,u.noOfCenters=o.noOfSite50.value,u.noOfPeriods=o.period50.value,u.slotStartDate=this.dateFormatter(o.endDate25.value),u.slotEndDate=this.dateFormatter(o.endDate50.value),d.slotNum=3,d.percOfCenterInit=90,d.noOfCenters=o.noOfSite90.value,d.noOfPeriods=o.period90.value,d.slotStartDate=this.dateFormatter(o.endDate50.value),d.slotEndDate=this.dateFormatter(o.endDate90.value),n.percentCenterInitInfo.push({centerInitSlot:s}),n.percentCenterInitInfo.push({centerInitSlot:u}),n.percentCenterInitInfo.push({centerInitSlot:d})}else"granular"===b.ac.GRANULAR&&(n={granularCenterInitInfo:{centerInitSlot:[]}},(o=e.controls.siBody.controls.siCustomMethod.getRawValue()).initiationSchedule&&o.initiationSchedule.forEach((function(e,o){if(e.noOfCenters&&e.slotStartDate&&e.slotEndDate){var s={slotNum:o+1,noOfCenters:e.noOfCenters,slotStartDate:l.dateFormatter(e.slotStartDate),slotEndDate:l.dateFormatter(e.slotEndDate)};a&&i?(s.redistributed=r.sitesToRedistribute.value>0,s.usedCohortKeys=l.checkCohortPlan(t)?e.usedCohortKeys:""):s.usedCohortKeys=l.checkCohortPlan(t)?e.usedCohortKeys:"",s.actualSites="",!0===l.countriesGridService.isCohortAdjustment&&(s.slotType=e.slotType,s.centerKey=e.centerKey,s.hasSubjEvent=e.hasSubjEvent),n.granularCenterInitInfo.centerInitSlot.push(s)}})));return n},e.prototype.checkCohortPlan=function(e){return e.isCohortPlan===b.N.COHORT_PLAN},e.prototype.dateFormatter=function(e){return s.c.isDefined(e)?Qn(e).format("YYYY-MM-DD"):b.M},e.prototype.onPlanDetailsReceived=function(e){if(this.getAddCountryActions(),this.hideCountryGridMessageFlag(),this.planDetails=e,this.selectCountries&&this.selectCountries.isOpen()&&(this.selectCountries.toggleShowPanel(),this.geographyService.resetLists()),e.planProperties&&(this.planProperties=e.planProperties),e.parentPlanProperties&&(this.parentPlanProperties=e.parentPlanProperties),e.studyTargets&&(this.studyTargets=e.studyTargets),this.planDetailsService.setSaveDisability(!0),e.geoList){var t=this.countriesGridService.getFilteredGeographies([].concat(e.geoList.geography),this.isCountryOptionsOperation,this.planProperties,!0),n=this.countriesGridService.getStudyTarget(e),l=this.countriesGridService.getFilteredGeographies([].concat(n),this.isCountryOptionsOperation,this.planProperties,!1,!0);this.pinnedTopRowData=this.countriesGridService.getFilteredGeographies([].concat(e.geoList.geography),this.isCountryOptionsOperation,this.planProperties,!1),this.pinnedTopRowData=Ue.__spread(l,this.pinnedTopRowData),this.countriesGridService.isResetPlanOptionFormRequired()&&(this.countriesForm=new x.k({}),this.planOptionsService.planForm=this.countriesForm),this.isCountryOptionsOperation=!1,t=this.countriesGridService.validateCountryData(t,this.planProperties);var a=[];this.countriesGridData&&t.forEach((function(e){e.isNewCountry&&(e.isNewCountry=!1,a.push(e))})),this.geographyService.removeFromAvailableRegions(t),a.length>0?(this.gridApi.updateRowData({add:a}),this.gridRowSelectionPreferencesService.setCardAndGraphData(this.gridApi,a[0])):(this.setCountrySelection(t),this.showCountryGridMessageFlag()),this.countriesGridService.isHighlightFieldAplicable()?this.getApprovedPlanDetails(this.planProperties.parentPlankey,t):(this.rowData=JSON.parse(JSON.stringify(t)),this.countriesGridData=JSON.parse(JSON.stringify(t)))}this.isInvalidGrid=this.countriesGridService.isFormValidForallCountries(this.countriesGridData),this.allColumnsDefined.next(!0),this.isAdjustment=e&&!e.planProperties.isPlan,this.rowClassRules={"ag-row-focus":function(e){return e.data.rowSelected}}},e.prototype.processRowPostCreate=function(e){},e.prototype.viewportChanged=function(e){},e.prototype.firstDataRendered=function(e){console.log("%c firstDataRendered","color: red"),this.gridApi=e.api,this.countriesGridService.setRowExpandState(this.gridApi),this.isOverThreshold&&this.setInitialOverThresholdData();var t=this.gridApi&&this.gridApi.getDisplayedRowCount();if(console.log("rowCount",t),this.gridApi.setSortModel(this.applicationContextService.getSortingPref()),this.gridApi){var n=this.planDetailsService.isExpand;this.planDetailsService.editDataRowCount=Number(this.gridApi.getDisplayedRowCount())+Number(this.gridApi.getPinnedTopRowCount()),this.setCountryGridHeight(n?b.Ob.EXPAND:b.Ob.COLLAPSE)}},e.prototype.rowDataChanged=function(e){if(this.gridApi=e.api,this.countriesGridService.setRowExpandState(this.gridApi),void 0!==this.countriesGridService.worldWideExpandRow&&(this.isHiddenWWData=this.countriesGridService.worldWideExpandRow,this.worldWideNameClicked(this.isHiddenWWData)),this.setDefaultColumnDef(),this.showHideGridColumns(),this.setMCEFilterModel(),this.gridApi.refreshHeader(),this.gridRowSelectionPreferencesService.setSelectedRowPreference(e.api),this.gridApi){var t=this.planDetailsService.isExpand;this.planDetailsService.editDataRowCount=Number(this.gridApi.getDisplayedRowCount())+Number(this.gridApi.getPinnedTopRowCount()),this.setCountryGridHeight(t?b.Ob.EXPAND:b.Ob.COLLAPSE)}this.isOverThreshold&&Object.keys(this.planDetails).length>0&&this.setInitialOverThresholdData()},e.prototype.setCountrySelection=function(e){e&&e.length>0?this.countrySelectedForGraph!==e[0]&&(this.countrySelectedForGraph=e[0],this.countrySelectionChange.emit({data:e[0]})):null!==this.countrySelectedForGraph&&(this.countrySelectedForGraph=null,this.countrySelectionChange.emit({data:null}),this.planDetailsService.selectedCountrySubject.next(null))},e.prototype.getApprovedPlanDetails=function(e,t){var n=this;if(e)var l=this.countriesGridService.getApprovedPlanDetails(Number(e)).subscribe((function(e){e.result===b.Yb.Okay&&(n.countriesGridService.approvedPlanDetails=e.studyPlanDetails),n.rowData=JSON.parse(JSON.stringify(t)),n.countriesGridData=JSON.parse(JSON.stringify(t)),n.isInvalidGrid=n.countriesGridService.isFormValidForallCountries(n.countriesGridData),n.isAdjustment=e&&e.studyPlanDetails&&!e.studyPlanDetails.planProperties.isPlan,n.isOverThreshold&&n.setInitialOverThresholdData(),n.setMCEFilterModel(),l.unsubscribe()}))},e.prototype.setFrameworkComponent=function(){this.frameworkComponents={numberCellRenderer:Wn,numberCellEditor:Bn,dateCellRenderer:xn,dateCellEditor:Vn,cohortSelectionRenderer:kn,cohortSelectionEditor:wn,toggleButtonCellRenderer:Hn,copySingleValueComponent:Mn,countryOptionsWrapper:Tn,calculateSingleValueComponent:_n,labelCellRenderer:jn,defaultCellRenderer:Kn,labelCellNumberRenderer:Un,gridPinnedRowComponent:qn}},e.prototype.getExcludedCohortTooltipText=function(e){return"Y"===this.planDetails.planProperties.isCohortPlan&&e.data.isCohortExcluded&&e.data.isEdited?"\n          The planned values of the country cohort along with sites or site initiation ranges\n          that are mapped to the country cohort will be deleted once the plan is saved\n        ":""},e.prototype.setDefaultColumnDef=function(){var e=this;e.defaultColDef=e.isEditablePlan()?{width:100,editable:function(t){return e.countriesGridService.isRowEditable(t,e.planProperties)&&!0!==t.data.isCohortExcluded&&e.isCohortCellEditable(t.data)},suppressKeyboardEvent:this.disableArroKeys,menuTabs:["filterMenuTab","columnsMenuTab"],filterParams:{suppressMiniFilter:!0},cellStyle:{"text-align":"center"},lockPinned:!0,tooltip:function(t){return e.getExcludedCohortTooltipText(t)}}:{width:100,editable:!1,menuTabs:["filterMenuTab","columnsMenuTab"],filterParams:{suppressMiniFilter:!0},cellStyle:{"text-align":"center"},lockPinned:!0}},e.prototype.isSelectedCohort=function(e){return void 0!==this.selectedCohorts.find((function(t){return t.cohortKey===e}))},e.prototype.disableCellBasedOnCohortSelection=function(e,t){return this.countriesGridService.isCohortPlan()&&e.isCohortCountry()&&e.cohortKey!==t.cohortKey},e.prototype.isEditablePlan=function(){return this.planDetails&&this.planDetails.planProperties&&!this.planDetails.planProperties.isReadOnly&&!this.planDetails.planProperties.isPlanApproved&&!this.planDetails.planProperties.isPrevApproved&&this.countriesGridService.hasEditAccess()},e.prototype.isCohortPlanVoidOfCohorts=function(){return!(!this.planDetails||!this.planDetails.planProperties||"Y"!==this.planDetails.planProperties.isCohortPlan)&&(!this.planDetails.planProperties.cohortList||this.planDetails.planProperties.cohortList.cohortPlanParams.length<=0)},e.prototype.isSFEditable=function(e){if("Y"!==this.planDetails.planProperties.isCohortPlan)return!0;if(this.studySummary.info&&("Y"===this.studySummary.info.cohortIndicator&&this.studySummary.info.studyCohortType===b.o.S||"Y"!==this.studySummary.info.cohortIndicator)){if(!0===e.data.isCohortCountry)return!0}else if(this.studySummary.info&&"Y"===this.studySummary.info.cohortIndicator&&this.studySummary.info.studyCohortType===b.o.R&&!0!==e.data.isCohortCountry)return!0;return!1},e.prototype.isSRVisible=function(e){return"Y"!==this.planDetails.planProperties.isCohortPlan||!(!this.studySummary.info||"Y"!==this.studySummary.info.cohortIndicator||this.studySummary.info.studyCohortType!==b.o.S)||!(!this.studySummary.info||"Y"===this.studySummary.info.cohortIndicator)},e.prototype.isSREditable=function(e){if("Y"!==this.planDetails.planProperties.isCohortPlan)return!0===this.countriesGridService.isSRAvailable();if(this.studySummary.info&&"Y"===this.studySummary.info.cohortIndicator&&this.studySummary.info.studyCohortType===b.o.S){if(!0===this.countriesGridService.isSRAvailable()&&!0===e.data.isCohortCountry)return!0}else if(this.studySummary.info&&"Y"!==this.studySummary.info.cohortIndicator&&!0===this.countriesGridService.isSRAvailable()&&!0===e.data.isCohortCountry)return!0;return!1},e.prototype.isRREditable=function(e){if("Y"!==this.planDetails.planProperties.isCohortPlan)return!this.countriesGridService.isSRAvailable();if(this.studySummary.info&&"Y"===this.studySummary.info.cohortIndicator&&this.studySummary.info.studyCohortType===b.o.R){if(!0===e.data.isCohortCountry)return!0}else if(!0!==this.countriesGridService.isSRAvailable()&&!0===e.data.isCohortCountry)return!0;return!1},e.prototype.isDaysToSIParametersEditable=function(e,t){var n=e.data.planParamsDetails.isCountryLocked,l=e.data.planParamsDetails.isAdjustable,a=e.data.planParamsDetails.redistSites;return!(!this.isEditablePlan()||n||"percent"!==e.data.planParamsDetails.siteInitiationMethod||!t&&l&&!("Y"===this.planDetails.planProperties.isCohortPlan||s.c.isDefined(a,!0)&&a>0))},e.prototype.methodToUpdatePlan=function(e,t){"copy"===t?this.gridApi.redrawRows():"paste"===t?(e.data=this.countriesGridService.validateSingleCountryRowData(e.data,this.planProperties),this.refreshCells(e,null),this.countriesGridService.updatePlanDetails(this.getSelectedAndEditedRows(),this.getSelectedRows(),this.getEditedRows(),this.planProperties,this.planProperties&&this.planProperties.isOverThreshold&&this.selectedCohort&&this.selectedCohort.cohortKey),this.planDetailsService.setSaveDisability(!1)):"copyCountry"===t?e.studyPlanDetails&&(this.isCountryOptionsOperation=!0,this.planDetailsService.onPlanDetailsRefresh(e),this.planDetailsService.setRefreshPlanList(!0)):e&&(this.planDetailsService.getBriefStudyPlan(this.planDetailsService.planKey,!0),this.isCountryOptionsOperation=!0,this.planDetailsService.onPlanDetailsRefresh(e),this.planDetailsService.setRefreshPlanList(!0),this.planDetailsService.setSavePlanSuccess(e)),this.gridApi.refreshHeader()},e.prototype.validateAndRefreshNode=function(e){},e.prototype.getContext=function(){return{componentParent:this}},e.prototype.getGridData=function(){var e=[],t=this;t.gridApi.forEachNode((function(t){!1===t.data.isCohortCountry&&e.push(t.data)}));var n=[];return e.forEach((function(e){e.planParamsDetails.cohortList=[],t.gridApi.forEachNode((function(t){t.data.isCohortCountry&&e.data.geographyKey===t.data.geographyKey&&e.planParamsDetails.cohortList.push(t.data)})),n.push(e)})),n},e.prototype.gridReady=function(e){this.gridApi=e.api,this.columnApi=e.columnApi,this.loadPlanDetails(),this.countriesGridService.setCountriesGridAPI(e.api),this.planDetailsService.setCountriesGridAPI(e.api),this.planDetailsService.setSaveDisability(!0),this.subscribeToMCEPref()},e.prototype.setMCEFilterModel=function(){if(this.planDetails){this.excludeCohortRow();var e=this.applicationContextService.getMCEFilterPref(this.planDetails.planProperties.planKey);this.gridApi.setFilterModel(e)}},e.prototype.loadPlanDetails=function(){var e=this,t=this;t.subscriptions.push(t.planDetailsService.getPlanDetails().subscribe((function(n){if(n&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(n)){if(e.setReportingPeriod(),t.isDynamicProjectionChecked=!1,e.hideCountryGridMessageFlag(),e.planDetailsService.isDynamicProjectionChecked=e.isDynamicProjectionChecked,e.isOverThreshold=n.planProperties.isOverThreshold,e.countriesGridService.isOverThreshold=n.planProperties.isOverThreshold,t.onPlanDetailsReceived(n),e.getCurrentStudyDetail(n),t.planDetails=n,t.disabledSolvers=!e.isEditablePlan()||e.isCohortPlanVoidOfCohorts(),t.isDynamicProjectionEnabled=e.isDynProjectionEnabled(n),n.planProperties){if(e.disabledSubjectSolver=!n.planProperties.isPlan,t.isCohortPlan="Y"===n.planProperties.isCohortPlan,e.isSubjectDistributionTabEnabled=0!==n.planProperties.planCountries&&!e.isCohortPlanVoidOfCohorts(),t.isCohortPlan&&n.planProperties.cohortList){if("Y"===n.planProperties.isDepCohortPlan?(e.isDepCohortPlan=!0,e.countriesGridService.isDepCohortPlan=!0):(e.isDepCohortPlan=!1,e.countriesGridService.isDepCohortPlan=!1),e.cohortData.cohortList=Ue.__spread(e.countriesGridService.fetchCohortList(n.planProperties)),Array.isArray(e.cohortData.cohortList)&&e.cohortData.cohortList.length>0&&e.isDepCohortPlan&&e.isOverThreshold){var l=Ue.__spread(e.cohortData.cohortList.filter((function(e){return!e.reCalSeqNumber}))),a=Ue.__spread(e.cohortData.cohortList.filter((function(e){return e.reCalSeqNumber&&e.reCalSeqNumber>0}))).sort((function(e,t){return e.reCalSeqNumber-t.reCalSeqNumber})),i=Ue.__spread(l.concat(a));e.cohortData.cohortList=i}e.insertAllSelectionForCohortList(),e.selectedCohort||(e.selectedCohort=Object.assign({},e.cohortData.cohortList[0])),e.selectedCohortKey=e.selectedCohort?e.selectedCohort.cohortKey:0}else e.cohortData={},e.selectedCohort=null;n.planProperties.studyKey&&(console.log("%cLooking up study summary info","color: #9A3289"),t.countriesGridService.getSourceSummary(n.planProperties.studyKey).subscribe((function(e){t.studySummary.info=e})))}}else e.planDetails&&e.planDetails.geoList&&(t.rowData=[],e.showCountryGridMessageFlag());e.planDetailsService.setPasteVisisibility()})))},e.prototype.onSortChanged=function(e){this.applicationContextService.setSortingPref(e.api.getSortModel())},e.prototype.onGridColumnsChanged=function(e){this.gridApi=e.api,this.columnApi=e.columnApi,this.countriesGridService.setRowExpandState(this.gridApi),void 0!==this.countriesGridService.worldWideExpandRow&&(this.isHiddenWWData=this.countriesGridService.worldWideExpandRow,this.worldWideNameClicked(this.isHiddenWWData)),this.isOverThreshold&&this.setInitialOverThresholdData(),this.gridApi.getDisplayedRowCount()},e.prototype.setCountryGridHeight=function(e){void 0===e&&(e="collapse");var t=this.countriesGrid.nativeElement,n=this.countriesGridService.setCountryGridHeight(e,this.chartWrapper&&{offsetTop:this.chartWrapper.offsetTop,offsetHeight:this.chartWrapper.offsetHeight},this.gridApi,this.gridCardWrapper&&this.gridCardWrapper.nativeElement.offsetHeight,this.planDetailsService.editDataRowCount);this.renderer.setStyle(t,"height",n+"px"),this.gridApi.refreshView()},e.prototype.onSubmit=function(){},e.prototype.ngOnInit=function(){var e=this;this.isMCEVisible=this.applicationContextService.isMCEVisible,this.getResources(),this.setPCE(),this.solverTypeValues=b.gc,this.countriesGridService.updateUsageMetrics(),this.subscribeToRevertToLatestSaved(),this.subscribeToSavePlanSuccess(),this.subscribeToPlanKeyChange(),this.onSaveChange(),this.planOptionsService.planForm=this.countriesForm,this.loadLocalResourcesForSolvers(),this.errorMessageImg=b.kb.ICON_ERROR_MESSAGES,this.loadMsgForOverThresholdPlan(),this.autoGroupColumnDef={headerName:"",colId:"groupColumn",width:25,pinned:"left",suppressMovable:!0,lockPosition:!0,menuTabs:[],suppressToolPanel:!0,cellRendererParams:{suppressCount:!0},editable:!1,pinnedRowCellRenderer:"gridPinnedRowComponent",headerComponentFramework:Yn,headerComponentParams:function(t){return{rowData:e.rowData,pinnedTopRowData:e.pinnedTopRowData}},pinnedRowCellRendererParams:function(t){return{filterApplied:!1,isCohortPlan:e.planDetails.planProperties.isCohortPlan,localResources:e.localResources}},tooltip:function(t){return e.countriesGridService.setTooltipMessage(t)}},this.getDataPath=function(e){return e.geoHierarchy}},e.prototype.subscribeToMCEPref=function(){var e=this;e.subscriptions.push(e.columnPreferencesService.getMCEPreference().subscribe((function(t){t&&(e.showHideMCEColumnsByPref(),e.moveMCEColumnsByPref())})))},e.prototype.ngOnChanges=function(e){e&&e.chartsWrapperElementRef.currentValue&&(this.chartWrapper||(this.chartWrapper=e.chartsWrapperElementRef.currentValue))},e.prototype.loadMsgForOverThresholdPlan=function(){this.overThresholdComplexMsg=this.planDetailsService.getOverThresholdMessages().OVER_THRESHOLD_COMPLEX_MSG,this.overThresholdSequenceMsg=this.planDetailsService.getOverThresholdMessages().OVER_THRESHOLD_SEQUENCE_MSG,this.overThresholdParallelMsg=this.planDetailsService.getOverThresholdMessages().OVER_THRESHOLD_PARALLEL_COHORT_MSG},e.prototype.subscribeToRevertToLatestSaved=function(){var e=this,t=this;t.subscriptions.push(t.planDetailsService.getRevertToLatestSavedObservable().subscribe((function(n){n&&(t.countriesGridService.setEditedCountries([]),t.countriesGridService.setSelectedAndEditedCountriesGridData([]),t.countriesForm=new x.k({}),t.planOptionsService.planForm=t.countriesForm,e.planDetailsService.setPlanDetails(n),e.planDetailsService.setRefreshPlanList(!0))})))},e.prototype.setNotExistPlanParameters=function(e,t){for(var n in e.planParamsDetails)t.planParamsDetails.hasOwnProperty(n)||(t.planParamsDetails[n]=e.planParamsDetails[n])},e.prototype.onRevertToApprovedPlan=function(e,t){var n=this,l=this;this.planDetailsService.getBriefStudyPlanForRevertToLatestSaved(e,!0,!1,!1).subscribe((function(e){if(e&&!e.error&&l.planDetails){var a=n.planDetailsService.getCountryInformationWithAllCohort(e,t);if(a.length>0&&l.gridApi){var i=n.countriesGridService.getReportingPeriod(n.planDetailsService.studyKey);l.gridApi.forEachNode((function(e){var n=a.findIndex((function(t){return!e.data.isCohortCountry&&t.geographyKey===e.data.geographyKey||e.data.isCohortCountry&&t.geographyKey===e.data.geographyKey&&t.cohortKey===e.data.cohortKey}));if(n>-1){var r=JSON.parse(JSON.stringify(e.data));e.data=a[n],l.setNotExistPlanParameters(r,e.data),e.data.planParamsDetails.redistSites=0,e.data.isEdited=!0,e.data.planParamsDetails.isCountryAdjusted=!1,e.data.planParamsDetails.isRevertToApprovedPlan=!0,e.data.planParamsDetails.isCountryLocked=!1,"Y"===l.planProperties.isCohortPlan&&e.data.isCohortCountry&&(e.data.isCohModified=!0),e.data=l.countriesGridService.validateSingleCountryRowData(e.data,l.planProperties),l.countriesGridService.updateCalculatedSRRR(e,i),l.refreshCells(e,null)}else t===e.data.geographyKey&&e.data.isCohortCountry&&(e.data.isCohortExcluded=!0,l.refreshCells(e,null))})),l.planDetailsService.setSaveDisability(!1),n.planDetailsService.setFormStatus(!0),n.planDetailsService.setReadOnly(!1);var r=l.countriesGridService.getCountryData();l.isInvalidGrid=l.countriesGridService.isFormValidForallCountries(r),l.gridApi.refreshHeader(),l.countriesGridService.updatePlanDetails(l.getSelectedAndEditedRows(),l.getSelectedRows(),l.getEditedRows(),l.planProperties,l.planProperties&&l.planProperties.isOverThreshold&&l.selectedCohort&&l.selectedCohort.cohortKey)}}}))},e.prototype.subscribeToPlanKeyChange=function(){var e=this,t=this;t.subscriptions.push(t.planDetailsService.getPlanChangedObservable().subscribe((function(n){n&&(t.countriesGridService.setSelectedCohort(null),t.selectedCohortKey=0,t.selectedCohort=null,t.countriesGridService.setEditedCountries([]),t.countriesGridService.setSelectedAndEditedCountriesGridData([]),t.countriesForm=new x.k({}),e.router.navigate(["/plans","plandetails",e.planDetailsService.planKey,"countries"]))})))},e.prototype.getPlanDetails=function(){return this.planDetailsService.getPlanDetails()},e.prototype.getCohortInfo=function(){var e,t=this,n=-1;if(console.log("this.selectedRow>>",this.selectedRow),this.planDetails.planProperties&&"Y"===this.planDetails.planProperties.isCohortPlan){if(this.selectedRow&&this.selectedRow.isCohortCountry&&this.studySummaryService&&this.studySummaryService.cohortList){var l=this.studySummaryService.cohortList.filter((function(e){return e.cohortKey===t.selectedRow.cohortKey&&"Unmapped"!==e.cohortID}));l&&l.length>0&&(n=l[0].studyCohortKey),e={key:this.selectedRow.cohortKey,name:this.selectedRow.cohortName,studyCohortKey:n}}else e={key:-1,name:"All Cohorts",studyCohortKey:n};return e}return null},e.prototype.subscribeToSavePlanSuccess=function(){var e=this;e.subscriptions.push(e.planDetailsService.getSavePlanSuccessObservable().subscribe((function(t){t&&(e.getEditedRows().length>0&&(e.countriesForm=new x.k({})),e.countriesGridService.setSelectedAndEditedCountriesGridData([]))})))},e.prototype.onSelectOptions=function(e){var t=this;switch(e){case this.countriesGridService.getAddCountryOptionsResources().SELECT_COUNTRIES_FROM_SOURCE_OR_TEMPLATE:this.countriesGridService.isGridEdited()?this.planDetailsService.showUnsavedDataConfirmation().afterClosed().subscribe((function(e){e.action===t.planDetailsService.getConfirmProp().okLabel&&t.countriesGridService.importExportCountries(!0)})):this.countriesGridService.importExportCountries(!0);break;case this.countriesGridService.getAddCountryOptionsResources().DOWNLOAD_PLANS_TEMPLATE:this.countriesGridService.importExportCountries(!1)}},e.prototype.onAddCountries=function(e){this.addCountriesToGrid(e)},e.prototype.addCountriesToGrid=function(e){var t=this,n=this,l=[];if(e){e.forEach((function(e){e.countries.forEach((function(e){l.push({geographyKey:e.key,geographyName:e.name})}))}));var a=!0;null!=this.planDetails.planProperties.isPlan&&(a=this.planDetails.planProperties.isPlan);var i=this.countriesGridService.setParamsBasedOnPlantype(),r=this.countriesGridService.createAddCountryParam(l),o=this.countriesGridService.addCountryList(a,i,r).subscribe((function(e){o.unsubscribe(),e&&(l.forEach((function(e){if(n.planDetails&&"Y"===n.planDetails.planProperties.isCohortPlan)if(Array.isArray(n.planDetails.planProperties.cohortList.cohortPlanParams))n.planDetails.planProperties.cohortList.cohortPlanParams.forEach((function(t){l.push({geographyKey:e.geographyKey,geographyName:e.geographyName,cohortKey:t.cohortKey,cohortName:t.cohortName,isCohortExcluded:!1,isCountryCohort:!1})}));else{var t=n.planDetails.planProperties.cohortList.cohortPlanParams;l.push({geographyKey:e.geographyKey,geographyName:e.geographyName,cohortKey:t.cohortKey,cohortName:t.cohortName,isCohortExcluded:!1,isCountryCohort:!1})}})),l.forEach((function(t){console.log("addCountrySubscription",n.planDetails.planProperties.isCohortPlan,t);var l=e.geoList.geography.findIndex((function(e){return e.geographyKey===t.geographyKey&&(n.planDetails&&"Y"!==n.planDetails.planProperties.isCohortPlan||e.cohortKey===t.cohortKey)}));console.log("addCountrySubscription",l),l>-1&&(console.log("addCountrySubscription new country",e.geoList.geography[l]),e.geoList.geography[l].isNewCountry=!0)})),t.planDetailsService.setRefreshPlanList(!0),t.planDetailsService.setPlanDetails(e))}))}},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){e.unsubscribe()})),this.planDetailsService.setCountriesGridAPI(null),this.countriesGridService.clearCountriesData(),this.subscriptions=null,this.countriesGridService.setSolverBasedValidationFlag(!1),this.planDetailsService.isDynamicProjectionChecked=!1},e.prototype.routingToDCPView=function(e,t){if(this.planDetailsService.getIsPopupConfirmationRequired()){var n=this.countriesGridService.showUnsavedDataConfirmation();this.handleCountryNavigation(n,e,t)}else this.navigateToCountry(e,t)},e.prototype.countryNameClicked=function(e,t){this.routingToDCPView(e,t)},e.prototype.handleCountryNavigation=function(e,t,n){var l=this,a=this.planDetailsService.getConfirmProp(),i=e.afterClosed().subscribe((function(e){i.unsubscribe(),e&&e.action===a.okLabel&&l.navigateToCountry(t,n)}))},e.prototype.navigateToCountry=function(e,t){var n=this.activatedRoute.snapshot.paramMap.get("plankey"),l={};t&&t.data&&(t.data.isCohortCountry?(l.parameterType=Ln.a.COHORT,l.parameterKey=t.data.cohortKey):(l.parameterType=Ln.a.COUNTRY,l.parameterKey=e)),this.planDetailsService.setSelectedEnrollmentParameterDetails(l),this.router.navigate(t.data&&t.data.planParamsDetails&&t.data.planParamsDetails.siteInitiationMethod===b.ac.GRANULAR?["/plans","plandetails",n,"countries",e,b.ac.GRANULAR]:["/plans","plandetails",n,"countries",e])},e.prototype.disableArroKeys=function(e){var t=e.event.keyCode;return e.editing&&(38===t||40===t||37===t||39===t)},e.prototype.excludeCohort=function(){this.planDetailsService.setSaveDisability(!1),this.planDetailsService.setReadOnly(!1)},e.prototype.buildColumnDefs=function(){var e=this,t=[];return t.push({headerName:"",field:"",width:40,suppressMovable:!0,lockPosition:!0,headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,cellClass:"ag-checkbox-cell",checkboxSelection:function(t){return!e.countriesGridService.isCohortPlan()||!t.data.isCohortCountry||e.currentSolver!==b.gc.SUBJECT_DISTRIBUTION||t.data.isSelectedCohort},editable:!1,pinned:"left",menuTabs:[],suppressToolPanel:!0,suppressMenu:!0}),t.push({headerName:e.countriesGridService.getCountryGridResources().STATUS,headerTooltip:e.countriesGridService.getCountryGridResources().STATUS,field:"planParamsDetails.planStatus.value",cellRenderer:"",cellRendererFramework:An,cellRendererParams:function(t){return{hideStatusIcon:e.countriesGridService.isWWorStudyTarget(t)}},width:80,cellStyle:{"text-align":"center"},editable:!1,suppressMovable:!0,lockPosition:!0,pinned:"left",menuTabs:["filterMenuTab","columnsMenuTab"],suppressToolPanel:!0,colName:"Status",colValueToMap:"planParamsDetails.planStatus.value"}),t.push({headerName:e.countriesGridService.getCountryGridResources().COUNTRY_NAME,headerTooltip:e.countriesGridService.getCountryGridResources().COUNTRY_NAME,colId:P.a.GEOGRAPHY_NAME,field:P.a.GEOGRAPHY_NAME,editable:!1,cellClass:"",suppressMovable:!0,lockPosition:!0,pinned:"left",suppressToolPanel:!0,width:220,menuTabs:["filterMenuTab","columnsMenuTab"],cellRenderer:"",cellRendererFramework:En,cellRendererParams:function(t){return{planKey:e.activatedRoute.snapshot.paramMap.get("plankey"),router:e.router,isEditablePlan:e.isEditablePlan()}},comparator:tl,valueGetter:function(e){return e.data.geographyName},tooltip:function(e){return e.valueFormatted?e.valueFormatted:e.value},colName:"Country Name",colValueToMap:P.a.GEOGRAPHY_NAME,cellStyle:function(e){return{"text-align":"left"}}}),t.push({headerName:"",editable:!1,cellRendererSelector:function(t){var n=e.countriesGridService.isWWorStudyTarget(t);return n&&!0===t.data.isCohortCountry||n&&!1===t.data.isCohortCountry?null:{component:"countryOptionsWrapper"}},cellRendererParams:function(t){return e.planDetails?{planKey:e.planDetails.planProperties.planKey,studyKey:e.planDetails.planProperties.studyKey,planType:e.planDetails.planProperties.isPlan,isReadOnly:e.planDetails.planProperties.isReadOnly,isCohortPlan:e.planDetails.planProperties.isCohortPlan,isPlanApproved:e.planDetails.planProperties.isPlanApproved,isPrevApproved:e.planDetails.planProperties.isPrevApproved,getFPA:e.planDetails.planProperties.FPA,version:e.planDetails.planProperties.version,parentPlankey:e.planDetails.planProperties.parentPlankey}:{}},width:70,pinned:"left",suppressMovable:!0,lockPosition:!0,suppressMenu:!0,suppressToolPanel:!0,colId:P.a.COUNTRY_OPTION_ID,headerComponentFramework:In,headerComponentParams:function(t){return e.planDetails?{planKey:e.planDetails.planProperties.planKey,router:e.router,studyKey:e.planDetails.planProperties.studyKey,planType:e.planDetails.planProperties.isPlan,isCohortPlan:e.planDetails.planProperties.isCohortPlan,isReadOnly:e.planDetails.planProperties.isReadOnly,isPlanApproved:e.planDetails.planProperties.isPlanApproved,isPrevApproved:e.planDetails.planProperties.isPrevApproved,getFPA:e.planDetails.planProperties.FPA?e.planDetails.planProperties.FPA:"",version:e.planDetails.planProperties.version,isSREnabled:e.countriesGridService.isSRAvailable(),isRTypeCohortStudy:e.plansService.isRTypeCohortStudy(),isDepCohortPlan:"Y"===e.planProperties.isDepCohortPlan}:{}},cellStyle:function(e){return{"margin-top":"3px"}}}),t.push({headerName:e.countriesGridService.getCountryGridResources().REGION,headerTooltip:e.countriesGridService.getCountryGridResources().REGION,editable:!1,valueGetter:function(t){var n=e.geographyService.getRegionByCountry({key:t.data.geographyKey});return n?n.name:""},cellStyle:function(t){var n={};return n["text-align"]=(t.data.isCohortCountry&&(t.data.isCohortExcluded||e.isCohortCellDisabled(t.data)),"left"),n},field:P.a.GEOGRAPHY_REGION_NAME,tooltip:function(e){return e.valueFormatted?e.valueFormatted:e.value},width:130,colName:"Region Name",colValueToMap:P.a.GEOGRAPHY_REGION_NAME}),t.push({headerName:"",headerTooltip:"",width:10,colId:"isCohortExcluded",editable:!1,suppressMovable:!0,cellStyle:function(e){return{display:"none"}},suppressMenu:!0,suppressToolPanel:!0,valueGetter:function(e){return e.data.isCohortCountry?e.data.isCohortExcluded?"exclude":"include":"All cohort"}}),t.push({headerName:e.countriesGridService.getCountryGridResources().COHORT_NAME,headerTooltip:e.countriesGridService.getCountryGridResources().COHORT_NAME,suppressMovable:!0,editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&e.countriesGridService.hasEditAccess()&&!0!==t.data.isCohortCountry&&!t.data.planParamsDetails.isCountryLocked},cellRendererSelector:function(t){return e.countriesGridService.getStudyTargetAndWorldWide().Study_Target===t.data.geographyLevel?null:{component:"cohortSelectionRenderer"}},cellRendererParams:function(t){return{disabled:!e.isEditablePlan()||!e.countriesGridService.hasEditAccess()||t.data.planParamsDetails.isCountryLocked}},cellStyle:function(t){var n={};return n["text-align"]=(t.data.isCohortCountry&&t.data.isCohortExcluded||e.isCohortCellDisabled(t.data),"left"),n},colId:"cohortName",tooltipField:"cohortName",menuTabs:["filterMenuTab","columnsMenuTab"],cellEditor:"cohortSelectionEditor",field:P.a.COHORT_NAME,cellEditorParams:function(t){var n=t.data.geographyKey,l=[];return t.api.forEachNode((function(t,a){if(t.data.geographyKey===n&&!0===t.data.isCohortCountry){var i=!0;!e.planDetails||e.planDetails.planProperties.isPlan||t.data.planParamsDetails.isDeletable||(i=!1),l.push({id:t.data.cohortKey,label:t.data.cohortName,checked:!t.data.isCohortExcluded,isExcludable:i})}})),{cohortList:l}},suppressSorting:!1,suppressToolPanel:!0,valueSetter:function(t){if(t.node.data&&t.node.data.isEdited&&!0===t.node.data.isEdited){e.makeCountryDirtyOnCohortChange(t.node.data.geographyKey);var n=JSON.parse(t.newValue),l=t.data.geographyKey,a=[];void 0!==t.node.data.planParamsDetails.cohortNumSites&&(e.cohortNumSites=t.node.data.planParamsDetails.cohortNumSites),t.api.forEachNode((function(i,r){if(i.data.geographyKey===l){if(!i.data.isCohortCountry){var o=n.find((function(e){return!0===e.checked}));i.data.allCohortExcluded=!o,a.push(i)}var u=n.find((function(e){return e.id===i.data.cohortKey}));void 0!==u&&(i.data.isEdited=i.data.isCohortExcluded===u.checked||i.data.isEdited,u.checked&&i.data.isCohortExcluded&&!s.c.isDefined(i.data.planParamsDetails.ARTB)&&(i.data.planParamsDetails.ARTB=e.planDetails.planProperties.LSR),i.data.isCohortExcluded=!u.checked,a.push(i),e.refreshCells(t.node,[P.a.NUM_SITES]))}})),t.api.redrawRows({rowNodes:a}),e.setMCEFilterModel(),"Y"===e.planProperties.isCohortPlan&&t.api.forEachNode((function(n){n.data.geographyKey===t.data.geographyKey&&(n.data.isCohortCountry&&e.cohortNumSites&&e.cohortNumSites.length>0?e.cohortNumSites.map((function(e){n.data.cohortKey===e.cohortKey&&(n.data.planParamsDetails.numSites=e.numSites)})):n.data.planParamsDetails.numSites=t.data.planParamsDetails.numSites,e.refreshCells(n,[P.a.NUM_SITES,P.a.RE_DIST_SITES,P.a.FSI,P.a.SAS,P.a.DAYS_TO_25,P.a.DAYS_TO_50,P.a.DAYS_TO_90]))}))}},width:120,colName:"Cohort",colValueToMap:"cohortName"}),t.push({headerName:e.countriesGridService.getCountryGridResources().RT,headerTooltip:e.countriesGridService.getCountryGridResources().RANDOMIZATION_TARGET,field:P.a.RT,cellRendererSelector:function(t){var n=e.isEditablePlan(),l=e.isCohorStatus(e,t),a=e.countriesGridService.isWWorStudyTarget(t),i=e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi);return n&&!a&&l&&!i&&e.setRTEnable?{component:"numberCellRenderer"}:{component:"defaultCellRenderer"}},editable:function(t){if(e.countriesGridService.isWWorStudyTarget(t))return!1;var n=e.isEditablePlan(),l=e.isCohorStatus(e,t),a=e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi);return n&&!t.data.planParamsDetails.isCountryLocked&&l&&(e.planDetails&&"Y"!==e.planDetails.planProperties.isCohortPlan||!0!==t.data.isCohortExcluded)&&e.isCohortCellEditable(t.data)&&!a&&e.setRTEnable},cellRendererParams:function(t){t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateRT(t.node.data.planParamsDetails.enrollmentTarget,b.sc.MIN_ENROLLMENT_TARGET,b.sc.MAX_ENROLLMENT_TARGET,t.node.data.isCohortCountry);var n=e.countriesGridService.getCohortEnrollmentTarget(e.planDetails.planProperties,t),l=t.data.geographyLevel===e.countriesGridService.getStudyTargetAndWorldWide().WW;return{numDecimals:0,inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(!0===t.data.isCohortExcluded||e.isCohortCellDisabled(t.data)),fieldType:"number",isHighlighted:e.countriesGridService.isCellHighlighted(t,"enrollmentTarget"),cohortEnrollmentTarget:n,isWW:l}},valueGetter:function(e){return e.data.planParamsDetails.enrollmentTarget},valueSetter:function(e){return e.node.data.planParamsDetails.enrollmentTarget=e.newValue,!0},cellEditor:"numberCellEditor",cellEditorParams:{step:1,decimals:0,signedInteger:!0},width:120,colName:"Randomization Target",colValueToMap:P.a.RT,cellStyle:function(e){return{}}}),t.push({headerName:e.countriesGridService.getCountryGridResources().SCREENTARGET,headerTooltip:e.countriesGridService.getCountryGridResources().SCREENING_TARGET,field:P.a.SCREENING_TARGET,colId:P.a.SCREENING_TARGET,cellRendererSelector:function(e){return{component:"defaultCellRenderer"}},cellRendererParams:function(t){return{fieldType:"number",isHighlighted:e.countriesGridService.isCellHighlighted(t,"screeningTarget")}},editable:!1,width:140,cellEditor:"numberCellEditor",colName:"Screening Target",colValueToMap:P.a.SCREENING_TARGET,cellStyle:function(e){return{}}}),t.push({headerName:e.countriesGridService.getCountryGridResources().ARTB,headerTooltip:e.countriesGridService.getCountryGridResources().ACHIEVE_RANDOMIZATION_BY,field:P.a.ARTB,colId:P.a.ARTB,valueFormatter:al,cellRendererParams:function(t){return t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateARTB(t.data.planParamsDetails.ARTB,e.countriesGridService.getCountryFSI(t.node.data),t.data.planParamsDetails.FSS),{validationMsg:e.countriesGridService.validateARTB(t.data.planParamsDetails.ARTB,e.countriesGridService.getCountryFSI(t.node.data),t.data.planParamsDetails.FSS),inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(!0===t.data.isCohortExcluded||e.isCohortCellDisabled(t.data)),fieldType:"date",isHighlighted:e.countriesGridService.isCellHighlighted(t,"ARTB")}},valueGetter:function(e){return e.data.planParamsDetails.ARTB},valueSetter:function(t){return t.node.data.planParamsDetails.ARTB=t.newValue?s.c.formatDate(t.newValue):t.newValue,e.refreshCells(t.node,[P.a.GEOGRAPHY_NAME,P.a.ARTB,P.a.FSI]),!0},cellRendererSelector:function(t){var n=e.countriesGridService.isWWorStudyTarget(t);return e.isEditablePlan()&&!n&&e.isCohorStatus(e,t)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?{component:"dateCellRenderer"}:{component:"defaultCellRenderer"}},editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&!t.data.planParamsDetails.isCountryLocked&&e.isCohorStatus(e,t)&&(e.planDetails&&"Y"!==e.planDetails.planProperties.isCohortPlan||!0!==t.data.isCohortExcluded)&&e.isCohortCellEditable(t.data)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)},cellEditor:"dateCellEditor",width:140,colName:"Achieve Randomization By",colValueToMap:P.a.ARTB,cellStyle:function(e){return{}}}),t.push({headerName:e.countriesGridService.getCountryGridResources().LSS,headerTooltip:e.countriesGridService.getCountryGridResources().LAST_SUBJECT_SCREENED,field:P.a.PLSS,colId:P.a.PLSS,cellRendererSelector:function(e){return{component:"defaultCellRenderer"}},cellRendererParams:function(t){return{fieldType:"date",isHighlighted:e.countriesGridService.isCellHighlighted(t,"PLSS")}},editable:!1,width:140,valueFormatter:al,colName:"First Subject Randomized",colValueToMap:P.a.PLSS,cellStyle:function(e){return{}}}),t.push({headerName:e.countriesGridService.getCountryGridResources().PLSR,headerTooltip:e.countriesGridService.getCountryGridResources().PLANNED_LSR,field:P.a.PLSR,cellRendererSelector:function(e){return{component:"defaultCellRenderer"}},cellRendererParams:function(t){return{fieldType:"date",isHighlighted:e.countriesGridService.isCellHighlighted(t,"PLSR")}},valueFormatter:al,editable:!1,width:110,colName:"Planned Last Subject Randomized",colValueToMap:P.a.PLSR,cellStyle:function(e){return{}}}),t.push({headerName:e.countriesGridService.getCountryGridResources().OVER_ENR,headerTooltip:e.countriesGridService.getCountryGridResources().OVER_ENROLLMENT,field:P.a.OE,colId:P.a.OE,valueFormatter:nl,cellRendererSelector:function(t){return e.isEditablePlan()&&!e.countriesGridService.isWWorStudyTarget(t)&&e.isCohorStatus(e,t)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?{component:"numberCellRenderer"}:{component:"defaultCellRenderer"}},editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&!t.data.planParamsDetails.isCountryLocked&&e.isCohorStatus(e,t)&&(e.planDetails&&"Y"!==e.planDetails.planProperties.isCohortPlan||!0!==t.data.isCohortExcluded)&&e.isCohortCellEditable(t.data)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)},cellRendererParams:function(t){return t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateOverEnrollment(t.data.planParamsDetails.overRecruitmentPercent,b.sc.MIN_OVER_RECRUITMENT_PERCENT,b.sc.MAX_OVER_RECRUITMENT_PERCENT,t.data.isCohortCountry),{numDecimals:1,validationMsg:e.countriesGridService.validateOverEnrollment(t.data.planParamsDetails.overRecruitmentPercent,b.sc.MIN_OVER_RECRUITMENT_PERCENT,b.sc.MAX_OVER_RECRUITMENT_PERCENT,t.data.isCohortCountry),inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(!0===t.data.isCohortExcluded||e.isCohortCellDisabled(t.data)),fieldType:"number",isHighlighted:e.countriesGridService.isCellHighlighted(t,"overRecruitmentPercent")}},valueGetter:function(t){return!t.data.isCohortCountry&&e.countriesGridService.isCohortPlan()?(t.data.planParamsDetails.overRecruitmentPercent=t.data.planParamsDetails.overRecruitmentPercent?t.data.planParamsDetails.overRecruitmentPercent:0,s.c.formatDecimal(t.data.planParamsDetails.overRecruitmentPercent)):t.data.geographyLevel===e.countriesGridService.getStudyTargetAndWorldWide().Study_Target||t.data.isCohortCountry&&t.data.geographyLevel===e.countriesGridService.getStudyTargetAndWorldWide().WW?void 0:s.c.isDefined(t.data.planParamsDetails.overRecruitmentPercent)?s.c.formatDecimal(t.data.planParamsDetails.overRecruitmentPercent):""},valueSetter:function(t){return!t.data.isCohortCountry&&e.countriesGridService.isCohortPlan()&&null==t.newValue&&(t.newValue=0),t.node.data.planParamsDetails.overRecruitmentPercent=t.newValue,!0},cellEditor:"numberCellEditor",cellEditorParams:{step:.1,decimals:1,signedDecimal:!0},colName:"Over-Enrollment",colValueToMap:P.a.OE,width:70,cellStyle:function(e){return{}}}),t.push({headerName:e.reportingPeriod+" "+e.countriesGridService.getCountryGridResources().SR,headerTooltip:e.reportingPeriod+" "+e.countriesGridService.getCountryGridResources().SCREENING_RATE,colId:P.a.SR,field:P.a.SR,width:100,valueFormatter:ll,cellRendererSelector:function(t){var n=e.countriesGridService.isWWorStudyTarget(t);return e.isEditablePlan()&&!n&&e.isSREditable(t)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?{component:"numberCellRenderer"}:{component:"defaultCellRenderer"}},editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&!t.data.planParamsDetails.isCountryLocked&&e.countriesGridService.isSRAvailable()&&e.isSREditable(t)&&!0!==t.data.isCohortExcluded&&e.isCohortCellEditable(t.data)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)},cellRendererParams:function(t){return t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateSR(t.data.planParamsDetails.calculatedSR,t.data.planParamsDetails.SFR,0,b.sc.MAX_SR,e.countriesGridService.getSolverBasedValidationFlag(),t.data.isCohortExcluded,e.countriesGridService.isCohortPlanCountryRow(t.data)),{numDecimals:3,inputDisabled:!t.data.planParamsDetails.isCountryLocked&&!0===t.data.isCohortExcluded||e.isCohortCellDisabled(t.data),fieldType:"number",isHighlighted:e.countriesGridService.isCellHighlighted(t,"SR")}},valueGetter:function(t){return e.countriesGridService.isCohortPlan()&&t.data.isCohortCountry?e.isSRVisible(t)?t.data.planParamsDetails.calculatedSR:"":t.data.planParamsDetails.calculatedSR},valueSetter:function(t){if(s.c.isDefined(t.newValue,!0)){var n=t.node.data.planParamsDetails.SFR;s.c.isDefined(n)||(n=0),e.countriesGridService.getReportingPeriod(e.planDetailsService.studyKey),t.node.data.planParamsDetails.calculatedSR=t.newValue,t.node.data.planParamsDetails.SR=t.newValue;var l=e.countriesGridService.calculateRR(t.node.data.planParamsDetails.SR,n);t.node.data.planParamsDetails.RR=l,t.node.data.planParamsDetails.calculatedRR=l,!e.planProperties.isPlan&&t.node.data.planParamsDetails.isAdjustable&&t.node.data.planParamsDetails.parentPlan.SR!==t.node.data.planParamsDetails.SR&&(t.node.data.planParamsDetails.actEnrlWhnSRMod=t.node.data.planParamsDetails.actuals.RT,t.node.data.planParamsDetails.dateSRMod=new Date),e.refreshCells(t.node,[P.a.GEOGRAPHY_NAME,P.a.SR,P.a.SFR])}else t.node.data.planParamsDetails.calculatedRR="",t.node.data.planParamsDetails.SR="",t.node.data.planParamsDetails.RR="",t.node.data.planParamsDetails.calculatedSR="";return!0},cellEditor:"numberCellEditor",cellEditorParams:{step:.001,decimals:3,signedDecimal:!0},colName:"Weekly Screening Rate",colValueToMap:P.a.SR}),t.push({headerName:e.reportingPeriod+" "+e.countriesGridService.getCountryGridResources().RR,headerTooltip:e.reportingPeriod+" "+e.countriesGridService.getCountryGridResources().RANDOMIZATION_RATE,colId:P.a.RR,field:P.a.RR,width:100,valueFormatter:ll,cellRendererSelector:function(t){var n=e.countriesGridService.isWWorStudyTarget(t);return e.isEditablePlan()&&!n&&e.isRREditable(t)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?{component:"numberCellRenderer"}:{component:"defaultCellRenderer"}},editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&!t.data.planParamsDetails.isCountryLocked&&e.isRREditable(t)&&!0!==t.data.isCohortExcluded&&e.isCohortCellEditable(t.data)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)},cellRendererParams:function(t){return t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateRR(t.node.data.planParamsDetails.calculatedRR,t.node.data.planParamsDetails.SFR,0,b.sc.MAX_RR,e.countriesGridService.getSolverBasedValidationFlag(),t.node.data.isCohortExcluded,e.countriesGridService.isCohortPlanCountryRow(t.data)),{numDecimals:3,inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(!0===t.data.isCohortExcluded||e.isCohortCellDisabled(t.data)),fieldType:"number",isHighlighted:e.countriesGridService.isCellHighlighted(t,"RR")}},valueGetter:function(t){return!t.data.isCohortCountry&&e.countriesGridService.isCohortPlan()?(t.data.planParamsDetails.calculatedRR=t.data.planParamsDetails.calculatedRR?t.data.planParamsDetails.calculatedRR:0,s.c.formatDecimal(t.data.planParamsDetails.calculatedRR)):t.data.planParamsDetails.calculatedRR},valueSetter:function(t){if(s.c.isDefined(t.newValue,!0)){var n=t.node.data.planParamsDetails.SFR;s.c.isDefined(n)||(n=0),t.node.data.planParamsDetails.calculatedRR=t.newValue,t.node.data.planParamsDetails.RR=t.newValue;var l=e.countriesGridService.calculateSR(t.node.data.planParamsDetails.RR,n);t.node.data.planParamsDetails.SR=l,t.node.data.planParamsDetails.calculatedSR=l,!e.planProperties.isPlan&&t.node.data.planParamsDetails.isAdjustable&&t.node.data.planParamsDetails.parentPlan.SR!==t.node.data.planParamsDetails.SR&&(t.node.data.planParamsDetails.actEnrlWhnSRMod=t.node.data.planParamsDetails.actuals.RT,t.node.data.planParamsDetails.dateSRMod=new Date),e.refreshCells(t.node,[P.a.GEOGRAPHY_NAME,P.a.RR,P.a.SFR])}else t.node.data.planParamsDetails.calculatedSR="",t.node.data.planParamsDetails.calculatedRR="",t.node.data.planParamsDetails.SR="",t.node.data.planParamsDetails.RR="";return!0},cellEditor:"numberCellEditor",cellEditorParams:{step:.001,decimals:3,signedDecimal:!0},colName:"Weekly Randomization Rate",colValueToMap:P.a.RR}),t.push({headerName:e.countriesGridService.getCountryGridResources().SF_PERCENTAGE,headerTooltip:e.countriesGridService.getCountryGridResources().SCREEN_FAILURE_PERCENTAGE,field:P.a.SFR,colId:P.a.SFR,valueFormatter:nl,width:100,cellRendererSelector:function(t){var n=e.countriesGridService.isWWorStudyTarget(t);return e.isEditablePlan()&&!n&&e.isSFEditable(t)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?{component:"numberCellRenderer"}:{component:"defaultCellRenderer"}},editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&!t.data.planParamsDetails.isCountryLocked&&e.isSFEditable(t)&&!0!==t.data.isCohortExcluded&&e.isCohortCellEditable(t.data)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)},cellRendererParams:function(t){return t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateScreenFailure(t.data.planParamsDetails.SFR,t.data.planParamsDetails.calculatedRR,t.data.planParamsDetails.calculatedSR,e.countriesGridService.isSRAvailable(),0,b.sc.MAX_SFR,t.node.data.isCohortExcluded,t.data.isCohortCountry),{numDecimals:1,inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(!0===t.data.isCohortExcluded||e.isCohortCellDisabled(t.data)),fieldType:"number",isHighlighted:e.countriesGridService.isCellHighlighted(t,"SFR")}},valueGetter:function(t){if(!e.setRTEnable){if(!t.data.isCohortCountry&&e.countriesGridService.isCohortPlan())return t.data.planParamsDetails.SFR=t.data.planParamsDetails.SFR?t.data.planParamsDetails.SFR:0,s.c.formatDecimal(t.data.planParamsDetails.SFR);t.data.planParamsDetails.SFR=t.data.planParamsDetails.SFR}return t.data.planParamsDetails.SFR},valueSetter:function(t){s.c.isDefined(t.newValue,!0)?(t.node.data.planParamsDetails.SFR=t.newValue,s.c.isDefined(t.node.data.planParamsDetails.SR,!0)&&s.c.isDefined(t.node.data.planParamsDetails.RR,!0)&&s.c.isDefined(t.node.data.planParamsDetails.SFR,!0)&&(e.countriesGridService.getReportingPeriod(e.planDetailsService.studyKey),e.studySummary.info&&"N"===e.studySummary.info.cohortIndicator?e.countriesGridService.isSRAvailable()?(t.node.data.planParamsDetails.RR=e.countriesGridService.calculateRR(t.node.data.planParamsDetails.SR,t.node.data.planParamsDetails.SFR),t.node.data.planParamsDetails.calculatedRR=t.node.data.planParamsDetails.RR):(t.node.data.planParamsDetails.SR=e.countriesGridService.calculateSR(t.node.data.planParamsDetails.RR,t.node.data.planParamsDetails.SFR),t.node.data.planParamsDetails.calculatedSR=t.node.data.planParamsDetails.SR):(!e.countriesGridService.isCohortPlan()||e.studySummary.info&&e.studySummary.info.studyCohortType===b.o.S)&&(e.countriesGridService.isSRAvailable()?(t.node.data.planParamsDetails.RR=e.countriesGridService.calculateRR(t.node.data.planParamsDetails.SR,t.node.data.planParamsDetails.SFR),t.node.data.planParamsDetails.calculatedRR=t.node.data.planParamsDetails.RR):(t.node.data.planParamsDetails.SR=e.countriesGridService.calculateSR(t.node.data.planParamsDetails.RR,t.node.data.planParamsDetails.SFR),t.node.data.planParamsDetails.calculatedSR=t.node.data.planParamsDetails.SR)),!e.planProperties.isPlan&&t.node.data.planParamsDetails.isAdjustable&&t.node.data.planParamsDetails.parentPlan.SFR!==t.node.data.planParamsDetails.SFR&&(t.node.data.planParamsDetails.actEnrlWhnSFRMod=t.node.data.planParamsDetails.actuals.RT,t.node.data.planParamsDetails.dateSFRMod=new Date)),e.planDetails&&"Y"===e.planDetails.planProperties.isCohortPlan?e.refreshCells(t.node,[P.a.RR,P.a.GEOGRAPHY_NAME,P.a.SR,P.a.SFR]):e.countriesGridService.isSRAvailable()?e.refreshCells(t.node,[P.a.RR,P.a.SFR,P.a.GEOGRAPHY_NAME]):e.refreshCells(t.node,[P.a.SR,P.a.SFR,P.a.GEOGRAPHY_NAME])):t.node.data.planParamsDetails.SFR=""},cellEditor:"numberCellEditor",cellEditorParams:{step:.1,decimals:1,signedDecimal:!0},colName:"Screen Failure %",colValueToMap:P.a.SFR}),t.push({headerName:e.countriesGridService.getCountryGridResources().FPA,headerTooltip:e.countriesGridService.getCountryGridResources().FINAL_PROTOCOL_APPROVED,cellRenderer:"",cellStyle:function(t){var n={};return t.data.isCohortCountry&&(t.data.isCohortExcluded||e.isCohortCellDisabled(t.data))&&(n.color="#d0d0d"),n["text-align"]="center",n},editable:!1,width:110,valueGetter:function(t){return e.planDetails&&e.planDetails.planProperties.FPA&&!0!==t.data.isCohortCountry&&t.data.geographyLevel!==e.countriesGridService.getStudyTargetAndWorldWide().WW?Qn(e.planDetails.planProperties.FPA).format("DD-MMM-YYYY"):""},colId:P.a.FPA,colName:"Final Protocol Approved",colValueToMap:P.a.FPA,field:P.a.FPA}),t.push({headerName:e.countriesGridService.getCountryGridResources().FPA_TO_FSI,headerTooltip:e.countriesGridService.getCountryGridResources().DAYS_FROM_FPA_TO_FSI,field:P.a.DAYS_TO_FSI,colId:P.a.DAYS_TO_FSI,width:90,editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&e.planDetails&&e.planDetails.planProperties.FPA&&!t.data.planParamsDetails.isCountryLocked&&e.countriesGridService.isFSICellEnabled(t.data,e.planDetails.planProperties.isPlan)&&!0!==t.data.isCohortCountry},cellRendererSelector:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&!0!==t.data.isCohortCountry?{component:"numberCellRenderer"}:null},cellRendererParams:function(t){return{numDecimals:0,inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(!0===t.data.isCohortExcluded||!1===t.data.isSelectedCohort||t.data.planParamsDetails.isAdjustable&&e.planDetails&&"Y"!==e.planDetails.planProperties.isCohortPlan&&!t.data.planParamsDetails.redistSites),isHighlighted:e.countriesGridService.isCellHighlighted(t,"daysToFSI")}},valueGetter:function(t){if(t.data.planParamsDetails&&t.data.planParamsDetails.FSI&&t.getValue(P.a.FPA)&&!0!==t.data.isCohortCountry&&t.data.geographyLevel!==e.countriesGridService.getStudyTargetAndWorldWide().WW){var n=e.countriesGridService.getCountryFSI(t.node.data);if(""===n)return"";var l=Qn(n).diff(Qn(t.getValue(P.a.FPA),"DD-MMM-YYYY"),"days");return t.node.data.planParamsDetails.daysToFSI=l,l>0?l:0}return""},cellEditor:"numberCellEditor",cellEditorParams:{step:1,decimals:0,minValue:0,maxValue:15e4,signedInteger:!0},valueSetter:function(t){var n,l=null;if(!t.node.data)return!1;e.planDetails&&(l=e.planDetails.planProperties.FPA),l&&(n=Qn(l).add(t.newValue,"days").toDate(),t.node.data.planParamsDetails.FSI=s.c.formatDate(n),t.node.data.planParamsDetails.siteInitiationMethod===b.ac.PERCENT&&(e.countriesGridService.hasPercentCenterInitInfo(t.node.data)||(t.node.data.planParamsDetails.centerInitInfo={}),t.node.data.planParamsDetails.centerInitInfo.percentCenterInitInfo=e.countriesGridService.calculatePercentCenterInit(t.node.data.planParamsDetails.numSites,e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,25),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,50),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,90),t.node.data.planParamsDetails.FSI,e.countriesGridService.isRedistributed(t.node.data,e.planProperties.isPlan),null))),"Y"===e.planProperties.isCohortPlan&&"Y"!==e.planProperties.isDepCohortPlan&&t.api.forEachNode((function(n){if(n.data.geographyKey===t.data.geographyKey&&n.data.isCohortCountry&&n.data.planParamsDetails.FSS)if(t.data.planParamsDetails.FSI){var l;l=Qn(t.data.planParamsDetails.FSI).add(n.data.planParamsDetails.SITOFSSDAYS,"days").toDate(),n.data.planParamsDetails.FSS=l}else n.data.planParamsDetails.SITOFSSDAYS="";e.refreshCells(n,[P.a.GEOGRAPHY_NAME,P.a.FSI,P.a.FSS,P.a.DAYS_TO_FSS,P.a.DAYS_TO_FSI,P.a.DAYS_TO_25,P.a.DAYS_TO_50,P.a.DAYS_TO_90])})),e.refreshCells(t.node,[P.a.FSI])},colName:"FPA to FSI",colValueToMap:P.a.DAYS_TO_FSI,cellStyle:function(e){return{}}}),t.push({headerName:e.countriesGridService.getCountryGridResources().FSI,headerTooltip:e.countriesGridService.getCountryGridResources().FIRST_SITE_INITIATED,field:P.a.FSI,editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&!t.data.planParamsDetails.isCountryLocked&&e.countriesGridService.isFSICellEnabled(t.data,e.planDetails.planProperties.isPlan)&&!0!==t.data.isCohortCountry&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)},valueFormatter:al,cellRendererSelector:function(t){var n=e.countriesGridService.isWWorStudyTarget(t);return t.data.planParamsDetails.siteInitiationMethod===b.ac.GRANULAR?{component:"labelCellRenderer"}:n||!e.isEditablePlan()||t.data.planParamsDetails&&t.data.planParamsDetails.isCountryLocked||t.data.planParamsDetails.siteInitiationMethod!==b.ac.PERCENT||!0===t.data.isCohortCountry||e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?{component:"defaultCellRenderer"}:{component:"dateCellRenderer"}},cellRendererParams:function(t){var n=e.countriesGridService.isFSIRequired(t.node.data,!0,e.planProperties.isPlan);t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateFSI(e.countriesGridService.getCountryFSI(t.node.data),t.data,e.planProperties.FSI,e.planProperties.LSS,n,!e.planProperties.isPlan,t.node.data.planParamsDetails.isAdjustable,"Y"===e.planProperties.isCohortPlan);var l=!0;return!1===t.data.planParamsDetails.isCountryLocked&&(l=e.countriesGridService.isCohortPlan?!0===t.data.isCohortExcluded||!1===t.data.isSelectedCohort:e.countriesGridService.isCountryDistributedForNonCohort(t.data)),{inputDisabled:l,fieldType:"date",isHighlighted:e.countriesGridService.isCellHighlighted(t,"FSI")}},cellEditor:"dateCellEditor",valueGetter:function(t){return t.data.isCohortCountry?t.data.geographyLevel===e.countriesGridService.getStudyTargetAndWorldWide().WW?e.countriesGridService.getCountryFSI(t.node.data):"":e.countriesGridService.getCountryFSI(t.node.data)},valueSetter:function(t){var n=t.node.data.planParamsDetails.numSites;if(t.newValue){var l=s.c.formatDate(t.newValue);t.data.planParamsDetails.isAdjustable?e.countriesGridService.isCohortAdjustment?t.node.data.planParamsDetails.FSI=l:t.data.planParamsDetails.redistSites&&(t.node.data.planParamsDetails.redistFSI=l,n=t.data.planParamsDetails.redistSites):t.node.data.planParamsDetails.FSI=l,t.node.data.planParamsDetails.siteInitiationMethod===b.ac.PERCENT&&(e.countriesGridService.hasPercentCenterInitInfo(t.node.data)||(t.node.data.planParamsDetails.centerInitInfo={}),t.node.data.planParamsDetails.centerInitInfo.percentCenterInitInfo=e.countriesGridService.calculatePercentCenterInit(n,e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,25),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,50),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,90),l,e.countriesGridService.isRedistributed(t.node.data,e.planProperties.isPlan),null))}else t.node.data.planParamsDetails.FSI=t.newValue;if("Y"===e.planProperties.isCohortPlan)t.api.forEachNode((function(n){if(n.data.geographyKey===t.data.geographyKey&&n.data.isCohortCountry&&n.data.planParamsDetails.FSS&&!n.data.planParamsDetails.hasDependencies)if(t.data.planParamsDetails.FSI){var l;l=Qn(t.data.planParamsDetails.FSI).add(n.data.planParamsDetails.SITOFSSDAYS,"days").toDate(),n.data.planParamsDetails.FSS=l}else n.data.planParamsDetails.SITOFSSDAYS="";e.refreshCells(n,[P.a.GEOGRAPHY_NAME,P.a.FSS,P.a.DAYS_TO_FSS,P.a.DAYS_TO_FSI,P.a.DAYS_TO_25,P.a.DAYS_TO_50,P.a.DAYS_TO_90])}));else if(e.planProperties.isPlan||!e.planProperties.isPlan&&!t.data.planParamsDetails.isAdjustable){if(!t.data.planParamsDetails.FSS)return;var a;t.data.planParamsDetails.FSI?(a=Qn(t.data.planParamsDetails.FSI).add(t.data.planParamsDetails.SITOFSSDAYS,"days").toDate(),t.data.planParamsDetails.FSS=a):t.data.planParamsDetails.SITOFSSDAYS="",e.refreshCells(t.node,[P.a.GEOGRAPHY_NAME,P.a.FSS,P.a.DAYS_TO_FSS,P.a.DAYS_TO_FSI,P.a.DAYS_TO_25,P.a.DAYS_TO_50,P.a.DAYS_TO_90])}return!0},width:130,colName:"First Site Initiated",colValueToMap:P.a.FSI,cellStyle:function(e){return{}}}),t.push({headerName:e.countriesGridService.getCountryGridResources().FSI_TO_FSS,headerTooltip:e.countriesGridService.getCountryGridResources().DAYS_FROM_FSI_TO_FSS,field:P.a.DAYS_TO_FSS,colId:P.a.DAYS_TO_FSS,cellRendererSelector:function(t){var n=e.countriesGridService.isWWorStudyTarget(t);return e.isEditablePlan()&&!n&&e.isCohorStatus(e,t)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?{component:"numberCellRenderer"}:{component:"defaultCellRenderer"}},editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&!t.data.planParamsDetails.isCountryLocked&&e.countriesGridService.isFSSFieldEditable(t.node.data,e.planProperties.isPlan,"Y"===e.planProperties.isDepCohortPlan)&&e.isCohorStatus(e,t)&&(e.planDetails&&"Y"!==e.planDetails.planProperties.isCohortPlan||!0!==t.data.isCohortExcluded)&&e.isCohortCellEditable(t.data)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)},cellRendererParams:function(t){return{numDecimals:0,inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(!0===t.data.isCohortExcluded||e.isCohortCellDisabled(t.data)||!e.countriesGridService.isFSSFieldEditable(t.node.data,e.planProperties.isPlan,"Y"===e.planProperties.isDepCohortPlan)),fieldType:"number",isHighlighted:e.countriesGridService.isCellHighlighted(t,"SITOFSSDAYS")}},valueGetter:function(e){return s.c.isDefined(e.data.planParamsDetails.SITOFSSDAYS,!0)?e.data.planParamsDetails.SITOFSSDAYS>=0?e.data.planParamsDetails.SITOFSSDAYS:0:""},cellEditor:"numberCellEditor",cellEditorParams:{step:1,decimals:0,minValue:0,maxValue:15e4,signedInteger:!0},valueSetter:function(t){if(!t.node.data)return!1;t.node.data.planParamsDetails.SITOFSSDAYS=t.newValue,s.c.isDefined(t.newValue)&&""!==t.newValue&&(t.node.data.planParamsDetails.FSS=e.countriesGridService.calculateFSS(t.node.data,t.newValue)),t.node.data.planParamsDetails.FSS=e.countriesGridService.getCountryFSS(t.node.data),null!==t.data.planParamsDetails.ARTB&&(t.node.data.errorFields[P.a.ARTB]=e.countriesGridService.validateARTB(t.data.planParamsDetails.ARTB,e.countriesGridService.getCountryFSI(t.node.data),t.data.planParamsDetails.FSS)),e.refreshCells(t.node,[P.a.DAYS_TO_FSS,P.a.FSS,P.a.ARTB]),e.refreshCells(t.node,[P.a.GEOGRAPHY_NAME])},colName:"Days from FSI to FSS",colValueToMap:P.a.DAYS_TO_FSS,width:90}),t.push({headerName:e.countriesGridService.getCountryGridResources().FSS,headerTooltip:e.countriesGridService.getCountryGridResources().FIRST_SUBJECT_SCREENED,field:P.a.FSS,colId:P.a.FSS,valueFormatter:al,cellRendererSelector:function(t){var n=e.countriesGridService.isWWorStudyTarget(t);return e.isEditablePlan()&&!n&&e.isCohorStatus(e,t)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?{component:"dateCellRenderer"}:{component:"defaultCellRenderer"}},editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&!t.data.planParamsDetails.isCountryLocked&&e.countriesGridService.isFSSFieldEditable(t.node.data,e.planProperties.isPlan,"Y"===e.planProperties.isDepCohortPlan)&&e.isCohorStatus(e,t)&&(e.planDetails&&"Y"!==e.planDetails.planProperties.isCohortPlan||!0!==t.data.isCohortExcluded)&&e.isCohortCellEditable(t.data)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)},cellEditor:"dateCellEditor",cellRendererParams:function(t){var n="";return e.planDetails&&"Y"===e.planDetails.planProperties.isCohortPlan?t.api.forEachNode((function(l){l.data.geographyKey!==t.data.geographyKey||!1!==l.data.isCohortCountry||(n=e.countriesGridService.getCountryFSI(l.data))})):n=e.countriesGridService.getCountryFSI(t.data),t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateFSS(e.countriesGridService.getCountryFSS(t.node.data),n,e.countriesGridService.isFSSFieldEditable(t.node.data,e.planProperties.isPlan,"Y"===e.planProperties.isDepCohortPlan)),{inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(!0===t.data.isCohortExcluded||e.isCohortCellDisabled(t.data)||!e.countriesGridService.isFSSFieldEditable(t.node.data,e.planProperties.isPlan,"Y"===e.planProperties.isDepCohortPlan)),fieldType:"date",isHighlighted:e.countriesGridService.isCellHighlighted(t,"FSS")}},valueGetter:function(t){return t.node.data.geographyLevel===Dn.a.WW?t.node.data.planParamsDetails.FSS:e.countriesGridService.getCountryFSS(t.node.data)},valueSetter:function(t){return t.node.data.planParamsDetails.FSS=t.newValue?s.c.formatDate(t.newValue):t.newValue,t.node.data.planParamsDetails.SITOFSSDAYS=e.isCohorStatus(e,t)?e.countriesGridService.getCountryCohortFSI(t.node.data)&&t.data.planParamsDetails&&t.data.planParamsDetails.FSS?Qn(t.data.planParamsDetails.FSS).diff(Qn(e.countriesGridService.getCountryCohortFSI(t.node.data)),"days"):"":t.data.planParamsDetails&&t.data.planParamsDetails.FSS&&t.data.planParamsDetails.FSI?Qn(t.data.planParamsDetails.FSS).diff(Qn(t.data.planParamsDetails.FSI),"days"):"",null!==t.data.planParamsDetails.ARTB&&(t.node.data.errorFields[P.a.ARTB]=e.countriesGridService.validateARTB(t.data.planParamsDetails.ARTB,e.countriesGridService.getCountryFSI(t.node.data),t.data.planParamsDetails.FSS)),e.refreshCells(t.node,[P.a.FSS,P.a.DAYS_TO_FSS,P.a.ARTB]),e.refreshCells(t.node,[P.a.GEOGRAPHY_NAME]),!0},width:130,colName:"First Subject Screened",colValueToMap:P.a.FSS}),t.push({headerName:e.countriesGridService.getCountryGridResources().FSR,headerTooltip:e.countriesGridService.getCountryGridResources().FIRST_SUBJECT_RANDOMIZED,valueFormatter:al,field:P.a.FIRST_SUBJECT_RANDOMIZED,colId:P.a.FIRST_SUBJECT_RANDOMIZED,cellRendererSelector:function(e){return{component:"defaultCellRenderer"}},cellRendererParams:function(t){return{fieldType:"date",isHighlighted:e.countriesGridService.isCellHighlighted(t,"PFSR")}},valueGetter:function(t){if(!t.data.isCohortCountry||t.data.geographyLevel!==e.countriesGridService.getStudyTargetAndWorldWide().WW)return t.node.data.planParamsDetails.PFSR},editable:!1,width:140,colName:"First Subject Randomized",colValueToMap:P.a.FIRST_SUBJECT_RANDOMIZED}),t.push({headerName:e.countriesGridService.getCountryGridResources().NUM_SITES,headerTooltip:e.countriesGridService.getCountryGridResources().NUMBER_OF_SITES,field:P.a.NUM_SITES,editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&(!t.data.planParamsDetails||!t.data.planParamsDetails.isCountryLocked)&&t.data.planParamsDetails.siteInitiationMethod===b.ac.PERCENT&&!0!==t.data.isCohortCountry&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)},cellRendererSelector:function(t){var n=e.countriesGridService.isWWorStudyTarget(t);return!e.isEditablePlan()||n||t.data.planParamsDetails&&t.data.planParamsDetails.isCountryLocked||!0===t.data.isCohortCountry||e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?null:{component:"numberCellRenderer"}},cellRendererParams:function(t){return t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateNumberOfSites(t.node.data.planParamsDetails.numSites,e.countriesGridService.calculateMinNumSites(t.node.data,e.planProperties.isPlan),b.sc.MAX_NUM_SITES,e.countriesGridService.hasAnyDaysToSIDefined(t.node.data),e.countriesGridService.getSolverBasedValidationFlag(),t.node.data.isCohortCountry,t.node.data.isCohortExcluded,t.node.data),{numDecimals:0,disabled:t.data.planParamsDetails.isAdjustable&&t.data.planParamsDetails.redistSites<=0,inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(t.data.planParamsDetails.siteInitiationMethod===b.ac.GRANULAR||!0===t.data.isCohortExcluded||e.isCohortCellDisabled(t.data)),isHighlighted:e.countriesGridService.isCellHighlighted(t,"numSites")}},valueGetter:function(t){return"Y"!==e.planProperties.isCohortPlan||!1===t.data.isCohortCountry?t.data.planParamsDetails.numSites:(s.c.isDefined(t.data.planParamsDetails.numSites,!0)&&0!==t.data.planParamsDetails.numSites||(t.api.forEachNode((function(e){e.data.geographyKey!==t.data.geographyKey||!1!==e.data.isCohortCountry||(n=e.data.planParamsDetails.numSites)})),t.data.planParamsDetails.numSites=n),t.data.planParamsDetails.numSites);var n},valueSetter:function(t){return t.node.data.planParamsDetails.numSites=t.newValue,t.node.data.planParamsDetails.siteInitiationMethod===b.ac.PERCENT&&s.c.isDefined(t.newValue,!0)?(e.countriesGridService.hasPercentCenterInitInfo(t.node.data)||(t.node.data.planParamsDetails.centerInitInfo={}),t.node.data.planParamsDetails.centerInitInfo.percentCenterInitInfo=e.countriesGridService.calculatePercentCenterInit(e.planDetails&&"N"===e.planDetails.planProperties.isCohortPlan&&t.data.planParamsDetails.isAdjustable&&!t.data.planParamsDetails.redistSites?t.data.planParamsDetails.redistSites:t.node.data.planParamsDetails.numSites,e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,25),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,50),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,90),e.countriesGridService.getCountryFSI(t.node.data),e.countriesGridService.isRedistributed(t.node.data,e.planProperties.isPlan),null),console.log("percentCenterInit after update : ",t.node.data.planParamsDetails.centerInitInfo.percentCenterInitInfo)):console.log("percentCenterInit not updated"),"Y"===e.planProperties.isCohortPlan&&t.api.forEachNode((function(n){n.data.geographyKey===t.data.geographyKey&&(n.data.isCohortCountry&&e.cohortNumSites&&e.cohortNumSites.length>0?e.cohortNumSites.map((function(e){n.data.cohortKey===e.cohortKey&&(n.data.planParamsDetails.numSites=e.numSites)})):n.data.planParamsDetails.numSites=t.data.planParamsDetails.numSites,e.refreshCells(n,[P.a.FSS,P.a.DAYS_TO_FSS,P.a.DAYS_TO_FSI,P.a.SAS,P.a.DAYS_TO_25,P.a.DAYS_TO_50,P.a.DAYS_TO_90,P.a.GEOGRAPHY_NAME]))})),e.refreshCells(t.node,[P.a.NUM_SITES,P.a.RE_DIST_SITES,P.a.FSI,P.a.SAS,P.a.DAYS_TO_25,P.a.DAYS_TO_50,P.a.DAYS_TO_90,P.a.GEOGRAPHY_NAME]),!0},cellEditor:"numberCellEditor",cellEditorParams:{step:1,decimals:0,signedInteger:!0},width:90,colName:"Number of Sites",colValueToMap:P.a.NUM_SITES}),t.push({headerName:e.countriesGridService.getCountryGridResources().RE_DIST,headerTooltip:e.countriesGridService.getCountryGridResources().SITES_TO_REDISTRIBUTE,field:P.a.RE_DIST_SITES,colId:P.a.RE_DIST_SITES,editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&(!t.data.planParamsDetails||!t.data.planParamsDetails.isCountryLocked)&&t.data.planParamsDetails.isAdjustable&&"percent"===t.data.planParamsDetails.siteInitiationMethod&&!0!==t.data.isCohortCountry&&e.isCohortCellEditable(t.data)},cellRendererSelector:function(t){var n=e.countriesGridService.isWWorStudyTarget(t);return t.data.planParamsDetails.siteInitiationMethod===b.ac.GRANULAR?{component:"labelCellNumberRenderer"}:n||!e.isEditablePlan()||t.data.planParamsDetails&&t.data.planParamsDetails.isCountryLocked||!t.data.planParamsDetails.isAdjustable||"percent"!==t.data.planParamsDetails.siteInitiationMethod||!0===t.data.isCohortCountry||!e.isCohortCellEditable(t.data)?{component:"defaultCellRenderer"}:{component:"numberCellRenderer"}},cellRendererParams:function(t){return t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateSitesToRedistribute(t.data.planParamsDetails.redistSites,t.data.planParamsDetails.parentPlan?t.data.planParamsDetails.parentPlan.numSites:null,t.data.planParamsDetails.numSites,t.data.planParamsDetails.actuals?t.data.planParamsDetails.actuals.numSites:null,t.data.planParamsDetails.isAdjustable),{disabled:!(s.c.isDefined(t.data.planParamsDetails.redistSites)&&t.data.planParamsDetails.actuals&&t.data.planParamsDetails.actuals.RT>0),numDecimals:0,inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(!0===t.data.isCohortExcluded||e.isCohortCellDisabled(t.data)),fieldType:"number",isHighlighted:e.countriesGridService.isCellHighlighted(t,"redistSites")}},valueGetter:function(t){return e.countriesGridService.isWWorStudyTarget(t)?"":(null==t.data.planParamsDetails.redistSites&&(t.data.planParamsDetails.redistSites=0),t.data.planParamsDetails.redistSites)},valueSetter:function(t){null==t.newValue&&(t.newValue=0),t.node.data.planParamsDetails.redistSites=t.newValue;var n=s.c.formatDate(e.countriesGridService.getNextDayDate());if(t.node.data.planParamsDetails.redistSites>0)return t.node.data.planParamsDetails.redistFSI=n,e.countriesGridService.hasPercentCenterInitInfo(t.node.data)||(t.node.data.planParamsDetails.centerInitInfo={}),t.node.data.planParamsDetails.centerInitInfo.percentCenterInitInfo=e.countriesGridService.calculatePercentCenterInit(t.node.data.planParamsDetails.redistSites,e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,25),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,50),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,90),n,e.countriesGridService.isRedistributed(t.node.data,e.planProperties.isPlan),null),e.refreshCells(t.node,[P.a.NUM_SITES,P.a.GEOGRAPHY_NAME,P.a.RE_DIST_SITES,P.a.FSI,P.a.DAYS_TO_25,P.a.DAYS_TO_50,P.a.DAYS_TO_90]),!0;t.node.data.planParamsDetails.redistFSI=""},cellEditor:"numberCellEditor",cellEditorParams:{step:1,decimals:0,signedInteger:!0},colName:"Sites Actively Screening %",colValueToMap:P.a.RE_DIST_SITES}),t.push({headerName:e.countriesGridService.getCountryGridResources().SAS_PERCENTAGE,headerTooltip:e.countriesGridService.getCountryGridResources().SITES_ACTIVELY_SCREENING_PERCENTAGE,field:P.a.SAS,colId:P.a.SAS,valueFormatter:nl,cellRendererSelector:function(t){var n=e.countriesGridService.isWWorStudyTarget(t);return e.isEditablePlan()&&!n&&e.isCohorStatus(e,t)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?{component:"numberCellRenderer"}:{component:"defaultCellRenderer"}},editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isEditablePlan()&&e.isCohorStatus(e,t)&&!t.data.planParamsDetails.isCountryLocked&&!0!==t.data.isCohortExcluded&&e.isCohortCellEditable(t.data)&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)},cellRendererParams:function(t){if("Y"===e.planProperties.isCohortPlan){var n,l=t.data.geographyKey;t.api.forEachNode((function(e,t){e.data.geographyKey!==l||!1!==e.data.isCohortCountry||(n=e.data.planParamsDetails.numSites)})),t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateSAS(t.node.data.planParamsDetails.ARC,n,b.sc.MAX_CALC_SAS,e.countriesGridService.getSolverBasedValidationFlag(),t.node.data.isCohortExcluded,e.countriesGridService.isCohortPlanCountryRow(t.data))}else t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateSAS(t.node.data.planParamsDetails.ARC,t.data.planParamsDetails.numSites,b.sc.MAX_CALC_SAS,e.countriesGridService.getSolverBasedValidationFlag(),t.node.data.isCohortExcluded,e.countriesGridService.isCohortPlanCountryRow(t.data));return{numDecimals:1,inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(!0===t.data.isCohortExcluded||e.isCohortCellDisabled(t.data)),fieldType:"number",isHighlighted:e.countriesGridService.isCellHighlighted(t,"ARC")}},cellEditor:"numberCellEditor",cellEditorParams:{step:.1,decimals:1,minValue:0,signedDecimal:!0},valueGetter:function(t){return!t.data.isCohortCountry&&e.countriesGridService.isCohortPlan()&&(t.data.planParamsDetails.ARC=t.data.planParamsDetails.ARC?t.data.planParamsDetails.ARC:0),s.c.formatDecimal(t.data.planParamsDetails.ARC)},valueSetter:function(e){return e.node.data.planParamsDetails.ARC=e.newValue,!0},width:65,colName:"Plan Params Details Site Initiation",colValueToMap:P.a.SAS}),t.push({headerName:e.countriesGridService.getCountryGridResources().CALCSAS,headerTooltip:e.countriesGridService.getCountryGridResources().CALC_SAS_PERCENTAGE,editable:!1,width:140,valueFormatter:nl,field:P.a.CALC_SAS,colId:P.a.CALC_SAS,colName:"Calculated SAS %",cellRendererSelector:function(e){return{component:"defaultCellRenderer"}},cellRendererParams:function(t){return{fieldType:"number",isHighlighted:e.countriesGridService.isCellHighlighted(t,"CalcSAS")}},valueGetter:function(t){if(!(t.data.geographyLevel===e.countriesGridService.getStudyTargetAndWorldWide().Study_Target||t.data.isCohortCountry&&t.data.geographyLevel===e.countriesGridService.getStudyTargetAndWorldWide().WW))return t.node.data.planParamsDetails.CalcSAS=e.countriesGridService.calculateSASPercentage(t.node.data.planParamsDetails.numSites,t.node.data.planParamsDetails.ARC),s.c.formatDecimal(t.node.data.planParamsDetails.CalcSAS)},colValueToMap:P.a.CALC_SAS}),t.push({headerName:e.countriesGridService.getCountryGridResources().SI,headerTooltip:e.countriesGridService.getCountryGridResources().SITE_INITIATION,field:P.a.SI,colId:P.a.SI,cellRendererSelector:function(t){var n=e.countriesGridService.isWWorStudyTarget(t),l=!0;return e.planDetails&&"Y"===e.planDetails.planProperties.isCohortPlan&&!0===t.data.isCohortCountry&&(l=!1),l&&!n?{component:"toggleButtonCellRenderer"}:null},editable:!1,cellRendererParams:function(t){var n=e.countriesGridService.getCountryGridResources(),l=!1,a=n.TWENTY_FIVE_FIFTY_NINTY;!0===e.isEditablePlan()&&!1===t.data.planParamsDetails.isCountryLocked&&(e.planDetails&&"Y"===e.planDetails.planProperties.isCohortPlan||(l=!1)),t.data.planParamsDetails.siteInitiationMethod===b.ac.GRANULAR&&(a=n.CUSTOM);var i=e.planDetails&&"Y"===e.planDetails.planProperties.isCohortPlan&&!e.planDetails.planProperties.isPlan&&e.getSiteInitiationForCountry(t.data.geographyKey)===b.ac.GRANULAR;return{labels:[{key:n.CUSTOM,value:n.CUSTOM,isDisabled:!1,toolTipMsg:b.M},{key:n.TWENTY_FIVE_FIFTY_NINTY,value:n.TWENTY_FIVE_FIFTY_NINTY,isDisabled:i,toolTipMsg:i?n.DISABLED_25_50_90_MSG:b.M}],defaultValue:a,inputDisabled:l}},valueGetter:function(e){return!0!==e.data.isCohortCountry?e.data.planParamsDetails.siteInitiation:""},valueSetter:function(t){var n=e.countriesGridService.getCountryGridResources();if(console.log("siteInitiation : ",t.newValue),!0!==t.data.isCohortCountry){var l=e.countriesGridService.getSiteInitiationType(t);t.newValue!==l?!e.isEditablePlan()&&e.countriesGridService.hasEditAccess()?(e.planDetailsService.setSaveDisability(!0),e.launchSIV(t)):!0!==t.data.planParamsDetails.isCountryLocked&&t.data.planParamsDetails.centerInitInfo?t.newValue===n.CUSTOM?e.openSIVCustomPopup(t,!0):e.unsavedSiteInitiationCheck(t.data).afterClosed().subscribe((function(l){l&&l.action===n.OK?(e.siteInitiationToggleMCE(t,n.TWENTY_FIVE_FIFTY_NINTY,b.ac.PERCENT),e.gridApi.redrawRows(),e.onCellValueChanged(t,!0)):e.siteInitiationToggleMCE(t,n.CUSTOM,b.ac.GRANULAR),e.countriesGridService.updatePlanDetails(e.getSelectedAndEditedRows(),e.getSelectedRows(),e.getEditedRows(),e.planProperties)})):e.launchSIV(t):(e.launchSIV(t),!e.isEditablePlan()&&e.countriesGridService.hasEditAccess()&&e.planDetailsService.setSaveDisability(!0))}return!0},width:170,colName:"Site Initiation",colValueToMap:P.a.SI,cellStyle:function(e){return{"text-align":"center"}}}),t.push({headerName:e.countriesGridService.getCountryGridResources().SIM,headerTooltip:e.countriesGridService.getCountryGridResources().SITE_INITIATION_METHOD,field:P.a.SITE_COMP_ID,colId:P.a.SITE_COMP_ID,cellRendererSelector:function(t){return e.countriesGridService.isWWorStudyTarget(t)||!0===t.data.isCohortCountry||e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?null:{component:"toggleButtonCellRenderer"}},editable:!1,cellRendererParams:function(t){var n;n=!0!==e.isEditablePlan()||!0===t.data.planParamsDetails.isCountryLocked||!(!e.planDetails||"Y"!==e.planDetails.planProperties.isCohortPlan)&&(!0===t.data.planParamsDetails.isCohortExcluded||e.isCohortCellDisabled(t.data)),console.log("DisableToggle",n);var l=e.countriesGridService.getCountryGridResources();return{labels:[{key:b.Zb.LINEAR,value:l.LINEAR,isDisabled:!1},{key:b.Zb.RANDOM,value:l.RANDOM,isDisabled:!1}],defaultValue:b.Zb.RANDOM,inputDisabled:n}},valueGetter:function(e){return!0!==e.data.isCohortCountry?e.data.planParamsDetails.algorithmSiteCompId:""},valueSetter:function(e){return console.log("algorithmSiteCompId : ",e.newValue),e.node.data.planParamsDetails.algorithmSiteCompId=e.newValue,!0},width:160,colName:"Site Initiation Method",colValueToMap:P.a.SITE_COMP_ID,cellStyle:function(e){return{"text-align":"center"}}}),t.push({headerName:e.countriesGridService.getCountryGridResources().TWENTY_FIVE_SI,headerTooltip:e.countriesGridService.getCountryGridResources().DAYS_TO_25_PERCENT_SITES_INITIATED,field:P.a.DAYS_TO_25,colId:P.a.DAYS_TO_25,colValueToMap:P.a.DAYS_TO_25,colName:"Days to 25% Sites Initiated",cellRendererSelector:function(t){return e.countriesGridService.isWWorStudyTarget(t)||!e.isEditablePlan()||!0===t.data.isCohortCountry||e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?null:{component:"numberCellRenderer"}},cellRendererParams:function(t){var n=e.countriesGridService.isFSIRequired(t.node.data,!0,e.planProperties.isPlan);return t.node.data.errorFields[P.a.DAYS_TO_25]=e.countriesGridService.validateDaysTo25(e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,50),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,90),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,25),n,t.node.data,b.sc.MAX_PERIOD_25,e.planProperties.LSS&&s.c.dayDiff(t.data.planParamsDetails.FSI,e.planProperties.LSS)),{numDecimals:0,inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(e.planProperties.isCohortPlan===b.nb&&t.data.planParamsDetails.isAdjustable&&!t.data.planParamsDetails.redistSites||t.data.planParamsDetails.siteInitiationMethod!==b.ac.PERCENT),isHighlighted:e.countriesGridService.isCellHighlighted(t,"25")}},editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isDaysToSIParametersEditable(t,e.planDetails.planProperties.isPlan)&&!0!==t.data.isCohortCountry&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)},valueGetter:function(t){var n;return(t.data.planParamsDetails.siteInitiationMethod===b.ac.GRANULAR||e.countriesGridService.hasPercentCenterInitInfo(t.node.data))&&t.data.planParamsDetails&&t.data.planParamsDetails.centerInitInfo&&t.data.planParamsDetails.centerInitInfo.percentCenterInitInfo&&t.data.planParamsDetails.centerInitInfo.percentCenterInitInfo.centerInitSlot.length&&t.data.planParamsDetails.centerInitInfo.percentCenterInitInfo.centerInitSlot.forEach((function(e){25===e.percOfCenterInit&&(n=e.noOfPeriods)})),e.planProperties&&"Y"!==e.planProperties.isCohortPlan&&t.data.planParamsDetails.isAdjustable&&(t.data.planParamsDetails.redistSites||(n=void 0,t.node.data.planParamsDetails.centerInitInfo={percentCenterInitInfo:{centerInitSlot:[]}})),!1!==t.data.isCohortCountry?"":void 0===n?"":n},valueSetter:function(t){console.log("before edit percentCenterInit : ",t.node.data.planParamsDetails.centerInitInfo.percentCenterInitInfo);var n=t.node.data.planParamsDetails.numSites;return t.data.planParamsDetails.isAdjustable&&t.data.planParamsDetails.redistSites&&(n=t.data.planParamsDetails.redistSites),t.node.data.planParamsDetails.siteInitiationMethod===b.ac.PERCENT&&(e.countriesGridService.hasPercentCenterInitInfo(t.node.data)||(t.node.data.planParamsDetails.centerInitInfo={}),t.node.data.planParamsDetails.centerInitInfo.percentCenterInitInfo=e.countriesGridService.calculatePercentCenterInit(n,t.newValue,e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,50),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,90),e.countriesGridService.getCountryFSI(t.node.data),e.countriesGridService.isRedistributed(t.node.data,e.planProperties.isPlan),null)),e.refreshCells(t.node,[P.a.DAYS_TO_25,P.a.GEOGRAPHY_NAME,P.a.DAYS_TO_50,P.a.DAYS_TO_90,P.a.FSI,P.a.NUM_SITES]),!0},cellEditor:"numberCellEditor",cellEditorParams:{step:1,decimals:0,signedInteger:!0,minValue:0,maxValue:15e4},width:70}),t.push({headerName:e.countriesGridService.getCountryGridResources().FIFTY_SI,headerTooltip:e.countriesGridService.getCountryGridResources().DAYS_TO_50_PERCENT_SITES_INITIATED,field:P.a.DAYS_TO_50,colId:P.a.DAYS_TO_50,colValueToMap:P.a.DAYS_TO_50,colName:"Days to 50% Sites Initiated",cellRendererSelector:function(t){return e.countriesGridService.isWWorStudyTarget(t)||!e.isEditablePlan()||!0===t.data.isCohortCountry||e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?null:{component:"numberCellRenderer"}},cellRendererParams:function(t){var n=e.countriesGridService.isFSIRequired(t.node.data,!0,e.planProperties.isPlan);return t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateDaysTo50(t.value,e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.data,90),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.data,25),n,t.node.data,b.sc.MAX_PERIOD_50,e.planProperties.LSS&&s.c.dayDiff(t.data.planParamsDetails.FSI,e.planProperties.LSS)),{numDecimals:0,inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(e.planProperties.isCohortPlan===b.nb&&t.data.planParamsDetails.isAdjustable&&!t.data.planParamsDetails.redistSites||t.data.planParamsDetails.siteInitiationMethod!==b.ac.PERCENT),isHighlighted:e.countriesGridService.isCellHighlighted(t,"50")}},editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isDaysToSIParametersEditable(t,e.planDetails.planProperties.isPlan)&&!0!==t.data.isCohortCountry&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)},valueGetter:function(t){var n;return(t.data.planParamsDetails.siteInitiationMethod===b.ac.GRANULAR||e.countriesGridService.hasPercentCenterInitInfo(t.node.data))&&t.data.planParamsDetails.centerInitInfo.percentCenterInitInfo&&t.data.planParamsDetails.centerInitInfo.percentCenterInitInfo.centerInitSlot.forEach((function(e){50===e.percOfCenterInit&&(n=e.noOfPeriods)})),e.planProperties&&"Y"!==e.planProperties.isCohortPlan&&t.data.planParamsDetails.isAdjustable&&(t.data.planParamsDetails.redistSites||(n=void 0,t.node.data.planParamsDetails.centerInitInfo={percentCenterInitInfo:{centerInitSlot:[]}})),!1!==t.data.isCohortCountry?"":void 0===n?"":n},valueSetter:function(t){console.log("before edit percentCenterInit : ",t.node.data.planParamsDetails.centerInitInfo.percentCenterInitInfo);var n=t.node.data.planParamsDetails.numSites;return t.data.planParamsDetails.isAdjustable&&t.data.planParamsDetails.redistSites&&(n=t.data.planParamsDetails.redistSites),t.node.data.planParamsDetails.siteInitiationMethod===b.ac.PERCENT&&(e.countriesGridService.hasPercentCenterInitInfo(t.node.data)||(t.node.data.planParamsDetails.centerInitInfo={}),t.node.data.planParamsDetails.centerInitInfo.percentCenterInitInfo=e.countriesGridService.calculatePercentCenterInit(n,e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,25),t.newValue,e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,90),e.countriesGridService.getCountryFSI(t.node.data),e.countriesGridService.isRedistributed(t.node.data,e.planProperties.isPlan),null)),console.log("after edit percentCenterInit : ",t.node.data.planParamsDetails.centerInitInfo.percentCenterInitInfo),e.refreshCells(t.node,[P.a.GEOGRAPHY_NAME,P.a.DAYS_TO_25,P.a.DAYS_TO_50,P.a.DAYS_TO_90,P.a.FSI,P.a.NUM_SITES]),!0},cellEditor:"numberCellEditor",cellEditorParams:{step:1,decimals:0,minValue:0,signedInteger:!0},width:70}),t.push({headerName:e.countriesGridService.getCountryGridResources().NINTY_SI,headerTooltip:e.countriesGridService.getCountryGridResources().DAYS_TO_90_PERCENT_SITES_INITIATED,field:P.a.DAYS_TO_90,colId:P.a.DAYS_TO_90,colValueToMap:P.a.DAYS_TO_90,colName:"Days to 90% Sites Initiated",cellRendererSelector:function(t){return e.countriesGridService.isWWorStudyTarget(t)||!e.isEditablePlan()||!0===t.data.isCohortCountry||e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)?null:{component:"numberCellRenderer"}},cellRendererParams:function(t){var n=e.countriesGridService.isFSIRequired(t.node.data,!0,e.planProperties.isPlan);return t.node.data.errorFields[t.column.colId]=e.countriesGridService.validateDaysTo90(t.value,e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.data,50),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.data,25),n,t.node.data,b.sc.MAX_PERIOD_90,e.planProperties.LSS&&s.c.dayDiff(t.data.planParamsDetails.FSI,e.planProperties.LSS)),{numDecimals:0,inputDisabled:!t.data.planParamsDetails.isCountryLocked&&(e.planProperties.isCohortPlan===b.nb&&t.data.planParamsDetails.isAdjustable&&!t.data.planParamsDetails.redistSites||t.data.planParamsDetails.siteInitiationMethod!==b.ac.PERCENT),isHighlighted:e.countriesGridService.isCellHighlighted(t,"90")}},editable:function(t){return!e.countriesGridService.isWWorStudyTarget(t)&&e.isDaysToSIParametersEditable(t,e.planDetails.planProperties.isPlan)&&!0!==t.data.isCohortCountry&&!e.countriesGridService.isAdjustmentAndHasAchievedLSR(t.data,e.planDetails,e.gridApi)},valueGetter:function(t){var n;return(t.data.planParamsDetails.siteInitiationMethod===b.ac.GRANULAR||e.countriesGridService.hasPercentCenterInitInfo(t.node.data))&&t.data.planParamsDetails&&t.data.planParamsDetails.centerInitInfo&&t.data.planParamsDetails.centerInitInfo.percentCenterInitInfo&&t.data.planParamsDetails.centerInitInfo.percentCenterInitInfo.centerInitSlot.length&&t.data.planParamsDetails.centerInitInfo.percentCenterInitInfo.centerInitSlot.forEach((function(e){90===e.percOfCenterInit&&(n=e.noOfPeriods)})),e.planProperties&&"Y"!==e.planProperties.isCohortPlan&&t.data.planParamsDetails.isAdjustable&&(t.data.planParamsDetails.redistSites||(n=void 0,t.node.data.planParamsDetails.centerInitInfo={percentCenterInitInfo:{centerInitSlot:[]}})),!1!==t.data.isCohortCountry?"":void 0===n?"":n},cellEditor:"numberCellEditor",cellEditorParams:{step:1,decimals:0,minValue:0,maxValue:15e4,signedInteger:!0},valueSetter:function(t){console.log("before edit percentCenterInit : ",t.node.data.planParamsDetails.centerInitInfo.percentCenterInitInfo);var n=t.node.data.planParamsDetails.numSites;return t.data.planParamsDetails.isAdjustable&&t.data.planParamsDetails.redistSites&&(n=t.data.planParamsDetails.redistSites),t.node.data.planParamsDetails.siteInitiationMethod===b.ac.PERCENT&&(e.countriesGridService.hasPercentCenterInitInfo(t.node.data)||(t.node.data.planParamsDetails.centerInitInfo={}),t.node.data.planParamsDetails.centerInitInfo.percentCenterInitInfo=e.countriesGridService.calculatePercentCenterInit(n,e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,25),e.countriesGridService.getNoOfPeriodsByPercOfCenterInit(t.node.data,50),t.newValue,e.countriesGridService.getCountryFSI(t.node.data),e.countriesGridService.isRedistributed(t.node.data,e.planProperties.isPlan),null)),e.refreshCells(t.node,[P.a.GEOGRAPHY_NAME,P.a.DAYS_TO_90,P.a.DAYS_TO_50,P.a.DAYS_TO_25,P.a.FSI,P.a.NUM_SITES]),!0},width:70}),t.push({headerName:e.countriesGridService.getCountryGridResources().PROJ_RR,headerTooltip:e.countriesGridService.getCountryGridResources().PECFrProjRR,colId:P.a.PROJECTED_RR,width:180,field:P.a.PROJECTED_RR,valueFormatter:ll,valueGetter:function(t){return e.countriesGridService.getReportingPeriod(e.planDetailsService.studyKey),t.data.planParamsDetails.countryCalcQuantity?t.data.planParamsDetails.countryCalcQuantity.effectiveRR:""},editable:!1,colName:"Effective Randomization Rate",colValueToMap:P.a.PROJECTED_RR}),t.push({headerName:e.countriesGridService.getCountryGridResources().PROJ_SR,headerTooltip:e.countriesGridService.getCountryGridResources().PECFrProjSR,colId:P.a.PROJECTED_SR,width:140,field:P.a.PROJECTED_SR,valueFormatter:ll,valueGetter:function(t){return e.countriesGridService.getReportingPeriod(e.planDetailsService.studyKey),t.data.planParamsDetails.countryCalcQuantity?t.data.planParamsDetails.countryCalcQuantity.effectiveSR:""},editable:!1,colName:"Effective Screening Rate",colValueToMap:P.a.PROJECTED_SR}),t.push({headerName:e.countriesGridService.getCountryGridResources().PROJ_SF_PERCENT,headerTooltip:e.countriesGridService.getCountryGridResources().PECFrProjSFR,colId:P.a.PROJECTED_SFR,width:140,field:P.a.PROJECTED_SFR,valueFormatter:nl,editable:!1,colName:"Effective Screen Failure %",colValueToMap:P.a.PROJECTED_SFR}),t.push({headerName:e.countriesGridService.getCountryGridResources().PROJ_SAS_PERCENT,headerTooltip:e.countriesGridService.getCountryGridResources().PECFrProjActiveSites,colId:P.a.PROJECTED_SAS,width:140,field:P.a.PROJECTED_SAS,valueFormatter:nl,editable:!1,colName:"Effective Sites Actively Screening %",colValueToMap:P.a.PROJECTED_SAS}),t},e.prototype.shouldHideColumn=function(e){return!e.isMCSViewActive||e.planDetails&&0===e.planDetails.planProperties.planCountries},e.prototype.isCohorStatus=function(e,t){return!e.planProperties||"Y"!==e.planProperties.isCohortPlan||!1!==t.data.isCohortCountry},e.prototype.refreshCells=function(e,t){var n={force:!0},l=new Array;l.push(e),n.rowNodes=l,t&&t.length>0&&(n.columns=t),"Y"===this.planDetails.planProperties.isCohortPlan&&(n.force=!0),this.gridApi.refreshCells(n)},e.prototype.siteInitiationToggleMCE=function(e,t,n,l){var a=this.countriesGridService.getCountryGridResources();l&&("percent"===e.node.data.planParamsDetails.siteInitiationMethod?(n="percent",t=a.TWENTY_FIVE_FIFTY_NINTY):(n="granular",t=a.CUSTOM)),e.node.data.planParamsDetails.siteInitiationMethod=n,e.node.data.planParamsDetails.siteInitiation=t,this.refreshCells(e.node,[P.a.SI,P.a.DAYS_TO_25,P.a.DAYS_TO_50,P.a.DAYS_TO_90,P.a.FSI,P.a.NUM_SITES])},e.prototype.unsavedSiteInitiationCheck=function(e){if(e.planParamsDetails.siteInitiationMethod===b.ac.GRANULAR)return this.dialog.open(s.t,{width:b.F.CONFIRM_DIALOG_OVERRIDE.WIDTH,height:b.F.CONFIRM_DIALOG_OVERRIDE.HEIGHT,data:this.countriesGridService.getConfirmDialogProp(),panelClass:b.F.CONFIRM_DIALOG_OVERRIDE.PANEL_CLASS})},e.prototype.launchSIV=function(e){var t=this.countriesGridService.getCountryGridResources();e.newValue===t.CUSTOM&&this.openSIVCustomPopup(e,!1)},e.prototype.openSIVCustomPopup=function(e,t){var n=this;n.dialog.open(yn,{width:b.F.CUSTOM_SIV.WIDTH,data:{planDetails:n.planDetails,countryKey:e.data.geographyKey,countryDetails:e.data,isEditablePlan:n.isEditablePlan(),showCheckBox:t},panelClass:b.F.CUSTOM_SIV.PANEL_CLASS}).afterClosed().subscribe((function(t){var l=n.countriesGridService.getCountryGridResources();if(t&&t.action)if(t.action===l.OK){e.node.data.planParamsDetails.siteInitiationMethod="granular",t.cohortNumSites&&(n.cohortNumSites=t.cohortNumSites),(e.node.data.planParamsDetails.redistSites||0===e.node.data.planParamsDetails.redistSites)&&t.customForm.value.siBody.siField.sitesToRedistribute&&e.node.setDataValue(P.a.RE_DIST_SITES,Number(t.customForm.value.siBody.siField.sitesToRedistribute));var a=n.getCenterInitDetails(t.customForm,n.planDetails.planProperties);console.log(a),e.node.data.planParamsDetails.centerInitInfo?e.node.data.planParamsDetails.centerInitInfo.granularCenterInitInfo=a.granularCenterInitInfo:e.node.data.planParamsDetails.centerInitInfo=a,e.node.setDataValue(P.a.NUM_SITES,Number(t.customForm.value.siBody.siField.totalNoOfSites)),console.log("before in Custom SIV>>>"+e.node.data.planParamsDetails.FSI),e.node.setDataValue(P.a.FSI,Qn(t.customForm.get("siBody").get("siField").get("FSIDate").value,s.bb,!0)),console.log("after in Custom SIV>>>"+e.node.data.planParamsDetails.FSI),n.siteInitiationToggleMCE(e,l.CUSTOM,b.ac.GRANULAR),n.onCellValueChanged(e,!0)}else n.siteInitiationToggleMCE(e,l.TWENTY_FIVE_FIFTY_NINTY,b.ac.PERCENT);else n.siteInitiationToggleMCE(e,l.TWENTY_FIVE_FIFTY_NINTY,b.ac.PERCENT,!0)}))},e.prototype.onRowDataUpdated=function(e){if(this.gridApi){var t=[];this.gridApi.forEachNode((function(e){t.push(e.data)})),this.countriesGridData=t;var n=this.gridApi.getLastDisplayedRow();if(n||0===n){var l=this.gridApi.getRowNode(n.toString());this.countrySelectedForGraph!==l.data&&(this.countrySelectedForGraph=l.data,this.countrySelectionChange.emit({data:l.data}))}this.countriesGridService.updatePlanDetails(this.getSelectedAndEditedRows(),this.getSelectedRows(),this.getEditedRows(),this.planProperties,this.planProperties&&this.planProperties.isOverThreshold&&this.selectedCohort&&this.selectedCohort.cohortKey)}},e.prototype.onFilterChanged=function(e){this.applicationContextService.updateMCEFilterPref(this.planDetails.planProperties.planKey,e.api.getFilterModel()),this.gridApi.refreshCells({force:!0})},e.prototype.onColumnVisibilityChanged=function(e){},e.prototype.stopEditing=function(){this.gridApi&&this.gridApi.stopEditing()},e.prototype.onSelectionChanged=function(e){var t=this.gridApi.getSelectedRows();this.countriesGridService.updatePlanDetails(this.getSelectedAndEditedRows(),this.getSelectedRows(),this.getEditedRows(),this.planProperties,this.planProperties&&this.planProperties.isOverThreshold&&this.selectedCohort&&this.selectedCohort.cohortKey),console.log("selected rows: ",t),t&&t.length>0&&this.countrySelectedForGraph!==t[t.length-1]&&(this.countrySelectedForGraph=t[t.length-1],this.countrySelectionChange.emit({data:this.selectedRow}),this.gridRowSelectionPreferencesService.setCardAndGraphData(this.gridApi,this.selectedRow)),this.gridApi.refreshHeader(),this.isEditablePlan()&&null===e.api.selectionController.lastSelectedNode&&this.planDetailsService.setSaveDisability(!1)},e.prototype.updateFilterByColumn=function(e,t){e.getFilterInstance(t).resetFilterValues()},e.prototype.updateIsCohModified=function(e){this.gridApi.forEachNode((function(t){t.data.isCohortCountry&&t.data.geographyKey===e&&(t.data.isCohModified=!0)}))},e.prototype.onCellValueChanged=function(e,t){var n=this;if(e.oldValue!==e.value||t){var l=e.column.colId,a=void 0!==e.data.isEdited&&e.data.isEdited;if(this.updateFilterByColumn(e.api,e.column.colId?e.column.colId:e.colDef.field),l&&"includeExcludeCohort"===l&&!1===a)return;e.node.data.planParamsDetails.isCountryLocked||this.isCellExcludedFromEdit(e.colDef.field)||(this.planDetailsService.setFormStatus(!0),this.planDetailsService.setReadOnly(!1),this.countriesForm.markAsDirty(),this.countriesForm.markAsTouched(),e.node.data.isEdited=!0,e.node.setSelected(!0),this.planProperties&&!this.planProperties.isPlan&&e.node.data.planParamsDetails.isRevertToApprovedPlan&&(e.node.data.planParamsDetails.isCountryAdjusted=!0,e.node.data.planParamsDetails.isRevertToApprovedPlan=!1),this.planDetailsService.setSaveDisability(!1),"Y"===this.planProperties.isCohortPlan&&(this.makeCountryDirtyOnCohortChange(e.node.data.geographyKey),e.node.data.isCohortCountry?e.node.data.isCohModified=!0:this.updateIsCohModified(e.node.data.geographyKey))),e.node.data=this.countriesGridService.validateSingleCountryRowData(e.node.data,this.planProperties),"Y"===this.planProperties.isCohortPlan&&this.gridApi.forEachNode((function(t){t.data.geographyKey===e.node.data.geographyKey&&t.data.isCohortCountry&&(t.data=n.countriesGridService.validateSingleCountryRowData(t.data,n.planProperties),n.refreshCells(t,[P.a.GEOGRAPHY_NAME]))}));var i=[P.a.GEOGRAPHY_NAME,P.a.COUNTRY_OPTION_ID];i.push(e.colDef.field),e.colDef.field===P.a.SI&&!this.isEditablePlan()&&this.countriesGridService.hasEditAccess()&&(this.planDetailsService.setSaveDisability(!0),this.planDetailsService.setReadOnly(!0),e.node.data.isEdited=!1),this.refreshCells(e.node,i);var r=this.countriesGridService.getCountryData();this.isInvalidGrid=this.countriesGridService.isFormValidForallCountries(r,!1),this.gridApi.refreshHeader()}this.countriesGridService.updatePlanDetails(this.getSelectedAndEditedRows(),this.getSelectedRows(),this.getEditedRows(),this.planProperties,this.planProperties&&this.planProperties.isOverThreshold&&this.selectedCohort&&this.selectedCohort.cohortKey)},e.prototype.isCellExcludedFromEdit=function(e){return-1!==["planParamsDetails.calculatedMRLSR","planParamsDetails.calculatedMRS","planParamsDetails.calculatedLSR","planParamsDetails.calculatedCRT","planParamsDetails.calculatedCRTLSR","planParamsDetails.optimumRT","planParamsDetails.solvedPLSR",P.a.PLSR].findIndex((function(t){return t===e}))},e.prototype.makeCountryDirtyOnCohortChange=function(e){var t;this.gridApi.forEachNode((function(n){n.data.isCohortCountry||n.data.geographyKey!==e||((t=n).data.isEdited=!0,t.setSelected(!0))})),t&&this.refreshCells(t,[P.a.GEOGRAPHY_NAME,P.a.COUNTRY_OPTION_ID])},e.prototype.getCohortType=function(e,t){return t===b.qb||!e.data.isCohortCountry},e.prototype.getSelectedAndEditedRows=function(){var e=[],t=[],n=this;return n.gridApi&&(n.gridApi.forEachNode((function(t){n.getCohortType(t,n.planProperties.isCohortPlan)&&e.push(t.data)})),n.planProperties.isCohortPlan===b.ob&&e.forEach((function(e){e.planParamsDetails.cohortList=[],e.cohortList=[],n.gridApi.forEachNode((function(t){e.geographyKey===t.data.geographyKey&&t.data.isCohortCountry&&(e.planParamsDetails.cohortList.push(t.data),e.cohortList.push(t.data))})),t.push(e)}))),n.planProperties.isCohortPlan===b.qb?e:t},e.prototype.getSelectedRows=function(){var e=[],t=this;return t.gridApi&&this.gridApi.forEachNode((function(n){t.getCohortType(n,t.planProperties.isCohortPlan)&&n.isSelected()&&t.appDataService.appDataResponse&&t.appDataService.appDataResponse.appMetadata&&(t.appDataService.appDataResponse.appMetadata.isCountryLockEnable&&n.data&&n.data.planParamsDetails&&(!1===n.data.planParamsDetails.isCountryLocked||n.data.planParamsDetails.isRevertToApprovedPlan)||!1===t.appDataService.appDataResponse.appMetadata.isCountryLockEnable)&&e.push(n.data)})),e},e.prototype.getEditedRows=function(){var e=[],t=[],n=this;if(n.gridApi)return"N"===n.planProperties.isCohortPlan?n.gridApi.forEachNode((function(t){t.data.isEdited&&!t.isSelected()&&e.push(t.data)})):(n.gridApi.forEachNode((function(t){t.data.isCohortCountry||!t.data.isEdited||t.isSelected()||e.push(t.data)})),e.forEach((function(e){t.push(e),e.planParamsDetails.cohortList=[],n.gridApi.forEachNode((function(n){e.geographyKey===n.data.geographyKey&&n.data.isCohortCountry&&t.push(n.data)}))}))),"N"===n.planProperties.isCohortPlan?e:t},e.prototype.getAllEditedRows=function(){var e=[],t=this;return t.gridApi&&t.gridApi.forEachNode((function(n){t.getCohortType(n,t.planProperties.isCohortPlan)&&n.data.isEdited&&e.push(n.data)})),e},e.prototype.hasEditedButUnselectedRows=function(){var e=[],t=this;return t.gridApi&&t.gridApi.forEachNode((function(n){t.getCohortType(n,t.planProperties.isCohortPlan)&&n.data.isEdited&&!n.isSelected()&&e.push(n.data)})),e.length>0},e.prototype.onRowSelected=function(e){var t=this.gridApi.getSelectedRows();t&&t.length>0&&this.countrySelectedForGraph!==t[t.length-1]&&(this.countrySelectedForGraph=t[t.length-1],this.gridRowSelectionPreferencesService.setCardAndGraphData(this.gridApi,this.countrySelectedForGraph))},e.prototype.onRowClicked=function(e){this.countrySelectedForGraph=e.data,this.gridRowSelectionPreferencesService.setCardAndGraphData(this.gridApi,e.data)},e.prototype.onCellFocused=function(e){var t=e.api.getDisplayedRowAtIndex(e.rowIndex)?e.api.getDisplayedRowAtIndex(e.rowIndex).data:null;t&&this.countrySelectedForGraph!==t&&(this.countrySelectedForGraph=t,this.countrySelectionChange.emit({data:t}),this.planDetailsService.selectedCountrySubject.next(t))},e.prototype.onCheckboxChange=function(e){if(console.log("on checkbox change:",e),this.isDynamicProjectionChecked=e.target.checked,this.planDetailsService.isDynamicProjectionChecked=e.target.checked,this.planDetails.planProperties.LSR){var t=this.getCohortInfo();this.subscriptions.push(this.planDetailsService.getDynamicPrDataWW(this.planDetailsService.isDynamicProjectionChecked,this.planDetails.planProperties.studyKey,Number(this.planDetails.planProperties.planKey),this.planDetails.planProperties.version,t,!0).subscribe()),this.subscriptions.push(this.planDetailsService.getDynamicPrDataRegion(this.planDetailsService.isDynamicProjectionChecked,this.planDetails.planProperties.studyKey,Number(this.planDetails.planProperties.planKey),this.geoKeyForDynamicPrjRegion,this.planDetails.planProperties.version,t,!0).subscribe()),this.subscriptions.push(this.planDetailsService.getDynamicPrData(this.planDetailsService.isDynamicProjectionChecked,this.planDetails.planProperties.studyKey,Number(this.planDetails.planProperties.planKey),this.geoKeyForDynamicPrj,this.planDetails.planProperties.version,t,!0).subscribe((function(e){}))),this.planDetailsService.selectedCountrySubject.next(this.selectedRow)}else e.target.checked&&this.dialog.open(s.t,{width:b.F.NO_TLSR.WIDTH,height:b.F.NO_TLSR.HEIGHT,data:this.getConfirmDialogProp(),panelClass:b.F.NO_TLSR.PANEL_CLASS})},e.prototype.getConfirmDialogProp=function(){return{heading:this.localeAppResourcesService.getResource("InfoDialogTitle"),message:this.localeAppResourcesService.getResource("NoTLSR"),okLabel:this.localeAppResourcesService.getResource("OkLabel"),showCancel:!1}},e.prototype.isDynProjectionEnabled=function(e){var t,n=!1;if(t=!this.planDetails||!this.planDetails.actuals||null===this.planDetails.actuals.LSR,e&&e.geoList){var l=e.geoList.geography;if(l)for(var a=0;a<l.length;a++)if(null!=l[a].planParamsDetails.PLSR){n=!0;break}}return!e.planProperties.isReadOnly&&n&&(!1===e.planProperties.isPlan||t)},e.prototype.getFlagToRepresentMCSView=function(e){return e?this.isMCSViewActive:(this.setIsMCS_SD_ViewActive(!this.isMCSViewActive),this.isMCSViewActive)},e.prototype.hideOthersSolvers=function(e){if(e){var t=-1;switch(e){case b.gc.SUBJECT_DISTRIBUTION:-1!==(t=this.getGridColumnIndex(P.a.RT))&&(this.columnDefs.splice(t+1,6),this.setIsMCS_SD_ViewActive(!1),this.isSolversOpened=!1,this.insertAllSelectionForCohortList());break;case b.gc.LAST_SUBJECT:-1!==(t=this.getGridColumnIndex(P.a.ARTB))&&(this.columnDefs.splice(t+1,3),this.isSolversOpened=!1);break;case b.gc.MIN_NUM_RATE:var n;n=this.plansService.isRTypeCohortStudy()?P.a.RR:this.countriesGridService.isSRAvailable()?P.a.SR:P.a.RR,-1!==(t=this.getGridColumnIndex(n))&&(this.columnDefs.splice(t+1,4),this.isSolversOpened=!1);break;case b.gc.SUBJECTS:-1!==(t=this.getGridColumnIndex(P.a.RT))&&(this.columnDefs.splice(t+1,4),this.isSolversOpened=!1)}this.gridApi.setColumnDefs(this.columnDefs),this.showHideGridColumns(),this.moveMCEColumnsByPref(),this.isCohortPlan&&this.setIsMCS_SD_ViewActive(!1)}},e.prototype.showLSRFields=function(e){this.setRTEnabled(!0);var t=[];this.gridApi.forEachNode((function(e){t.push(JSON.parse(JSON.stringify(e.data)))}));var n=this;this.hideOthersSolvers(e),-1!==this.getGridColumnIndex("planParamsDetails.LSRApply")&&this.hideOthersSolvers(b.gc.LAST_SUBJECT);var l=this.getGridColumnIndex(P.a.ARTB),a={headerName:"LSRApply",field:"planParamsDetails.LSRApply",editable:!1,suppressMenu:!0,suppressToolPanel:!0,width:50,cellRenderer:"copySingleValueComponent",cellRendererParams:function(){return{solverType:b.fc.LSR,enrollmentTarget:n.planDetails.planProperties.enrollmentTarget,isPlan:n.planDetails.planProperties.isPlan,planProperties:n.planDetails.planProperties,isEditablePlan:n.isEditablePlan()}},headerComponentFramework:On,headerComponentParams:function(e){return{solverType:b.fc.LSR,enrollmentTarget:n.planDetails.planProperties.enrollmentTarget,isPlan:n.planDetails.planProperties.isPlan,planProperties:n.planDetails.planProperties,isEditablePlan:n.isEditablePlan()}}},i={headerName:n.countriesGridService.getCountryGridResources().CAL_VALUE,headerTooltip:n.countriesGridService.getCountryGridResources().CALULATED_VALUE,field:"planParamsDetails.calculatedLSR",hide:!1,editable:!1,suppressMenu:!0,suppressToolPanel:!0,valueFormatter:il,width:150,colName:"Calculated LSR",colValueToMap:"planParamsDetails.calculatedLSR"},r={headerName:"",field:"LSRsolver",hide:!1,editable:!1,suppressMenu:!0,suppressToolPanel:!0,width:50,cellRenderer:"calculateSingleValueComponent",headerComponentFramework:Nn,cellRendererParams:function(){return{solverType:b.fc.LSR,enrollmentTarget:n.planDetails.planProperties.enrollmentTarget,isPlan:n.planDetails.planProperties.isPlan,planProperties:n.planDetails.planProperties,updateDependentCohortCard:n.updateDependentCohortCard,isEditablePlan:n.isEditablePlan()}},headerComponentParams:function(e){return{solverType:b.fc.LSR,enrollmentTarget:n.planDetails.planProperties.enrollmentTarget,isPlan:n.planDetails.planProperties.isPlan,planProperties:n.planDetails.planProperties,updateDependentCohortCard:n.updateDependentCohortCard,isEditablePlan:n.isEditablePlan()}}};-1!==l&&(this.columnDefs.splice(l+1,0,a,i,r),this.gridApi.setColumnDefs(this.columnDefs),this.showHideGridColumns(),this.moveMCEColumnsByPref(),this.setMCEFilterModel(),this.columnApi.moveColumns([a.field,i.field,r.field],l+1),n.isSolversOpened=!0,n.isCohortPlan&&this.setIsMCS_SD_ViewActive(!0,!1))},e.prototype.showMRSFields=function(e){this.setRTEnabled(!0),this.hideOthersSolvers(e);var t,n=this;-1!==this.getGridColumnIndex("planParamsDetails.MRSApply")&&this.hideOthersSolvers(b.gc.MIN_NUM_RATE),t=n.plansService.isRTypeCohortStudy()?P.a.RR:n.countriesGridService.isSRAvailable()?P.a.SR:P.a.RR;var l=this.getGridColumnIndex(t),a={headerName:"MRSApply",field:"planParamsDetails.MRSApply",hide:!1,editable:!1,suppressMenu:!0,suppressToolPanel:!0,width:50,cellRenderer:"copySingleValueComponent",headerComponentFramework:On,cellRendererParams:function(){return{solverType:b.fc.MRS,enrollmentTarget:n.planDetails.planProperties.enrollmentTarget,isPlan:n.planDetails.planProperties.isPlan,planProperties:n.planDetails.planProperties,isEditablePlan:n.isEditablePlan()}},headerComponentParams:function(e){return{solverType:b.fc.MRS,enrollmentTarget:n.planDetails.planProperties.enrollmentTarget,isPlan:n.planDetails.planProperties.isPlan,planProperties:n.planDetails.planProperties,isEditablePlan:n.isEditablePlan()}}},i={headerName:n.countriesGridService.getCountryGridResources().CAL_VALUE,headerTooltip:n.countriesGridService.getCountryGridResources().CALULATED_VALUE,field:"planParamsDetails.calculatedMRS",hide:!1,editable:!1,suppressMenu:!0,suppressToolPanel:!0,width:130,colName:"Calculated MRS",colValueToMap:"planParamsDetails.calculatedMRS"},r={headerName:"",field:"MRSsolver",hide:!1,editable:!1,suppressMenu:!0,suppressToolPanel:!0,width:50,cellRenderer:"calculateSingleValueComponent",headerComponentFramework:Nn,cellRendererParams:function(){return{solverType:b.fc.MRS,enrollmentTarget:n.planDetails.planProperties.enrollmentTarget,isPlan:n.planDetails.planProperties.isPlan,planProperties:n.planDetails.planProperties,updateDependentCohortCard:n.updateDependentCohortCard,isEditablePlan:n.isEditablePlan()}},headerComponentParams:function(e){return{solverType:b.fc.MRS,enrollmentTarget:n.planDetails.planProperties.enrollmentTarget,isPlan:n.planDetails.planProperties.isPlan,planProperties:n.planDetails.planProperties,updateDependentCohortCard:n.updateDependentCohortCard,isEditablePlan:n.isEditablePlan()}}},o={headerName:n.countriesGridService.getCountryGridResources().CAL_LSR,headerTooltip:n.countriesGridService.getCountryGridResources().SOLVED_LAST_SUBJECT_RANDOMIZED,field:"planParamsDetails.calculatedMRLSR",colName:"Calculated MRLSR",colValueToMap:"planParamsDetails.calculatedMRLSR",hide:!1,editable:!1,suppressMenu:!0,suppressToolPanel:!0,width:150,valueFormatter:il};-1!==l&&(this.columnDefs.splice(l+1,0,a,i,r,o),this.gridApi.setColumnDefs(this.columnDefs),this.showHideGridColumns(),this.moveMCEColumnsByPref(),this.setMCEFilterModel(),this.columnApi.moveColumns([a.field,i.field,r.field,o.field],l+1),n.isSolversOpened=!0,n.isCohortPlan&&this.setIsMCS_SD_ViewActive(!0,!1))},e.prototype.showCRTFields=function(e){this.setRTEnabled(!0),this.hideOthersSolvers(e);var t=this;-1!==this.getGridColumnIndex("planParamsDetails.CRTApply")&&this.hideOthersSolvers(b.gc.SUBJECTS);var n=this.getGridColumnIndex(P.a.RT),l={headerName:"CRTApply",field:"planParamsDetails.CRTApply",hide:!1,editable:!1,suppressMenu:!0,suppressToolPanel:!0,width:50,cellRenderer:"copySingleValueComponent",cellRendererParams:function(){return{solverType:b.fc.CRT,enrollmentTarget:t.planDetails.planProperties.enrollmentTarget,isPlan:t.planDetails.planProperties.isPlan,planProperties:t.planDetails.planProperties,isEditablePlan:t.isEditablePlan()}},headerComponentFramework:On,headerComponentParams:function(e){return{solverType:b.fc.CRT,enrollmentTarget:t.planDetails.planProperties.enrollmentTarget,isPlan:t.planDetails.planProperties.isPlan,planProperties:t.planDetails.planProperties,isEditablePlan:t.isEditablePlan()}}},a={headerName:t.countriesGridService.getCountryGridResources().CAL_VALUE,headerTooltip:t.countriesGridService.getCountryGridResources().CALULATED_VALUE,field:"planParamsDetails.calculatedCRT",colName:"CalculatedCRT",colValueToMap:"planParamsDetails.calculatedCRT",hide:!1,editable:!1,suppressMenu:!0,suppressToolPanel:!0,width:130},i={headerName:"",field:"CRTsolver",hide:!1,editable:!1,suppressMenu:!0,suppressToolPanel:!0,width:50,cellRenderer:"calculateSingleValueComponent",cellRendererParams:function(){return{solverType:b.fc.CRT,enrollmentTarget:t.planDetails.planProperties.enrollmentTarget,isPlan:t.planDetails.planProperties.isPlan,planProperties:t.planDetails.planProperties,updateDependentCohortCard:t.updateDependentCohortCard,isEditablePlan:t.isEditablePlan()}},headerComponentFramework:Nn,headerComponentParams:function(e){return{solverType:b.fc.CRT,enrollmentTarget:t.planDetails.planProperties.enrollmentTarget,isPlan:t.planDetails.planProperties.isPlan,planProperties:t.planDetails.planProperties,updateDependentCohortCard:t.updateDependentCohortCard,isEditablePlan:t.isEditablePlan()}}},r={headerName:t.countriesGridService.getCountryGridResources().CAL_LSR,headerTooltip:t.countriesGridService.getCountryGridResources().SOLVED_LAST_SUBJECT_RANDOMIZED,field:"planParamsDetails.calculatedCRTLSR",colName:"CalculatedCRTLSR",colValueToMap:"planParamsDetails.calculatedCRTLSR",hide:!1,editable:!1,suppressMenu:!0,suppressToolPanel:!0,width:150,valueFormatter:il};-1!==n&&(this.columnDefs.splice(n+1,0,l,a,i,r),this.gridApi.setColumnDefs(this.columnDefs),this.showHideGridColumns(),this.moveMCEColumnsByPref(),this.columnApi.moveColumns([l.field,a.field,i.field,r.field],n+1),t.isSolversOpened=!0,t.isCohortPlan&&this.setIsMCS_SD_ViewActive(!0))},e.prototype.showDistributionSolvers=function(e,t){void 0===t&&(t=!1),this.setRTEnabled(!1),this.hideOthersSolvers(e),this.setIsMCS_SD_ViewActive(!0),this.removeAllSelectionFormCohortList(),this.countriesGridService.isCohortPlan()&&-1===this.selectedCohortKey&&this.cohortData.cohortList.length>0&&(this.selectedCohort=this.cohortData.cohortList[0],this.selectedCohortKey=this.selectedCohort.cohortKey,this.countriesGridService.setSelectedCohort(this.selectedCohort),this.refreshGridOnCohortSelection(this.selectedCohort,!0));var n=this.getGridColumnIndex(P.a.RT),l=this,a={headerName:"",field:"copyArrow",hide:this.shouldHideColumn(l),editable:!1,suppressMenu:!0,suppressToolPanel:!0,width:40,cellRenderer:"copySingleValueComponent",cellRendererParams:function(e){return{solverType:b.fc.SDS,planProperties:l.planDetails.planProperties,cohortData:l.selectedCohort?l.selectedCohort:null,isEditablePlan:l.isEditablePlan()}},headerComponentFramework:On,headerComponentParams:function(e){return{solverType:b.fc.SDS,isEditablePlan:l.isEditablePlan()}}},i={headerName:l.countriesGridService.getCountryGridResources().CAL_VALUE,headerTooltip:l.countriesGridService.getCountryGridResources().CALULATED_VALUE,field:"planParamsDetails.optimumRT",colName:"optimumRT",colValueToMap:"planParamsDetails.optimumRT",hide:this.shouldHideColumn(l),editable:!1,suppressMenu:!0,suppressToolPanel:!0,width:85},r={headerName:"",field:"solver",hide:this.shouldHideColumn(l),editable:!1,suppressMenu:!0,suppressToolPanel:!0,headerComponentFramework:Fn,width:30,headerComponentParams:function(e){return{isEditable:l.isEditablePlan(),enrollmentTarget:l.planDetails.planProperties.enrollmentTarget,isPlan:l.planDetails.planProperties.isPlan,disableSolver:l.isInvalidGrid,planProperties:l.planDetails.planProperties,cohortData:l.selectedCohort?l.selectedCohort:null}}},o={headerName:l.countriesGridService.getCountryGridResources().MIN_RT,headerTooltip:l.countriesGridService.getCountryGridResources().MINIMUM_RANDOMIZATION,cellRenderer:"",colName:"minRT",colValueToMap:"planParamsDetails.minRT",cellRendererSelector:function(e){var t=l.countriesGridService.isWWorStudyTarget(e);return l.isEditablePlan()&&!t&&(!l.isCohortPlan||l.isCohortPlan&&l.selectedCohort&&!0!==e.data.isCohortExcluded&&l.selectedCohort.cohortKey===e.data.cohortKey)?{component:"numberCellRenderer"}:null},hide:this.shouldHideColumn(l),editable:function(e){return!l.countriesGridService.isWWorStudyTarget(e)&&l.isEditablePlan()&&(!l.isCohortPlan||l.isCohortPlan&&l.selectedCohort&&!0!==e.data.isCohortExcluded&&l.selectedCohort.cohortKey===e.data.cohortKey)},field:"planParamsDetails.minRT",suppressMenu:!0,suppressToolPanel:!0,cellRendererParams:function(e){return e.node.data.errorFields[e.column.colId]=l.countriesGridService.validateMinRT(e.node.data.planParamsDetails),e.data.errorFields["planParamsDetails.maxRT"]=l.countriesGridService.validateMaxRT(e.data.planParamsDetails),{numDecimals:0}},cellEditor:"numberCellEditor",cellEditorParams:{step:1,decimals:0,signedInteger:!0,minValue:0,maxValue:15e4},valueGetter:function(e){if(e.data.planParamsDetails&&!l.countriesGridService.isWWorStudyTarget(e))return e.data.planParamsDetails.isCountryLocked?(e.node.data.planParamsDetails.minRT=e.data.planParamsDetails.enrollmentTarget,e.node.data.planParamsDetails.minRT):null==e.data.planParamsDetails.minRT?e.data.planParamsDetails.actuals&&e.data.planParamsDetails.actuals.RT?(e.data.planParamsDetails.minRT=e.data.planParamsDetails.actuals.RT,e.data.planParamsDetails.minRT):"":e.data.planParamsDetails.minRT},valueSetter:function(e){return null==e.newValue&&(e.newValue=""),e.node.data.planParamsDetails.minRT=e.newValue,!0}},s={headerName:l.countriesGridService.getCountryGridResources().MAX_RT,headerTooltip:l.countriesGridService.getCountryGridResources().MAXIMUM_RANDOMIZATION,field:"planParamsDetails.maxRT",colName:"maxRT",colValueToMap:"planParamsDetails.maxRT",hide:this.shouldHideColumn(l),editable:function(e){return!l.countriesGridService.isWWorStudyTarget(e)&&l.isEditablePlan()&&(!l.isCohortPlan||l.isCohortPlan&&l.selectedCohort&&!0!==e.data.isCohortExcluded&&l.selectedCohort.cohortKey===e.data.cohortKey)},suppressMenu:!0,suppressToolPanel:!0,cellRenderer:"",cellRendererSelector:function(e){var t=l.countriesGridService.isWWorStudyTarget(e);return l.isEditablePlan()&&!t&&(!l.isCohortPlan||l.isCohortPlan&&l.selectedCohort&&!0!==e.data.isCohortExcluded&&l.selectedCohort.cohortKey===e.data.cohortKey)?{component:"numberCellRenderer"}:null},cellRendererParams:function(e){return e.node.data.errorFields[e.column.colId]=l.countriesGridService.validateMaxRT(e.node.data.planParamsDetails),{numDecimals:0}},cellEditor:"numberCellEditor",cellEditorParams:{step:1,decimals:0,signedInteger:!0,minValue:0,maxValue:15e4},valueGetter:function(e){if(e.data.planParamsDetails){if(e.data.planParamsDetails.isCountryLocked)return e.node.data.planParamsDetails.maxRT=e.data.planParamsDetails.enrollmentTarget,e.node.data.planParamsDetails.maxRT;if(void 0!==e.data.planParamsDetails.maxRT&&e.data.planParamsDetails.maxRT>-1)return e.data.planParamsDetails.maxRT}}},u={headerName:l.countriesGridService.getCountryGridResources().CAL_LSR,headerTooltip:l.countriesGridService.getCountryGridResources().SOLVED_LAST_SUBJECT_RANDOMIZED,field:"planParamsDetails.solvedPLSR",colName:"solvedPLSR",colValueToMap:"planParamsDetails.solvedPLSR",hide:this.shouldHideColumn(l),editable:!1,suppressMenu:!0,suppressToolPanel:!0,valueFormatter:al,width:130};-1!==n&&(this.columnDefs.splice(n+1,0,a,i,r,o,s,u),this.gridApi.setColumnDefs(this.columnDefs),this.showHideGridColumns(),this.moveMCEColumnsByPref(),this.setMCEFilterModel(),this.columnApi.moveColumns([a.field,i.field,r.field,o.field,s.field,u.field],n+1),l.isSolversOpened=!0,this.setIsMCS_SD_ViewActive(!0),this.countriesGridService.setSolverBasedValidationFlag(this.isMCSViewActive),this.gridApi.refreshCells(),this.gridApi.refreshHeader())},e.prototype.setIsMCS_SD_ViewActive=function(e,t){void 0===t&&(t=!0),this.isMCSViewActive=e,this.countriesGridService.setSolverBasedValidationFlag(t)},e.prototype.toggleSolvers=function(e){var t=this;if(this.gridApi&&this.gridApi.stopEditing(),e!==b.gc.SUBJECTS||!this.disabledSubjectSolver)if(!this.countriesGridService.isGridEdited()||this.currentSolver===e||e!==b.gc.SUBJECT_DISTRIBUTION&&this.currentSolver!==b.gc.SUBJECT_DISTRIBUTION)this.handleToggleSolversOnOkClicked(e,!1);else{var n=this.planDetailsService.getConfirmProp();n.message=this.countriesGridService.getCountryGridResources().SOLVER_NAV_MSG_UNSAVED_CHANGES,this.planDetailsService.showUnsavedDataConfirmation(n).afterClosed().subscribe((function(l){l.action===n.okLabel&&t.handleToggleSolversOnOkClicked(e,!0)}))}},e.prototype.handleToggleSolversOnOkClicked=function(e,t){var n=this.currentSolver;this.countriesGridService.isCohortPlan()?this.refreshGridOnCohortSelection(this.selectedCohort,t):t&&this.resetGridDataForNonCohortPlan(t),this.toggleSolversOnTabclick(e,n)},e.prototype.removeAllSelectionFormCohortList=function(){this.isCohortPlan&&this.cohortData&&this.cohortData.cohortList&&this.cohortData.cohortList.length>0&&-1===this.cohortData.cohortList[0].cohortKey&&this.cohortData.cohortList.splice(0,1)},e.prototype.insertAllSelectionForCohortList=function(){this.isCohortPlan&&this.cohortData&&this.cohortData.cohortList&&this.cohortData.cohortList.length>0&&-1!==this.cohortData.cohortList[0].cohortKey&&!this.isOverThreshold&&(""===this.currentSolver||this.currentSolver!==b.gc.SUBJECT_DISTRIBUTION)&&this.cohortData.cohortList.splice(0,0,{cohortKey:-1,cohortName:this.countriesGridService.getCountryGridResources().SELECT_ALL})},e.prototype.toggleSolversOnTabclick=function(e,t){if(this.currentSolver===e)this.currentSolver="",this.countriesGridService.currentSolver="",this.setRTEnabled(!0),this.insertAllSelectionForCohortList(),this.hideOthersSolvers(e),this.gridOptions.suppressMovableColumns=!1,this.planProperties.isDepCohortPlan===b.xc&&this.moveToCard.emit("ww");else switch(this.currentSolver=e,this.countriesGridService.currentSolver=e,this.gridOptions.suppressMovableColumns=!0,e){case b.gc.SUBJECT_DISTRIBUTION:this.planProperties.isDepCohortPlan===b.xc&&(this.moveToCard.emit("ww"),this.updateDependentCohortCard.emit(null)),this.showDistributionSolvers(t);break;case b.gc.LAST_SUBJECT:this.insertAllSelectionForCohortList(),this.showLSRFields(t),this.moveToCard.emit("dependent-cohort-cue-card");break;case b.gc.MIN_NUM_RATE:this.insertAllSelectionForCohortList(),this.showMRSFields(t),this.moveToCard.emit("dependent-cohort-cue-card");break;case b.gc.SUBJECTS:this.insertAllSelectionForCohortList(),this.showCRTFields(t),this.moveToCard.emit("dependent-cohort-cue-card")}},e.prototype.loadLocalResourcesForSolvers=function(){this.countrySolversLabel=this.countriesGridService.getCountryGridResources().COUNTRY_SOLVERS,this.subjectDistributionLabel=this.countriesGridService.getCountryGridResources().SUBJECT_DISTRIBUTION_SOLVER_TAB,this.lastSubjectLabel=this.countriesGridService.getCountryGridResources().LAST_SUBJECT_SOLVER_TAB,this.minimumRateLabel=this.countriesGridService.getCountryGridResources().MINIMUM_RATE_SOLVER_TAB,this.subjetsLabel=this.countriesGridService.getCountryGridResources().SUBJECTS_SOLVER_TAB},e.prototype.setRTEnabled=function(e){this.setRTEnable=e},e.prototype.preserveLastSolverAfterPlanChange=function(){if(!this.isEditablePlan())return this.hideOthersSolvers(this.currentSolver),void(this.currentSolver="");this.countriesGridService.setSolverBasedValidationFlag(!1)},e.prototype.resetGridDataForNonCohortPlan=function(e){var t=this,n=[];this.gridApi.forEachNode((function(e){var l=t.getCountryRowDataToRevert(e.data,!e.data.isCohortCountry);l&&(e.data.isEdited=!1,l.isCohortCountry&&(e.data.isCohortExcluded=l.isCohortExcluded),e.data.planParamsDetails=JSON.parse(JSON.stringify(l.planParamsDetails))),n.push(e)})),this.gridApi.redrawRows({rowNodes:n}),this.setMCEFilterModel(),e&&this.resetEditedData()},e.prototype.refreshGridOnCohortSelection=function(e,t){var n=this;if(e){var l=[];this.gridApi.forEachNode((function(a){if(a.data.isSelectedCohort=!(a.data.isCohortCountry&&(!a.data.isCohortCountry||e.cohortKey!==a.data.cohortKey&&-1!==e.cohortKey)),t){var i=n.getCountryRowDataToRevert(a.data,!a.data.isCohortCountry);i&&(a.data.isEdited=!1,i.isCohortCountry&&(a.data.isCohortExcluded=i.isCohortExcluded),a.data.planParamsDetails=JSON.parse(JSON.stringify(i.planParamsDetails)))}l.push(a)})),this.gridApi.redrawRows({rowNodes:l}),this.setMCEFilterModel(),t&&this.resetEditedData()}},e.prototype.getCountryRowDataToRevert=function(e,t){for(var n=JSON.parse(JSON.stringify(this.planDetails.geoList.geography)),l=(this.countriesGridService.getReportingPeriod(this.planDetailsService.studyKey),null),a=0;a<n.length;a++){if(n[a].isCohortCountry&&n[a].geographyKey===e.geographyKey&&n[a].cohortKey===e.cohortKey){l=n[a];break}if(t&&n[a].geographyKey===e.geographyKey){l=n[a];break}}return l&&(l.planParamsDetails.calculatedRR=s.c.isDefined(e.planParamsDetails.RR,!0)?l.planParamsDetails.RR:null,l.planParamsDetails.calculatedSR=s.c.isDefined(l.planParamsDetails.SR,!0)?l.planParamsDetails.SR:null),l},e.prototype.getSelectedCohort=function(e){var t=this;if(this.countriesGridService.isGridEdited()&&this.countriesGridService.isCohortPlan()&&(this.currentSolver===b.gc.SUBJECT_DISTRIBUTION||this.isOverThreshold)){var n=this.planDetailsService.getConfirmProp();n.message=this.countriesGridService.getCountryGridResources().SOLVER_NAV_MSG_UNSAVED_CHANGES,this.planDetailsService.showUnsavedDataConfirmation().afterClosed().subscribe((function(l){l.action===n.okLabel?(t.setSelectedCohort(e,!0),t.setThresholdSequenceMsg(e)):l.action===n.cancelLabel&&(t.resetToPreviousCohort(e),t.setThresholdSequenceMsg({value:t.selectedCohort.cohortKey}))}))}else this.currentSolver===b.gc.SUBJECT_DISTRIBUTION&&this.selectedCohort.cohortKey!==e.value?(this.setSelectedCohort(e,!0),this.setThresholdSequenceMsg(e)):(this.setSelectedCohort(e,!1),this.setThresholdSequenceMsg(e))},e.prototype.showCountryGridMessageFlag=function(){this.showCountyGridMessage=!0},e.prototype.hideCountryGridMessageFlag=function(){this.showCountyGridMessage=!1},e.prototype.resetToPreviousCohort=function(e){var t=this.selectedCohort.cohortKey;t!==e.value&&e.source.options._results.forEach((function(n){n.value===t&&e.source.writeValue(t)}))},e.prototype.setSelectedCohort=function(e,t){this.cohortSelectedList=this.cohortData.cohortList.filter((function(t){return t.cohortKey===e.value})),this.selectedCohort=Object.assign({},this.cohortSelectedList[0]),this.refreshGridOnCohortSelection(this.selectedCohort,t),this.countriesGridService.setSelectedCohort(this.selectedCohort),this.selectedCohortKey=this.selectedCohort?this.selectedCohort.cohortKey:-1,this.gridApi.refreshHeader(),this.setIsCohSelected(this.selectedCohortKey)},e.prototype.setIsCohSelected=function(e){-1!==e&&this.gridApi&&this.gridApi.forEachNode((function(t){t.data&&void 0!==t.data.isCohortCountry&&!0===t.data.isCohortCountry&&void 0!==t.data.cohortKey&&(t.data.isCohSelected=t.data.cohortKey.toString()===e.toString())}))},e.prototype.resetEditedData=function(){var e=this.countriesGridService.getEditedButNotSavedCountries();this.countriesGridService.setEditedCountries([]),this.countriesGridService.setSelectedAndEditedCountriesGridData([]),this.countriesForm=new x.k({}),this.planOptionsService.planForm=this.countriesForm,this.planDetailsService.setSaveDisability(!(e&&e.length>0)),this.planDetailsService.setReadOnly(!0)},e.prototype.isCohortCellDisabled=function(e){return!1===e.isSelectedCohort},e.prototype.isCohortCellEditable=function(e){return!1!==e.isSelectedCohort},e.prototype.setRevertLink=function(){this.planDetailsService.setReadOnly(!1),this.planDetailsService.isCountryRevertConfirmation=!0},e.prototype.getAddCountryActions=function(){this.addCountryActions=this.countriesGridService.getAddCountryOptions()},e.prototype.setInitialOverThresholdData=function(){var e;this.planDetails&&this.planDetails.planProperties&&this.gridApi&&this.isOverThreshold&&(null!=(e=this.selectedCohort&&-1!==this.selectedCohort.cohortKey?this.selectedCohort.cohortKey:this.cohortData&&Array.isArray(this.cohortData.cohortList)&&this.cohortData.cohortList.filter((function(e){return-1!==e.cohortKey})).find((function(e){return void 0!==e.cohortKey})).cohortKey)&&this.getSelectedCohortThreshold({value:e}))},e.prototype.setThresholdSequenceMsg=function(e){if(this.isOverThreshold&&this.isDepCohortPlan){var t=this.cohortData.cohortList.filter((function(t){return t.cohortKey===e.value}));t.length>0&&(t[0].sourceCohorts&&t[0].sourceCohorts.toString().length>0?(this.isOverThresholdSequence=!0,this.cohortToSolveFirstInSequence=t[0].sourceCohorts.toString(),this.overThresholdSequenceMsg=this.planDetailsService.getOverThresholdMessages().OVER_THRESHOLD_SEQUENCE_MSG,this.overThresholdSequenceMsg=this.overThresholdSequenceMsg.replace("{0}",this.cohortToSolveFirstInSequence.toString())):(this.isOverThresholdSequence=!1,this.cohortToSolveFirstInSequence="",this.overThresholdSequenceMsg=this.planDetailsService.getOverThresholdMessages().OVER_THRESHOLD_SEQUENCE_MSG,this.overThresholdSequenceMsg=this.overThresholdSequenceMsg.replace("{0}",this.cohortToSolveFirstInSequence.toString())))}},e.prototype.isCohortOptionSelected=function(e){if(this.isCohortOptionSelectedTriangle=e,this.isOverThreshold&&!this.isDepCohortPlan){var t=this.cohortData.cohortList.filter((function(e){return!0===e.isReCalRequired}));this.parallelPlanMessupCohort=t.length>0}},e.prototype.columnVisible=function(e){if(e.column){var t=e.column.getColId()?e.column.getColId():e.column.getColDef().field;e.visible!==this.columnPreferencesService.getColumnVisibilityFromPref(t)&&this.isColumnVisibleBasedOnPlanType(t,this.planDetails)&&this.columnPreferencesService.updateColumnPreference(t,e.visible)}},e.prototype.getSelectedCohortThreshold=function(e){this.setSelectedCohort(e,!1),this.setThresholdSequenceMsg(e)},e.prototype.getSiteInitiationForCountry=function(e){var t=null;if(this.planDetails&&this.planDetails.geoList&&this.planDetails.geoList.geography){var n=[].concat(this.planDetails.geoList.geography).find((function(t){return t.geographyKey===e&&!1===t.isCohortCountry}));n&&(t=n.planParamsDetails.siteInitiationMethod)}return t},e.prototype.onSaveChange=function(){var e=this;this.subscriptions.push(this.planDetailsService.saveOption$.subscribe((function(t){if(t.toLowerCase()===b.Mb.COUNTRIES.toLowerCase()){e.stopEditing();var n=e.getSelectedAndEditedRows(),l=e.getSelectedRows(),a=e.getEditedRows();e.countriesGridService.updatePlanDetails(n,l,a,e.planProperties,e.planProperties&&e.planProperties.isOverThreshold&&e.selectedCohort&&e.selectedCohort.cohortKey),e.mceSaveService.multiCountrySave()}})))},e.prototype.setMCEVisibility=function(e){this.setGridVisibility.emit(e)},e.prototype.onrowGroupOpened=function(e){if(this.gridApi.refreshHeader(),this.applicationContextService.updateCollapsedRowForMapByPlanKey(this.planDetails.planProperties.planKey,{expanded:e.node.expanded,geographyKey:e.node.data.geographyKey}),this.gridApi){this.gridApi.refreshCells();var t=this.planDetailsService.isExpand;this.planDetailsService.editDataRowCount=Number(this.gridApi.getDisplayedRowCount())+Number(this.gridApi.getPinnedTopRowCount()),this.setCountryGridHeight(t?b.Ob.EXPAND:b.Ob.COLLAPSE)}},e.prototype.worldWideNameClicked=function(e,t){if(void 0!==e){this.gridCustomGroupingService.worldWideNameClicked(e,this.gridApi,this.pinnedTopRowData,t),this.isHiddenWWData=e,this.gridApi.refreshHeader();var n={node:{expanded:this.isHiddenWWData,data:{geographyKey:"WW"+this.planDetails.planProperties.planKey}}};t||this.updateExpandPrefForCohortOnHeaderEvent(),this.onrowGroupOpened(n);var l=this.planDetailsService.isExpand;this.gridApi&&(this.planDetailsService.editDataRowCount=Number(this.gridApi.getDisplayedRowCount())+Number(this.gridApi.getPinnedTopRowCount()),this.setCountryGridHeight(l?b.Ob.EXPAND:b.Ob.COLLAPSE))}},e.prototype.updateExpandPrefForCohortOnHeaderEvent=function(){var e=this;this.gridApi&&this.gridApi.forEachNode((function(t){!1===t.data.isCohortCountry&&e.applicationContextService.updateCollapsedRowForMapByPlanKey(e.planDetails.planProperties.planKey,{expanded:t.expanded,geographyKey:t.data.geographyKey})}))},e.prototype.isColumnVisible=function(e){return this.columnPreferencesService.getColumnVisibilityFromPref(e)&&this.isColumnVisibleBasedOnPlanType(e,this.planDetails)},e.prototype.showHideGridColumns=function(){this.columnApi&&this.planDetails&&(this.planDetails&&this.planDetails.planProperties&&!this.planDetails.planProperties.isPlan?(this.columnApi.setColumnsVisible([P.a.PROJECTED_RR,P.a.PROJECTED_SR,P.a.PROJECTED_SFR,P.a.PROJECTED_SAS],!0),this.columnApi.getColumn(P.a.PROJECTED_RR).getColDef().suppressToolPanel=!1,this.columnApi.getColumn(P.a.PROJECTED_SR).getColDef().suppressToolPanel=!1,this.columnApi.getColumn(P.a.PROJECTED_SFR).getColDef().suppressToolPanel=!1,this.columnApi.getColumn(P.a.PROJECTED_SAS).getColDef().suppressToolPanel=!1):(this.columnApi.setColumnsVisible([P.a.PROJECTED_RR,P.a.PROJECTED_SR,P.a.PROJECTED_SFR,P.a.PROJECTED_SAS],!1),this.columnApi.getColumn(P.a.PROJECTED_RR).getColDef().suppressToolPanel=!0,this.columnApi.getColumn(P.a.PROJECTED_SR).getColDef().suppressToolPanel=!0,this.columnApi.getColumn(P.a.PROJECTED_SFR).getColDef().suppressToolPanel=!0,this.columnApi.getColumn(P.a.PROJECTED_SAS).getColDef().suppressToolPanel=!0),this.planDetails&&!1===this.planDetails.planProperties.isPlan&&"Y"!==this.planProperties.isCohortPlan?(this.columnApi.setColumnVisible(P.a.RE_DIST_SITES,!0),this.columnApi.getColumn(P.a.RE_DIST_SITES).getColDef().suppressToolPanel=!1):(this.columnApi.setColumnVisible(P.a.RE_DIST_SITES,!1),this.columnApi.getColumn(P.a.RE_DIST_SITES).getColDef().suppressToolPanel=!0),"Y"===this.planDetails.planProperties.isCohortPlan?(this.columnApi.setColumnVisible(P.a.IS_COHORT_EXCLUDED,!0),this.columnApi.setColumnVisible(P.a.COHORT_NAME,!0)):(this.columnApi.setColumnVisible(P.a.IS_COHORT_EXCLUDED,!1),this.columnApi.setColumnVisible(P.a.COHORT_NAME,!1)))},e.prototype.getGridColumnIndex=function(e){return this.columnApi.getAllGridColumns().findIndex((function(t,n){return t.getId()===e||t.getColDef().field===e}))},e.prototype.isAdjustmentPlan=function(e){return e&&this.planDetails.planProperties&&!this.planDetails.planProperties.isPlan},e.prototype.displayRedistributedSitesColumn=function(e){return e&&!1===e.planProperties.isPlan&&"Y"!==e.planProperties.isCohortPlan},e.prototype.isSRColumnVisible=function(e){return e&&e.planProperties&&"Y"===e.planProperties.isCohortPlan||!0===this.countriesGridService.isSRAvailable()},e.prototype.isRRColumnVisible=function(e){return e&&e.planProperties&&"Y"===e.planProperties.isCohortPlan||!0!==this.countriesGridService.isSRAvailable()},e.prototype.isCohortPlanData=function(e){return e&&e.planProperties&&"Y"===e.planProperties.isCohortPlan},e.prototype.isColumnVisibleBasedOnPlanType=function(e,t){switch(e){case P.a.PROJECTED_RR:case P.a.PROJECTED_SR:case P.a.PROJECTED_SFR:case P.a.PROJECTED_SAS:return this.isAdjustmentPlan(t);case P.a.RE_DIST_SITES:return this.displayRedistributedSitesColumn(t);case P.a.SR:return this.isSRColumnVisible(t);case P.a.RR:return this.isRRColumnVisible(t);case P.a.IS_COHORT_EXCLUDED:case P.a.COHORT_NAME:return this.isCohortPlanData(t);default:return!0}},e.prototype.showHideMCEColumnsByPref=function(){var e,t,n=this.columnPreferencesService.getMCEColumnVisibilityPref();if(n)try{for(var l=Ue.__values(Object.keys(n)),a=l.next();!a.done;a=l.next()){var i=a.value;this.columnApi.setColumnVisible(i,!n[i])}}catch(r){e={error:r}}finally{try{a&&!a.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}this.showHideGridColumns()},e.prototype.excludeCohortRow=function(){if(this.planDetails){var e=this.applicationContextService.getMCEFilterPref(this.planDetails.planProperties.planKey);if(e||(e={}),this.planDetails&&this.planDetails.planProperties&&"Y"===this.planDetails.planProperties.isCohortPlan&&this.gridApi){if(!e.isCohortExcluded){this.gridApi.destroyFilter("isCohortExcluded");var t=this.gridApi.getFilterInstance("isCohortExcluded");e.isCohortExcluded={values:["All cohort","include"],filterType:"set"},t.setModel(e.isCohortExcluded.values)}}else e.isCohortExcluded&&delete e.isCohortExcluded;this.applicationContextService.updateMCEFilterPref(this.planDetails.planProperties.planKey,e)}},e.prototype.dragStopped=function(e){var t=this.columnApi.getAllGridColumns().map((function(e,t){return e.getId()}));this.columnPreferencesService.updateColumnPreferenceOnMoveColumn(t)},e.prototype.moveMCEColumnsByPref=function(){for(var e=this.getPinnedColumnsCount(),t=this.columnPreferencesService.getMCEColumnOrderPref(),n=e;n<t.length;n++)this.columnApi.moveColumn(t[n],n+1)},e.prototype.getPinnedColumnsCount=function(){var e=this.columnApi.getAllGridColumns().filter((function(e,t){return"left"===e.getColDef().pinned}));return e?e.length:1},e.prototype.rateAdjustmentClicked=function(){this.countriesGridService.rateAdjustmentClicked(this.planDetailsService.planKey,b.Mb.RATE_ADJUSTMENT)},e}();function tl(e,t){return null===e&&null===t?0:null===e?-1:null===t?1:e.localeCompare(t)}function nl(e){var t=new u.DecimalPipe("en_US");return isNaN(e.value)?"":t.transform(e.value,"1.0-1")}function ll(e){var t=new u.DecimalPipe("en_US");return isNaN(e.value)?"":t.transform(e.value,"1.0-3")}function al(e){var t=new u.DatePipe("en_US"),n=null;return n=e.value instanceof Date?e.value:new Date((e.value||"").replace(/-/g,"/")),!e.value||isNaN(n.getTime())?"":t.transform(n,"dd-MMM-yyyy")}function il(e){var t=new u.DatePipe("en_US"),n=new Date((e.value||"").replace(/-/g,"/"));return!e.value||isNaN(n.getTime())?"":t.transform(n,"dd-MMM-yyyy")}var rl=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ol(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"div",[["class","text-center"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"span",[["class","threshold-sequence-red-color"]],null,null,null,null,null)),(e()(),l["ɵted"](3,null,["",""]))],null,(function(e,t){e(t,3,0,t.component.overThresholdComplexMsg)}))}function sl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"button",[["class","mat-button-action mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var a=!0,i=e.component;return"click"===t&&(a=!1!==l["ɵnov"](e,1)._checkDisabled(n)&&a),"mouseenter"===t&&(a=!1!==l["ɵnov"](e,1)._handleMouseEnter()&&a),"click"===t&&(a=!1!==i.optionClicked(e.context.$implicit)&&a),a}),bt.c,bt.a)),l["ɵdid"](1,180224,[[5,4],[6,4]],0,Z.e,[l.ElementRef,u.DOCUMENT,m.h,[2,Z.b]],null,null),(e()(),l["ɵeld"](2,0,null,0,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](3,null,["",""]))],null,(function(e,t){e(t,0,0,l["ɵnov"](t,1).role,l["ɵnov"](t,1)._highlighted,l["ɵnov"](t,1)._triggersSubmenu,l["ɵnov"](t,1)._getTabIndex(),l["ɵnov"](t,1).disabled.toString(),l["ɵnov"](t,1).disabled||null),e(t,3,0,t.context.$implicit.name)}))}function ul(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-triangle",[],null,null,null,Et.b,Et.a)),l["ɵdid"](1,638976,null,0,Tt.a,[],{seqValue:[0,"seqValue"],isReCalRequired:[1,"isReCalRequired"]},null)],(function(e,t){var n=t.component;e(t,1,0,null==n.selectedCohort?null:n.selectedCohort.reCalSeqNumber,null==n.selectedCohort?null:n.selectedCohort.isReCalRequired)}),null)}function dl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-triangle",[],null,null,null,Et.b,Et.a)),l["ɵdid"](1,638976,null,0,Tt.a,[],{isReCalRequired:[0,"isReCalRequired"]},null)],(function(e,t){var n=t.component;e(t,1,0,null==n.selectedCohort?null:n.selectedCohort.isReCalRequired)}),null)}function cl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,(function(e,t){var n=t.component;e(t,1,0,null==n.selectedCohort?null:n.selectedCohort.reCalSeqNumber)}))}function pl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ul)),l["ɵdid"](2,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,dl)),l["ɵdid"](4,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,cl)),l["ɵdid"](6,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](7,null,[" "," "]))],(function(e,t){var n=t.component;e(t,2,0,n.isDepCohortPlan&&!(null!=n.selectedCohort&&n.selectedCohort.isParallelCohort)&&(null==n.selectedCohort?null:n.selectedCohort.isReCalRequired)),e(t,4,0,(null==n.selectedCohort?null:n.selectedCohort.isParallelCohort)&&(null==n.selectedCohort?null:n.selectedCohort.isReCalRequired)),e(t,6,0,n.isDepCohortPlan&&!(null!=n.selectedCohort&&n.selectedCohort.isParallelCohort)&&!(null!=n.selectedCohort&&n.selectedCohort.isReCalRequired))}),(function(e,t){var n=t.component;e(t,7,0,null==n.selectedCohort?null:n.selectedCohort.cohortName)}))}function hl(e){return l["ɵvid"](0,[(e()(),l["ɵted"](0,null,[" "," "]))],null,(function(e,t){var n=t.component;e(t,0,0,null==n.selectedCohort?null:n.selectedCohort.cohortName)}))}function ml(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,t){e(t,0,0,t.parent.context.$implicit.cohortName)}))}function gl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-triangle",[],null,null,null,Et.b,Et.a)),l["ɵdid"](1,638976,null,0,Tt.a,[],{seqValue:[0,"seqValue"],isReCalRequired:[1,"isReCalRequired"]},null)],(function(e,t){e(t,1,0,null==t.parent.parent.context.$implicit?null:t.parent.parent.context.$implicit.reCalSeqNumber,null==t.parent.parent.context.$implicit?null:t.parent.parent.context.$implicit.isReCalRequired)}),null)}function Sl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-triangle",[],null,null,null,Et.b,Et.a)),l["ɵdid"](1,638976,null,0,Tt.a,[],{isReCalRequired:[0,"isReCalRequired"]},null)],(function(e,t){e(t,1,0,null==t.parent.parent.context.$implicit?null:t.parent.parent.context.$implicit.isReCalRequired)}),null)}function fl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","threshold-dependent-sequence-unmessup-number"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,(function(e,t){e(t,1,0,null==t.parent.parent.context.$implicit?null:t.parent.parent.context.$implicit.reCalSeqNumber)}))}function vl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,12,"span",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,11,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,gl)),l["ɵdid"](3,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Sl)),l["ɵdid"](5,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,fl)),l["ɵdid"](7,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](8,0,null,null,4,"span",[],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](10,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpad"](11,5),(e()(),l["ɵted"](12,null,[" "," "]))],(function(e,t){var n=t.component;e(t,3,0,n.isCohortOptionSelectedTriangle&&n.isDepCohortPlan&&!(null!=t.parent.context.$implicit&&t.parent.context.$implicit.isParallelCohort)&&(null==t.parent.context.$implicit?null:t.parent.context.$implicit.isReCalRequired)),e(t,5,0,n.isCohortOptionSelectedTriangle&&(null==t.parent.context.$implicit?null:t.parent.context.$implicit.isParallelCohort)&&(null==t.parent.context.$implicit?null:t.parent.context.$implicit.isReCalRequired)),e(t,7,0,n.isDepCohortPlan&&!(null!=t.parent.context.$implicit&&t.parent.context.$implicit.isParallelCohort)&&!(null!=t.parent.context.$implicit&&t.parent.context.$implicit.isReCalRequired));var l=e(t,11,0,n.isDepCohortPlan&&null!=t.parent.context.$implicit&&t.parent.context.$implicit.isReCalRequired?"threshold-dependent-sequence-parallel-messup-name":"",!n.isDepCohortPlan||null==t.parent.context.$implicit||!t.parent.context.$implicit.isParallelCohort||null!=t.parent.context.$implicit&&t.parent.context.$implicit.isReCalRequired?"":"threshold-dependent-parallel-unmessup-name",!n.isDepCohortPlan||null!=t.parent.context.$implicit&&t.parent.context.$implicit.isParallelCohort||null!=t.parent.context.$implicit&&t.parent.context.$implicit.isReCalRequired?"":"threshold-dependent-sequence-unmessup-name",n.isDepCohortPlan||null!=t.parent.context.$implicit&&t.parent.context.$implicit.isReCalRequired?"":"threshold-parallel-unmessup-name",n.isDepCohortPlan||null!=t.parent.context.$implicit&&t.parent.context.$implicit.isReCalRequired||n.parallelPlanMessupCohort?"":"threshold-parallel-all-unmessup-name");e(t,10,0,l)}),(function(e,t){e(t,12,0,t.parent.context.$implicit.cohortName)}))}function Cl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,t,n){var a=!0;return"click"===t&&(a=!1!==l["ɵnov"](e,1)._selectViaInteraction()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,1)._handleKeydown(n)&&a),a}),At.d,At.b)),l["ɵdid"](1,8568832,[[18,4]],0,ue.p,[l.ElementRef,l.ChangeDetectorRef,[2,ue.j],[2,ue.o]],{value:[0,"value"]},null),(e()(),l["ɵand"](16777216,null,0,1,null,ml)),l["ɵdid"](3,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,0,1,null,vl)),l["ɵdid"](5,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,1,0,t.context.$implicit.cohortKey),e(t,3,0,!n.isOverThreshold),e(t,5,0,n.isOverThreshold)}),(function(e,t){e(t,0,0,l["ɵnov"](t,1)._getTabIndex(),l["ɵnov"](t,1).selected,l["ɵnov"](t,1).multiple,l["ɵnov"](t,1).active,l["ɵnov"](t,1).id,l["ɵnov"](t,1)._getAriaSelected(),l["ɵnov"](t,1).disabled.toString(),l["ɵnov"](t,1).disabled)}))}function yl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"span",[["class","threshold-sequence-red-color"]],null,null,null,null,null)),(e()(),l["ɵted"](3,null,["",""]))],null,(function(e,t){e(t,3,0,t.component.overThresholdSequenceMsg)}))}function Rl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,35,"div",[["class","cohort-select row ctos-countries-grid-component"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"div",[["class","cohort-label col-2"]],null,null,null,null,null)),(e()(),l["ɵted"](2,null,[""," "])),(e()(),l["ɵeld"](3,0,null,null,26,"div",[["class","cohort-singleSelect-dropdown col-2"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,25,"mat-form-field",[["class","over-threshold-cohort-dropdown mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,It.b,It.a)),l["ɵdid"](5,7520256,null,9,re.c,[l.ElementRef,l.ChangeDetectorRef,[2,ue.h],[2,g.b],[2,re.a],h.a,l.NgZone,[2,Q.a]],null,null),l["ɵqud"](603979776,9,{_controlNonStatic:0}),l["ɵqud"](335544320,10,{_controlStatic:0}),l["ɵqud"](603979776,11,{_labelChildNonStatic:0}),l["ɵqud"](335544320,12,{_labelChildStatic:0}),l["ɵqud"](603979776,13,{_placeholderChild:0}),l["ɵqud"](603979776,14,{_errorChildren:1}),l["ɵqud"](603979776,15,{_hintChildren:1}),l["ɵqud"](603979776,16,{_prefixChildren:1}),l["ɵqud"](603979776,17,{_suffixChildren:1}),(e()(),l["ɵeld"](15,0,null,1,14,"mat-select",[["class","mat-select"],["panelClass","plan-dropdown-panel ctos-cohort-list-panel"],["role","listbox"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"selectionChange"],[null,"valueChange"],[null,"openedChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],(function(e,t,n){var a=!0,i=e.component;return"keydown"===t&&(a=!1!==l["ɵnov"](e,17)._handleKeydown(n)&&a),"focus"===t&&(a=!1!==l["ɵnov"](e,17)._onFocus()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,17)._onBlur()&&a),"selectionChange"===t&&(a=!1!==i.getSelectedCohort(n)&&a),"valueChange"===t&&(a=!1!==(i.selectedCohortKey=n)&&a),"openedChange"===t&&(a=!1!==i.isCohortOptionSelected(n)&&a),a}),_t.b,_t.a)),l["ɵprd"](6144,null,ue.j,null,[Nt.c]),l["ɵdid"](17,2080768,[[4,4],["cohorts",4]],3,Nt.c,[p.d,l.ChangeDetectorRef,l.NgZone,ue.b,l.ElementRef,[2,g.b],[2,x.u],[2,x.l],[2,re.c],[8,null],[8,null],Nt.a,m.j],{panelClass:[0,"panelClass"],value:[1,"value"]},{openedChange:"openedChange",selectionChange:"selectionChange",valueChange:"valueChange"}),l["ɵqud"](603979776,18,{options:1}),l["ɵqud"](603979776,19,{optionGroups:1}),l["ɵqud"](603979776,20,{customTrigger:0}),l["ɵprd"](2048,[[9,4],[10,4]],re.d,null,[Nt.c]),(e()(),l["ɵeld"](22,0,null,0,5,"mat-select-trigger",[],null,null,null,null,null)),l["ɵdid"](23,16384,[[20,4]],0,Nt.e,[],null,null),(e()(),l["ɵeld"](24,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,pl)),l["ɵdid"](26,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["ɵand"](0,[["underThreshold",2]],null,0,null,hl)),(e()(),l["ɵand"](16777216,null,1,1,null,Cl)),l["ɵdid"](29,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](30,0,null,null,2,"div",[["class","col-6"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,yl)),l["ɵdid"](32,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](33,0,null,null,2,"div",[["class","col-2 text-right silde-toggle"]],null,null,null,null,null)),(e()(),l["ɵeld"](34,0,null,null,1,"ctos-slide-toggle",[],null,[[null,"toggle"]],(function(e,t,n){var l=!0;return"toggle"===t&&(l=!1!==e.component.onCountryViewChange(n)&&l),l}),xt,Gt)),l["ɵdid"](35,114688,null,0,wt,[],{checked:[0,"checked"],leftDisplayText:[1,"leftDisplayText"],rightDisplayText:[2,"rightDisplayText"]},{toggle:"toggle"})],(function(e,t){var n=t.component;e(t,17,0,"plan-dropdown-panel ctos-cohort-list-panel",n.selectedCohortKey),e(t,26,0,n.isOverThreshold,l["ɵnov"](t,27)),e(t,29,0,n.cohortData.cohortList),e(t,32,0,n.isOverThresholdSequence&&n.isOverThreshold&&n.isDepCohortPlan&&!(!n.isEditablePlan()&&n.countriesGridService.hasEditAccess())),e(t,35,0,n.isMCEVisible,n.localResources.slideToggleLeftText,n.localResources.slideToggleRightText)}),(function(e,t){e(t,2,0,t.component.countriesGridService.getCountryGridResources().SELECT_COHORTS_TO_EDIT),e(t,4,1,["standard"==l["ɵnov"](t,5).appearance,"fill"==l["ɵnov"](t,5).appearance,"outline"==l["ɵnov"](t,5).appearance,"legacy"==l["ɵnov"](t,5).appearance,l["ɵnov"](t,5)._control.errorState,l["ɵnov"](t,5)._canLabelFloat,l["ɵnov"](t,5)._shouldLabelFloat(),l["ɵnov"](t,5)._hasFloatingLabel(),l["ɵnov"](t,5)._hideControlPlaceholder(),l["ɵnov"](t,5)._control.disabled,l["ɵnov"](t,5)._control.autofilled,l["ɵnov"](t,5)._control.focused,"accent"==l["ɵnov"](t,5).color,"warn"==l["ɵnov"](t,5).color,l["ɵnov"](t,5)._shouldForward("untouched"),l["ɵnov"](t,5)._shouldForward("touched"),l["ɵnov"](t,5)._shouldForward("pristine"),l["ɵnov"](t,5)._shouldForward("dirty"),l["ɵnov"](t,5)._shouldForward("valid"),l["ɵnov"](t,5)._shouldForward("invalid"),l["ɵnov"](t,5)._shouldForward("pending"),!l["ɵnov"](t,5)._animationsEnabled]),e(t,15,1,[l["ɵnov"](t,17).id,l["ɵnov"](t,17).tabIndex,l["ɵnov"](t,17)._getAriaLabel(),l["ɵnov"](t,17)._getAriaLabelledby(),l["ɵnov"](t,17).required.toString(),l["ɵnov"](t,17).disabled.toString(),l["ɵnov"](t,17).errorState,l["ɵnov"](t,17).panelOpen?l["ɵnov"](t,17)._optionIds:null,l["ɵnov"](t,17).multiple,l["ɵnov"](t,17)._ariaDescribedby||null,l["ɵnov"](t,17)._getAriaActiveDescendant(),l["ɵnov"](t,17).disabled,l["ɵnov"](t,17).errorState,l["ɵnov"](t,17).required,l["ɵnov"](t,17).empty])}))}function Dl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"div",[["class","row ctos-countries-grid-component"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","col-12 text-right"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"ctos-slide-toggle",[],null,[[null,"toggle"]],(function(e,t,n){var l=!0;return"toggle"===t&&(l=!1!==e.component.onCountryViewChange(n)&&l),l}),xt,Gt)),l["ɵdid"](3,114688,null,0,wt,[],{checked:[0,"checked"],leftDisplayText:[1,"leftDisplayText"],rightDisplayText:[2,"rightDisplayText"]},{toggle:"toggle"})],(function(e,t){var n=t.component;e(t,3,0,n.isMCEVisible,n.localResources.slideToggleLeftText,n.localResources.slideToggleRightText)}),null)}function Pl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","uneditable-plan-message"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.countriesGridService.getCountryGridResources().UNEDITABLE_PLAN_MSG)}))}function bl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","uneditable-plan-message"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.countriesGridService.getCountryGridResources().EMPTY_COHORT_LIST_MSG)}))}function El(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Pl)),l["ɵdid"](2,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,bl)),l["ɵdid"](4,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,!n.isEditablePlan()&&n.countriesGridService.hasEditAccess()),e(t,4,0,n.isEditablePlan()&&n.countriesGridService.hasEditAccess()&&n.isCohortPlanVoidOfCohorts())}),null)}function Tl(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{countriesGrid:0}),l["ɵqud"](402653184,2,{gridCardWrapper:0}),l["ɵqud"](402653184,3,{selectCountries:0}),l["ɵqud"](402653184,4,{cohorts:0}),(e()(),l["ɵand"](16777216,null,null,1,null,ol)),l["ɵdid"](5,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](6,0,[[2,0],["gridCardWrapper",1]],null,85,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,15,"div",[["class","ellipses-vertical float"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,16777216,null,null,5,"button",[["aria-haspopup","true"],["class","mat-menu-trigger"],["mat-icon-button",""]],[[1,"aria-expanded",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var a=!0;return"mousedown"===t&&(a=!1!==l["ɵnov"](e,9)._handleMousedown(n)&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,9)._handleKeydown(n)&&a),"click"===t&&(a=!1!==l["ɵnov"](e,9)._handleClick(n)&&a),a}),z.b,z.a)),l["ɵdid"](9,1196032,null,0,Z.g,[c.c,l.ElementRef,l.ViewContainerRef,Z.c,[2,Z.d],[8,null],[2,g.b],m.h],{menu:[0,"menu"]},null),l["ɵdid"](10,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵeld"](11,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,ee.b,ee.a)),l["ɵdid"](12,9158656,null,0,te.b,[l.ElementRef,te.d,[8,null],[2,te.a],[2,l.ErrorHandler]],null,null),(e()(),l["ɵted"](-1,0,["more_vert"])),(e()(),l["ɵeld"](14,0,null,null,8,"mat-menu",[["class","context-menu"]],null,null,null,bt.d,bt.b)),l["ɵprd"](6144,null,Z.d,null,[Z.h]),l["ɵprd"](6144,null,Z.b,null,[Z.d]),l["ɵdid"](17,1294336,[["menuAction",4]],3,Z.h,[l.ElementRef,l.NgZone,Z.a],{panelClass:[0,"panelClass"]},null),l["ɵqud"](603979776,5,{_allItems:1}),l["ɵqud"](603979776,6,{items:1}),l["ɵqud"](603979776,7,{lazyContent:0}),(e()(),l["ɵand"](16777216,null,0,1,null,sl)),l["ɵdid"](22,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](23,0,null,null,61,"div",[["class","row add-countries-container "]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,null,null,8,"button",[["class","add-country-btn"],["mat-button",""],["style","margin: 0 0 0 10px;"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var a=!0;return"click"===t&&(a=!1!==l["ɵnov"](e,87).toggleShowPanel()&&a),a}),z.b,z.a)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](26,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵdid"](27,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],{disabled:[0,"disabled"]},null),(e()(),l["ɵeld"](28,0,null,0,3,"i",[["class","material-icons"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](30,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵted"](-1,null,["add"])),(e()(),l["ɵted"](32,0,[" "," "])),(e()(),l["ɵeld"](33,0,null,null,0,"div",[["class","separator"]],null,null,null,null,null)),(e()(),l["ɵeld"](34,0,null,null,9,"div",[["class","context-menu-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](35,0,null,null,8,"ctos-context-menu",[],null,[[null,"fireEvent"]],(function(e,t,n){var l=!0;return"fireEvent"===t&&(l=!1!==e.component.onSelectOptions(n)&&l),l}),f.q,f.i)),l["ɵdid"](36,114688,[["menu",4]],0,s.nb,[],{contextMenuClass:[0,"contextMenuClass"],xPosition:[1,"xPosition"],yPosition:[2,"yPosition"],options:[3,"options"]},{fireEvent:"fireEvent"}),(e()(),l["ɵeld"](37,16777216,null,0,6,"button",[["aria-haspopup","true"],["class","add-country-options mat-menu-trigger"],["mat-icon-button",""]],[[1,"aria-expanded",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var a=!0;return"mousedown"===t&&(a=!1!==l["ɵnov"](e,38)._handleMousedown(n)&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,38)._handleKeydown(n)&&a),"click"===t&&(a=!1!==l["ɵnov"](e,38)._handleClick(n)&&a),a}),z.b,z.a)),l["ɵdid"](38,1196032,null,0,Z.g,[c.c,l.ElementRef,l.ViewContainerRef,Z.c,[2,Z.d],[8,null],[2,g.b],m.h],{menu:[0,"menu"]},null),l["ɵdid"](39,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],{disabled:[0,"disabled"]},null),(e()(),l["ɵeld"](40,0,null,0,3,"i",[["class","material-icons"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](42,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵted"](-1,null,[" expand_more "])),(e()(),l["ɵeld"](44,0,null,null,8,"label",[["class","prjcontainer"]],[[1,"class",0]],null,null,null,null)),(e()(),l["ɵted"](45,null,[""," "])),(e()(),l["ɵeld"](46,0,null,null,5,"input",[["type","checkbox"]],[[1,"checked",0],[1,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,t,n){var a=!0,i=e.component;return"change"===t&&(a=!1!==l["ɵnov"](e,47).onChange(n.target.checked)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,47).onTouched()&&a),"ngModelChange"===t&&(a=!1!==(i.isDynamicProjectionChecked=n)&&a),"change"===t&&(a=!1!==i.onCheckboxChange(n)&&a),a}),null,null)),l["ɵdid"](47,16384,null,0,x.b,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e){return[e]}),[x.b]),l["ɵdid"](49,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](51,16384,null,0,x.s,[[4,x.r]],null,null),(e()(),l["ɵeld"](52,0,null,null,0,"span",[["class","checkmark"]],null,null,null,null,null)),(e()(),l["ɵeld"](53,0,null,null,31,"div",[["class","country-solvers-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](54,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),l["ɵted"](55,null,["",":"])),(e()(),l["ɵeld"](56,0,null,null,28,"mat-button-toggle-group",[["class","mat-button-toggle-group"],["role","group"]],[[1,"aria-disabled",0],[2,"mat-button-toggle-vertical",null],[2,"mat-button-toggle-group-appearance-standard",null]],null,null,null,null)),l["ɵprd"](5120,null,x.q,(function(e){return[e]}),[Fe.c]),l["ɵprd"](6144,null,Fe.d,null,[Fe.c]),l["ɵdid"](59,1130496,[["group",4]],1,Fe.c,[l.ChangeDetectorRef,[2,Fe.a]],null,null),l["ɵqud"](603979776,8,{_buttonToggles:1}),(e()(),l["ɵeld"](61,0,null,null,5,"mat-button-toggle",[["class","mat-button-toggle"]],[[2,"mat-button-toggle-standalone",null],[2,"mat-button-toggle-checked",null],[2,"mat-button-toggle-disabled",null],[2,"mat-button-toggle-appearance-standard",null],[1,"tabindex",0],[1,"id",0],[1,"name",0]],[[null,"click"],[null,"focus"]],(function(e,t,n){var a=!0,i=e.component;return"focus"===t&&(a=!1!==l["ɵnov"](e,65).focus()&&a),"click"===t&&(a=!1!==i.toggleSolvers(l["ɵnov"](e,65).value)&&a),a}),Le.b,Le.a)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](63,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](64,{disableBtn:0,enableBtn:1,resetTab:2,inactiveSolver:3,activeSolver:4}),l["ɵdid"](65,245760,[[8,4],["dstrbtn",4]],0,Fe.b,[[2,Fe.c],l.ChangeDetectorRef,l.ElementRef,m.h,[8,null],[2,Fe.a]],{value:[0,"value"]},null),(e()(),l["ɵted"](66,0,[" "," "])),(e()(),l["ɵeld"](67,0,null,null,5,"mat-button-toggle",[["class","mat-button-toggle"]],[[2,"mat-button-toggle-standalone",null],[2,"mat-button-toggle-checked",null],[2,"mat-button-toggle-disabled",null],[2,"mat-button-toggle-appearance-standard",null],[1,"tabindex",0],[1,"id",0],[1,"name",0]],[[null,"click"],[null,"focus"]],(function(e,t,n){var a=!0,i=e.component;return"focus"===t&&(a=!1!==l["ɵnov"](e,71).focus()&&a),"click"===t&&(a=!1!==i.toggleSolvers(l["ɵnov"](e,71).value)&&a),a}),Le.b,Le.a)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](69,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](70,{inactiveSolver:0,activeSolver:1}),l["ɵdid"](71,245760,[[8,4],["lsrbtn",4]],0,Fe.b,[[2,Fe.c],l.ChangeDetectorRef,l.ElementRef,m.h,[8,null],[2,Fe.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),l["ɵted"](72,0,[" "," "])),(e()(),l["ɵeld"](73,0,null,null,5,"mat-button-toggle",[["class","mat-button-toggle"]],[[2,"mat-button-toggle-standalone",null],[2,"mat-button-toggle-checked",null],[2,"mat-button-toggle-disabled",null],[2,"mat-button-toggle-appearance-standard",null],[1,"tabindex",0],[1,"id",0],[1,"name",0]],[[null,"click"],[null,"focus"]],(function(e,t,n){var a=!0,i=e.component;return"focus"===t&&(a=!1!==l["ɵnov"](e,77).focus()&&a),"click"===t&&(a=!1!==i.toggleSolvers(l["ɵnov"](e,77).value)&&a),a}),Le.b,Le.a)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](75,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](76,{inactiveSolver:0,activeSolver:1}),l["ɵdid"](77,245760,[[8,4],["mrsbtn",4]],0,Fe.b,[[2,Fe.c],l.ChangeDetectorRef,l.ElementRef,m.h,[8,null],[2,Fe.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),l["ɵted"](78,0,[" "," "])),(e()(),l["ɵeld"](79,0,null,null,5,"mat-button-toggle",[["class","mat-button-toggle"]],[[2,"mat-button-toggle-standalone",null],[2,"mat-button-toggle-checked",null],[2,"mat-button-toggle-disabled",null],[2,"mat-button-toggle-appearance-standard",null],[1,"tabindex",0],[1,"id",0],[1,"name",0]],[[null,"click"],[null,"focus"]],(function(e,t,n){var a=!0,i=e.component;return"focus"===t&&(a=!1!==l["ɵnov"](e,83).focus()&&a),"click"===t&&(a=!1!==i.toggleSolvers(l["ɵnov"](e,83).value)&&a),a}),Le.b,Le.a)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](81,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](82,{inactiveSolver:0,activeSolver:1}),l["ɵdid"](83,245760,[[8,4],["crtbtn",4]],0,Fe.b,[[2,Fe.c],l.ChangeDetectorRef,l.ElementRef,m.h,[8,null],[2,Fe.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),l["ɵted"](84,0,[" "," "])),(e()(),l["ɵeld"](85,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](86,0,null,null,1,"ctos-select-countries",[],null,[[null,"addCountries"]],(function(e,t,n){var l=!0;return"addCountries"===t&&(l=!1!==e.component.onAddCountries(n)&&l),l}),tn,$t)),l["ɵdid"](87,770048,[[3,4],["selectCountries",4]],0,Zt,[zt.a,R.a,l.ElementRef],{existingCountries:[0,"existingCountries"]},{addCountries:"addCountries"}),(e()(),l["ɵand"](16777216,null,null,1,null,Rl)),l["ɵdid"](89,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Dl)),l["ɵdid"](91,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](92,0,null,null,8,"div",[["class","grid-wrapper"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,El)),l["ɵdid"](94,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](95,0,null,null,5,"div",[["class","ag_container"],["style","margin-top:05px;"]],null,null,null,null,null)),(e()(),l["ɵeld"](96,16777216,[[1,0]],null,4,"ag-grid-angular",[["class","ag-theme-material"],["id","myGrid"],["style","width: 100%;"]],null,[[null,"cellFocused"],[null,"cellValueChanged"],[null,"columnVisible"],[null,"dragStopped"],[null,"filterChanged"],[null,"firstDataRendered"],[null,"gridColumnsChanged"],[null,"gridReady"],[null,"rowClicked"],[null,"rowDataChanged"],[null,"rowDataUpdated"],[null,"rowGroupOpened"],[null,"selectionChanged"],[null,"sortChanged"],[null,"viewportChanged"],[null,"rowSelected"]],(function(e,t,n){var l=!0,a=e.component;return"cellFocused"===t&&(l=!1!==a.onCellFocused(n)&&l),"cellValueChanged"===t&&(l=!1!==a.onCellValueChanged(n)&&l),"columnVisible"===t&&(l=!1!==a.columnVisible(n)&&l),"dragStopped"===t&&(l=!1!==a.dragStopped(n)&&l),"filterChanged"===t&&(l=!1!==a.onFilterChanged(n)&&l),"firstDataRendered"===t&&(l=!1!==a.firstDataRendered(n)&&l),"gridColumnsChanged"===t&&(l=!1!==a.onGridColumnsChanged(n)&&l),"gridReady"===t&&(l=!1!==a.gridReady(n)&&l),"rowClicked"===t&&(l=!1!==a.onRowClicked(n)&&l),"rowDataChanged"===t&&(l=!1!==a.rowDataChanged(n)&&l),"rowDataUpdated"===t&&(l=!1!==a.onRowDataUpdated(n)&&l),"rowGroupOpened"===t&&(l=!1!==a.onrowGroupOpened(n)&&l),"selectionChanged"===t&&(l=!1!==a.onSelectionChanged(n)&&l),"sortChanged"===t&&(l=!1!==a.onSortChanged(n)&&l),"viewportChanged"===t&&(l=!1!==a.viewportChanged(n)&&l),"rowSelected"===t&&(l=!1!==a.onRowSelected(n)&&l),l}),nn.b,nn.a)),l["ɵprd"](512,null,ln.AngularFrameworkOverrides,ln.AngularFrameworkOverrides,[l.NgZone]),l["ɵprd"](512,null,an.AngularFrameworkComponentWrapper,an.AngularFrameworkComponentWrapper,[]),l["ɵdid"](99,4898816,[["agGrid",4]],1,rn.AgGridAngular,[l.ElementRef,l.ViewContainerRef,ln.AngularFrameworkOverrides,an.AngularFrameworkComponentWrapper,l.ComponentFactoryResolver],{gridOptions:[0,"gridOptions"],rowData:[1,"rowData"],columnDefs:[2,"columnDefs"],pinnedTopRowData:[3,"pinnedTopRowData"],frameworkComponents:[4,"frameworkComponents"],context:[5,"context"],autoGroupColumnDef:[6,"autoGroupColumnDef"],defaultColDef:[7,"defaultColDef"],rowClassRules:[8,"rowClassRules"],rowSelection:[9,"rowSelection"],domLayout:[10,"domLayout"],groupDefaultExpanded:[11,"groupDefaultExpanded"],processRowPostCreate:[12,"processRowPostCreate"],getDataPath:[13,"getDataPath"],suppressRowClickSelection:[14,"suppressRowClickSelection"],enableSorting:[15,"enableSorting"],enableFilter:[16,"enableFilter"],singleClickEdit:[17,"singleClickEdit"],suppressContextMenu:[18,"suppressContextMenu"],suppressDragLeaveHidesColumns:[19,"suppressDragLeaveHidesColumns"],treeData:[20,"treeData"],rowMultiSelectWithClick:[21,"rowMultiSelectWithClick"]},{gridColumnsChanged:"gridColumnsChanged",columnVisible:"columnVisible",rowGroupOpened:"rowGroupOpened",rowDataChanged:"rowDataChanged",rowDataUpdated:"rowDataUpdated",cellValueChanged:"cellValueChanged",cellFocused:"cellFocused",rowSelected:"rowSelected",selectionChanged:"selectionChanged",filterChanged:"filterChanged",sortChanged:"sortChanged",rowClicked:"rowClicked",gridReady:"gridReady",viewportChanged:"viewportChanged",firstDataRendered:"firstDataRendered",dragStopped:"dragStopped"}),l["ɵqud"](603979776,21,{columns:1})],(function(e,t){var n=t.component;e(t,5,0,n.isOverThreshold&&!(!n.isEditablePlan()&&n.countriesGridService.hasEditAccess())),e(t,9,0,l["ɵnov"](t,17)),e(t,12,0),e(t,17,0,"context-menu"),e(t,22,0,n.PCEOption),e(t,26,0,"add-country-btn",n.isEditablePlan()?"btn-add-countries":"disabled-button"),e(t,27,0,!n.isEditablePlan()),e(t,30,0,"material-icons",n.isEditablePlan()?"active":"inactive"),e(t,36,0,n.contextMenuClass,"after","below",n.addCountryActions),e(t,38,0,l["ɵnov"](t,36).matMenu),e(t,39,0,!n.isEditablePlan()),e(t,42,0,"material-icons",n.isEditablePlan()?"active":"inactive"),e(t,49,0,n.isDynamicProjectionChecked),e(t,59,0);var a=e(t,64,0,!n.isSubjectDistributionTabEnabled,n.isSubjectDistributionTabEnabled,!n.isMCSViewActive,n.currentSolver!==l["ɵnov"](t,65).value,n.currentSolver===l["ɵnov"](t,65).value);e(t,63,0,a),e(t,65,0,null==n.solverTypeValues?null:n.solverTypeValues.SUBJECT_DISTRIBUTION);var i=e(t,70,0,n.currentSolver!==l["ɵnov"](t,71).value,n.currentSolver===l["ɵnov"](t,71).value);e(t,69,0,i),e(t,71,0,null==n.solverTypeValues?null:n.solverTypeValues.LAST_SUBJECT,n.disabledSolvers);var r=e(t,76,0,n.currentSolver!==l["ɵnov"](t,77).value,n.currentSolver===l["ɵnov"](t,77).value);e(t,75,0,r),e(t,77,0,null==n.solverTypeValues?null:n.solverTypeValues.MIN_NUM_RATE,n.disabledSolvers);var o=e(t,82,0,n.currentSolver!==l["ɵnov"](t,83).value,n.currentSolver===l["ɵnov"](t,83).value);e(t,81,0,o),e(t,83,0,null==n.solverTypeValues?null:n.solverTypeValues.SUBJECTS,n.disabledSolvers||n.disabledSubjectSolver),e(t,87,0,n.countriesGridData),e(t,89,0,n.isCohortPlan),e(t,91,0,!n.isCohortPlan),e(t,94,0,n.showCountyGridMessage),e(t,99,1,[n.gridOptions,n.rowData,n.columnDefs,n.pinnedTopRowData,n.frameworkComponents,n.getContext(),n.autoGroupColumnDef,n.defaultColDef,n.rowClassRules,"multiple",n.domLayout,n.groupDefaultExpanded,n.processRowPostCreate,n.getDataPath,!0,!0,!0,!0,!0,!0,!0,!0])}),(function(e,t){var n=t.component;e(t,8,0,l["ɵnov"](t,9).menuOpen||null,l["ɵnov"](t,10).disabled||null,"NoopAnimations"===l["ɵnov"](t,10)._animationMode),e(t,11,0,l["ɵnov"](t,12).inline,"primary"!==l["ɵnov"](t,12).color&&"accent"!==l["ɵnov"](t,12).color&&"warn"!==l["ɵnov"](t,12).color),e(t,24,0,l["ɵnov"](t,27).disabled||null,"NoopAnimations"===l["ɵnov"](t,27)._animationMode),e(t,32,0,n.countriesGridService.getCountryGridResources().ADD_COUNTRIES),e(t,37,0,l["ɵnov"](t,38).menuOpen||null,l["ɵnov"](t,39).disabled||null,"NoopAnimations"===l["ɵnov"](t,39)._animationMode),e(t,44,0,!1===n.isDynamicProjectionEnabled?"prjcontainer disabled":"prjcontainer"),e(t,45,0,n.countriesGridService.getCountryGridResources().ENABLE_UPDATED_PROJECTIONS),e(t,46,0,1==n.isDynamicProjectionChecked?"true":null,!0===n.isDynamicProjectionEnabled?null:"true",l["ɵnov"](t,51).ngClassUntouched,l["ɵnov"](t,51).ngClassTouched,l["ɵnov"](t,51).ngClassPristine,l["ɵnov"](t,51).ngClassDirty,l["ɵnov"](t,51).ngClassValid,l["ɵnov"](t,51).ngClassInvalid,l["ɵnov"](t,51).ngClassPending),e(t,55,0,n.countrySolversLabel),e(t,56,0,l["ɵnov"](t,59).disabled,l["ɵnov"](t,59).vertical,"standard"===l["ɵnov"](t,59).appearance),e(t,61,0,!l["ɵnov"](t,65).buttonToggleGroup,l["ɵnov"](t,65).checked,l["ɵnov"](t,65).disabled,"standard"===l["ɵnov"](t,65).appearance,-1,l["ɵnov"](t,65).id,null),e(t,66,0,n.subjectDistributionLabel),e(t,67,0,!l["ɵnov"](t,71).buttonToggleGroup,l["ɵnov"](t,71).checked,l["ɵnov"](t,71).disabled,"standard"===l["ɵnov"](t,71).appearance,-1,l["ɵnov"](t,71).id,null),e(t,72,0,n.lastSubjectLabel),e(t,73,0,!l["ɵnov"](t,77).buttonToggleGroup,l["ɵnov"](t,77).checked,l["ɵnov"](t,77).disabled,"standard"===l["ɵnov"](t,77).appearance,-1,l["ɵnov"](t,77).id,null),e(t,78,0,n.minimumRateLabel),e(t,79,0,!l["ɵnov"](t,83).buttonToggleGroup,l["ɵnov"](t,83).checked,l["ɵnov"](t,83).disabled,"standard"===l["ɵnov"](t,83).appearance,-1,l["ɵnov"](t,83).id,null),e(t,84,0,n.subjetsLabel)}))}var Al=n("Kej7"),Il=n("z1EI"),_l=n("8gu7"),Nl=n("hkMt"),Ol=n("lqvn"),Ml=function(e){return e.PLAN_STATUS="planParamsDetails.planStatus.value",e.GEOGRAPHY_NAME="planParamsDetails.geographyName",e.GEOGRAPHY_REGION_NAME="geographyRegionName",e.COHORT_NAME="cohortName",e.RT="planParamsDetails.enrollmentTarget",e.SCREENING_TARGET="planParamsDetails.screeningTarget",e.OE="planParamsDetails.overRecruitmentPercent",e.SR="planParamsDetails.SR",e.RR="planParamsDetails.RR",e.SFR="planParamsDetails.SFR",e.FSI="planParamsDetails.PFSI",e.SITOFSSDAYS="planParamsDetails.SITOFSSDAYS",e.FSS="planParamsDetails.FSS",e.FSR="planParamsDetails.FSR",e.NUM_SITES="planParamsDetails.numSites",e.SAS="planParamsDetails.ARC",e.CalcSAS="CalcSAS",e.DAYS_TO_25="planParamsDetails.daysTo25",e.DAYS_TO_50="planParamsDetails.daysTo50",e.DAYS_TO_75="planParamsDetails.daysTo75",e.DAYS_TO_90="planParamsDetails.daysTo90",e.DAYS_TO_100="planParamsDetails.daysTo100",e.LSS="planParamsDetails.PLSS",e.LSR="planParamsDetails.PLSR",e.LAST_MODIFIED_DATE="planParamsDetails.lastModifiedDate",e.LAST_MODIFIED_USERNAME="planParamsDetails.lastModifiedUserName",e}({}),Fl=function(){function e(e){this.userDataService=e,this.DEFAULT_MC_COL_VISIBILITY_PREFERENCE="1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1",this.DEFAULT_MC_COL_ORDER_PREF=[Ml.PLAN_STATUS,Ml.GEOGRAPHY_NAME,Ml.GEOGRAPHY_REGION_NAME,Ml.COHORT_NAME,Ml.RT,Ml.SCREENING_TARGET,Ml.LSS,Ml.LSR,Ml.OE,Ml.SR,Ml.RR,Ml.SFR,Ml.FSI,Ml.SITOFSSDAYS,Ml.FSS,Ml.FSR,Ml.NUM_SITES,Ml.SAS,Ml.CalcSAS,Ml.DAYS_TO_25,Ml.DAYS_TO_50,Ml.DAYS_TO_75,Ml.DAYS_TO_90,Ml.DAYS_TO_100,Ml.LAST_MODIFIED_USERNAME,Ml.LAST_MODIFIED_DATE],this.COLUMN_ORDER_SEPERATOR="|",this.COLUMN_VISIBILITY_SEPERATOR="-",this.MCColumnVisibilityPref=[],this.MCColumnVisibilityPrefData={},this.MC_COLUMN_ID_ARRAY=Object.values(Ml),this.userDataSubject=new hn.a(null),this.getUserData()}return e.prototype.getMCPreference=function(){return this.userDataSubject.asObservable()},e.prototype.getUserData=function(){var e=this,t=this.userDataService.getUserData(o.bb).pipe(Object(un.a)(500)).subscribe((function(n){e.loadMCColumnVisibilityPref(),e.loadMCColumnOrderPref(),e.userDataSubject.next(n),t&&t.unsubscribe()}))},e.prototype.loadMCColumnVisibilityPref=function(){this.setMCColumnVisibilityPref(this.getColumnPreferencesForMCCountriesGrid(cn.MANAGECOUNTRIES_GRID))},e.prototype.loadMCColumnOrderPref=function(){this.setMCColumnOrderPref(this.getColumnPreferencesForMCCountriesGrid(cn.MANAGECOUNTRIES_GRID_ORDER))},e.prototype.setMCColumnOrderPref=function(e){var t=dn.a.isDefined(e)?e:this.getDefaultColumnPref();this.MCColumnOrderPref=t.split(this.COLUMN_ORDER_SEPERATOR)},e.prototype.setMCColumnVisibilityPref=function(e){var t=dn.a.isDefined(e)?e:this.DEFAULT_MC_COL_VISIBILITY_PREFERENCE;this.MCColumnVisibilityPref=t.split(this.COLUMN_VISIBILITY_SEPERATOR),this.MCColumnVisibilityPrefData={};for(var n=this.MC_COLUMN_ID_ARRAY,l=0;l<this.MCColumnVisibilityPref.length;l++)this.MCColumnVisibilityPrefData[n[l]]=this.MCColumnVisibilityPref[l]===pn.INVISIBLE},e.prototype.getColumnPreferencesForMCCountriesGrid=function(e){var t=null,n=this.getPrefForGridColumns();return dn.a.isDefined(n)&&(t=n[o.P.PreferenceGridColumns][e]),t},e.prototype.getPrefForGridColumns=function(){return JSON.parse(JSON.stringify(this.userDataService.getPreferencesByCategory(o.P.PreferenceGridColumns)))},e.prototype.getMCColumnVisibilityPref=function(){return this.MCColumnVisibilityPrefData},e.prototype.updateManageCountryColumnPreference=function(e,t){var n=this.MC_COLUMN_ID_ARRAY.indexOf(e);if(-1!==n){this.MCColumnVisibilityPref[n]=t?pn.VISIBLE:pn.INVISIBLE;var l=this.constructMCGridPrefString();this.setMCColumnVisibilityPref(l),this.sendUpdateMCGridColumnPrefRequest(l,cn.MANAGECOUNTRIES_GRID)}else console.warn("Unknown Column "+e+" : Column is missing in MCGridColumns Please add column id in MCGridColumns and update DEFAULT_MANAGECOUNTRY_GRID_PREFERENCE")},e.prototype.updateColumnPreferenceOnMoveColumn=function(e){var t=e.join(this.COLUMN_ORDER_SEPERATOR);this.setMCColumnOrderPref(t),console.log("MCGridPrefString : ",t),this.sendUpdateMCGridColumnPrefRequest(t,cn.MANAGECOUNTRIES_GRID_ORDER)},e.prototype.constructMCGridPrefString=function(){return this.MCColumnVisibilityPref.join(this.COLUMN_VISIBILITY_SEPERATOR)},e.prototype.sendUpdateMCGridColumnPrefRequest=function(e,t){var n=this,l=this.getPrefForGridColumns();l&&null!==l||(l=b.B),l[o.P.PreferenceGridColumns][t]=e;var a=this.userDataService.updatePreferencesByCategory(l).pipe(Object(un.a)(2e3)).pipe(Object(Ol.a)()).subscribe((function(e){e&&n.refreshPreferenceData(),a&&a.unsubscribe()}))},e.prototype.refreshPreferenceData=function(){this.getUserData()},e.prototype.getDefaultColumnPref=function(){return this.DEFAULT_MC_COL_ORDER_PREF.join(this.COLUMN_ORDER_SEPERATOR)},e.prototype.getManageCountryColumnOrderPref=function(){return this.MCColumnOrderPref},e.prototype.getColumnVisibilityFromPref=function(e){var t=this.MC_COLUMN_ID_ARRAY.indexOf(e);return this.MCColumnVisibilityPref[t]===pn.VISIBLE},e}(),Ll=n("mhnT"),wl=function(){function e(){}return e.prototype.addHierarchy=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},e}(),Gl=function(){return function(e,t){this.displayText=e,this.value=t,this.displayText=e,this.value=t}}(),kl=function(){function e(e,t){this.localAppResources=e,this.errorTermsStoreService=t}return e.prototype.getResource=function(e){return this.localAppResources.getResource(e)},e.prototype.getErrorMessage=function(e){return this.errorTermsStoreService.getErrorMessage(e)},e.ngInjectableDef=l["ɵɵdefineInjectable"]({factory:function(){return new e(l["ɵɵinject"](s.M),l["ɵɵinject"](s.D))},token:e,providedIn:"root"}),e}(),Vl=function(){function e(e,t){this.appResource=e,this.planDetailsService=t}return Object.defineProperty(e.prototype,"columnResource",{get:function(){return{STATUS:this.appResource.getResource("STATUS"),COUNTRY_NAME:this.appResource.getResource("COUNTRY_NAME"),REGION:this.appResource.getResource("REGION"),CUSTOM:this.appResource.getResource("CUSTOM"),TWENTY_FIVE_FIFTY_NINTY:this.appResource.getResource("TWENTY_FIVE_FIFTY_NINTY"),RANDOM:this.appResource.getResource("RANDOM"),LINEAR:this.appResource.getResource("LINEAR"),COUNTRY_COHORTS:this.appResource.getResource("COUNTRY_COHORTS"),COHORT_NAME:this.appResource.getResource("SDTColCohortName"),INCLUDE_EXCLUDE_COUNTRY_COHORTS:this.appResource.getResource("INCLUDE_EXCLUDE_COUNTRY_COHORTS"),RANDOMIZATION_TARGET:this.appResource.getResource("MCEPanelRTTT"),ACHIEVE_RANDOMIZATION_BY:this.appResource.getResource("ACHIEVE_RANDOMIZATION_BY"),OVER_ENROLLMENT:this.appResource.getResource("OVER_ENROLLMENT"),SCREENING_RATE:this.appResource.getResource("SCREENING_RATE"),RANDOMIZATION_RATE:this.appResource.getResource("RANDOMIZATION_RATE"),OVER_ENR:this.appResource.getResource("MCEOVER_ENR"),RE_DIST:this.appResource.getResource("MCERE_DIST"),PROJ_RR:this.appResource.getResource("MCEPROJ_RR"),PROJ_SR:this.appResource.getResource("MCEPROJ_SR"),PROJ_SF_PERCENT:this.appResource.getResource("MCEPROJ_SF_PERCENT"),PROJ_SAS_PERCENT:this.appResource.getResource("MCEPROJ_SAS_PERCENT"),CAL_VALUE:this.appResource.getResource("MCECAL_VALUE"),CAL_LSR:this.appResource.getResource("MCECAL_LSR"),MAX_RT:this.appResource.getResource("MCEMAX_RT"),MIN_RT:this.appResource.getResource("MCEMIN_RT"),RT:this.appResource.getResource("MCERT"),PLSR:this.appResource.getResource("MCEPLSR"),RR:this.appResource.getResource("MCERR"),SR:this.appResource.getResource("MCESR"),SIM:this.appResource.getResource("MCESIM"),ARTB:this.appResource.getResource("MCEARTB"),SF_PERCENTAGE:this.appResource.getResource("MCESF_PERCENTAGE"),FPA:this.appResource.getResource("MCEFPA"),FPA_TO_FSI:this.appResource.getResource("MCEFPA_TO_FSI"),FSI:this.appResource.getResource("MCEFSI"),FSI_TO_FSS:this.appResource.getResource("MCEFSI_TO_FSS"),FSS:this.appResource.getResource("MCEFSS"),NUM_SITES:this.appResource.getResource("MCENUM_SITES"),SAS_PERCENTAGE:this.appResource.getResource("MCESAS_PERCENTAGE"),SI:this.appResource.getResource("MCESI"),TWENTY_FIVE_SI:this.appResource.getResource("MCETWENTY_FIVE_SI"),FIFTY_SI:this.appResource.getResource("MCEFIFTY_SI"),SEVENTY_FIVE_SI:this.appResource.getResource("MC_SEVENTY_FIVE_SI"),NINTY_SI:this.appResource.getResource("MCENINTY_SI"),HUNDRED_SI:this.appResource.getResource("MC_HUNDRED_SI"),SCREEN_FAILURE_PERCENTAGE:this.appResource.getResource("SCREEN_FAILURE_PERCENTAGE"),FINAL_PROTOCOL_APPROVED:this.appResource.getResource("FINAL_PROTOCOL_APPROVED"),DAYS_FROM_FPA_TO_FSI:this.appResource.getResource("DAYS_FROM_FPA_TO_FSI"),FIRST_SITE_INITIATED:this.appResource.getResource("FIRST_SITE_INITIATED"),DAYS_FROM_FSI_TO_FSS:this.appResource.getResource("DAYS_FROM_FSI_TO_FSS"),FIRST_SUBJECT_SCREENED:this.appResource.getResource("FIRST_SUBJECT_SCREENED"),NUMBER_OF_SITES:this.appResource.getResource("NUMBER_OF_SITES"),SITES_TO_REDISTRIBUTE:this.appResource.getResource("SITES_TO_REDISTRIBUTE"),MC_FSR:this.appResource.getResource("MC_FSR"),MC_FIRST_SUBJECT_RANDOMIZED:this.appResource.getResource("MC_FIRST_SUBJECT_RANDOMIZED"),MC_LSS:this.appResource.getResource("MC_LSS"),MC_LAST_SUBJECT_SCREENED:this.appResource.getResource("MC_LAST_SUBJECT_SCREENED"),MC_LSR:this.appResource.getResource("MC_LSR"),MC_LAST_SUBJECT_RANDOMIZED:this.appResource.getResource("MC_LAST_SUBJECT_RANDOMIZED"),MC_MOD_BY:this.appResource.getResource("MC_MOD_BY"),MC_MODIFIED_BY:this.appResource.getResource("MC_MODIFIED_BY"),MC_MOD_DATE:this.appResource.getResource("MC_MOD_DATE"),MC_MODIFIED_DATE:this.appResource.getResource("MC_MODIFIED_DATE"),MC_SCREENING:this.appResource.getResource("MC_SCREENING"),MC_SCREENING_TARGET:this.appResource.getResource("MC_SCREENING_TARGET"),MC_CAL_SAS:this.appResource.getResource("MC_CAL_SAS"),MC_CALCULATED_SITES_ACTIVELY_SCREENING:this.appResource.getResource("MC_CALCULATED_SITES_ACTIVELY_SCREENING"),SITES_ACTIVELY_SCREENING_PERCENTAGE:this.appResource.getResource("SITES_ACTIVELY_SCREENING_PERCENTAGE"),SITE_INITIATION:this.appResource.getResource("SITE_INITIATION"),SITE_INITIATION_METHOD:this.appResource.getResource("SITE_INITIATION_METHOD"),DAYS_TO_25_PERCENT_SITES_INITIATED:this.appResource.getResource("DAYS_TO_25_PERCENT_SITES_INITIATED"),DAYS_TO_50_PERCENT_SITES_INITIATED:this.appResource.getResource("DAYS_TO_50_PERCENT_SITES_INITIATED"),DAYS_TO_75_PERCENT_SITES_INITIATED:this.appResource.getResource("DAYS_TO_75_PERCENT_SITES_INITIATED"),DAYS_TO_90_PERCENT_SITES_INITIATED:this.appResource.getResource("DAYS_TO_90_PERCENT_SITES_INITIATED"),DAYS_TO_100_PERCENT_SITES_INITIATED:this.appResource.getResource("DAYS_TO_100_PERCENT_SITES_INITIATED"),MINIMUM_RANDOMIZATION:this.appResource.getResource("MinimumRT"),MAXIMUM_RANDOMIZATION:this.appResource.getResource("MaximumRT"),SOLVED_LAST_SUBJECT_RANDOMIZED:this.appResource.getResource("CalculatedLSR"),CALULATED_VALUE:this.appResource.getResource("MCECalcTT"),PLANNED_LSR:this.appResource.getResource("MCEPLSRHeader"),COUNTRY_SOLVERS:this.appResource.getResource("CountrySolvers"),SUBJECT_DISTRIBUTION_SOLVER_TAB:this.appResource.getResource("SubjectDistributionSolverTab"),LAST_SUBJECT_SOLVER_TAB:this.appResource.getResource("LastSubjectSolverTab"),MINIMUM_RATE_SOLVER_TAB:this.appResource.getResource("MinimumRateSolverTab"),EMPTY_COHORT_LIST_MSG:"This plan does not have any cohorts selected.\n              Select at least one cohort before adding a country (or countries).",PECFrProjSR:s.Z.interpolate(this.appResource.getResource("PECFrProjSR"),[this.planDetailsService.getReportingPeriodLabel()]),PECFrProjRR:s.Z.interpolate(this.appResource.getResource("PECFrProjRR"),[this.planDetailsService.getReportingPeriodLabel()]),PECFrProjActiveSites:this.appResource.getResource("PECFrProjActiveSites"),PECFrProjSFR:this.appResource.getResource("PECFrProjSFR"),ALL_COUNTRIES_LOCKED:this.appResource.getResource("AllCountriesLockedForSolve"),SOLVER_NAV_MSG_UNSAVED_CHANGES:this.appResource.getResource("unsavedMessageForSolver"),ADJUST_COUNTRY_PARAMETERS:this.appResource.getResource("AdjustCountryParameters"),SOLVERS_SELECTION_CONFIRMATION:this.appResource.getResource("SolversSelectionConfirmation"),ALL_SELECTED_NODES_NOT_ELIGIBLE:this.appResource.getResource("AllSelectedNodesNotEligible"),ALL_LOCKED_SELECTED_NODES_NOT_ELIGIBLE:this.appResource.getResource("AllLockedSelectedNodesNotEligible"),DEPENDENT_COHORT_CARD_EMPTY_CELL_VALUE:this.appResource.getResource("DependentCohortCardEmptyCellValue"),OVER_THRESHOLD_MCE_DCP_SEQUENCE_MSG:this.appResource.getResource("OVER_THRESHOLD_MCE_DCP_SEQUENCE_MSG"),OVER_THRESHOLD_MCE_DCP_PARALLEL_COHORT_MSG:this.appResource.getResource("OVER_THRESHOLD_MCE_DCP_PARALLEL_COHORT_MSG"),OVER_THRESHOLD_MCE_DCP_COMPLEX_MSG:this.appResource.getResource("OVER_THRESHOLD_MCE_DCP_COMPLEX_MSG"),SOLVER_CONTINUE:this.appResource.getResource("Continue"),DISABLED_25_50_90_MSG:this.appResource.getResource("DISABLED_25_50_90_MSG"),MC_ACTUALS_ROW_LABEL:this.appResource.getResource("MC_ACTUALS_ROW_LABEL"),MC_PROJECTED_ROW_LABEL:this.appResource.getResource("MC_PROJECTED_ROW_LABEL"),MC_COUNTRY_ROW_LABEL:this.appResource.getResource("MC_COUNTRY_ROW_LABEL"),MC_COHORT_ROW_LABEL:this.appResource.getResource("MC_COHORT_ROW_LABEL"),MC_STUDY_TARGET_ROW_LABEL:this.appResource.getResource("MC_STUDY_TARGET_ROW_LABEL"),MC_PARENT_PLAN_ROW_LABEL:this.appResource.getResource("MC_PARENT_PLAN_ROW_LABEL")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorResource",{get:function(){return{SOLVERS_VALIDATION_ERROR_MSG:this.appResource.getErrorMessage("SolversValidationErrorMessage"),SOLVERS_CALCULATION_ERROR_MSG:this.appResource.getErrorMessage("SolversCalculationErrorMsg")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionResource",{get:function(){return{EXPANDGRID:this.appResource.getResource("Expand"),COLLAPSEGRID:this.appResource.getResource("Collapse"),OK:this.appResource.getResource("OK"),Cancel:this.appResource.getResource("Cancel"),PRINT:this.appResource.getResource("Print"),COPY:this.appResource.getResource("Copy"),EXPORT:this.appResource.getResource("Export"),CLICK_TO_CALCULATE:this.appResource.getResource("ClickToCalculate"),CLICK_TO_APPLY:this.appResource.getResource("ClickToApply"),SELECT_COUNTRIES:this.appResource.getResource("SELECT_COUNTRIES"),SELECT_COUNTRIES_MSG:this.appResource.getResource("SelectCountryMsg"),SUBJECTS_SOLVER_TAB:this.appResource.getResource("SubjectsSolverTab"),UNEDITABLE_PLAN_MSG:this.appResource.getResource("PECDisableApprovedMsg"),ADD_COUNTRIES:this.appResource.getResource("ADD_COUNTRIES"),SELECT_ALL:this.appResource.getResource("SELECT_ALL"),ENABLE_UPDATED_PROJECTIONS:this.appResource.getResource("ENABLE_UPDATED_PROJECTIONS"),SELECT_COHORTS_TO_EDIT:this.appResource.getResource("SELECT_COHORTS_TO_EDIT"),MANGECOUNTRYGRID:this.appResource.getResource("MANGECOUNTRYGRID"),MANAGECOUNTRYGRIDEDIT:this.appResource.getResource("MCG_CONSTANTS"),MC_ACTUALS_CHECKBOX_LABEL:this.appResource.getResource("MC_ACTUALS_CHECKBOX_LABEL"),MC_PROJECTED_CHECKBOX_LABEL:this.appResource.getResource("MC_PROJECTED_CHECKBOX_LABEL"),MC_PARENTPLAN_CHECKBOX_LABEL:this.appResource.getResource("MC_PARENTPLAN_CHECKBOX_LABEL"),MC_GRID_TOGGLE_LEFT_MESSAGE:this.appResource.getResource(b.wb.MC_GRID_TOGGLE_LEFT_MESSAGE),MC_GRID_TOGGLE_RIGHT_MESSAGE:this.appResource.getResource(b.wb.MC_GRID_TOGGLE_RIGHT_MESSAGE)}},enumerable:!0,configurable:!0}),e}(),xl=function(){return function(e,t){this.text=e,this.value=t,this.text=e,this.value=t}}(),Kl=function(){function e(e,t,n,l,a,i,r,o,s,u,d){this.manageCountryResourceService=e,this.planDetailsService=t,this.pceHeaderResourceService=n,this.pceService=l,this.userDataService=a,this.datePipe=i,this.plansService=r,this.planDetailsHelper=o,this.gridHelperService=s,this.manageCountriesService=u,this.loggerService=d,this.setResources()}return Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(e){this._options=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resources",{get:function(){return this._resources},set:function(e){this._resources=e},enumerable:!0,configurable:!0}),e.prototype.setOptions=function(){this.options=[],this.options.push(new xl(this.resources.EXPANDGRID,b.Ob.EXPAND)),this.options.push(new xl(this.resources.PRINT,b.Ob.PRINT)),this.options.push(new xl(this.resources.COPY,b.Ob.COPY)),this.options.push(new xl(this.resources.EXPORT,b.Ob.EXPORT)),this.setExpandCollapseOption(this.planDetailsService.isExpand)},e.prototype.setExpandCollapseOption=function(e){this.options&&this.options.length>0&&this.options.splice(0,1,{text:e?this.manageCountryResourceService.actionResource.COLLAPSEGRID:this.resources.EXPANDGRID,value:e?b.Ob.COLLAPSE:b.Ob.EXPAND})},e.prototype.setResources=function(){var e=this.manageCountryResourceService.actionResource;this.resources={EXPANDGRID:e.EXPANDGRID,COLLAPSEGRID:e.COLLAPSEGRID,PRINT:e.PRINT,COPY:e.COPY,EXPORT:e.EXPORT,MANGECOUNTRYGRID:e.MANGECOUNTRYGRID,MANAGECOUNTRYGRIDEDIT:e.MANAGECOUNTRYGRIDEDIT}},Object.defineProperty(e.prototype,"headerResource",{get:function(){return this.pceHeaderResourceService.PCEHeaderResource},enumerable:!0,configurable:!0}),e.prototype.optionClicked=function(e,t,n){this.loggerService.log("PCE option event"+e.value);var l=this.plansService.studyDetailData;switch(e.value){case b.Ob.EXPORT:this.pceService.planCardHeaderData(this.countriesHeaderData(t,l)),this.pceService.exportExcelData(n,b.tb);break;case b.Ob.PRINT:this.pceService.planCardHeaderData(this.countriesHeaderData(t,l)),this.pceService.setDataForPrint(n);break;case b.Ob.COPY:this.pceService.planCardHeaderData(this.countriesHeaderData(t,l)),this.pceService.setDataForCopy(n)}return!1},e.prototype.countriesHeaderData=function(e,t){var n,l,a,i;i=this.plansService.studyRefreshDate,l=t?t.id:"",a=t?t.name:"";var r=this.headerResource;return(n={})[r.userName]=this.userDataService.getUserName(),n[r.date]=this.datePipe.transform(Date.now(),"dd-MMM-yyyy"),n[r.gridName]="Manage Countries",n[r.studyId]=l,n[r.studyName]=a,n[r.lastSourceDataUpdate]=this.datePipe.transform(i,"dd-MMM-yyyy"),n[r.planName]=e.planProperties.name,n},e.prototype.getPCEData=function(e,t,n,l){var a=this,i=[],r=l.length;if(r>0)for(var o=0;o<r;o++){var s={},u=l[o],d=this.planDetailsHelper.isActualOrProject(u)||this.planDetailsHelper.isParentPlanRow(u);s=this.getRowObjectData(t,u,s,d,n),i.push(s)}return e.forEachNodeAfterFilterAndSort((function(e){var l={},r=a.planDetailsHelper.isActualOrProject(e.data)||a.planDetailsHelper.isParentPlanRow(e.data);l=a.getRowObjectData(t,e.data,l,r,n),i.push(l)})),i},e.prototype.getRowObjectData=function(e,t,n,l,a){var i=this;return e.getAllGridColumns().forEach((function(r){var o=r.getColDef();if(Boolean(o.headerTooltip)&&o.field){if(!e.getColumn(o.field).isVisible())return!0;var u=o.field.split("."),d=t;d=i.getPropertyValue(o.field,d),o.field===Ml.COHORT_NAME&&l&&(d=""),o.field===Ml.SCREENING_TARGET&&(i.planDetailsHelper.isProjectedRow(t)||(i.planDetailsHelper.isCohortRow(t)||i.planDetailsHelper.isActualOrProject(t))&&i.isRTypeCohortStudy)&&(d=""),o.field===Ml.OE&&i.planDetailsHelper.isActualOrProject(t)?d="":o.field===Ml.OE&&(d=void 0!==d?0===Number(d)?"":d:""),o.field!==Ml.SR&&o.field!==Ml.SFR||!i.planDetailsHelper.isCohortRow(t)&&!i.planDetailsHelper.isActualOrProject(t)||!i.isRTypeCohortStudy||(d=""),o.field!==Ml.SR&&o.field!==Ml.RR||""===d||(d=s.c.formatDecimal(d,"0.1-3")),o.field!==Ml.DAYS_TO_25&&o.field!==Ml.DAYS_TO_50&&o.field!==Ml.DAYS_TO_75&&o.field!==Ml.DAYS_TO_90&&o.field!==Ml.DAYS_TO_100||(d=i.getSiteInitiationData(o,t));var c=i.getFieldValueByFn(o.field,t,a);1!==c&&(d=c),o.field!==Ml.OE&&o.field!==Ml.SAS&&o.field!==Ml.SFR&&o.field!==Ml.CalcSAS||""===d||(d=s.c.formatDecimal(d,"0.1-1")),o.field!==Ml.RT&&"string"==typeof d&&C(d).isValid()&&(d=s.c.formatDate(d,"DD-MMM-YYYY")),Boolean(o.field)&&(s.c.isDefined(d)||(d=""),o.field===Ml.GEOGRAPHY_NAME?(n[o.headerTooltip]=d=l?t.label:t[u[1]],n[b.ub.COUNTRY_LOCKED]=t.isCohortCountry||l||"WW"===t.geographyLevel||"Study"===t.geographyLevel?"":t.planParamsDetails.isCountryLocked?"True":"False",n[b.ub.NOTE_APPLIED]=t.isCohortCountry||l||"WW"===t.geographyLevel||"Study"===t.geographyLevel?"":t.planParamsDetails.noteList&&t.planParamsDetails.noteList.note&&t.planParamsDetails.noteList.note.length>0?"Notes":"No Notes",n[b.ub.RA_APPLIED]=t.isCohortCountry||l||"WW"===t.geographyLevel||"Study"===t.geographyLevel?"":t.planParamsDetails.rateAdjustmentsTable&&t.planParamsDetails.rateAdjustmentsTable.rateAdjustment&&t.planParamsDetails.rateAdjustmentsTable.rateAdjustment.length>0?"True":"False"):Boolean(o.headerTooltip)&&(n[o.headerTooltip]=d))}})),n},e.prototype.getPropertyValue=function(e,t){var n=e.split(".");return n.length&&n.forEach((function(e){t&&(t=t[e])})),t},e.prototype.getSiteInitiationData=function(e,t){var n=e.field.split("To"),l=n[1]&&t?this.gridHelperService.getSiteInitPercDate(t,n[1]):"";return void 0===l?"":l},e.prototype.getFieldValueByFn=function(e,t,n){switch(e){case Ml.RT:return t&&t.geographyLevel===b.db.WW&&t.label===Dn.a.COHORT?this.planDetailsHelper.getWWCohortEnrollmentTargetValue(t,n):this.planDetailsHelper.getEnrollmentTargetValue(t);case Ml.FSI:return this.planDetailsHelper.getFSIValue(t);case Ml.FSS:return this.planDetailsHelper.getFSSValue(t,this.isRTypeCohortStudy);case Ml.FSR:return this.planDetailsHelper.getFSRValue(t,this.isRTypeCohortStudy,n);case Ml.LSS:return this.planDetailsHelper.getLSSValue(t,this.isRTypeCohortStudy);case Ml.LSR:return this.planDetailsHelper.getLSRValue(t);case Ml.NUM_SITES:return this.planDetailsHelper.getNumSites(t);case Ml.CalcSAS:return this.planDetailsHelper.calculateSAS(t);case Ml.LAST_MODIFIED_USERNAME:return this.planDetailsHelper.getModifiedBy(t);case Ml.LAST_MODIFIED_DATE:case Ml.LAST_MODIFIED_DATE:return this.planDetailsHelper.getModifiedDate(t);case Ml.GEOGRAPHY_REGION_NAME:var l=!t||t.label!==Dn.a.STUDY_TARGET&&t.geographyLevel!==b.db.WW?{key:t.geographyKey}:"";return""!==l?this.manageCountriesService.getRegionByCountry(l):"";default:return 1}},Object.defineProperty(e.prototype,"isRTypeCohortStudy",{get:function(){return this.manageCountriesService.isRTypeCohortStudy},enumerable:!0,configurable:!0}),e}(),Ul=function(){function e(e,t,n,l,a,i){this.planDetailsService=e,this.countriesGridService=t,this.manageCountryPCEService=n,this.manageCountryResource=l,this.fb=a,this.applicationContextService=i,this.geoListPCEData=[],this.columnsForCohortPlan=[Ml.COHORT_NAME]}return Object.defineProperty(e.prototype,"planDetails",{get:function(){return this.planDetailsService.getPlanDetails()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"countryGridApi",{get:function(){return this.gridApi},set:function(e){this.gridApi=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"countryColumnGridApi",{get:function(){return this.gridColumnApi},set:function(e){this.gridColumnApi=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCohortPlan",{get:function(){return this._isCohortPlan},set:function(e){this._isCohortPlan=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planDetailsData",{get:function(){return this._planDetailsData},set:function(e){this._planDetailsData=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planKey",{get:function(){return this._planKey},set:function(e){this._planKey=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterApplied",{get:function(){return this._filterApplied},set:function(e){this._filterApplied=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkboxClicked",{get:function(){return this._checkboxClicked},set:function(e){this._checkboxClicked=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMCEVisible",{get:function(){return this.applicationContextService.isMCEVisible},enumerable:!0,configurable:!0}),e.prototype.setButtonDisability=function(){this.planDetailsService.setReadOnly(!0),this.planDetailsService.setSaveDisability(!0)},e.prototype.setReportingPeriod=function(){switch(this.countriesGridService.getReportingPeriod(this.planDetailsService.studyKey?this.planDetailsService.studyKey:this.countriesGridService.getLastVisitedStudyKey())){case b.Wb.MONTH.VAL:return b.Wb.MONTH.LABEL;case b.Wb.QUARTER.VAL:return b.Wb.QUARTER.LABEL;case b.Wb.WEEK.VAL:return b.Wb.WEEK.LABEL;default:return b.Wb.DAY.LABEL}},Object.defineProperty(e.prototype,"columnResource",{get:function(){return this.manageCountryResource.columnResource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionResource",{get:function(){return this.manageCountryResource.actionResource},enumerable:!0,configurable:!0}),e.prototype.getProjectedObject=function(e){var t={};return e.projections&&(e.projections=this.resetProjectionVal(e.projections),t=Ue.__assign({},e.projections)),e.countryCalcQuantity&&(t=Ue.__assign({},t,{SFR:e.countryCalcQuantity.effectiveSFR,SR:e.countryCalcQuantity.effectiveSR,ARC:e.countryCalcQuantity.effectiveSAS,RR:e.countryCalcQuantity.effectiveRR})),t},e.prototype.resetProjectionVal=function(e){return e&&(e.FSI=""),Ue.__assign({},e)},e.prototype.getNewCountryList=function(e){var t,n,l=[],a={};e.geoList.geography=[].concat(e.geoList.geography);try{for(var i=Ue.__values(e.geoList.geography),r=i.next();!r.done;r=i.next()){var o=r.value;if(o.isCohortCountry){if(o.isCohortExcluded)continue;a={},a=Ue.__assign({},o,{displayLabel:this.columnResource.MC_COHORT_ROW_LABEL,label:Dn.a.COHORT}),l.push(a)}else a={},a=Ue.__assign({},o,{displayLabel:this.columnResource.MC_COUNTRY_ROW_LABEL,label:Dn.a.COUNTRY}),l.push(a);a={},a=Ue.__assign({},o,{displayLabel:this.columnResource.MC_ACTUALS_ROW_LABEL,label:Dn.a.ACTUALS,planParamsDetails:o.planParamsDetails.actuals?o.planParamsDetails.actuals:{}}),l.push(a),a={},a=Ue.__assign({},o,{displayLabel:this.columnResource.MC_PROJECTED_ROW_LABEL,label:Dn.a.PROJECTED,planParamsDetails:this.getProjectedObject(o.planParamsDetails)}),l.push(a),e.planProperties.isPlan||(a={},a=Ue.__assign({},o,{displayLabel:this.columnResource.MC_PARENT_PLAN_ROW_LABEL,label:Dn.a.PARENT,planParamsDetails:o.planParamsDetails.parentPlan?o.planParamsDetails.parentPlan:{}}),l.push(a))}}catch(s){t={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return l},e.prototype.transformCountriesData=function(e){var t,n,l=this.getNewCountryList(e);try{for(var a=Ue.__values(l),i=a.next();!i.done;i=a.next()){var r=i.value;switch(r.geoHierarchy||(r.geoHierarchy=[]),r.label){case Dn.a.COUNTRY:r.geoHierarchy=(new wl).addHierarchy(r.geographyName),r.id=this.getRowId(r,r.geographyName);break;case Dn.a.COHORT:r.geoHierarchy=(new wl).addHierarchy(r.geographyName,r.cohortName),r.id=this.getRowId(r,r.geographyName);break;case Dn.a.ACTUALS:case Dn.a.PROJECTED:case Dn.a.PARENT:r.geoHierarchy=r.isCohortCountry?(new wl).addHierarchy(r.geographyName,r.cohortName,r.label):(new wl).addHierarchy(r.geographyName,r.label),r.id=this.getRowId(r,r.geographyName)}}}catch(o){t={error:o}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return l},e.prototype.getWWRollupData=function(e){for(var t=[],n=e.length-1;n>=0;n--){var l=e[n];if(l.geographyLevel!==b.db.WW)break;l.isHiddenWWData=!1,l.id=this.getRowId(l,Dn.a.WW),t.push(l)}return t.length>0&&(t=t.reverse()),t},e.prototype.getStudyTargets=function(e){return{geoHierarchy:[Dn.a.STUDY_TARGET],geographyKey:0,geographyLevel:"Study",geographyName:Dn.a.STUDY_TARGET,isCohortCountry:!1,label:Dn.a.STUDY_TARGET,displayLabel:this.columnResource.MC_STUDY_TARGET_ROW_LABEL,planParamsDetails:{enrollmentTarget:e.planProperties.enrollmentTarget,PFSI:e.planProperties.FSI,PLSR:e.planProperties.LSR,PLSS:e.planProperties.LSS,lastModifiedUserName:e.planProperties.lastModifiedUserName?e.planProperties.lastModifiedUserName:"",lastModifiedDate:e.planProperties.lastModifiedDate}}},e.prototype.getOrigPinnedRowData=function(e,t){var n,l=this.getWWRollupData(t);n=Ue.__spread(l);var a=this.getStudyTargets(e);return Ue.__spread([a],n)},e.prototype.getFilterOptions=function(){var e=[];return e.push(new Gl(this.actionResource.MC_ACTUALS_CHECKBOX_LABEL,Dn.a.ACTUALS)),e.push(new Gl(this.actionResource.MC_PROJECTED_CHECKBOX_LABEL,Dn.a.PROJECTED)),e.push(new Gl(this.actionResource.MC_PARENTPLAN_CHECKBOX_LABEL,Dn.a.PARENT)),e},e.prototype.hasPercentCenterInitInfo=function(e){return this.countriesGridService.hasPercentCenterInitInfo(e)},e.prototype.setMenuOption=function(){this.manageCountryPCEService.setOptions()},e.prototype.getMenuOption=function(){return this.setMenuOption(),this.manageCountryPCEService.options},e.prototype.menuClicked=function(e,t){this.geoListPCEData=this.manageCountryPCEService.getPCEData(this.gridApi,this.gridColumnApi,this._planDetailsData,t),this.manageCountryPCEService.optionClicked(e,this._planDetailsData,this.geoListPCEData)},e.prototype.getMileStonePref=function(){return this.planDetailsService.getMileStonePref()},e.prototype.setMileStonePref=function(e){this.planDetailsService.setMileStonePref(e)},e.prototype.setVisibiltyOfGraphs=function(e){this.planDetailsService.expandCollapseCountriesGrid.next(e===b.Ob.EXPAND?b.Ob.EXPAND:null),this.planDetailsService.isExpand=e===b.Ob.EXPAND},e.prototype.setActExpandCollpase=function(e){var t="";return e&&e.map((function(e){e.value!==b.Ob.EXPAND&&e.value!==b.Ob.COLLAPSE||(t=e.value)})),t},e.prototype.dynamicallyCalGridHeight=function(e){var t=0;return e.options.map((function(e){!0===e.value&&e.name!==Dn.a.PARENT&&(t+=24)})),t},e.prototype.getCohortOnlyColumns=function(){return this.columnsForCohortPlan},e.prototype.showHideColumnsForCohortPlan=function(e,t){this.countryGridApi&&this.countryColumnGridApi.setColumnsVisible(e,t===b.ob)},e.prototype.cohortColumnSupressToolPanel=function(e){this.countryColumnGridApi.getColumn(Ml.COHORT_NAME).getColDef().suppressToolPanel=e!==b.ob},e.prototype.removeFilterOption=function(e){var t=e.getRawValue(),n=-1;return t&&Array.isArray(t.options)&&(n=t.options.findIndex((function(e){return e.name===Dn.a.PARENT})))>-1&&e.get("options").removeAt(n),e},e.prototype.addFilterOptions=function(e){var t=e.getRawValue();if(t&&Array.isArray(t.options)&&-1===t.options.findIndex((function(e){return e.name===Dn.a.PARENT}))){var n=new Gl(this.actionResource.MC_PARENTPLAN_CHECKBOX_LABEL,Dn.a.PARENT);e.get("options").push(this.initOption(n))}return e},e.prototype.initOption=function(e){return this.getMileStonePref(),this.fb.group({displayText:[e.displayText],name:[e.value],value:[!1]})},e.prototype.setFilterOptionValue=function(e){var t=this.getMileStonePref(),n=e.get("options").controls;return t&&n.map((function(e){e.value.name===Dn.a.ACTUALS&&e.get("value").setValue(t.actual),e.value.name===Dn.a.PROJECTED&&e.get("value").setValue(t.projection),e.value.name===Dn.a.PARENT&&e.get("value").setValue(t.parentPlan)})),e},e.prototype.isColumnVisibleBasedOnPlanType=function(e){switch(e){case Ml.COHORT_NAME:return this.isCohortPlan===b.pb;default:return!0}},e.prototype.getRowId=function(e,t){return e.geoHierarchy.length>2?t+e.geoHierarchy[e.geoHierarchy.length-1]+e.geoHierarchy[e.geoHierarchy.length-2]:t+e.geoHierarchy[e.geoHierarchy.length-1]},e.prototype.getFilteredPinnedData=function(e,t){var n=[];return e&&(e.options.find((function(e){return e.name===Dn.a.ACTUALS})).value||e.options.find((function(e){return e.name===Dn.a.PARENT}))&&e.options.find((function(e){return e.name===Dn.a.PARENT})).value)&&"Y"===this._isCohortPlan?(n=t.filter((function(e){return e.label!==Dn.a.PROJECTED})).filter((function(e){return"WWActuals"!==e.id})).filter((function(e){return"WWParentPlan"!==e.id})),n=e.options.find((function(e){return e.name===Dn.a.ACTUALS})).value&&e.options.find((function(e){return e.name===Dn.a.PARENT}))&&e.options.find((function(e){return e.name===Dn.a.PARENT})).value?n:e.options.find((function(e){return e.name===Dn.a.ACTUALS})).value?n.filter((function(e){return e.label!==Dn.a.PARENT})):n.filter((function(e){return e.label!==Dn.a.ACTUALS})),this._filterApplied=!0,n.map((function(e){e.isHiddenWWData=!1}))):(n=t.filter((function(e){return e.label!==Dn.a.ACTUALS})).filter((function(e){return e.label!==Dn.a.PROJECTED})).filter((function(e){return e.label!==Dn.a.PARENT})),this._filterApplied=!1,n.map((function(e){e.isHiddenWWData=!1}))),n},e}(),jl=function(){function e(e){this.manageCountriesService=e,this.isExcludeCohortCountryForMcGrid=!1}return e.prototype.ngOnInit=function(){},e.prototype.agInit=function(e){this.params=e,this.countryMetaData={countryKey:e.data.geographyKey,cohortName:this.manageCountriesService.getCohortName(e),isCohortCountry:e.data.isCohortCountry,isMCGrid:e.isMCGrid},this.isExcludeCohortCountryForMcGrid=this.setFlagsForMCGrid()},e.prototype.setFlagsForMCGrid=function(){return this.params.isMCGrid?this.countryMetaData.isCohortCountry&&(this.manageCountriesService.isActualOrProject(this.params)||this.manageCountriesService.isWorldWideRow(this.params)||this.manageCountriesService.isStudyTargetRow(this.params)||this.manageCountriesService.isParentPlan(this.params)):this.countryMetaData.isCohortCountry},e.prototype.cohortNameClicked=function(){this.params.data.isCohortCountry&&this.params.context.componentParent.countryNameClicked(this.countryMetaData.countryKey,this.params)},e.prototype.refresh=function(e){return!1},e.prototype.ngOnDestroy=function(){},e}(),Bl=function(){function e(e,t,n,l,a,i,r){this.activatedRoute=e,this.router=t,this.manageCountryResource=n,this.manageCountryService=l,this.columnPreferencesService=a,this.gridHelper=i,this.manageCountriesService=r,this.reportingPeriod=this.manageCountryService.setReportingPeriod()}return Object.defineProperty(e.prototype,"isRTypeCohortStudy",{get:function(){return this.manageCountriesService.isRTypeCohortStudy},enumerable:!0,configurable:!0}),e.prototype.getDefaultColumnDef=function(){return{lockPinned:!0}},e.prototype.getPlanDetailsData=function(){return this.manageCountryService.planDetailsData},e.prototype.buildColumnDef=function(){var e=this,t=[],n=this.manageCountryResource.columnResource,l=this.columnPreferencesService.getMCColumnVisibilityPref(),a=this.gridHelper.columnConfiguration;return t.push({headerName:n.STATUS,headerTooltip:n.STATUS,field:Ml.PLAN_STATUS,pinned:a.planStatus.pinned,suppressToolPanel:a.planStatus.suppressToolPanel,menuTabs:a.planStatus.menuTabs,cellRenderer:"",cellRendererFramework:An,cellRendererParams:function(t){return{hideStatusIcon:e.manageCountriesService.isActualOrProject(t)||e.manageCountriesService.isStudyTargetRow(t)||e.manageCountriesService.isWorldWideRow(t)||e.manageCountriesService.isParentPlan(t)}},width:a.planStatus.width,cellStyle:a.planStatus.cellStyle,editable:!1,suppressMovable:a.planStatus.suppressMovable,lockPosition:a.planStatus.lockPosition}),t.push({headerName:n.COUNTRY_NAME,headerTooltip:n.COUNTRY_NAME,colId:Ml.GEOGRAPHY_NAME,field:Ml.GEOGRAPHY_NAME,pinned:a.geographyName.pinned,width:a.geographyName.width,cellStyle:a.geographyName.cellStyle,cellClass:a.geographyName.cellClass,suppressToolPanel:a.geographyName.suppressToolPanel,menuTabs:a.geographyName.menuTabs,cellRenderer:"",cellRendererFramework:En,cellRendererParams:{planKey:this.activatedRoute.snapshot.paramMap.get("plankey"),router:this.router,isEditablePlan:!1,mcGrid:!0},comparator:this.gridHelper.countryNameComparator,valueGetter:function(e){return e.data.geographyName},suppressMovable:a.geographyName.suppressMovable,lockPosition:a.geographyName.lockPosition}),t.push({headerName:n.REGION,headerTooltip:n.REGION,colId:Ml.GEOGRAPHY_REGION_NAME,field:Ml.GEOGRAPHY_REGION_NAME,menuTabs:a.regionName.menuTabs,width:a.regionName.width,cellStyle:a.regionName.cellStyle,valueGetter:function(t){var n=e.gridHelper.getRegionByCountry(t);return""!==n?e.manageCountriesService.getRegionByCountry(n):""},tooltip:function(e){return e.valueFormatted?e.valueFormatted:e.value}}),t.push({headerName:n.COHORT_NAME,headerTooltip:n.COHORT_NAME,field:Ml.COHORT_NAME,colId:Ml.COHORT_NAME,menuTabs:a.cohortName.menuTabs,cellRenderer:"",cellRendererFramework:jl,cellRendererParams:{isMCGrid:!0},width:a.cohortName.width,cellStyle:a.cohortName.cellStyle,suppressColumnsToolPanel:a.cohortName.suppressColumnsToolPanel,suppressToolPanel:a.cohortName.suppressToolPanel,tooltip:function(e){return e.valueFormatted?e.valueFormatted:e.value}}),t.push({headerName:n.RT,headerTooltip:n.RANDOMIZATION_TARGET,field:Ml.RT,colId:Ml.RT,menuTabs:a.enrollmentTarget.menuTabs,cellRendererSelector:function(e){return{component:"defaultCellRenderer"}},cellRendererParams:function(e){return{isMCGrid:!0}},valueGetter:function(t){return t&&t.data&&t.data.geographyLevel===b.db.WW&&t.data.label===Dn.a.COHORT?e.gridHelper.getWWCohortEnrollmentTargetValue(t,e.manageCountryService._planDetailsData):e.gridHelper.getEnrollmentTargetValue(t)},width:a.enrollmentTarget.width,cellStyle:a.enrollmentTarget.cellStyle,tooltip:function(e){return e.valueFormatted?e.valueFormatted:e.value}}),t.push({headerName:n.MC_SCREENING,headerTooltip:n.MC_SCREENING_TARGET,field:Ml.SCREENING_TARGET,colId:Ml.SCREENING_TARGET,valueGetter:function(t){return e.gridHelper.getScreeningTargetValue(t,e.isRTypeCohortStudy)},menuTabs:a.screeningTarget.menuTabs,width:a.screeningTarget.width,cellStyle:a.screeningTarget.cellStyle}),t.push({headerName:n.MC_LSS,headerTooltip:n.MC_LAST_SUBJECT_SCREENED,field:Ml.LSS,colId:Ml.LSS,menuTabs:a.LSS.menuTabs,valueFormatter:this.gridHelper.dateFormatter,valueGetter:function(t){return e.gridHelper.getLSSValue(t,e.isRTypeCohortStudy)},width:a.LSS.width,cellStyle:a.LSS.cellStyle}),t.push({headerName:n.MC_LSR,headerTooltip:n.MC_LAST_SUBJECT_RANDOMIZED,field:Ml.LSR,colId:Ml.LSR,menuTabs:a.LSR.menuTabs,valueFormatter:this.gridHelper.dateFormatter,valueGetter:function(t){return e.gridHelper.getLSRValue(t)},width:a.LSR.width,cellStyle:a.LSR.cellStyle}),t.push({headerName:n.OVER_ENR,headerTooltip:n.OVER_ENROLLMENT,field:Ml.OE,colId:Ml.OE,menuTabs:a.overRecruitmentPercent.menuTabs,valueGetter:function(t){return e.gridHelper.getOEValue(t,e.isRTypeCohortStudy)},valueFormatter:this.gridHelper.oneDecimalFormatter,width:a.overRecruitmentPercent.width,cellStyle:a.overRecruitmentPercent.cellStyle}),t.push({headerName:this.reportingPeriod+" "+n.SR,headerTooltip:this.reportingPeriod+" "+n.SCREENING_RATE,field:Ml.SR,colId:Ml.SR,menuTabs:a.SR.menuTabs,valueFormatter:this.gridHelper.threeDecimalFormatter,valueGetter:function(t){return e.gridHelper.getSRValue(t,e.isRTypeCohortStudy)},width:a.SR.width,cellStyle:a.SR.cellStyle}),t.push({headerName:this.reportingPeriod+" "+n.RR,headerTooltip:this.reportingPeriod+" "+n.RANDOMIZATION_RATE,colId:Ml.RR,menuTabs:a.RR.menuTabs,field:Ml.RR,hide:l[Ml.RR],valueFormatter:this.gridHelper.threeDecimalFormatter,width:a.RR.width,cellStyle:a.RR.cellStyle}),t.push({headerName:n.SF_PERCENTAGE,headerTooltip:n.SCREEN_FAILURE_PERCENTAGE,field:Ml.SFR,colId:Ml.SFR,menuTabs:a.SFR.menuTabs,valueFormatter:this.gridHelper.oneDecimalFormatter,valueGetter:function(t){return e.gridHelper.getSFValue(t,e.isRTypeCohortStudy)},width:a.SFR.width,cellStyle:a.SFR.cellStyle}),t.push({headerName:n.FSI,headerTooltip:n.FIRST_SITE_INITIATED,field:Ml.FSI,colId:Ml.FSI,menuTabs:a.FSI.menuTabs,valueGetter:function(t){return e.gridHelper.getFSIValue(t)},valueFormatter:this.gridHelper.dateFormatter,width:a.FSI.width,cellStyle:a.FSI.cellStyle}),t.push({headerName:n.FSI_TO_FSS,headerTooltip:n.DAYS_FROM_FSI_TO_FSS,field:Ml.SITOFSSDAYS,colId:Ml.SITOFSSDAYS,menuTabs:a.FSI_TO_FSS.menuTabs,width:a.FSI_TO_FSS.width,cellStyle:a.FSI_TO_FSS.cellStyle}),t.push({headerName:n.FSS,headerTooltip:n.FIRST_SUBJECT_SCREENED,field:Ml.FSS,colId:Ml.FSS,menuTabs:a.FSS.menuTabs,valueGetter:function(t){return e.gridHelper.getFSSValue(t,e.isRTypeCohortStudy)},valueFormatter:this.gridHelper.dateFormatter,width:a.FSS.width,cellStyle:a.FSS.cellStyle}),t.push({headerName:n.MC_FSR,headerTooltip:n.MC_FIRST_SUBJECT_RANDOMIZED,field:Ml.FSR,colId:Ml.FSR,menuTabs:a.FSR.menuTabs,valueGetter:function(t){return e.gridHelper.getFSRValue(t,e.getPlanDetailsData(),e.isRTypeCohortStudy)},valueFormatter:this.gridHelper.dateFormatter,width:a.FSR.width,cellStyle:a.FSR.cellStyle}),t.push({headerName:n.NUM_SITES,headerTooltip:n.NUMBER_OF_SITES,field:Ml.NUM_SITES,colId:Ml.NUM_SITES,menuTabs:a.numSites.menuTabs,valueGetter:function(t){return e.gridHelper.getNumSites(t)},width:a.numSites.width,cellStyle:a.numSites.cellStyle}),t.push({headerName:n.SAS_PERCENTAGE,headerTooltip:n.SITES_ACTIVELY_SCREENING_PERCENTAGE,field:Ml.SAS,colId:Ml.SAS,menuTabs:a.ARC.menuTabs,valueFormatter:this.gridHelper.oneDecimalFormatter,width:a.ARC.width,cellStyle:a.ARC.cellStyle}),t.push({headerName:n.MC_CAL_SAS,headerTooltip:n.MC_CALCULATED_SITES_ACTIVELY_SCREENING,field:Ml.CalcSAS,colId:Ml.CalcSAS,valueGetter:function(t){return e.gridHelper.calculateSAS(t)},menuTabs:a.CalSAS.menuTabs,valueFormatter:this.gridHelper.oneDecimalFormatter,width:a.CalSAS.width,cellStyle:a.CalSAS.cellStyle}),t.push({headerName:n.TWENTY_FIVE_SI,headerTooltip:n.DAYS_TO_25_PERCENT_SITES_INITIATED,field:Ml.DAYS_TO_25,colId:Ml.DAYS_TO_25,menuTabs:a.daysTo.menuTabs,valueGetter:function(t){return e.gridHelper.getSiteInitPercDate(t.data,"25")},valueFormatter:this.gridHelper.dateFormatter,width:a.daysTo.width,cellStyle:a.daysTo.cellStyle}),t.push({headerName:n.FIFTY_SI,headerTooltip:n.DAYS_TO_50_PERCENT_SITES_INITIATED,field:Ml.DAYS_TO_50,colId:Ml.DAYS_TO_50,menuTabs:a.daysTo.menuTabs,valueGetter:function(t){return e.gridHelper.getSiteInitPercDate(t.data,"50")},valueFormatter:this.gridHelper.dateFormatter,width:a.daysTo.width,cellStyle:a.daysTo.cellStyle}),t.push({headerName:n.SEVENTY_FIVE_SI,headerTooltip:n.DAYS_TO_75_PERCENT_SITES_INITIATED,field:Ml.DAYS_TO_75,colId:Ml.DAYS_TO_75,menuTabs:a.daysTo.menuTabs,valueGetter:function(t){return e.gridHelper.getSiteInitPercDate(t.data,"75")},valueFormatter:this.gridHelper.dateFormatter,width:a.daysTo.width,cellStyle:a.daysTo.cellStyle}),t.push({headerName:n.NINTY_SI,headerTooltip:n.DAYS_TO_90_PERCENT_SITES_INITIATED,field:Ml.DAYS_TO_90,colId:Ml.DAYS_TO_90,menuTabs:a.daysTo.menuTabs,valueGetter:function(t){return e.gridHelper.getSiteInitPercDate(t.data,"90")},valueFormatter:this.gridHelper.dateFormatter,width:a.daysTo.width,cellStyle:a.daysTo.cellStyle}),t.push({headerName:n.HUNDRED_SI,headerTooltip:n.DAYS_TO_100_PERCENT_SITES_INITIATED,field:Ml.DAYS_TO_100,colId:Ml.DAYS_TO_100,menuTabs:a.daysTo.menuTabs,valueGetter:function(t){return e.gridHelper.getSiteInitPercDate(t.data,"100")},valueFormatter:this.gridHelper.dateFormatter,width:a.daysTo.width,cellStyle:a.daysTo.cellStyle}),t.push({headerName:n.MC_MOD_BY,headerTooltip:n.MC_MODIFIED_BY,field:Ml.LAST_MODIFIED_USERNAME,colId:Ml.LAST_MODIFIED_USERNAME,menuTabs:a.ModBy.menuTabs,valueGetter:function(t){return e.gridHelper.getModifiedBy(t)},width:a.ModBy.width,cellStyle:a.ModBy.cellStyle}),t.push({headerName:n.MC_MOD_DATE,headerTooltip:n.MC_MODIFIED_DATE,field:Ml.LAST_MODIFIED_DATE,colId:Ml.LAST_MODIFIED_DATE,menuTabs:a.ModDate.menuTabs,valueGetter:function(t){return e.gridHelper.getModifiedDate(t)},valueFormatter:this.gridHelper.timeRemoveFormatter,width:a.ModDate.width,cellStyle:a.ModDate.cellStyle}),t},e}(),Wl=function(){function e(e,t,n,l,a,i,r,o){this.manageCountryService=e,this.countryGridColumnService=t,this.planDetailsService=n,this.countriesGridService=l,this.activatedRoute=a,this.router=i,this.gridRowSelectionPreferencesService=r,this.gridCustomGroupingService=o}return Object.defineProperty(e.prototype,"columnDefList",{get:function(){var e=this.countryGridColumnService.buildColumnDef();return this.manageCountryService.columnDef=e,e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultColumnDef",{get:function(){var e=this.countryGridColumnService.getDefaultColumnDef();return this.manageCountryService.defaultColumnDef=e,e},enumerable:!0,configurable:!0}),e.prototype.setFrameworkComponent=function(){this.frameworkComponents={}},Object.defineProperty(e.prototype,"countryGridApi",{set:function(e){this.gridApi=e,this.manageCountryService.countryGridApi=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"countryColumnGridApi",{set:function(e){this.columnGridApi=e,this.manageCountryService.countryColumnGridApi=e},enumerable:!0,configurable:!0}),e.prototype.navigateToCountry=function(e,t){var n=this.activatedRoute.snapshot.paramMap.get("plankey"),l={};t&&t.data&&(t.data.isCohortCountry?(l.parameterType=Ln.a.COHORT,l.parameterKey=t.data.cohortKey):(l.parameterType=Ln.a.COUNTRY,l.parameterKey=e)),this.planDetailsService.setSelectedEnrollmentParameterDetails(l),this.router.navigate(t.data&&t.data.planParamsDetails&&t.data.planParamsDetails.siteInitiationMethod===b.ac.GRANULAR?["/plans","plandetails",n,"countries",e,b.ac.GRANULAR]:["/plans","plandetails",n,"countries",e])},e.prototype.getCalculatedGridHeight=function(e,t,n,l){var a=t&&{offsetTop:t[b.xb.OFFSETTOP],offsetHeight:t[b.xb.OFFSETHEIGHT]},i=0;return n&&(i=n.getDisplayedRowCount()+n.getPinnedTopRowCount()),this.countriesGridService.setCountryGridHeight(e,a,n,l,i)},e.prototype.updateCountryGridHeight=function(e,t,n,l,a,i,r){var o=t.nativeElement,s=this.getCalculatedGridHeight(i,l,a,n&&n[b.xb.OFFSETHEIGHT])+Number(0);e.setStyle(o,b.xb.HEIGHT,s+b.oc.PX),a.refreshView()},e.prototype.showHideColumnsForCohortPlan=function(){this.manageCountryService.showHideColumnsForCohortPlan(this.manageCountryService.columnsForCohortPlan,this.manageCountryService.isCohortPlan)},e.prototype.setSelectedRowPreference=function(e){e&&this.gridRowSelectionPreferencesService.setSelectedRowPreference(e)},e.prototype.setCardAndGraphData=function(){var e=this.gridApi.getSelectedRows();e&&e.length>0&&this.gridRowSelectionPreferencesService.setCardAndGraphData(this.gridApi,e[0])},e.prototype.getExpandTag=function(){return this.planDetailsService.isExpand},e.prototype.getDataToBeSaved=function(e){var t=[],n=e.getPinnedTopRowCount();if(n>0)for(var l=0;l<n;l++){var a=e.getPinnedTopRow(l);t.push(a.data)}if(t&&e){var i=[];return t.map((function(e){i.push({expanded:e.isHiddenWWData,geographyKey:e.id})})),e.forEachNode((function(e){i.push({expanded:e.expanded,geographyKey:e.data.id})})),i}},e.prototype.setCountryExpandedState=function(e,t,n){n&&(n.forEachNode((function(n){e&&t&&t.length>0&&t.map((function(e){n.data.id===e.geographyKey&&(n.expanded=e.expanded)}))})),n.onGroupExpandedOrCollapsed(),n.refreshHeader())},e.prototype.setWWExpandedState=function(e,t,n,l){var a=this,i=[];return e.map((function(n){t.map((function(t){n.id===t.geographyKey&&(n.isHiddenWWData=t.expanded,a.gridCustomGroupingService.worldWideNameClicked(n.isHiddenWWData,l,e,n),l.refreshHeader(),i.push(n))}))})),i},e.prototype.getUpdatedPinnedTopRowData=function(e,t,n){for(var l=function(l){t.find((function(t){return t.geographyKey===e[l].id}))||e.map((function(e){n.map((function(t){e.id===t.id&&(e.isHiddenWWData=t.isHiddenWWData)}))}))},a=0;a<e.length;a++)l(a);return e},e.prototype.setReadOnlyRowCount=function(e){this.planDetailsService.readOnlyRowCount=Number(e)},e.prototype.getReadOnlyRowCount=function(){return this.planDetailsService.readOnlyRowCount},e.prototype.rateAdjustmentClicked=function(e,t){e&&this.planDetailsService.navigateFromCountryToRA(e,t)},e.prototype.setTooltipMessage=function(e){if(e.data.geographyLevel!==Dn.a.WW){if(this.manageCountryService.filterApplied&&(e.data.label===Dn.a.COUNTRY||e.data.label===Dn.a.COHORT))return e.node.expanded?this.getResources().collapse:this.getResources().expand;if(!this.manageCountryService.filterApplied&&e.data.label===Dn.a.COUNTRY)return e.node.expanded?this.getResources().collapse:this.getResources().expand}},e.prototype.getResources=function(){return{expand:this.manageCountryService.actionResource.EXPANDGRID,collapse:this.manageCountryService.actionResource.COLLAPSEGRID}},e}(),Hl=function(){function e(e,t,n,l,a,i,r){var o=this;this.countryGridService=e,this.gridCustomGroupingService=t,this.renderer=n,this.manageCountryService=l,this.gridHelper=a,this.columnPreferencesService=i,this.applicationContextService=r,this.subscriptions=new Sn.a,this.rowData=[],this.isHiddenWWData=!1,this.domLayout=b.G.auto,this.defaultColumnDef=this.countryGridService.defaultColumnDef,this.columnDefList=this.countryGridService.columnDefList,this.rowSelection=this.gridHelper.rowSelectionClass.ROW_SELECTION,this.createGridOptions(),this.gridOptions={context:{componentParent:this},getRowClass:function(e){return o.gridHelper.getGridRowClass(e)}},this.rowClassRules=this.gridHelper.getRowClassRules()}return Object.defineProperty(e.prototype,"gridRowData",{set:function(e){this.isGroupingRequired=e.some((function(e){return e.geoHierarchy.length>1})),this.rowData=e.filter((function(e){return e.geographyLevel!==b.db.WW})),this.showNoRowMessage(),this.countryGridApi&&(this.countryGridApi.refreshHeader(),this.countryGridApi.refreshView()),this.countryGridService.showHideColumnsForCohortPlan()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chartWrapperRef",{set:function(e){this.chartWrapper=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"countryCountainerRef",{set:function(e){this.countryContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actExpandCollpase",{set:function(e){e&&this.setCountryGridHeight(this.countryGridService.getExpandTag()?b.Ob.EXPAND:b.Ob.COLLAPSE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dynamicHeight",{set:function(e){this.randomHeight=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.localResources=this.countryGridService.getResources(),this.groupDefaultExpanded=-1;var t=this.gridHelper.columnConfiguration;this.autoGroupColumnDef={headerName:t.autoGroupColumnDef.headerName,width:t.autoGroupColumnDef.width,pinned:t.autoGroupColumnDef.pinned,cellRendererParams:{suppressCount:!0},pinnedRowCellRenderer:"customPinnedRowRenderer",headerComponentFramework:Yn,headerComponentParams:function(t){return{rowData:e.rowData,pinnedTopRowData:e.pinnedTopRowData}},pinnedRowCellRendererParams:function(t){return{filterApplied:e.manageCountryService.filterApplied,isCohortPlan:e.manageCountryService.isCohortPlan,localResources:e.localResources}},suppressMovable:t.autoGroupColumnDef.suppressMovable,lockPosition:t.autoGroupColumnDef.lockPosition,tooltipField:function(t){return e.countryGridService.setTooltipMessage(t)}},this.getDataPath=function(e){return e.geoHierarchy},this.setFrameworkComponents()},e.prototype.ngOnDestroy=function(){this.subscriptions.next(),this.subscriptions.complete()},e.prototype.gridScroll=function(){var e=this.countriesGrid.nativeElement;(this.countriesGrid.nativeElement.querySelector(".ag-header"),window,this.chartWrapper.getBoundingClientRect(),e.getBoundingClientRect()).bottom>window.innerHeight-20&&window},e.prototype.rowDataChanged=function(e){this.countryGridApi=e.api,this.setMCFilterModel(e),this.countryGridService.setSelectedRowPreference(e.api),this.manageCountryService.checkboxClicked?(this.saveExpandedStateOfRows(),this.countryGridApi.refreshHeader(),this.manageCountryService.checkboxClicked=!1):this.setSavedExpandedStateForPinnedRows(),this.setCountryGridHeight(this.countryGridService.getExpandTag()?b.Ob.EXPAND:b.Ob.COLLAPSE)},e.prototype.setFrameworkComponents=function(){this.frameworkComponents={customPinnedRowRenderer:qn,defaultCellRenderer:Kn}},e.prototype.createGridOptions=function(){this.gridOptions={context:{componentParent:this},suppressContextMenu:!0}},e.prototype.columnVisible=function(e){if(e.column){var t=e.column.getColId()?e.column.getColId():e.column.getColDef().field;e.visible!==this.columnPreferencesService.getColumnVisibilityFromPref(t)&&this.manageCountryService.isColumnVisibleBasedOnPlanType(t)&&this.columnPreferencesService.updateManageCountryColumnPreference(t,e.visible)}},e.prototype.onCountryGridReady=function(e){this.countryGridApi=e.api,this.countryGridColumnApi=e.columnApi,this.countryGridService.countryGridApi=e.api,this.countryGridService.countryColumnGridApi=e.columnApi,this.subscribeToMCPreference(e),this.countryGridService.setSelectedRowPreference(e.api)},e.prototype.subscribeToMCPreference=function(e){var t=this;this.columnPreferencesService.getMCPreference().pipe(Object(Ll.a)(this.subscriptions)).subscribe((function(n){n&&(t.showHideMCColumnsByPref(),t.countryGridService.showHideColumnsForCohortPlan(),t.moveMCColumnsByPref(e.columnApi))}))},e.prototype.showHideMCColumnsByPref=function(){var e,t,n=this.columnPreferencesService.getMCColumnVisibilityPref();if(n)try{for(var l=Ue.__values(Object.keys(n)),a=l.next();!a.done;a=l.next()){var i=a.value;this.countryGridColumnApi.setColumnVisible(i,!n[i])}}catch(r){e={error:r}}finally{try{a&&!a.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}},e.prototype.getContext=function(){return{componentParent:this}},e.prototype.onrowGroupOpened=function(e){this.applicationContextService.updateCollapsedRowForMapByPlanKey(this.manageCountryService.planKey+Dn.a.MANAGE_COUNTRY_GRID,{expanded:e.node.expanded,geographyKey:e.node.data.id}),this.countryGridApi&&(this.countryGridApi.refreshHeader(),this.setCountryGridHeight(this.countryGridService.getExpandTag()?b.Ob.EXPAND:b.Ob.COLLAPSE))},e.prototype.countryNameClicked=function(e,t){this.routingToDCPView(e,t)},e.prototype.routingToDCPView=function(e,t){this.countryGridService.navigateToCountry(e,t)},e.prototype.worldWideNameClicked=function(e,t){void 0!==e&&(this.gridCustomGroupingService.worldWideNameClicked(e,this.countryGridApi,this.pinnedTopRowData,t),this.isHiddenWWData=e,this.countryGridApi.refreshHeader(),this.saveExpandedStateOfRows(),this.countryGridApi&&this.setCountryGridHeight(this.countryGridService.getExpandTag()?b.Ob.EXPAND:b.Ob.COLLAPSE))},e.prototype.setCountryGridHeight=function(e){void 0===e&&(e=b.Ob.COLLAPSE);var t=this.countryGridApi&&this.countryGridApi.getDisplayedRowCount();t&&t>0&&this.updateCountryGridHeight(e)},e.prototype.onSelectionChanged=function(e){this.countryGridService.setCardAndGraphData()},e.prototype.updateCountryGridHeight=function(e){void 0===e&&(e=b.Ob.COLLAPSE),this.countryGridService.updateCountryGridHeight(this.renderer,this.countriesGrid,this.countryContainer,this.chartWrapper,this.countryGridApi,e,this.randomHeight)},e.prototype.showNoRowMessage=function(){this.gridOptions&&(this.gridOptions.suppressNoRowsOverlay=!0)},e.prototype.firstDataRendered=function(e){this.countryGridApi=e.api;var t=this.countryGridApi&&this.countryGridApi.getDisplayedRowCount();t&&t>0&&this.updateCountryGridHeight(this.countryGridService.getExpandTag()?b.Ob.EXPAND:b.Ob.COLLAPSE),this.setMCFilterModel(e)},e.prototype.dragStopped=function(e){var t=e.columnApi.getAllGridColumns().map((function(e,t){return e.getId()}));this.columnPreferencesService.updateColumnPreferenceOnMoveColumn(t)},e.prototype.moveMCColumnsByPref=function(e){for(var t=this.getPinnedColumnsCount(e),n=this.columnPreferencesService.getManageCountryColumnOrderPref(),l=t;l<n.length;l++)e.moveColumn(n[l],l+1)},e.prototype.getPinnedColumnsCount=function(e){var t=e.getAllGridColumns().filter((function(e,t){return"left"===e.getColDef().pinned}));return t?t.length:1},e.prototype.onFilterChanged=function(e){this.applicationContextService.updateMCFilterPref(this.manageCountryService._planDetailsData.planProperties.planKey,e.api.getFilterModel())},e.prototype.setMCFilterModel=function(e){if(this.manageCountryService._planDetailsData){var t=this.applicationContextService.getMCFilterPref(this.manageCountryService._planDetailsData.planProperties.planKey);e.api.setFilterModel(t)}},e.prototype.saveExpandedStateOfRows=function(){var e=this.countryGridService.getDataToBeSaved(this.countryGridApi);this.applicationContextService.getCollapsedStateOfRows().set(this.manageCountryService.planKey+Dn.a.MANAGE_COUNTRY_GRID,e),this.applicationContextService.getPinnedTopRowData().set(this.manageCountryService.planKey+Dn.a.MANAGE_COUNTRY_GRID,this.pinnedTopRowData)},e.prototype.setSavedExpandedStateForPinnedRows=function(){var e=this.applicationContextService.getCollapsedStateOfRows(),t=this.manageCountryService.planKey?e.get(this.manageCountryService.planKey+Dn.a.MANAGE_COUNTRY_GRID):[];if(this.countryGridService.setCountryExpandedState(e,t,this.countryGridApi),t&&t.length>0&&this.pinnedTopRowData&&this.countryGridApi&&t.find((function(e){return e.geographyKey===Dn.a.WWWORLDWIDE}))){var n=this.applicationContextService.getPinnedTopRowData().get(this.manageCountryService.planKey+Dn.a.MANAGE_COUNTRY_GRID),l=this.countryGridService.setWWExpandedState(this.pinnedTopRowData,t,this.isHiddenWWData,this.countryGridApi);this.pinnedTopRowData=this.countryGridService.getUpdatedPinnedTopRowData(this.pinnedTopRowData,t,n),this.countryGridApi.setPinnedTopRowData(l),this.countryGridApi.refreshHeader()}},e.prototype.rateAdjustmentClicked=function(){this.countryGridService.rateAdjustmentClicked(this.manageCountryService.planKey,b.Mb.RATE_ADJUSTMENT)},e}(),Yl=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ql(e){return l["ɵvid"](2,[l["ɵqud"](402653184,1,{countriesGrid:0}),(e()(),l["ɵeld"](1,0,null,null,5,"div",[["class","ag_container"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,16777216,[[1,0]],null,4,"ag-grid-angular",[["class","ag-theme-material"],["style","width: 100%"]],null,[[null,"gridReady"],[null,"rowGroupOpened"],[null,"selectionChanged"],[null,"rowDataChanged"],[null,"firstDataRendered"],[null,"columnVisible"],[null,"dragStopped"],[null,"filterChanged"]],(function(e,t,n){var l=!0,a=e.component;return"gridReady"===t&&(l=!1!==a.onCountryGridReady(n)&&l),"rowGroupOpened"===t&&(l=!1!==a.onrowGroupOpened(n)&&l),"selectionChanged"===t&&(l=!1!==a.onSelectionChanged(n)&&l),"rowDataChanged"===t&&(l=!1!==a.rowDataChanged(n)&&l),"firstDataRendered"===t&&(l=!1!==a.firstDataRendered(n)&&l),"columnVisible"===t&&(l=!1!==a.columnVisible(n)&&l),"dragStopped"===t&&(l=!1!==a.dragStopped(n)&&l),"filterChanged"===t&&(l=!1!==a.onFilterChanged(n)&&l),l}),nn.b,nn.a)),l["ɵprd"](512,null,ln.AngularFrameworkOverrides,ln.AngularFrameworkOverrides,[l.NgZone]),l["ɵprd"](512,null,an.AngularFrameworkComponentWrapper,an.AngularFrameworkComponentWrapper,[]),l["ɵdid"](5,4898816,[["agGrid",4]],1,rn.AgGridAngular,[l.ElementRef,l.ViewContainerRef,ln.AngularFrameworkOverrides,an.AngularFrameworkComponentWrapper,l.ComponentFactoryResolver],{gridOptions:[0,"gridOptions"],rowData:[1,"rowData"],columnDefs:[2,"columnDefs"],pinnedTopRowData:[3,"pinnedTopRowData"],frameworkComponents:[4,"frameworkComponents"],context:[5,"context"],autoGroupColumnDef:[6,"autoGroupColumnDef"],defaultColDef:[7,"defaultColDef"],rowClassRules:[8,"rowClassRules"],rowSelection:[9,"rowSelection"],domLayout:[10,"domLayout"],groupDefaultExpanded:[11,"groupDefaultExpanded"],getDataPath:[12,"getDataPath"],enableSorting:[13,"enableSorting"],enableFilter:[14,"enableFilter"],suppressMovableColumns:[15,"suppressMovableColumns"],suppressContextMenu:[16,"suppressContextMenu"],suppressDragLeaveHidesColumns:[17,"suppressDragLeaveHidesColumns"],treeData:[18,"treeData"]},{columnVisible:"columnVisible",rowGroupOpened:"rowGroupOpened",rowDataChanged:"rowDataChanged",selectionChanged:"selectionChanged",filterChanged:"filterChanged",gridReady:"gridReady",firstDataRendered:"firstDataRendered",dragStopped:"dragStopped"}),l["ɵqud"](603979776,2,{columns:1})],(function(e,t){var n=t.component;e(t,5,1,[n.gridOptions,n.rowData,n.columnDefList,n.pinnedTopRowData,n.frameworkComponents,n.getContext(),n.autoGroupColumnDef,n.defaultColumnDef,n.rowClassRules,n.rowSelection,n.domLayout,n.groupDefaultExpanded,n.getDataPath,!0,!0,!1,!0,!0,!0])}),null)}var Jl=function(){function e(e,t){this.fb=e,this.manageCountryService=t,this.subscriptions=new Sn.a,this.setGridVisibility=new l.EventEmitter,this.rowData=[],this.orginalGeoList=[],this.pinnedOrigRowdata=[],this.menuOption=[],this.actExpandCollpase="",this.dynamicHeight=0,this.filterApplied=!1}return Object.defineProperty(e.prototype,"chartsWrapperElementRef",{set:function(e){this.chartWrapper=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.filterOptions=this.manageCountryService.getFilterOptions(),this.isMCEVisible=this.manageCountryService.isMCEVisible,this.createForm(),this.getResources(),this.getPlanDetails(),this.getMenuOptions()},e.prototype.ngOnDestroy=function(){this.subscriptions.next(),this.subscriptions.complete()},e.prototype.getResources=function(){this.localResources={slideToggleLeftText:this.manageCountryService.actionResource.MC_GRID_TOGGLE_LEFT_MESSAGE,slideToggleRightText:this.manageCountryService.actionResource.MC_GRID_TOGGLE_RIGHT_MESSAGE}},e.prototype.getPlanDetails=function(){var e=this;this.manageCountryService.planDetails.pipe(Object(Ll.a)(this.subscriptions)).subscribe((function(t){t&&Object.keys(t).length>0&&(e.manageCountryService._planDetailsData=t,e.manageCountryService.isCohortPlan=t.planProperties.isCohortPlan,e.manageCountryService.planKey=t.planProperties.planKey,e.orginalGeoList=e.manageCountryService.transformCountriesData(t),e.getOrigPinnedRowdata(t,e.orginalGeoList),e.updateFilterOption(t.planProperties.isPlan),e.setFilterOptionData(),e.manageCountryService.setButtonDisability())}))},e.prototype.getOrigPinnedRowdata=function(e,t){this.pinnedOrigRowdata=this.manageCountryService.getOrigPinnedRowData(e,t)},e.prototype.onFilterOptionChange=function(e){this.manageCountryService.checkboxClicked=!0,this.updateFilterOptionData(e),this.dynamicallyCalGridHeight()},e.prototype.createForm=function(){this.filterOptionForm=this.fb.group({options:this.fb.array([])}),this.setFormData()},e.prototype.initOption=function(e){return this.fb.group({displayText:[e.displayText],name:[e.value],value:[!1]})},e.prototype.setFormData=function(){for(var e=0;e<this.filterOptions.length;e++){var t=this.filterOptions[e];this.filterOptionForm.get("options").push(this.initOption(t))}},e.prototype.getMenuOptions=function(){this.menuOption=this.manageCountryService.getMenuOption()},e.prototype.menuClick=function(e){this.manageCountryService.menuClicked(e,this.filteredPinnedData),this.setExpandCollpaseAction(e)},e.prototype.setExpandCollpaseAction=function(e){this.actExpandCollpase=e&&e.value&&((e.value===b.Ob.EXPAND?b.Ob.EXPAND:"")||(e.value===b.Ob.COLLAPSE?b.Ob.COLLAPSE:"")),this.setVisibiltyOfGraphs()},e.prototype.setVisibiltyOfGraphs=function(){this.actExpandCollpase&&""!==this.actExpandCollpase&&(this.manageCountryService.setVisibiltyOfGraphs(this.actExpandCollpase),this.refreshMenuOption())},e.prototype.refreshMenuOption=function(){this.getMenuOptions()},e.prototype.setFilteredPinnedData=function(e){this.filteredPinnedData=this.manageCountryService.getFilteredPinnedData(e,this.pinnedOrigRowdata)},e.prototype.setFilterOptionData=function(){this.filterOptionForm=this.manageCountryService.setFilterOptionValue(this.filterOptionForm),this.getFilterOptionData()},e.prototype.getFilterOptionData=function(e){for(var t=this.filterOptionForm.getRawValue(),n={},l=0;l<t.options.length;l++){var a=t.options[l];a.value||(n[a.name]=!0)}this.rowData=this.orginalGeoList.filter((function(e){return!n[e.label]})),this.setFilteredPinnedData(t)},e.prototype.updateFilterOptionData=function(e){this.manageCountryService.setMileStonePref(this.filterOptionForm.getRawValue()),this.getFilterOptionData(e)},e.prototype.dynamicallyCalGridHeight=function(){this.dynamicHeight=this.manageCountryService.dynamicallyCalGridHeight(this.filterOptionForm.getRawValue())},e.prototype.updateFilterOption=function(e){e?this.removeFilterOption():this.addFilterOption()},e.prototype.addFilterOption=function(){this.filterOptionForm=this.manageCountryService.addFilterOptions(this.filterOptionForm)},e.prototype.removeFilterOption=function(){this.filterOptionForm=this.manageCountryService.removeFilterOption(this.filterOptionForm)},e.prototype.onCountryViewChange=function(e){this.setGridVisibility.emit(!0)},e}(),Xl=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function zl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,14,null,null,null,null,null,null,null)),l["ɵdid"](1,212992,null,0,x.f,[[3,x.d],[8,null],[8,null]],{name:[0,"name"]},null),l["ɵprd"](2048,null,x.d,null,[x.f]),l["ɵdid"](3,16384,null,0,x.t,[[4,x.d]],null,null),(e()(),l["ɵeld"](4,0,null,null,10,null,null,null,null,null,null,null)),l["ɵdid"](5,212992,null,0,x.m,[[3,x.d],[8,null],[8,null]],{name:[0,"name"]},null),l["ɵprd"](2048,null,x.d,null,[x.m]),l["ɵdid"](7,16384,null,0,x.t,[[4,x.d]],null,null),(e()(),l["ɵeld"](8,0,null,null,6,"mat-checkbox",[["class","check-box mat-checkbox"],["color","accent"],["formControlName","value"],["name","option"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"]],(function(e,t,n){var l=!0;return"change"===t&&(l=!1!==e.component.onFilterOptionChange(e.context.$implicit)&&l),l}),Al.b,Al.a)),l["ɵdid"](9,8568832,null,0,Il.b,[l.ElementRef,l.ChangeDetectorRef,m.h,l.NgZone,[8,null],[2,Il.a],[2,Q.a]],{color:[0,"color"],name:[1,"name"]},{change:"change"}),l["ɵprd"](1024,null,x.q,(function(e){return[e]}),[Il.b]),l["ɵdid"](11,671744,null,0,x.j,[[3,x.d],[8,null],[8,null],[6,x.q],[2,x.E]],{name:[0,"name"]},null),l["ɵprd"](2048,null,x.r,null,[x.j]),l["ɵdid"](13,16384,null,0,x.s,[[4,x.r]],null,null),(e()(),l["ɵted"](14,0,[" "," "]))],(function(e,t){e(t,1,0,"options"),e(t,5,0,t.context.index),e(t,9,0,"accent","option"),e(t,11,0,"value")}),(function(e,t){var n=t.component;e(t,8,1,[l["ɵnov"](t,9).id,null,l["ɵnov"](t,9).indeterminate,l["ɵnov"](t,9).checked,l["ɵnov"](t,9).disabled,"before"==l["ɵnov"](t,9).labelPosition,"NoopAnimations"===l["ɵnov"](t,9)._animationMode,l["ɵnov"](t,13).ngClassUntouched,l["ɵnov"](t,13).ngClassTouched,l["ɵnov"](t,13).ngClassPristine,l["ɵnov"](t,13).ngClassDirty,l["ɵnov"](t,13).ngClassValid,l["ɵnov"](t,13).ngClassInvalid,l["ɵnov"](t,13).ngClassPending]),e(t,14,0,n.filterOptionForm.get("options").controls[t.context.index].controls.displayText.value)}))}function Zl(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{countryContainer:0}),(e()(),l["ɵeld"](1,0,null,null,19,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,[[1,0],["countryContainer",1]],null,14,"div",[["class","col-12 manage-country-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,13,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,6,"div",[["class","col-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,5,null,null,null,null,(function(e,t,n){var a=!0;return"submit"===t&&(a=!1!==l["ɵnov"](e,6).onSubmit(n)&&a),"reset"===t&&(a=!1!==l["ɵnov"](e,6).onReset()&&a),a}),null,null)),l["ɵdid"](6,540672,null,0,x.l,[[8,null],[8,null]],{form:[0,"form"]},null),l["ɵprd"](2048,null,x.d,null,[x.l]),l["ɵdid"](8,16384,null,0,x.t,[[4,x.d]],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,zl)),l["ɵdid"](10,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](11,0,null,null,5,"div",[["class","col-6 text-right"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,4,"div",[["class","slide-toggle-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,1,"ctos-slide-toggle",[["class","slide-toggle"]],null,[[null,"toggle"]],(function(e,t,n){var l=!0;return"toggle"===t&&(l=!1!==e.component.onCountryViewChange(n)&&l),l}),xt,Gt)),l["ɵdid"](14,114688,null,0,wt,[],{checked:[0,"checked"],leftDisplayText:[1,"leftDisplayText"],rightDisplayText:[2,"rightDisplayText"]},{toggle:"toggle"}),(e()(),l["ɵeld"](15,0,null,null,1,"ctos-context-menus",[],null,[[null,"emitMenuClick"]],(function(e,t,n){var l=!0;return"emitMenuClick"===t&&(l=!1!==e.component.menuClick(n)&&l),l}),_l.c,_l.b)),l["ɵdid"](16,770048,null,0,Nl.a,[],{menuOption:[0,"menuOption"]},{emitMenuClick:"emitMenuClick"}),(e()(),l["ɵeld"](17,0,null,null,3,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,2,"ctos-country-grid",[],null,[["window","scroll"]],(function(e,t,n){var a=!0;return"window:scroll"===t&&(a=!1!==l["ɵnov"](e,20).gridScroll()&&a),a}),ql,Yl)),l["ɵprd"](512,null,Fl,Fl,[o.cb]),l["ɵdid"](20,245760,null,0,Hl,[Wl,Jn,l.Renderer2,Ul,zn,Fl,M.a],{gridRowData:[0,"gridRowData"],chartWrapperRef:[1,"chartWrapperRef"],countryCountainerRef:[2,"countryCountainerRef"],actExpandCollpase:[3,"actExpandCollpase"],dynamicHeight:[4,"dynamicHeight"],pinnedTopRowData:[5,"pinnedTopRowData"]},null)],(function(e,t){var n=t.component;e(t,6,0,n.filterOptionForm),e(t,10,0,n.filterOptionForm.get("options").controls),e(t,14,0,n.isMCEVisible,n.localResources.slideToggleLeftText,n.localResources.slideToggleRightText),e(t,16,0,n.menuOption),e(t,20,0,n.rowData,n.chartWrapper,l["ɵnov"](t,2),n.actExpandCollpase,n.dynamicHeight,n.filteredPinnedData)}),null)}var $l=n("Bou+"),Ql=n("/DOc"),ea=function(){function e(e,t,n,l,a,i,r,o,s,u,d){var c=this;this.appDataService=e,this.resourceService=t,this.userDataService=n,this.errorTermsService=l,this.planDetailsService=a,this.studySummaryService=i,this.lgdServ=r,this.datePipe=o,this.pceService=s,this.renderer=u,this.pceHeaderResourceService=d,this.copySchema={milestone:[],curve:[]},this.milestoneNames=[{mid:"Tot_No_Sites_approved",desc:"Tot_No_Sites_approved",id:"AppPSI",axis:"subject"},{mid:"First_Site_Initiated_approved",desc:"First_Site_Initiated_approved",id:"AppPSI",axis:"date"},{mid:"Tot_No_Sites_base",desc:"Tot_No_Sites_base",id:"BasPSI",axis:"subject"},{mid:"First_Site_Initiated_base",desc:"First_Site_Initiated_base",id:"BasPSI",axis:"date"},{mid:"Tot_No_Sites_Prj",desc:"Tot_No_Sites_Prj",id:"CurPrSI",axis:"subject"},{mid:"First_Site_Initiated_Prj",desc:"First_Site_Initiated_Prj",id:"CurPrSI",axis:"date"},{mid:"Tot_No_Sites_Upd",desc:"Tot_No_Sites_Upd",id:"UpdPrSI",axis:"subject"},{mid:"First_Site_Initiated_Upd",desc:"First_Site_Initiated_Upd",id:"UpdPrSI",axis:"date"},{mid:"Tot_No_Sites_adjustment",desc:"Tot_No_Sites_adjustment",id:"AdjPSI",axis:"subject"},{mid:"First_Site_Initiated_adjustment",desc:"First_Site_Initiated_adjustment",id:"AdjPSI",axis:"date"},{mid:"SS_Frz",desc:"SS_Frz",id:"FroPrLSS",axis:"date"},{mid:"SR_Frz",desc:"SR_Frz",id:"FroPrLSR",axis:"date"},{mid:"SI_25_Frozen",desc:"25% FrzPSI",id:"FroPrSI",axis:"date"},{mid:"SI_50_Frozen",desc:"50% FrzPSI",id:"FroPrSI",axis:"date"},{mid:"SI_90_Frozen",desc:"90% FrzPSI",id:"FroPrSI",axis:"date"},{mid:"Tot_No_Sites_Frz",desc:"Tot_No_Sites_Frz",id:"FroPrSI",axis:"subject"},{mid:"First_Site_Initiated_Frz",desc:"First_Site_Initiated_Frz",id:"FroPrSI",axis:"date"},{mid:"SI_25_App",desc:"25% AppPSI",id:"AppPSI",axis:"date"},{mid:"SI_50_App",desc:"50% AppPSI",id:"AppPSI",axis:"date"},{mid:"SI_90_App",desc:"90% AppPSI",id:"AppPSI",axis:"date"},{mid:"SI_25_Base",desc:"25% BasPSI",id:"BasPSI",axis:"date"},{mid:"SI_50_Base",desc:"50% BasPSI",id:"BasPSI",axis:"date"},{mid:"SI_90_Base",desc:"90% BasPSI",id:"BasPSI",axis:"date"},{mid:"SI_25_Actual",desc:"25% ActSI",id:"ActSI",axis:"date"},{mid:"SI_50_Actual",desc:"50% ActSI",id:"ActSI",axis:"date"},{mid:"SI_90_Actual",desc:"90% ActSI",id:"ActSI",axis:"date"},{mid:"SI_25_Adj",desc:"25% AdjPSI",id:"AdjPSI",axis:"date"},{mid:"SI_50_Adj",desc:"50% AdjPSI",id:"AdjPSI",axis:"date"},{mid:"SI_90_Adj",desc:"90% AdjPSI",id:"AdjPSI",axis:"date"},{mid:"SI_25_Projected",desc:"25% CurPrSI",id:"CurPrSI",axis:"date"},{mid:"SI_50_Projected",desc:"50% CurPrSI",id:"CurPrSI",axis:"date"},{mid:"SI_90_Projected",desc:"90% CurPrSI",id:"CurPrSI",axis:"date"},{mid:"SS_App",desc:"Approved Plan Subjects Screened",id:"AppPSS",axis:"subject"},{mid:"SS_App",desc:"Approved Plan Last Subject Screened",id:"AppPLSS",axis:"date"},{mid:"SS_Base",desc:"Base Plan Subjects Screened ",id:"BasPSS",axis:"subject"},{mid:"SS_Base",desc:"Base Plan Last Subject Screened",id:"BasPLSS",axis:"date"},{mid:"SS_Act",desc:"ActSS",id:"ActSS",axis:"date"},{mid:"SS_Adj",desc:"Adjustment Plan Subjects Screened",id:"AdjPSS",axis:"subject"},{mid:"SS_Adj",desc:"Adjustment Plan Last Subject Screened",id:"AdjPSS",axis:"date"},{mid:"SS_CurPr",desc:"Current Projection Last Subject Screened ",id:"CurPrSS",axis:"date"},{mid:"SR_App",desc:"Approved Plan Subjects Randomized ",id:"AppPSR",axis:"subject"},{mid:"SR_App",desc:"Approved Plan Last Subject Randomized",id:"AppPSR",axis:"date"},{mid:"SR_Base",desc:"Base Plan Subjects Randomized",id:"BasPSR",axis:"subject"},{mid:"SR_Base",desc:"Base Plan Last Subject Randomized ",id:"BasPSR",axis:"date"},{mid:"SR_Act",desc:"ActSR",id:"ActSR",axis:"date"},{mid:"SR_Adj",desc:"AdjPSR",id:"AdjPSR",axis:"subject"},{mid:"SR_Adj",desc:"AdjPSR",id:"AdjPSR",axis:"date"},{mid:"SR_CurPr",desc:"CurPrSR",id:"CurPrSR",axis:"date"},{mid:"SR_CurPr",desc:"CurPrSR",id:"CurPrSR",axis:"date"},{mid:"SS_UpPr",desc:"UpdPrSS",id:"UpdPrSS",axis:"date"},{mid:"SR_UpPr",desc:"UpdPrSR",id:"UpdPrSR",axis:"date"}],this.preferredCurves=[],this.subscriptions=new Array,this.subscriptions.push(this.planDetailsService.getPlanDetails().subscribe((function(e){if(e&&e.planProperties){var t=e.planProperties;c.planName=t.name?t.name:"",c.subscriptions.push(c.studySummaryService.getStudyName(t.studyKey).subscribe((function(e){c.studyId=e.id,c.studyName=e.name})))}}))),this.subscriptions.push(this.lgdServ.selectedLegend$.subscribe((function(e){c.preferredCurves=e})))}return Object.defineProperty(e.prototype,"studyKey",{get:function(){return this.userDataService.lastVisitedStudy.toString()},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){e.unsubscribe()}))},e.prototype.graphCopyDataFromGraph1=function(e){var t,n,l,a,i,r,o,s,u,d,c,p,h,m,g={},S={},f=[],v=[];try{for(var C=Ue.__values(e.curve),y=C.next();!y.done;y=C.next())if(this.checkLegendState((I=y.value).code))try{for(var R=(l=void 0,Ue.__values(I.series)),D=R.next();!D.done;D=R.next())-1===f.indexOf((M=D.value).name.toString())&&f.push(M.name.toString())}catch(j){l={error:j}}finally{try{D&&!D.done&&(a=R.return)&&a.call(R)}finally{if(l)throw l.error}}}catch(B){t={error:B}}finally{try{y&&!y.done&&(n=C.return)&&n.call(C)}finally{if(t)throw t.error}}f=f.slice().sort((function(e,t){var n=new Date(e).getTime(),l=new Date(t).getTime();return n>l?1:l>n?-1:0}));for(var P=0;P<f.length;P++){S={},g[f[P]]=P,S["Column Headers"]="",S.date=this.datePipe.transform(new Date(f[P]),"dd-MMM-yyyy");try{for(var b=(i=void 0,Ue.__values(e.curve)),E=b.next();!E.done;E=b.next())this.checkLegendState((I=E.value).code)&&(S[_=this.resourceService.getResource(I.code+"_copy")||I.code]="")}catch(W){i={error:W}}finally{try{E&&!E.done&&(r=b.return)&&r.call(b)}finally{if(i)throw i.error}}v.push(S)}try{for(var T=Ue.__values(e.curve),A=T.next();!A.done;A=T.next()){var I;if(this.checkLegendState((I=A.value).code)){var _=this.resourceService.getResource(I.code+"_copy")||I.code;try{for(var N=(u=void 0,Ue.__values(I.series)),O=N.next();!O.done;O=N.next()){var M,F=g[(M=O.value).name];F>-1&&(v[F][_]=M.value)}}catch(H){u={error:H}}finally{try{O&&!O.done&&(d=N.return)&&d.call(N)}finally{if(u)throw u.error}}}}}catch(Y){o={error:Y}}finally{try{A&&!A.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}0===f.length&&((S={})["Column Headers"]="",S.Curves="No data to display",v.push(S));var L={};if(e.milestone&&e.milestone.targetMileStone){try{for(var w=Ue.__values(e.milestone.targetMileStone),G=w.next();!G.done;G=w.next()){var k=G.value,V=(_=this.resourceService.getResource(k.description)?this.resourceService.getResource(k.description):k.description,"date"===k.axis?this.datePipe.transform(new Date(k.date),"dd-MMM-yyyy"):k.value);L[_]=V}}catch(q){c={error:q}}finally{try{G&&!G.done&&(p=w.return)&&p.call(w)}finally{if(c)throw c.error}}try{for(var x=Ue.__values(this.milestoneNames),K=x.next();!K.done;K=x.next()){var U=K.value;_=void 0,L[_=U.axis&&"subject"===U.axis?this.resourceService.getResource(U.mid+"_"+U.axis+"_copy")||U.desc:this.resourceService.getResource(U.mid+"_copy")||U.desc]=this.getMileStoneValue(e.milestone,U.mid,U.axis)}}catch(J){h={error:J}}finally{try{K&&!K.done&&(m=x.return)&&m.call(x)}finally{if(h)throw h.error}}}else L["No data to display"]=" ";return{curve:v,milestone:L}},e.prototype.getCopyDataFromGraph=function(e){var t,n,l,a,i,r,o,s,u,d,c=[],p=[];try{for(var h=Ue.__values(e.curve),m=h.next();!m.done;m=h.next()){var g=m.value;if(this.preferredCurves.indexOf(g.code)>-1)try{for(var S=(l=void 0,Ue.__values(g.series)),f=S.next();!f.done;f=S.next()){var v=f.value;-1===c.indexOf(v.name.toString())?c.push(v.name.toString()):console.log("duplicate date",v.name)}}catch(F){l={error:F}}finally{try{f&&!f.done&&(a=S.return)&&a.call(S)}finally{if(l)throw l.error}}}}catch(L){t={error:L}}finally{try{m&&!m.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}console.log(c.length),c=c.slice().sort((function(e,t){var n=new Date(e).getTime(),l=new Date(t).getTime();return n>l?1:l>n?-1:0}));for(var C=0;C<c.length;C++){var y;(y={"Column Headers":""}).date=this.datePipe.transform(new Date(c[C]),"dd-MMM-yyyy");try{for(var R=(i=void 0,Ue.__values(Object.values(Ql.a))),D=R.next();!D.done;D=R.next()){var P=D.value,b=this.resourceService.getResource(P+"_copy")||P;this.preferredCurves.indexOf(P)>-1&&(y[b]=this.getCurveValue(e.curve,P,c[C]))}}catch(w){i={error:w}}finally{try{D&&!D.done&&(r=R.return)&&r.call(R)}finally{if(i)throw i.error}}p.push(y)}0===c.length&&p.push(y={"Column Headers":"",Curves:"No data to display"});var E={};if(e.milestone&&e.milestone.targetMileStone){try{for(var T=Ue.__values(e.milestone.targetMileStone),A=T.next();!A.done;A=T.next()){var I=A.value,_=(b=this.resourceService.getResource(I.description)?this.resourceService.getResource(I.description):I.description,"date"===I.axis?this.datePipe.transform(new Date(I.date),"dd-MMM-yyyy"):I.value);E[b]=_}}catch(G){o={error:G}}finally{try{A&&!A.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}try{for(var N=Ue.__values(this.milestoneNames),O=N.next();!O.done;O=N.next()){var M=O.value;b=void 0,E[b=M.axis&&"subject"===M.axis?this.resourceService.getResource(M.mid+"_"+M.axis+"_copy")||M.desc:this.resourceService.getResource(M.mid+"_copy")||M.desc]=this.getMileStoneValue(e.milestone,M.mid,M.axis)}}catch(k){u={error:k}}finally{try{O&&!O.done&&(d=N.return)&&d.call(N)}finally{if(u)throw u.error}}}else E["No data to display"]=" ";return{curve:p,milestone:E}},e.prototype.getMileStoneValue=function(e,t,n){var l=e.markers.findIndex((function(e){return e.descriptionId===t}));if(-1===l)return"";var a=e.markers[l];return n&&"subject"===n?a.value:this.datePipe.transform(new Date(a.date),"dd-MMM-yyyy")},e.prototype.getCurveValue=function(e,t,n){var l=e.findIndex((function(e){return e.name===t||e.code===t}));if(-1===l)return"no data";var a=e[l];return-1===(l=a.series.findIndex((function(e){return n.toString()===e.name.toString()})))?"":a.series[l].value},e.prototype.execPCECommand=function(e,t,n,l,a,i){var r=this;if("ExportGraph"===e||"PrintGraph"===e){var o=$l.b(t).select(".ngx-charts").node();o&&this.appendCSS("\n                .ngx-charts {\n                  float: right;\n                  overflow: visible;\n                }\n                .ngx-charts .circle,\n                .ngx-charts .bar,\n                .ngx-charts .arc {\n                  cursor: pointer;\n                }\n                .ngx-charts .data-circle {\n                  stroke-width: 2px;\n                  stroke: #9e54b0;\n                  fill: white;\n                }\n                .ngx-charts .perc-text {\n                  font-size: 9px;\n                  font-weight: 700;\n                }\n                .ngx-charts .bar.active,\n                .ngx-charts .cell.active,\n                .ngx-charts .arc.active,\n                .ngx-charts .card.active,\n                .ngx-charts .bar:hover,\n                .ngx-charts .cell:hover,\n                .ngx-charts .arc:hover,\n                .ngx-charts .card:hover {\n                  opacity: 0.8;\n                  transition: opacity 100ms ease-in-out;\n                }\n                .ngx-charts .bar:focus,\n                .ngx-charts .cell:focus,\n                .ngx-charts .arc:focus,\n                .ngx-charts .card:focus {\n                  outline: none;\n                }\n                .ngx-charts g:focus {\n                  outline: none;\n                }\n                .ngx-charts g .line-series>path.line {\n                  stroke-width: 2px;\n                }\n                .ngx-charts .line-series.inactive,\n                .ngx-charts .line-series-range.inactive,\n                .ngx-charts .area-series.inactive {\n                  transition: opacity 100ms ease-in-out;\n                  opacity: 0.2;\n                }\n                .ngx-charts .line-highlight {\n                  display: none;\n                }\n                .ngx-charts .line-highlight.active {\n                  display: block;\n                }\n                .ngx-charts .area {\n                  opacity: 0.6;\n                }\n                .ngx-charts .circle:hover {\n                  cursor: pointer;\n                }\n                .ngx-charts .label {\n                  font-size: 12px;\n                  font-weight: normal;\n                }\n                .ngx-charts .tooltip-anchor {\n                  fill: #000;\n                }\n                .ngx-charts .gridline-path {\n                  stroke: #ddd;\n                  stroke-width: 1;\n                  fill: none;\n                }\n                .ngx-charts .grid-panel rect {\n                  fill: none;\n                }\n                .ngx-charts .grid-panel.odd rect {\n                  fill: rgba(0, 0, 0, 0.05);\n                }\n                .areaGenerator {\n                  opacity: 0.35;\n                }\n                text {\n                  font-family: sans-serif;\n                  font-size: 10px !important;\n                  fill: grey;\n                }\n              ",o);for(var s=t.getElementsByTagName("text"),u=0;u<s.length;u++)s[u].style.fontSize="9px"}"CopyGraph"===e&&(a=this.graphCopyDataFromGraph1(a),console.log(a)),"NA"===i?i="":i+=" Chart";var d=this.getGraphHeaderData(i);console.log("PCE",d),this.pceService.execPCECommand({action:e,header:d,domElement:t,metaData:a},n,l).subscribe((function(e){if(console.log("Promise end "),t.getElementsByTagName("svg")&&t.getElementsByTagName("svg")[0]){var n=t.getElementsByTagName("svg")[0].getElementsByTagName("style")[0];n&&n.parentNode&&r.renderer.removeChild(n.parentNode,n)}"CopyGraph"===e.action&&(r.copyGraphString=e.copyString)}))},e.prototype.getCSSStyles=function(e){var t=[];if(t.push("#"+e.id),console.log("svgNode .classList",e.classList),console.log("Length",e.classList.length),e.classList&&e.classList.length)for(var n=0;n<e.classList.length;n++)this.contains("."+e.classList[n],t)||t.push("."+e.classList[n]);else e.classList&&(this.contains("."+e.classList,t)||t.push("."+e.classList));var l=e.getElementsByTagName("*");if(console.log("length",l.length),console.log(t),l&&l.length)for(var a=0;a<l.length;a++){var i=l[a].id;this.contains("#"+i,t)||t.push("#"+i);var r=l[a].classList;if(r&&r.length)for(n=0;n<r.length;n++)this.contains("."+r[n],t)||t.push("."+r[n]);else r&&(this.contains("."+r,t)||t.push("."+r))}var o="";for(console.log("document.styleSheets",document.styleSheets),console.log("document.styleSheets length",document.styleSheets.length),a=0;a<document.styleSheets.length;a++){var s=document.styleSheets[a];try{if(!s.cssRules)continue}catch(c){if("SecurityError"!==c.name)throw c;continue}var u=s.cssRules;if(u&&u.length)for(var d=0;d<u.length;d++)u[d].selectorText&&u[d].cssText&&this.includes(u[d].selectorText,t)&&(o+=u[d].cssText)}return o},e.prototype.contains=function(e,t){return-1!==t.indexOf(e)},e.prototype.includes=function(e,t){if(void 0!==e)for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0},e.prototype.appendCSS=function(e,t){var n=document.createElement("style");n.setAttribute("type","text/css"),console.log("cssText",e),n.innerHTML=e,console.log(t.hasChildNodes()),console.log(t.firstChild);var l=t.hasChildNodes()?t.firstChild:null;console.log("refNode",l),l&&t.insertBefore(n,l)},Object.defineProperty(e.prototype,"headerResource",{get:function(){return this.pceHeaderResourceService.PCEHeaderResource},enumerable:!0,configurable:!0}),e.prototype.getGraphHeaderData=function(e){var t;console.log("this.studyKey",this.studyKey);var n=this.userDataService.getUserName(),l=this.headerResource;return(t={})[l.userName]=n,t[l.date]=this.datePipe.transform(Date.now(),"dd-MMM-yyyy"),t[l.tabName]="New Plans",t[l.studyId]=this.studyId,t[l.studyName]=this.studyName,t[l.planName]=this.planName,t[l.individualPlanTabName]="Countries",t[l.geography]=e,t[l.lastSourceDataUpdate]=this.datePipe.transform(Date.now(),"dd-MMM-yyyy"),t},e.prototype.checkLegendState=function(e){for(var t=0;t<this.preferredCurves.length;t++)if(e&&e.indexOf(this.preferredCurves[t])>-1)return!0;return!1},e}(),ta=n("biPp"),na=n("HswR"),la=n("IMYO"),aa=function(){function e(e,t,n,l,a,i,r,o,s,u,d,c){var p=this;this.planDetailsService=e,this.route=n,this.el=l,this.renderer=a,this.manageContriesPceService=i,this.studySummaryService=r,this.geographyService=o,this.usrDtSrv=s,this.lgdServ=u,this.planService=d,this.applicationContextService=c,this.isWWExpand=!1,this.isCountryExpand=!1,this.isRegionExpand=!1,this.refreshGraph=!1,this.componentSliderCount=0,this.isSliding=!1,this.isExpColsp=!1,this.expColapsOption={expand:"Expand",collapse:"Collapse"},this.expandGrid=!1,this.cueCardVisible=!1,this.planType={},this.isCohortPlan="N",this.planDetails=null,this.selectedRowscohortInfo=null,this.selectedRowsGeoKey=null,this.groups=[],this.isDependentCohortPlan=!1,this.depCohCueCardData=[],this.depCohCueCardColumnDefinition=[],this.chartLegendPreference=[],this.axes={},this.localeAppResourcesService=t,this.groups=[{id:"SiteInit",name:this.localeAppResourcesService.getResource("LGroup1"),value:[{name:this.localeAppResourcesService.getResource("LGApproved"),value:"AppPSI",selected:!1},{name:this.localeAppResourcesService.getResource("LGBase"),value:"BasPSI",selected:!1},{name:this.localeAppResourcesService.getResource("LGActual"),value:"ActSI",selected:!1},{name:this.localeAppResourcesService.getResource("LGAdjustment"),value:"AdjPSI",selected:!1},{name:this.localeAppResourcesService.getResource("LGProjection"),value:"CurPrSI",selected:!1},{name:this.localeAppResourcesService.getResource("LGUpdProjection"),value:"UpdPrSI",selected:!1,dependOn:"ActSI"},{name:this.localeAppResourcesService.getResource("LGFrzProjection"),value:"FroPrSI",selected:!1}]},{id:"Scr",name:this.localeAppResourcesService.getResource("LGroup2"),value:[{name:this.localeAppResourcesService.getResource("LGApproved"),value:"AppPSS",selected:!1},{name:this.localeAppResourcesService.getResource("LGBase"),value:"BasPSS",selected:!1},{name:this.localeAppResourcesService.getResource("LGActual"),value:"ActSS",selected:!1},{name:this.localeAppResourcesService.getResource("LGAdjustment"),value:"AdjPSS",selected:!1},{name:this.localeAppResourcesService.getResource("LGProjection"),value:"CurPrSS",selected:!1},{name:this.localeAppResourcesService.getResource("LGUpdProjection"),value:"UpdPrSS",selected:!1,dependOn:"ActSS"},{name:this.localeAppResourcesService.getResource("LGFrzProjection"),value:"FroPrSS",selected:!1},{name:"Screen Failures",value:"ActSF",selected:!1}]},{id:"Rnd",name:this.localeAppResourcesService.getResource("LGroup3"),value:[{name:this.localeAppResourcesService.getResource("LGApproved"),value:"AppPSR",selected:!1},{name:this.localeAppResourcesService.getResource("LGBase"),value:"BasPSR",selected:!1},{name:this.localeAppResourcesService.getResource("LGActual"),value:"ActPSR",selected:!1},{name:this.localeAppResourcesService.getResource("LGAdjustment"),value:"AdjPSR",selected:!1},{name:this.localeAppResourcesService.getResource("LGProjection"),value:"CurPrSR",selected:!1},{name:this.localeAppResourcesService.getResource("LGUpdProjection"),value:"UpdPrSR",selected:!1,dependOn:"ActPSR"},{name:this.localeAppResourcesService.getResource("LGFrzProjection"),value:"FroPrSR",selected:!1},{name:this.localeAppResourcesService.getResource("LGDropout"),value:"ActDO",selected:!1},{name:this.localeAppResourcesService.getResource("LGEP"),value:"EP",selected:!1}]},{id:"conf",name:this.localeAppResourcesService.getResource("LGroup4"),value:[{name:this.localeAppResourcesService.getResource("LGApproved"),value:"CBApp",selected:!1},{name:this.localeAppResourcesService.getResource("LGBase"),value:"CBBas",selected:!1},{name:this.localeAppResourcesService.getResource("LGAdjustment"),value:"CBAdj",selected:!1},{name:this.localeAppResourcesService.getResource("LGProjection"),value:"CBCurPr",selected:!1}]},{id:"lines",name:this.localeAppResourcesService.getResource("LGroup5"),multimode:!0,value:[{name:this.localeAppResourcesService.getResource("LGApproved"),value:"App",selected:!1,multimode:!0},{name:this.localeAppResourcesService.getResource("LGBase"),value:"Bas",selected:!1,multimode:!0},{name:this.localeAppResourcesService.getResource("LGActual"),value:"Act",selected:!1,multimode:!0},{name:this.localeAppResourcesService.getResource("LGAdjustment"),value:"Adj",selected:!1,multimode:!0},{name:this.localeAppResourcesService.getResource("LGProjection"),value:"CurPr",selected:!1,multimode:!0},{name:this.localeAppResourcesService.getResource("LGUpdProjection"),value:"UpdPr",multimode:!0},{name:this.localeAppResourcesService.getResource("LGFrzProjection"),value:"FroPr",selected:!1,multimode:!0}]},{id:"tgt",name:this.localeAppResourcesService.getResource("LGroup6"),value:[{name:this.localeAppResourcesService.getResource("LGTargets"),value:"Tar",selected:!1},{name:this.localeAppResourcesService.getResource("LGMilestones"),value:"Mil",selected:!1},{name:this.localeAppResourcesService.getResource("LGExtProjection"),value:"Ext",selected:!1},{name:this.localeAppResourcesService.getResource("LGToday"),value:"today",selected:!1},{name:this.localeAppResourcesService.getResource("LGAheadBehind"),value:"aheadBehind",selected:!1}]}],this.axes={subjects:this.localeAppResourcesService.getResource("Subjects"),sites:this.localeAppResourcesService.getResource("Sites")},this.subscriptions=new Array,this.subscriptions.push(this.planDetailsService.allGraphData$.subscribe((function(e){e&&(p.chartData=e.curves,p.mileStonesData=e.markers)}))),this.subscriptions.push(this.planDetailsService.allGraphDataRegion$.subscribe((function(e){e&&(p.chartDataRegion=e.curves,p.mileStonesDataRegion=e.markers)}))),this.subscriptions.push(this.planDetailsService.allGraphDataWW$.subscribe((function(e){e&&(p.chartLegendPreference=p.planDetailsService.getChartLegendPreference(),p.chartDataWW=e.curves,p.mileStonesDataWW=e.markers)}))),this.subscriptions.push(this.planDetailsService.curveData$.subscribe((function(e){p.chartData=e}))),this.subscriptions.push(this.planDetailsService.curveDataRegion$.subscribe((function(e){p.chartDataRegion=e}))),this.subscriptions.push(this.planDetailsService.curveDataWW$.subscribe((function(e){p.chartDataWW=e}))),this.subscriptions.push(this.planDetailsService.dynCurveData$.subscribe((function(e){e&&p.mileStonesData&&p.mileStonesData.markers&&(p.mileStonesData.markers=p.filteredArrayFromArray(p.mileStonesData.markers,p.dynMilestoneData,"id"),p.dynMilestoneData=e.milestone&&e.milestone.markers?e.milestone.markers:[],p.mileStonesData.markers=Ue.__spread(p.mileStonesData.markers,p.dynMilestoneData)),e&&e.curve instanceof Array&&(p.chartData=p.filteredArrayFromArray(p.chartData,p.dynChartData,"name"),p.dynChartData=e.curve,p.chartData.length>0&&p.dynChartData.length>0&&(p.chartData=Ue.__spread(p.chartData,p.dynChartData)))}))),this.subscriptions.push(this.planDetailsService.dynCurveDataRegion$.subscribe((function(e){e&&p.mileStonesDataRegion&&p.mileStonesDataRegion.markers&&(p.mileStonesDataRegion.markers=p.filteredArrayFromArray(p.mileStonesDataRegion.markers,p.dynMilestoneDataRegion,"id"),p.dynMilestoneDataRegion=e.milestone&&e.milestone.markers?e.milestone.markers:[],p.mileStonesDataRegion.markers=Ue.__spread(p.mileStonesDataRegion.markers,p.dynMilestoneDataRegion)),e&&e.curve instanceof Array&&(p.chartDataRegion=p.filteredArrayFromArray(p.chartDataRegion,p.dynChartDataRegion,"name"),p.dynChartDataRegion=e.curve,p.chartDataRegion.length>0&&p.dynChartDataRegion.length>0&&(p.chartDataRegion=Ue.__spread(p.chartDataRegion,p.dynChartDataRegion)))}))),this.subscriptions.push(this.planDetailsService.dynCurveDataWW$.subscribe((function(e){e&&p.mileStonesDataWW&&p.mileStonesDataWW.markers&&(p.mileStonesDataWW.markers=p.filteredArrayFromArray(p.mileStonesDataWW.markers,p.dynMilestoneDataWW,"id"),p.dynMilestoneDataWW=e.milestone&&e.milestone.markers?e.milestone.markers:[],p.mileStonesDataWW.markers=Ue.__spread(p.mileStonesDataWW.markers,p.dynMilestoneDataWW)),e&&e.curve instanceof Array&&(p.chartDataWW=p.filteredArrayFromArray(p.chartDataWW,p.dynChartDataWW,"name"),p.dynChartDataWW=e.curve,p.chartDataWW.length>0&&p.dynChartDataWW.length>0&&(p.chartDataWW=Ue.__spread(p.chartDataWW,p.dynChartDataWW)))}))),this.subscriptions.push(this.planDetailsService.milestonesData$.subscribe((function(e){p.mileStonesData=e}))),this.subscriptions.push(this.planDetailsService.milestonesDataRegion$.subscribe((function(e){p.mileStonesDataRegion=e}))),this.subscriptions.push(this.planDetailsService.milestonesDataWW$.subscribe((function(e){p.mileStonesDataWW=e}))),this.subscriptions.push(this.planDetailsService.getPlanDetails().subscribe((function(e){if(e&&e.planProperties){var t=e.planProperties;p.planType.type=t.isPlan?t.isPrevApproved?"PreviouslyApproved":t.isPlanApproved?"Approved":"Base":"Adjustment",p.planType.key=t.planKey,e.planProperties.isCohortPlan&&(p.isCohortPlan=e.planProperties.isCohortPlan),p.extractDependentCohortData(e)}p.planDetails=e}))),this.subscriptions.push(this.planDetailsService.selectedCountrySubject$.subscribe((function(e){var t=p.planDetailsService.plan,n=p.planDetailsService.studyKey,l="";if(e){var a=null,i=null;p.selectedRowsGeoKey=null;var r=-1,o={geoKey:e.planParamsDetails.regionKey,geoLevel:"Region"},s=p.geographyService.getRegionByCountry({key:e.geographyKey});p.regionChartTitle=s?s.name:"";var u={geoKey:e.geographyKey,geoLevel:e.geographyLevel};if("Y"===p.isCohortPlan)if(p.studySummaryService&&void 0===p.studySummaryService.cohortList&&(p.studySummaryService.cohortList=[]),e.isCohortCountry&&p.studySummaryService.cohortList&&p.studySummaryService.cohortList.filter){var d=p.studySummaryService.cohortList.filter((function(t){return t.cohortKey===e.cohortKey&&"Unmapped"!==t.cohortID}));d&&d.length>0&&(r=d[0].studyCohortKey),a={key:e.cohortKey,name:e.cohortName,studyCohortKey:r},l=" ( "+e.cohortName+" )",i={parameterKey:e.cohortKey,parameterType:1}}else a={key:-1,name:"All Cohorts",studyCohortKey:r},l=" ( All Cohorts )",i={parameterKey:e.geographyKey,parameterType:0};p.selectedRowscohortInfo=a,p.selectedRowsGeoKey=u;var c="";p.planDetails&&p.planDetails.planProperties&&p.planDetails.planProperties.version&&(c=p.planDetails.planProperties.version),p.subscriptions.push(p.planDetailsService.getAllGraphDataWW(n,t,u,a,p.planDetailsService.isDynamicProjectionChecked,c).subscribe()),p.subscriptions.push(p.planDetailsService.getAllGraphDataRegion(n,t,o,a,p.planDetailsService.isDynamicProjectionChecked,c).subscribe()),p.subscriptions.push(p.planDetailsService.getAllGraphData(n,t,u,a,p.planDetailsService.isDynamicProjectionChecked,c).subscribe()),p.cntryChartTitle=e.geographyName+l,p.wwChartTitle=p.localeAppResourcesService.getResource("WWChartTitle"),p.wwChartTitle=p.wwChartTitle+l,p.regionChartTitle=p.regionChartTitle+l,p.planDetailsService.isDynamicProjectionChecked?p.subscriptions.push(p.planDetailsService.getDynamicPrData(p.planDetailsService.isDynamicProjectionChecked,n,Number(t.key),u,c,a,!0).pipe(Object(na.a)((function(){return p.planDetailsService.getDynamicPrDataRefCard(p.planDetailsService.isDynamicProjectionChecked,n,Number(t.key),u,c,a,!0)}),Object(la.a)((function(e){return console.log("Invalid Input Error Catched"),e})))).subscribe((function(t){p.getStudyAndActuals(e,i)}),(function(t){p.getStudyAndActuals(e,i)}))):p.getStudyAndActuals(e,i)}else p.chartData=[],p.chartDataRegion=[],p.cntryChartTitle=p.localeAppResourcesService.getResource("NoCountryPresent"),p.regionChartTitle=p.localeAppResourcesService.getResource("NoCountryPresent"),p.getStudyAndActuals(null,null)}))),this.subscriptions.push(this.planDetailsService.expandCollapseCountriesGrid.subscribe((function(e){var t=p.gridContainer&&p.gridContainer.nativeElement;e&&"expand"===e.toString().toLowerCase()?(p.expandGrid=!0,p.planDetailsService.isExpand=!0,t&&p.renderer.setStyle(t,"margin-top",b.J.top)):(p.expandGrid=!1,t&&(p.planDetailsService.isExpand=!1,p.renderer.setStyle(t,"margin-top",b.J.topnone)))}))),this.subscriptions.push(this.lgdServ.LegendPref$.subscribe((function(e){e&&(p.chartLegendPreference&&0===p.chartLegendPreference.length&&(p.planDetailsService.chartLegendPreferenceArr=e,p.usrDtSrv.chartLegendPreferenceArr=e),p.subscriptions.push(p.usrDtSrv.updateChartLegendPreference(e,p.planDetailsService.getChartLegendPreferenceObj()).subscribe()))}))),this.color=this.planDetailsService.curveColors,this.cntryChartTitle=this.localeAppResourcesService.getResource("NoCountryPresent"),this.regionChartTitle=this.localeAppResourcesService.getResource("NoCountryPresent"),this.wwChartTitle=this.localeAppResourcesService.getResource("WWChartTitle"),this.graphMenuOption=this.planDetailsService.getGraphMenuOptions(),this.contextMenuClass="graph-header-context-menu",this.slideAtATime=1}return e.prototype.filteredArrayFromArray=function(e,t,n){if(t&&0===t.length)return e;if(t){for(var l=function(l){e=e.filter((function(e){return e[n]!==t[l][n]}))},a=0;a<t.length;a++)l(a);return e}return e},e.prototype.ngOnInit=function(){var e=this;this.expandGrid=!1,this.planDetailsService.isExpand=!1,this.chartColors=[],this.planDetailsService.setSaveDisability(!0),this.planDetailsService.setReadOnly(!0),this.color.forEach((function(t){var n={};n.name=e.localeAppResourcesService.getResource(t.name)?e.localeAppResourcesService.getResource(t.name):t.name,n.value=t.value,e.chartColors.push(n)})),this.expColapsOption.expand=this.localeAppResourcesService.getResource("expandGraph")?this.localeAppResourcesService.getResource("expandGraph"):this.expColapsOption.expand,this.expColapsOption.collapse=this.localeAppResourcesService.getResource("collapseGraph")?this.localeAppResourcesService.getResource("collapseGraph"):this.expColapsOption.collapse,this.subscriptions.push(this.planDetailsService.planKeyChanged$.subscribe((function(t){s.c.isDefined(t)&&e.route.navigate(["/plans","plandetails",t,"countries"])}))),this.setLinksEnability(),this.planDetailsService.setFormStatus(!1),this.depCohCueCardColumnDefinition=[{key:"label",label:" ",class:"header-column"},{key:"FSS",label:this.localeAppResourcesService.getResource("DependentCohortCardFSSColumnLabel"),class:""},{key:"FSR",label:this.localeAppResourcesService.getResource("DependentCohortCardFSRColumnLabel"),class:""},{key:"LSS",label:this.localeAppResourcesService.getResource("DependentCohortCardLSSColumnLabel"),class:""},{key:"LSR",label:this.localeAppResourcesService.getResource("DependentCohortCardLSRColumnLabel"),class:""}],this.isMCEVisible=this.applicationContextService.isMCEVisible},e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){e.unsubscribe()}))},e.prototype.toggle=function(){var e=document.getElementsByClassName("f-card")[0];this.cueCardVisible=!this.cueCardVisible,e&&this.cueCardVisible?e.classList.add("flipped"):e&&!this.cueCardVisible&&e.classList.remove("flipped")},e.prototype.getStudyAndActuals=function(e,t){var n=this;return this.planDetailsService.getStudySourceAndActuals(e,t).subscribe((function(e){n.cueCardDetails=e?n.planDetailsService.referanceCardTransform(e,["FPA"]):[]}))},e.prototype.setLinksEnability=function(){this.planDetailsService.checkModulePrivilege(ta.i)},e.prototype.chartKMenuClicked=function(e,t){var n,l,a=this;switch("ww"===t?this.carousel.nativeElement.getElementsByClassName("ww")&&this.carousel.nativeElement.getElementsByClassName("ww")[0]&&(n=this.carousel.nativeElement.getElementsByClassName("ww")[0],l=this.wwChartTitle):"region"===t?this.carousel.nativeElement.getElementsByClassName("region")&&this.carousel.nativeElement.getElementsByClassName("region")[0]&&(n=this.carousel.nativeElement.getElementsByClassName("region")[0],l=this.regionChartTitle):this.carousel.nativeElement.getElementsByClassName("con")&&this.carousel.nativeElement.getElementsByClassName("con")[0]&&(n=this.carousel.nativeElement.getElementsByClassName("con")[0],l=this.cntryChartTitle),e){case this.localeAppResourcesService.getResource("Print"):this.manageContriesPceService.execPCECommand("PrintGraph",n,null,null,null,l);break;case this.localeAppResourcesService.getResource("Export"):this.manageContriesPceService.execPCECommand("ExportGraph",n,1200,"export",null,l);break;case this.localeAppResourcesService.getResource("Copy"):var i={milestone:"ww"===t?this.mileStonesDataWW:"region"===t?this.mileStonesDataRegion:this.mileStonesData,curve:"ww"===t?this.chartDataWW:"region"===t?this.chartDataRegion:this.chartData};this.copyGraphString?this.setTextToCopy(this.copyGraphString):this.manageContriesPceService.execPCECommand("CopyGraph",n,null,"copy",i,l);break;case this.localeAppResourcesService.getResource("expandGraph"):case this.localeAppResourcesService.getResource("collapseGraph"):this.isExpColsp=!0,this.carousel.nativeElement.classList.contains("animateMe")&&this.renderer.removeClass(this.carousel.nativeElement,"animateMe"),"ww"===t?(this.isWWExpand=!this.isWWExpand,this.graphMenuOption[0].name=this.isWWExpand?this.expColapsOption.collapse:this.expColapsOption.expand):"con"===t?(this.isCountryExpand=!this.isCountryExpand,this.graphMenuOption[0].name=this.isCountryExpand?this.expColapsOption.collapse:this.expColapsOption.expand):(this.isRegionExpand=!this.isRegionExpand,this.graphMenuOption[0].name=this.isRegionExpand?this.expColapsOption.collapse:this.expColapsOption.expand),window.setTimeout((function(){e!==a.localeAppResourcesService.getResource("expandGraph")&&e!==a.localeAppResourcesService.getResource("collapseGraph")||(a.refreshGraph=!a.refreshGraph,a.isExpColsp=!1)}),200)}},e.prototype.plusSlides=function(e){this.isSliding||(this.isSliding=!0,e>0?this.slideRight(e):this.slideLeft(e))},e.prototype.slideRight=function(e){if(e>0){this.transitionHandler=this.onTransEnd.bind(this,e),this.slideAtATime=e>1?e:this.carousel.nativeElement.children[2].classList.contains("dependent-cohort-cue-card")?2:1;var t=50*this.slideAtATime;this.carousel.nativeElement.children[0].classList.contains("dependent-cohort-cue-card")?t*=-2:t*=-1,this.componentSliderCount=this.componentSliderCount+e,this.carousel.nativeElement.classList.contains("animateMe")||this.renderer.addClass(this.carousel.nativeElement,"animateMe"),this.renderer.setStyle(this.carousel.nativeElement,"margin-left",t+"%"),this.carousel.nativeElement.addEventListener("transitionend",this.transitionHandler,!0)}},e.prototype.slideLeft=function(e){var t=this;this.carousel.nativeElement.classList.contains("animateMe")&&this.renderer.removeClass(this.carousel.nativeElement,"animateMe"),this.transitionHandler=this.onTransEnd.bind(this,e),this.slideAtATime=this.carousel.nativeElement.children[0].classList.contains("dependent-cohort-cue-card")?2:1;var n=50*this.slideAtATime;n*=-1;for(var l=0;l<this.slideAtATime;l++)this.renderer.insertBefore(this.carousel.nativeElement,this.carousel.nativeElement.lastElementChild,this.carousel.nativeElement.children[0]);this.renderer.setStyle(this.carousel.nativeElement,"margin-left",n+"%"),this.carousel.nativeElement.addEventListener("transitionend",this.transitionHandler,!0),window.setTimeout((function(){t.carousel.nativeElement.classList.contains("animateMe")||t.renderer.addClass(t.carousel.nativeElement,"animateMe"),t.renderer.setStyle(t.carousel.nativeElement,"margin-left","0")}),0)},e.prototype.onTransEnd=function(e){if(this.isSliding=!1,this.carousel.nativeElement.removeEventListener("transitionend",this.transitionHandler,!0),e>0)for(var t=0;t<this.slideAtATime;t++)this.renderer.appendChild(this.carousel.nativeElement,this.carousel.nativeElement.children[0]);this.carousel.nativeElement.classList.contains("animateMe")&&this.renderer.removeClass(this.carousel.nativeElement,"animateMe"),e>0&&this.renderer.setStyle(this.carousel.nativeElement,"margin-left","0")},e.prototype.moveTo=function(e){for(var t=this.carousel.nativeElement.children,n=-1,l=0;l<t.length;l++)if(t[l].classList.contains(e)){n=l;break}n>=0&&this.slideRight(n)},e.prototype.extractDependentCohortData=function(e){this.isDependentCohortPlan=e.planProperties.isDepCohortPlan===b.xc,this.isDependentCohortPlan&&(this.depCohCueCardData=this.extractAndMapWWPlannedData(e))},e.prototype.extractAndMapWWPlannedData=function(e){var t=null,n=this.localeAppResourcesService.getResource("DependentCohortCardEmptyCellValue");return e&&e.geoList&&e.geoList.geography&&e.geoList.geography.reduce((function(e,t){return t.geographyLevel===Dn.a.WW&&e.push({label:t.cohortName||t.geographyName,FSS:{planned:s.c.formatDateStrict(t.planParamsDetails.PFSS,b.y.MONTH_DATE_FORMAT,n),calculated:n},FSR:{planned:s.c.formatDateStrict(t.planParamsDetails.PFSR,b.y.MONTH_DATE_FORMAT,n),calculated:n},LSS:{planned:s.c.formatDateStrict(t.planParamsDetails.PLSS,b.y.MONTH_DATE_FORMAT,n),calculated:n},LSR:{planned:s.c.formatDateStrict(t.planParamsDetails.PLSR,b.y.MONTH_DATE_FORMAT,n),calculated:n}}),e}),t=[]),t},e.prototype.mergeAndMapWWCalculatedData=function(e){e?this.depCohCueCardData.forEach((function(t){var n=e.find((function(e){return e.label===t.label}));n&&Object.keys(t).forEach((function(e){"object"==typeof t[e]&&t[e].hasOwnProperty("calculated")&&(t[e].calculated=n[e].calculated)}))})):this.extractDependentCohortData(this.planDetails)},e.prototype.setGridVisibility=function(e){this.applicationContextService.isMCEVisible=e,this.isMCEVisible=this.applicationContextService.isMCEVisible},e.prototype.setTextToCopy=function(e){var t,n=document.createElement("textarea");n.style.position="fixed",n.style.top="0px",n.style.left="-99999px",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n),n.focus(),n.select(),n.setSelectionRange(0,n.value.length);try{if(t=document.execCommand("copy"),console.warn("copy success status2:",t),!t)throw t;document.body.removeChild(n),n=null}catch(l){}},e.prototype.contextKebebClick=function(e,t){var n,l;"ww"===t?this.carousel.nativeElement.getElementsByClassName("ww")&&this.carousel.nativeElement.getElementsByClassName("ww")[0]&&(n=this.carousel.nativeElement.getElementsByClassName("ww")[0],l=this.wwChartTitle):"region"===t?this.carousel.nativeElement.getElementsByClassName("region")&&this.carousel.nativeElement.getElementsByClassName("region")[0]&&(n=this.carousel.nativeElement.getElementsByClassName("region")[0],l=this.regionChartTitle):this.carousel.nativeElement.getElementsByClassName("con")&&this.carousel.nativeElement.getElementsByClassName("con")[0]&&(n=this.carousel.nativeElement.getElementsByClassName("con")[0],l=this.cntryChartTitle),this.manageContriesPceService.execPCECommand("CopyGraph",n,null,"copy",{milestone:"ww"===t?this.mileStonesDataWW:"region"===t?this.mileStonesDataRegion:this.mileStonesData,curve:"ww"===t?this.chartDataWW:"region"===t?this.chartDataRegion:this.chartData},l),this.copyGraphString=this.manageContriesPceService.copyGraphString},e}(),ia=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ra(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-so-plan-chart-legend",[],null,null,null,r.n,r.c)),l["ɵdid"](1,573440,null,0,o.j,[o.l],{chartData:[0,"chartData"],color:[1,"color"],groups:[2,"groups"],profile:[3,"profile"],preference:[4,"preference"]},null)],(function(e,t){var n=t.component;e(t,1,0,n.chartDataWW,n.color,n.groups,n.planType,n.chartLegendPreference)}),null)}function oa(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","card cue dependent-cohort-cue-card ctos-card"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{hideMe:0}),(e()(),l["ɵeld"](4,0,null,null,1,"ctos-reference-card",[],null,null,null,Pt,mt)),l["ɵdid"](5,114688,null,0,ht,[],{columnDefinition:[0,"columnDefinition"],dataSource:[1,"dataSource"]},null)],(function(e,t){var n=t.component,l=e(t,3,0,n.isWWExpand||n.isCountryExpand||n.isRegionExpand);e(t,2,0,"card cue dependent-cohort-cue-card ctos-card",l),e(t,5,0,n.depCohCueCardColumnDefinition,n.depCohCueCardData)}),null)}function sa(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"a",[["class","prev"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.plusSlides(-1)&&l),l}),null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{disable:0}),(e()(),l["ɵeld"](4,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" keyboard_arrow_left "]))],(function(e,t){var n=e(t,3,0,t.component.isSliding);e(t,2,0,"prev",n)}),null)}function ua(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"a",[["class","next"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.plusSlides(1)&&l),l}),null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{disable:0}),(e()(),l["ɵeld"](4,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" keyboard_arrow_right "]))],(function(e,t){var n=e(t,3,0,t.component.isSliding);e(t,2,0,"next",n)}),null)}function da(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,84,"div",[["class","plan-chart-component-wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,83,"div",[["class","plan-chart-component-wrapper-content"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,[[1,0],["carousel",1]],null,78,"div",[["class","plan-chart-component-wrapper-inner"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](4,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](5,{"component-expand":0,"width-as-per-dependent-cohort-card":1}),(e()(),l["ɵeld"](6,0,null,null,21,"div",[["class","card ww"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](8,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](9,{"card-expanded":0,hideMe:1,"width-as-per-dependent-cohort-card":2}),(e()(),l["ɵeld"](10,0,null,null,11,"div",[["class","card-title-bar"]],null,null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,2,"div",[["class","card-title"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),l["ɵted"](13,null,["",""])),(e()(),l["ɵeld"](14,0,null,null,7,"ctos-context-menu",[],null,[[null,"fireEvent"]],(function(e,t,n){var l=!0;return"fireEvent"===t&&(l=!1!==e.component.chartKMenuClicked(n,"ww")&&l),l}),f.q,f.i)),l["ɵdid"](15,114688,[["menu",4]],0,s.nb,[],{contextMenuClass:[0,"contextMenuClass"],xPosition:[1,"xPosition"],yPosition:[2,"yPosition"],options:[3,"options"]},{fireEvent:"fireEvent"}),(e()(),l["ɵeld"](16,16777216,null,0,5,"button",[["aria-haspopup","true"],["class","mat-menu-trigger"],["mat-icon-button",""]],[[1,"aria-expanded",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var a=!0;return"mousedown"===t&&(a=!1!==l["ɵnov"](e,17)._handleMousedown(n)&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,17)._handleKeydown(n)&&a),"click"===t&&(a=!1!==l["ɵnov"](e,17)._handleClick(n)&&a),a}),z.b,z.a)),l["ɵdid"](17,1196032,null,0,Z.g,[c.c,l.ElementRef,l.ViewContainerRef,Z.c,[2,Z.d],[8,null],[2,g.b],m.h],{menu:[0,"menu"]},null),l["ɵdid"](18,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵeld"](19,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.contextKebebClick(n,"ww")&&l),l}),ee.b,ee.a)),l["ɵdid"](20,9158656,null,0,te.b,[l.ElementRef,te.d,[8,null],[2,te.a],[2,l.ErrorHandler]],null,null),(e()(),l["ɵted"](-1,0,["more_vert"])),(e()(),l["ɵeld"](22,0,null,null,5,"div",[["class","ctos-so-plan-chart-holder"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](24,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](25,{hideMe:0}),(e()(),l["ɵeld"](26,0,null,null,1,"ctos-so-plan-chart",[],null,[[null,"mouseleave"]],(function(e,t,n){var a=!0;return"mouseleave"===t&&(a=!1!==l["ɵnov"](e,27).hideCircles()&&a),a}),r.m,r.b)),l["ɵdid"](27,4898816,null,0,o.i,[l.ElementRef,o.l,l.Renderer2],{combinedData:[0,"combinedData"],centerColor:[1,"centerColor"],milestoneData:[2,"milestoneData"],refresh:[3,"refresh"],type:[4,"type"],axisLabels:[5,"axisLabels"]},null),(e()(),l["ɵeld"](28,0,null,null,21,"div",[["class","card con"],["style","display:inline-block"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](30,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](31,{"card-expanded":0,hideMe:1,"width-as-per-dependent-cohort-card":2}),(e()(),l["ɵeld"](32,0,null,null,11,"div",[["class","card-title-bar"]],null,null,null,null,null)),(e()(),l["ɵeld"](33,0,null,null,2,"div",[["class","card-title"]],null,null,null,null,null)),(e()(),l["ɵeld"](34,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),l["ɵted"](35,null,["",""])),(e()(),l["ɵeld"](36,0,null,null,7,"ctos-context-menu",[],null,[[null,"fireEvent"]],(function(e,t,n){var l=!0;return"fireEvent"===t&&(l=!1!==e.component.chartKMenuClicked(n,"con")&&l),l}),f.q,f.i)),l["ɵdid"](37,114688,[["menu1",4]],0,s.nb,[],{contextMenuClass:[0,"contextMenuClass"],xPosition:[1,"xPosition"],yPosition:[2,"yPosition"],options:[3,"options"]},{fireEvent:"fireEvent"}),(e()(),l["ɵeld"](38,16777216,null,0,5,"button",[["aria-haspopup","true"],["class","mat-menu-trigger"],["mat-icon-button",""]],[[1,"aria-expanded",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var a=!0;return"mousedown"===t&&(a=!1!==l["ɵnov"](e,39)._handleMousedown(n)&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,39)._handleKeydown(n)&&a),"click"===t&&(a=!1!==l["ɵnov"](e,39)._handleClick(n)&&a),a}),z.b,z.a)),l["ɵdid"](39,1196032,null,0,Z.g,[c.c,l.ElementRef,l.ViewContainerRef,Z.c,[2,Z.d],[8,null],[2,g.b],m.h],{menu:[0,"menu"]},null),l["ɵdid"](40,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵeld"](41,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.contextKebebClick(n,"con")&&l),l}),ee.b,ee.a)),l["ɵdid"](42,9158656,null,0,te.b,[l.ElementRef,te.d,[8,null],[2,te.a],[2,l.ErrorHandler]],null,null),(e()(),l["ɵted"](-1,0,["more_vert"])),(e()(),l["ɵeld"](44,0,null,null,5,"div",[["class","ctos-so-plan-chart-holder"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](46,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](47,{hideMe:0}),(e()(),l["ɵeld"](48,0,null,null,1,"ctos-so-plan-chart",[],null,[[null,"mouseleave"]],(function(e,t,n){var a=!0;return"mouseleave"===t&&(a=!1!==l["ɵnov"](e,49).hideCircles()&&a),a}),r.m,r.b)),l["ɵdid"](49,4898816,null,0,o.i,[l.ElementRef,o.l,l.Renderer2],{combinedData:[0,"combinedData"],centerColor:[1,"centerColor"],milestoneData:[2,"milestoneData"],refresh:[3,"refresh"],type:[4,"type"],axisLabels:[5,"axisLabels"]},null),(e()(),l["ɵeld"](50,0,null,null,21,"div",[["class","card region"],["style","display:inline-block"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](52,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](53,{"card-expanded":0,hideMe:1,"width-as-per-dependent-cohort-card":2}),(e()(),l["ɵeld"](54,0,null,null,11,"div",[["class","card-title-bar"]],null,null,null,null,null)),(e()(),l["ɵeld"](55,0,null,null,2,"div",[["class","card-title"]],null,null,null,null,null)),(e()(),l["ɵeld"](56,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),l["ɵted"](57,null,["",""])),(e()(),l["ɵeld"](58,0,null,null,7,"ctos-context-menu",[],null,[[null,"fireEvent"]],(function(e,t,n){var l=!0;return"fireEvent"===t&&(l=!1!==e.component.chartKMenuClicked(n,"region")&&l),l}),f.q,f.i)),l["ɵdid"](59,114688,[["menu2",4]],0,s.nb,[],{contextMenuClass:[0,"contextMenuClass"],xPosition:[1,"xPosition"],yPosition:[2,"yPosition"],options:[3,"options"]},{fireEvent:"fireEvent"}),(e()(),l["ɵeld"](60,16777216,null,0,5,"button",[["aria-haspopup","true"],["class","mat-menu-trigger"],["mat-icon-button",""]],[[1,"aria-expanded",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var a=!0;return"mousedown"===t&&(a=!1!==l["ɵnov"](e,61)._handleMousedown(n)&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,61)._handleKeydown(n)&&a),"click"===t&&(a=!1!==l["ɵnov"](e,61)._handleClick(n)&&a),a}),z.b,z.a)),l["ɵdid"](61,1196032,null,0,Z.g,[c.c,l.ElementRef,l.ViewContainerRef,Z.c,[2,Z.d],[8,null],[2,g.b],m.h],{menu:[0,"menu"]},null),l["ɵdid"](62,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵeld"](63,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.contextKebebClick(n,"region")&&l),l}),ee.b,ee.a)),l["ɵdid"](64,9158656,null,0,te.b,[l.ElementRef,te.d,[8,null],[2,te.a],[2,l.ErrorHandler]],null,null),(e()(),l["ɵted"](-1,0,["more_vert"])),(e()(),l["ɵeld"](66,0,null,null,5,"div",[["class","ctos-so-plan-chart-holder"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](68,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](69,{hideMe:0}),(e()(),l["ɵeld"](70,0,null,null,1,"ctos-so-plan-chart",[],null,[[null,"mouseleave"]],(function(e,t,n){var a=!0;return"mouseleave"===t&&(a=!1!==l["ɵnov"](e,71).hideCircles()&&a),a}),r.m,r.b)),l["ɵdid"](71,4898816,null,0,o.i,[l.ElementRef,o.l,l.Renderer2],{combinedData:[0,"combinedData"],centerColor:[1,"centerColor"],milestoneData:[2,"milestoneData"],refresh:[3,"refresh"],type:[4,"type"],axisLabels:[5,"axisLabels"]},null),(e()(),l["ɵeld"](72,0,null,null,6,"div",[["class","card cue"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](74,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](75,{hideMe:0,"width-as-per-dependent-cohort-card":1}),(e()(),l["ɵeld"](76,0,null,null,2,"ctos-so-cue-card",[["class","cueCardBackground cue-card-component"]],null,null,null,r.v,r.k)),l["ɵprd"](512,null,o.pb,o.pb,[s.M]),l["ɵdid"](78,770048,null,0,o.ob,[o.pb,s.M],{cueCardDetails:[0,"cueCardDetails"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,oa)),l["ɵdid"](80,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,sa)),l["ɵdid"](82,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ua)),l["ɵdid"](84,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component,a=e(t,5,0,n.isWWExpand||n.isCountryExpand||n.isRegionExpand,n.isDependentCohortPlan);e(t,4,0,"plan-chart-component-wrapper-inner",a);var i=e(t,9,0,n.isWWExpand,n.isCountryExpand||n.isRegionExpand,n.isDependentCohortPlan);e(t,8,0,"card ww",i),e(t,15,0,n.contextMenuClass,"after","below",n.graphMenuOption),e(t,17,0,l["ɵnov"](t,15).matMenu),e(t,20,0);var r=e(t,25,0,n.isExpColsp);e(t,24,0,"ctos-so-plan-chart-holder",r),e(t,27,0,n.chartDataWW,n.chartColors,n.mileStonesDataWW,n.refreshGraph,"WWChart",n.axes);var o=e(t,31,0,n.isCountryExpand,n.isWWExpand||n.isRegionExpand,n.isDependentCohortPlan);e(t,30,0,"card con",o),e(t,37,0,n.contextMenuClass,"after","below",n.graphMenuOption),e(t,39,0,l["ɵnov"](t,37).matMenu),e(t,42,0);var s=e(t,47,0,n.isExpColsp);e(t,46,0,"ctos-so-plan-chart-holder",s),e(t,49,0,n.chartData,n.chartColors,n.mileStonesData,n.refreshGraph,"CountryChart",n.axes);var u=e(t,53,0,n.isRegionExpand,n.isWWExpand||n.isCountryExpand,n.isDependentCohortPlan);e(t,52,0,"card region",u),e(t,59,0,n.contextMenuClass,"after","below",n.graphMenuOption),e(t,61,0,l["ɵnov"](t,59).matMenu),e(t,64,0);var d=e(t,69,0,n.isExpColsp);e(t,68,0,"ctos-so-plan-chart-holder",d),e(t,71,0,n.chartDataRegion,n.chartColors,n.mileStonesDataRegion,n.refreshGraph,"RegionChart",n.axes);var c=e(t,75,0,n.isWWExpand||n.isCountryExpand||n.isRegionExpand,n.isDependentCohortPlan);e(t,74,0,"card cue",c),e(t,78,0,n.cueCardDetails),e(t,80,0,n.isDependentCohortPlan),e(t,82,0,!n.isCountryExpand&&!n.isWWExpand&&!n.isRegionExpand),e(t,84,0,!n.isCountryExpand&&!n.isWWExpand&&!n.isRegionExpand)}),(function(e,t){var n=t.component;e(t,13,0,n.wwChartTitle),e(t,16,0,l["ɵnov"](t,17).menuOpen||null,l["ɵnov"](t,18).disabled||null,"NoopAnimations"===l["ɵnov"](t,18)._animationMode),e(t,19,0,l["ɵnov"](t,20).inline,"primary"!==l["ɵnov"](t,20).color&&"accent"!==l["ɵnov"](t,20).color&&"warn"!==l["ɵnov"](t,20).color),e(t,35,0,n.cntryChartTitle),e(t,38,0,l["ɵnov"](t,39).menuOpen||null,l["ɵnov"](t,40).disabled||null,"NoopAnimations"===l["ɵnov"](t,40)._animationMode),e(t,41,0,l["ɵnov"](t,42).inline,"primary"!==l["ɵnov"](t,42).color&&"accent"!==l["ɵnov"](t,42).color&&"warn"!==l["ɵnov"](t,42).color),e(t,57,0,n.regionChartTitle),e(t,60,0,l["ɵnov"](t,61).menuOpen||null,l["ɵnov"](t,62).disabled||null,"NoopAnimations"===l["ɵnov"](t,62)._animationMode),e(t,63,0,l["ɵnov"](t,64).inline,"primary"!==l["ɵnov"](t,64).color&&"accent"!==l["ɵnov"](t,64).color&&"warn"!==l["ɵnov"](t,64).color)}))}function ca(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"ctos-countries-grid",[],null,[[null,"moveToCard"],[null,"updateDependentCohortCard"],[null,"setGridVisibility"]],(function(e,t,n){var l=!0,a=e.component;return"moveToCard"===t&&(l=!1!==a.moveTo(n)&&l),"updateDependentCohortCard"===t&&(l=!1!==a.mergeAndMapWWCalculatedData(n)&&l),"setGridVisibility"===t&&(l=!1!==a.setGridVisibility(n)&&l),l}),Tl,rl)),l["ɵprd"](4608,null,T,T,[D.a,s.D,R.a,A.e,y.a]),l["ɵprd"](512,null,pe.a,pe.a,[o.cb]),l["ɵprd"](512,null,D.a,D.a,[R.a,V.a,s.M,o.cb,pe.a,o.ab,o.e,y.a,A.e,s.S,s.h,s.D,on.a,sn.a,s.R,u.DatePipe,Ge.a,M.a,zt.a]),l["ɵprd"](512,null,mn,mn,[o.cb]),l["ɵdid"](5,770048,null,0,el,[R.a,zt.a,D.a,o.O,v.a,v.n,V.a,y.a,A.e,o.e,mn,M.a,l.Renderer2,I,s.M,Jn,$n],{chartsWrapperElementRef:[0,"chartsWrapperElementRef"]},{moveToCard:"moveToCard",updateDependentCohortCard:"updateDependentCohortCard",setGridVisibility:"setGridVisibility"})],(function(e,t){e(t,5,0,l["ɵnov"](t.parent,3))}),null)}function pa(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"ctos-manage-country",[],null,[[null,"setGridVisibility"]],(function(e,t,n){var l=!0;return"setGridVisibility"===t&&(l=!1!==e.component.setGridVisibility(n)&&l),l}),Zl,Xl)),l["ɵprd"](4608,null,Fl,Fl,[o.cb]),l["ɵprd"](4608,null,Bl,Bl,[v.a,v.n,Vl,Ul,Fl,zn,Pn]),l["ɵprd"](4608,null,Wl,Wl,[Ul,Bl,R.a,D.a,v.a,v.n,$n,Jn]),l["ɵprd"](512,null,D.a,D.a,[R.a,V.a,s.M,o.cb,pe.a,o.ab,o.e,y.a,A.e,s.S,s.h,s.D,on.a,sn.a,s.R,u.DatePipe,Ge.a,M.a,zt.a]),l["ɵprd"](512,null,Vl,Vl,[kl,R.a]),l["ɵprd"](512,null,Kl,Kl,[Vl,R.a,Ge.a,s.R,o.cb,u.DatePipe,y.a,Zn,zn,Pn,Xn.a]),l["ɵprd"](512,null,Ul,Ul,[R.a,D.a,Kl,Vl,x.g,M.a]),l["ɵdid"](8,245760,null,0,Jl,[x.g,Ul],{chartsWrapperElementRef:[0,"chartsWrapperElementRef"]},{setGridVisibility:"setGridVisibility"})],(function(e,t){e(t,8,0,l["ɵnov"](t.parent,3))}),null)}function ha(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{carousel:0}),l["ɵqud"](402653184,2,{gridContainer:0}),l["ɵqud"](402653184,3,{chartWrapper:0}),(e()(),l["ɵeld"](3,0,[[3,0],["chartWrapper",1]],null,5,"div",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ra)),l["ɵdid"](5,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,da)),l["ɵdid"](7,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](8,0,null,null,0,"img",[["id","vvvvv"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,[[2,0],["gridContainer",1]],null,3,"div",[["class","box countries-grid manage-countries-row"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ca)),l["ɵdid"](11,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["ɵand"](0,[["isMCGVisible",2]],null,0,null,pa))],(function(e,t){var n=t.component;e(t,5,0,!n.expandGrid),e(t,7,0,!n.expandGrid),e(t,11,0,n.isMCEVisible,l["ɵnov"](t,12))}),null)}function ma(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"ctos-manage-countries",[],null,null,null,ha,ia)),l["ɵprd"](4608,null,Jn,Jn,[s.M]),l["ɵprd"](4608,null,Pn,Pn,[s.M,zt.a,y.a]),l["ɵprd"](4608,null,$n,$n,[R.a,Xn.a,Pn,Zn]),l["ɵprd"](131584,null,ea,ea,[o.e,s.M,o.cb,s.D,R.a,V.a,o.l,u.DatePipe,s.R,l.Renderer2,Ge.a]),l["ɵdid"](5,4440064,null,0,aa,[R.a,s.M,v.n,l.ElementRef,l.Renderer2,ea,V.a,zt.a,o.cb,o.l,y.a,M.a],null,null)],(function(e,t){e(t,5,0)}),null)}var ga=l["ɵccf"]("ctos-manage-countries",aa,ma,{},{},[]),Sa=function(){function e(){}return e.prototype.ngOnInit=function(){},e}(),fa=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function va(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" invalid-country-details works!\n"]))],null,null)}function Ca(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-invalid-country-details",[],null,null,null,va,fa)),l["ɵdid"](1,114688,null,0,Sa,[],null,null)],(function(e,t){e(t,1,0)}),null)}var ya=l["ɵccf"]("ctos-invalid-country-details",Sa,Ca,{},{},[]),Ra=function(){function e(e){this.localeAppResourcesService=e}return e.prototype.getReportResources=function(){return{ReportPlanStatus:this.localeAppResourcesService.getResource("ReportPlanStatus"),ReportPlanName:this.localeAppResourcesService.getResource("ReportPlanName"),PlanReportKey:this.localeAppResourcesService.getResource("PlanReportKey"),ReportingPeriod:this.localeAppResourcesService.getResource("ReportingPeriod"),ReportViewName:this.localeAppResourcesService.getResource("ReportViewName"),PlanReportUserName:this.localeAppResourcesService.getResource("PlanReportUserName"),PlanReportStudyKey:this.localeAppResourcesService.getResource("PlanReportStudyKey"),reportStudyId:this.localeAppResourcesService.getResource("reportStudyId"),reportCmdName:this.localeAppResourcesService.getResource("reportCmdName")}},e}(),Da=function(){function e(e,t,n,l,a){this.plansService=e,this.planReportService=t,this.planDetailsService=n,this.userDataService=l,this.studySummaryService=a}return e.prototype.ngOnInit=function(){var e=this;this.plansService.getAppData().subscribe((function(t){e.reportList=t.appMetadata.reportListData.reportList.filter((function(e){return 3===e.moduleId}))})),this.studyKey=this.userDataService.getLastVisitedStudyKey(),this.getStudySummary$=this.studySummaryService.getStudySummary(this.studyKey),this.planDetailsService$=this.planDetailsService.getPlanDetails(),this.userName=this.userDataService.getUserName(),this.reportLocaleResources=this.planReportService.getReportResources()},e}(),Pa=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ba(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","report-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"ctos-so-reports",[],null,null,null,r.s,r.h)),l["ɵdid"](2,114688,null,0,o.S,[o.T],{reportLocaleResources:[0,"reportLocaleResources"],reportList:[1,"reportList"],getStudySummary$:[2,"getStudySummary$"],planDetailsService$:[3,"planDetailsService$"],studyKey:[4,"studyKey"],userName:[5,"userName"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.reportLocaleResources,n.reportList,n.getStudySummary$,n.planDetailsService$,n.studyKey,n.userName)}),null)}function Ea(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-plan-reports",[],null,null,null,ba,Pa)),l["ɵdid"](1,114688,null,0,Da,[y.a,Ra,R.a,o.cb,V.a],null,null)],(function(e,t){e(t,1,0)}),null)}var Ta=l["ɵccf"]("ctos-plan-reports",Da,Ea,{},{},[]),Aa=n("7tlY"),Ia=n("pLqg"),_a=n("tjWy"),Na=n("f8B5"),Oa=n("sS9F"),Ma=n("6kN7"),Fa=n("w1qh"),La=n("uW5p"),wa=n("edQC"),Ga=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ka(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","message"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[""," "]))],null,(function(e,t){var n=t.component;e(t,1,0,null==n.validationErrors?null:n.validationErrors.lockedCountry.message)}))}function Va(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","message"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){var n=t.component;e(t,1,0,null==n.validationErrors?null:n.validationErrors.pasteLimit.message)}))}function xa(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","message"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){var n=t.component;e(t,1,0,null==n.validationErrors?null:n.validationErrors.emptyGrid.message)}))}function Ka(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","message"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.component.dialogViewContents.ErrorMessagesHeader)}))}function Ua(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,(function(e,t){var n=t.component;e(t,1,0,null==n.validationErrors?null:n.validationErrors.cellValidations.country.message)}))}function ja(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[""," "]))],null,(function(e,t){var n=t.component;e(t,1,0,null==n.validationErrors?null:n.validationErrors.cellValidations.date.message)}))}function Ba(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,(function(e,t){var n=t.component;e(t,1,0,null==n.validationErrors?null:n.validationErrors.cellValidations.number.message)}))}function Wa(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,18,"div",[["class","row validation-row"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"div",[["class","col-auto validation-icon"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"img",[["class","image-error-msg"]],[[8,"src",4]],null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,15,"div",[["class","col error-messages"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ka)),l["ɵdid"](5,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Va)),l["ɵdid"](7,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,xa)),l["ɵdid"](9,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ka)),l["ɵdid"](11,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](12,0,null,null,6,"ul",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Ua)),l["ɵdid"](14,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ja)),l["ɵdid"](16,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ba)),l["ɵdid"](18,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,5,0,null==n.validationErrors?null:n.validationErrors.lockedCountry.status),e(t,7,0,null==n.validationErrors?null:n.validationErrors.pasteLimit.status),e(t,9,0,null==n.validationErrors?null:n.validationErrors.emptyGrid.status),e(t,11,0,(null==n.validationErrors?null:n.validationErrors.cellValidations.country.status)||(null==n.validationErrors?null:n.validationErrors.cellValidations.date.status)||(null==n.validationErrors?null:n.validationErrors.cellValidations.number.status)),e(t,14,0,null==n.validationErrors?null:n.validationErrors.cellValidations.country.status),e(t,16,0,null==n.validationErrors?null:n.validationErrors.cellValidations.date.status),e(t,18,0,null==n.validationErrors?null:n.validationErrors.cellValidations.number.status)}),(function(e,t){e(t,2,0,l["ɵinlineInterpolate"](1,"",t.component.validationErrors.errorIcon,""))}))}function Ha(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,19,"div",[["class","import-countries-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["mat-dialog-title",""]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"h3",[["class","header-text"]],null,null,null,null,null)),(e()(),l["ɵted"](3,null,["",""])),(e()(),l["ɵeld"](4,0,null,null,1,"h4",[["class","header-text"]],null,null,null,null,null)),(e()(),l["ɵted"](5,null,["",""])),(e()(),l["ɵeld"](6,0,null,null,8,"div",[["class","dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,5,"div",[["class","row grid-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,16777216,null,null,4,"ag-grid-angular",[["class","ag-theme-material ag-grid"]],null,[[null,"gridReady"],[null,"cellValueChanged"]],(function(e,t,n){var l=!0,a=e.component;return"gridReady"===t&&(l=!1!==a.onGridReady(n)&&l),"cellValueChanged"===t&&(l=!1!==a.onCellValueChanged(n)&&l),l}),nn.b,nn.a)),l["ɵprd"](512,null,ln.AngularFrameworkOverrides,ln.AngularFrameworkOverrides,[l.NgZone]),l["ɵprd"](512,null,an.AngularFrameworkComponentWrapper,an.AngularFrameworkComponentWrapper,[]),l["ɵdid"](11,4898816,null,1,rn.AgGridAngular,[l.ElementRef,l.ViewContainerRef,ln.AngularFrameworkOverrides,an.AngularFrameworkComponentWrapper,l.ComponentFactoryResolver],{rowData:[0,"rowData"],columnDefs:[1,"columnDefs"],frameworkComponents:[2,"frameworkComponents"],defaultColDef:[3,"defaultColDef"],rowClassRules:[4,"rowClassRules"],rowClass:[5,"rowClass"],rowSelection:[6,"rowSelection"],rowHeight:[7,"rowHeight"],processCellForClipboard:[8,"processCellForClipboard"],processDataFromClipboard:[9,"processDataFromClipboard"],suppressMovableColumns:[10,"suppressMovableColumns"],enableRangeSelection:[11,"enableRangeSelection"],suppressContextMenu:[12,"suppressContextMenu"]},{cellValueChanged:"cellValueChanged",gridReady:"gridReady"}),l["ɵqud"](603979776,1,{columns:1}),(e()(),l["ɵand"](16777216,null,null,1,null,Wa)),l["ɵdid"](14,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](15,0,null,null,4,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,1,"button",[["class","cancel-btn ctos-btn"],["mat-button",""],["mat-dialog-close",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.cancel()&&l),l}),null,null)),(e()(),l["ɵted"](17,null,["",""])),(e()(),l["ɵeld"](18,0,null,null,1,"button",[["class","ok-btn ctos-btn"],["mat-button",""],["mat-dialog-close",""]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.ok()&&l),l}),null,null)),(e()(),l["ɵted"](19,null,["",""]))],(function(e,t){var n=t.component;e(t,11,1,[n.rowData,n.columnDefs,n.frameworkComponents,n.defaultColDef,n.rowClassRules,n.rowClass,n.rowSelection,n.rowHeight,n.processCellForClipboard,n.processDataFromClipboard,!0,!0,!0]),e(t,14,0,(null==n.validationErrors?null:n.validationErrors.cellValidations.country.status)||(null==n.validationErrors?null:n.validationErrors.cellValidations.date.status)||(null==n.validationErrors?null:n.validationErrors.cellValidations.number.status)||(null==n.validationErrors?null:n.validationErrors.lockedCountry.status)||(null==n.validationErrors?null:n.validationErrors.pasteLimit.status)||(null==n.validationErrors?null:n.validationErrors.emptyGrid.status))}),(function(e,t){var n=t.component;e(t,3,0,n.dialogViewContents.ImportCountryDialogPrimaryHeader),e(t,5,0,n.dialogViewContents.ImportCountryDialogCopyHeader),e(t,17,0,n.dialogViewContents.CancelLabel),e(t,18,0,(null==n.validationErrors?null:n.validationErrors.cellValidations.country.status)||(null==n.validationErrors?null:n.validationErrors.cellValidations.date.status)||(null==n.validationErrors?null:n.validationErrors.cellValidations.number.status)),e(t,19,0,n.dialogViewContents.OKLabel)}))}function Ya(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-import-countries",[],null,null,null,Ha,Ga)),l["ɵdid"](1,114688,null,0,wa.a,[A.l,A.a],null,null)],(function(e,t){e(t,1,0)}),null)}var qa=l["ɵccf"]("ctos-import-countries",wa.a,Ya,{},{},[]),Ja=n("ZQmJ"),Xa=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function za(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","ctos-import-country-cell-renderer"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"cell-valid":0,"cell-invalid":1,"date-cell":2}),(e()(),l["ɵted"](4,null,["",""]))],(function(e,t){var n=t.component,l=e(t,3,0,n.item.isValid,!n.item.isValid,n.isDateCell);e(t,2,0,"ctos-import-country-cell-renderer",l)}),(function(e,t){e(t,4,0,t.component.item.value)}))}function Za(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-import-country-cell-renderer",[],null,null,null,za,Xa)),l["ɵdid"](1,49152,null,0,Ja.a,[],null,null)],null,null)}var $a=l["ɵccf"]("ctos-import-country-cell-renderer",Ja.a,Za,{},{},[]),Qa=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ei(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(e,t){e(t,1,0,l["ɵinlineInterpolate"](1,"assets/images/manageplans/",t.component.statusIcon,".png"))}))}function ti(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","wrapper"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ei)),l["ɵdid"](2,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,2,0,t.component.showStatusIcon)}),null)}function ni(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-country-status-wrapper",[],null,null,null,ti,Qa)),l["ɵdid"](1,245760,null,0,An,[Pn,D.a],null,null)],(function(e,t){e(t,1,0)}),null)}var li=l["ɵccf"]("ctos-country-status-wrapper",An,ni,{},{},[]),ai=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ii(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","ag-icon ag-icon-expanded"],["unselectable","on"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.expandAll()&&l),l}),null,null))],null,null)}function ri(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","ag-icon ag-icon-contracted"],["unselectable","on"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.collapseAll()&&l),l}),null,null))],null,null)}function oi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","ag-cell-label-container"],["role","presentation"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"span",[["class","ag-cell-wrapper ag-row-group ag-row-group-indent-0"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"span",[["class","ag-group-expanded"],["ref","eExpanded"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ii)),l["ɵdid"](4,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["ɵand"](0,[["collapse",2]],null,0,null,ri))],(function(e,t){e(t,4,0,t.component.expand,l["ɵnov"](t,5))}),null)}function si(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"a",[],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.countryNameClicked()&&l),l}),null,null)),(e()(),l["ɵeld"](1,0,null,null,9,"label",[],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](4,{"excluded-cohort-country":0}),(e()(),l["ɵted"](5,null,["",""])),(e()(),l["ɵeld"](6,0,null,null,4,"span",[["class","asterisk"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](8,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](9,{"excluded-cohort-country":0}),(e()(),l["ɵted"](10,null,["",""]))],(function(e,t){var n=t.component,l=e(t,4,0,!!n.countryMetaData.isCohortCountry||n.countryMetaData.isCohortCountry&&(n.countryMetaData.isCohortExcluded||!1===n.countryMetaData.isSelectedCohort));e(t,3,0,l);var a=e(t,9,0,!!n.countryMetaData.isCohortCountry||n.countryMetaData.isCohortCountry&&(n.countryMetaData.isCohortExcluded||!1===n.countryMetaData.isSelectedCohort));e(t,8,0,"asterisk",a)}),(function(e,t){var n=t.component;e(t,5,0,null==n.countryMetaData?null:n.countryMetaData.countryName),e(t,10,0,null!=n.countryMetaData&&n.countryMetaData.isEdited?" *":"")}))}function ui(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,si)),l["ɵdid"](2,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["ɵand"](0,null,null,0))],(function(e,t){e(t,2,0,!t.component.countryMetaData.isWWorStudyTarget,l["ɵnov"](t.parent,8))}),null)}function di(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[],[[8,"title",0]],null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){var n=t.component;e(t,0,0,l["ɵinlineInterpolate"](1,"",null==n.params?null:null==n.params.data?null:n.params.data.displayLabel,"")),e(t,1,0,null==n.params?null:null==n.params.data?null:n.params.data.displayLabel)}))}function ci(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,[["nonEditableCountryName",1]],null,1,"span",[],[[8,"title",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.countryNameClicked()&&l),l}),null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){var n=t.component;e(t,0,0,l["ɵinlineInterpolate"](1,"",null==n.countryMetaData?null:n.countryMetaData.countryName,"")),e(t,1,0,null==n.countryMetaData?null:n.countryMetaData.countryName)}))}function pi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,7,"a",[],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,6,"label",[],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](4,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](5,{"excluded-cohort-country":0}),(e()(),l["ɵand"](16777216,null,null,1,null,di)),l["ɵdid"](7,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["ɵand"](0,[["displayCountry",2]],null,0,null,ci))],(function(e,t){var n=t.component,a=e(t,5,0,n.isExcludeCohortCountryForMcGrid);e(t,4,0,a),e(t,7,0,n.isActualOrProjectRow||n.isStudyTargetRow||n.isParentPlan,l["ɵnov"](t,8))}),null)}function hi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[],[[8,"title",0]],null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){var n=t.component;e(t,0,0,l["ɵinlineInterpolate"](1,"",null==n.countryMetaData?null:n.countryMetaData.countryName,"")),e(t,1,0,null==n.countryMetaData?null:n.countryMetaData.countryName)}))}function mi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"img",[["src","assets/images/managecountries/icon-invalid-fields.png"]],[[8,"title",0]],null,null,null,null))],null,(function(e,t){e(t,0,0,l["ɵinlineInterpolate"](1,"",t.component.countryMetaData.invalidParams,""))}))}function gi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"img",[],[[8,"title",0],[8,"src",4]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.showCountryLogPopup()&&l),l}),null,null))],null,(function(e,t){var n=t.component;e(t,0,0,l["ɵinlineInterpolate"](1,"",null==n.countryMetaData?null:null==n.countryMetaData.countryLogResources?null:n.countryMetaData.countryLogResources.Lock,""),l["ɵinlineInterpolate"](1,"assets/images/managecountries/",n.lockIcon,".png"))}))}function Si(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"img",[],[[8,"title",0],[8,"src",4]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.showNotesPopup()&&l),l}),null,null))],null,(function(e,t){var n=t.component;e(t,0,0,l["ɵinlineInterpolate"](1,"",null==n.countryMetaData?null:null==n.countryMetaData.countryLogResources?null:n.countryMetaData.countryLogResources.NOTES,""),l["ɵinlineInterpolate"](1,"assets/images/managecountries/",n.noteIcon,".png"))}))}function fi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"img",[["src","assets/images/managecountries/icon-rate-adjustment.png"]],[[8,"title",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.rateAdjustmentClicked()&&l),l}),null,null))],null,(function(e,t){var n=t.component;e(t,0,0,l["ɵinlineInterpolate"](1,"",(null==n.countryMetaData?null:null==n.countryMetaData.countryLogResources?null:n.countryMetaData.countryLogResources.RateAdjustment)+" "+(null==n.countryMetaData?null:n.countryMetaData.countryName),""))}))}function vi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,gi)),l["ɵdid"](2,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Si)),l["ɵdid"](4,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,fi)),l["ɵdid"](6,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,!0===n.countryMetaData.isLockEnabled),e(t,4,0,!0===n.countryMetaData.isNoteEnabled),e(t,6,0,!0!==n.countryMetaData.isCohortCountry&&n.showAdjustment)}),null)}function Ci(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,12,"div",[["class","wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,7,"span",[["class","linkspan"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,oi)),l["ɵdid"](3,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ui)),l["ɵdid"](5,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,pi)),l["ɵdid"](7,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,[["nonEditableCountryName",2]],null,0,null,hi)),(e()(),l["ɵand"](16777216,null,null,1,null,mi)),l["ɵdid"](10,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,vi)),l["ɵdid"](12,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,3,0,n.toShowExpandCollapse),e(t,5,0,!n.params.mcGrid),e(t,7,0,n.params.mcGrid),e(t,10,0,!n.countryMetaData.isWWorStudyTarget&&n.countryMetaData.invalidParams&&!n.params.mcGrid),e(t,12,0,n.showStatusIcons)}),null)}function yi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-country-meta-wrapper",[],null,null,null,Ci,ai)),l["ɵdid"](1,245760,null,0,En,[A.e,D.a,R.a,o.e,Pn,s.M],null,null)],(function(e,t){e(t,1,0)}),null)}var Ri=l["ɵccf"]("ctos-country-meta-wrapper",En,yi,{},{},[]),Di=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Pi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,6,"span",[["class","linkspan"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,5,"a",[],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.cohortNameClicked()&&l),l}),null,null)),(e()(),l["ɵeld"](3,0,null,null,4,"label",[],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](5,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](6,{"excluded-cohort-country":0}),(e()(),l["ɵted"](7,null,["",""]))],(function(e,t){var n=e(t,6,0,t.component.isExcludeCohortCountryForMcGrid);e(t,5,0,n)}),(function(e,t){var n=t.component;e(t,7,0,null==n.countryMetaData?null:n.countryMetaData.cohortName)}))}function bi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-cohort-meta-wrapper",[],null,null,null,Pi,Di)),l["ɵdid"](1,245760,null,0,jl,[Pn],null,null)],(function(e,t){e(t,1,0)}),null)}var Ei=l["ɵccf"]("ctos-cohort-meta-wrapper",jl,bi,{},{},[]),Ti=function(){function e(e,t){this.countryOptionService=e,this.indiMultiCountryOptions=t,this.contextMenuClass="country-option-context-menu",this.isDisabled=!1}return Object.defineProperty(e.prototype,"countryOptionsData",{set:function(e){this.params=e,this.countryOptions=this.setCountryOptions(e),this.planKey=e.planKey,this.planType=e.planType,this.version=e.version,this.parentPlankey=e.parentPlankey},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.setCountryOptions=function(e){return this.countryOptionService.getCountryOptions(e)},e.prototype.optionClicked=function(e){this.countryOptionService.onCountryOptionClick(e,{params:this.params,planKey:this.planKey,planType:this.planType,isReadOnly:this.params.isReadOnly,studyKey:this.params.studyKey,isCohortPlan:this.params.isCohortPlan,countryKey:this.params.data.geographyKey,countryName:this.params.data.geographyName,countryPlanDetails:this.params.data.planParamsDetails,isCountryLocked:this.params.data.planParamsDetails.isCountryLocked,getFPA:this.params.getFPA,version:this.version,parentPlankey:this.parentPlankey})},e.prototype.ngOnDestroy=function(){},e}(),Ai=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ii(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var a=!0,i=e.component;return"click"===t&&(a=!1!==l["ɵnov"](e,1)._checkDisabled(n)&&a),"mouseenter"===t&&(a=!1!==l["ɵnov"](e,1)._handleMouseEnter()&&a),"click"===t&&(a=!1!==i.optionClicked(e.parent.context.$implicit.name)&&a),a}),bt.c,bt.a)),l["ɵdid"](1,180224,[[1,4],[2,4]],0,Z.e,[l.ElementRef,u.DOCUMENT,m.h,[2,Z.b]],{disabled:[0,"disabled"]},null),(e()(),l["ɵeld"](2,0,null,0,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](3,null,["",""])),(e()(),l["ɵeld"](4,0,null,0,0,"hr",[],null,null,null,null,null))],(function(e,t){e(t,1,0,!t.parent.context.$implicit.isEnabled)}),(function(e,t){e(t,0,0,l["ɵnov"](t,1).role,l["ɵnov"](t,1)._highlighted,l["ɵnov"](t,1)._triggersSubmenu,l["ɵnov"](t,1)._getTabIndex(),l["ɵnov"](t,1).disabled.toString(),l["ɵnov"](t,1).disabled||null),e(t,3,0,t.parent.context.$implicit.name)}))}function _i(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Ii)),l["ɵdid"](3,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,3,0,t.context.$implicit.isVisible)}),null)}function Ni(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"mat-menu",[],null,null,null,bt.d,bt.b)),l["ɵprd"](6144,null,Z.d,null,[Z.h]),l["ɵprd"](6144,null,Z.b,null,[Z.d]),l["ɵdid"](3,1294336,[["menu",4]],3,Z.h,[l.ElementRef,l.NgZone,Z.a],{xPosition:[0,"xPosition"],yPosition:[1,"yPosition"],overlapTrigger:[2,"overlapTrigger"],panelClass:[3,"panelClass"]},null),l["ɵqud"](603979776,1,{_allItems:1}),l["ɵqud"](603979776,2,{items:1}),l["ɵqud"](603979776,3,{lazyContent:0}),(e()(),l["ɵand"](16777216,null,0,1,null,_i)),l["ɵdid"](8,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](9,16777216,null,null,4,"button",[["aria-haspopup","true"],["class","btn-trigger mat-menu-trigger"],["mat-icon-button",""]],[[1,"aria-expanded",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var a=!0;return"mousedown"===t&&(a=!1!==l["ɵnov"](e,10)._handleMousedown(n)&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,10)._handleKeydown(n)&&a),"click"===t&&(a=!1!==l["ɵnov"](e,10)._handleClick(n)&&a),a}),z.b,z.a)),l["ɵdid"](10,1196032,null,0,Z.g,[c.c,l.ElementRef,l.ViewContainerRef,Z.c,[2,Z.d],[8,null],[2,g.b],m.h],{menu:[0,"menu"]},null),l["ɵdid"](11,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],{disabled:[0,"disabled"]},null),(e()(),l["ɵeld"](12,0,null,0,1,"i",[["class","material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" more_vert "]))],(function(e,t){var n=t.component;e(t,3,0,"before","below",!1,"context-menu"),e(t,8,0,n.countryOptions),e(t,10,0,l["ɵnov"](t,3)),e(t,11,0,n.isDisabled)}),(function(e,t){e(t,9,0,l["ɵnov"](t,10).menuOpen||null,l["ɵnov"](t,11).disabled||null,"NoopAnimations"===l["ɵnov"](t,11)._animationMode)}))}var Oi=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Mi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-individual-country-options",[],null,null,null,Ni,Ai)),l["ɵdid"](1,245760,null,0,Ti,[on.a,O.a],{countryOptionsData:[0,"countryOptionsData"]},null)],(function(e,t){e(t,1,0,t.component.getData())}),null)}function Fi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-country-options-wrapper",[],null,null,null,Mi,Oi)),l["ɵdid"](1,245760,null,0,Tn,[],null,null)],(function(e,t){e(t,1,0)}),null)}var Li=l["ɵccf"]("ctos-country-options-wrapper",Tn,Fi,{},{},[]),wi=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Gi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"button",[["class","btn ctos-btn ctos-btn-secondary"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.toggleCohortSelector()&&l),l}),null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{disabled:0,"disabled-button":1}),(e()(),l["ɵted"](5,null,[" "," "]))],(function(e,t){var n=t.component,l=e(t,4,0,n.disabled,n.disabled);e(t,3,0,"btn ctos-btn ctos-btn-secondary",l)}),(function(e,t){e(t,5,0,t.component.countryCohorts)}))}function ki(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"span",[["class","linkspan"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,5,"a",[],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.cohortNameClicked()&&l),l}),null,null)),(e()(),l["ɵeld"](2,0,null,null,4,"label",[],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](4,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](5,{"messup-cohort-indicator":0}),(e()(),l["ɵted"](6,null,[" ",""]))],(function(e,t){var n=t.component,l=e(t,5,0,!!n.countryMetaData.isReCalRequired&&n.countryMetaData.isReCalRequired);e(t,4,0,l)}),(function(e,t){var n=t.component;e(t,6,0,null==n.countryMetaData?null:n.countryMetaData.cohortName)}))}function Vi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,(function(e,t){var n=t.component;e(t,1,0,null==n.countryMetaData?null:n.countryMetaData.cohortName)}))}function xi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"div",[["class","wrapper"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ki)),l["ɵdid"](2,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["ɵand"](0,[["nonEditableCohortName",2]],null,0,null,Vi))],(function(e,t){e(t,2,0,!t.component.countryMetaData.isWorldWideCohort,l["ɵnov"](t,3))}),null)}function Ki(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,Gi)),l["ɵdid"](1,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["ɵand"](0,[["isCohort",2]],null,0,null,xi))],(function(e,t){var n=t.component;e(t,1,0,!n.countryMetaData.isCohortCountry&&!n.countryMetaData.isWWorStudyTarget,l["ɵnov"](t,2))}),null)}function Ui(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-cohort-selection-renderer",[],null,null,null,Ki,wi)),l["ɵdid"](1,49152,null,0,kn,[Gn.a,D.a],null,null)],null,null)}var ji=l["ɵccf"]("ctos-cohort-selection-renderer",kn,Ui,{},{},[]),Bi=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Wi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[["class","cohort-checkbox checkbox"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,7,"label",[],[[8,"htmlFor",0]],null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,5,"input",[["type","checkbox"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,t,n){var a=!0,i=e.component;return"change"===t&&(a=!1!==l["ɵnov"](e,3).onChange(n.target.checked)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,3).onTouched()&&a),"ngModelChange"===t&&(a=!1!==(e.context.$implicit.checked=n)&&a),"change"===t&&(a=!1!==i.cohortChange(e.context.$implicit.id,e.context.$implicit.checked,i.cohortList)&&a),a}),null,null)),l["ɵdid"](3,16384,null,0,x.b,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e){return[e]}),[x.b]),l["ɵdid"](5,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](7,16384,null,0,x.s,[[4,x.r]],null,null),(e()(),l["ɵted"](8,null,[" "," "]))],(function(e,t){e(t,5,0,t.context.$implicit.id,!t.context.$implicit.isExcludable,t.context.$implicit.checked)}),(function(e,t){e(t,1,0,t.context.$implicit.id),e(t,2,0,t.context.$implicit.id,l["ɵnov"](t,7).ngClassUntouched,l["ɵnov"](t,7).ngClassTouched,l["ɵnov"](t,7).ngClassPristine,l["ɵnov"](t,7).ngClassDirty,l["ɵnov"](t,7).ngClassValid,l["ɵnov"](t,7).ngClassInvalid,l["ɵnov"](t,7).ngClassPending),e(t,8,0,t.context.$implicit.label)}))}function Hi(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{container:0}),(e()(),l["ɵeld"](1,0,null,null,6,"div",[["class","cohort-selection-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"div",[["class","cohort-checkbox checkbox"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,2,"label",[["for","all-cohorts"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"input",[["id","all-cohorts"],["name","all-cohorts"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,t,n){var l=!0;return"change"===t&&(l=!1!==e.component.toggleAll()&&l),l}),null,null)),(e()(),l["ɵted"](-1,null,[" All cohorts "])),(e()(),l["ɵand"](16777216,null,null,1,null,Wi)),l["ɵdid"](7,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,7,0,t.component.cohortList)}),(function(e,t){e(t,4,0,t.component.areAllChecked())}))}function Yi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-cohort-selection-editor",[],null,null,null,Hi,Bi)),l["ɵdid"](1,4243456,null,0,wn,[],null,null)],null,null)}var qi=l["ɵccf"]("ctos-cohort-selection-editor",wn,Yi,{},{},[]),Ji=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Xi(e){return l["ɵvid"](0,[l["ɵpid"](0,u.DecimalPipe,[l.LOCALE_ID]),(e()(),l["ɵeld"](1,16777216,null,null,6,"div",[["class","ctos-number-cell-renderer"],["matTooltipPosition","right"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0;return"longpress"===t&&(a=!1!==l["ɵnov"](e,5).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,5)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,5)._handleTouchend()&&a),a}),null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"ag-cell-invalid":0,disabled:1,"number-renderer":2,"hightlight-field":3}),l["ɵdid"](5,212992,null,0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{position:[0,"position"],disabled:[1,"disabled"],message:[2,"message"],tooltipClass:[3,"tooltipClass"]},null),(e()(),l["ɵted"](6,null,[" "," "])),l["ɵppd"](7,2)],(function(e,t){var n=t.component,l=e(t,4,0,null==n.params?null:n.params.data.errorFields[n.params.column.colId],null==n.params?null:n.params.inputDisabled,!(null!=n.params&&n.params.data.planParamsDetails.isCountryLocked),null==n.params?null:n.params.isHighlighted);e(t,3,0,"ctos-number-cell-renderer",l),e(t,5,0,"right",!n.hasValidationMsg(),null==n.params?null:n.params.data.errorFields[n.params.column.colId],"warn ctos-tooltip-multi-line")}),(function(e,t){var n=t.component,a=void 0!==n.params.numDecimals?l["ɵunv"](t,6,0,e(t,7,0,l["ɵnov"](t,0),n.params.value,n.decimals)):n.params.value;e(t,6,0,a)}))}function zi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-number-cell-renderer",[],null,null,null,Xi,Ji)),l["ɵdid"](1,49152,null,0,Wn,[],null,null)],null,null)}var Zi=l["ɵccf"]("ctos-number-cell-renderer",Wn,zi,{},{},[]),$i=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Qi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,[[1,3],["input",1]],null,7,"input",[["class","number-editor"],["ctosSignedInteger",""],["type","number"]],[[1,"min",0],[1,"max",0],[1,"step",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,1)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,1).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,1)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,1)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,2).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,2).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,2).onTouched()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,7).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,7).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,7).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,7).onChange(n)&&a),"ngModelChange"===t&&(a=!1!==(i.value=n)&&a),a}),null,null)),l["ɵdid"](1,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](2,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](4,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](6,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵdid"](7,16384,null,0,s.W,[l.ElementRef],null,null),(e()(),l["ɵand"](0,null,null,0))],(function(e,t){e(t,4,0,t.component.value)}),(function(e,t){var n=t.component;e(t,0,0,n.minValue,n.maxValue,n.step,l["ɵnov"](t,6).ngClassUntouched,l["ɵnov"](t,6).ngClassTouched,l["ɵnov"](t,6).ngClassPristine,l["ɵnov"](t,6).ngClassDirty,l["ɵnov"](t,6).ngClassValid,l["ɵnov"](t,6).ngClassInvalid,l["ɵnov"](t,6).ngClassPending)}))}function er(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,[[1,3],["input",1]],null,7,"input",[["class","number-editor"],["ctosSignedDecimal",""],["type","number"]],[[1,"min",0],[1,"max",0],[1,"step",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,1)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,1).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,1)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,1)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,2).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,2).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,2).onTouched()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,7).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,7).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,7).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,7).onChange(n)&&a),"ngModelChange"===t&&(a=!1!==(i.value=n)&&a),a}),null,null)),l["ɵdid"](1,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](2,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](4,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](6,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵdid"](7,16384,null,0,s.V,[l.ElementRef],null,null),(e()(),l["ɵand"](0,null,null,0))],(function(e,t){e(t,4,0,t.component.value)}),(function(e,t){var n=t.component;e(t,0,0,n.minValue,n.maxValue,n.step,l["ɵnov"](t,6).ngClassUntouched,l["ɵnov"](t,6).ngClassTouched,l["ɵnov"](t,6).ngClassPristine,l["ɵnov"](t,6).ngClassDirty,l["ɵnov"](t,6).ngClassValid,l["ɵnov"](t,6).ngClassInvalid,l["ɵnov"](t,6).ngClassPending)}))}function tr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,[[1,3],["input",1]],null,6,"input",[["class","number-editor"],["type","number"]],[[1,"min",0],[1,"max",0],[1,"step",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,1)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,1).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,1)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,1)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,2).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,2).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,2).onTouched()&&a),"ngModelChange"===t&&(a=!1!==(i.value=n)&&a),a}),null,null)),l["ɵdid"](1,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](2,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](4,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](6,16384,null,0,x.s,[[4,x.r]],null,null),(e()(),l["ɵand"](0,null,null,0))],(function(e,t){e(t,4,0,t.component.value)}),(function(e,t){var n=t.component;e(t,0,0,n.minValue,n.maxValue,n.step,l["ɵnov"](t,6).ngClassUntouched,l["ɵnov"](t,6).ngClassTouched,l["ɵnov"](t,6).ngClassPristine,l["ɵnov"](t,6).ngClassDirty,l["ɵnov"](t,6).ngClassValid,l["ɵnov"](t,6).ngClassInvalid,l["ɵnov"](t,6).ngClassPending)}))}function nr(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{input:0}),(e()(),l["ɵeld"](1,0,null,null,6,"div",[["class","editor-div"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Qi)),l["ɵdid"](3,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,er)),l["ɵdid"](5,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,tr)),l["ɵdid"](7,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,3,0,n.signedInteger),e(t,5,0,n.signedDecimal),e(t,7,0,!n.signedInteger&&!n.signedDecimal)}),null)}function lr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-number-cell-editor",[],null,null,null,nr,$i)),l["ɵdid"](1,4243456,null,0,Bn,[],null,null)],null,null)}var ar=l["ɵccf"]("ctos-number-cell-editor",Bn,lr,{},{},[]),ir=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function rr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,":svg:svg",[["class","mat-datepicker-toggle-default-icon ng-star-inserted"],["fill","currentColor"],["focusable","false"],["height","12px"],["style","margin: 3px 5px; float: right"],["viewBox","0 0 24 24"],["width","12px"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,":svg:path",[["d","M0 0h24v24H0z"],["fill","none"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,":svg:path",[["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](4,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](5,{disabled:0})],(function(e,t){var n=t.component,l=e(t,5,0,null==n.params?null:n.params.inputDisabled);e(t,4,0,l)}),null)}function or(e){return l["ɵvid"](0,[l["ɵpid"](0,u.DatePipe,[l.LOCALE_ID]),(e()(),l["ɵeld"](1,16777216,null,null,8,"div",[["class","ctos-date-cell-renderer"],["matTooltipPosition","right"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0;return"longpress"===t&&(a=!1!==l["ɵnov"](e,5).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,5)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,5)._handleTouchend()&&a),a}),null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"date-renderer":0,"ag-cell-invalid":1,disabled:2,"hightlight-field":3}),l["ɵdid"](5,212992,null,0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{position:[0,"position"],disabled:[1,"disabled"],message:[2,"message"],tooltipClass:[3,"tooltipClass"]},null),(e()(),l["ɵted"](6,null,[" "," "])),l["ɵppd"](7,2),(e()(),l["ɵand"](16777216,null,null,1,null,rr)),l["ɵdid"](9,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component,l=e(t,4,0,!(null!=n.params&&n.params.data.planParamsDetails.isCountryLocked),null==n.params?null:n.params.data.errorFields[n.params.column.colId],null==n.params?null:n.params.inputDisabled,null==n.params?null:n.params.isHighlighted);e(t,3,0,"ctos-date-cell-renderer",l),e(t,5,0,"right",!n.hasValidationMsg(),null==n.params?null:n.params.data.errorFields[n.params.column.colId],"warn ctos-tooltip-multi-line"),e(t,9,0,!(null!=n.params&&n.params.data.planParamsDetails.isCountryLocked))}),(function(e,t){var n=t.component,a=l["ɵunv"](t,6,0,e(t,7,0,l["ɵnov"](t,0),n.params.value,"dd-MMM-yyyy"));e(t,6,0,a)}))}function sr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-date-cell-renderer",[],null,null,null,or,ir)),l["ɵdid"](1,49152,null,0,xn,[],null,null)],null,null)}var ur=l["ɵccf"]("ctos-date-cell-renderer",xn,sr,{},{},[]),dr=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function cr(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{input:0}),(e()(),l["ɵeld"](1,0,null,null,21,"div",[["class","editor-div"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,16777216,[[1,3],["input",1]],null,10,"input",[["class","date-editor mat-input-element mat-form-field-autofill-control"],["matInput",""],["type","text"]],[[1,"aria-haspopup",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"focus"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,4)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,4).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,4)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,4)._compositionEnd(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,5)._onInput(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,5)._onChange()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,5)._onBlur()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,5)._onKeydown(n)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,12)._focusChanged(!1)&&a),"focus"===t&&(a=!1!==l["ɵnov"](e,12)._focusChanged(!0)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,12)._onInput()&&a),"ngModelChange"===t&&(a=!1!==(i.value=n)&&a),a}),null,null)),l["ɵprd"](6144,null,re.d,null,[oe.b]),l["ɵdid"](4,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](5,147456,null,0,se.h,[l.ElementRef,[2,ue.a],[2,ue.e],[2,re.c]],{matDatepicker:[0,"matDatepicker"]},null),l["ɵprd"](1024,null,x.p,(function(e){return[e]}),[se.h]),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,se.h]),l["ɵdid"](8,671744,null,0,x.v,[[8,null],[6,x.p],[8,null],[6,x.q]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](10,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵprd"](2048,null,oe.a,null,[se.h]),l["ɵdid"](12,999424,null,0,oe.b,[l.ElementRef,h.a,[6,x.r],[2,x.u],[2,x.l],ue.b,[6,oe.a],de.a,l.NgZone],{type:[0,"type"]},null),(e()(),l["ɵeld"](13,0,null,null,7,"mat-datepicker-toggle",[["class","date mat-datepicker-toggle"],["matSuffix",""]],[[1,"tabindex",0],[2,"mat-datepicker-toggle-active",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,15)._button.focus()&&a),a}),ce.e,ce.d)),l["ɵdid"](14,16384,null,0,re.h,[],null,null),l["ɵdid"](15,1753088,null,1,se.k,[se.i,l.ChangeDetectorRef,[8,null]],{datepicker:[0,"datepicker"]},null),l["ɵqud"](603979776,2,{_customIcon:0}),(e()(),l["ɵeld"](17,0,null,0,3,"mat-icon",[["class","mat-icon notranslate"],["matDatepickerToggleIcon",""],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,ee.b,ee.a)),l["ɵdid"](18,9158656,null,0,te.b,[l.ElementRef,te.d,[8,null],[2,te.a],[2,l.ErrorHandler]],null,null),l["ɵdid"](19,16384,[[2,4]],0,se.l,[],null,null),(e()(),l["ɵted"](-1,0,["today"])),(e()(),l["ɵeld"](21,16777216,null,null,1,"mat-datepicker",[],null,null,null,ce.f,ce.c)),l["ɵdid"](22,180224,[["picker3",4]],0,se.f,[A.e,c.c,l.NgZone,l.ViewContainerRef,se.a,[2,ue.a],[2,g.b],[2,u.DOCUMENT]],null,null)],(function(e,t){var n=t.component;e(t,5,0,l["ɵnov"](t,22)),e(t,8,0,n.value),e(t,12,0,"text"),e(t,15,0,l["ɵnov"](t,22)),e(t,18,0)}),(function(e,t){e(t,2,1,[l["ɵnov"](t,5)._datepicker?"dialog":null,(null==l["ɵnov"](t,5)._datepicker?null:l["ɵnov"](t,5)._datepicker.opened)&&l["ɵnov"](t,5)._datepicker.id||null,l["ɵnov"](t,5).min?l["ɵnov"](t,5)._dateAdapter.toIso8601(l["ɵnov"](t,5).min):null,l["ɵnov"](t,5).max?l["ɵnov"](t,5)._dateAdapter.toIso8601(l["ɵnov"](t,5).max):null,l["ɵnov"](t,5).disabled,l["ɵnov"](t,10).ngClassUntouched,l["ɵnov"](t,10).ngClassTouched,l["ɵnov"](t,10).ngClassPristine,l["ɵnov"](t,10).ngClassDirty,l["ɵnov"](t,10).ngClassValid,l["ɵnov"](t,10).ngClassInvalid,l["ɵnov"](t,10).ngClassPending,l["ɵnov"](t,12)._isServer,l["ɵnov"](t,12).id,l["ɵnov"](t,12).placeholder,l["ɵnov"](t,12).disabled,l["ɵnov"](t,12).required,l["ɵnov"](t,12).readonly&&!l["ɵnov"](t,12)._isNativeSelect||null,l["ɵnov"](t,12)._ariaDescribedby||null,l["ɵnov"](t,12).errorState,l["ɵnov"](t,12).required.toString()]),e(t,13,0,-1,l["ɵnov"](t,15).datepicker&&l["ɵnov"](t,15).datepicker.opened,l["ɵnov"](t,15).datepicker&&"accent"===l["ɵnov"](t,15).datepicker.color,l["ɵnov"](t,15).datepicker&&"warn"===l["ɵnov"](t,15).datepicker.color),e(t,17,0,l["ɵnov"](t,18).inline,"primary"!==l["ɵnov"](t,18).color&&"accent"!==l["ɵnov"](t,18).color&&"warn"!==l["ɵnov"](t,18).color)}))}function pr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-date-cell-editor",[],null,null,null,cr,dr)),l["ɵdid"](1,4243456,null,0,Vn,[],null,null)],null,null)}var hr=l["ɵccf"]("ctos-date-cell-editor",Vn,pr,{},{},[]),mr=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function gr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,4,"span",[["class","tooltip-toggle-btn"],["matTooltipPosition","right"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0;return"longpress"===t&&(a=!1!==l["ɵnov"](e,1).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,1)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,1)._handleTouchend()&&a),a}),null,null)),l["ɵdid"](1,212992,null,0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{position:[0,"position"],disabled:[1,"disabled"],message:[2,"message"],tooltipClass:[3,"tooltipClass"]},null),(e()(),l["ɵeld"](2,0,null,null,2,"mat-button-toggle",[["class","toggle-button mat-button-toggle"]],[[2,"disabled",null],[2,"mat-button-toggle-standalone",null],[2,"mat-button-toggle-checked",null],[2,"mat-button-toggle-disabled",null],[2,"mat-button-toggle-appearance-standard",null],[1,"tabindex",0],[1,"id",0],[1,"name",0]],[[null,"change"],[null,"focus"]],(function(e,t,n){var a=!0,i=e.component;return"focus"===t&&(a=!1!==l["ɵnov"](e,3).focus()&&a),"change"===t&&(a=!1!==i.onChange(n)&&a),a}),Le.b,Le.a)),l["ɵdid"](3,245760,null,0,Fe.b,[[2,Fe.c],l.ChangeDetectorRef,l.ElementRef,m.h,[8,null],[2,Fe.a]],{value:[0,"value"],disabled:[1,"disabled"]},{change:"change"}),(e()(),l["ɵted"](4,0,[" "," "])),(e()(),l["ɵand"](0,null,null,0))],(function(e,t){e(t,1,0,"right",!(null!=t.context.$implicit&&t.context.$implicit.toolTipMsg),null==t.context.$implicit?null:t.context.$implicit.toolTipMsg,"ctos-tooltip-multi-line"),e(t,3,0,t.context.$implicit.key,t.context.$implicit.isDisabled)}),(function(e,t){e(t,2,0,t.context.$implicit.isDisabled,!l["ɵnov"](t,3).buttonToggleGroup,l["ɵnov"](t,3).checked,l["ɵnov"](t,3).disabled,"standard"===l["ɵnov"](t,3).appearance,-1,l["ɵnov"](t,3).id,null),e(t,4,0,t.context.$implicit.value)}))}function Sr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"mat-button-toggle-group",[["class","toggle-group mat-button-toggle-group"],["role","group"]],[[2,"disabled",null],[1,"aria-disabled",0],[2,"mat-button-toggle-vertical",null],[2,"mat-button-toggle-group-appearance-standard",null]],null,null,null,null)),l["ɵprd"](5120,null,x.q,(function(e){return[e]}),[Fe.c]),l["ɵprd"](6144,null,Fe.d,null,[Fe.c]),l["ɵdid"](3,1130496,[["group",4]],1,Fe.c,[l.ChangeDetectorRef,[2,Fe.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),l["ɵqud"](603979776,1,{_buttonToggles:1}),(e()(),l["ɵand"](16777216,null,null,1,null,gr)),l["ɵdid"](6,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component;e(t,3,0,n.params.value,(null==n.params?null:n.params.data.planParamsDetails.isCountryLocked)&&n.params.column.colId!==n.colId||n.params.inputDisabled),e(t,6,0,n.labels)}),(function(e,t){var n=t.component;e(t,0,0,(null==n.params?null:n.params.data.planParamsDetails.isCountryLocked)&&n.params.column.colId!==n.colId||n.params.inputDisabled,l["ɵnov"](t,3).disabled,l["ɵnov"](t,3).vertical,"standard"===l["ɵnov"](t,3).appearance)}))}function fr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-toggle-button-cell-renderer",[],null,null,null,Sr,mr)),l["ɵdid"](1,49152,null,0,Hn,[],null,null)],null,null)}var vr=l["ɵccf"]("ctos-toggle-button-cell-renderer",Hn,fr,{},{},[]),Cr=n("zIGh"),yr=function(){function e(){}return e.prototype.getBulkEditFields=function(e){return this.bulkEditFields={enrollmentTarget:{value:"",isDisabled:this.isEnrollmentTargetDisabled()},daysToFSS:{value:"",isDisabled:this.isDaysToFSSDisabled()},FSS:{value:"",isDisabled:this.isFSSDisabled()},ARTB:{value:"",isDisabled:this.isARTBDisabled()},numSites:{value:"",isDisabled:this.isNumSitesDisabled()},overEnrollment:{value:"",isDisabled:this.isOverEnrollmentDisabled()},SI:{value:"",isDisabled:this.isSIDisabled()},RR:{value:"",isDisabled:this.isRRDisabled()},SR:{value:"",isDisabled:this.isSRDisabled()},SAS:{value:"",isDisabled:this.isSASDisabled()},SFR:{value:"",isDisabled:this.isScreenFailureDisabled()},FPA:{value:s.c.isDefined(e)?new Date(e):"",isDisabled:this.isFPADisabled()},daysTo25:{value:"",isDisabled:this.isDaysTo25Disabled()},daysTo50:{value:"",isDisabled:this.isDaysTo50Disabled()},daysTo90:{value:"",isDisabled:this.isDaysTo90Disabled()},daysToFSI:{value:"",isDisabled:this.isDaysToFSIDisabled(e)},FSI:{value:"",isDisabled:this.isFSIDisabled(e)}},this.bulkEditFields},e.prototype.isEnrollmentTargetDisabled=function(){return!1},e.prototype.isDaysToFSSDisabled=function(){return!1},e.prototype.isFSSDisabled=function(){return!0},e.prototype.isARTBDisabled=function(){return!1},e.prototype.isNumSitesDisabled=function(){return!1},e.prototype.isOverEnrollmentDisabled=function(){return!1},e.prototype.isRRDisabled=function(){return!1},e.prototype.isSRDisabled=function(){return!1},e.prototype.isSIDisabled=function(){return!1},e.prototype.isSASDisabled=function(){return!1},e.prototype.isScreenFailureDisabled=function(){return!1},e.prototype.isFPADisabled=function(){return!0},e.prototype.isDaysTo25Disabled=function(){return!1},e.prototype.isDaysTo50Disabled=function(){return!1},e.prototype.isDaysTo90Disabled=function(){return!1},e.prototype.isFSIDisabled=function(e){return!!s.c.isDefined(e)},e.prototype.isDaysToFSIDisabled=function(e){return!s.c.isDefined(e)},e.prototype.dateFormatter=function(e){new u.DatePipe("en_US");var t=new Date(e);return!e||isNaN(t.getTime())?"":t},e}(),Rr=function(){function e(e,t,n){this.dialogRef=e,this.bulkEditProp=t,this.bulkEditDialogService=n,this.labels=["Linear","Random"],console.log("dialog data : ",t),this.bulkEditFields=this.bulkEditDialogService.getBulkEditFields(t.countryOptionsData.getFPA)}return e.prototype.ngOnInit=function(){},e.prototype.onChange=function(e){this.bulkEditFields.SI.value=e.value},e.prototype.onARTBChange=function(e){this.bulkEditFields.ARTB.value=this.bulkEditDialogService.dateFormatter(e.target.value)},e.prototype.onDaysToFSIChange=function(e){},e.prototype.onDaysToFSSChange=function(e){this.bulkEditFields.FSS.value=s.c.isDefined(e.target.value)&&s.c.isDefined(this.bulkEditFields.FSI.value)?s.c.dateAdd(this.bulkEditFields.FSI.value,e.target.value).toDate():""},e.prototype.onFSIChange=function(e){this.bulkEditFields.FSI.value=this.bulkEditDialogService.dateFormatter(e.target.value),this.bulkEditFields.FSS.value=s.c.isDefined(e.target.value)&&s.c.isDefined(this.bulkEditFields.daysToFSS.value)?s.c.dateAdd(this.bulkEditFields.FSI.value,this.bulkEditFields.daysToFSS.value).toDate():""},e.prototype.onFSSChange=function(e){this.bulkEditFields.FSS.value=this.bulkEditDialogService.dateFormatter(e.target.value)},e.prototype.apply=function(){console.log("BulkEditFields : ",this.bulkEditFields),this.dialogRef.close({action:this.bulkEditProp.resources.APPLY,bulkEditFields:this.bulkEditFields})},e.prototype.cancel=function(){this.dialogRef.close({action:this.bulkEditProp.resources.CANCEL,bulkEditFields:null})},e}(),Dr=function(){function e(e,t,n){this.dialog=e,this.multiCountryService=t,this.indiMultiCountryOptions=n,this.contextMenuClass="multi-country-context-menu",this.isDisabled=!1}return Object.defineProperty(e.prototype,"countryOptionsData",{set:function(e){this.params=e,this.countryBatchOptions=this.setCountryOptions(e),this.router=e.router,this.planKey=e.planKey,this.planType=e.planType,this.version=e.version},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.setCountryOptions=function(e){return this.multiCountryService.getBatchCountryOptions(e)},e.prototype.ngOnDestroy=function(){},e.prototype.optionClicked=function(e){var t=this.multiCountryService.getBatchCountryOptionsResources();switch(e){case t.PASTE_PARAMETERS:this.onPasteParameterOptionClicked();break;case t.BULK_EDIT_SELECTED_COUNTRIES:this.onBulkEditOptionClicked()}var n=this.params.api.getSelectedNodes(),l={params:this.params,planKey:this.planKey,planType:this.planType,isReadOnly:this.params.isReadOnly,studyKey:this.params.studyKey,getFPA:this.params.getFPA,version:this.version,selectedRows:"Y"===this.params.isCohortPlan?this.indiMultiCountryOptions.removeCohortRows(n):n};this.multiCountryService.onCountryOptionClick(e,l)},e.prototype.onPasteParameterOptionClicked=function(){this.indiMultiCountryOptions.pasteVisible=!1,this.indiMultiCountryOptions.copyCountryData(null),this.params.context.componentParent.methodToUpdatePlan()},e.prototype.onBulkEditOptionClicked=function(){var e=this.multiCountryService.getFilteredAndSelectedRowNodes(this.params.api),t=this.getSelectedCountriesCountForBulkEdit(e);t.eligibleCountryCount>=b.Cb&&!s.c.isDefined(t.bulkEditNAcountries)?this.showBulkEditDialog():e.length<2?this.showWarningDialogForCountrySelection():this.showWarningDialogForCountrySelection(t,this.params.planType)},e.prototype.getSelectedCountriesCountForBulkEdit=function(e){var t=0,n="";if(e&&e.length>0)for(var l=0;l<e.length;l++){var a=e[l].data;this.multiCountryService.isCountryEligibleForBulkEdit(a,this.params.planType,this.isCohortPlan(),this.params.api)?t++:s.c.isDefined(n)?-1===n.indexOf(a.geographyName)&&(n+=", "+a.geographyName):n=a.geographyName}return{eligibleCountryCount:t,bulkEditNAcountries:n}},e.prototype.showBulkEditDialog=function(){var e=this,t=this.multiCountryService.getBulkEditResources(),n=this.dialog.open(Rr,{width:b.F.BULK_EDIT_DIALOG.WIDTH,data:{countryOptionsData:{getFPA:this.params.getFPA,isCohortPlan:"Y"===this.params.isCohortPlan,isSREnabled:this.params.isSREnabled,isRTypeCohortStudy:this.params.isRTypeCohortStudy},resources:t},panelClass:b.F.BULK_EDIT_DIALOG.PANEL_CLASS,id:"BulkEditDialog"}).afterClosed().subscribe((function(l){n.unsubscribe(),l&&l.action===t.APPLY&&(console.log("data : ",l.bulkEditFields),e.multiCountryService.applyBulkEdit(e.params.api,l.bulkEditFields,e.isCohortPlan(),e.params.planType,e.params.isSREnabled,e.params.isRTypeCohortStudy,e.params.isDepCohortPlan))}))},e.prototype.showWarningDialogForCountrySelection=function(e,t){var n=this,l=this.getBulkEditCountrySelectionWarningModalProp(e,t),a=this.dialog.open(s.t,{width:b.F.CONFIRM_DIALOG.WIDTH,data:l,panelClass:b.F.CONFIRM_DIALOG.PANEL_CLASS,id:"BulkEditCountrySelectionWarningDialog"}),i=a.afterClosed().subscribe((function(t){i.unsubscribe(),a.close(),t&&t.action===l.okLabel&&e&&e.eligibleCountryCount>=b.Cb&&n.showBulkEditDialog()}))},e.prototype.getBulkEditCountrySelectionWarningModalProp=function(e,t){var n=this.multiCountryService.getCountrySelectionPopupResources(),l=this.getWarningMessageAndTitle(n,e,t);return{heading:l.title,message:l.message,okLabel:n.OK,showCancel:!1,contentClass:""}},e.prototype.getWarningMessageAndTitle=function(e,t,n){var l={message:"",title:""};return t?(l.message=this.getBulkEditMessageByEligibleCountryCount(e,t,n).toString().replace("{0}",t.bulkEditNAcountries),l.title=e.BULK_EDIT_COUNTRIES_TITLE):(l.message=e.COUNTRY_SELECTION_WARNING_MESSAGE,l.title=e.SELECT_COUNTRIES_TITLE),l},e.prototype.getBulkEditMessageByEligibleCountryCount=function(e,t,n){return t.eligibleCountryCount<b.Cb?n?e.COUNTRY_SELECTION_WARNING_MESSAGE_LOCKED:e.COUNTRY_SELECTION_WARNING_MESSAGE_LOCKED_ALSR:n?e.COUNTRY_SELECTION_WARNING_MESSAGE_LOCKED_CONTINUE_BULK_EDIT:e.COUNTRY_SELECTION_WARNING_MESSAGE_LOCKED_ALSR_CONTINUE_BULK_EDIT},e.prototype.isCohortPlan=function(){return this.params&&"Y"===this.params.isCohortPlan},e}(),Pr=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function br(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var a=!0,i=e.component;return"click"===t&&(a=!1!==l["ɵnov"](e,1)._checkDisabled(n)&&a),"mouseenter"===t&&(a=!1!==l["ɵnov"](e,1)._handleMouseEnter()&&a),"click"===t&&(a=!1!==i.optionClicked(e.parent.context.$implicit.name)&&a),a}),bt.c,bt.a)),l["ɵdid"](1,180224,[[1,4],[2,4]],0,Z.e,[l.ElementRef,u.DOCUMENT,m.h,[2,Z.b]],{disabled:[0,"disabled"]},null),(e()(),l["ɵeld"](2,0,null,0,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](3,null,["",""])),(e()(),l["ɵeld"](4,0,null,0,0,"hr",[],null,null,null,null,null))],(function(e,t){e(t,1,0,!t.parent.context.$implicit.isEnabled)}),(function(e,t){e(t,0,0,l["ɵnov"](t,1).role,l["ɵnov"](t,1)._highlighted,l["ɵnov"](t,1)._triggersSubmenu,l["ɵnov"](t,1)._getTabIndex(),l["ɵnov"](t,1).disabled.toString(),l["ɵnov"](t,1).disabled||null),e(t,3,0,t.parent.context.$implicit.name)}))}function Er(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,br)),l["ɵdid"](3,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,3,0,t.context.$implicit.isVisible)}),null)}function Tr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"mat-menu",[],null,null,null,bt.d,bt.b)),l["ɵprd"](6144,null,Z.d,null,[Z.h]),l["ɵprd"](6144,null,Z.b,null,[Z.d]),l["ɵdid"](3,1294336,[["menu",4]],3,Z.h,[l.ElementRef,l.NgZone,Z.a],{xPosition:[0,"xPosition"],yPosition:[1,"yPosition"],overlapTrigger:[2,"overlapTrigger"],panelClass:[3,"panelClass"]},null),l["ɵqud"](603979776,1,{_allItems:1}),l["ɵqud"](603979776,2,{items:1}),l["ɵqud"](603979776,3,{lazyContent:0}),(e()(),l["ɵand"](16777216,null,0,1,null,Er)),l["ɵdid"](8,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](9,16777216,null,null,4,"button",[["aria-haspopup","true"],["class","btn-trigger mat-menu-trigger"],["mat-icon-button",""]],[[1,"aria-expanded",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var a=!0;return"mousedown"===t&&(a=!1!==l["ɵnov"](e,10)._handleMousedown(n)&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,10)._handleKeydown(n)&&a),"click"===t&&(a=!1!==l["ɵnov"](e,10)._handleClick(n)&&a),a}),z.b,z.a)),l["ɵdid"](10,1196032,null,0,Z.g,[c.c,l.ElementRef,l.ViewContainerRef,Z.c,[2,Z.d],[8,null],[2,g.b],m.h],{menu:[0,"menu"]},null),l["ɵdid"](11,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],{disabled:[0,"disabled"]},null),(e()(),l["ɵeld"](12,0,null,0,1,"i",[["class","material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" more_vert "]))],(function(e,t){var n=t.component;e(t,3,0,"before","below",!1,"context-menu"),e(t,8,0,n.countryBatchOptions),e(t,10,0,l["ɵnov"](t,3)),e(t,11,0,n.isDisabled)}),(function(e,t){e(t,9,0,l["ɵnov"](t,10).menuOpen||null,l["ɵnov"](t,11).disabled||null,"NoopAnimations"===l["ɵnov"](t,11)._animationMode)}))}var Ar=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ir(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-multi-country-options",[],null,null,null,Tr,Pr)),l["ɵdid"](1,245760,null,0,Dr,[A.e,Cr.a,O.a],{countryOptionsData:[0,"countryOptionsData"]},null)],(function(e,t){e(t,1,0,t.component.getData())}),null)}function _r(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-multi-country-options-wrapper",[],null,null,null,Ir,Ar)),l["ɵdid"](1,49152,null,0,In,[],null,null)],null,null)}var Nr=l["ɵccf"]("ctos-multi-country-options-wrapper",In,_r,{},{},[]),Or=l["ɵcrt"]({encapsulation:0,styles:[".icon-size.disable-apply-img[_ngcontent-%COMP%] {\n        cursor: auto;\n        opacity: 0.4;\n    }\n    .icon-size[_ngcontent-%COMP%]{\n         height:21px !important;\n         width:21px !important;\n         left: 10px;\n         position: absolute;\n         top: 15px;\n    }\n    .btn-style[_ngcontent-%COMP%]:hover{\n        cursor:pointer;\n}\n.hide-on-cohort[_ngcontent-%COMP%]{\n    display: none;\n}"],data:{}});function Mr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","btn-style"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onApplyClick()&&l),l}),null,null)),(e()(),l["ɵeld"](1,16777216,null,null,4,"img",[["class","icon-size"]],[[8,"src",4],[2,"disable-apply-img",null]],[[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0;return"longpress"===t&&(a=!1!==l["ɵnov"](e,5).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,5)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,5)._handleTouchend()&&a),a}),null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"hide-on-cohort":0,"disable-apply-img":1}),l["ɵdid"](5,212992,null,0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{message:[0,"message"]},null)],(function(e,t){var n=t.component,l=e(t,4,0,n.hideCopyArrow,n.disbleSolverApply);e(t,3,0,"icon-size",l),e(t,5,0,n.toolTipText)}),(function(e,t){var n=t.component;e(t,1,0,n.iconArrowLeft,n.disbleSolverApply)}))}function Fr(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,Mr)),l["ɵdid"](1,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,!t.component.isWWorStudyTarget)}),null)}function Lr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-copysinglevalue-cell-renderer-component",[],null,null,null,Fr,Or)),l["ɵdid"](1,49152,null,0,Mn,[D.a,T],null,null)],null,null)}var wr=l["ɵccf"]("ctos-copysinglevalue-cell-renderer-component",Mn,Lr,{},{},[]),Gr=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function kr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,1,"img",[["class","button-animate iconArrowLeft"]],[[8,"src",4]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0,i=e.component;return"longpress"===t&&(a=!1!==l["ɵnov"](e,1).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,1)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,1)._handleTouchend()&&a),"click"===t&&(a=!1!==i.onApplyclick()&&a),a}),null,null)),l["ɵdid"](1,212992,null,0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{message:[0,"message"]},null)],(function(e,t){e(t,1,0,t.component.toolTipText)}),(function(e,t){e(t,0,0,t.component.iconArrowLeft)}))}function Vr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-copybulkvalue-cell-renderer-component",[],null,null,null,kr,Gr)),l["ɵdid"](1,49152,null,0,On,[D.a,T],null,null)],null,null)}var xr=l["ɵccf"]("ctos-copybulkvalue-cell-renderer-component",On,Vr,{},{},[]),Kr=l["ɵcrt"]({encapsulation:2,styles:['\n    .solver-icon-size {\n        height: 16px;\n    }\n    .ag-root .ag-header .ag-header-container .ag-header-row .ag-header-cell[col-id="solver"] {\n                top: 15px;\n            }\n            .icon-refresh:hover{\n                cursor: pointer;\n            }\n            .icon-refresh:active{\n                transform: scale(1.04);\n            }\n            .disabled{\n                pointer-events: none;\n                cursor: none;\n            }\n            .enable{\n                pointer-events: initial;\n    }'],data:{}});function Ur(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,1,"img",[["class","solver-icon-size icon-refresh"],["matTooltip","Click to Calculate"]],[[8,"src",4]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0,i=e.component;return"longpress"===t&&(a=!1!==l["ɵnov"](e,1).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,1)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,1)._handleTouchend()&&a),"click"===t&&(a=!1!==i.getSolverForSubjectDistribution()&&a),a}),null,null)),l["ɵdid"](1,212992,null,0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{message:[0,"message"]},null)],(function(e,t){e(t,1,0,"Click to Calculate")}),(function(e,t){e(t,0,0,t.component.refreshIcon)}))}function jr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-solver-header-component",[],null,null,null,Ur,Kr)),l["ɵdid"](1,49152,null,0,Fn,[D.a],null,null)],null,null)}var Br=l["ɵccf"]("ctos-solver-header-component",Fn,jr,{},{},[]),Wr=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Hr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,4,"img",[["class","solver-icon-size icon-refresh"]],[[8,"src",4]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0,i=e.component;return"longpress"===t&&(a=!1!==l["ɵnov"](e,4).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,4)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,4)._handleTouchend()&&a),"click"===t&&(a=!1!==i.calculateSolverValues()&&a),a}),null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"hide-solver":0}),l["ɵdid"](4,212992,null,0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{message:[0,"message"]},null),(e()(),l["ɵand"](0,null,null,0))],(function(e,t){var n=t.component,l=e(t,3,0,n.toHideNodeSolver);e(t,2,0,"solver-icon-size icon-refresh",l),e(t,4,0,n.toolTipText)}),(function(e,t){e(t,0,0,t.component.refreshIcon)}))}function Yr(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,Hr)),l["ɵdid"](1,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,!t.component.isWWorStudyTarget)}),null)}function qr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-calculate-single-value-component",[],null,null,null,Yr,Wr)),l["ɵdid"](1,49152,null,0,_n,[D.a,T],null,null)],null,null)}var Jr=l["ɵccf"]("ctos-calculate-single-value-component",_n,qr,{},{},[]),Xr=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function zr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,1,"img",[["class","solver-icon-size icon-refresh"]],[[8,"src",4]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0,i=e.component;return"longpress"===t&&(a=!1!==l["ɵnov"](e,1).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,1)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,1)._handleTouchend()&&a),"click"===t&&(a=!1!==i.getSolverForMCS()&&a),a}),null,null)),l["ɵdid"](1,212992,null,0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{message:[0,"message"]},null)],(function(e,t){e(t,1,0,t.component.toolTipText)}),(function(e,t){e(t,0,0,t.component.refreshIcon)}))}function Zr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-mcs-solver-header-component",[],null,null,null,zr,Xr)),l["ɵdid"](1,49152,null,0,Nn,[D.a,T],null,null)],null,null)}var $r=l["ɵccf"]("ctos-mcs-solver-header-component",Nn,Zr,{},{},[]),Qr=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function eo(e){return l["ɵvid"](0,[l["ɵpid"](0,u.DatePipe,[l.LOCALE_ID]),(e()(),l["ɵeld"](1,0,null,null,5,"div",[["class","ctos-label-cell-renderer"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"hightlight-field":0}),(e()(),l["ɵted"](5,null,[" "," "])),l["ɵppd"](6,2)],(function(e,t){var n=t.component,l=e(t,4,0,null==n.params?null:n.params.isHighlighted);e(t,3,0,"ctos-label-cell-renderer",l)}),(function(e,t){var n=t.component,a=l["ɵunv"](t,5,0,e(t,6,0,l["ɵnov"](t,0),n.params.value,"dd-MMM-yyyy"));e(t,5,0,a)}))}function to(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-label-cell-renderer",[],null,null,null,eo,Qr)),l["ɵdid"](1,49152,null,0,jn,[],null,null)],null,null)}var no=l["ɵccf"]("ctos-label-cell-renderer",jn,to,{},{},[]),lo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ao(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" ",""])),l["ɵppd"](2,2)],null,(function(e,t){var n=t.component,a=void 0!==n.params.numDecimals?l["ɵunv"](t,1,0,e(t,2,0,l["ɵnov"](t.parent.parent,0),n.params.value,n.decimals)):n.params.value;e(t,1,0,a)}))}function io(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" (Target ",")"]))],null,(function(e,t){e(t,1,0,t.component.params.cohortEnrollmentTarget)}))}function ro(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""])),l["ɵppd"](2,2)],null,(function(e,t){var n=t.component,a=l["ɵunv"](t,1,0,e(t,2,0,l["ɵnov"](t.parent.parent,1),n.params.value,"dd-MMM-yyyy"));e(t,1,0,a)}))}function oo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,9,"div",[["class","ctos-default-cell-renderer"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"default-renderer":0,"hightlight-field":1}),(e()(),l["ɵand"](16777216,null,null,1,null,ao)),l["ɵdid"](6,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,io)),l["ɵdid"](8,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ro)),l["ɵdid"](10,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component,l=e(t,4,0,!0,null==n.params?null:n.params.isHighlighted);e(t,3,0,"ctos-default-cell-renderer",l),e(t,6,0,"number"===n.params.fieldType),e(t,8,0,n.params.cohortEnrollmentTarget&&n.params.isWW),e(t,10,0,"date"===n.params.fieldType)}),null)}function so(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"div",[["class","default-renderer"]],null,null,null,null,null)),(e()(),l["ɵted"](2,null,["",""]))],null,(function(e,t){var n=t.component;e(t,2,0,null==n.params?null:n.params.value)}))}function uo(e){return l["ɵvid"](0,[l["ɵpid"](0,u.DecimalPipe,[l.LOCALE_ID]),l["ɵpid"](0,u.DatePipe,[l.LOCALE_ID]),(e()(),l["ɵand"](16777216,null,null,1,null,oo)),l["ɵdid"](3,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,so)),l["ɵdid"](5,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,3,0,!(null!=n.params&&n.params.isMCGrid)),e(t,5,0,null==n.params?null:n.params.isMCGrid)}),null)}function co(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-default-cell-renderer",[],null,null,null,uo,lo)),l["ɵdid"](1,49152,null,0,Kn,[],null,null)],null,null)}var po=l["ɵccf"]("ctos-default-cell-renderer",Kn,co,{},{},[]),ho=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function mo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","ctos-label-cell-number-renderer"]],null,null,null,null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"hightlight-field":0}),(e()(),l["ɵted"](4,null,[" "," "]))],(function(e,t){var n=t.component,l=e(t,3,0,null==n.params?null:n.params.isHighlighted);e(t,2,0,"ctos-label-cell-number-renderer",l)}),(function(e,t){e(t,4,0,t.component.params.value)}))}function go(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-label-cell-number-renderer",[],null,null,null,mo,ho)),l["ɵdid"](1,49152,null,0,Un,[],null,null)],null,null)}var So=l["ɵccf"]("ctos-label-cell-number-renderer",Un,go,{},{},[]),fo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function vo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","ag-icon ag-icon-expanded"],["matTooltipPosition","left"],["unselectable","on"]],[[8,"title",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.expandAll()&&l),l}),null,null))],null,(function(e,t){var n=t.component;e(t,0,0,l["ɵinlineInterpolate"](1,"",null==n.customHeaderResources?null:n.customHeaderResources.ExpandAll,""))}))}function Co(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","ag-icon ag-icon-contracted"],["matTooltipPosition","left"],["unselectable","on"]],[[8,"title",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.collapseAll()&&l),l}),null,null))],null,(function(e,t){var n=t.component;e(t,0,0,l["ɵinlineInterpolate"](1,"",null==n.customHeaderResources?null:n.customHeaderResources.CollapseAll,""))}))}function yo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","ag-cell-label-container"],["role","presentation"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"span",[["class","ag-cell-wrapper ag-row-group ag-row-group-indent-0"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"span",[["class","ag-group-expanded"],["ref","eExpanded"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,vo)),l["ɵdid"](4,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["ɵand"](0,[["collapse",2]],null,0,null,Co))],(function(e,t){e(t,4,0,t.component.expand,l["ɵnov"](t,5))}),null)}function Ro(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,yo)),l["ɵdid"](1,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,t.component.showIcon)}),null)}function Do(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-grid-custom-header",[],null,null,null,Ro,fo)),l["ɵdid"](1,114688,null,0,Yn,[s.M],null,null)],(function(e,t){e(t,1,0)}),null)}var Po=l["ɵccf"]("ctos-grid-custom-header",Yn,Do,{},{},[]),bo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Eo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"span",[["class","ag-icon ag-icon-expanded wwRollUpIcon"],["unselectable","on"]],[[8,"title",0]],[[null,"click"]],(function(e,t,n){var l=!0,a=e.component;return"click"===t&&(l=!1!==a.worldWideNameClicked(!1,a.params.data)&&l),l}),null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"cohortExpand-icon":0})],(function(e,t){var n=e(t,4,0,"Cohort"==t.component.params.data.label);e(t,3,0,"ag-icon ag-icon-expanded wwRollUpIcon",n)}),(function(e,t){var n=t.component;e(t,1,0,l["ɵinlineInterpolate"](1,"",null==n.localResources?null:n.localResources.expand,""))}))}function To(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"span",[["class","ag-icon ag-icon-contracted wwRollUpIcon"],["unselectable","on"]],[[8,"title",0]],[[null,"click"]],(function(e,t,n){var l=!0,a=e.component;return"click"===t&&(l=!1!==a.worldWideNameClicked(!0,a.params.data)&&l),l}),null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"cohortExpand-icon":0})],(function(e,t){var n=e(t,4,0,"Cohort"==t.component.params.data.label);e(t,3,0,"ag-icon ag-icon-contracted wwRollUpIcon",n)}),(function(e,t){var n=t.component;e(t,1,0,l["ɵinlineInterpolate"](1,"",null==n.localResources?null:n.localResources.collapse,""))}))}function Ao(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"span",[["class","ag-group-expanded"],["ref","eExpanded"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Eo)),l["ɵdid"](2,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,To)),l["ɵdid"](4,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.params.data.isHiddenWWData),e(t,4,0,!n.params.data.isHiddenWWData)}),null)}function Io(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,Ao)),l["ɵdid"](1,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,1,0,"Y"==n.isCohortPlan&&(n.filterApplied&&("Country"==n.params.data.label||"Cohort"==n.params.data.label)||!n.filterApplied&&"Country"==n.params.data.label))}),null)}function _o(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-grid-pinned-row",[],null,null,null,Io,bo)),l["ɵdid"](1,114688,null,0,qn,[],null,null)],(function(e,t){e(t,1,0)}),null)}var No=l["ɵccf"]("ctos-grid-pinned-row",qn,_o,{},{},[]),Oo=function(){function e(){this.fb=new x.g,this.isMouseOver=!1}return e.prototype.ngOnInit=function(){this.form=this.fb.group(this.validations?{data:[this.data,this.validations]}:{data:[this.data,[]]})},e.prototype.mouseOver=function(){this.isMouseOver=!0},e.prototype.mouseLeave=function(){this.isMouseOver=!1},e}(),Mo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Fo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","message"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," is required. "]))],null,(function(e,t){e(t,1,0,t.component.label)}))}function Lo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","message"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.form.get("data").errors.minValue.errorText)}))}function wo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","message"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.form.get("data").errors.maxValue.errorText)}))}function Go(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","message"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.form.get("data").errors.afterDate.errorText)}))}function ko(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","message"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.form.get("data").errors.beforeDate.errorText)}))}function Vo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Fo)),l["ɵdid"](2,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Lo)),l["ɵdid"](4,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,wo)),l["ɵdid"](6,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Go)),l["ɵdid"](8,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ko)),l["ɵdid"](10,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.form.get("data").errors.required),e(t,4,0,n.form.get("data").errors.minValue),e(t,6,0,n.form.get("data").errors.maxValue),e(t,8,0,n.form.get("data").errors.afterDate),e(t,10,0,n.form.get("data").errors.beforeDate)}),null)}function xo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,12,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var a=!0;return"submit"===t&&(a=!1!==l["ɵnov"](e,2).onSubmit(n)&&a),"reset"===t&&(a=!1!==l["ɵnov"](e,2).onReset()&&a),a}),null,null)),l["ɵdid"](1,16384,null,0,x.G,[],null,null),l["ɵdid"](2,540672,null,0,x.l,[[8,null],[8,null]],{form:[0,"form"]},null),l["ɵprd"](2048,null,x.d,null,[x.l]),l["ɵdid"](4,16384,null,0,x.t,[[4,x.d]],null,null),(e()(),l["ɵeld"](5,0,null,null,5,"input",[["class","ctos-text-input"],["formControlName","data"],["name","data"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"mouseenter"],[null,"mouseleave"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,6)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,6).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,6)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,6)._compositionEnd(n.target.value)&&a),"mouseenter"===t&&(a=!1!==i.mouseOver()&&a),"mouseleave"===t&&(a=!1!==i.mouseLeave()&&a),a}),null,null)),l["ɵdid"](6,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵprd"](1024,null,x.q,(function(e){return[e]}),[x.e]),l["ɵdid"](8,671744,null,0,x.j,[[3,x.d],[8,null],[8,null],[6,x.q],[2,x.E]],{name:[0,"name"]},null),l["ɵprd"](2048,null,x.r,null,[x.j]),l["ɵdid"](10,16384,null,0,x.s,[[4,x.r]],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,Vo)),l["ɵdid"](12,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.form),e(t,8,0,"data"),e(t,12,0,n.form.get("data").invalid&&n.form.get("data").touched)}),(function(e,t){e(t,0,0,l["ɵnov"](t,4).ngClassUntouched,l["ɵnov"](t,4).ngClassTouched,l["ɵnov"](t,4).ngClassPristine,l["ɵnov"](t,4).ngClassDirty,l["ɵnov"](t,4).ngClassValid,l["ɵnov"](t,4).ngClassInvalid,l["ɵnov"](t,4).ngClassPending),e(t,5,0,l["ɵnov"](t,10).ngClassUntouched,l["ɵnov"](t,10).ngClassTouched,l["ɵnov"](t,10).ngClassPristine,l["ɵnov"](t,10).ngClassDirty,l["ɵnov"](t,10).ngClassValid,l["ɵnov"](t,10).ngClassInvalid,l["ɵnov"](t,10).ngClassPending)}))}var Ko=function(){function e(){}return e.prototype.agInit=function(e){e.value&&e.value.validations?(this.data=e.value.data,this.label=e.value.label,this.validations=e.value.validations):this.data=e.value},e.prototype.refresh=function(){return!1},e}(),Uo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function jo(e){return l["ɵvid"](0,[l["ɵpid"](0,u.DatePipe,[l.LOCALE_ID]),(e()(),l["ɵeld"](1,0,null,null,2,"ctos-text-input",[["type","text"]],null,null,null,xo,Mo)),l["ɵdid"](2,114688,null,0,Oo,[],{data:[0,"data"],validations:[1,"validations"],label:[2,"label"]},null),l["ɵppd"](3,2)],(function(e,t){var n=t.component,a=l["ɵunv"](t,2,0,e(t,3,0,l["ɵnov"](t,0),n.data,"dd-MMM-yyyy"));e(t,2,0,a,n.validations,n.label)}),null)}function Bo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-grid-date",[],null,null,null,jo,Uo)),l["ɵdid"](1,49152,null,0,Ko,[],null,null)],null,null)}var Wo=l["ɵccf"]("ctos-grid-date",Ko,Bo,{},{},[]),Ho=function(){function e(){}return e.prototype.agInit=function(e){this.params=e},e.prototype.refresh=function(){return!1},e}(),Yo=l["ɵcrt"]({encapsulation:0,styles:[""],data:{}});function qo(e){return l["ɵvid"](0,[l["ɵpid"](0,u.DatePipe,[l.LOCALE_ID]),(e()(),l["ɵted"](1,null,["",""])),l["ɵppd"](2,2)],null,(function(e,t){var n=t.component,a=l["ɵunv"](t,1,0,e(t,2,0,l["ɵnov"](t,0),n.params.value&&n.params.value.data?n.params.value.data:n.params.value,"dd-MMM-yyyy"));e(t,1,0,a)}))}function Jo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-grid-date",[],null,null,null,qo,Yo)),l["ɵdid"](1,49152,null,0,Ho,[],null,null)],null,null)}var Xo=l["ɵccf"]("ctos-grid-date",Ho,Jo,{},{},[]),zo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Zo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,9,"div",[["class","row log-list-container log-row"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","col-sm-3 lock"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](3,null,[" "," "])),(e()(),l["ɵeld"](4,0,null,null,1,"div",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),l["ɵted"](5,null,["",""])),(e()(),l["ɵeld"](6,0,null,null,1,"div",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),l["ɵted"](7,null,["",""])),(e()(),l["ɵeld"](8,0,null,null,1,"div",[["class","col-sm-3 txt-content"]],null,null,null,null,null)),(e()(),l["ɵted"](9,null,["",""]))],null,(function(e,t){e(t,3,0,"Lock"===t.context.$implicit.action?"lock":"lock_open"),e(t,5,0,t.context.$implicit.userName),e(t,7,0,t.context.$implicit.userId),e(t,9,0,t.context.$implicit.actionDate)}))}function $o(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["There are no logs to display."]))],null,null)}function Qo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"h3",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l["ɵdid"](1,81920,null,0,A.m,[[2,A.l],l.ElementRef,A.e],null,null),(e()(),l["ɵted"](2,null,[" "," "])),(e()(),l["ɵeld"](3,0,null,null,16,"div",[["class","country-logs-container mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l["ɵdid"](4,16384,null,0,A.j,[],null,null),(e()(),l["ɵeld"](5,0,null,null,12,"div",[["class","log-list-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,8,"div",[["class","row log-list-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,1,"div",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),l["ɵted"](8,null,["",""])),(e()(),l["ɵeld"](9,0,null,null,1,"div",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),l["ɵted"](10,null,["",""])),(e()(),l["ɵeld"](11,0,null,null,1,"div",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),l["ɵted"](12,null,["",""])),(e()(),l["ɵeld"](13,0,null,null,1,"div",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),l["ɵted"](14,null,["",""])),(e()(),l["ɵeld"](15,0,null,null,2,"div",[["class","log-list-data"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Zo)),l["ɵdid"](17,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,$o)),l["ɵdid"](19,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](20,0,null,null,4,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),l["ɵdid"](21,16384,null,0,A.f,[],null,null),(e()(),l["ɵeld"](22,0,null,null,2,"button",[["cdkFocusInitial",""],["class","ctos-btn-primary"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.ok()&&l),l}),z.b,z.a)),l["ɵdid"](23,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵted"](24,0,["",""]))],(function(e,t){var n=t.component;e(t,1,0),e(t,17,0,n.countryLogProp.logList),e(t,19,0,0===n.countryLogProp.logList.length)}),(function(e,t){var n=t.component;e(t,0,0,l["ɵnov"](t,1).id),e(t,2,0,null==n.countryLogProp?null:n.countryLogProp.resources.TITLE),e(t,8,0,null==n.countryLogProp?null:n.countryLogProp.resources.LOCK),e(t,10,0,null==n.countryLogProp?null:n.countryLogProp.resources.USER_NAME),e(t,12,0,null==n.countryLogProp?null:n.countryLogProp.resources.USER_ID),e(t,14,0,null==n.countryLogProp?null:n.countryLogProp.resources.ACTION_DATE),e(t,22,0,l["ɵnov"](t,23).disabled||null,"NoopAnimations"===l["ɵnov"](t,23)._animationMode),e(t,24,0,null==n.countryLogProp?null:n.countryLogProp.resources.OK)}))}function es(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-country-log",[],null,null,null,Qo,zo)),l["ɵdid"](1,114688,null,0,Rn,[A.l,A.a],null,null)],(function(e,t){e(t,1,0)}),null)}var ts=l["ɵccf"]("ctos-country-log",Rn,es,{},{},[]),ns=function(){function e(e,t){this.dialogRef=e,this.countryNotesProp=t,this.isEditMode=!1,this.selectionIndex=null,this.isNoteContentEnabled=!1,this.isNoteEditAccess=!1,this.noteTemplate={indicator:"",lastModifiedDate:"",userId:"",userName:"",content:""}}return e.prototype.ngOnInit=function(){this.noteTemplate=this.getEmptyNote(),this.isNoteContentEnabled=this.countryNotesProp.hasEditAccess&&this.countryNotesProp.isEditablePlan,this.isNoteEditAccess=this.countryNotesProp.hasEditAccess&&this.countryNotesProp.isEditablePlan,this.isNoteContentEnabled=!1},e.prototype.cancel=function(){this.dialogRef.close()},e.prototype.ok=function(){this.countryNotesProp.noteList.forEach((function(e){e.indicator||(e.indicator=b.lb.INSERT)})),this.dialogRef.close({action:this.countryNotesProp.resources.SAVE,noteList:this.countryNotesProp.noteList})},e.prototype.addComment=function(){this.noteTemplate.userId=this.countryNotesProp.userId,this.noteTemplate.userName=this.countryNotesProp.userName,this.noteTemplate.lastModifiedDate=dn.a.formatDate(new Date,b.y.NOTE_API_DATE_FORMAT_SMALL),this.isEditMode?(this.noteTemplate.oldUserId=this.selectedNote.userId,this.noteTemplate.isModified=!0,this.countryNotesProp.noteList[this.selectionIndex]=this.noteTemplate,this.isEditMode=!1,this.selectionIndex=null):this.countryNotesProp.noteList.push(this.noteTemplate),this.isNoteContentEnabled=!0,this.noteTemplate=this.getEmptyNote()},e.prototype.getEmptyNote=function(){return{indicator:"",lastModifiedDate:dn.a.formatDate(new Date,b.y.NOTE_API_DATE_FORMAT_SMALL),userId:this.countryNotesProp.userId,userName:this.countryNotesProp.userName,content:""}},e.prototype.onContentChange=function(e){this.noteTemplate&&this.noteTemplate.indicator&&(this.noteTemplate.indicator=b.lb.UPDATE)},e.prototype.isEnabled=function(){return!!(this.countryNotesProp.hasEditAccess&&this.countryNotesProp.isEditablePlan&&this.noteTemplate.content&&0!==this.noteTemplate.content.trim().length)},e.prototype.onNoteSelected=function(e,t){this.selectionIndex=t,this.isEditMode=!0,this.selectedNote=Ue.__assign({},e),this.noteTemplate=JSON.parse(JSON.stringify(e))},e.prototype.resetNote=function(){this.isEditMode=!1,this.selectionIndex=null,this.noteTemplate=this.getEmptyNote()},e.prototype.removeNote=function(e){this.countryNotesProp&&this.countryNotesProp.noteList&&e>-1&&e<this.countryNotesProp.noteList.length&&(this.countryNotesProp.noteList[e].indicator?(this.selectedNote=Ue.__assign({},this.countryNotesProp.noteList[e]),this.countryNotesProp.noteList[e].indicator=b.lb.DELETE,this.countryNotesProp.noteList[e].oldUserId=this.selectedNote.userId,this.countryNotesProp.noteList[e].isModified=!0,this.isNoteContentEnabled=!0):this.countryNotesProp.noteList.splice(e,1),e===this.selectionIndex&&this.resetNote())},e.prototype.isDeletedNote=function(e){return e.indicator===b.lb.DELETE},e}(),ls=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function as(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"button",[["class","btn-add-comment"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.resetNote()&&l),l}),z.b,z.a)),l["ɵdid"](1,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],{disableRipple:[0,"disableRipple"]},null),(e()(),l["ɵted"](-1,0,[" Cancel "]))],(function(e,t){e(t,1,0,!0)}),(function(e,t){e(t,0,0,l["ɵnov"](t,1).disabled||null,"NoopAnimations"===l["ɵnov"](t,1)._animationMode)}))}function is(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" add_circle_outline "]))],null,null)}function rs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,16,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,7,"textarea",[["class","form-control"],["cols","50"],["id","content"],["maxlength","1024"],["name","content"],["rows","3"]],[[8,"placeholder",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,2)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,2).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,2)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,2)._compositionEnd(n.target.value)&&a),"ngModelChange"===t&&(a=!1!==i.onContentChange(n)&&a),"ngModelChange"===t&&(a=!1!==(i.noteTemplate.content=n)&&a),a}),null,null)),l["ɵdid"](2,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](3,540672,null,0,x.o,[],{maxlength:[0,"maxlength"]},null),l["ɵprd"](1024,null,x.p,(function(e){return[e]}),[x.o]),l["ɵprd"](1024,null,x.q,(function(e){return[e]}),[x.e]),l["ɵdid"](6,671744,[["content",4]],0,x.v,[[8,null],[6,x.p],[8,null],[6,x.q]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](8,16384,null,0,x.s,[[4,x.r]],null,null),(e()(),l["ɵeld"](9,0,null,null,7,"div",[["class","row action-btn-container"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,as)),l["ɵdid"](11,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](12,0,null,null,4,"button",[["class","btn-add-comment"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.addComment()&&l),l}),z.b,z.a)),l["ɵdid"](13,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],{disabled:[0,"disabled"],disableRipple:[1,"disableRipple"]},null),(e()(),l["ɵand"](16777216,null,0,1,null,is)),l["ɵdid"](15,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](16,0,[" "," "]))],(function(e,t){var n=t.component;e(t,3,0,"1024"),e(t,6,0,"content",!n.isNoteEditAccess,n.noteTemplate.content),e(t,11,0,n.isEditMode),e(t,13,0,!n.isEnabled(),!0),e(t,15,0,!n.isEditMode)}),(function(e,t){var n=t.component;e(t,1,0,l["ɵinlineInterpolate"](1,"",null==n.countryNotesProp?null:null==n.countryNotesProp.resources?null:n.countryNotesProp.resources.TYPE_TO_ADD_COMMENT,""),l["ɵnov"](t,3).maxlength?l["ɵnov"](t,3).maxlength:null,l["ɵnov"](t,8).ngClassUntouched,l["ɵnov"](t,8).ngClassTouched,l["ɵnov"](t,8).ngClassPristine,l["ɵnov"](t,8).ngClassDirty,l["ɵnov"](t,8).ngClassValid,l["ɵnov"](t,8).ngClassInvalid,l["ɵnov"](t,8).ngClassPending),e(t,12,0,l["ɵnov"](t,13).disabled||null,"NoopAnimations"===l["ɵnov"](t,13)._animationMode),e(t,16,0,n.isEditMode?"Save Comment":null==n.countryNotesProp?null:null==n.countryNotesProp.resources?null:n.countryNotesProp.resources.ADD_COMMENT)}))}function os(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[["class","col-sm-1"]],null,null,null,null,null))],null,null)}function ss(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"div",[["class","col-sm-1 btn-remove-note"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.removeNote(e.parent.parent.context.index)&&l),l}),null,null)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵeld"](4,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" clear "]))],(function(e,t){e(t,3,0,"col-sm-1 btn-remove-note",!1===t.component.countryNotesProp.hasEditAccess?"disable":"")}),null)}function us(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ss)),l["ɵdid"](2,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](3,0,null,null,7,"div",[["class","col-sm-11 row"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onNoteSelected(e.parent.context.$implicit,e.parent.context.index)&&l),l}),null,null)),(e()(),l["ɵeld"](4,0,null,null,2,"div",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),l["ɵted"](5,null,["",""])),l["ɵppd"](6,2),(e()(),l["ɵeld"](7,0,null,null,1,"div",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),l["ɵted"](8,null,["",""])),(e()(),l["ɵeld"](9,0,null,null,1,"div",[["class","col-sm-6 txt-content"]],null,null,null,null,null)),(e()(),l["ɵted"](10,null,["",""]))],(function(e,t){var n=t.component;e(t,2,0,!(null!=n.countryNotesProp&&n.countryNotesProp.isMCGrid))}),(function(e,t){var n=l["ɵunv"](t,5,0,e(t,6,0,l["ɵnov"](t.parent.parent,0),t.parent.context.$implicit.lastModifiedDate,"dd-MMM-yyyy"));e(t,5,0,n),e(t,8,0,t.parent.context.$implicit.userId),e(t,10,0,t.parent.context.$implicit.content)}))}function ds(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","row  note-row"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,us)),l["ɵdid"](2,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,2,0,!t.component.isDeletedNote(t.context.$implicit))}),null)}function cs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"button",[["class","ctos-btn-secondary"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.cancel()&&l),l}),z.b,z.a)),l["ɵdid"](2,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵted"](3,0,["",""])),(e()(),l["ɵeld"](4,0,null,null,2,"button",[["cdkFocusInitial",""],["class","ctos-btn-primary offset-2"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.ok()&&l),l}),z.b,z.a)),l["ɵdid"](5,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],{disabled:[0,"disabled"]},null),(e()(),l["ɵted"](6,0,["",""]))],(function(e,t){e(t,5,0,!t.component.isNoteContentEnabled)}),(function(e,t){var n=t.component;e(t,1,0,l["ɵnov"](t,2).disabled||null,"NoopAnimations"===l["ɵnov"](t,2)._animationMode),e(t,3,0,null==n.countryNotesProp?null:null==n.countryNotesProp.resources?null:n.countryNotesProp.resources.CANCEL),e(t,4,0,l["ɵnov"](t,5).disabled||null,"NoopAnimations"===l["ɵnov"](t,5)._animationMode),e(t,6,0,null==n.countryNotesProp?null:null==n.countryNotesProp.resources?null:n.countryNotesProp.resources.SAVE)}))}function ps(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"button",[["class","ctos-btn-primary"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.cancel()&&l),l}),z.b,z.a)),l["ɵdid"](2,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵted"](3,0,["",""]))],null,(function(e,t){var n=t.component;e(t,1,0,l["ɵnov"](t,2).disabled||null,"NoopAnimations"===l["ɵnov"](t,2)._animationMode),e(t,3,0,null==n.countryNotesProp?null:null==n.countryNotesProp.resources?null:n.countryNotesProp.resources.OK)}))}function hs(e){return l["ɵvid"](0,[l["ɵpid"](0,u.DatePipe,[l.LOCALE_ID]),(e()(),l["ɵeld"](1,0,null,null,2,"h3",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l["ɵdid"](2,81920,null,0,A.m,[[2,A.l],l.ElementRef,A.e],null,null),(e()(),l["ɵted"](3,null,[" "," ",""])),(e()(),l["ɵeld"](4,0,null,null,17,"div",[["class","country-notes-container mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l["ɵdid"](5,16384,null,0,A.j,[],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,rs)),l["ɵdid"](7,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](8,0,null,null,13,"div",[["class","note-list-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,9,"div",[["class","row note-list-header"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,os)),l["ɵdid"](11,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](12,0,null,null,6,"div",[["class","col-sm-11 row"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,1,"div",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),l["ɵted"](14,null,["",""])),(e()(),l["ɵeld"](15,0,null,null,1,"div",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),l["ɵted"](16,null,["",""])),(e()(),l["ɵeld"](17,0,null,null,1,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵted"](18,null,["",""])),(e()(),l["ɵeld"](19,0,null,null,2,"div",[["class","note-list-data"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ds)),l["ɵdid"](21,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](22,0,null,null,5,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),l["ɵdid"](23,16384,null,0,A.f,[],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,cs)),l["ɵdid"](25,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ps)),l["ɵdid"](27,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0),e(t,7,0,!(null!=n.countryNotesProp&&n.countryNotesProp.isMCGrid)),e(t,11,0,!(null!=n.countryNotesProp&&n.countryNotesProp.isMCGrid)),e(t,21,0,n.countryNotesProp.noteList),e(t,25,0,!(null!=n.countryNotesProp&&n.countryNotesProp.isMCGrid)),e(t,27,0,null==n.countryNotesProp?null:n.countryNotesProp.isMCGrid)}),(function(e,t){var n=t.component;e(t,1,0,l["ɵnov"](t,2).id),e(t,3,0,null==n.countryNotesProp?null:null==n.countryNotesProp.resources?null:n.countryNotesProp.resources.TITLE,null==n.countryNotesProp?null:n.countryNotesProp.countryName),e(t,14,0,null==n.countryNotesProp?null:null==n.countryNotesProp.resources?null:n.countryNotesProp.resources.MODIFIED_DATE),e(t,16,0,null==n.countryNotesProp?null:null==n.countryNotesProp.resources?null:n.countryNotesProp.resources.USER_NAME),e(t,18,0,null==n.countryNotesProp?null:null==n.countryNotesProp.resources?null:n.countryNotesProp.resources.CONTENT)}))}function ms(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-country-notes",[],null,null,null,hs,ls)),l["ɵdid"](1,114688,null,0,ns,[A.l,A.a],null,null)],(function(e,t){e(t,1,0)}),null)}var gs=l["ɵccf"]("ctos-country-notes",ns,ms,{},{},[]),Ss=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function fs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"b",[],null,null,null,null,null)),(e()(),l["ɵted"](2,null,["",""]))],null,(function(e,t){var n=t.component;e(t,2,0,null==n.selectCohortResources?null:n.selectCohortResources.SelectCohorts_Randomization)}))}function vs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"b",[],null,null,null,null,null)),(e()(),l["ɵted"](2,null,["",""]))],null,(function(e,t){var n=t.component;e(t,2,0,null==n.selectCohortResources?null:n.selectCohortResources.SelectCohorts_Screening)}))}function Cs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"p",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",": "])),(e()(),l["ɵand"](16777216,null,null,1,null,fs)),l["ɵdid"](3,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,vs)),l["ɵdid"](5,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,3,0,null==n.study?null:null==n.study.info?null:n.study.info.studyCohortType.includes("R")),e(t,5,0,null==n.study?null:null==n.study.info?null:n.study.info.studyCohortType.includes("S"))}),(function(e,t){var n=t.component;e(t,1,0,null==n.selectCohortResources?null:n.selectCohortResources.SelectCohorts_CohortID_Msg)}))}function ys(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,dt.h,[ct.d,l.ElementRef],null,null),(e()(),l["ɵeld"](2,0,null,null,2,"mat-checkbox",[["class","mat-checkbox"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null]],[[null,"change"]],(function(e,t,n){var l=!0;return"change"===t&&(l=!1!==(n?e.component.masterToggle():null)&&l),l}),Al.b,Al.a)),l["ɵprd"](5120,null,x.q,(function(e){return[e]}),[Il.b]),l["ɵdid"](4,8568832,null,0,Il.b,[l.ElementRef,l.ChangeDetectorRef,m.h,l.NgZone,[8,null],[2,Il.a],[2,Q.a]],{checked:[0,"checked"],disabled:[1,"disabled"],indeterminate:[2,"indeterminate"]},{change:"change"})],(function(e,t){var n=t.component;e(t,4,0,n.selection.hasValue()&&n.isAllSelected(),n.isAllSelected(),n.selection.hasValue()&&!n.isAllSelected())}),(function(e,t){e(t,2,0,l["ɵnov"](t,4).id,null,l["ɵnov"](t,4).indeterminate,l["ɵnov"](t,4).checked,l["ɵnov"](t,4).disabled,"before"==l["ɵnov"](t,4).labelPosition,"NoopAnimations"===l["ɵnov"](t,4)._animationMode)}))}function Rs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==n.stopPropagation()&&l),l}),null,null)),l["ɵdid"](1,16384,null,0,dt.a,[ct.d,l.ElementRef],null,null),(e()(),l["ɵeld"](2,0,null,null,4,"mat-checkbox",[["class","mat-checkbox"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"change"]],(function(e,t,n){var l=!0,a=e.component;return"click"===t&&(l=!1!==n.stopPropagation()&&l),"change"===t&&(l=!1!==(n&&!e.context.$implicit.isEditable?a.selection.toggle(e.context.$implicit):null)&&l),l}),Al.b,Al.a)),l["ɵprd"](5120,null,x.q,(function(e){return[e]}),[Il.b]),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](5,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵdid"](6,8568832,null,0,Il.b,[l.ElementRef,l.ChangeDetectorRef,m.h,l.NgZone,[8,null],[2,Il.a],[2,Q.a]],{checked:[0,"checked"],disabled:[1,"disabled"]},{change:"change"})],(function(e,t){var n=t.component;e(t,5,0,t.context.$implicit.isEditable?"disableRow":""),e(t,6,0,n.selection.isSelected(t.context.$implicit),t.context.$implicit.isAdjustment||t.context.$implicit.isEditable)}),(function(e,t){e(t,2,0,l["ɵnov"](t,6).id,null,l["ɵnov"](t,6).indeterminate,l["ɵnov"](t,6).checked,l["ɵnov"](t,6).disabled,"before"==l["ɵnov"](t,6).labelPosition,"NoopAnimations"===l["ɵnov"](t,6)._animationMode)}))}function Ds(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,dt.h,[ct.d,l.ElementRef],null,null),(e()(),l["ɵted"](2,null,[" "," "]))],null,(function(e,t){var n=t.component;e(t,2,0,null==n.selectCohortResources?null:n.selectCohortResources.SelectCohorts_CohortName)}))}function Ps(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==n.stopPropagation()&&l),l}),null,null)),l["ɵdid"](1,16384,null,0,dt.a,[ct.d,l.ElementRef],null,null),(e()(),l["ɵted"](2,null,[" "," "]))],null,(function(e,t){e(t,2,0,t.context.$implicit.cohortName)}))}function bs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,dt.h,[ct.d,l.ElementRef],null,null),(e()(),l["ɵted"](2,null,[" "," "]))],null,(function(e,t){var n=t.component;e(t,2,0,null==n.selectCohortResources?null:n.selectCohortResources.SelectCohorts_Description)}))}function Es(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,3,"td",[["class","ellipse middleField mat-cell"],["mat-cell",""],["role","gridcell"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0;return"longpress"===t&&(a=!1!==l["ɵnov"](e,2).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,2)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,2)._handleTouchend()&&a),"click"===t&&(a=!1!==n.stopPropagation()&&a),a}),null,null)),l["ɵdid"](1,16384,null,0,dt.a,[ct.d,l.ElementRef],null,null),l["ɵdid"](2,212992,null,0,d.d,[c.c,l.ElementRef,p.a,l.ViewContainerRef,l.NgZone,h.a,m.c,m.h,d.b,[2,g.b],[2,d.a],[2,S.HAMMER_LOADER]],{message:[0,"message"]},null),(e()(),l["ɵted"](3,null,[" "," "])),(e()(),l["ɵand"](0,null,null,0))],(function(e,t){e(t,2,0,l["ɵinlineInterpolate"](1,"",t.context.$implicit.cohortDescription,""))}),(function(e,t){e(t,3,0,t.context.$implicit.cohortDescription)}))}function Ts(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,dt.h,[ct.d,l.ElementRef],null,null),(e()(),l["ɵted"](2,null,[" "," "]))],null,(function(e,t){var n=t.component;e(t,2,0,null==n.selectCohortResources?null:n.selectCohortResources.SelectCohorts_CohortID)}))}function As(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==n.stopPropagation()&&l),l}),null,null)),l["ɵdid"](1,16384,null,0,dt.a,[ct.d,l.ElementRef],null,null),(e()(),l["ɵted"](2,null,[" "," "]))],null,(function(e,t){e(t,2,0,t.context.$implicit.cohortID)}))}function Is(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,dt.h,[ct.d,l.ElementRef],null,null)],null,null)}function _s(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,dt.a,[ct.d,l.ElementRef],null,null)],null,null)}function Ns(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"tr",[["class","mat-header-row"],["mat-header-row",""],["role","row"]],null,null,null,pt.f,pt.b)),l["ɵprd"](6144,null,ct.k,null,[dt.j]),l["ɵdid"](2,49152,null,0,dt.j,[],null,null)],null,null)}function Os(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"tr",[["class","mat-row"],["mat-row",""],["role","row"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==(!e.context.$implicit.isAdjustment&&e.component.selection.toggle(e.context.$implicit))&&l),l}),pt.g,pt.c)),l["ɵprd"](6144,null,ct.m,null,[dt.l]),l["ɵprd"](512,null,u["ɵNgStyleImpl"],u["ɵNgStyleR2Impl"],[l.ElementRef,l.KeyValueDiffers,l.Renderer2]),l["ɵdid"](3,278528,null,0,u.NgStyle,[u["ɵNgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),l["ɵpod"](4,{"background-color":0}),l["ɵdid"](5,49152,null,0,dt.l,[],null,null)],(function(e,t){var n=t.context.$implicit.isAdjustment&&e(t,4,0,"lightgrey");e(t,3,0,n)}),null)}function Ms(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,97,"div",[["class","select-cohort-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,7,"div",[["class","row cohort-popup-head"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"div",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l["ɵdid"](4,81920,null,0,A.m,[[2,A.l],l.ElementRef,A.e],null,null),(e()(),l["ɵted"](5,null,["",""])),(e()(),l["ɵeld"](6,0,null,null,2,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Cs)),l["ɵdid"](8,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](9,0,null,null,78,"div",[["class","manage-cohort-data-table"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,77,"table",[["class","mat-table"],["mat-table",""]],null,null,null,pt.h,pt.d)),l["ɵprd"](6144,null,ct.o,null,[dt.n]),l["ɵdid"](12,2342912,null,4,dt.n,[l.IterableDiffers,l.ChangeDetectorRef,l.ElementRef,[8,null],[2,g.b],u.DOCUMENT,h.a],{dataSource:[0,"dataSource"]},null),l["ɵqud"](603979776,1,{_contentColumnDefs:1}),l["ɵqud"](603979776,2,{_contentRowDefs:1}),l["ɵqud"](603979776,3,{_contentHeaderRowDefs:1}),l["ɵqud"](603979776,4,{_contentFooterRowDefs:1}),(e()(),l["ɵeld"](17,0,null,null,12,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[dt.c]),l["ɵdid"](19,16384,null,3,dt.c,[],{name:[0,"name"]},null),l["ɵqud"](603979776,5,{cell:0}),l["ɵqud"](603979776,6,{headerCell:0}),l["ɵqud"](603979776,7,{footerCell:0}),l["ɵprd"](2048,[[1,4]],ct.d,null,[dt.c]),(e()(),l["ɵand"](0,null,null,2,null,ys)),l["ɵdid"](25,16384,null,0,dt.i,[l.TemplateRef],null,null),l["ɵprd"](2048,[[6,4]],ct.j,null,[dt.i]),(e()(),l["ɵand"](0,null,null,2,null,Rs)),l["ɵdid"](28,16384,null,0,dt.b,[l.TemplateRef],null,null),l["ɵprd"](2048,[[5,4]],ct.b,null,[dt.b]),(e()(),l["ɵeld"](30,0,null,null,12,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[dt.c]),l["ɵdid"](32,16384,null,3,dt.c,[],{name:[0,"name"]},null),l["ɵqud"](603979776,8,{cell:0}),l["ɵqud"](603979776,9,{headerCell:0}),l["ɵqud"](603979776,10,{footerCell:0}),l["ɵprd"](2048,[[1,4]],ct.d,null,[dt.c]),(e()(),l["ɵand"](0,null,null,2,null,Ds)),l["ɵdid"](38,16384,null,0,dt.i,[l.TemplateRef],null,null),l["ɵprd"](2048,[[9,4]],ct.j,null,[dt.i]),(e()(),l["ɵand"](0,null,null,2,null,Ps)),l["ɵdid"](41,16384,null,0,dt.b,[l.TemplateRef],null,null),l["ɵprd"](2048,[[8,4]],ct.b,null,[dt.b]),(e()(),l["ɵeld"](43,0,null,null,12,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[dt.c]),l["ɵdid"](45,16384,null,3,dt.c,[],{name:[0,"name"]},null),l["ɵqud"](603979776,11,{cell:0}),l["ɵqud"](603979776,12,{headerCell:0}),l["ɵqud"](603979776,13,{footerCell:0}),l["ɵprd"](2048,[[1,4]],ct.d,null,[dt.c]),(e()(),l["ɵand"](0,null,null,2,null,bs)),l["ɵdid"](51,16384,null,0,dt.i,[l.TemplateRef],null,null),l["ɵprd"](2048,[[12,4]],ct.j,null,[dt.i]),(e()(),l["ɵand"](0,null,null,2,null,Es)),l["ɵdid"](54,16384,null,0,dt.b,[l.TemplateRef],null,null),l["ɵprd"](2048,[[11,4]],ct.b,null,[dt.b]),(e()(),l["ɵeld"](56,0,null,null,12,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[dt.c]),l["ɵdid"](58,16384,null,3,dt.c,[],{name:[0,"name"]},null),l["ɵqud"](603979776,14,{cell:0}),l["ɵqud"](603979776,15,{headerCell:0}),l["ɵqud"](603979776,16,{footerCell:0}),l["ɵprd"](2048,[[1,4]],ct.d,null,[dt.c]),(e()(),l["ɵand"](0,null,null,2,null,Ts)),l["ɵdid"](64,16384,null,0,dt.i,[l.TemplateRef],null,null),l["ɵprd"](2048,[[15,4]],ct.j,null,[dt.i]),(e()(),l["ɵand"](0,null,null,2,null,As)),l["ɵdid"](67,16384,null,0,dt.b,[l.TemplateRef],null,null),l["ɵprd"](2048,[[14,4]],ct.b,null,[dt.b]),(e()(),l["ɵeld"](69,0,null,null,12,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[dt.c]),l["ɵdid"](71,16384,null,3,dt.c,[],{name:[0,"name"]},null),l["ɵqud"](603979776,17,{cell:0}),l["ɵqud"](603979776,18,{headerCell:0}),l["ɵqud"](603979776,19,{footerCell:0}),l["ɵprd"](2048,[[1,4]],ct.d,null,[dt.c]),(e()(),l["ɵand"](0,null,null,2,null,Is)),l["ɵdid"](77,16384,null,0,dt.i,[l.TemplateRef],null,null),l["ɵprd"](2048,[[18,4]],ct.j,null,[dt.i]),(e()(),l["ɵand"](0,null,null,2,null,_s)),l["ɵdid"](80,16384,null,0,dt.b,[l.TemplateRef],null,null),l["ɵprd"](2048,[[17,4]],ct.b,null,[dt.b]),(e()(),l["ɵand"](0,null,null,2,null,Ns)),l["ɵdid"](83,540672,null,0,dt.k,[l.TemplateRef,l.IterableDiffers],{columns:[0,"columns"]},null),l["ɵprd"](2048,[[3,4]],ct.l,null,[dt.k]),(e()(),l["ɵand"](0,null,null,2,null,Os)),l["ɵdid"](86,540672,null,0,dt.m,[l.TemplateRef,l.IterableDiffers],{columns:[0,"columns"]},null),l["ɵprd"](2048,[[2,4]],ct.n,null,[dt.m]),(e()(),l["ɵeld"](88,0,null,null,9,"mat-dialog-actions",[["class","mat-dialog-actions"]],null,null,null,null,null)),l["ɵdid"](89,16384,null,0,A.f,[],null,null),(e()(),l["ɵeld"](90,0,null,null,7,"div",[["class","manage-cohort-ok-cancel"]],null,null,null,null,null)),(e()(),l["ɵeld"](91,0,null,null,3,"button",[["class","cancel-btn ctos-btn-secondary mat-button"],["mat-dialog-close",""],["mat-stroked-button",""]],[[1,"aria-label",0],[1,"type",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var a=!0,i=e.component;return"click"===t&&(a=!1!==l["ɵnov"](e,92).dialogRef.close(l["ɵnov"](e,92).dialogResult)&&a),"click"===t&&(a=!1!==i.cancel()&&a),a}),z.b,z.a)),l["ɵdid"](92,606208,null,0,A.g,[[2,A.l],l.ElementRef,A.e],{dialogResult:[0,"dialogResult"]},null),l["ɵdid"](93,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵted"](94,0,["",""])),(e()(),l["ɵeld"](95,0,null,null,2,"button",[["class","ok-btn ctos-btn-primary mat-button"],["mat-flat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.ok()&&l),l}),z.b,z.a)),l["ɵdid"](96,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],{disabled:[0,"disabled"]},null),(e()(),l["ɵted"](97,0,["",""]))],(function(e,t){var n=t.component;e(t,4,0),e(t,8,0,"Y"===(null==n.study?null:null==n.study.info?null:n.study.info.cohortIndicator)),e(t,12,0,n.dataSource),e(t,19,0,"select"),e(t,32,0,"name"),e(t,45,0,"description"),e(t,58,0,"source"),e(t,71,0,"isAdjustment"),e(t,83,0,n.displayedColumns),e(t,86,0,n.displayedColumns),e(t,92,0,""),e(t,96,0,0==n.selection.selected.length)}),(function(e,t){var n=t.component;e(t,3,0,l["ɵnov"](t,4).id),e(t,5,0,null==n.selectCohortResources?null:n.selectCohortResources.SelectCohorts),e(t,91,0,l["ɵnov"](t,92).ariaLabel||null,l["ɵnov"](t,92).type,l["ɵnov"](t,93).disabled||null,"NoopAnimations"===l["ɵnov"](t,93)._animationMode),e(t,94,0,null==n.selectCohortResources?null:n.selectCohortResources.SelectCohorts_Cancel),e(t,95,0,l["ɵnov"](t,96).disabled||null,"NoopAnimations"===l["ɵnov"](t,96)._animationMode),e(t,97,0,null==n.selectCohortResources?null:n.selectCohortResources.SelectCohorts_OK)}))}function Fs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ctos-select-cohort",[],null,null,null,Ms,Ss)),l["ɵdid"](1,114688,null,0,He,[A.l,A.a,s.M],null,null)],(function(e,t){e(t,1,0)}),null)}var Ls=l["ɵccf"]("ctos-select-cohort",He,Fs,{},{},[]),ws=n("Ow6y"),Gs=n("RGOy"),ks=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Vs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,11,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](2,null,[" "," "])),(e()(),l["ɵeld"](3,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,7,"input",[["class","form-control input-box"],["ctosSignedDecimal",""],["id","RR"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,5)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,5).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,5)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,5)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,6).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,6).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,6).onTouched()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,11).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,11).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,11).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,11).onChange(n)&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.RR.value=n)&&a),a}),null,null)),l["ɵdid"](5,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](6,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](8,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](10,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵdid"](11,16384,null,0,s.V,[l.ElementRef],null,null)],(function(e,t){var n=t.component;e(t,8,0,n.bulkEditFields.RR.isDisabled,n.bulkEditFields.RR.value)}),(function(e,t){var n=t.component;e(t,2,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.RANDOMIZATION_RATE),e(t,4,0,l["ɵnov"](t,10).ngClassUntouched,l["ɵnov"](t,10).ngClassTouched,l["ɵnov"](t,10).ngClassPristine,l["ɵnov"](t,10).ngClassDirty,l["ɵnov"](t,10).ngClassValid,l["ɵnov"](t,10).ngClassInvalid,l["ɵnov"](t,10).ngClassPending)}))}function xs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,11,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](2,null,[" "," "])),(e()(),l["ɵeld"](3,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,7,"input",[["class","form-control input-box"],["ctosSignedDecimal",""],["id","SR"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,5)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,5).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,5)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,5)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,6).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,6).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,6).onTouched()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,11).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,11).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,11).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,11).onChange(n)&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.SR.value=n)&&a),a}),null,null)),l["ɵdid"](5,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](6,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](8,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](10,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵdid"](11,16384,null,0,s.V,[l.ElementRef],null,null)],(function(e,t){var n=t.component;e(t,8,0,n.bulkEditFields.SR.isDisabled,n.bulkEditFields.SR.value)}),(function(e,t){var n=t.component;e(t,2,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.SCREENING_RATE),e(t,4,0,l["ɵnov"](t,10).ngClassUntouched,l["ɵnov"](t,10).ngClassTouched,l["ɵnov"](t,10).ngClassPristine,l["ɵnov"](t,10).ngClassDirty,l["ɵnov"](t,10).ngClassValid,l["ɵnov"](t,10).ngClassInvalid,l["ɵnov"](t,10).ngClassPending)}))}function Ks(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"mat-button-toggle",[["class","toggle-button mat-button-toggle"]],[[2,"mat-button-toggle-standalone",null],[2,"mat-button-toggle-checked",null],[2,"mat-button-toggle-disabled",null],[2,"mat-button-toggle-appearance-standard",null],[1,"tabindex",0],[1,"id",0],[1,"name",0]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,1).focus()&&a),a}),Le.b,Le.a)),l["ɵdid"](1,245760,[[21,4]],0,Fe.b,[[2,Fe.c],l.ChangeDetectorRef,l.ElementRef,m.h,[8,null],[2,Fe.a]],{value:[0,"value"]},null),(e()(),l["ɵted"](2,0,[" "," "]))],(function(e,t){e(t,1,0,t.context.$implicit)}),(function(e,t){e(t,0,0,!l["ɵnov"](t,1).buttonToggleGroup,l["ɵnov"](t,1).checked,l["ɵnov"](t,1).disabled,"standard"===l["ɵnov"](t,1).appearance,-1,l["ɵnov"](t,1).id,null),e(t,2,0,t.context.$implicit)}))}function Us(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"h3",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l["ɵdid"](1,81920,null,0,A.m,[[2,A.l],l.ElementRef,A.e],null,null),(e()(),l["ɵted"](2,null,[" "," "])),(e()(),l["ɵeld"](3,0,null,null,278,"div",[["class","bulk-edit-dialog-container mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l["ɵdid"](4,16384,null,0,A.j,[],null,null),(e()(),l["ɵeld"](5,0,null,null,24,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](8,null,[" "," "])),(e()(),l["ɵeld"](9,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,7,"input",[["class","form-control input-box"],["ctosSignedInteger",""],["id","enrollmentTarget"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,11)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,11).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,11)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,11)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,12).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,12).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,12).onTouched()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,17).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,17).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,17).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,17).onChange(n)&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.enrollmentTarget.value=n)&&a),a}),null,null)),l["ɵdid"](11,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](12,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](14,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](16,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵdid"](17,16384,null,0,s.W,[l.ElementRef],null,null),(e()(),l["ɵeld"](18,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](19,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](20,null,[" "," "])),(e()(),l["ɵeld"](21,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,7,"input",[["class","form-control input-box"],["ctosSignedInteger",""],["id","daysToFSS"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"keydown"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,23)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,23).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,23)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,23)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,24).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,24).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,24).onTouched()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,29).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,29).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,29).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,29).onChange(n)&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.daysToFSS.value=n)&&a),"change"===t&&(a=!1!==i.onDaysToFSSChange(n)&&a),a}),null,null)),l["ɵdid"](23,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](24,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](26,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](28,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵdid"](29,16384,null,0,s.W,[l.ElementRef],null,null),(e()(),l["ɵeld"](30,0,null,null,70,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](31,0,null,null,34,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](32,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](33,null,[" "," "])),(e()(),l["ɵeld"](34,0,null,null,31,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](35,0,null,null,30,"mat-form-field",[["class","form-control  mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,It.b,It.a)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](37,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](38,{disableInput:0}),l["ɵdid"](39,7520256,null,9,re.c,[l.ElementRef,l.ChangeDetectorRef,[2,ue.h],[2,g.b],[2,re.a],h.a,l.NgZone,[2,Q.a]],null,null),l["ɵqud"](603979776,1,{_controlNonStatic:0}),l["ɵqud"](335544320,2,{_controlStatic:0}),l["ɵqud"](603979776,3,{_labelChildNonStatic:0}),l["ɵqud"](335544320,4,{_labelChildStatic:0}),l["ɵqud"](603979776,5,{_placeholderChild:0}),l["ɵqud"](603979776,6,{_errorChildren:1}),l["ɵqud"](603979776,7,{_hintChildren:1}),l["ɵqud"](603979776,8,{_prefixChildren:1}),l["ɵqud"](603979776,9,{_suffixChildren:1}),(e()(),l["ɵeld"](49,0,null,1,10,"input",[["class","date-control  mat-input-element mat-form-field-autofill-control"],["matInput",""]],[[1,"aria-haspopup",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"dateChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"focus"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,50)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,50).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,50)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,50)._compositionEnd(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,51)._onInput(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,51)._onChange()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,51)._onBlur()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,51)._onKeydown(n)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,58)._focusChanged(!1)&&a),"focus"===t&&(a=!1!==l["ɵnov"](e,58)._focusChanged(!0)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,58)._onInput()&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.ARTB.value=n)&&a),"dateChange"===t&&(a=!1!==i.onARTBChange(n)&&a),a}),null,null)),l["ɵdid"](50,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](51,147456,null,0,se.h,[l.ElementRef,[2,ue.a],[2,ue.e],[2,re.c]],{matDatepicker:[0,"matDatepicker"],disabled:[1,"disabled"]},{dateChange:"dateChange"}),l["ɵprd"](1024,null,x.p,(function(e){return[e]}),[se.h]),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,se.h]),l["ɵdid"](54,671744,null,0,x.v,[[8,null],[6,x.p],[8,null],[6,x.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](56,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵprd"](2048,null,oe.a,null,[se.h]),l["ɵdid"](58,999424,null,0,oe.b,[l.ElementRef,h.a,[6,x.r],[2,x.u],[2,x.l],ue.b,[6,oe.a],de.a,l.NgZone],{disabled:[0,"disabled"]},null),l["ɵprd"](2048,[[1,4],[2,4]],re.d,null,[oe.b]),(e()(),l["ɵeld"](60,0,null,4,3,"mat-datepicker-toggle",[["class","mat-datepicker-toggle"],["matSuffix",""]],[[1,"tabindex",0],[2,"mat-datepicker-toggle-active",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,62)._button.focus()&&a),a}),ce.e,ce.d)),l["ɵdid"](61,16384,[[9,4]],0,re.h,[],null,null),l["ɵdid"](62,1753088,null,1,se.k,[se.i,l.ChangeDetectorRef,[8,null]],{datepicker:[0,"datepicker"]},null),l["ɵqud"](603979776,10,{_customIcon:0}),(e()(),l["ɵeld"](64,16777216,null,1,1,"mat-datepicker",[],null,null,null,ce.f,ce.c)),l["ɵdid"](65,180224,[["ARTBDate",4]],0,se.f,[A.e,c.c,l.NgZone,l.ViewContainerRef,se.a,[2,ue.a],[2,g.b],[2,u.DOCUMENT]],null,null),(e()(),l["ɵeld"](66,0,null,null,34,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](67,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](68,null,[" "," "])),(e()(),l["ɵeld"](69,0,null,null,31,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](70,0,null,null,30,"mat-form-field",[["class","form-control  mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,It.b,It.a)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](72,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](73,{disableInput:0}),l["ɵdid"](74,7520256,null,9,re.c,[l.ElementRef,l.ChangeDetectorRef,[2,ue.h],[2,g.b],[2,re.a],h.a,l.NgZone,[2,Q.a]],null,null),l["ɵqud"](603979776,11,{_controlNonStatic:0}),l["ɵqud"](335544320,12,{_controlStatic:0}),l["ɵqud"](603979776,13,{_labelChildNonStatic:0}),l["ɵqud"](335544320,14,{_labelChildStatic:0}),l["ɵqud"](603979776,15,{_placeholderChild:0}),l["ɵqud"](603979776,16,{_errorChildren:1}),l["ɵqud"](603979776,17,{_hintChildren:1}),l["ɵqud"](603979776,18,{_prefixChildren:1}),l["ɵqud"](603979776,19,{_suffixChildren:1}),(e()(),l["ɵeld"](84,0,null,1,10,"input",[["class","date-control  mat-input-element mat-form-field-autofill-control"],["matInput",""]],[[1,"aria-haspopup",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"focus"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,85)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,85).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,85)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,85)._compositionEnd(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,86)._onInput(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,86)._onChange()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,86)._onBlur()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,86)._onKeydown(n)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,93)._focusChanged(!1)&&a),"focus"===t&&(a=!1!==l["ɵnov"](e,93)._focusChanged(!0)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,93)._onInput()&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.FSS.value=n)&&a),a}),null,null)),l["ɵdid"](85,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](86,147456,null,0,se.h,[l.ElementRef,[2,ue.a],[2,ue.e],[2,re.c]],{matDatepicker:[0,"matDatepicker"],disabled:[1,"disabled"]},null),l["ɵprd"](1024,null,x.p,(function(e){return[e]}),[se.h]),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,se.h]),l["ɵdid"](89,671744,null,0,x.v,[[8,null],[6,x.p],[8,null],[6,x.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](91,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵprd"](2048,null,oe.a,null,[se.h]),l["ɵdid"](93,999424,null,0,oe.b,[l.ElementRef,h.a,[6,x.r],[2,x.u],[2,x.l],ue.b,[6,oe.a],de.a,l.NgZone],{disabled:[0,"disabled"]},null),l["ɵprd"](2048,[[11,4],[12,4]],re.d,null,[oe.b]),(e()(),l["ɵeld"](95,0,null,4,3,"mat-datepicker-toggle",[["class","mat-datepicker-toggle"],["matSuffix",""]],[[1,"tabindex",0],[2,"mat-datepicker-toggle-active",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,97)._button.focus()&&a),a}),ce.e,ce.d)),l["ɵdid"](96,16384,[[19,4]],0,re.h,[],null,null),l["ɵdid"](97,1753088,null,1,se.k,[se.i,l.ChangeDetectorRef,[8,null]],{datepicker:[0,"datepicker"]},null),l["ɵqud"](603979776,20,{_customIcon:0}),(e()(),l["ɵeld"](99,16777216,null,1,1,"mat-datepicker",[],null,null,null,ce.f,ce.c)),l["ɵdid"](100,180224,[["FSSDate",4]],0,se.f,[A.e,c.c,l.NgZone,l.ViewContainerRef,se.a,[2,ue.a],[2,g.b],[2,u.DOCUMENT]],null,null),(e()(),l["ɵeld"](101,0,null,null,21,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](102,0,null,null,10,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](103,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](104,null,[" "," "])),(e()(),l["ɵeld"](105,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](106,0,null,null,6,"input",[["class","form-control input-box"],["id","overEnrollment"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,107)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,107).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,107)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,107)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,108).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,108).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,108).onTouched()&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.overEnrollment.value=n)&&a),a}),null,null)),l["ɵdid"](107,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](108,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](110,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](112,16384,null,0,x.s,[[4,x.r]],null,null),(e()(),l["ɵeld"](113,0,null,null,9,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](114,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](115,null,[" "," "])),(e()(),l["ɵeld"](116,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](117,0,null,null,5,"input",[["class","form-control input-box"],["id","numSites"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,118)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,118).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,118)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,118)._compositionEnd(n.target.value)&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.numSites.value=n)&&a),a}),null,null)),l["ɵdid"](118,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵprd"](1024,null,x.q,(function(e){return[e]}),[x.e]),l["ɵdid"](120,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](122,16384,null,0,x.s,[[4,x.r]],null,null),(e()(),l["ɵeld"](123,0,null,null,17,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](124,0,null,null,4,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Vs)),l["ɵdid"](126,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,xs)),l["ɵdid"](128,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](129,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](130,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](131,null,[" "," "])),(e()(),l["ɵeld"](132,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](133,0,null,null,7,"input",[["class","form-control input-box"],["ctosSignedDecimal",""],["id","SAS"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,134)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,134).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,134)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,134)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,135).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,135).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,135).onTouched()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,140).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,140).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,140).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,140).onChange(n)&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.SAS.value=n)&&a),a}),null,null)),l["ɵdid"](134,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](135,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](137,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](139,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵdid"](140,16384,null,0,s.V,[l.ElementRef],null,null),(e()(),l["ɵeld"](141,0,null,null,23,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](142,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](143,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](144,null,[" "," "])),(e()(),l["ɵeld"](145,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](146,0,null,null,7,"input",[["class","form-control input-box"],["ctosSignedDecimal",""],["id","SFR"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,147)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,147).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,147)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,147)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,148).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,148).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,148).onTouched()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,153).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,153).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,153).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,153).onChange(n)&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.SFR.value=n)&&a),a}),null,null)),l["ɵdid"](147,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](148,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](150,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](152,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵdid"](153,16384,null,0,s.V,[l.ElementRef],null,null),(e()(),l["ɵeld"](154,0,null,null,10,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](155,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](156,null,[" "," "])),(e()(),l["ɵeld"](157,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](158,0,null,null,6,"mat-button-toggle-group",[["class","toggle-group mat-button-toggle-group"],["role","group"]],[[1,"aria-disabled",0],[2,"mat-button-toggle-vertical",null],[2,"mat-button-toggle-group-appearance-standard",null]],[[null,"change"]],(function(e,t,n){var l=!0;return"change"===t&&(l=!1!==e.component.onChange(n)&&l),l}),null,null)),l["ɵprd"](5120,null,x.q,(function(e){return[e]}),[Fe.c]),l["ɵprd"](6144,null,Fe.d,null,[Fe.c]),l["ɵdid"](161,1130496,[["group",4]],1,Fe.c,[l.ChangeDetectorRef,[2,Fe.a]],{value:[0,"value"],disabled:[1,"disabled"]},{change:"change"}),l["ɵqud"](603979776,21,{_buttonToggles:1}),(e()(),l["ɵand"](16777216,null,null,1,null,Ks)),l["ɵdid"](164,278528,null,0,u.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](165,0,null,null,43,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](166,0,null,null,30,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](167,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](168,null,[" "," "])),(e()(),l["ɵeld"](169,0,null,null,27,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](170,0,null,null,26,"mat-form-field",[["class","form-control  mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,It.b,It.a)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](172,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](173,{disableInput:0}),l["ɵdid"](174,7520256,null,9,re.c,[l.ElementRef,l.ChangeDetectorRef,[2,ue.h],[2,g.b],[2,re.a],h.a,l.NgZone,[2,Q.a]],null,null),l["ɵqud"](603979776,22,{_controlNonStatic:0}),l["ɵqud"](335544320,23,{_controlStatic:0}),l["ɵqud"](603979776,24,{_labelChildNonStatic:0}),l["ɵqud"](335544320,25,{_labelChildStatic:0}),l["ɵqud"](603979776,26,{_placeholderChild:0}),l["ɵqud"](603979776,27,{_errorChildren:1}),l["ɵqud"](603979776,28,{_hintChildren:1}),l["ɵqud"](603979776,29,{_prefixChildren:1}),l["ɵqud"](603979776,30,{_suffixChildren:1}),(e()(),l["ɵeld"](184,0,[["FPA",1]],1,6,"input",[["class","date-control  mat-input-element mat-form-field-autofill-control"],["matInput",""]],[[1,"aria-haspopup",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"change"],[null,"blur"],[null,"keydown"],[null,"focus"]],(function(e,t,n){var a=!0;return"input"===t&&(a=!1!==l["ɵnov"](e,187)._onInput(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,187)._onChange()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,187)._onBlur()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,187)._onKeydown(n)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,189)._focusChanged(!1)&&a),"focus"===t&&(a=!1!==l["ɵnov"](e,189)._focusChanged(!0)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,189)._onInput()&&a),a}),null,null)),l["ɵprd"](5120,null,x.q,(function(e){return[e]}),[se.h]),l["ɵprd"](5120,null,x.p,(function(e){return[e]}),[se.h]),l["ɵdid"](187,147456,null,0,se.h,[l.ElementRef,[2,ue.a],[2,ue.e],[2,re.c]],{matDatepicker:[0,"matDatepicker"],value:[1,"value"],disabled:[2,"disabled"]},null),l["ɵprd"](2048,null,oe.a,null,[se.h]),l["ɵdid"](189,999424,null,0,oe.b,[l.ElementRef,h.a,[8,null],[2,x.u],[2,x.l],ue.b,[6,oe.a],de.a,l.NgZone],{disabled:[0,"disabled"],value:[1,"value"]},null),l["ɵprd"](2048,[[22,4],[23,4]],re.d,null,[oe.b]),(e()(),l["ɵeld"](191,0,null,4,3,"mat-datepicker-toggle",[["class","mat-datepicker-toggle"],["matSuffix",""]],[[1,"tabindex",0],[2,"mat-datepicker-toggle-active",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,193)._button.focus()&&a),a}),ce.e,ce.d)),l["ɵdid"](192,16384,[[30,4]],0,re.h,[],null,null),l["ɵdid"](193,1753088,null,1,se.k,[se.i,l.ChangeDetectorRef,[8,null]],{datepicker:[0,"datepicker"]},null),l["ɵqud"](603979776,31,{_customIcon:0}),(e()(),l["ɵeld"](195,16777216,null,1,1,"mat-datepicker",[],null,null,null,ce.f,ce.c)),l["ɵdid"](196,180224,[["FPADate",4]],0,se.f,[A.e,c.c,l.NgZone,l.ViewContainerRef,se.a,[2,ue.a],[2,g.b],[2,u.DOCUMENT]],null,null),(e()(),l["ɵeld"](197,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](198,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](199,null,[" "," "])),(e()(),l["ɵeld"](200,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](201,0,null,null,7,"input",[["class","form-control input-box"],["ctosSignedInteger",""],["id","daysTo25"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,202)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,202).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,202)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,202)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,203).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,203).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,203).onTouched()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,208).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,208).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,208).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,208).onChange(n)&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.daysTo25.value=n)&&a),a}),null,null)),l["ɵdid"](202,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](203,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](205,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](207,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵdid"](208,16384,null,0,s.W,[l.ElementRef],null,null),(e()(),l["ɵeld"](209,0,null,null,24,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](210,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](211,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](212,null,[" "," "])),(e()(),l["ɵeld"](213,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](214,0,null,null,7,"input",[["class","form-control input-box"],["ctosSignedInteger",""],["id","daysToFSI"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"keydown"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,215)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,215).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,215)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,215)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,216).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,216).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,216).onTouched()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,221).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,221).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,221).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,221).onChange(n)&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.daysToFSI.value=n)&&a),"change"===t&&(a=!1!==i.onDaysToFSIChange(n)&&a),a}),null,null)),l["ɵdid"](215,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](216,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](218,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](220,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵdid"](221,16384,null,0,s.W,[l.ElementRef],null,null),(e()(),l["ɵeld"](222,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](223,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](224,null,[" "," "])),(e()(),l["ɵeld"](225,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](226,0,null,null,7,"input",[["class","form-control input-box"],["ctosSignedInteger",""],["id","daysTo50"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,227)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,227).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,227)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,227)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,228).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,228).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,228).onTouched()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,233).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,233).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,233).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,233).onChange(n)&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.daysTo50.value=n)&&a),a}),null,null)),l["ɵdid"](227,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](228,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](230,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](232,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵdid"](233,16384,null,0,s.W,[l.ElementRef],null,null),(e()(),l["ɵeld"](234,0,null,null,47,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["ɵeld"](235,0,null,null,34,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](236,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](237,null,[" "," "])),(e()(),l["ɵeld"](238,0,null,null,31,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](239,0,null,null,30,"mat-form-field",[["class","form-control  mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,It.b,It.a)),l["ɵprd"](512,null,u["ɵNgClassImpl"],u["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](241,278528,null,0,u.NgClass,[u["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](242,{disableInput:0}),l["ɵdid"](243,7520256,null,9,re.c,[l.ElementRef,l.ChangeDetectorRef,[2,ue.h],[2,g.b],[2,re.a],h.a,l.NgZone,[2,Q.a]],null,null),l["ɵqud"](603979776,32,{_controlNonStatic:0}),l["ɵqud"](335544320,33,{_controlStatic:0}),l["ɵqud"](603979776,34,{_labelChildNonStatic:0}),l["ɵqud"](335544320,35,{_labelChildStatic:0}),l["ɵqud"](603979776,36,{_placeholderChild:0}),l["ɵqud"](603979776,37,{_errorChildren:1}),l["ɵqud"](603979776,38,{_hintChildren:1}),l["ɵqud"](603979776,39,{_prefixChildren:1}),l["ɵqud"](603979776,40,{_suffixChildren:1}),(e()(),l["ɵeld"](253,0,[["FSI",1]],1,10,"input",[["class","date-control  mat-input-element mat-form-field-autofill-control"],["matInput",""]],[[1,"aria-haspopup",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"dateChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"focus"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,254)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,254).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,254)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,254)._compositionEnd(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,255)._onInput(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,255)._onChange()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,255)._onBlur()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,255)._onKeydown(n)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,262)._focusChanged(!1)&&a),"focus"===t&&(a=!1!==l["ɵnov"](e,262)._focusChanged(!0)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,262)._onInput()&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.FSI.value=n)&&a),"dateChange"===t&&(a=!1!==i.onFSIChange(n)&&a),a}),null,null)),l["ɵdid"](254,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](255,147456,null,0,se.h,[l.ElementRef,[2,ue.a],[2,ue.e],[2,re.c]],{matDatepicker:[0,"matDatepicker"],disabled:[1,"disabled"]},{dateChange:"dateChange"}),l["ɵprd"](1024,null,x.p,(function(e){return[e]}),[se.h]),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,se.h]),l["ɵdid"](258,671744,null,0,x.v,[[8,null],[6,x.p],[8,null],[6,x.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](260,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵprd"](2048,null,oe.a,null,[se.h]),l["ɵdid"](262,999424,null,0,oe.b,[l.ElementRef,h.a,[6,x.r],[2,x.u],[2,x.l],ue.b,[6,oe.a],de.a,l.NgZone],{disabled:[0,"disabled"]},null),l["ɵprd"](2048,[[32,4],[33,4]],re.d,null,[oe.b]),(e()(),l["ɵeld"](264,0,null,4,3,"mat-datepicker-toggle",[["class","mat-datepicker-toggle"],["matSuffix",""]],[[1,"tabindex",0],[2,"mat-datepicker-toggle-active",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,266)._button.focus()&&a),a}),ce.e,ce.d)),l["ɵdid"](265,16384,[[40,4]],0,re.h,[],null,null),l["ɵdid"](266,1753088,null,1,se.k,[se.i,l.ChangeDetectorRef,[8,null]],{datepicker:[0,"datepicker"]},null),l["ɵqud"](603979776,41,{_customIcon:0}),(e()(),l["ɵeld"](268,16777216,null,1,1,"mat-datepicker",[],null,null,null,ce.f,ce.c)),l["ɵdid"](269,180224,[["FSIDate",4]],0,se.f,[A.e,c.c,l.NgZone,l.ViewContainerRef,se.a,[2,ue.a],[2,g.b],[2,u.DOCUMENT]],null,null),(e()(),l["ɵeld"](270,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](271,0,null,null,1,"div",[["class","ctos-label"]],null,null,null,null,null)),(e()(),l["ɵted"](272,null,[" "," "])),(e()(),l["ɵeld"](273,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](274,0,null,null,7,"input",[["class","form-control input-box"],["ctosSignedInteger",""],["id","daysTo90"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,275)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,275).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,275)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,275)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,276).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,276).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,276).onTouched()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,281).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,281).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,281).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,281).onChange(n)&&a),"ngModelChange"===t&&(a=!1!==(i.bulkEditFields.daysTo90.value=n)&&a),a}),null,null)),l["ɵdid"](275,16384,null,0,x.e,[l.Renderer2,l.ElementRef,[2,x.a]],null,null),l["ɵdid"](276,16384,null,0,x.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,x.q,(function(e,t){return[e,t]}),[x.e,x.x]),l["ɵdid"](278,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](280,16384,null,0,x.s,[[4,x.r]],null,null),l["ɵdid"](281,16384,null,0,s.W,[l.ElementRef],null,null),(e()(),l["ɵeld"](282,0,null,null,7,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),l["ɵdid"](283,16384,null,0,A.f,[],null,null),(e()(),l["ɵeld"](284,0,null,null,2,"button",[["class","ctos-btn-secondary"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.cancel()&&l),l}),z.b,z.a)),l["ɵdid"](285,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵted"](286,0,["",""])),(e()(),l["ɵeld"](287,0,null,null,2,"button",[["cdkFocusInitial",""],["class","ctos-btn-primary offset-2 ctos-btn-apply "],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.apply()&&l),l}),z.b,z.a)),l["ɵdid"](288,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵted"](289,0,["",""]))],(function(e,t){var n=t.component;e(t,1,0),e(t,14,0,n.bulkEditFields.enrollmentTarget.isDisabled,n.bulkEditFields.enrollmentTarget.value),e(t,26,0,n.bulkEditFields.daysToFSS.isDisabled,n.bulkEditFields.daysToFSS.value);var a=e(t,38,0,n.bulkEditFields.ARTB.isDisabled);e(t,37,0,"form-control ",a),e(t,51,0,l["ɵnov"](t,65),n.bulkEditFields.ARTB.isDisabled),e(t,54,0,n.bulkEditFields.ARTB.isDisabled,n.bulkEditFields.ARTB.value),e(t,58,0,n.bulkEditFields.ARTB.isDisabled),e(t,62,0,l["ɵnov"](t,65));var i=e(t,73,0,n.bulkEditFields.FSS.isDisabled);e(t,72,0,"form-control ",i),e(t,86,0,l["ɵnov"](t,100),n.bulkEditFields.FSS.isDisabled),e(t,89,0,n.bulkEditFields.FSS.isDisabled,n.bulkEditFields.FSS.value),e(t,93,0,n.bulkEditFields.FSS.isDisabled),e(t,97,0,l["ɵnov"](t,100)),e(t,110,0,n.bulkEditFields.overEnrollment.isDisabled,n.bulkEditFields.overEnrollment.value),e(t,120,0,n.bulkEditFields.numSites.isDisabled,n.bulkEditFields.numSites.value),e(t,126,0,n.bulkEditProp.countryOptionsData.isCohortPlan&&n.bulkEditProp.countryOptionsData.isRTypeCohortStudy||!n.bulkEditProp.countryOptionsData.isSREnabled),e(t,128,0,!n.bulkEditProp.countryOptionsData.isRTypeCohortStudy&&n.bulkEditProp.countryOptionsData.isSREnabled),e(t,137,0,n.bulkEditFields.SAS.value),e(t,150,0,n.bulkEditFields.SFR.value),e(t,161,0,n.bulkEditFields.SI.value,n.bulkEditFields.SI.isDisabled),e(t,164,0,n.labels);var r=e(t,173,0,n.bulkEditFields.FPA.isDisabled);e(t,172,0,"form-control ",r),e(t,187,0,l["ɵnov"](t,196),n.bulkEditFields.FPA.value,n.bulkEditFields.FPA.isDisabled),e(t,189,0,n.bulkEditFields.FPA.isDisabled,n.bulkEditFields.FPA.value),e(t,193,0,l["ɵnov"](t,196)),e(t,205,0,n.bulkEditFields.daysTo25.isDisabled,n.bulkEditFields.daysTo25.value),e(t,218,0,!l["ɵnov"](t,184).value||""===l["ɵnov"](t,184).value.trim(),n.bulkEditFields.daysToFSI.value),e(t,230,0,n.bulkEditFields.daysTo50.isDisabled,n.bulkEditFields.daysTo50.value);var o=e(t,242,0,n.bulkEditFields.FSI.isDisabled);e(t,241,0,"form-control ",o),e(t,255,0,l["ɵnov"](t,269),!(!l["ɵnov"](t,184).value||""===l["ɵnov"](t,184).value.trim())),e(t,258,0,!(!l["ɵnov"](t,184).value||""===l["ɵnov"](t,184).value.trim()),n.bulkEditFields.FSI.value),e(t,262,0,!(!l["ɵnov"](t,184).value||""===l["ɵnov"](t,184).value.trim())),e(t,266,0,l["ɵnov"](t,269)),e(t,278,0,n.bulkEditFields.daysTo90.isDisabled,n.bulkEditFields.daysTo90.value)}),(function(e,t){var n=t.component;e(t,0,0,l["ɵnov"](t,1).id),e(t,2,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.BULK_EDIT_SELECTED_COUNTRIES),e(t,8,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.RANDOMIZATION_TARGET),e(t,10,0,l["ɵnov"](t,16).ngClassUntouched,l["ɵnov"](t,16).ngClassTouched,l["ɵnov"](t,16).ngClassPristine,l["ɵnov"](t,16).ngClassDirty,l["ɵnov"](t,16).ngClassValid,l["ɵnov"](t,16).ngClassInvalid,l["ɵnov"](t,16).ngClassPending),e(t,20,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.DAYS_FROM_FSI_TO_FSS),e(t,22,0,l["ɵnov"](t,28).ngClassUntouched,l["ɵnov"](t,28).ngClassTouched,l["ɵnov"](t,28).ngClassPristine,l["ɵnov"](t,28).ngClassDirty,l["ɵnov"](t,28).ngClassValid,l["ɵnov"](t,28).ngClassInvalid,l["ɵnov"](t,28).ngClassPending),e(t,33,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.ACHIEVE_RANDOMIZATION_BY),e(t,35,1,["standard"==l["ɵnov"](t,39).appearance,"fill"==l["ɵnov"](t,39).appearance,"outline"==l["ɵnov"](t,39).appearance,"legacy"==l["ɵnov"](t,39).appearance,l["ɵnov"](t,39)._control.errorState,l["ɵnov"](t,39)._canLabelFloat,l["ɵnov"](t,39)._shouldLabelFloat(),l["ɵnov"](t,39)._hasFloatingLabel(),l["ɵnov"](t,39)._hideControlPlaceholder(),l["ɵnov"](t,39)._control.disabled,l["ɵnov"](t,39)._control.autofilled,l["ɵnov"](t,39)._control.focused,"accent"==l["ɵnov"](t,39).color,"warn"==l["ɵnov"](t,39).color,l["ɵnov"](t,39)._shouldForward("untouched"),l["ɵnov"](t,39)._shouldForward("touched"),l["ɵnov"](t,39)._shouldForward("pristine"),l["ɵnov"](t,39)._shouldForward("dirty"),l["ɵnov"](t,39)._shouldForward("valid"),l["ɵnov"](t,39)._shouldForward("invalid"),l["ɵnov"](t,39)._shouldForward("pending"),!l["ɵnov"](t,39)._animationsEnabled]),e(t,49,1,[l["ɵnov"](t,51)._datepicker?"dialog":null,(null==l["ɵnov"](t,51)._datepicker?null:l["ɵnov"](t,51)._datepicker.opened)&&l["ɵnov"](t,51)._datepicker.id||null,l["ɵnov"](t,51).min?l["ɵnov"](t,51)._dateAdapter.toIso8601(l["ɵnov"](t,51).min):null,l["ɵnov"](t,51).max?l["ɵnov"](t,51)._dateAdapter.toIso8601(l["ɵnov"](t,51).max):null,l["ɵnov"](t,51).disabled,l["ɵnov"](t,56).ngClassUntouched,l["ɵnov"](t,56).ngClassTouched,l["ɵnov"](t,56).ngClassPristine,l["ɵnov"](t,56).ngClassDirty,l["ɵnov"](t,56).ngClassValid,l["ɵnov"](t,56).ngClassInvalid,l["ɵnov"](t,56).ngClassPending,l["ɵnov"](t,58)._isServer,l["ɵnov"](t,58).id,l["ɵnov"](t,58).placeholder,l["ɵnov"](t,58).disabled,l["ɵnov"](t,58).required,l["ɵnov"](t,58).readonly&&!l["ɵnov"](t,58)._isNativeSelect||null,l["ɵnov"](t,58)._ariaDescribedby||null,l["ɵnov"](t,58).errorState,l["ɵnov"](t,58).required.toString()]),e(t,60,0,-1,l["ɵnov"](t,62).datepicker&&l["ɵnov"](t,62).datepicker.opened,l["ɵnov"](t,62).datepicker&&"accent"===l["ɵnov"](t,62).datepicker.color,l["ɵnov"](t,62).datepicker&&"warn"===l["ɵnov"](t,62).datepicker.color),e(t,68,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.FIRST_SUBJECT_SCREENED),e(t,70,1,["standard"==l["ɵnov"](t,74).appearance,"fill"==l["ɵnov"](t,74).appearance,"outline"==l["ɵnov"](t,74).appearance,"legacy"==l["ɵnov"](t,74).appearance,l["ɵnov"](t,74)._control.errorState,l["ɵnov"](t,74)._canLabelFloat,l["ɵnov"](t,74)._shouldLabelFloat(),l["ɵnov"](t,74)._hasFloatingLabel(),l["ɵnov"](t,74)._hideControlPlaceholder(),l["ɵnov"](t,74)._control.disabled,l["ɵnov"](t,74)._control.autofilled,l["ɵnov"](t,74)._control.focused,"accent"==l["ɵnov"](t,74).color,"warn"==l["ɵnov"](t,74).color,l["ɵnov"](t,74)._shouldForward("untouched"),l["ɵnov"](t,74)._shouldForward("touched"),l["ɵnov"](t,74)._shouldForward("pristine"),l["ɵnov"](t,74)._shouldForward("dirty"),l["ɵnov"](t,74)._shouldForward("valid"),l["ɵnov"](t,74)._shouldForward("invalid"),l["ɵnov"](t,74)._shouldForward("pending"),!l["ɵnov"](t,74)._animationsEnabled]),e(t,84,1,[l["ɵnov"](t,86)._datepicker?"dialog":null,(null==l["ɵnov"](t,86)._datepicker?null:l["ɵnov"](t,86)._datepicker.opened)&&l["ɵnov"](t,86)._datepicker.id||null,l["ɵnov"](t,86).min?l["ɵnov"](t,86)._dateAdapter.toIso8601(l["ɵnov"](t,86).min):null,l["ɵnov"](t,86).max?l["ɵnov"](t,86)._dateAdapter.toIso8601(l["ɵnov"](t,86).max):null,l["ɵnov"](t,86).disabled,l["ɵnov"](t,91).ngClassUntouched,l["ɵnov"](t,91).ngClassTouched,l["ɵnov"](t,91).ngClassPristine,l["ɵnov"](t,91).ngClassDirty,l["ɵnov"](t,91).ngClassValid,l["ɵnov"](t,91).ngClassInvalid,l["ɵnov"](t,91).ngClassPending,l["ɵnov"](t,93)._isServer,l["ɵnov"](t,93).id,l["ɵnov"](t,93).placeholder,l["ɵnov"](t,93).disabled,l["ɵnov"](t,93).required,l["ɵnov"](t,93).readonly&&!l["ɵnov"](t,93)._isNativeSelect||null,l["ɵnov"](t,93)._ariaDescribedby||null,l["ɵnov"](t,93).errorState,l["ɵnov"](t,93).required.toString()]),e(t,95,0,-1,l["ɵnov"](t,97).datepicker&&l["ɵnov"](t,97).datepicker.opened,l["ɵnov"](t,97).datepicker&&"accent"===l["ɵnov"](t,97).datepicker.color,l["ɵnov"](t,97).datepicker&&"warn"===l["ɵnov"](t,97).datepicker.color),e(t,104,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.OVER_ENROLLMENT),e(t,106,0,l["ɵnov"](t,112).ngClassUntouched,l["ɵnov"](t,112).ngClassTouched,l["ɵnov"](t,112).ngClassPristine,l["ɵnov"](t,112).ngClassDirty,l["ɵnov"](t,112).ngClassValid,l["ɵnov"](t,112).ngClassInvalid,l["ɵnov"](t,112).ngClassPending),e(t,115,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.NUMBER_OF_SITES),e(t,117,0,l["ɵnov"](t,122).ngClassUntouched,l["ɵnov"](t,122).ngClassTouched,l["ɵnov"](t,122).ngClassPristine,l["ɵnov"](t,122).ngClassDirty,l["ɵnov"](t,122).ngClassValid,l["ɵnov"](t,122).ngClassInvalid,l["ɵnov"](t,122).ngClassPending),e(t,131,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.SITES_ACTIVELY_SCREENING_PERCENTAGE),e(t,133,0,l["ɵnov"](t,139).ngClassUntouched,l["ɵnov"](t,139).ngClassTouched,l["ɵnov"](t,139).ngClassPristine,l["ɵnov"](t,139).ngClassDirty,l["ɵnov"](t,139).ngClassValid,l["ɵnov"](t,139).ngClassInvalid,l["ɵnov"](t,139).ngClassPending),e(t,144,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.SCREEN_FAILURE_PERCENTAGE),e(t,146,0,l["ɵnov"](t,152).ngClassUntouched,l["ɵnov"](t,152).ngClassTouched,l["ɵnov"](t,152).ngClassPristine,l["ɵnov"](t,152).ngClassDirty,l["ɵnov"](t,152).ngClassValid,l["ɵnov"](t,152).ngClassInvalid,l["ɵnov"](t,152).ngClassPending),e(t,156,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.SITE_INITIATION_METHOD),e(t,158,0,l["ɵnov"](t,161).disabled,l["ɵnov"](t,161).vertical,"standard"===l["ɵnov"](t,161).appearance),e(t,168,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.FINAL_PROTOCOL_APPROVED),e(t,170,1,["standard"==l["ɵnov"](t,174).appearance,"fill"==l["ɵnov"](t,174).appearance,"outline"==l["ɵnov"](t,174).appearance,"legacy"==l["ɵnov"](t,174).appearance,l["ɵnov"](t,174)._control.errorState,l["ɵnov"](t,174)._canLabelFloat,l["ɵnov"](t,174)._shouldLabelFloat(),l["ɵnov"](t,174)._hasFloatingLabel(),l["ɵnov"](t,174)._hideControlPlaceholder(),l["ɵnov"](t,174)._control.disabled,l["ɵnov"](t,174)._control.autofilled,l["ɵnov"](t,174)._control.focused,"accent"==l["ɵnov"](t,174).color,"warn"==l["ɵnov"](t,174).color,l["ɵnov"](t,174)._shouldForward("untouched"),l["ɵnov"](t,174)._shouldForward("touched"),l["ɵnov"](t,174)._shouldForward("pristine"),l["ɵnov"](t,174)._shouldForward("dirty"),l["ɵnov"](t,174)._shouldForward("valid"),l["ɵnov"](t,174)._shouldForward("invalid"),l["ɵnov"](t,174)._shouldForward("pending"),!l["ɵnov"](t,174)._animationsEnabled]),e(t,184,1,[l["ɵnov"](t,187)._datepicker?"dialog":null,(null==l["ɵnov"](t,187)._datepicker?null:l["ɵnov"](t,187)._datepicker.opened)&&l["ɵnov"](t,187)._datepicker.id||null,l["ɵnov"](t,187).min?l["ɵnov"](t,187)._dateAdapter.toIso8601(l["ɵnov"](t,187).min):null,l["ɵnov"](t,187).max?l["ɵnov"](t,187)._dateAdapter.toIso8601(l["ɵnov"](t,187).max):null,l["ɵnov"](t,187).disabled,l["ɵnov"](t,189)._isServer,l["ɵnov"](t,189).id,l["ɵnov"](t,189).placeholder,l["ɵnov"](t,189).disabled,l["ɵnov"](t,189).required,l["ɵnov"](t,189).readonly&&!l["ɵnov"](t,189)._isNativeSelect||null,l["ɵnov"](t,189)._ariaDescribedby||null,l["ɵnov"](t,189).errorState,l["ɵnov"](t,189).required.toString()]),e(t,191,0,-1,l["ɵnov"](t,193).datepicker&&l["ɵnov"](t,193).datepicker.opened,l["ɵnov"](t,193).datepicker&&"accent"===l["ɵnov"](t,193).datepicker.color,l["ɵnov"](t,193).datepicker&&"warn"===l["ɵnov"](t,193).datepicker.color),e(t,199,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.DAYS_TO_25_PERCENT_SITES_INITIATED),e(t,201,0,l["ɵnov"](t,207).ngClassUntouched,l["ɵnov"](t,207).ngClassTouched,l["ɵnov"](t,207).ngClassPristine,l["ɵnov"](t,207).ngClassDirty,l["ɵnov"](t,207).ngClassValid,l["ɵnov"](t,207).ngClassInvalid,l["ɵnov"](t,207).ngClassPending),e(t,212,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.DAYS_FROM_FPA_TO_FSI),e(t,214,0,l["ɵnov"](t,220).ngClassUntouched,l["ɵnov"](t,220).ngClassTouched,l["ɵnov"](t,220).ngClassPristine,l["ɵnov"](t,220).ngClassDirty,l["ɵnov"](t,220).ngClassValid,l["ɵnov"](t,220).ngClassInvalid,l["ɵnov"](t,220).ngClassPending),e(t,224,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.DAYS_TO_50_PERCENT_SITES_INITIATED),e(t,226,0,l["ɵnov"](t,232).ngClassUntouched,l["ɵnov"](t,232).ngClassTouched,l["ɵnov"](t,232).ngClassPristine,l["ɵnov"](t,232).ngClassDirty,l["ɵnov"](t,232).ngClassValid,l["ɵnov"](t,232).ngClassInvalid,l["ɵnov"](t,232).ngClassPending),e(t,237,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.FIRST_SITE_INITIATED),e(t,239,1,["standard"==l["ɵnov"](t,243).appearance,"fill"==l["ɵnov"](t,243).appearance,"outline"==l["ɵnov"](t,243).appearance,"legacy"==l["ɵnov"](t,243).appearance,l["ɵnov"](t,243)._control.errorState,l["ɵnov"](t,243)._canLabelFloat,l["ɵnov"](t,243)._shouldLabelFloat(),l["ɵnov"](t,243)._hasFloatingLabel(),l["ɵnov"](t,243)._hideControlPlaceholder(),l["ɵnov"](t,243)._control.disabled,l["ɵnov"](t,243)._control.autofilled,l["ɵnov"](t,243)._control.focused,"accent"==l["ɵnov"](t,243).color,"warn"==l["ɵnov"](t,243).color,l["ɵnov"](t,243)._shouldForward("untouched"),l["ɵnov"](t,243)._shouldForward("touched"),l["ɵnov"](t,243)._shouldForward("pristine"),l["ɵnov"](t,243)._shouldForward("dirty"),l["ɵnov"](t,243)._shouldForward("valid"),l["ɵnov"](t,243)._shouldForward("invalid"),l["ɵnov"](t,243)._shouldForward("pending"),!l["ɵnov"](t,243)._animationsEnabled]),e(t,253,1,[l["ɵnov"](t,255)._datepicker?"dialog":null,(null==l["ɵnov"](t,255)._datepicker?null:l["ɵnov"](t,255)._datepicker.opened)&&l["ɵnov"](t,255)._datepicker.id||null,l["ɵnov"](t,255).min?l["ɵnov"](t,255)._dateAdapter.toIso8601(l["ɵnov"](t,255).min):null,l["ɵnov"](t,255).max?l["ɵnov"](t,255)._dateAdapter.toIso8601(l["ɵnov"](t,255).max):null,l["ɵnov"](t,255).disabled,l["ɵnov"](t,260).ngClassUntouched,l["ɵnov"](t,260).ngClassTouched,l["ɵnov"](t,260).ngClassPristine,l["ɵnov"](t,260).ngClassDirty,l["ɵnov"](t,260).ngClassValid,l["ɵnov"](t,260).ngClassInvalid,l["ɵnov"](t,260).ngClassPending,l["ɵnov"](t,262)._isServer,l["ɵnov"](t,262).id,l["ɵnov"](t,262).placeholder,l["ɵnov"](t,262).disabled,l["ɵnov"](t,262).required,l["ɵnov"](t,262).readonly&&!l["ɵnov"](t,262)._isNativeSelect||null,l["ɵnov"](t,262)._ariaDescribedby||null,l["ɵnov"](t,262).errorState,l["ɵnov"](t,262).required.toString()]),e(t,264,0,-1,l["ɵnov"](t,266).datepicker&&l["ɵnov"](t,266).datepicker.opened,l["ɵnov"](t,266).datepicker&&"accent"===l["ɵnov"](t,266).datepicker.color,l["ɵnov"](t,266).datepicker&&"warn"===l["ɵnov"](t,266).datepicker.color),e(t,272,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.DAYS_TO_90_PERCENT_SITES_INITIATED),e(t,274,0,l["ɵnov"](t,280).ngClassUntouched,l["ɵnov"](t,280).ngClassTouched,l["ɵnov"](t,280).ngClassPristine,l["ɵnov"](t,280).ngClassDirty,l["ɵnov"](t,280).ngClassValid,l["ɵnov"](t,280).ngClassInvalid,l["ɵnov"](t,280).ngClassPending),e(t,284,0,l["ɵnov"](t,285).disabled||null,"NoopAnimations"===l["ɵnov"](t,285)._animationMode),e(t,286,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.CANCEL),e(t,287,0,l["ɵnov"](t,288).disabled||null,"NoopAnimations"===l["ɵnov"](t,288)._animationMode),e(t,289,0,null==n.bulkEditProp?null:n.bulkEditProp.resources.APPLY)}))}function js(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ctos-bulk-edit-dialog",[],null,null,null,Us,ks)),l["ɵprd"](512,null,yr,yr,[]),l["ɵdid"](2,114688,null,0,Rr,[A.l,A.a,yr],null,null)],(function(e,t){e(t,2,0)}),null)}var Bs=l["ɵccf"]("ctos-bulk-edit-dialog",Rr,js,{},{},[]),Ws=n("r9gR"),Hs=n("Z0E0"),Ys=n("ynHq"),qs=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Js(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","confirmation-box"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,6,"div",[["class","checkBox-block"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,5,"mat-checkbox",[["class","mat-checkbox"],["id","checkbox"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"]],(function(e,t,n){var l=!0,a=e.component;return"ngModelChange"===t&&(l=!1!==(a.checked=n)&&l),"change"===t&&(l=!1!==a.onCheckboxChange()&&l),l}),Al.b,Al.a)),l["ɵdid"](3,8568832,null,0,Il.b,[l.ElementRef,l.ChangeDetectorRef,m.h,l.NgZone,[8,null],[2,Il.a],[2,Q.a]],{id:[0,"id"]},{change:"change"}),l["ɵprd"](1024,null,x.q,(function(e){return[e]}),[Il.b]),l["ɵdid"](5,671744,null,0,x.v,[[8,null],[8,null],[8,null],[6,x.q]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,x.r,null,[x.v]),l["ɵdid"](7,16384,null,0,x.s,[[4,x.r]],null,null),(e()(),l["ɵeld"](8,0,null,null,2,"div",[["class","overideText"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,1,"span",[["class","ctos-labels"]],null,null,null,null,null)),(e()(),l["ɵted"](10,null,["",""]))],(function(e,t){var n=t.component;e(t,3,0,"checkbox"),e(t,5,0,n.checked)}),(function(e,t){var n=t.component;e(t,2,1,[l["ɵnov"](t,3).id,null,l["ɵnov"](t,3).indeterminate,l["ɵnov"](t,3).checked,l["ɵnov"](t,3).disabled,"before"==l["ɵnov"](t,3).labelPosition,"NoopAnimations"===l["ɵnov"](t,3)._animationMode,l["ɵnov"](t,7).ngClassUntouched,l["ɵnov"](t,7).ngClassTouched,l["ɵnov"](t,7).ngClassPristine,l["ɵnov"](t,7).ngClassDirty,l["ɵnov"](t,7).ngClassValid,l["ɵnov"](t,7).ngClassInvalid,l["ɵnov"](t,7).ngClassPending]),e(t,10,0,n.siLabels.CUSTOM_OVERRIDE_MESSAGE)}))}function Xs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,16,"div",[["class","mce-site-initiation"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"h2",[["class","ctos-card-header ctos-card-title sub-header heading"]],null,null,null,null,null)),(e()(),l["ɵted"](3,null,["",""])),(e()(),l["ɵeld"](4,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,2,"ctos-si-custom-scheduler",[],null,[[null,"cohortsMapped"],[null,"changeOfUsedCohortKeys"]],(function(e,t,n){var l=!0,a=e.component;return"cohortsMapped"===t&&(l=!1!==a.updateSites(n)&&l),"changeOfUsedCohortKeys"===t&&(l=!1!==a.triggerChangeOfUsedCohortKeys()&&l),l}),Ws.b,Ws.a)),l["ɵprd"](512,null,Hs.a,Hs.a,[s.D,s.M,A.e,o.cb,x.g]),l["ɵdid"](7,770048,null,0,Ys.a,[Hs.a],{siCustomSchedulerControls:[0,"siCustomSchedulerControls"],siCustomSchedulerData:[1,"siCustomSchedulerData"]},{cohortsMapped:"cohortsMapped",changeOfUsedCohortKeys:"changeOfUsedCohortKeys"}),(e()(),l["ɵand"](16777216,null,null,1,null,Js)),l["ɵdid"](9,16384,null,0,u.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](10,0,null,null,6,"div",[["class","footerButtons"]],null,null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,2,"button",[["class","float-left ctos-btn-secondary"],["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.cancel()&&l),l}),z.b,z.a)),l["ɵdid"](12,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],null,null),(e()(),l["ɵted"](13,0,["",""])),(e()(),l["ɵeld"](14,0,null,null,2,"button",[["class"," okButton ctos-btn-primary"],["mat-flat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.ok()&&l),l}),z.b,z.a)),l["ɵdid"](15,180224,null,0,$.b,[l.ElementRef,m.h,[2,Q.a]],{disabled:[0,"disabled"]},null),(e()(),l["ɵted"](16,0,["",""]))],(function(e,t){var n=t.component;e(t,7,0,n.siCustomSchedulerControls,n.siCustomSchedulerData),e(t,9,0,n.showCheckBox),e(t,15,0,!n.enableOkButton)}),(function(e,t){var n=t.component;e(t,3,0,n.siLabels.CUSTOM_SITE_INITIATION),e(t,11,0,l["ɵnov"](t,12).disabled||null,"NoopAnimations"===l["ɵnov"](t,12)._animationMode),e(t,13,0,n.siLabels.Cancel),e(t,14,0,l["ɵnov"](t,15).disabled||null,"NoopAnimations"===l["ɵnov"](t,15)._animationMode),e(t,16,0,n.siLabels.OK)}))}function zs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ctos-mce-site-initiation",[],null,null,null,Xs,qs)),l["ɵprd"](131584,null,Cn,Cn,[R.a,s.M,x.g,y.a,v.n,o.cb]),l["ɵdid"](2,245760,null,0,yn,[A.l,A.a,s.M,Cn],null,null)],(function(e,t){e(t,2,0)}),null)}var Zs=l["ɵccf"]("ctos-mce-site-initiation",yn,zs,{},{},[]),$s=n("D5nm"),Qs=n("7qGT"),eu=n("ObLR"),tu=n("lrIK"),nu=n("bhCd"),lu=function(){function e(e){this.localeAppResourcesService=e}return e.prototype.resolve=function(){return Object(F.a)(this.localeAppResourcesService.getResource("PLNDT_IN_PROGRESS"))},e}(),au=n("BpAa"),iu=n("GSwp"),ru=n("kiOF"),ou=n("65/C"),su=function(){return n.e(14).then(n.bind(null,"tU5y")).then((function(e){return e.PlanPropertyModuleNgFactory}))},uu={preload:!0,paramKey:"plankey",helpId:s.E.PLAN_PROPERTIES_VIEW},du={helpId:s.E.PLAN_DESIGN_VIEW},cu={helpId:s.E.COUNTRIES_VIEW},pu={preload:!0},hu=function(){return n.e(13).then(n.bind(null,"NbSZ")).then((function(e){return e.CountryDetailsModuleNgFactory}))},mu={preload:!0,paramKey:"countrykey",paramType:"number",routePath:["/plans","countries","invalid"]},gu=function(){return n.e(15).then(n.bind(null,"ehqr")).then((function(e){return e.RateAdjustmentModuleNgFactory}))},Su={helpId:s.E.RATE_ADJUSTMENTS_VIEW},fu={helpId:s.E.REPORTS_VIEW},vu=function(){return function(){}}(),Cu=n("abkR"),yu=n("w9fW"),Ru=n("e5Hd"),Du=n("QIIz"),Pu=n("JpOG"),bu=n("tEO3"),Eu=n("u/zR"),Tu=n("Pp+3"),Au=n("/mMU"),Iu=n("RtN7"),_u=n("r5w+"),Nu=n("FJLO"),Ou=n("O+zZ"),Mu=n("PVko"),Fu=n("tp4h"),Lu=n("z9W5"),wu=n("PhZK"),Gu=n("vlok"),ku=n("l6BU"),Vu=n("OJVq"),xu=n("PCNd"),Ku=n("9C04"),Uu=n("XmUu"),ju=function(){return function(){}}(),Bu=function(){return function(){}}();n.d(t,"PlanDetailsModuleNgFactory",(function(){return Wu}));var Wu=l["ɵcmf"](a,[],(function(e){return l["ɵmod"]([l["ɵmpd"](512,l.ComponentFactoryResolver,l["ɵCodegenComponentFactoryResolver"],[[8,[i.a,X,ut,ga,ya,Ta,Aa.a,Ia.a,_a.a,_a.b,ce.b,ce.a,f.t,f.u,f.b,f.a,Na.a,f.c,Oa.a,r.y,r.x,r.a,Ma.a,_l.a,Fa.a,La.a,qa,$a,li,Ri,Ei,Li,ji,qi,Zi,ar,ur,hr,vr,Nr,wr,xr,Br,Jr,$r,no,po,So,Po,No,Wo,Xo,ts,gs,Ls,ws.a,Gs.a,Bs,Zs]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["ɵmpd"](4608,x.D,x.D,[]),l["ɵmpd"](4608,u.NgLocalization,u.NgLocaleLocalization,[l.LOCALE_ID,[2,u["ɵangular_packages_common_common_a"]]]),l["ɵmpd"](4608,x.g,x.g,[]),l["ɵmpd"](4608,c.c,c.c,[c.i,c.e,l.ComponentFactoryResolver,c.h,c.f,l.Injector,l.NgZone,u.DOCUMENT,g.b,[2,u.Location]]),l["ɵmpd"](5120,c.j,c.k,[c.c]),l["ɵmpd"](5120,Z.c,s.eb,[c.c]),l["ɵmpd"](5120,A.c,A.d,[c.c]),l["ɵmpd"](135680,A.e,A.e,[c.c,l.Injector,[2,u.Location],[2,A.b],A.c,[3,A.e],c.e]),l["ɵmpd"](4608,Mt.c,Mt.c,[]),l["ɵmpd"](5120,d.b,d.c,[c.c]),l["ɵmpd"](4608,S.HAMMER_GESTURE_CONFIG,ue.c,[[2,ue.g],[2,ue.l]]),l["ɵmpd"](5120,$s.b,s.eb,[c.c]),l["ɵmpd"](135680,m.h,m.h,[l.NgZone,h.a]),l["ɵmpd"](4608,Kt.f,Kt.f,[l.TemplateRef]),l["ɵmpd"](4608,ue.a,s.db,[ue.f]),l["ɵmpd"](5120,Nt.a,s.eb,[c.c]),l["ɵmpd"](4608,ue.b,ue.b,[]),l["ɵmpd"](4608,se.i,se.i,[]),l["ɵmpd"](5120,se.a,se.b,[c.c]),l["ɵmpd"](5120,Qs.b,Qs.a,[[3,Qs.b]]),l["ɵmpd"](4608,s.j,s.j,[v.a]),l["ɵmpd"](4608,u.DatePipe,u.DatePipe,[l.LOCALE_ID]),l["ɵmpd"](4608,s.R,s.R,[u.DatePipe,s.M]),l["ɵmpd"](4608,s.X,s.X,[c.c]),l["ɵmpd"](4608,eu.a,eu.a,[l.ApplicationRef,l.ComponentFactoryResolver,l.Injector]),l["ɵmpd"](4608,tu.a,tu.a,[eu.a]),l["ɵmpd"](4608,o.d,o.d,[s.C,s.U,o.cb,o.e,s.M,s.i,o.q,o.kb,s.r,s.N,o.ab]),l["ɵmpd"](4608,u.DecimalPipe,u.DecimalPipe,[l.LOCALE_ID]),l["ɵmpd"](4608,o.J,o.J,[]),l["ɵmpd"](4608,o.O,o.O,[v.n,s.h,s.S,s.M,s.D,A.e,o.A,o.ab,N.c,o.cb,o.e,s.X,s.y]),l["ɵmpd"](4608,o.l,o.l,[]),l["ɵmpd"](4608,o.T,o.T,[]),l["ɵmpd"](4608,o.f,o.f,[v.n,o.cb]),l["ɵmpd"](4608,o.x,o.x,[]),l["ɵmpd"](4608,o.B,o.B,[s.D,o.x]),l["ɵmpd"](4608,o.D,o.D,[]),l["ɵmpd"](4608,o.o,o.o,[o.e,s.M,o.cb,o.U,o.ab]),l["ɵmpd"](4608,o.n,o.n,[o.cb]),l["ɵmpd"](4608,O.a,O.a,[s.M,o.cb,pe.a,s.S,s.h,s.D,o.e,A.e,u.DatePipe,s.y,nu.a]),l["ɵmpd"](4608,on.a,on.a,[O.a,s.M,o.e]),l["ɵmpd"](4608,Cr.a,Cr.a,[O.a,s.M,o.e]),l["ɵmpd"](4608,Xn.a,Xn.a,[]),l["ɵmpd"](4608,sn.a,sn.a,[A.e,s.M,s.D,s.S,s.h,s.x,o.e]),l["ɵmpd"](4608,lu,lu,[s.M]),l["ɵmpd"](4608,au.a,au.a,[]),l["ɵmpd"](4608,y.a,y.a,[V.a,o.cb,o.e,s.M,o.U,o.ab,N.c,s.D,v.a,v.n,A.e,s.y,o.x]),l["ɵmpd"](4608,_.a,_.a,[s.S,s.h,s.M,s.D,A.e,N.c,v.n]),l["ɵmpd"](4608,R.a,R.a,[s.M,s.S,s.h,o.cb,y.a,A.e,o.ab,o.O,v.n,o.e,_.a,v.a,s.D,O.a,M.a]),l["ɵmpd"](135680,Gn.a,Gn.a,[R.a,s.M,x.g,y.a,o.e,v.n,o.cb,s.h,s.S,s.D]),l["ɵmpd"](4608,iu.a,iu.a,[o.e,y.a]),l["ɵmpd"](4608,ru.a,ru.a,[Gn.a,iu.a,y.a]),l["ɵmpd"](4608,Ra,Ra,[s.M]),l["ɵmpd"](1073742336,x.C,x.C,[]),l["ɵmpd"](1073742336,x.n,x.n,[]),l["ɵmpd"](1073742336,u.CommonModule,u.CommonModule,[]),l["ɵmpd"](1073742336,v.r,v.r,[[2,v.w],[2,v.n]]),l["ɵmpd"](1073742336,vu,vu,[]),l["ɵmpd"](1073742336,x.y,x.y,[]),l["ɵmpd"](1073742336,g.a,g.a,[]),l["ɵmpd"](1073742336,ue.l,ue.l,[[2,ue.d],[2,S.HAMMER_LOADER]]),l["ɵmpd"](1073742336,h.b,h.b,[]),l["ɵmpd"](1073742336,ue.v,ue.v,[]),l["ɵmpd"](1073742336,Cu.g,Cu.g,[]),l["ɵmpd"](1073742336,p.b,p.b,[]),l["ɵmpd"](1073742336,c.g,c.g,[]),l["ɵmpd"](1073742336,Z.i,Z.i,[]),l["ɵmpd"](1073742336,Z.f,Z.f,[]),l["ɵmpd"](1073742336,$.c,$.c,[]),l["ɵmpd"](1073742336,A.k,A.k,[]),l["ɵmpd"](1073742336,Mt.d,Mt.d,[]),l["ɵmpd"](1073742336,m.a,m.a,[]),l["ɵmpd"](1073742336,d.e,d.e,[]),l["ɵmpd"](1073742336,ue.t,ue.t,[]),l["ɵmpd"](1073742336,ue.q,ue.q,[]),l["ɵmpd"](1073742336,$s.e,$s.e,[]),l["ɵmpd"](1073742336,N.f,N.f,[]),l["ɵmpd"](1073742336,te.c,te.c,[]),l["ɵmpd"](1073742336,Kt.d,Kt.d,[]),l["ɵmpd"](1073742336,Ut.d,Ut.d,[]),l["ɵmpd"](1073742336,ue.x,ue.x,[]),l["ɵmpd"](1073742336,ue.n,ue.n,[]),l["ɵmpd"](1073742336,ct.p,ct.p,[]),l["ɵmpd"](1073742336,dt.o,dt.o,[]),l["ɵmpd"](1073742336,re.e,re.e,[]),l["ɵmpd"](1073742336,Nt.d,Nt.d,[]),l["ɵmpd"](1073742336,de.c,de.c,[]),l["ɵmpd"](1073742336,oe.c,oe.c,[]),l["ɵmpd"](1073742336,yu.a,yu.a,[]),l["ɵmpd"](1073742336,Il.d,Il.d,[]),l["ɵmpd"](1073742336,Il.c,Il.c,[]),l["ɵmpd"](1073742336,ne.d,ne.d,[]),l["ɵmpd"](1073742336,se.j,se.j,[]),l["ɵmpd"](1073742336,Ru.d,Ru.d,[]),l["ɵmpd"](1073742336,Ru.b,Ru.b,[]),l["ɵmpd"](1073742336,Fe.e,Fe.e,[]),l["ɵmpd"](1073742336,Du.c,Du.c,[]),l["ɵmpd"](1073742336,Qs.c,Qs.c,[]),l["ɵmpd"](1073742336,Ot.d,Ot.d,[]),l["ɵmpd"](1073742336,Ot.c,Ot.c,[]),l["ɵmpd"](1073742336,s.n,s.n,[]),l["ɵmpd"](1073742336,s.q,s.q,[]),l["ɵmpd"](1073742336,s.o,s.o,[]),l["ɵmpd"](1073742336,Pu.a,Pu.a,[]),l["ɵmpd"](1073742336,bu.a,bu.a,[]),l["ɵmpd"](1073742336,Eu.a,Eu.a,[]),l["ɵmpd"](1073742336,Tu.a,Tu.a,[]),l["ɵmpd"](1073742336,Au.a,Au.a,[]),l["ɵmpd"](1073742336,Iu.a,Iu.a,[]),l["ɵmpd"](1073742336,_u.a,_u.a,[]),l["ɵmpd"](1073742336,Nu.a,Nu.a,[]),l["ɵmpd"](1073742336,Ou.a,Ou.a,[]),l["ɵmpd"](1073742336,Mu.a,Mu.a,[]),l["ɵmpd"](1073742336,Fu.a,Fu.a,[]),l["ɵmpd"](1073742336,Lu.a,Lu.a,[]),l["ɵmpd"](1073742336,wu.a,wu.a,[]),l["ɵmpd"](1073742336,Gu.a,Gu.a,[]),l["ɵmpd"](1073742336,ku.a,ku.a,[]),l["ɵmpd"](1073742336,Vu.a,Vu.a,[]),l["ɵmpd"](1073742336,o.p,o.p,[]),l["ɵmpd"](1073742336,o.Y,o.Y,[]),l["ɵmpd"](1073742336,xu.a,xu.a,[]),l["ɵmpd"](1073742336,Ku.AgGridModule,Ku.AgGridModule,[]),l["ɵmpd"](1073742336,Uu.a,Uu.a,[]),l["ɵmpd"](1073742336,ju,ju,[]),l["ɵmpd"](1073742336,Bu,Bu,[]),l["ɵmpd"](1073742336,a,a,[]),l["ɵmpd"](1024,v.l,(function(){return[[{path:"",component:k,children:[{path:"plan-properties",loadChildren:su,data:uu},{path:"plan-design",component:Ye,resolve:{"info-message":lu},data:du},{path:"countries",component:aa,resolve:{"info-message":lu},data:cu},{path:"countries/invalid",component:Sa,data:pu},{path:"countries/:countrykey",loadChildren:hu,data:mu,canActivate:[ou.a]},{path:"rate-adjustments",loadChildren:gu,data:Su},{path:"reports",component:Da,data:fu},{path:"",redirectTo:"countries",pathMatch:"full"}]}]]}),[]),l["ɵmpd"](256,A.b,{hasBackdrop:!0,disableClose:!0,backdropClass:"backdrop"},[]),l["ɵmpd"](256,ue.e,s.cb,[]),l["ɵmpd"](256,N.b,{duration:2e3,verticalPosition:"top"},[]),l["ɵmpd"](256,Du.a,{_forceAnimations:!0,diameter:100,strokeWidth:6},[])])}))},edQC:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var l=n("6nV5"),a=n("5IsW"),i=n("ZQmJ"),r=n("XlyW"),o=n("PmYs"),s=n("HkWN"),u=function(){function e(e,t){var n=this;this.dialogRef=e,this.importCountryData=t,this.rowClass="grid-row-class",this.defaultColDef={editable:function(e){return!e.data.IS_COUNTRY_LOCKED},valueSetter:function(e){return e.data[e.column.colId].value=e.newValue,e},cellRendererFramework:i.a,cellEditorParams:function(e){return e.value=e.data[e.column.colId].value,e}},this.rowHeight=a.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.ROW_HEIGHT,this.rowClassRules={"row-disabled":function(e){return e.data.IS_COUNTRY_LOCKED}},this.rowSelection="multiple",this.setFrameworkComponent(),this.processDataFromClipboard=function(e){var t=e.data,l=n.gridApi.getFocusedCell();if(n.validationErrors.pasteLimit.status=!1,!n.validationErrors.pasteLimit.status)return a.F.IMPORT_COUNTRIES.AG_GRID_CONFIG.DEFAULT_ROW_COUNT-l.rowIndex>=e.data.length-1?n.columnDefs.length-r.a[l.column.getColId()]<e.data[0].length&&(n.validationErrors.pasteLimit.status=!0,t=null):(n.validationErrors.pasteLimit.status=!0,t=null),t}}return e.prototype.setFrameworkComponent=function(){this.frameworkComponents={importCountryCellRendererComponent:i.a}},e.prototype.ngOnInit=function(){this.importCountryData&&(this.errorMessages=this.importCountryData.resources?this.importCountryData.resources.ERROR_MESSAGES:{},this.validationErrors=this.importCountryData.validationErrors,this.rowData=this.importCountryData.rowData,this.columnDefs=this.importCountryData.columnDefs,this.countries=this.importCountryData.countries,this.dialogViewContents=this.importCountryData.dialogViewContents)},e.prototype.cancel=function(){this.dialogRef.close()},e.prototype.processCellForClipboard=function(e){var t="";return e&&e.value&&l.c.isDefined(e.value.value)&&(t=e.value.value),t},e.prototype.ok=function(){this.gridApi&&this.gridApi.stopEditing();var e=this.getGeographiesForSpreadsheet();e&&!this.validationErrors.emptyGrid.status&&this.dialogRef.close({action:a.E.OK,data:e})},e.prototype.onCellValueChanged=function(e){var t=[];e&&e.value.type===s.a.COUNTRY_VALIDATION?(t=this.getCountriesInGrid(),this.validateGrid(!1,!0)):(this.validateCell(e.value,t,!0,!0,!1),this.refreshGlobalValidationStatus())},e.prototype.onGridReady=function(e){e&&(this.gridApi=e.api,this.validateGrid(!1))},e.prototype.validateGrid=function(e,t){var n,l=this;void 0===e&&(e=!0),void 0===t&&(t=!1),n=e||t?this.getCountriesInGrid():[],this.validationErrors.cellValidations.country.status=!1,this.validationErrors.cellValidations.number.status=!1,this.validationErrors.cellValidations.date.status=!1,this.gridApi.forEachNode((function(a){Object.keys(a.data).forEach((function(i){l.validateCell(a.data[i],n,e,!0,!0,t)}))}))},e.prototype.validateCell=function(e,t,n,l,a,i){if(void 0===n&&(n=!0),void 0===l&&(l=!1),void 0===a&&(a=!0),void 0===i&&(i=!1),e)switch(e.type){case s.a.COUNTRY_VALIDATION:(n||i)&&(e.isValid=o.a.isValidCountry(e.value.toString(),this.countries,t,l)),a&&(this.validationErrors.cellValidations.country.status=this.validationErrors.cellValidations.country.status||!e.isValid);break;case s.a.NUMERIC_VALIDATION:n&&(e.isValid=o.a.isValidNumber(Number(e.value))),a&&(this.validationErrors.cellValidations.number.status=this.validationErrors.cellValidations.number.status||!e.isValid);break;case s.a.DATE_VALIDATION:n&&(e.isValid=o.a.isValidDate(e.value.toString())),a&&(this.validationErrors.cellValidations.date.status=this.validationErrors.cellValidations.date.status||!e.isValid)}},e.prototype.getCountriesInGrid=function(){var e=[];return this.gridApi&&this.gridApi.forEachNode((function(t){e.push(t.data.COUNTRY.value.toString())})),e},e.prototype.refreshGlobalValidationStatus=function(){var e=this;this.validationErrors.cellValidations.country.status=!1,this.validationErrors.cellValidations.number.status=!1,this.validationErrors.cellValidations.date.status=!1,this.gridApi.forEachNode((function(t){Object.keys(t.data).forEach((function(n){var l=t.data[n];switch(l.type){case s.a.COUNTRY_VALIDATION:e.validationErrors.cellValidations.country.status=e.validationErrors.cellValidations.country.status||!l.isValid;break;case s.a.NUMERIC_VALIDATION:e.validationErrors.cellValidations.number.status=e.validationErrors.cellValidations.number.status||!l.isValid;break;case s.a.DATE_VALIDATION:e.validationErrors.cellValidations.date.status=e.validationErrors.cellValidations.date.status||!l.isValid}}))}))},e.prototype.getGeographiesForSpreadsheet=function(){var e=this,t=new Array,n=0;return this.gridApi&&this.gridApi.forEachNode((function(l){try{var i=o.a.convertSpreadsheetToGeography(l.data,e.countries);i&&t.push(i)}catch(r){r.message===a.sb&&n++}})),this.validationErrors.emptyGrid.status=!(n>0||t&&t.length>0),t},e}()},gtvs:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var l=n("WT9V"),a=n("IfiR"),i=n("6nV5"),r=n("wgY5"),o=n("LiEJ"),s=n("fQLH"),u=n("pday"),d=n("Jg5f"),c=n("uMZP"),p=n("5IsW"),h=n("HY2n"),m=n("gX7u"),g=(n("IW84"),n("TSSw"),r),S=function(){function e(e,t,n,l,a,i,r,u,d,c){this.planDetailsService=e,this.localeAppResourcesService=t,this.fb=n,this.plansService=l,this.appDataService=a,this.route=i,this.userDataService=r,this.baseConnectionService=u,this.payloadCommandService=d,this.errorTermsStoreService=c,this.dataSource=new o.a([]),this.initiationSchedule=this.fb.array([]),this.userActionData=null,this.countryDetailForm=new o.a({}),this.planKeyChangedCount=0,this.countryKeyChangedCount=0,this.isCountrySlotRedistributed=!1,this.granularSlots=[],this.actualSlots=[],this.projectedSlots=[],this.responseData=new s.a,this.loadCountryDropDown=new s.a,this.subscriptions=new Map,this.countryDetailsSubject=new o.a({}),this.planPropertiesSubject=new o.a({}),this.selectedCountryKeySubject=new o.a(void 0),this.planPropertiesSubject=new o.a({}),this._emptySIScheduleSubject=new o.a(!1),this._applyToSISchedule=new s.a,this.fetchCountryDetailFormObject(),this.fetchPlanDetails(),this.observeSelectedCountryKey(),this.observeSelectedPlanKey(),this.isRevertToApprovedPlan=!1}return e.prototype.observeSelectedPlanKey=function(){var e=this,t=!1;if(!this.subscriptions.has("planKeyChangedSubscription")){var n=this.planDetailsService.onPlanKeyChanged$.subscribe((function(n){if(e.countryKeyChangedCount=0,e.selectedPlanKey=n,t=!0,e.planDetailsService.setReadOnly(!0),i.c.isDefined(n)&&!e.subscriptions.has("getCountryListSubscription")){var l=e.getCountryList().pipe(Object(u.a)(750)).subscribe((function(n){if(t){var l=["/plans","plandetails",e.selectedPlanKey,"countries"],a=void 0;e.planDetailsService.saveCalled||e.planDetailsService.revertCalled?(e.planDetailsService.saveCalled=!1,e.planDetailsService.revertCalled=!1,e.planKeyChangedCount=e.planKeyChangedCount+1):e.planKeyChangedCount>0&&e.planKeyChangedCount--,(a=e.selectedCountryKeySubject.value)&&(l.push(a.toString()),l.push(e.activeSiMethod||"percent"),e.route.navigate(l),t=!1)}}));e.subscriptions.set("getCountryListSubscription",l)}}));this.subscriptions.set("planKeyChangedSubscription",n)}},e.prototype.observeSelectedCountryKey=function(){var e=this;if(!this.subscriptions.has("selectedCountryKeySubjectSubscription")){var t=this.selectedCountryKeySubject.subscribe((function(t){e.fetchCountryDetails(t),e.setHiddenCountryFormControls(t)}));this.subscriptions.set("selectedCountryKeySubjectSubscription",t)}},e.prototype.fetchCountryDetails=function(e){var t=this.extractCountryDetails(this.planDetails,e);t&&this.setCountryDetails(t)},e.prototype.extractCountryDetails=function(e,t){var n=null,l=null;if(null!=t&&e&&e.hasOwnProperty("geoList")&&e.geoList.hasOwnProperty("geography")&&e.geoList.geography.length>0){var a=e.geoList.geography.filter((function(e){return e.geographyKey===t}));if(n=a.find((function(e){return!1===e.isCohortCountry}))){var i=a.filter((function(e){return!0===e.isCohortCountry}));n.cohortList=[].concat(i)}var r=this.planDetailsService.planDetailsResponseData.geoList.geography.filter((function(e){return e.geographyKey===t}));(l=r.find((function(e){return!1===e.isCohortCountry})))&&(i=r.filter((function(e){return!0===e.isCohortCountry})),l.cohortList=[].concat(i))}return n},e.prototype.fetchPlanDetails=function(){var e=this;if(!this.subscriptions.has("getPlanDetailsSubscription")){var t=this.planDetailsService.getPlanDetails().subscribe((function(t){if(t){e.isRevertToApprovedPlan=!1;var n=JSON.parse(JSON.stringify(t));e.sourcePlanDetails=JSON.parse(JSON.stringify(t)),e.planDetails=n,e.setPlanProperties(n.planProperties),e.setHiddenPlanFormControls()}}));this.subscriptions.set("getPlanDetailsSubscription",t)}},e.prototype.setRevertToApprovedCountryData=function(e,t){var n=this;this.planDetailsService.getBriefStudyPlanForRevertToLatestSaved(e,!0,!1,!1).subscribe((function(e){var l=n.planDetailsService.getCountryInformationWithAllCohort(e,t),a=[];n.planDetails.geoList.geography.forEach((function(e){var i=l.findIndex((function(t){return!e.isCohortCountry&&t.geographyKey===e.geographyKey||e.isCohortCountry&&t.geographyKey===e.geographyKey&&t.cohortKey===e.cohortKey}));if(i>-1){var r=JSON.parse(JSON.stringify(e));r.planParamsDetails.SITOFSSDAYS&&delete r.planParamsDetails.SITOFSSDAYS,r.planParamsDetails.FSS&&delete r.planParamsDetails.FSS,n.setNotExistPlanParameters(r,e=l[i]),e.planParamsDetails.redistSites=0,e.planParamsDetails.isCountryLocked=!1}else t===e.geographyKey&&e.isCohortCountry&&(e.isCohortExcluded=!0);a.push(e)})),n.planDetails.geoList.geography=a,"percent"===n.activeSiMethod&&n.emptyTable(),n.isRevertToApprovedPlan=!0,n.setPlanProperties(n.planDetails.planProperties),n.setHiddenPlanFormControls(),n.fetchCountryDetails(t),n.setHiddenCountryFormControls(t),n.observeSelectedCountryKey(),n.loadCountryDropDown.next(n.planDetails)}))},Object.defineProperty(e.prototype,"isRevertToApprovedPlan",{get:function(){return this.setDirtyFormFlagAfterRevertToApproved},set:function(e){this.setDirtyFormFlagAfterRevertToApproved=e,this.setIsRevertToApprovedPlanFormValue()},enumerable:!0,configurable:!0}),e.prototype.setIsRevertToApprovedPlanFormValue=function(){var e={},t=this.countryDetailFormObject;this.planDetails&&t&&t.patchValue&&(e.isRevertToApprovedPlan=this.isRevertToApprovedPlan,t.patchValue(e))},e.prototype.setNotExistPlanParameters=function(e,t){for(var n in e.planParamsDetails)t.planParamsDetails.hasOwnProperty(n)||(t.planParamsDetails[n]=e.planParamsDetails[n])},e.prototype.setHiddenPlanFormControls=function(){var e=this.countryDetailFormObject;if(this.planDetails&&e&&e.patchValue){var t={};if(this.planDetails.planProperties){var n=this.planDetails.planProperties.FSI;n&&(t.studyFSI=n);var l=this.planDetails.planProperties.LSS;l&&(t.TLSS=l);var a=!1;null!=this.planDetails.planProperties.isPlan&&(a=!this.planDetails.planProperties.isPlan),t.isAdjustment=a,t.isRevertToApprovedPlan=this.isRevertToApprovedPlan}e.patchValue(t)}},e.prototype.setHiddenCountryFormControls=function(e){void 0===e&&(e=null);var t=this.countryDetailFormObject,n=this.extractCountryDetails(this.planDetails,e);if(t&&t.patchValue&&n){var l={};if(l.ActualNumSite=p.sc.MIN_NUM_SITES,n.planParamsDetails&&n.planParamsDetails.isAdjustable&&n.planParamsDetails.actuals&&n.planParamsDetails.actuals.numSites){var a=n.planParamsDetails.actuals.numSites;a&&(l.ActualNumSite=a)}n.planParamsDetails&&n.planParamsDetails.hasOwnProperty("isAdjustable")&&(l.isAdjustable=n.planParamsDetails.isAdjustable),l.countryKey=n.geographyKey,l.countryName=n.geographyName,n.planParamsDetails&&n.planParamsDetails.actEnrlWhnSRMod&&(l.actEnrlWhnSRMod=n.planParamsDetails.actEnrlWhnSRMod?n.planParamsDetails.actEnrlWhnSRMod:p.yc),n.planParamsDetails&&n.planParamsDetails.actEnrlWhnSRMod&&(l.actEnrlWhnSRMod=n.planParamsDetails.actEnrlWhnSRMod?n.planParamsDetails.actEnrlWhnSRMod:p.yc),n.planParamsDetails&&n.planParamsDetails.actEnrlWhnSFRMod&&(l.actEnrlWhnSFRMod=n.planParamsDetails.actEnrlWhnSFRMod?n.planParamsDetails.actEnrlWhnSFRMod:p.yc),n.planParamsDetails&&n.planParamsDetails.dateSRMod&&(l.dateSRMod=n.planParamsDetails.dateSRMod?n.planParamsDetails.dateSRMod:p.M),n.planParamsDetails&&n.planParamsDetails.dateSFRMod&&(l.dateSFRMod=n.planParamsDetails.dateSFRMod?n.planParamsDetails.dateSFRMod:p.M),t.patchValue(l)}},e.prototype.fetchCountryDetailFormObject=function(){var e=this;if(!this.subscriptions.has("getCountryDetailFormSubscription")){var t=this.getCountryDetailForm().subscribe((function(t){e.countryDetailFormObject=t,e.updateFormValues()}));this.subscriptions.set("getCountryDetailFormSubscription",t)}},e.prototype.updateFormValues=function(){this.setHiddenPlanFormControls(),this.setHiddenCountryFormControls()},e.prototype.setCountryDetails=function(e){var t=this;if(this.selectedCountryDetails=e,void 0!==e&&null!=e){this.isCountrySlotRedistributed=!1,this.actualSlots=[],this.projectedSlots=[];var n=JSON.parse(JSON.stringify(e));if(n.planParamsDetails){if(n.planParamsDetails.parentPlan&&n.planParamsDetails.parentPlan.SR&&(n.planParamsDetails.parentPlan.SR=this.planDetailsService.calculateRateAsPerFrequency(n.planParamsDetails.parentPlan.SR)),n.planParamsDetails.parentPlan&&n.planParamsDetails.parentPlan.RR&&(n.planParamsDetails.parentPlan.RR=this.planDetailsService.calculateRateAsPerFrequency(n.planParamsDetails.parentPlan.RR)),n.planParamsDetails.SR&&(n.planParamsDetails.SR=this.planDetailsService.calculateRateAsPerFrequency(n.planParamsDetails.SR)),n.planParamsDetails.RR&&(n.planParamsDetails.RR=this.planDetailsService.calculateRateAsPerFrequency(n.planParamsDetails.RR)),n.planParamsDetails.countryCalcQuantity){var a=n.planParamsDetails.countryCalcQuantity;if(i.c.isDefined(a.effectiveSR,!0)&&i.c.isDefined(a.effectiveSFR,!0)){n.planParamsDetails.countryCalcQuantity.effectiveSR=this.planDetailsService.calculateRateAsPerFrequency(n.planParamsDetails.countryCalcQuantity.effectiveSR);var r=n.planParamsDetails.countryCalcQuantity.effectiveSR*(1-n.planParamsDetails.countryCalcQuantity.effectiveSFR/100);i.c.isDefined(r,!0)&&(r=Object(l.formatNumber)(r,"en-US","0.1-3"),n.planParamsDetails.countryCalcQuantity.effectiveRR=r)}}if(n.planParamsDetails.centerInitInfo){var o=n.planParamsDetails.centerInitInfo,s=o&&o.percentCenterInitInfo?o.percentCenterInitInfo:null;s&&s.centerInitSlot&&s.centerInitSlot.length>0&&(d=s.centerInitSlot.filter((function(e){return!0===e.redistributed}))).length>0&&(n.planParamsDetails.centerInitInfo.percentCenterInitInfo.centerInitSlot=d);var u=o&&o.granularCenterInitInfo?o.granularCenterInitInfo:null;if(u&&u.centerInitSlot&&(this.granularSlots=[],!1===Array.isArray(u.centerInitSlot)?this.granularSlots.push(u.centerInitSlot):this.granularSlots=u.centerInitSlot,this.granularSlots.length>0)){var d;(d=this.granularSlots.filter((function(e){return!0===e.redistributed}))).length>0&&(n.planParamsDetails.centerInitInfo.granularCenterInitInfo.centerInitSlot=d);var c=this.granularSlots.filter((function(e){return e.slotType===p.cc.REDISTRIBUTED}));this.isCountrySlotRedistributed=c.length>0,this.actualSlots=this.granularSlots.filter((function(e){return e.slotType===p.cc.ACTUAL})),this.projectedSlots=this.granularSlots.filter((function(e){return e.slotType!==p.cc.ACTUAL}))}}n.cohortList&&n.cohortList.forEach((function(e){if(e.planParamsDetails){var n=e.planParamsDetails;if(n.SR&&(n.SR=t.planDetailsService.calculateRateAsPerFrequency(n.SR)),n.RR&&(n.RR=t.planDetailsService.calculateRateAsPerFrequency(n.RR)),n.countryCalcQuantity){var a=n.countryCalcQuantity;if(i.c.isDefined(a.effectiveSR,!0)&&i.c.isDefined(a.effectiveSFR,!0)){n.countryCalcQuantity.effectiveSR=t.planDetailsService.calculateRateAsPerFrequency(n.countryCalcQuantity.effectiveSR);var r=n.countryCalcQuantity.effectiveSR*(1-n.countryCalcQuantity.effectiveSFR/100);i.c.isDefined(r,!0)&&(r=Object(l.formatNumber)(r,"en-US","0.1-3"),n.countryCalcQuantity.effectiveRR=r)}else i.c.isDefined(a.effectiveRR,!0)&&(n.countryCalcQuantity.effectiveRR=t.planDetailsService.calculateRateAsPerFrequency(n.countryCalcQuantity.effectiveRR))}n.parentPlan&&(n.parentPlan.SR&&(n.parentPlan.SR=t.planDetailsService.calculateRateAsPerFrequency(n.parentPlan.SR)),n.parentPlan.RR&&(n.parentPlan.RR=t.planDetailsService.calculateRateAsPerFrequency(n.parentPlan.RR)))}}))}this.countryDetailsSubject.next(n)}else this.countryDetailsSubject.next({})},e.prototype.getCountryDetails=function(){return this.countryDetailsSubject.asObservable()},e.prototype.setSelectedCountryKey=function(e){this.selectedCountryKeySubject.next(e)},e.prototype.getSelectedCountryKey=function(){return this.selectedCountryKeySubject.asObservable()},e.prototype.getCountryList=function(){var e=this;return this.planDetailsService.getPlanDetails().pipe(Object(d.a)((function(t){if(t&&t.hasOwnProperty("geoList")&&t.geoList.hasOwnProperty("geography")&&t.geoList.geography.length>0){var n=[];return t.geoList.geography.reduce((function(n,l){return 0===l.geographyKey||l.isCohortCountry||n.push({countryKey:l.geographyKey,countryName:l.geographyName,countryImageStatus:e.getCountryImageStatus(l,t.planProperties.isPlan)}),n}),n),n.sort((function(e,t){return e.countryName.localeCompare(t.countryName)}))}return new Array})))},e.prototype.getCountryImageStatus=function(e,t){return e&&e.hasOwnProperty("planParamsDetails")&&e.planParamsDetails.hasOwnProperty("planStatus")&&void 0!==e.planParamsDetails.planStatus.value?this.plansService.getPlanStatusImg(t?m.b.BASE:m.b.ADJ,e.planParamsDetails.planStatus.value):t?p.kb.STATUS.INVALID:p.kb.STATUS.ADJUSTMENT.INVALID},e.prototype.getSILabels=function(){return{SI_SITE_INITIATION:this.localeAppResourcesService.getResource("SI_SITE_INITIATION"),SI_RANDOM:this.localeAppResourcesService.getResource("SI_RANDOM"),SI_LINEAR:this.localeAppResourcesService.getResource("SI_LINEAR"),SI_RE_RANDOMIZED:this.localeAppResourcesService.getResource("SI_RE_RANDOMIZED"),SI_25_50_90:this.localeAppResourcesService.getResource("SI_25_50_90"),SI_CUSTOM:this.localeAppResourcesService.getResource("SI_CUSTOM"),SI_TOTAL_NUMBER_OF_SITES:this.localeAppResourcesService.getResource("SI_TOTAL_NUMBER_OF_SITES"),SI_UNITITIATED_SITES:this.localeAppResourcesService.getResource("SI_UNITITIATED_SITES"),SI_SITES_TO_REDISTRIBUTE:this.localeAppResourcesService.getResource("SI_SITES_TO_REDISTRIBUTE"),SI_FSID:this.localeAppResourcesService.getResource("SI_FSID"),SI_SITE_PERCENT:this.localeAppResourcesService.getResource("SI_SITE_PERCENT"),SI_SITES:this.localeAppResourcesService.getResource("SI_SITES"),SI_DAYS_FROM_FSI:this.localeAppResourcesService.getResource("SI_DAYS_FROM_FSI"),SI_END_DATE:this.localeAppResourcesService.getResource("SI_END_DATE"),SI_25:this.localeAppResourcesService.getResource("SI_25"),SI_50:this.localeAppResourcesService.getResource("SI_50"),SI_90:this.localeAppResourcesService.getResource("SI_90"),ACTUALS:this.localeAppResourcesService.getResource("ACTUALS"),PROJECTED:this.localeAppResourcesService.getResource("PROJECTED"),PARENT:this.localeAppResourcesService.getResource("PARENT"),CUSTOM_SITE_INITIATION:this.localeAppResourcesService.getResource("MCECustomSITitle"),MAP_COHORTS:this.localeAppResourcesService.getResource("MAP_COHORTS"),ENTER_SLOT_DATES:this.localeAppResourcesService.getResource("ENTER_SLOT_DATES"),DISABLED_25_50_90_MSG:this.localeAppResourcesService.getResource("DISABLED_25_50_90_MSG")}},e.prototype.setCountryDetailForm=function(e){this.countryDetailForm.next(e),this.planDetailsService.updatePlanCommandObj=e},e.prototype.getCountryDetailForm=function(){return this.countryDetailForm.asObservable()},e.prototype.createCountryDetailForm=function(){this.setCountryDetailForm(this.fb.group({siHeader:this.fb.group({siMethod:[""],reRandomize:[""],siteInitiationMethod:[""],siteInitiationSubMethod:[""]}),siBody:this.fb.group({siField:this.fb.group({totalNoOfSites:["",a.B.required],uninitiatedSite:[{value:"",disabled:!0}],sitesToRedistribute:[""],FSIDate:["",a.B.required],sitesToRedistributeMinValue:[""],sitesToRedistributeMaxValue:[""]}),siMethod:this.fb.group({noOfSite25:[""],period25:[""],endDate25:[""],noOfSite50:[""],period50:[""],endDate50:[""],noOfSite90:[""],period90:[""],endDate90:[""]}),siCustomMethod:this.fb.group({initiationSchedule:this.fb.array([])})}),enrolmentParameters:this.createEnrolmentParametersFormgroup(),studyFSI:[""],TLSS:[""],ActualNumSite:[p.sc.MIN_NUM_SITES],isAdjustment:[""],isAdjustable:[""],isRevertToApprovedPlan:[""],countryKey:[""],countryName:[""],actEnrlWhnSRMod:[""],dateSRMod:[""],actEnrlWhnSFRMod:[""],dateSFRMod:[""],cohortEnrollmentParameters:this.fb.group({}),cohortList:this.fb.group({})}))},e.prototype.setDaysFromFSIValidations=function(e,t){if(t&&t.get("siBody.siMethod")){var n=t.get("siBody.siMethod");e===p.ac.PERCENT?(n.get("period25")&&n.get("period25").setValidators([a.B.required,a.B.max(p.sc.MAX_PERIOD_25)]),n.get("period50")&&n.get("period50").setValidators([a.B.required,a.B.max(p.sc.MAX_PERIOD_50)]),n.get("period90")&&n.get("period90").setValidators([a.B.required,a.B.max(p.sc.MAX_PERIOD_90)])):i.c.clearFormGroupValidators(n)}},e.prototype.setCountryDetailFormValidators=function(e,t,n){if(e&&e.get&&t&&n&&n.planParamsDetails){if(e.get("siHeader.siMethod")&&e.get("siHeader.siMethod").setValidators([a.B.required]),e.get("siBody.siMethod")){var l=e.get("siBody.siMethod");l.get("period25")&&l.get("period25").setValidators([a.B.required,a.B.max(p.sc.MAX_PERIOD_25)]),l.get("period50")&&l.get("period50").setValidators([a.B.required,a.B.max(p.sc.MAX_PERIOD_50)]),l.get("period90")&&l.get("period90").setValidators([a.B.required,a.B.max(p.sc.MAX_PERIOD_90)])}if(e.get("siBody")&&e.get("siBody.siField")){var i=e.get("siBody.siField");i.get("totalNoOfSites")&&i.get("totalNoOfSites").setValidators([a.B.required])}e.get("siBody.siField")&&e.get("siBody.siField").setValidators([Object(c.R)("sitesToRedistribute","sitesToRedistributeMinValue",!1,"sitesToRedistributeMaxValue",!1)]),e.get("enrolmentParameters.enrollmentTarget")&&e.get("enrolmentParameters.enrollmentTarget").setValidators([a.B.min(p.sc.MIN_ENROLLMENT_TARGET),a.B.max(p.sc.MAX_ENROLLMENT_TARGET),a.B.required]),e.get("enrolmentParameters.overRecruitmentPercent")&&e.get("enrolmentParameters.overRecruitmentPercent").setValidators([a.B.min(p.sc.MIN_OVER_RECRUITMENT_PERCENT),a.B.max(p.sc.MAX_OVER_RECRUITMENT_PERCENT),a.B.required]),e.get("enrolmentParameters.SR")&&e.get("enrolmentParameters.SR").setValidators([a.B.max(p.sc.MAX_SR),a.B.required]),e.get("enrolmentParameters")&&e.get("enrolmentParameters").setValidators([Object(c.Q)("RR",p.sc.MAX_RR,"SR",!1,p.sc.MAX_SR),Object(c.W)("SFR",p.sc.MIN_SFR,p.sc.MAX_SFR,"SR",!1,p.sc.MAX_SR)]),e.get("enrolmentParameters.numSites")&&e.get("enrolmentParameters.numSites").setValidators([a.B.min(p.sc.MIN_NUM_SITES),a.B.max(p.sc.MAX_NUM_SITES)]),e.get("enrolmentParameters.activeSites")&&e.get("enrolmentParameters.activeSites").setValidators([a.B.min(p.sc.MIN_ACTIVE_SITES),a.B.max(p.sc.MAX_ACTIVE_SITES)]),e.get("enrolmentParameters.calcSAS")&&e.get("enrolmentParameters.calcSAS").setValidators([a.B.min(p.sc.MIN_CALC_SAS),a.B.max(p.sc.MAX_CALC_SAS)]),e.get("enrolmentParameters.SITOFSSDAYS")&&e.get("enrolmentParameters.SITOFSSDAYS").setValidators([a.B.min(p.sc.MIN_SITOFSSDAYS)]),e.get("siBody.siCustomMethod.initiationSchedule")&&e.get("siBody.siCustomMethod.initiationSchedule").setValidators(Object(c.g)(["slotStartDate","slotEndDate","noOfCenters"],this.getBlankFieldValidationMsg())),this.isValidationOnTotalSites(n.planParamsDetails)?e.get("siBody.siField.sitesToRedistribute").clearValidators():e.get("siBody.siField.sitesToRedistribute").setValidators(a.B.required);var r=this.plansService.isCohortStudy(),o=this.isValidationOnTotalSites(n.planParamsDetails);e.setValidators([Object(c.y)("siBody.siField.FSIDate","studyFSI",!1,"TLSS",!1,"isAdjustment",!1,"isAdjustable",!1,r),Object(c.b)("enrolmentParameters.ARTB","siBody.siField.FSIDate",!1,"enrolmentParameters.FSS",!1),Object(c.z)("enrolmentParameters.FSS","siBody.siField.FSIDate",!1),Object(c.V)("enrolmentParameters.ARC","enrolmentParameters.activeSites",!1,p.sc.MAX_CALC_SAS),Object(c.R)("siBody.siField.totalNoOfSites","ActualNumSite",!1,p.sc.MAX_NUM_SITES,!0),Object(c.v)("siBody.siMethod.period25",0,void 0,void 0,"siBody.siMethod.period50",!1),Object(c.v)("siBody.siMethod.period50",0,"siBody.siMethod.period25",!1,"siBody.siMethod.period90",!1),Object(c.v)("siBody.siMethod.period90",0,"siBody.siMethod.period50",!1,void 0,void 0,"siBody.siMethod.endDate90",!1,"TLSS",!1),Object(c.c)("siBody.siMethod.period90",["siBody.siMethod.period25","siBody.siMethod.period50","siBody.siMethod.period90"],!1),Object(c.X)(o?"siBody.siField.totalNoOfSites":"siBody.siField.sitesToRedistribute","siBody.siCustomMethod.initiationSchedule","noOfCenters",this.getValidationMsg(o)),Object(c.s)("siBody.siCustomMethod.initiationSchedule","slotStartDate","slotEndDate","siBody.siField.FSIDate","TLSS",this.getValidationMsg_Dates(),this.isCohortPlan({planProperties:t}))])}},e.prototype.isValidationOnTotalSites=function(e){return!this.planDetails.planProperties.isPlan&&"Y"===this.planDetails.planProperties.isCohortPlan||!e.isAdjustable},e.prototype.getCountryDetailsResources=function(){return{ICON_ARROW_BACK:p.kb.ICON_ARROW_BACK,ALL_COUNTRIES_LABEL:this.localeAppResourcesService.getResource("DCP_ALL_COUNTRIES"),COUNTRY_COHORTS:this.localeAppResourcesService.getResource("COUNTRY_COHORTS"),REVERT_LABEL:this.localeAppResourcesService.getResource("PLNDT_REVERT"),COUNTRY_SELECT_PLACEHOLDER:this.localeAppResourcesService.getResource("DCP_COUNTRY_SELECT_PLACEHOLDER"),PEC_DISABLE_APPROVED_MSG:this.localeAppResourcesService.getResource("PECDisableApprovedMsg"),PEC_DISABLE_ACTUAL_LSR:this.localeAppResourcesService.getResource("PECDisableActualLSR"),REVERT_TO_APPROVED_PLAN:this.localeAppResourcesService.getResource("REVERT_TO_APPROVED_PLAN"),okLabel:this.localeAppResourcesService.getResource("OK"),cancelLabel:this.localeAppResourcesService.getResource("Cancel"),revertToApprovedPlanPopUpHeader:this.localeAppResourcesService.getResource("REVERT_TO_APPROVED_PLAN_POPUP_HEADER"),revertToApprovedPlanConfirmationMsg:this.localeAppResourcesService.getResource("REVERT_TO_APPROVED_PLAN_CONFIRMATION")}},e.prototype.getEnrollmentParametersResources=function(){return{PECFrSubjRand:this.localeAppResourcesService.getResource("PECFrSubjRand"),PECFrExceedRand:this.localeAppResourcesService.getResource("PECFrExceedRand"),PECFrMaxSubjects:this.localeAppResourcesService.getResource("PECFrMaxSubjects"),PECFrLSR:this.localeAppResourcesService.getResource("PECFrLSR"),DCP_SOLVED_LSR:this.localeAppResourcesService.getResource("DCP_SOLVED_LSR"),PECFrSR:i.Z.interpolate(this.localeAppResourcesService.getResource("PECFrSR"),[this.planDetailsService.getReportingPeriodLabel()]),PECFrSFR:this.localeAppResourcesService.getResource("PECFrSFR"),PECFrRR:i.Z.interpolate(this.localeAppResourcesService.getResource("PECFrRR"),[this.planDetailsService.getReportingPeriodLabel()]),PECFrTotalNoOfSites:this.localeAppResourcesService.getResource("PECFrTotalNoOfSites"),PECFrActiveSites:this.localeAppResourcesService.getResource("PECFrActiveSites"),PECFrActiveSitesLabel:this.localeAppResourcesService.getResource("PECFrActiveSitesLabel"),PECFrCalculatedSASLabel:this.localeAppResourcesService.getResource("PECFrCalculatedSASLabel"),PECFrFSS:this.localeAppResourcesService.getResource("PECFrFSS"),PECDays:this.localeAppResourcesService.getResource("PECDays"),PECFavgSiteInit:this.localeAppResourcesService.getResource("PECFavgSiteInit"),PECFrProjSR:i.Z.interpolate(this.localeAppResourcesService.getResource("PECFrProjSR"),[this.planDetailsService.getReportingPeriodLabel()]),PECFrProjRR:i.Z.interpolate(this.localeAppResourcesService.getResource("PECFrProjRR"),[this.planDetailsService.getReportingPeriodLabel()]),PECFrProjActiveSites:this.localeAppResourcesService.getResource("PECFrProjActiveSites"),PECFrProjSFR:this.localeAppResourcesService.getResource("PECFrProjSFR"),DCP_EP_HEADER:this.localeAppResourcesService.getResource("DCP_EP_HEADER"),buildType:this.localeAppResourcesService.getResource("buildType"),calculate:this.localeAppResourcesService.getResource("calculate"),PERCENTAGE:p.Pb,ExcludeCohortMsg:this.localeAppResourcesService.getResource("ExcludeCohortMsg"),ICON_COPY_VALUE:p.kb.ICON_ARROW_LEFT,CLICK_TO_CALCULATE:this.localeAppResourcesService.getResource("ClickToCalculate"),CLICK_TO_APPLY:this.localeAppResourcesService.getResource("ClickToApply")}},e.prototype.getPlanProperties=function(){return this.planPropertiesSubject.asObservable()},e.prototype.setPlanProperties=function(e){void 0!==e&&null!=e?(e.cohortList&&e.cohortList.cohortPlanParams&&(e.cohortList.cohortPlanParams=[].concat(e.cohortList.cohortPlanParams)),this.planPropertiesSubject.next(e)):this.planPropertiesSubject.next({})},e.prototype.getEPCalculationResource=function(){return[{key:0,label:this.localeAppResourcesService.getResource("lsrDateOpt")},{key:1,label:i.Z.interpolate(this.localeAppResourcesService.getResource("minScreenOpt"),[this.planDetailsService.getReportingPeriodLabel(),this.getConfiguredRateLabel()])},{key:2,label:this.localeAppResourcesService.getResource("optimumRTLabel")}]},e.prototype.getConfiguredRateLabel=function(){return this.plansService.isRTypeCohortStudy()?this.localeAppResourcesService.getResource("Randomization"):this.appDataService.getConfiguredRateLabel()},e.prototype.consolidateValidationErrors=function(e){return e?this.plansService.consolidateValidationErrors(e):""},Object.defineProperty(e.prototype,"activeSiMethod",{get:function(){return this._activeSiMethod},set:function(e){this._activeSiMethod=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeGranularSiMethod",{get:function(){return this._activeGranularSiMethod},set:function(e){this._activeGranularSiMethod=e},enumerable:!0,configurable:!0}),e.prototype.checkModulePrivilege=function(e){return this.userDataService.checkModulePrivilege(e)},e.prototype.setSaveDisability=function(e){this.planDetailsService.setSaveDisability(e)},e.prototype.updateUsageMetrics=function(){var e=this.userDataService.getLastVisitedStudyKey(),t={usageMetric:{viewVisit:{module:p.Fb,page:p.t,studykey:e,localTime:(new Date).toString()}}};this.userDataService.updateUsageMetrics(t).subscribe()},e.prototype.calculateUninitiatedSite=function(e,t){var n=0;return null!=t&&null!=e&&(n=e>t?e-t:0),n},e.prototype.calculateRangeMin=function(e,t,n){var l=0;return null!=n&&null!=t&&null!=e&&(e>n?l=t<=e?0:t-e:e<=n&&(l=t<=n?0:t-n)),l},e.prototype.emptySISchedule=function(e){this._emptySIScheduleSubject.next(e)},e.prototype.getConfirmDialogProp=function(){return{heading:this.localeAppResourcesService.getResource("SI_AWAY_NAV_CD_HEADING"),message:this.localeAppResourcesService.getResource("SI_AWAY_NAV_CD_MSG")}},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){e.unsubscribe()})),this.subscriptions=null,this.route=null},e.prototype.getValidationMsg=function(e){return{totalNotEqual:this.localeAppResourcesService.getResource(e?"totalNotEqualPlan":"totalNotEqualAdj"),allZero:this.localeAppResourcesService.getResource("allZero")}},e.prototype.getValidationMsg_Dates=function(){return{beforeCurrStartDate:this.localeAppResourcesService.getResource("beforeCurrStartDate"),afterPrevEndDate:this.localeAppResourcesService.getResource("afterPrevEndDate"),afterNextStartDate:this.localeAppResourcesService.getResource("afterNextStartDate"),beforeFSIDate:this.localeAppResourcesService.getResource("beforeFSIDate"),afterLSSDate:this.localeAppResourcesService.getResource("afterLSSDate")}},e.prototype.hasRedistributedSites=function(e){return i.c.isDefined(e,!0)&&e>0},e.prototype.enableDisableProjectedSlot=function(e,t){e=Number(e),!0===this.isCohortAdjustment&&(""===e.toString()&&(e=0),isNaN(e)||null==e||this.toggleProjectedSlots(e,t))},e.prototype.toggleProjectedSlots=function(e,t){var n=this.getFormArraySICustom(),l=n?n.length:0,a=this.selectedCountryCustomSISlots,i=0,r={totalSlots:n.length,sitesToRedistribute:e,newSlotCount:0,fsiDate:t,actualSites:0};if(l>0){for(var o=l-1;n.at(o).get("slotType").value!==p.cc.ACTUAL&&o>0;){var s=n.at(o).get("slotType").value;s!==p.cc.REDISTRIBUTED&&s!==p.cc.NEW||(e++,s===p.cc.NEW&&i++),o--}r.newSlotCount=i,this.reRenderSlotInfo(n,a),this.enableSlots(r)}this.updateView()},e.prototype.enableSlots=function(e){var t=this.getFormArraySICustom(),n=e.totalSlots-1,l=e.sitesToRedistribute+e.newSlotCount,a=e.totalSlots-l;if(a<0&&(a=0),a=a<0?p.yc:a,l>0){for(var i=t.at(n);n>=a&&i&&i.get("slotType").value!==p.cc.ACTUAL;)t.at(n).get("noOfCenters").enable(),t.at(n).get("slotStartDate").enable(),t.at(n).get("slotEndDate").enable(),t.at(n).get("action").enable(),t.at(n).get("usedCohortKeys").enable(),i=t.at(--n);this.setFSIforRedistributedSlot(n+=1,e.fsiDate)}},e.prototype.reRenderSlotInfo=function(e,t){for(var n=0;n<t.length;n++){var l=e.at(n);if(l.get("slotType").value!==p.cc.ACTUAL&&l.get("slotType").value!==p.cc.NEW){var a=t[n];e.at(n).get("noOfCenters").setValue(a.noOfCenters),e.at(n).get("slotStartDate").setValue(a.slotStartDate),e.at(n).get("slotEndDate").setValue(a.slotEndDate),e.at(n).get("usedCohortKeys").setValue(a.usedCohortKeys)}}},e.prototype.setFSIforRedistributedSlot=function(e,t){var n=this.getFormArraySICustom();Number(this.countryDetailFormObject.get("siBody").get("siField").get("sitesToRedistribute").value)>0&&(n.at(e).get("slotStartDate").setValue(t),n.at(e).get("slotStartDate").disable())},e.prototype.emptyTable=function(){if(this.countryDetailForm&&this.countryDetailForm.value){for(var e=this.getFormArraySICustom();0!==e.length;)e.removeAt(0);this.updateView()}},e.prototype.resetSIForm=function(e){e&&this.countryDetailForm.value&&(this.countryDetailForm.value.get("siBody").reset(),this.countryDetailForm&&this.countryDetailForm.value&&this.countryDetailForm.value.get("siBody.siMethod")&&i.c.resetFormErrors(this.countryDetailForm.value.get("siBody.siMethod")),this.countryDetailForm.value.get("siHeader.siMethod").setValue(e))},e.prototype.updateView=function(){if(this.countryDetailForm&&this.countryDetailForm.value){var e=this.getFormArraySICustom();this.dataSource.next(e.controls)}},e.prototype.getFormArraySICustom=function(){return this.countryDetailForm.value.get("siBody.siCustomMethod.initiationSchedule")},e.prototype.getBlankFieldValidationMsg=function(){return{BLANK_FIELD:this.localeAppResourcesService.getResource("CSI_BLANK_FIELD")}},e.prototype.isPlanNonEditable=function(e,t,n){var l;return void 0===n&&(n=!0),n&&(l=this.checkModulePrivilege(p.L)),h.a.isPlanNonEditable(e,t,l)},e.prototype.getFSIControl=function(e){var t=null;if(e&&e.get){var n=e.get("siBody");if(n&&n.get){var l=n.get("siField");l&&l.get&&(t=l.get("FSIDate"))}}return t},e.prototype.getTotalNoOfSitesControl=function(e){var t=null;if(e&&e.get){var n=e.get("siBody");if(n&&n.get){var l=n.get("siField");l&&l.get&&(t=l.get("totalNoOfSites"))}}return t},e.prototype.resetEnrollmentParametersFormGroup=function(){var e=this.createEnrolmentParametersFormgroup();this.countryDetailForm.value.setControl("enrolmentParameters",e)},e.prototype.createEnrolmentParametersFormgroup=function(){return this.fb.group({enrollmentTarget:[""],overRecruitmentPercent:[""],maximumEnrollment:[{value:"",disabled:!0}],ARTB:[""],solvedLSR:[{value:"",disabled:!0}],SR:[""],originalSR:[""],SFR:[""],RR:[""],originalRR:[""],numSites:[{value:"",disabled:!0}],ARC:[""],activeSites:[{value:"",disabled:!0}],calcSAS:[{value:"",disabled:!0}],FSS:[""],SITOFSSDAYS:[""],avgDaysToSiteInit:[{value:"",disabled:!0}],projSR:[{value:"",disabled:!0}],projSFR:[{value:"",disabled:!0}],projRR:[{value:"",disabled:!0}],projARC:[{value:"",disabled:!0}]})},e.prototype.fetchCohortList=function(e){var t=[];return e&&e.cohortList&&e.cohortList.cohortPlanParams&&(t=e.cohortList.cohortPlanParams),t},e.prototype.isCohortPlan=function(e){return h.a.isCohortPlan(e.planProperties)},Object.defineProperty(e.prototype,"isCohortAdjustment",{get:function(){var e=this.sourcePlanDetails.planProperties;return!(!e||e.isPlan||"Y"!==e.isCohortPlan)},enumerable:!0,configurable:!0}),e.prototype.getMaxRowsAllowed=function(e){return this.plansService.getMaxRowsAllowed(e)},e.prototype.getDCPSolverResponse=function(e,t,n,l,a,r){var o=this;if(e||e.baseParams||e.countryInfo){this.studyKey=this.userDataService.getLastVisitedStudyKey();var s={};s.studyKey=this.studyKey,s[n.planKey]=t.planKey,s.version=t.version,s.isCohortPlan=t.isCohortPlan;var u={};t.isPlan?u=this.getCommandTags(e,l):(e.baseParams.centerInitInfo&&(Object.keys(e.baseParams.centerInitInfo)[0]=null),u=this.getAdjustCommandTags(e,l));var h=c.m.getModuleInfo(p.C),m=this.payloadCommandService.getCommandDetails(n.commandName,s,null,u,h),g={};return g.dependencyList=[i.l.GetPlanDetails+"_"+this.studyKey+"_"+t.planKey,i.l.GetPlanListKey+"_"+this.studyKey],this.baseConnectionService.sendRequest(m,g).pipe(Object(d.a)((function(e){if(e){if(e.result.toUpperCase()===i.k.RESULT_OK)return e;if(e.result.toUpperCase()===i.k.RESULT_ERROR){var t=o.errorTermsStoreService.getErrorMessage(+e.error.errorCode);o.plansService.showErrorMessage(t)}}})))}},e.prototype.showSolverUIErrorDialog=function(e,t){var n=this.localeAppResourcesService.getResource(e);this.plansService.openDialog(t,n,"EnrollmentParametersComponent")},e.prototype.showErrorBanner=function(e){var t=this.errorTermsStoreService.getErrorMessage(e);this.plansService.showErrorMessage(t)},e.prototype.getCommandTags=function(e,t){var n={multiCountryPlanUpdator:{value:[]}},l={params:{solveFor:t},countryPlanParams:{}};return l.countryPlanParams={params:{countryKey:e.countryInfo.countryKey,countryName:e.countryInfo.countryName},value:e.baseParams},n.multiCountryPlanUpdator.value.push({countryPlanUpdator:l}),n},e.prototype.getAdjustCommandTags=function(e,t){var n={adjustMultiCountryPlanUpdator:{value:[]}},l={params:{solveFor:t},adjustCountryPlanParams:{}};return l.adjustCountryPlanParams={params:{countryKey:e.countryInfo.countryKey,countryName:e.countryInfo.countryName},value:e.baseParams},n.adjustMultiCountryPlanUpdator.value.push({adjustCountryPlanUpdator:l}),n},e.prototype.getParams=function(e){var t={};return t.studyKey=e.studyKey,!0===e.isPlan?t.planKey=e.planKey:t.adjustStudyPlanKey=e.planKey,t.version=e.version,t},e.prototype.setSelectedEnrollmentParameterDetails=function(e){this.planDetailsService.setSelectedEnrollmentParameterDetails(e)},e.prototype.getSelectedEnrollmentParameterDetailsSubject=function(){return this.planDetailsService.selectedEnrollmentParameterDetailsSubject},Object.defineProperty(e.prototype,"selectedCountryCustomSISlots",{get:function(){return this.selectedCountryDetails.planParamsDetails.centerInitInfo.granularCenterInitInfo.centerInitSlot},enumerable:!0,configurable:!0}),e.prototype.resetFSS=function(e){var t=this.countryDetailsSubject.value,n=this.countryDetailForm.value.get("enrolmentParameters");if(e&&n.get("SITOFSSDAYS")){var l=g(e).add(n.get("SITOFSSDAYS").value,"days").toDate();n.get("FSS").setValue(l)}var a=this.countryDetailForm.value.get("cohortEnrollmentParameters"),i=function(e){if(a.get(e)){var n=a.get(e),l=n.get("cohortKey").value,i=t.cohortList.find((function(e){return e.cohortKey===l}));n.get("SITOFSSDAYS").setValue(i.planParamsDetails.SITOFSSDAYS)}};for(var r in a.controls)i(r)},e}()},kiOF:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var l=n("IfiR"),a=n("6nV5"),i=n("wgY5"),r=n("fQLH"),o=n("R+ki"),s=n("uMZP"),u=(n("gtvs"),n("GSwp"),n("5IsW")),d=(n("IW84"),n("HY2n")),c=i,p=function(){function e(e,t,n){this.countryDetailsService=e,this.enrollmentParametersService=t,this.plansService=n,this.mapCohortChangeCEPNumSitesSubscription=new r.a,this.initiationScheduleUsedCohortKeysSubscription=new r.a}return e.prototype.checkForActualFSS=function(e,t,n){if(t&&n&&t.length===Object.keys(n.controls).length){var l=e&&e.hasOwnProperty("isPlan")&&"boolean"==typeof e.isPlan&&!e.isPlan;t.forEach((function(e){var t=!1;l&&e.planParamsDetails&&e.planParamsDetails.hasOwnProperty("actuals")&&e.planParamsDetails.actuals.hasOwnProperty("FSS")&&a.c.isDefined(e.planParamsDetails.actuals.FSS)&&(t=!0),e.hasDependencies&&(t=!0);var i=n.get(e.cohortName);i&&(t?(i.get("FSS").disable(),i.get("SITOFSSDAYS").disable()):(i.get("FSS").enable(),i.get("SITOFSSDAYS").enable()))}))}},e.prototype.subscribeToFormControlChanges=function(e,t,n,l,a,i,r,o,s){if(e&&Object.keys(e.controls).length>0){var u=this.plansService.isRTypeCohortStudy();for(var d in a&&(u?a.enable():a.disable()),this.destroySubscriptions(l),this.subscribeToMapCohortChangeCEPNumSites(e,l),this.subscribeToInitiationScheduleUsedCohortKeysChange(e,l),this.subscribeToTotalNoOfSitesValueChange(n,e,l),this.subscribeToFsiControlValueChange(t,e,l),e.controls)if(e.get(d)){var c=e.get(d);this.enrollmentParametersService.subscribeToEnrollmentTargetValueChange(c,l),this.enrollmentParametersService.subscribeToOverrecruitmentPercentValueChange(c,l),this.enrollmentParametersService.subscribeToSRValueChange(c,l),u?this.subscribeToCountrySFRValueChange(a,l,i,r,o,s):this.enrollmentParametersService.subscribeToSFRValueChange(c,l),this.enrollmentParametersService.subscribeToRRValueChange(c,l),this.enrollmentParametersService.subscribeToSITOFSSDAYSValueChange(c,t,l),this.enrollmentParametersService.subscribeToARCValueChange(c,l),this.enrollmentParametersService.subscribeToCalcSASValueChange(c,l),this.enrollmentParametersService.subscribeToFSSValueChange(c,t,l),this.enrollmentParametersService.subscribeToNumSitesValueChange(c,l),this.enrollmentParametersService.subscribeToAvgDaysToSiteInitValueChange(c,l),this.enrollmentParametersService.subscribeToActiveSitesValueChange(c,l),this.enrollmentParametersService.subscribeToProjSRValueChange(c,l),this.enrollmentParametersService.subscribeToProjSFRValueChange(c,l),this.enrollmentParametersService.subscribeToProjRRValueChange(c,l),this.enrollmentParametersService.subscribeToProjARCValueChange(c,l),this.enrollmentParametersService.subscribeToARTBValueChange(c,l)}}},e.prototype.patchCohortParameters=function(e,t,n,l){var a=this;e&&t&&t.controls&&e.length===Object.keys(t.controls).length&&e.forEach((function(e){if(t.get(e.cohortName)){var i=a.getCohortFormDataObject(e,n,l);i&&t.get(e.cohortName).patchValue(i)}}))},e.prototype.getCohortFormDataObject=function(e,t,n){var l;if(e&&e.planParamsDetails){var i=e.planParamsDetails,r=i.PLSR;r=r?c(r).format("DD-MMM-YYYY"):"";var o=s.m.computeActiveSites(i.numSites,i.ARC),d=s.m.computeSAS(i.numSites,Number(o));l={enrollmentTarget:i.enrollmentTarget,overRecruitmentPercent:a.c.formatDecimal(i.overRecruitmentPercent,"0.1-1"),maximumEnrollment:i.maximumEnrollment,ARTB:i.ARTB,solvedLSR:r,SR:a.c.formatDecimal(i.SR,"0.1-3"),originalSR:i.SR,SFR:a.c.formatDecimal(i.SFR,"0.1-1"),RR:a.c.formatDecimal(i.RR,"0.1-3"),originalRR:i.RR,numSites:i.numSites,ARC:a.c.formatDecimal(i.ARC,"0.1-1"),activeSites:o,calcSAS:a.c.formatDecimal(parseFloat(d.toString()),"0.1-1"),FSS:i.FSS,SITOFSSDAYS:i.SITOFSSDAYS,avgDaysToSiteInit:a.c.formatDecimal(i.avgDaysToSiteInit,"0.1-1"),cohortKey:e.cohortKey,cohortName:e.cohortName,isCohortExcluded:e.isCohortExcluded,cohortExcludedState:e.isCohortExcluded?u.m.EXCLUDED:u.m.INCLUDED,actEnrlWhnSRMod:i.actEnrlWhnSRMod?i.actEnrlWhnSRMod:0,actEnrlWhnSFRMod:i.actEnrlWhnSFRMod?i.actEnrlWhnSFRMod:0,dateSRMod:i.dateSRMod?i.dateSRMod:u.M,dateSFRMod:i.dateSFRMod?i.dateSFRMod:u.M,actualRT:i.actuals?i.actuals.RT:u.M},this.enrollmentParametersService.setCalcParams(i.countryCalcQuantity,l),t&&i.isAdjustable&&(this.setParentPlanParams(i.parentPlan,l),this.setIsCountryAdjusted(i,l)),n&&this.setMessupAndSequenceKey(e,l)}return l},e.prototype.subscribeToFsiControlValueChange=function(e,t,n){var l=this;if(e&&n&&!n.has("fsiControlSubscription")){var i=e.valueChanges.pipe(Object(o.a)(u.A)).subscribe((function(n){var i=u.M;a.c.isDefined(n,!1)&&(i=n),l.setField("FSIDate",i,t,!1);var r=l.countryDetailsService.countryDetailFormObject.get("siBody"),o=r&&r.get("siField"),s=o&&o.get("FSIDate");s&&l.setField("isCohModified",s.dirty,t),l.enrollmentParametersService&&l.enrollmentParametersService.setFSS(t,e)}));n.set("fsiControlSubscription",i)}},e.prototype.subscribeToTotalNoOfSitesValueChange=function(e,t,n){var l=this;if(e&&n&&!n.has("totalNoOfSitesSubscription")){var i=e.valueChanges.pipe(Object(o.a)(u.A)).subscribe((function(e){if((l.countryDetailsService.countryDetailFormObject&&l.countryDetailsService.countryDetailFormObject.get("siHeader.siteInitiationMethod")?l.countryDetailsService.countryDetailFormObject.get("siHeader.siteInitiationMethod").value:u.ac.PERCENT)===u.ac.PERCENT){var n=u.M;a.c.isDefined(e,!0)&&(n=e),l.setField("numSites",n,t);var i=l.countryDetailsService.countryDetailFormObject.get("siBody"),r=i&&i.get("siField"),o=r&&r.get("totalNoOfSites");l.setField("isCohModified",o.dirty,t)}}));n.set("totalNoOfSitesSubscription",i)}},e.prototype.subscribeToMapCohortChangeCEPNumSites=function(e,t){var n=this;if(t&&!t.has("mapCohortChangeCEPNumSitesSubscription")){var l=this.mapCohortChangeCEPNumSitesSubscription.asObservable().subscribe((function(t){if(e){var l=function(l){if(e.get(l)){var a=e.get(l),i=a.get("cohortKey").value,r=0;if(i){t.forEach((function(e){e&&e.usedCohortKeys&&e.usedCohortKeys.toString().toLowerCase()!==u.g.toLowerCase()&&e.noOfCenters?-1!==e.usedCohortKeys.toString().split(",").indexOf(i.toString())&&(r+=parseInt(e.noOfCenters.toString(),10)):e.noOfCenters&&(r+=parseInt(e.noOfCenters.toString(),10))})),n.setFieldForCohort(a,"numSites",!0,r);var o=n.countryDetailsService.countryDetailFormObject.get("siBody");o&&n.setFieldForCohort(a,"isCohModified",!0,o.dirty)}}};for(var a in e.controls)l(a)}}));t.set("mapCohortChangeCEPNumSitesSubscription",l)}},e.prototype.subscribeToInitiationScheduleUsedCohortKeysChange=function(e,t){var n=this;if(t&&!t.has("initiationScheduleUsedCohortKeysSubscription")){var l=this.initiationScheduleUsedCohortKeysSubscription.asObservable().subscribe((function(t){if(n.countryDetailsService.initiationSchedule&&n.countryDetailsService.initiationSchedule.value)if(t.isCohortIncluded_Only){for(var l in e.controls)if(e.get(l)&&e.get(l).get){var a=e.get(l);a.get("isCohortIncluded_Now").value&&(t.cohortKey=a.get("cohortKey").value,t.isCohortExcluded=a.get("isCohortExcluded").value,n.changeUsedCohortKeys(t))}}else t.cohortKey&&!t.isCohortIncluded_Only&&n.changeUsedCohortKeys(t)}));t.set("initiationScheduleUsedCohortKeysSubscription",l)}},e.prototype.changeUsedCohortKeys=function(e){var t=this;this.countryDetailsService.initiationSchedule.value.forEach((function(n,l){var a=[];n.usedCohortKeys&&(a=n.usedCohortKeys.toString().split(",")),e.isCohortExcluded?a.forEach((function(t,n){t===e.cohortKey&&a.splice(n,1)})):a[0]===u.g||a.includes(e.cohortKey.toString())||(a.push(e.cohortKey.toString()),t.countryDetailsService.includedCohorts&&a.length===t.countryDetailsService.includedCohorts.length&&(a=[u.g])),t.countryDetailsService.initiationSchedule.at(l).get("usedCohortKeys").setValue(a.join(",")),t.triggerChangeInTotalNoOfSite(t.countryDetailsService.initiationSchedule)}))},e.prototype.triggerChangeInTotalNoOfSite=function(e){this.mapCohortChangeCEPNumSitesSubscription.next(e.getRawValue())},e.prototype.subscribeToCountrySFRValueChange=function(e,t,n,l,i,r){if(e&&t&&!t.has("SFRSubscription")){var s=e.valueChanges.pipe(Object(o.a)(u.A)).subscribe((function(t){if(a.c.isDefined(t,!0)){t=a.c.formatDecimal(t,"0.1-1"),e.setValue(t,{emitEvent:!1});var o=n.value;if(a.c.isDefined(o,!0)&&t!==o){var s=new Date;l.setValue(r.value),i.setValue(s)}}}));t.set("SFRSubscription",s)}},e.prototype.setField=function(e,t,n,l){if(void 0===l&&(l=!0),n&&e)for(var a in n.controls)if(n.get(a)){var i=n.get(a);this.setFieldForCohort(i,e,l,t)}},e.prototype.setFieldForCohort=function(e,t,n,l){e.get(t)&&(n&&e.get("isCohortExcluded")&&e.get("isCohortExcluded").value||e.get(t).setValue(l))},e.prototype.setCohortFormGroupValidators=function(e){if(e)for(var t in e.controls)if(e.get(t)&&e.get(t).get){var n=e.get(t);n.get("isCohortExcluded")&&(n.get("isCohortExcluded").value?a.c.clearFormGroupValidators(n):this.setCohortFormValidators(n))}},e.prototype.clearCohortFormGroupValidators=function(e){if(e)for(var t in e.controls)if(e.get(t)&&e.get(t).get){var n=e.get(t);a.c.clearFormGroupValidators(n)}},e.prototype.setCohortFormValidators=function(e,t){void 0===t&&(t=!1),e&&e.get&&(e.get("enrollmentTarget")&&(e.get("enrollmentTarget").setValidators([l.B.required,l.B.min(u.sc.MIN_ENROLLMENT_TARGET),l.B.max(u.sc.MAX_ENROLLMENT_TARGET)]),t&&e.get("enrollmentTarget").updateValueAndValidity()),e.get("overRecruitmentPercent")&&(e.get("overRecruitmentPercent").setValidators([l.B.required,l.B.min(u.sc.MIN_OVER_RECRUITMENT_PERCENT),l.B.max(u.sc.MAX_OVER_RECRUITMENT_PERCENT)]),t&&e.get("overRecruitmentPercent").updateValueAndValidity()),e.get("SR")&&(e.get("SR").setValidators([l.B.required,l.B.max(u.sc.MAX_SR)]),t&&e.get("SR").updateValueAndValidity()),e.get("numSites")&&(e.get("numSites").setValidators([l.B.min(u.sc.MIN_NUM_SITES),l.B.max(u.sc.MAX_NUM_SITES)]),t&&e.get("numSites").updateValueAndValidity()),e.get("activeSites")&&(e.get("activeSites").setValidators([l.B.min(u.sc.MIN_ACTIVE_SITES),l.B.max(u.sc.MAX_ACTIVE_SITES)]),t&&e.get("activeSites").updateValueAndValidity()),e.get("calcSAS")&&(e.get("calcSAS").setValidators([l.B.min(u.sc.MIN_CALC_SAS),l.B.max(u.sc.MAX_CALC_SAS)]),t&&e.get("calcSAS").updateValueAndValidity()),e.get("SITOFSSDAYS")&&(e.get("SITOFSSDAYS").setValidators([l.B.min(u.sc.MIN_SITOFSSDAYS)]),t&&e.get("SITOFSSDAYS").updateValueAndValidity()),e.setValidators([Object(s.Q)("RR",u.sc.MAX_RR,"SR",!1,u.sc.MAX_SR),Object(s.W)("SFR",u.sc.MIN_SFR,u.sc.MAX_SFR,"SR",!1,u.sc.MAX_SR),Object(s.V)("ARC","activeSites",!1,u.sc.MAX_CALC_SAS),Object(s.b)("ARTB","FSIDate",!1,"FSS",!1),Object(s.z)("FSS","FSIDate",!1)]),t&&e.updateValueAndValidity())},e.prototype.createCohortFormGroups=function(e){var t=new l.k({}),n=this.enrollmentParametersService.isSRAvailable(),a=this.plansService.isRTypeCohortStudy();return e&&e.forEach((function(e){var i=new l.k({enrollmentTarget:new l.h(""),overRecruitmentPercent:new l.h(""),maximumEnrollment:new l.h({value:"",disabled:!0}),ARTB:new l.h(""),solvedLSR:new l.h({value:"",disabled:!0}),SR:new l.h(""),originalSR:new l.h(""),SFR:new l.h(""),RR:new l.h(""),originalRR:new l.h(""),numSites:new l.h({value:"",disabled:!0}),ARC:new l.h(""),activeSites:new l.h({value:"",disabled:!0}),calcSAS:new l.h({value:"",disabled:!0}),FSS:new l.h(""),SITOFSSDAYS:new l.h(""),avgDaysToSiteInit:new l.h({value:"",disabled:!0}),projSR:new l.h({value:"",disabled:!0}),projSFR:new l.h({value:"",disabled:!0}),projRR:new l.h({value:"",disabled:!0}),projARC:new l.h({value:"",disabled:!0}),cohortKey:new l.h(e.cohortKey),cohortName:new l.h(e.cohortName),isCohortExcluded:new l.h(""),isCohortIncluded_Now:new l.h({value:!1,disabled:!0}),cohortExcludedState:new l.h(0),FSIDate:new l.h(""),actEnrlWhnSRMod:new l.h(""),actEnrlWhnSFRMod:new l.h(""),dateSRMod:new l.h(""),dateSFRMod:new l.h(""),parentPlanRR:new l.h(""),parentPlanSR:new l.h(""),parentPlanSFR:new l.h(""),actualRT:new l.h(""),solverValue:new l.h({value:"",disabled:!0}),originalSolverValue:new l.h({value:"",disabled:!0}),isCohModified:new l.h(!1),isCountryAdjusted:new l.h(""),isCohSelected:new l.h(!1),isReCalRequired:new l.h,reCalSeqNumber:new l.h,isParallelCohort:new l.h});n?i.get("RR").disable():i.get("SR").disable(),a&&i.get("SFR").disable(),t.addControl(e.cohortName,i)})),this.setCohortFormGroupValidators(t),t},e.prototype.updateIncludedCohortList=function(e,t,n,l){var a;if(e)for(var i in a=this.countryDetailsService.countryDetailFormObject&&this.countryDetailsService.countryDetailFormObject.get("siHeader.siteInitiationMethod")?this.countryDetailsService.countryDetailFormObject.get("siHeader.siteInitiationMethod").value:u.ac.PERCENT,l&&1===l.length&&this.initiationScheduleUsedCohortKeysSubscription.next({cohortKey:l[0],isCohortIncluded_Only:!1,isCohortExcluded:!1}),e.controls)if(e.get(i)&&e.get(i).get){var r=e.get(i),o=r.get("cohortKey").value,s=-1===l.indexOf(o);r.get("isCohortExcluded").setValue(s),this.setCohortExcludedState(r,s),this.resetCohortParametersFormValidations(r),s||(a===u.ac.PERCENT&&r.get("numSites").setValue(t),n&&this.enrollmentParametersService.setFSSInFormgroup(r,c(n)))}},e.prototype.resetCohortParametersFormValidations=function(e){e&&e.get("isCohortExcluded")&&(e.get("isCohortExcluded").value?a.c.clearFormGroupValidators(e):this.setCohortFormValidators(e,!0))},e.prototype.setCohortExcludedState=function(e,t){if(e&&e.get("cohortExcludedState")){var n=e.get("cohortExcludedState").value;switch(n){case u.m.EXCLUDED:n=t?u.m.EXCLUDED:u.m.INCLUDED;break;case u.m.INCLUDED:case u.m.EXCLUDED_BUT_NOT_SAVED:n=t?u.m.EXCLUDED_BUT_NOT_SAVED:u.m.INCLUDED}e.get("cohortExcludedState").setValue(n)}},e.prototype.applyCohortValidations=function(e,t){e&&(t?this.clearCohortFormGroupValidators(e):this.setCohortFormGroupValidators(e))},e.prototype.updateCohortExclusionState=function(e,t,n){return t&&t.cohortList&&t.cohortList.forEach((function(t){var l=e.find((function(e){return e.cohortKey===t.cohortKey}));l&&(l.isExcludable=!(!n&&t.planParamsDetails&&!t.planParamsDetails.isDeletable))})),e},e.prototype.updateCohortForm=function(e,t,n,l){if(e&&e.cohortList){var a=!n.isPlan,i=n.isOverThreshold;void 0!==l&&l?this.patchSingleCohortParameters(e.cohortList,l,a,i):this.patchCohortParameters(e.cohortList,t,a,i),this.checkForActualFSS(n,e.cohortList,t)}},e.prototype.fetchIncludedCohorts=function(e){return d.a.fetchIncludedCohorts(e)},e.prototype.destroySubscriptions=function(e){e&&e.forEach((function(t,n){t.unsubscribe(),e.delete(n)}))},e.prototype.setParentPlanParams=function(e,t){t&&(e?(t.parentPlanRR=a.c.formatDecimal(e.RR,"0.1-3"),t.parentPlanSR=a.c.formatDecimal(e.SR,"0.1-3"),t.parentPlanSFR=a.c.formatDecimal(e.SFR,"0.1-1")):(t.parentPlanRR="",t.parentPlanSR="",t.parentPlanSFR=""))},e.prototype.setIsCountryAdjusted=function(e,t){t&&e&&void 0!==e.isCountryAdjusted&&(t.isCountryAdjusted=e.isCountryAdjusted)},e.prototype.patchSingleCohortParameters=function(e,t,n,l){var a=this;e&&t&&t.controls&&e.forEach((function(e){if(t.get("cohortName").value===e.cohortName){var i={numSites:t.get("numSites").value,activeSites:t.get("activeSites").value,calcSAS:t.get("calcSAS").value};t.reset();var r=a.getCohortFormDataObject(e,n,l);r&&(null!=i.numSites&&void 0!==r.numSites&&(r.isCohModified=i.numSites.toString()!==r.numSites.toString()),r.numSites=null!=i.numSites&&Number(i.numSites),r.activeSites=null!=i.activeSites&&Number(i.activeSites),r.calcSAS=null!=i.calcSAS&&Number(i.calcSAS),t.patchValue(r))}}))},e.prototype.setMessupAndSequenceKey=function(e,t){t&&(e&&void 0!==e.isReCalRequired&&(t.isReCalRequired=e.isReCalRequired),e&&void 0!==e.reCalSeqNumber&&(t.reCalSeqNumber=e.reCalSeqNumber),e&&void 0!==e.isParallelCohort&&(t.isParallelCohort=e.isParallelCohort))},e.prototype.resetFSS=function(e){this.countryDetailsService.resetFSS(e)},e}()},qeu8:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var l=n("LoAr"),a=(n("Hfg7"),n("C7Lb"),n("LYzL")),i=(n("SeAg"),n("WV+C")),r=n("Z5FQ"),o=(n("0xYh"),l["ɵcrt"]({encapsulation:2,styles:[".mat-button-toggle-group,.mat-button-toggle-standalone{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}@media (-ms-high-contrast:active){.mat-button-toggle-group,.mat-button-toggle-standalone{outline:solid 1px}}.mat-button-toggle-group-appearance-standard,.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{border-radius:4px}@media (-ms-high-contrast:active){.mat-button-toggle-group-appearance-standard,.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{outline:0}}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}@media (-ms-high-contrast:active){.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media (-ms-high-contrast:active){.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}}@media (hover:none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{line-height:48px;padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}@media (-ms-high-contrast:active){.mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}}@media (-ms-high-contrast:active){.mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 48px}}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:0 0;color:inherit;padding:0;margin:0;font:inherit;outline:0;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],data:{}}));function s(e){return l["ɵvid"](2,[l["ɵqud"](671088640,1,{_buttonElement:0}),(e()(),l["ɵeld"](1,0,[[1,0],["button",1]],null,2,"button",[["class","mat-button-toggle-button"],["type","button"]],[[8,"id",0],[1,"tabindex",0],[1,"aria-pressed",0],[8,"disabled",0],[1,"name",0],[1,"aria-label",0],[1,"aria-labelledby",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component._onButtonClick()&&l),l}),null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"div",[["class","mat-button-toggle-label-content"]],null,null,null,null,null)),l["ɵncd"](null,0),(e()(),l["ɵeld"](4,0,null,null,0,"div",[["class","mat-button-toggle-focus-overlay"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,1,"div",[["class","mat-button-toggle-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),l["ɵdid"](6,212992,null,0,a.u,[l.ElementRef,l.NgZone,i.a,[2,a.k],[2,r.a]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],(function(e,t){var n=t.component;e(t,6,0,n.disableRipple||n.disabled,l["ɵnov"](t,1))}),(function(e,t){var n=t.component;e(t,1,0,n.buttonId,n.disabled?-1:n.tabIndex,n.checked,n.disabled||null,n.name||null,n.ariaLabel,n.ariaLabelledby),e(t,5,0,l["ɵnov"](t,6).unbounded)}))}},qy3m:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var l=function(e){return e.COUNTRY="Country",e.STUDY_TARGET="Study Target",e.COHORT="Cohort",e.ACTUALS="Actuals",e.PROJECTED="Projected",e.WORLDWIDE="Worldwide",e.PARENT="ParentPlan",e.WW="WW",e.MANAGE_COUNTRY_GRID="mgc",e.WWWORLDWIDE="WWWorldwide",e.TARGET="Target",e}({})},r9gR:function(e,t,n){"use strict";n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return z}));var l=n("LoAr"),a=n("WT9V"),i=n("IfiR"),r=n("6nV5"),o=n("SECt"),s=n("eXL1"),u=n("IvSS"),d=n("WV+C"),c=n("0xYh"),p=n("C7Lb"),h=n("SeAg"),m=n("Gien"),g=n("GcYS"),S=n("Z5FQ"),f=n("EAoM"),v=n("X7Hn"),C=n("Hc9t"),y=n("rXXt"),R=n("QsvA"),D=n("Ho7M"),P=n("LYzL"),b=n("O0P8"),E=n("dgjn"),T=n("+3V+"),A=n("UUMc"),I=n("s8WJ"),_=n("x8+N"),N=(n("Z0E0"),n("uMZP"),n("ynHq"),l["ɵcrt"]({encapsulation:2,styles:[],data:{}}));function O(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","col-12 vertical-margin padding-left"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](2,null,[""," ","    "," ","   "," ",""]))],null,(function(e,t){var n=t.component;e(t,2,0,n.siCustomSchedulerResource.PARENT,n.parentNumSites(),n.siCustomSchedulerResource.ACTUALS,n.actualNumSites(),n.siCustomSchedulerResource.PROJECTED,n.projectedNumSites())}))}function M(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,13,"div",[["class","control-group row"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"label",[["class","col ctos-labels no-padding-right d-flex align-items-center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,11,"div",[["class","col d-flex justify-content-end"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,10,"input",[["class","form-control text-right"],["ctosSignedInteger",""],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0;return"input"===t&&(a=!1!==l["ɵnov"](e,7)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,7).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,7)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,7)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,8).onChange(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,8).onChange(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,8).onTouched()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,13).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,13).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,13).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,13).onChange(n)&&a),a}),null,null)),l["ɵprd"](512,null,a["ɵNgClassImpl"],a["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](5,278528,null,0,a.NgClass,[a["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](6,{disabled:0}),l["ɵdid"](7,16384,null,0,i.e,[l.Renderer2,l.ElementRef,[2,i.a]],null,null),l["ɵdid"](8,16384,null,0,i.x,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,i.q,(function(e,t){return[e,t]}),[i.e,i.x]),l["ɵdid"](10,540672,null,0,i.i,[[8,null],[8,null],[6,i.q],[2,i.E]],{form:[0,"form"]},null),l["ɵprd"](2048,null,i.r,null,[i.i]),l["ɵdid"](12,16384,null,0,i.s,[[4,i.r]],null,null),l["ɵdid"](13,16384,null,0,r.W,[l.ElementRef],null,null)],(function(e,t){var n=t.component,l=e(t,6,0,n.isPlanNonEditable());e(t,5,0,"form-control text-right",l),e(t,10,0,n.siCustomSchedulerControls.uninitiatedSite)}),(function(e,t){e(t,1,0,t.component.siCustomSchedulerResource.SI_UNITITIATED_SITES),e(t,3,0,l["ɵnov"](t,12).ngClassUntouched,l["ɵnov"](t,12).ngClassTouched,l["ɵnov"](t,12).ngClassPristine,l["ɵnov"](t,12).ngClassDirty,l["ɵnov"](t,12).ngClassValid,l["ɵnov"](t,12).ngClassInvalid,l["ɵnov"](t,12).ngClassPending)}))}function F(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,16,"div",[["class","control-group row "]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"label",[["class","col ctos-labels no-padding-right d-flex align-items-center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,11,"div",[["class","col d-flex justify-content-end"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,16777216,null,null,10,"input",[["class","form-control redistributeControl text-right "],["ctosSignedInteger",""],["matTooltipClass","red-tooltip"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"longpress"],[null,"keydown"],[null,"touchend"],[null,"paste"],[null,"drop"],[null,"change"]],(function(e,t,n){var a=!0;return"input"===t&&(a=!1!==l["ɵnov"](e,7)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,7).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,7)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,7)._compositionEnd(n.target.value)&&a),"longpress"===t&&(a=!1!==l["ɵnov"](e,12).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,12)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,12)._handleTouchend()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,13).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,13).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,13).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,13).onChange(n)&&a),a}),null,null)),l["ɵprd"](512,null,a["ɵNgClassImpl"],a["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](5,278528,null,0,a.NgClass,[a["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](6,{disabled:0}),l["ɵdid"](7,16384,null,0,i.e,[l.Renderer2,l.ElementRef,[2,i.a]],null,null),l["ɵprd"](1024,null,i.q,(function(e){return[e]}),[i.e]),l["ɵdid"](9,540672,null,0,i.i,[[8,null],[8,null],[6,i.q],[2,i.E]],{form:[0,"form"]},null),l["ɵprd"](2048,null,i.r,null,[i.i]),l["ɵdid"](11,16384,null,0,i.s,[[4,i.r]],null,null),l["ɵdid"](12,212992,null,0,o.d,[s.c,l.ElementRef,u.a,l.ViewContainerRef,l.NgZone,d.a,c.c,c.h,o.b,[2,p.b],[2,o.a],[2,h.HAMMER_LOADER]],{message:[0,"message"],tooltipClass:[1,"tooltipClass"]},null),l["ɵdid"](13,16384,null,0,r.W,[l.ElementRef],null,null),(e()(),l["ɵeld"](14,0,null,null,2,"div",[["class","col-12 range-width ctos-labels"]],null,null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,1,"span",[["class","redistributeRange "]],null,null,null,null,null)),(e()(),l["ɵted"](16,null,["",""]))],(function(e,t){var n=t.component,l=e(t,6,0,n.isPlanNonEditable());e(t,5,0,"form-control redistributeControl text-right ",l),e(t,9,0,n.siCustomSchedulerControls.sitesToRedistribute),e(t,12,0,n.consolidateValidationErrors(n.siCustomSchedulerControls.sitesToRedistribute.errors),"red-tooltip")}),(function(e,t){var n=t.component;e(t,1,0,n.siCustomSchedulerResource.SI_SITES_TO_REDISTRIBUTE),e(t,3,0,l["ɵnov"](t,11).ngClassUntouched,l["ɵnov"](t,11).ngClassTouched,l["ɵnov"](t,11).ngClassPristine,l["ɵnov"](t,11).ngClassDirty,l["ɵnov"](t,11).ngClassValid,l["ɵnov"](t,11).ngClassInvalid,l["ɵnov"](t,11).ngClassPending),e(t,16,0,n.siCustomSchedulerData.range)}))}function L(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"button",[["class","always-enabled ctos-btn-secondary"],["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.openMapCohortsDialog()&&l),l}),m.b,m.a)),l["ɵprd"](512,null,a["ɵNgClassImpl"],a["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,a.NgClass,[a["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"disabled-button":0}),l["ɵdid"](4,180224,null,0,g.b,[l.ElementRef,c.h,[2,S.a]],{disabled:[0,"disabled"]},null),(e()(),l["ɵted"](5,0,[" "," "]))],(function(e,t){var n=t.component,l=e(t,3,0,n.isMapCohortDisabled());e(t,2,0,"always-enabled ctos-btn-secondary",l),e(t,4,0,n.isMapCohortDisabled())}),(function(e,t){var n=t.component;e(t,0,0,l["ɵnov"](t,4).disabled||null,"NoopAnimations"===l["ɵnov"](t,4)._animationMode),e(t,5,0,n.siCustomSchedulerResource.MAP_COHORTS)}))}function w(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,f.h,[v.d,l.ElementRef],null,null)],null,null)}function G(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"mat-icon",[["aria-label","icon-button"],["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,C.b,C.a)),l["ɵdid"](1,9158656,null,0,y.b,[l.ElementRef,y.d,[8,null],[2,y.a],[2,l.ErrorHandler]],null,null),(e()(),l["ɵted"](-1,0,["delete "]))],(function(e,t){e(t,1,0)}),(function(e,t){e(t,0,0,l["ɵnov"](t,1).inline,"primary"!==l["ɵnov"](t,1).color&&"accent"!==l["ɵnov"](t,1).color&&"warn"!==l["ɵnov"](t,1).color)}))}function k(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l["ɵdid"](1,212992,null,0,i.m,[[3,i.d],[8,null],[8,null]],{name:[0,"name"]},null),l["ɵprd"](2048,null,i.d,null,[i.m]),l["ɵdid"](3,16384,null,0,i.t,[[4,i.d]],null,null),l["ɵdid"](4,16384,null,0,f.a,[v.d,l.ElementRef],null,null),(e()(),l["ɵeld"](5,0,null,null,5,"button",[["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.deleteRow(null==e.context.$implicit?null:null==e.context.$implicit.value?null:e.context.$implicit.value.action,e.context.index)&&l),l}),m.b,m.a)),l["ɵprd"](512,null,a["ɵNgClassImpl"],a["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](7,278528,null,0,a.NgClass,[a["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵdid"](8,180224,null,0,g.b,[l.ElementRef,c.h,[2,S.a]],{disabled:[0,"disabled"]},null),(e()(),l["ɵand"](16777216,null,0,1,null,G)),l["ɵdid"](10,16384,null,0,a.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,1,0,t.context.index),e(t,7,0,(null==t.context.$implicit?null:null==t.context.$implicit.value?null:t.context.$implicit.value.action)+"-row-button"),e(t,8,0,n.disableDelete(t.context.index)),e(t,10,0,t.context.$implicit&&t.context.$implicit.value&&t.context.$implicit.value.action)}),(function(e,t){e(t,0,0,l["ɵnov"](t,3).ngClassUntouched,l["ɵnov"](t,3).ngClassTouched,l["ɵnov"](t,3).ngClassPristine,l["ɵnov"](t,3).ngClassDirty,l["ɵnov"](t,3).ngClassValid,l["ɵnov"](t,3).ngClassInvalid,l["ɵnov"](t,3).ngClassPending),e(t,5,0,l["ɵnov"](t,8).disabled||null,"NoopAnimations"===l["ɵnov"](t,8)._animationMode)}))}function V(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,f.h,[v.d,l.ElementRef],null,null),(e()(),l["ɵted"](2,null,["",""]))],null,(function(e,t){e(t,2,0,t.component.siCustomSchedulerResource.SITES)}))}function x(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,15,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l["ɵdid"](1,212992,null,0,i.m,[[3,i.d],[8,null],[8,null]],{name:[0,"name"]},null),l["ɵprd"](2048,null,i.d,null,[i.m]),l["ɵdid"](3,16384,null,0,i.t,[[4,i.d]],null,null),l["ɵdid"](4,16384,null,0,f.a,[v.d,l.ElementRef],null,null),(e()(),l["ɵeld"](5,16777216,null,null,10,"input",[["class","form-control sites-control text-right"],["ctosSignedInteger",""],["formControlName","noOfCenters"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"longpress"],[null,"keydown"],[null,"touchend"],[null,"paste"],[null,"drop"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["ɵnov"](e,9)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,9).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,9)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,9)._compositionEnd(n.target.value)&&a),"longpress"===t&&(a=!1!==l["ɵnov"](e,14).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,14)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,14)._handleTouchend()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,15).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,15).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,15).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,15).onChange(n)&&a),"change"===t&&(a=!1!==i.changeInNoOfCenters()&&a),a}),null,null)),l["ɵprd"](512,null,a["ɵNgClassImpl"],a["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](7,278528,null,0,a.NgClass,[a["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](8,{disabled:0}),l["ɵdid"](9,16384,null,0,i.e,[l.Renderer2,l.ElementRef,[2,i.a]],null,null),l["ɵprd"](1024,null,i.q,(function(e){return[e]}),[i.e]),l["ɵdid"](11,671744,null,0,i.j,[[3,i.d],[8,null],[8,null],[6,i.q],[2,i.E]],{name:[0,"name"]},null),l["ɵprd"](2048,null,i.r,null,[i.j]),l["ɵdid"](13,16384,null,0,i.s,[[4,i.r]],null,null),l["ɵdid"](14,212992,null,0,o.d,[s.c,l.ElementRef,u.a,l.ViewContainerRef,l.NgZone,d.a,c.c,c.h,o.b,[2,p.b],[2,o.a],[2,h.HAMMER_LOADER]],{message:[0,"message"],tooltipClass:[1,"tooltipClass"]},null),l["ɵdid"](15,16384,null,0,r.W,[l.ElementRef],null,null)],(function(e,t){var n=t.component;e(t,1,0,t.context.index);var l=e(t,8,0,n.isPlanNonEditable());e(t,7,0,"form-control sites-control text-right",l),e(t,11,0,"noOfCenters"),e(t,14,0,n.getConsolidatedErrors(n.siCustomSchedulerControls.initiationSchedule.at(t.context.index).get("noOfCenters")),"red-tooltip ctos-tooltip-multi-line")}),(function(e,t){e(t,0,0,l["ɵnov"](t,3).ngClassUntouched,l["ɵnov"](t,3).ngClassTouched,l["ɵnov"](t,3).ngClassPristine,l["ɵnov"](t,3).ngClassDirty,l["ɵnov"](t,3).ngClassValid,l["ɵnov"](t,3).ngClassInvalid,l["ɵnov"](t,3).ngClassPending),e(t,5,0,l["ɵnov"](t,13).ngClassUntouched,l["ɵnov"](t,13).ngClassTouched,l["ɵnov"](t,13).ngClassPristine,l["ɵnov"](t,13).ngClassDirty,l["ɵnov"](t,13).ngClassValid,l["ɵnov"](t,13).ngClassInvalid,l["ɵnov"](t,13).ngClassPending)}))}function K(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,f.h,[v.d,l.ElementRef],null,null),(e()(),l["ɵted"](2,null,["",""]))],null,(function(e,t){e(t,2,0,t.component.siCustomSchedulerResource.START_DATE)}))}function U(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,36,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l["ɵdid"](1,212992,null,0,i.m,[[3,i.d],[8,null],[8,null]],{name:[0,"name"]},null),l["ɵprd"](2048,null,i.d,null,[i.m]),l["ɵdid"](3,16384,null,0,i.t,[[4,i.d]],null,null),l["ɵdid"](4,16384,null,0,f.a,[v.d,l.ElementRef],null,null),(e()(),l["ɵeld"](5,0,null,null,31,"mat-form-field",[["class","form-control  mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,R.b,R.a)),l["ɵprd"](512,null,a["ɵNgClassImpl"],a["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](7,278528,null,0,a.NgClass,[a["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](8,{disabled:0}),l["ɵdid"](9,7520256,null,9,D.c,[l.ElementRef,l.ChangeDetectorRef,[2,P.h],[2,p.b],[2,D.a],d.a,l.NgZone,[2,S.a]],null,null),l["ɵqud"](603979776,24,{_controlNonStatic:0}),l["ɵqud"](335544320,25,{_controlStatic:0}),l["ɵqud"](603979776,26,{_labelChildNonStatic:0}),l["ɵqud"](335544320,27,{_labelChildStatic:0}),l["ɵqud"](603979776,28,{_placeholderChild:0}),l["ɵqud"](603979776,29,{_errorChildren:1}),l["ɵqud"](603979776,30,{_hintChildren:1}),l["ɵqud"](603979776,31,{_prefixChildren:1}),l["ɵqud"](603979776,32,{_suffixChildren:1}),(e()(),l["ɵeld"](19,16777216,null,1,11,"input",[["class","start-date-control mat-input-element mat-form-field-autofill-control"],["formControlName","slotStartDate"],["matInput",""]],[[1,"aria-haspopup",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"longpress"],[null,"touchend"],[null,"focus"]],(function(e,t,n){var a=!0;return"input"===t&&(a=!1!==l["ɵnov"](e,20)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,20).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,20)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,20)._compositionEnd(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,21)._onInput(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,21)._onChange()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,21)._onBlur()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,21)._onKeydown(n)&&a),"longpress"===t&&(a=!1!==l["ɵnov"](e,27).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,27)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,27)._handleTouchend()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,29)._focusChanged(!1)&&a),"focus"===t&&(a=!1!==l["ɵnov"](e,29)._focusChanged(!0)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,29)._onInput()&&a),a}),null,null)),l["ɵdid"](20,16384,null,0,i.e,[l.Renderer2,l.ElementRef,[2,i.a]],null,null),l["ɵdid"](21,147456,null,0,b.h,[l.ElementRef,[2,P.a],[2,P.e],[2,D.c]],{matDatepicker:[0,"matDatepicker"]},null),l["ɵprd"](1024,null,i.p,(function(e){return[e]}),[b.h]),l["ɵprd"](1024,null,i.q,(function(e,t){return[e,t]}),[i.e,b.h]),l["ɵdid"](24,671744,null,0,i.j,[[3,i.d],[6,i.p],[8,null],[6,i.q],[2,i.E]],{name:[0,"name"]},null),l["ɵprd"](2048,null,i.r,null,[i.j]),l["ɵdid"](26,16384,null,0,i.s,[[4,i.r]],null,null),l["ɵdid"](27,212992,null,0,o.d,[s.c,l.ElementRef,u.a,l.ViewContainerRef,l.NgZone,d.a,c.c,c.h,o.b,[2,p.b],[2,o.a],[2,h.HAMMER_LOADER]],{message:[0,"message"],tooltipClass:[1,"tooltipClass"]},null),l["ɵprd"](2048,null,E.a,null,[b.h]),l["ɵdid"](29,999424,null,0,E.b,[l.ElementRef,d.a,[6,i.r],[2,i.u],[2,i.l],P.b,[6,E.a],T.a,l.NgZone],null,null),l["ɵprd"](2048,[[24,4],[25,4]],D.d,null,[E.b]),(e()(),l["ɵeld"](31,0,null,4,3,"mat-datepicker-toggle",[["class","mat-datepicker-toggle"],["matSuffix",""]],[[1,"tabindex",0],[2,"mat-datepicker-toggle-active",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,33)._button.focus()&&a),a}),A.e,A.d)),l["ɵdid"](32,16384,[[32,4]],0,D.h,[],null,null),l["ɵdid"](33,1753088,null,1,b.k,[b.i,l.ChangeDetectorRef,[8,null]],{datepicker:[0,"datepicker"]},null),l["ɵqud"](603979776,33,{_customIcon:0}),(e()(),l["ɵeld"](35,16777216,null,1,1,"mat-datepicker",[],null,null,null,A.f,A.c)),l["ɵdid"](36,180224,[["slotStartDate",4]],0,b.f,[I.e,s.c,l.NgZone,l.ViewContainerRef,b.a,[2,P.a],[2,p.b],[2,a.DOCUMENT]],null,null)],(function(e,t){var n=t.component;e(t,1,0,t.context.index);var a=e(t,8,0,n.isPlanNonEditable());e(t,7,0,"form-control ",a),e(t,21,0,l["ɵnov"](t,36)),e(t,24,0,"slotStartDate"),e(t,27,0,n.getConsolidatedErrors(n.siCustomSchedulerControls.initiationSchedule.at(t.context.index).get("slotStartDate")),"red-tooltip ctos-tooltip-multi-line"),e(t,29,0),e(t,33,0,l["ɵnov"](t,36))}),(function(e,t){e(t,0,0,l["ɵnov"](t,3).ngClassUntouched,l["ɵnov"](t,3).ngClassTouched,l["ɵnov"](t,3).ngClassPristine,l["ɵnov"](t,3).ngClassDirty,l["ɵnov"](t,3).ngClassValid,l["ɵnov"](t,3).ngClassInvalid,l["ɵnov"](t,3).ngClassPending),e(t,5,1,["standard"==l["ɵnov"](t,9).appearance,"fill"==l["ɵnov"](t,9).appearance,"outline"==l["ɵnov"](t,9).appearance,"legacy"==l["ɵnov"](t,9).appearance,l["ɵnov"](t,9)._control.errorState,l["ɵnov"](t,9)._canLabelFloat,l["ɵnov"](t,9)._shouldLabelFloat(),l["ɵnov"](t,9)._hasFloatingLabel(),l["ɵnov"](t,9)._hideControlPlaceholder(),l["ɵnov"](t,9)._control.disabled,l["ɵnov"](t,9)._control.autofilled,l["ɵnov"](t,9)._control.focused,"accent"==l["ɵnov"](t,9).color,"warn"==l["ɵnov"](t,9).color,l["ɵnov"](t,9)._shouldForward("untouched"),l["ɵnov"](t,9)._shouldForward("touched"),l["ɵnov"](t,9)._shouldForward("pristine"),l["ɵnov"](t,9)._shouldForward("dirty"),l["ɵnov"](t,9)._shouldForward("valid"),l["ɵnov"](t,9)._shouldForward("invalid"),l["ɵnov"](t,9)._shouldForward("pending"),!l["ɵnov"](t,9)._animationsEnabled]),e(t,19,1,[l["ɵnov"](t,21)._datepicker?"dialog":null,(null==l["ɵnov"](t,21)._datepicker?null:l["ɵnov"](t,21)._datepicker.opened)&&l["ɵnov"](t,21)._datepicker.id||null,l["ɵnov"](t,21).min?l["ɵnov"](t,21)._dateAdapter.toIso8601(l["ɵnov"](t,21).min):null,l["ɵnov"](t,21).max?l["ɵnov"](t,21)._dateAdapter.toIso8601(l["ɵnov"](t,21).max):null,l["ɵnov"](t,21).disabled,l["ɵnov"](t,26).ngClassUntouched,l["ɵnov"](t,26).ngClassTouched,l["ɵnov"](t,26).ngClassPristine,l["ɵnov"](t,26).ngClassDirty,l["ɵnov"](t,26).ngClassValid,l["ɵnov"](t,26).ngClassInvalid,l["ɵnov"](t,26).ngClassPending,l["ɵnov"](t,29)._isServer,l["ɵnov"](t,29).id,l["ɵnov"](t,29).placeholder,l["ɵnov"](t,29).disabled,l["ɵnov"](t,29).required,l["ɵnov"](t,29).readonly&&!l["ɵnov"](t,29)._isNativeSelect||null,l["ɵnov"](t,29)._ariaDescribedby||null,l["ɵnov"](t,29).errorState,l["ɵnov"](t,29).required.toString()]),e(t,31,0,-1,l["ɵnov"](t,33).datepicker&&l["ɵnov"](t,33).datepicker.opened,l["ɵnov"](t,33).datepicker&&"accent"===l["ɵnov"](t,33).datepicker.color,l["ɵnov"](t,33).datepicker&&"warn"===l["ɵnov"](t,33).datepicker.color)}))}function j(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,f.h,[v.d,l.ElementRef],null,null),(e()(),l["ɵted"](2,null,["",""]))],null,(function(e,t){e(t,2,0,t.component.siCustomSchedulerResource.END_DATE)}))}function B(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,36,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l["ɵdid"](1,212992,null,0,i.m,[[3,i.d],[8,null],[8,null]],{name:[0,"name"]},null),l["ɵprd"](2048,null,i.d,null,[i.m]),l["ɵdid"](3,16384,null,0,i.t,[[4,i.d]],null,null),l["ɵdid"](4,16384,null,0,f.a,[v.d,l.ElementRef],null,null),(e()(),l["ɵeld"](5,0,null,null,31,"mat-form-field",[["class","form-control  mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,R.b,R.a)),l["ɵprd"](512,null,a["ɵNgClassImpl"],a["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](7,278528,null,0,a.NgClass,[a["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](8,{disabled:0}),l["ɵdid"](9,7520256,null,9,D.c,[l.ElementRef,l.ChangeDetectorRef,[2,P.h],[2,p.b],[2,D.a],d.a,l.NgZone,[2,S.a]],null,null),l["ɵqud"](603979776,37,{_controlNonStatic:0}),l["ɵqud"](335544320,38,{_controlStatic:0}),l["ɵqud"](603979776,39,{_labelChildNonStatic:0}),l["ɵqud"](335544320,40,{_labelChildStatic:0}),l["ɵqud"](603979776,41,{_placeholderChild:0}),l["ɵqud"](603979776,42,{_errorChildren:1}),l["ɵqud"](603979776,43,{_hintChildren:1}),l["ɵqud"](603979776,44,{_prefixChildren:1}),l["ɵqud"](603979776,45,{_suffixChildren:1}),(e()(),l["ɵeld"](19,16777216,null,1,11,"input",[["class","end-date-control mat-input-element mat-form-field-autofill-control"],["formControlName","slotEndDate"],["matInput",""]],[[1,"aria-haspopup",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"longpress"],[null,"touchend"],[null,"focus"]],(function(e,t,n){var a=!0;return"input"===t&&(a=!1!==l["ɵnov"](e,20)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,20).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,20)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,20)._compositionEnd(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,21)._onInput(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,21)._onChange()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,21)._onBlur()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,21)._onKeydown(n)&&a),"longpress"===t&&(a=!1!==l["ɵnov"](e,27).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,27)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,27)._handleTouchend()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,29)._focusChanged(!1)&&a),"focus"===t&&(a=!1!==l["ɵnov"](e,29)._focusChanged(!0)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,29)._onInput()&&a),a}),null,null)),l["ɵdid"](20,16384,null,0,i.e,[l.Renderer2,l.ElementRef,[2,i.a]],null,null),l["ɵdid"](21,147456,null,0,b.h,[l.ElementRef,[2,P.a],[2,P.e],[2,D.c]],{matDatepicker:[0,"matDatepicker"]},null),l["ɵprd"](1024,null,i.p,(function(e){return[e]}),[b.h]),l["ɵprd"](1024,null,i.q,(function(e,t){return[e,t]}),[i.e,b.h]),l["ɵdid"](24,671744,null,0,i.j,[[3,i.d],[6,i.p],[8,null],[6,i.q],[2,i.E]],{name:[0,"name"]},null),l["ɵprd"](2048,null,i.r,null,[i.j]),l["ɵdid"](26,16384,null,0,i.s,[[4,i.r]],null,null),l["ɵdid"](27,212992,null,0,o.d,[s.c,l.ElementRef,u.a,l.ViewContainerRef,l.NgZone,d.a,c.c,c.h,o.b,[2,p.b],[2,o.a],[2,h.HAMMER_LOADER]],{message:[0,"message"],tooltipClass:[1,"tooltipClass"]},null),l["ɵprd"](2048,null,E.a,null,[b.h]),l["ɵdid"](29,999424,null,0,E.b,[l.ElementRef,d.a,[6,i.r],[2,i.u],[2,i.l],P.b,[6,E.a],T.a,l.NgZone],null,null),l["ɵprd"](2048,[[37,4],[38,4]],D.d,null,[E.b]),(e()(),l["ɵeld"](31,0,null,4,3,"mat-datepicker-toggle",[["class","mat-datepicker-toggle"],["matSuffix",""]],[[1,"tabindex",0],[2,"mat-datepicker-toggle-active",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,33)._button.focus()&&a),a}),A.e,A.d)),l["ɵdid"](32,16384,[[45,4]],0,D.h,[],null,null),l["ɵdid"](33,1753088,null,1,b.k,[b.i,l.ChangeDetectorRef,[8,null]],{datepicker:[0,"datepicker"]},null),l["ɵqud"](603979776,46,{_customIcon:0}),(e()(),l["ɵeld"](35,16777216,null,1,1,"mat-datepicker",[],null,null,null,A.f,A.c)),l["ɵdid"](36,180224,[["slotEndDate",4]],0,b.f,[I.e,s.c,l.NgZone,l.ViewContainerRef,b.a,[2,P.a],[2,p.b],[2,a.DOCUMENT]],null,null)],(function(e,t){var n=t.component;e(t,1,0,t.context.index);var a=e(t,8,0,n.isPlanNonEditable());e(t,7,0,"form-control ",a),e(t,21,0,l["ɵnov"](t,36)),e(t,24,0,"slotEndDate"),e(t,27,0,n.getConsolidatedErrors(n.siCustomSchedulerControls.initiationSchedule.at(t.context.index).get("slotEndDate")),"red-tooltip ctos-tooltip-multi-line"),e(t,29,0),e(t,33,0,l["ɵnov"](t,36))}),(function(e,t){e(t,0,0,l["ɵnov"](t,3).ngClassUntouched,l["ɵnov"](t,3).ngClassTouched,l["ɵnov"](t,3).ngClassPristine,l["ɵnov"](t,3).ngClassDirty,l["ɵnov"](t,3).ngClassValid,l["ɵnov"](t,3).ngClassInvalid,l["ɵnov"](t,3).ngClassPending),e(t,5,1,["standard"==l["ɵnov"](t,9).appearance,"fill"==l["ɵnov"](t,9).appearance,"outline"==l["ɵnov"](t,9).appearance,"legacy"==l["ɵnov"](t,9).appearance,l["ɵnov"](t,9)._control.errorState,l["ɵnov"](t,9)._canLabelFloat,l["ɵnov"](t,9)._shouldLabelFloat(),l["ɵnov"](t,9)._hasFloatingLabel(),l["ɵnov"](t,9)._hideControlPlaceholder(),l["ɵnov"](t,9)._control.disabled,l["ɵnov"](t,9)._control.autofilled,l["ɵnov"](t,9)._control.focused,"accent"==l["ɵnov"](t,9).color,"warn"==l["ɵnov"](t,9).color,l["ɵnov"](t,9)._shouldForward("untouched"),l["ɵnov"](t,9)._shouldForward("touched"),l["ɵnov"](t,9)._shouldForward("pristine"),l["ɵnov"](t,9)._shouldForward("dirty"),l["ɵnov"](t,9)._shouldForward("valid"),l["ɵnov"](t,9)._shouldForward("invalid"),l["ɵnov"](t,9)._shouldForward("pending"),!l["ɵnov"](t,9)._animationsEnabled]),e(t,19,1,[l["ɵnov"](t,21)._datepicker?"dialog":null,(null==l["ɵnov"](t,21)._datepicker?null:l["ɵnov"](t,21)._datepicker.opened)&&l["ɵnov"](t,21)._datepicker.id||null,l["ɵnov"](t,21).min?l["ɵnov"](t,21)._dateAdapter.toIso8601(l["ɵnov"](t,21).min):null,l["ɵnov"](t,21).max?l["ɵnov"](t,21)._dateAdapter.toIso8601(l["ɵnov"](t,21).max):null,l["ɵnov"](t,21).disabled,l["ɵnov"](t,26).ngClassUntouched,l["ɵnov"](t,26).ngClassTouched,l["ɵnov"](t,26).ngClassPristine,l["ɵnov"](t,26).ngClassDirty,l["ɵnov"](t,26).ngClassValid,l["ɵnov"](t,26).ngClassInvalid,l["ɵnov"](t,26).ngClassPending,l["ɵnov"](t,29)._isServer,l["ɵnov"](t,29).id,l["ɵnov"](t,29).placeholder,l["ɵnov"](t,29).disabled,l["ɵnov"](t,29).required,l["ɵnov"](t,29).readonly&&!l["ɵnov"](t,29)._isNativeSelect||null,l["ɵnov"](t,29)._ariaDescribedby||null,l["ɵnov"](t,29).errorState,l["ɵnov"](t,29).required.toString()]),e(t,31,0,-1,l["ɵnov"](t,33).datepicker&&l["ɵnov"](t,33).datepicker.opened,l["ɵnov"](t,33).datepicker&&"accent"===l["ɵnov"](t,33).datepicker.color,l["ɵnov"](t,33).datepicker&&"warn"===l["ɵnov"](t,33).datepicker.color)}))}function W(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"td",[["class","mat-footer-cell"],["colspan","4"],["mat-footer-cell",""],["role","gridcell"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,f.d,[v.d,l.ElementRef],null,null),(e()(),l["ɵeld"](2,0,null,null,4,"button",[["class","add-row-button"],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.addRowButtonClicked()&&l),l}),m.b,m.a)),l["ɵdid"](3,180224,null,0,g.b,[l.ElementRef,c.h,[2,S.a]],{disabled:[0,"disabled"]},null),(e()(),l["ɵeld"](4,0,null,0,2,"mat-icon",[["aria-label","icon-button"],["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,C.b,C.a)),l["ɵdid"](5,9158656,null,0,y.b,[l.ElementRef,y.d,[8,null],[2,y.a],[2,l.ErrorHandler]],null,null),(e()(),l["ɵted"](-1,0,["add_circle_outline"]))],(function(e,t){e(t,3,0,t.component.isAddRowButtonDisabled()),e(t,5,0)}),(function(e,t){e(t,2,0,l["ɵnov"](t,3).disabled||null,"NoopAnimations"===l["ɵnov"](t,3)._animationMode),e(t,4,0,l["ɵnov"](t,5).inline,"primary"!==l["ɵnov"](t,5).color&&"accent"!==l["ɵnov"](t,5).color&&"warn"!==l["ɵnov"](t,5).color)}))}function H(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"td",[["class","remainingSitesText mat-footer-cell"],["colspan","4"],["mat-footer-cell",""],["role","gridcell"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,f.d,[v.d,l.ElementRef],null,null),(e()(),l["ɵted"](2,null,[" "," "," "]))],null,(function(e,t){var n=t.component;e(t,2,0,n.getTotalRemainingSites(),n.isAdjustable()?n.siCustomSchedulerResource.SITES_REMAINING_TO_REPLAN:n.siCustomSchedulerResource.SITES_REMAINING)}))}function Y(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"tr",[["class","mat-header-row"],["mat-header-row",""],["role","row"]],null,null,null,_.f,_.b)),l["ɵprd"](6144,null,v.k,null,[f.j]),l["ɵdid"](2,49152,null,0,f.j,[],null,null)],null,null)}function q(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"tr",[["class","mat-row"],["mat-row",""],["role","row"]],null,null,null,_.g,_.c)),l["ɵprd"](6144,null,v.m,null,[f.l]),l["ɵdid"](2,49152,null,0,f.l,[],null,null)],null,null)}function J(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"tr",[["class","mat-footer-row"],["mat-footer-row",""],["role","row"]],null,null,null,_.e,_.a)),l["ɵprd"](6144,null,v.g,null,[f.f]),l["ɵdid"](2,49152,null,0,f.f,[],null,null)],null,null)}function X(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"tr",[["class","mat-footer-row"],["mat-footer-row",""],["role","row"]],null,null,null,_.e,_.a)),l["ɵprd"](6144,null,v.g,null,[f.f]),l["ɵdid"](2,49152,null,0,f.f,[],null,null)],null,null)}function z(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,172,"div",[["class","row no-margin"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var a=!0;return"submit"===t&&(a=!1!==l["ɵnov"](e,1).onSubmit(n)&&a),"reset"===t&&(a=!1!==l["ɵnov"](e,1).onReset()&&a),a}),null,null)),l["ɵdid"](1,540672,null,0,i.l,[[8,null],[8,null]],{form:[0,"form"]},null),l["ɵprd"](2048,null,i.d,null,[i.l]),l["ɵdid"](3,16384,null,0,i.t,[[4,i.d]],null,null),(e()(),l["ɵeld"](4,0,null,null,67,"div",[["class","custom-col-sm-4 si-custom-container si"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,15,"div",[["class","control-group row no-margin-top"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"label",[["class","col ctos-labels numSiteInfo no-padding-right d-flex align-items-center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,11,"div",[["class","col d-flex justify-content-end"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,16777216,null,null,10,"input",[["class","form-control text-center"],["ctosSignedInteger",""],["matTooltipClass","red-tooltip"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"longpress"],[null,"keydown"],[null,"touchend"],[null,"paste"],[null,"drop"],[null,"change"]],(function(e,t,n){var a=!0;return"input"===t&&(a=!1!==l["ɵnov"](e,12)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,12).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,12)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,12)._compositionEnd(n.target.value)&&a),"longpress"===t&&(a=!1!==l["ɵnov"](e,17).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,17)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,17)._handleTouchend()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,18).onKeyDown(n)&&a),"paste"===t&&(a=!1!==l["ɵnov"](e,18).onPaste(n)&&a),"drop"===t&&(a=!1!==l["ɵnov"](e,18).onDrop(n)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,18).onChange(n)&&a),a}),null,null)),l["ɵprd"](512,null,a["ɵNgClassImpl"],a["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](10,278528,null,0,a.NgClass,[a["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](11,{disabled:0}),l["ɵdid"](12,16384,null,0,i.e,[l.Renderer2,l.ElementRef,[2,i.a]],null,null),l["ɵprd"](1024,null,i.q,(function(e){return[e]}),[i.e]),l["ɵdid"](14,540672,null,0,i.i,[[8,null],[8,null],[6,i.q],[2,i.E]],{form:[0,"form"]},null),l["ɵprd"](2048,null,i.r,null,[i.i]),l["ɵdid"](16,16384,null,0,i.s,[[4,i.r]],null,null),l["ɵdid"](17,212992,null,0,o.d,[s.c,l.ElementRef,u.a,l.ViewContainerRef,l.NgZone,d.a,c.c,c.h,o.b,[2,p.b],[2,o.a],[2,h.HAMMER_LOADER]],{message:[0,"message"],tooltipClass:[1,"tooltipClass"]},null),l["ɵdid"](18,16384,null,0,r.W,[l.ElementRef],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,O)),l["ɵdid"](20,16384,null,0,a.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](21,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,M)),l["ɵdid"](23,16384,null,0,a.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,F)),l["ɵdid"](25,16384,null,0,a.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](26,0,null,null,34,"div",[["class","control-group row"]],null,null,null,null,null)),(e()(),l["ɵeld"](27,0,null,null,0,"label",[["class","col ctos-labels no-padding-right d-flex align-items-center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["ɵeld"](28,0,null,null,32,"div",[["class","col d-flex justify-content-end"]],null,null,null,null,null)),(e()(),l["ɵeld"](29,0,null,null,31,"mat-form-field",[["class","form-control mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,R.b,R.a)),l["ɵprd"](512,null,a["ɵNgClassImpl"],a["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](31,278528,null,0,a.NgClass,[a["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](32,{disabled:0}),l["ɵdid"](33,7520256,null,9,D.c,[l.ElementRef,l.ChangeDetectorRef,[2,P.h],[2,p.b],[2,D.a],d.a,l.NgZone,[2,S.a]],null,null),l["ɵqud"](603979776,1,{_controlNonStatic:0}),l["ɵqud"](335544320,2,{_controlStatic:0}),l["ɵqud"](603979776,3,{_labelChildNonStatic:0}),l["ɵqud"](335544320,4,{_labelChildStatic:0}),l["ɵqud"](603979776,5,{_placeholderChild:0}),l["ɵqud"](603979776,6,{_errorChildren:1}),l["ɵqud"](603979776,7,{_hintChildren:1}),l["ɵqud"](603979776,8,{_prefixChildren:1}),l["ɵqud"](603979776,9,{_suffixChildren:1}),(e()(),l["ɵeld"](43,16777216,null,1,11,"input",[["class","date-control  mat-input-element mat-form-field-autofill-control"],["matInput",""],["matTooltipClass","red-tooltip"]],[[1,"aria-haspopup",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"longpress"],[null,"touchend"],[null,"focus"]],(function(e,t,n){var a=!0;return"input"===t&&(a=!1!==l["ɵnov"](e,44)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,44).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["ɵnov"](e,44)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["ɵnov"](e,44)._compositionEnd(n.target.value)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,45)._onInput(n.target.value)&&a),"change"===t&&(a=!1!==l["ɵnov"](e,45)._onChange()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,45)._onBlur()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,45)._onKeydown(n)&&a),"longpress"===t&&(a=!1!==l["ɵnov"](e,51).show()&&a),"keydown"===t&&(a=!1!==l["ɵnov"](e,51)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["ɵnov"](e,51)._handleTouchend()&&a),"blur"===t&&(a=!1!==l["ɵnov"](e,53)._focusChanged(!1)&&a),"focus"===t&&(a=!1!==l["ɵnov"](e,53)._focusChanged(!0)&&a),"input"===t&&(a=!1!==l["ɵnov"](e,53)._onInput()&&a),a}),null,null)),l["ɵdid"](44,16384,null,0,i.e,[l.Renderer2,l.ElementRef,[2,i.a]],null,null),l["ɵdid"](45,147456,null,0,b.h,[l.ElementRef,[2,P.a],[2,P.e],[2,D.c]],{matDatepicker:[0,"matDatepicker"],disabled:[1,"disabled"]},null),l["ɵprd"](1024,null,i.p,(function(e){return[e]}),[b.h]),l["ɵprd"](1024,null,i.q,(function(e,t){return[e,t]}),[i.e,b.h]),l["ɵdid"](48,540672,null,0,i.i,[[6,i.p],[8,null],[6,i.q],[2,i.E]],{form:[0,"form"],isDisabled:[1,"isDisabled"]},null),l["ɵprd"](2048,null,i.r,null,[i.i]),l["ɵdid"](50,16384,null,0,i.s,[[4,i.r]],null,null),l["ɵdid"](51,212992,null,0,o.d,[s.c,l.ElementRef,u.a,l.ViewContainerRef,l.NgZone,d.a,c.c,c.h,o.b,[2,p.b],[2,o.a],[2,h.HAMMER_LOADER]],{message:[0,"message"],tooltipClass:[1,"tooltipClass"]},null),l["ɵprd"](2048,null,E.a,null,[b.h]),l["ɵdid"](53,999424,null,0,E.b,[l.ElementRef,d.a,[6,i.r],[2,i.u],[2,i.l],P.b,[6,E.a],T.a,l.NgZone],{disabled:[0,"disabled"]},null),l["ɵprd"](2048,[[1,4],[2,4]],D.d,null,[E.b]),(e()(),l["ɵeld"](55,0,null,4,3,"mat-datepicker-toggle",[["class","mat-datepicker-toggle"],["matSuffix",""]],[[1,"tabindex",0],[2,"mat-datepicker-toggle-active",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"focus"]],(function(e,t,n){var a=!0;return"focus"===t&&(a=!1!==l["ɵnov"](e,57)._button.focus()&&a),a}),A.e,A.d)),l["ɵdid"](56,16384,[[9,4]],0,D.h,[],null,null),l["ɵdid"](57,1753088,null,1,b.k,[b.i,l.ChangeDetectorRef,[8,null]],{datepicker:[0,"datepicker"]},null),l["ɵqud"](603979776,10,{_customIcon:0}),(e()(),l["ɵeld"](59,16777216,null,1,1,"mat-datepicker",[],null,null,null,A.f,A.c)),l["ɵdid"](60,180224,[["FSIDate",4]],0,b.f,[I.e,s.c,l.NgZone,l.ViewContainerRef,b.a,[2,P.a],[2,p.b],[2,a.DOCUMENT]],null,null),(e()(),l["ɵeld"](61,0,null,null,10,"div",[["class","row col-sm-12 btn-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](62,0,null,null,2,"div",[["class","col-sm-6 map-cohort-btn-container"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,L)),l["ɵdid"](64,16384,null,0,a.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](65,0,null,null,6,"div",[["class","col-sm-6 paste-date-btn-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](66,0,null,null,5,"button",[["class","ctos-btn-secondary"],["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.openPasteDatesDialog()&&l),l}),m.b,m.a)),l["ɵprd"](512,null,a["ɵNgClassImpl"],a["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](68,278528,null,0,a.NgClass,[a["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](69,{disabled:0}),l["ɵdid"](70,180224,null,0,g.b,[l.ElementRef,c.h,[2,S.a]],null,null),(e()(),l["ɵted"](71,0,[" "," "])),(e()(),l["ɵeld"](72,0,null,null,100,"div",[["class","custom-col-sm-8 si-custom-container always-enabled"]],null,null,null,null,null)),(e()(),l["ɵeld"](73,0,null,null,99,"div",[["class","si-schedule-container"],["formGroupName","siCustomMethod"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l["ɵdid"](74,212992,null,0,i.m,[[3,i.d],[8,null],[8,null]],{name:[0,"name"]},null),l["ɵprd"](2048,null,i.d,null,[i.m]),l["ɵdid"](76,16384,null,0,i.t,[[4,i.d]],null,null),(e()(),l["ɵeld"](77,0,null,null,95,"table",[["class","si-custom-table mat-table"],["formArrayName","initiationSchedule"],["mat-table",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,_.h,_.d)),l["ɵprd"](6144,null,v.o,null,[f.n]),l["ɵdid"](79,212992,null,0,i.f,[[3,i.d],[8,null],[8,null]],{name:[0,"name"]},null),l["ɵprd"](2048,null,i.d,null,[i.f]),l["ɵdid"](81,16384,null,0,i.t,[[4,i.d]],null,null),l["ɵdid"](82,2342912,null,4,f.n,[l.IterableDiffers,l.ChangeDetectorRef,l.ElementRef,[8,null],[2,p.b],a.DOCUMENT,d.a],{dataSource:[0,"dataSource"]},null),l["ɵqud"](603979776,11,{_contentColumnDefs:1}),l["ɵqud"](603979776,12,{_contentRowDefs:1}),l["ɵqud"](603979776,13,{_contentHeaderRowDefs:1}),l["ɵqud"](603979776,14,{_contentFooterRowDefs:1}),(e()(),l["ɵeld"](87,0,null,null,12,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[f.c]),l["ɵdid"](89,16384,null,3,f.c,[],{name:[0,"name"]},null),l["ɵqud"](603979776,15,{cell:0}),l["ɵqud"](603979776,16,{headerCell:0}),l["ɵqud"](603979776,17,{footerCell:0}),l["ɵprd"](2048,[[11,4]],v.d,null,[f.c]),(e()(),l["ɵand"](0,null,null,2,null,w)),l["ɵdid"](95,16384,null,0,f.i,[l.TemplateRef],null,null),l["ɵprd"](2048,[[16,4]],v.j,null,[f.i]),(e()(),l["ɵand"](0,null,null,2,null,k)),l["ɵdid"](98,16384,null,0,f.b,[l.TemplateRef],null,null),l["ɵprd"](2048,[[15,4]],v.b,null,[f.b]),(e()(),l["ɵeld"](100,0,null,null,12,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[f.c]),l["ɵdid"](102,16384,null,3,f.c,[],{name:[0,"name"]},null),l["ɵqud"](603979776,18,{cell:0}),l["ɵqud"](603979776,19,{headerCell:0}),l["ɵqud"](603979776,20,{footerCell:0}),l["ɵprd"](2048,[[11,4]],v.d,null,[f.c]),(e()(),l["ɵand"](0,null,null,2,null,V)),l["ɵdid"](108,16384,null,0,f.i,[l.TemplateRef],null,null),l["ɵprd"](2048,[[19,4]],v.j,null,[f.i]),(e()(),l["ɵand"](0,null,null,2,null,x)),l["ɵdid"](111,16384,null,0,f.b,[l.TemplateRef],null,null),l["ɵprd"](2048,[[18,4]],v.b,null,[f.b]),(e()(),l["ɵeld"](113,0,null,null,12,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[f.c]),l["ɵdid"](115,16384,null,3,f.c,[],{name:[0,"name"]},null),l["ɵqud"](603979776,21,{cell:0}),l["ɵqud"](603979776,22,{headerCell:0}),l["ɵqud"](603979776,23,{footerCell:0}),l["ɵprd"](2048,[[11,4]],v.d,null,[f.c]),(e()(),l["ɵand"](0,null,null,2,null,K)),l["ɵdid"](121,16384,null,0,f.i,[l.TemplateRef],null,null),l["ɵprd"](2048,[[22,4]],v.j,null,[f.i]),(e()(),l["ɵand"](0,null,null,2,null,U)),l["ɵdid"](124,16384,null,0,f.b,[l.TemplateRef],null,null),l["ɵprd"](2048,[[21,4]],v.b,null,[f.b]),(e()(),l["ɵeld"](126,0,null,null,12,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[f.c]),l["ɵdid"](128,16384,null,3,f.c,[],{name:[0,"name"]},null),l["ɵqud"](603979776,34,{cell:0}),l["ɵqud"](603979776,35,{headerCell:0}),l["ɵqud"](603979776,36,{footerCell:0}),l["ɵprd"](2048,[[11,4]],v.d,null,[f.c]),(e()(),l["ɵand"](0,null,null,2,null,j)),l["ɵdid"](134,16384,null,0,f.i,[l.TemplateRef],null,null),l["ɵprd"](2048,[[35,4]],v.j,null,[f.i]),(e()(),l["ɵand"](0,null,null,2,null,B)),l["ɵdid"](137,16384,null,0,f.b,[l.TemplateRef],null,null),l["ɵprd"](2048,[[34,4]],v.b,null,[f.b]),(e()(),l["ɵeld"](139,0,null,null,9,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[f.c]),l["ɵdid"](141,16384,null,3,f.c,[],{name:[0,"name"]},null),l["ɵqud"](603979776,47,{cell:0}),l["ɵqud"](603979776,48,{headerCell:0}),l["ɵqud"](603979776,49,{footerCell:0}),l["ɵprd"](2048,[[11,4]],v.d,null,[f.c]),(e()(),l["ɵand"](0,null,null,2,null,W)),l["ɵdid"](147,16384,null,0,f.e,[l.TemplateRef],null,null),l["ɵprd"](2048,[[49,4]],v.f,null,[f.e]),(e()(),l["ɵeld"](149,0,null,null,9,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[f.c]),l["ɵdid"](151,16384,null,3,f.c,[],{name:[0,"name"]},null),l["ɵqud"](603979776,50,{cell:0}),l["ɵqud"](603979776,51,{headerCell:0}),l["ɵqud"](603979776,52,{footerCell:0}),l["ɵprd"](2048,[[11,4]],v.d,null,[f.c]),(e()(),l["ɵand"](0,null,null,2,null,H)),l["ɵdid"](157,16384,null,0,f.e,[l.TemplateRef],null,null),l["ɵprd"](2048,[[52,4]],v.f,null,[f.e]),(e()(),l["ɵand"](0,null,null,2,null,Y)),l["ɵdid"](160,540672,null,0,f.k,[l.TemplateRef,l.IterableDiffers],{columns:[0,"columns"],sticky:[1,"sticky"]},null),l["ɵprd"](2048,[[13,4]],v.l,null,[f.k]),(e()(),l["ɵand"](0,null,null,2,null,q)),l["ɵdid"](163,540672,null,0,f.m,[l.TemplateRef,l.IterableDiffers],{columns:[0,"columns"]},null),l["ɵprd"](2048,[[12,4]],v.n,null,[f.m]),(e()(),l["ɵand"](0,null,null,3,null,J)),l["ɵdid"](166,540672,null,0,f.g,[l.TemplateRef,l.IterableDiffers],{columns:[0,"columns"],sticky:[1,"sticky"]},null),l["ɵpad"](167,1),l["ɵprd"](2048,[[14,4]],v.h,null,[f.g]),(e()(),l["ɵand"](0,null,null,3,null,X)),l["ɵdid"](170,540672,null,0,f.g,[l.TemplateRef,l.IterableDiffers],{columns:[0,"columns"],sticky:[1,"sticky"]},null),l["ɵpad"](171,1),l["ɵprd"](2048,[[14,4]],v.h,null,[f.g])],(function(e,t){var n=t.component;e(t,1,0,n.siCustomSchedulerControls.containerFormGroup);var a=e(t,11,0,n.isPlanNonEditable());e(t,10,0,"form-control text-center",a),e(t,14,0,n.siCustomSchedulerControls.totalNoOfSites),e(t,17,0,n.consolidateValidationErrors(n.siCustomSchedulerControls.totalNoOfSites.errors),"red-tooltip"),e(t,20,0,!n.isPlan()),e(t,23,0,!n.isPlan()&&n.hasActualFSI()),e(t,25,0,n.displayRedistributeFields());var i=e(t,32,0,n.siCustomSchedulerData.toDisableFSI||n.isPlanNonEditable());e(t,31,0,"form-control",i),e(t,45,0,l["ɵnov"](t,60),n.siCustomSchedulerData.toDisableFSI),e(t,48,0,n.siCustomSchedulerControls.FSIDate,n.siCustomSchedulerData.toDisableFSI),e(t,51,0,n.consolidateValidationErrors(n.siCustomSchedulerControls.FSIDate.errors),"red-tooltip"),e(t,53,0,n.siCustomSchedulerData.toDisableFSI),e(t,57,0,l["ɵnov"](t,60)),e(t,64,0,n.isCohortPlan());var r=e(t,69,0,n.isButtonsDisabled()||n.isPlanNonEditable());e(t,68,0,"ctos-btn-secondary",r),e(t,74,0,"siCustomMethod"),e(t,79,0,"initiationSchedule"),e(t,82,0,n.siCustomSchedulerData.dataSource),e(t,89,0,"action"),e(t,102,0,"noOfSites"),e(t,115,0,"startDate"),e(t,128,0,"endDate"),e(t,141,0,"addRowButton"),e(t,151,0,"remainingSites"),e(t,160,0,n.columnsToDisplay,!0),e(t,163,0,n.columnsToDisplay);var o=e(t,167,0,"addRowButton");e(t,166,0,o,!0);var s=e(t,171,0,"remainingSites");e(t,170,0,s,!0)}),(function(e,t){var n=t.component;e(t,0,0,l["ɵnov"](t,3).ngClassUntouched,l["ɵnov"](t,3).ngClassTouched,l["ɵnov"](t,3).ngClassPristine,l["ɵnov"](t,3).ngClassDirty,l["ɵnov"](t,3).ngClassValid,l["ɵnov"](t,3).ngClassInvalid,l["ɵnov"](t,3).ngClassPending),e(t,6,0,n.siCustomSchedulerResource.SI_TOTAL_NUMBER_OF_SITES),e(t,8,0,l["ɵnov"](t,16).ngClassUntouched,l["ɵnov"](t,16).ngClassTouched,l["ɵnov"](t,16).ngClassPristine,l["ɵnov"](t,16).ngClassDirty,l["ɵnov"](t,16).ngClassValid,l["ɵnov"](t,16).ngClassInvalid,l["ɵnov"](t,16).ngClassPending),e(t,27,0,n.siCustomSchedulerResource.SI_FSID),e(t,29,1,["standard"==l["ɵnov"](t,33).appearance,"fill"==l["ɵnov"](t,33).appearance,"outline"==l["ɵnov"](t,33).appearance,"legacy"==l["ɵnov"](t,33).appearance,l["ɵnov"](t,33)._control.errorState,l["ɵnov"](t,33)._canLabelFloat,l["ɵnov"](t,33)._shouldLabelFloat(),l["ɵnov"](t,33)._hasFloatingLabel(),l["ɵnov"](t,33)._hideControlPlaceholder(),l["ɵnov"](t,33)._control.disabled,l["ɵnov"](t,33)._control.autofilled,l["ɵnov"](t,33)._control.focused,"accent"==l["ɵnov"](t,33).color,"warn"==l["ɵnov"](t,33).color,l["ɵnov"](t,33)._shouldForward("untouched"),l["ɵnov"](t,33)._shouldForward("touched"),l["ɵnov"](t,33)._shouldForward("pristine"),l["ɵnov"](t,33)._shouldForward("dirty"),l["ɵnov"](t,33)._shouldForward("valid"),l["ɵnov"](t,33)._shouldForward("invalid"),l["ɵnov"](t,33)._shouldForward("pending"),!l["ɵnov"](t,33)._animationsEnabled]),e(t,43,1,[l["ɵnov"](t,45)._datepicker?"dialog":null,(null==l["ɵnov"](t,45)._datepicker?null:l["ɵnov"](t,45)._datepicker.opened)&&l["ɵnov"](t,45)._datepicker.id||null,l["ɵnov"](t,45).min?l["ɵnov"](t,45)._dateAdapter.toIso8601(l["ɵnov"](t,45).min):null,l["ɵnov"](t,45).max?l["ɵnov"](t,45)._dateAdapter.toIso8601(l["ɵnov"](t,45).max):null,l["ɵnov"](t,45).disabled,l["ɵnov"](t,50).ngClassUntouched,l["ɵnov"](t,50).ngClassTouched,l["ɵnov"](t,50).ngClassPristine,l["ɵnov"](t,50).ngClassDirty,l["ɵnov"](t,50).ngClassValid,l["ɵnov"](t,50).ngClassInvalid,l["ɵnov"](t,50).ngClassPending,l["ɵnov"](t,53)._isServer,l["ɵnov"](t,53).id,l["ɵnov"](t,53).placeholder,l["ɵnov"](t,53).disabled,l["ɵnov"](t,53).required,l["ɵnov"](t,53).readonly&&!l["ɵnov"](t,53)._isNativeSelect||null,l["ɵnov"](t,53)._ariaDescribedby||null,l["ɵnov"](t,53).errorState,l["ɵnov"](t,53).required.toString()]),e(t,55,0,-1,l["ɵnov"](t,57).datepicker&&l["ɵnov"](t,57).datepicker.opened,l["ɵnov"](t,57).datepicker&&"accent"===l["ɵnov"](t,57).datepicker.color,l["ɵnov"](t,57).datepicker&&"warn"===l["ɵnov"](t,57).datepicker.color),e(t,66,0,l["ɵnov"](t,70).disabled||null,"NoopAnimations"===l["ɵnov"](t,70)._animationMode),e(t,71,0,n.siCustomSchedulerResource.ENTER_SLOT_DATES),e(t,73,0,l["ɵnov"](t,76).ngClassUntouched,l["ɵnov"](t,76).ngClassTouched,l["ɵnov"](t,76).ngClassPristine,l["ɵnov"](t,76).ngClassDirty,l["ɵnov"](t,76).ngClassValid,l["ɵnov"](t,76).ngClassInvalid,l["ɵnov"](t,76).ngClassPending),e(t,77,0,l["ɵnov"](t,81).ngClassUntouched,l["ɵnov"](t,81).ngClassTouched,l["ɵnov"](t,81).ngClassPristine,l["ɵnov"](t,81).ngClassDirty,l["ɵnov"](t,81).ngClassValid,l["ɵnov"](t,81).ngClassInvalid,l["ɵnov"](t,81).ngClassPending)}))}},seAx:function(e,t,n){"use strict";function l(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),l(n("9C04")),l(n("NAJ2")),l(n("IK5s")),l(n("fWMV")),l(n("o1p7"))},wX4V:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var l=n("LoAr"),a=(n("bdSb"),n("WT9V"),n("C7Lb"),n("LYzL")),i=(n("SeAg"),n("WV+C")),r=n("Z5FQ"),o=(n("0xYh"),n("PVb+"),l["ɵcrt"]({encapsulation:2,styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:transform ease 280ms,background-color ease 280ms;width:20px;transform:scale(.001)}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-checked .mat-radio-inner-circle{transform:scale(.5)}@media (-ms-high-contrast:active){.mat-radio-checked .mat-radio-inner-circle{border:solid 10px}}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple,.mat-radio-persistent-ripple{opacity:0}@media (hover:none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}@media (-ms-high-contrast:active){.mat-radio-disabled{opacity:.5}}"],data:{}}));function s(e){return l["ɵvid"](2,[l["ɵqud"](671088640,1,{_inputElement:0}),(e()(),l["ɵeld"](1,0,[["label",1]],null,12,"label",[["class","mat-radio-label"]],[[1,"for",0]],null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,7,"div",[["class","mat-radio-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"div",[["class","mat-radio-outer-circle"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"div",[["class","mat-radio-inner-circle"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,3,"div",[["class","mat-radio-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),l["ɵdid"](6,212992,null,0,a.u,[l.ElementRef,l.NgZone,i.a,[2,a.k],[2,r.a]],{centered:[0,"centered"],radius:[1,"radius"],animation:[2,"animation"],disabled:[3,"disabled"],trigger:[4,"trigger"]},null),l["ɵpod"](7,{enterDuration:0}),(e()(),l["ɵeld"](8,0,null,null,0,"div",[["class","mat-ripple-element mat-radio-persistent-ripple"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,[[1,0],["input",1]],null,0,"input",[["class","mat-radio-input cdk-visually-hidden"],["type","radio"]],[[8,"id",0],[8,"checked",0],[8,"disabled",0],[8,"tabIndex",0],[1,"name",0],[1,"value",0],[8,"required",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"change"],[null,"click"]],(function(e,t,n){var l=!0,a=e.component;return"change"===t&&(l=!1!==a._onInputChange(n)&&l),"click"===t&&(l=!1!==a._onInputClick(n)&&l),l}),null,null)),(e()(),l["ɵeld"](10,0,null,null,3,"div",[["class","mat-radio-label-content"]],[[2,"mat-radio-label-before",null]],null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,1,"span",[["style","display:none"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),l["ɵncd"](null,0)],(function(e,t){var n=t.component,a=e(t,7,0,150);e(t,6,0,!0,20,a,n._isRippleDisabled(),l["ɵnov"](t,1))}),(function(e,t){var n=t.component;e(t,1,0,n.inputId),e(t,5,0,l["ɵnov"](t,6).unbounded),e(t,9,0,n.inputId,n.checked,n.disabled,n.tabIndex,n.name,n.value,n.required,n.ariaLabel,n.ariaLabelledby,n.ariaDescribedby),e(t,10,0,"before"==n.labelPosition)}))}},ynHq:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var l=n("LoAr"),a=n("5IsW"),i=n("HY2n"),r=(n("Z0E0"),function(){function e(e){this.siCustomSchedulerService=e,this.columnsToDisplay=["action","noOfSites","startDate","endDate"],this.subscriptions=new Map,this.cohortsMapped=new l.EventEmitter,this.changeOfUsedCohortKeys=new l.EventEmitter,this.resetFSS=new l.EventEmitter}return e.prototype.ngOnInit=function(){this.initializeLocaleResources(),this.subscribeToNumSitesValueChanges(),this.subscribeToSitesToRedistributeValueChanges(),this.subscribeToFSIDateValueChanges()},e.prototype.ngOnChanges=function(e){if(this.siCustomSchedulerService.cohortsMapped=this.cohortsMapped,this.siCustomSchedulerService.changeOfUsedCohortKeys=this.changeOfUsedCohortKeys,this.siCustomSchedulerService.resetFSS=this.resetFSS,e&&e.siCustomSchedulerControls&&e.siCustomSchedulerControls.currentValue&&this.setInitiationScheduleGroup(e.siCustomSchedulerControls.currentValue),e&&e.siCustomSchedulerData&&e.siCustomSchedulerData.currentValue){var t=e.siCustomSchedulerData.currentValue;this.siCustomSchedulerService.siCustomSchedulerData=t,t.planProperties&&(this.siCustomSchedulerData.planProperties=t.planProperties,this.planPropertiesChanged()),t.countryDetails&&(this.siCustomSchedulerData.countryDetails=t.countryDetails,this.siCustomSchedulerService.countryDetailsChanged())}},e.prototype.setInitiationScheduleGroup=function(e){this.siCustomSchedulerService.siCustomSchedulerControls=e,this.siCustomSchedulerService.resetSIMethod()},e.prototype.initializeLocaleResources=function(){this.siCustomSchedulerResource=this.siCustomSchedulerService.getSiCustomSchedulerResource()},e.prototype.consolidateValidationErrors=function(e){return this.siCustomSchedulerService.consolidateValidationErrors(e)},e.prototype.getConsolidatedErrors=function(e){return this.siCustomSchedulerService.getConsolidatedErrors(e)},e.prototype.displayRedistributeFields=function(){return this.siCustomSchedulerService.toDisplayRedistributedFields()},e.prototype.openMapCohortsDialog=function(){this.siCustomSchedulerService.openMapCohortsDialog(this.subscriptions)},e.prototype.isMapCohortDisabled=function(){return this.siCustomSchedulerService.isMapCohortDisabled()},e.prototype.openPasteDatesDialog=function(){this.siCustomSchedulerService.openPasteDatesDialog(this.subscriptions)},e.prototype.isButtonsDisabled=function(){return this.siCustomSchedulerService.buttonsDisabled},e.prototype.deleteRow=function(e,t,n){this.siCustomSchedulerService.deleteRow(e,t,n)},e.prototype.disableDelete=function(e){return this.siCustomSchedulerControls.initiationSchedule.at(e).disabled||this.isPlanNonEditable()},e.prototype.changeInNoOfCenters=function(){this.siCustomSchedulerService.triggerChangeInCEP()},e.prototype.addRowButtonClicked=function(){this.siCustomSchedulerService.addRowButtonClicked()},e.prototype.isAddRowButtonDisabled=function(){return this.siCustomSchedulerControls.initiationSchedule.length>=this.siCustomSchedulerData.maxRowsAllowed||this.isButtonsDisabled()||this.isPlanNonEditable()},e.prototype.getTotalRemainingSites=function(){return this.siCustomSchedulerService.getTotalRemainingSites()},e.prototype.isAdjustable=function(){return this.siCustomSchedulerService.isAdjustable()},e.prototype.hasActualFSI=function(){return this.siCustomSchedulerService.hasActualFSI()},e.prototype.planPropertiesChanged=function(){this.siCustomSchedulerData&&this.siCustomSchedulerData.planProperties&&this.siCustomSchedulerService.disableSISchedule(this.getPlanParam("redistSites"))},e.prototype.getPlanParam=function(e){return this.siCustomSchedulerService.getPlanParam(e)},e.prototype.isPlan=function(){return this.siCustomSchedulerService.isPlan()},e.prototype.isCohortPlan=function(){return this.siCustomSchedulerService.isCohortPlan()},e.prototype.subscribeToNumSitesValueChanges=function(){var e=this;if(!this.subscriptions.has("totalNumsiteSubscription")){var t=this.siCustomSchedulerControls.totalNoOfSites.valueChanges.subscribe((function(t){var n=e.siCustomSchedulerControls.sitesToRedistribute.value,l=e.calculateUninitiatedSite(t);if(!e.isCohortPlan()&&!e.isPlan()){var a=l,i=e.calculateRangeMin(t);e.siCustomSchedulerData.range="("+i+" -  "+a+")",e.siCustomSchedulerService.getUpdatedFSI(Number(t),Number(n))}e.siCustomSchedulerControls.uninitiatedSite.setValue(l)}));this.subscriptions.set("totalNumsiteSubscription",t)}},e.prototype.calculateUninitiatedSite=function(e){var t=this.siCustomSchedulerService.actualNumSites();return this.siCustomSchedulerService.calculateUninitiatedSite(e,t)},e.prototype.calculateRangeMin=function(e){var t=this.siCustomSchedulerService.actualNumSites(),n=this.siCustomSchedulerService.parentNumSites();return this.siCustomSchedulerService.calculateRangeMin(n,e,t)},e.prototype.subscribeToSitesToRedistributeValueChanges=function(){var e=this;if(!this.subscriptions.has("sitesToRedistributeSubscription")){var t=this.siCustomSchedulerControls.sitesToRedistribute.valueChanges.subscribe((function(t){if(!1===i.a.isCohortAdjustment(e.siCustomSchedulerData.planProperties)){var n=Number(e.siCustomSchedulerControls.totalNoOfSites.value),l=e.siCustomSchedulerService.getUpdatedFSI(n,Number(t));null!=l&&e.siCustomSchedulerControls.FSIDate.setValue(l)}}));this.subscriptions.set("sitesToRedistributeSubscription",t)}},e.prototype.subscribeToFSIDateValueChanges=function(){var e=this;if(!this.subscriptions.has("FSIDateSubscription")){var t=this.siCustomSchedulerControls.FSIDate.valueChanges.subscribe((function(t){t&&e.siCustomSchedulerControls.initiationSchedule&&e.siCustomSchedulerControls.initiationSchedule.at(a.Kb.ZERO)&&(e.siCustomSchedulerControls.initiationSchedule.at(a.Kb.ZERO).get("slotStartDate").setValue(t),e.siCustomSchedulerControls.initiationSchedule.at(a.Kb.ZERO).get("slotEndDate").setValue(t))}));this.subscriptions.set("FSIDateSubscription",t)}},e.prototype.parentNumSites=function(){return this.siCustomSchedulerService.parentNumSites()},e.prototype.actualNumSites=function(){return this.siCustomSchedulerService.actualNumSites()},e.prototype.projectedNumSites=function(){return this.siCustomSchedulerService.projectedNumSites()},e.prototype.isPlanNonEditable=function(){return this.siCustomSchedulerService.isPlanNonEditable()},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){e.unsubscribe()}))},e}())}}]);