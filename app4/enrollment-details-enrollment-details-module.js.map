{"version":3,"sources":["D:/DecisionView/6.1Country/studyoptimizer/client/nworkspace/client-studyOptimizer-app/node_modules/ag-grid-enterprise/dist/ag-grid-enterprise.cjs.js","./src/app/sites/enrollment-details/enrollment-details.component.html","./src/app/sites/enrollment-details/enrollment-details-routing.module.ts","./src/app/sites/enrollment-details/enrollment-details.component.ts","./src/app/sites/enrollment-details/enrollment-details.module.ts","./src/app/sites/enrollment-details/enrollment-details.service.ts","./src/app/sites/enrollment-details/grid/ed-col-def.service.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,8CAA8C,cAAc;;AAE5D,sBAAsB,mBAAO,CAAC,6FAAmB;;AAEjD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,uDAAuD,0BAA0B,EAAE;AACnF,uDAAuD,iCAAiC,EAAE,wBAAwB,gCAAgC,EAAE;AACpJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,eAAe;AACnC;AACA;AACA;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF;AACzF;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,cAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,6CAA6C,EAAE;AAC1F,2CAA2C,uCAAuC,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oCAAoC;AACrC;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,gDAAgD;AACrF,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,gCAAgC,oBAAoB;AACpD;AACA;AACA;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,+BAA+B;AACrE;AACA;AACA,yCAAyC,8DAA8D,EAAE;AACzG;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,8EAA8E;AAC9H;AACA;AACA,6CAA6C,0DAA0D;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iCAAiC;AACjC,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,+BAA+B;AACrE;AACA;AACA,yCAAyC,8DAA8D,EAAE;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,sBAAsB,EAAE;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8KAA8K,4BAA4B,EAAE;AAC5M;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,uEAAuE,+DAA+D,EAAE;AACxI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,oCAAoC,kDAAkD;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,qCAAqC,EAAE;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,4CAA4C,EAAE;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,4CAA4C;AACxE;AACA;AACA;AACA,4BAA4B,kDAAkD;AAC9E;AACA;AACA;AACA;AACA,4FAA4F,+BAA+B,EAAE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,yDAAyD,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kCAAkC,wDAAwD,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qCAAqC,2DAA2D,EAAE;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,0CAA0C,wBAAwB,EAAE;AACpE;AACA;AACA,uBAAuB,cAAc;AACrC;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,iCAAiC,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,iBAAiB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,0DAA0D,EAAE;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,wCAAwC,EAAE;AACxH;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,mCAAmC,EAAE;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,6FAA6F,EAAE;AACjJ;AACA,8CAA8C,UAAU,8CAA8C,EAAE;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,qFAAqF,yDAAyD,EAAE;AAChJ,SAAS;AACT;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,8CAA8C,EAAE;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,iBAAiB,gBAAgB;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,8BAA8B,EAAE;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,uBAAuB,EAAE;AACxG,6EAA6E,uCAAuC,EAAE;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,kCAAkC,kCAAkC,EAAE;AACtE,uCAAuC,2CAA2C,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kCAAkC,EAAE;AACtE,uCAAuC,kDAAkD,EAAE;AAC3F;AACA;AACA;AACA,kCAAkC,kCAAkC,EAAE;AACtE,uCAAuC,kDAAkD,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,KAAK,GAAG,mBAAmB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,+BAA+B,EAAE;AACvE;AACA;AACA;AACA;AACA,yCAAyC,8DAA8D,EAAE;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,SAAS;AACT;AACA;AACA,2BAA2B;AAC3B;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,oBAAoB,EAAE;AAC5D,sCAAsC,oBAAoB;AAC1D,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,eAAe,EAAE;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,0DAA0D,EAAE;AACzI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,uEAAuE,EAAE;AACtI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,mDAAmD,kCAAkC,EAAE;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,qCAAqC,EAAE;AAChF;AACA;AACA,yCAAyC,kCAAkC,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,4EAA4E,EAAE;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,eAAe,EAAE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,sDAAsD,uBAAuB,EAAE;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,sDAAsD;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,2DAA2D,0BAA0B,EAAE;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,2CAA2C,EAAE;AAChI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA,gDAAgD,yDAAyD;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,yDAAyD,8CAA8C,EAAE;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,uCAAuC,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA,uBAAuB,2BAA2B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,4DAA4D,EAAE;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,SAAS,4EAA4E;AACrF,SAAS,0DAA0D;AACnE,SAAS,wEAAwE;AACjF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS,+EAA+E;AACxF,SAAS,2EAA2E;AACpF,SAAS;AACT;AACA;AACA,SAAS,uEAAuE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC,EAAE;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA,6CAA6C;AAC7C;AACA;AACA,CAAC,EAAE;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8CAA8C;AAC9C;AACA,aAAa,qBAAqB,qBAAqB,KAAK;AAC5D;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE;AACH,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE;AACH,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE;AACH,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA,SAAS;AACT,CAAC,EAAE;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,YAAY;AACZ,cAAc;AACd,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,0BAA0B,UAAU,YAAY,EAAE,EAAE;AACjE,aAAa,6BAA6B,UAAU,gCAAgC,EAAE,EAAE;AACxF,aAAa,4BAA4B,UAAU,YAAY,EAAE;AACjE;AACA;AACA,2BAA2B,8BAA8B,UAAU,cAAc,EAAE,EAAE;AACrF;AACA;AACA,2BAA2B,8BAA8B,UAAU,cAAc,EAAE,EAAE;AACrF;AACA;AACA,2BAA2B,YAAY;AACvC;AACA;AACA,2BAA2B,YAAY;AACvC;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA,2BAA2B,yBAAyB,UAAU,iDAAiD,EAAE,EAAE;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,UAAU,4BAA4B,EAAE;AACzE;AACA,iBAAiB;AACjB;AACA,iCAAiC,UAAU,8BAA8B,EAAE;AAC3E;AACA,iBAAiB;AACjB;AACA,iCAAiC,UAAU,0BAA0B,EAAE;AACvE;AACA,iBAAiB;AACjB;AACA,iCAAiC,UAAU,gCAAgC,EAAE;AAC7E;AACA,iBAAiB;AACjB;AACA,iCAAiC,UAAU,oCAAoC,EAAE;AACjF;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,wBAAwB,yEAAyE;AACjG,wBAAwB,uBAAuB,GAAG,yBAAyB;AAC3E,0BAA0B,4FAA4F;AACtH,+BAA+B,iDAAiD;AAChF,0BAA0B,0DAA0D;AACpF,6BAA6B,wCAAwC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,8BAA8B,yFAAyF;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F,4CAA4C,EAAE;AACxI;AACA;AACA,mCAAmC,oCAAoC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,4BAA4B;AAC5B,0BAA0B;AAC1B,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,wCAAwC;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,0CAA0C,QAAQ,qBAAqB;AACvE;AACA;;AAEA;AACA,iDAAiD,QAAQ;AACzD,wCAAwC,QAAQ;AAChD,wDAAwD,QAAQ;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA,2BAA2B;AAC3B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,uCAAuC,oBAAoB;AAC3D;AACA,+DAA+D,uBAAuB,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+CAA+C,6BAA6B,EAAE;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2CAA2C,+BAA+B,EAAE;AAC5E,wCAAwC,4BAA4B,EAAE;AACtE;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,4BAA4B,EAAE;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,kCAAkC,EAAE;AACnF,0CAA0C,2BAA2B,qBAAqB;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,kCAAkC,EAAE;AAC7F;AACA;AACA;AACA;AACA,0CAA0C,uCAAuC,qBAAqB;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF,uCAAuC,EAAE;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C,oEAAoE,cAAc,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,yCAAyC;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,+DAA+D,+DAA+D;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,4CAA4C,EAAE;AAC3G,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC,0BAA0B;;AAE3B;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,cAAc;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,gDAAgD,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,8BAA8B;AAChE;AACA;AACA;AACA,wCAAwC,iBAAiB;AACzD;AACA;AACA,+BAA+B,YAAY;AAC3C;AACA;AACA;AACA;AACA;AACA,mDAAmD,0BAA0B;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA,6BAA6B,SAAS;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,iDAAiD,QAAQ;AACzD,wCAAwC,QAAQ;AAChD,wDAAwD,QAAQ;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,gDAAgD,yBAAyB,eAAe,EAAE,EAAE;AAC5F;AACA;AACA;AACA;AACA,2DAA2D,2CAA2C,EAAE;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,oCAAoC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,wBAAwB,qBAAqB,+BAA+B;AAC5E;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,YAAY;AACrD;AACA;AACA,uIAAuI;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,yDAAyD;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,kEAAkE;AACvG,aAAa;AACb;AACA;AACA;AACA;AACA,2EAA2E,sBAAsB,IAAI;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA,oCAAoC,oBAAoB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oDAAoD;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,kDAAkD,EAAE;AACjH;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,uDAAuD,sDAAsD,6BAA6B,EAAE,EAAE;AAC9I;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,6BAA6B,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wHAAwH,iCAAiC,EAAE;AAC3J;AACA,0HAA0H,iCAAiC,EAAE;AAC7J;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,gCAAgC,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,gCAAgC,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,2EAA2E,6CAA6C,EAAE;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,yCAAyC,EAAE;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,sCAAsC;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qBAAqB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kEAAkE,yCAAyC,EAAE;AAC7G;AACA;AACA,6DAA6D,6BAA6B,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,SAAS,yFAAyF;AAClG,SAAS;AACT;AACA;AACA,SAAS,wEAAwE;AACjF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,0CAA0C,EAAE;AAC7F;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,wCAAwC,wCAAwC,YAAY,EAAE,QAAQ,EAAE;AACnJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,uBAAuB,aAAa;AACpC;AACA;AACA;AACA;AACA,6EAA6E,mEAAmE,EAAE;AAClJ;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,qDAAqD;AACrD,uEAAuE,2BAA2B,EAAE;AACpG;AACA;AACA;AACA;AACA;AACA,SAAS,EAAE,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA,iDAAiD,QAAQ;AACzD,wCAAwC,QAAQ;AAChD,wDAAwD,QAAQ;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,+CAA+C;AAC1F,yCAAyC,6CAA6C;AACtF,0CAA0C,yBAAyB;AACnE,wCAAwC,sBAAsB;AAC9D,8CAA8C,qEAAqE;AACnH,kDAAkD,gCAAgC;AAClF,2CAA2C,8EAA8E,UAAU,EAAE,EAAE;AACvI,0CAA0C,wBAAwB;AAClE,mDAAmD,kCAAkC;AACrF,wCAAwC,uBAAuB;AAC/D,sDAAsD,uDAAuD,oBAAoB,EAAE,EAAE;AACrI,kDAAkD,kDAAkD,oBAAoB,EAAE,qBAAqB,kBAAkB,EAAE,EAAE;AACrK,kDAAkD,sDAAsD,oBAAoB,EAAE,KAAK;AACnI,kDAAkD,qEAAqE;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,uBAAuB,EAAE;AAC1D,iCAAiC,qBAAqB,EAAE;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,+CAA+C,oCAAoC;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gCAAgC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kGAAkG,yBAAyB,EAAE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,sCAAsC,sCAAsC;AAC5E;AACA;AACA;AACA,qDAAqD,mCAAmC,EAAE;AAC1F;AACA;AACA;AACA,kEAAkE,0CAA0C,EAAE;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,gDAAgD,0BAA0B,EAAE;AAC5E,4CAA4C,0BAA0B,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qFAAqF,oBAAoB,EAAE;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,uEAAuE,gBAAgB,EAAE;AACzF;AACA;AACA,kDAAkD,2CAA2C,EAAE;AAC/F;AACA,oDAAoD,sFAAsF,EAAE;AAC5I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA,qCAAqC,wBAAwB;AAC7D;AACA;AACA,0CAA0C,mCAAmC;AAC7E,0CAA0C,mCAAmC;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,uDAAuD,kBAAkB,EAAE,GAAG,EAAE;AAClJ;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA,iDAAiD,QAAQ;AACzD,wCAAwC,QAAQ;AAChD,wDAAwD,QAAQ;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,gBAAgB,EAAE,qCAAqC,gBAAgB,EAAE;AAC9H;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,UAAU,wBAAwB,EAAE,EAAE;AAC5E,wCAAwC,+BAA+B;AACvE;AACA;AACA,yCAAyC,8DAA8D,EAAE;AACzG;AACA;AACA;AACA,mCAAmC,kDAAkD;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,kCAAkC,EAAE;AACpH;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,wBAAwB,EAAE;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,UAAU,4BAA4B,EAAE,EAAE;AACtG;AACA;AACA,gDAAgD,8BAA8B,mBAAmB,EAAE,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,cAAc,EAAE,wBAAwB,UAAU,sCAAsC,EAAE,EAAE;AAC9I;AACA;AACA,gDAAgD,8BAA8B,+BAA+B,EAAE,EAAE;AACjH;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,oDAAoD;AACjE,aAAa,gDAAgD;AAC7D,aAAa,oDAAoD;AACjE,aAAa;AACb;AACA,gFAAgF,iDAAiD,EAAE;AACnI;AACA,8BAA8B;AAC9B;AACA;AACA,sDAAsD;AACtD;AACA;AACA,SAAS,EAAE,EAAE;AACb;AACA;AACA;AACA,yFAAyF,4BAA4B,EAAE;AACvH,kCAAkC,uEAAuE;AACzG,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,8BAA8B,kBAAkB,EAAE,EAAE;AACpG;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA,SAAS,EAAE,EAAE;AACb;AACA,gDAAgD,0FAA0F,EAAE;AAC5I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,yFAAyF,EAAE;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,+FAA+F,EAAE;AACrJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,qFAAqF,EAAE;AACxI;AACA;AACA;AACA;AACA;AACA,gDAAgD,mFAAmF,EAAE;AACrI;AACA;AACA;AACA;AACA;AACA,oDAAoD,oFAAoF,EAAE;AAC1I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,2EAA2E,EAAE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,wEAAwE,EAAE;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,0EAA0E,EAAE;AAC5H;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,wEAAwE,EAAE;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,wEAAwE,EAAE;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,sEAAsE,EAAE;AACxH;AACA;AACA;AACA;AACA;AACA,oDAAoD,oEAAoE,EAAE;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wBAAwB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,+BAA+B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,YAAY;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,CAAC,sCAAsC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,2BAA2B;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,+BAA+B,+BAA+B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL,gDAAgD;AAChD;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,UAAU;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,oBAAoB,aAAa;AACjC,QAAQ,mBAAmB;AAC3B;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA;AACA,2BAA2B,eAAe;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,aAAa,sBAAsB,aAAa;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA,2BAA2B,eAAe;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA,2BAA2B,eAAe;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,eAAe,EAAE;AACpD;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,yBAAyB,EAAE;AACtE;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,iBAAiB,aAAa;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,yBAAyB,YAAY,MAAM,WAAW;AACtD;AACA;AACA;AACA,sEAAsE,iBAAiB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,eAAe;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,eAAe;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,cAAc;AAC5B;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,cAAc,eAAe;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,cAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,UAAU;AACxC;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,0BAA0B,UAAU;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,sDAAsD;AACtD,qCAAqC;AACrC;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,kCAAkC;AAClC,kCAAkC;AAClC,sCAAsC;AACtC;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,OAAO;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,QAAQ;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,SAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,4DAA4D,uCAAuC,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,SAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+MAA+M,YAAY,iBAAiB;AAC5O;AACA;AACA;AACA,mMAAmM,YAAY,iBAAiB;AAChO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,iCAAiC;AAClF;AACA;AACA,0DAA0D;AAC1D;AACA,4EAA4E;AAC5E;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC,0BAA0B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,mBAAmB;AACjC,cAAc,oBAAoB;AAClC,cAAc,oBAAoB;AAClC;AACA,sBAAsB,mBAAmB;AACzC,YAAY,sBAAsB;AAClC;AACA,qFAAqF;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED,WAAW,OAAO,2BAA2B;AAC7C;AACA;AACA;AACA;AACA,CAAC,oBAAoB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,qBAAqB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA,iDAAiD,yBAAyB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,0BAA0B;AAC1B;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA,iCAAiC,gBAAgB;AACjD,8BAA8B,gBAAgB;AAC9C;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,8CAA8C,iBAAiB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,6BAA6B,EAAE;AAChF;AACA;AACA,wDAAwD,iCAAiC,EAAE;AAC3F;AACA;AACA,yDAAyD,iCAAiC,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA,yDAAyD,qDAAqD,EAAE;AAChH;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,qBAAqB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,SAAS,GAAG,2CAA2C,GAAG,kBAAkB;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,kCAAkC;AAClC,CAAC,gDAAgD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,sEAAsE,EAAE;AACxH;AACA;AACA;AACA;AACA;AACA,gDAAgD,sEAAsE,EAAE;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA,yDAAyD,uCAAuC,EAAE;AAClG;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,yEAAyE,EAAE;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,4BAA4B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,qDAAqD,8BAA8B;AACnF;AACA,8CAA8C,OAAO;AACrD;AACA;AACA,0DAA0D,aAAa;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,WAAW;AAC1C,gCAAgC,eAAe;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,kCAAkC,4BAA4B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;;AAED;AACA;AACA,6BAA6B,SAAS;AACtC,+BAA+B,aAAa;AAC5C,gCAAgC,cAAc;AAC9C,8BAA8B,cAAc;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC,gCAAgC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA,2CAA2C;AAC3C,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,kBAAkB,aAAa,EAAE,EAAE;AAC1F;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,mDAAmD,wBAAwB,EAAE;AAC7E;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kCAAkC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,sDAAsD,uBAAuB,EAAE;AAC/E;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,sCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,uBAAuB;AACpD;AACA;AACA,6BAA6B,qBAAqB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C,2EAA2E,KAAK,UAAU,IAAI;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA,kCAAkC,4BAA4B;AAC9D;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,qBAAqB;AACtD;AACA;AACA;AACA;AACA;AACA,8CAA8C,uBAAuB,EAAE,6BAA6B,2CAA2C,EAAE;AACjJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,2BAA2B,EAAE;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,4DAA4D,mCAAmC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,gDAAgD,qCAAqC,EAAE;AACvF;AACA,gDAAgD,wDAAwD,EAAE;AAC1G;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8CAA8C,gCAAgC,EAAE;AAChF,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,0BAA0B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,mDAAmD,2BAA2B,EAAE;AAChF,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,kBAAkB,EAAE,6BAA6B,6BAA6B,EAAE;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,aAAa;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,gBAAgB;AAChB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA,iEAAiE;AACjE;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA,iEAAiE;AACjE;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA,0DAA0D;AAC1D;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,YAAY;AAC3C,gCAAgC,YAAY;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,2BAA2B,EAAE;AACvG;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,YAAY;AACrC;AACA;AACA;AACA,uCAAuC,oDAAoD,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA,4DAA4D,iCAAiC,EAAE;AAC/F;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,qCAAqC,yCAAyC,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,UAAU,uBAAuB,EAAE,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,YAAY;AAC5C,gCAAgC,YAAY;AAC5C,+BAA+B,eAAe;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,UAAU,mCAAmC,EAAE,EAAE;AAC5G,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,iDAAiD,yBAAyB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,sBAAsB;AACzE,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,sBAAsB;AACrE,qBAAqB;AACrB;AACA;AACA,SAAS;AACT;AACA;AACA,4CAA4C,oCAAoC,EAAE;AAClF;AACA;AACA;AACA;AACA,mCAAmC,qCAAqC;AACxE,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oDAAoD;AACrD;AACA;AACA;AACA,kCAAkC,4BAA4B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,4BAA4B;AAC5B,SAAS;AACT,2CAA2C,sBAAsB,EAAE;AACnE;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,oBAAoB,EAAE;AACxE,wDAAwD,mBAAmB,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,kBAAkB,EAAE;AACrE;AACA,iBAAiB;AACjB;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,kCAAkC,4BAA4B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,8BAA8B,qBAAqB,UAAU,GAAG,EAAE;;AAElE;AACA;AACA;AACA,yBAAyB,kBAAkB;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA,UAAU,QAAQ;AAClB;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,QAAQ;AAChC,wBAAwB,kBAAkB;AAC1C;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,qBAAqB,UAAU,GAAG;AACjE,6BAA6B,UAAU;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,oCAAoC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,sEAAsE,WAAW,EAAE;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oBAAoB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kBAAkB,GAAG;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,YAAY,mBAAmB,kDAAkD,EAAE;AAChH;AACA,6BAA6B,YAAY,mBAAmB,4CAA4C,EAAE;AAC1G;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,mCAAmC,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,uDAAuD,uBAAuB,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,YAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,YAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,mCAAmC,EAAE;AAC7F,uDAAuD,uBAAuB,EAAE;AAChF,uDAAuD,yBAAyB,EAAE;AAClF,uDAAuD,yBAAyB,EAAE;AAClF,0DAA0D,4BAA4B,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA,4CAA4C,gBAAgB,EAAE;AAC9D,4CAA4C,gBAAgB,EAAE;AAC9D;AACA,mDAAmD,mBAAmB,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA;AACA;AACA;AACA,SAAS,EAAE,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA,iDAAiD,QAAQ;AACzD,wCAAwC,QAAQ;AAChD,wDAAwD,QAAQ;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kDAAkD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,uBAAuB,EAAE;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2CAA2C,mCAAmC,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,EAAE,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,kCAAkC,EAAE,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2F,qCAAqC,EAAE;AAClI,qEAAqE,qCAAqC,EAAE;AAC5G;AACA,cAAc;AACd;AACA;AACA;AACA,yDAAyD,6CAA6C,qDAAqD,EAAE,EAAE,EAAE;AACjK;AACA;AACA;AACA;AACA,+FAA+F,6CAA6C,sCAAsC,EAAE,KAAK,EAAE;AAC3L,yEAAyE,6CAA6C,sCAAsC,EAAE,KAAK,EAAE;AACrK;AACA;AACA;AACA,wBAAwB,wBAAwB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA,gDAAgD,6CAA6C;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,iDAAiD,QAAQ;AACzD,wCAAwC,QAAQ;AAChD,wDAAwD,QAAQ;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,mCAAmC,EAAE;AACnG,6DAA6D,uBAAuB,EAAE;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2CAA2C,mCAAmC,EAAE;AAChF;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,EAAE,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,kCAAkC,EAAE,EAAE;AACvF;AACA;AACA;AACA;AACA;AACA,+CAA+C,uCAAuC,+CAA+C,EAAE,EAAE,EAAE;AAC3I;AACA;AACA;AACA;AACA,2FAA2F,6CAA6C,sCAAsC,EAAE,KAAK,EAAE;AACvL,qEAAqE,6CAA6C,sCAAsC,EAAE,KAAK,EAAE;AACjK;AACA;AACA;AACA;AACA;AACA,wBAAwB,wBAAwB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iFAAiF,yBAAyB;AAC1G;AACA,iCAAiC;AACjC,wCAAwC,2CAA2C;AACnF;AACA,aAAa;AACb,SAAS;AACT,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,IAAI;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,WAAW;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,oBAAoB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4CAA4C;AAC7C;AACA;AACA;AACA;AACA,yBAAyB;AACzB,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,4BAA4B,EAAE;AAClG;AACA,SAAS;AACT;AACA;AACA,4DAA4D,kBAAkB;AAC9E;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,+BAA+B,EAAE;AAC7F,gEAAgE,6BAA6B,EAAE;AAC/F;AACA,oEAAoE,aAAa,EAAE;AACnF,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,wDAAwD,uDAAuD,EAAE;AACjH;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,0DAA0D,EAAE;AACtH,+DAA+D,cAAc,EAAE;AAC/E;AACA;AACA;AACA;AACA,mDAAmD,sCAAsC,EAAE;AAC3F,SAAS;AACT;AACA,8DAA8D,gCAAgC,EAAE;AAChG;AACA;AACA;AACA;AACA,mDAAmD,mCAAmC,EAAE;AACxF;AACA,qDAAqD,2BAA2B,EAAE;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,2CAA2C,EAAE;AACtG;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,kBAAkB,EAAE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,UAAU;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,UAAU;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gCAAgC,EAAE;AACzF;AACA;AACA,uDAAuD,uCAAuC,EAAE;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,OAAO;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,4BAA4B,qCAAqC,GAAG;AACpE;AACA;AACA;AACA;AACA,iCAAiC,qEAAqE;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA,6CAA6C;AAC7C,kDAAkD;AAClD;AACA;AACA,sDAAsD;AACtD;AACA;AACA,iCAAiC;AACjC,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,kBAAkB;AACxD;AACA,SAAS;AACT;AACA;AACA,sCAAsC,kBAAkB;AACxD;AACA,SAAS;AACT;AACA;AACA,sCAAsC,kBAAkB;AACxD;AACA,SAAS;AACT;AACA;AACA,sCAAsC,kBAAkB;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,eAAe;AACjD;AACA;AACA;AACA;AACA,mFAAmF,oBAAoB,EAAE;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,oBAAoB,EAAE;AACjG,SAAS;AACT;AACA,iGAAiG,+CAA+C,EAAE;AAClJ,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,eAAe;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA,uDAAuD,YAAY;AACnE;AACA,YAAY,8BAA8B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,eAAe;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,0DAA0D,EAAE;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,0DAA0D,EAAE;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,yDAAyD,EAAE;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,+DAA+D,EAAE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,yDAAyD,EAAE;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,uDAAuD,EAAE;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,0DAA0D,EAAE;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,0DAA0D,EAAE;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,yDAAyD,EAAE;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,yDAAyD,EAAE;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,oCAAoC,EAAE;AAC7G,0EAA0E,uCAAuC,EAAE;AACnH,yEAAyE,sDAAsD,EAAE;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,yCAAyC,EAAE;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,yCAAyC,EAAE;AACpH;AACA;AACA;AACA;AACA,wEAAwE,uCAAuC,EAAE;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,yCAAyC,EAAE;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,eAAe;AACjD,oCAAoC,qBAAqB;AACzD,oCAAoC,oCAAoC;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,oCAAoC,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,oBAAoB;AACzD,wCAAwC,6CAA6C;AACrF,yCAAyC,uEAAuE;AAChH,6CAA6C,0EAA0E;AACvH,+CAA+C,kDAAkD;AACjG,0DAA0D,oFAAoF;AAC9I,6CAA6C,6CAA6C;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,4EAA4E,EAAE;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,2CAA2C,iBAAiB,mDAAmD;AAC/G,8CAA8C,iBAAiB,iBAAiB;AAChF;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,kCAAkC,EAAE;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,kCAAkC,iDAAiD,oBAAoB,EAAE;AACzG;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,uDAAuD,EAAE;AAC1G;AACA;AACA;AACA;AACA,2CAA2C,2BAA2B;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,uCAAuC,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,iBAAiB,+BAA+B;AAC3F;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,2CAA2C,iBAAiB,0BAA0B;AACtF;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,aAAa,GAAG;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,uBAAuB,EAAE;AACrG;AACA;AACA,wCAAwC,kBAAkB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,gCAAgC,EAAE;AAC3F;AACA;AACA;AACA,yDAAyD,qCAAqC,EAAE,yBAAyB,qBAAqB,EAAE;AAChJ;AACA,kDAAkD,uBAAuB,gCAAgC,6BAA6B,eAAe,GAAG;AACxJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,4BAA4B,+BAA+B,iCAAiC,8BAA8B,mCAAmC,mCAAmC,WAAW;AACpQ;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA,iBAAiB,SAAS,EAAE,uBAAuB,qCAAqC,EAAE;AAC1F;AACA;AACA,wDAAwD;AACxD;AACA;AACA,iBAAiB,SAAS,EAAE,uBAAuB,sBAAsB,EAAE;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA,iBAAiB,SAAS,EAAE;AAC5B,0CAA0C,yBAAyB,EAAE;AACrE;AACA;AACA,sDAAsD,cAAc,EAAE,yBAAyB,UAAU,mCAAmC,EAAE,EAAE;AAChJ;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,0FAA0F,EAAE;AAC7I;AACA;AACA;AACA;AACA;AACA,oDAAoD,oFAAoF,EAAE;AAC1I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,2EAA2E,EAAE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,wEAAwE,EAAE;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,oFAAoF,EAAE;AAC1I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,2EAA2E,EAAE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,wEAAwE,EAAE;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,0EAA0E,EAAE;AAC5H;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,uEAAuE,EAAE;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,wEAAwE,EAAE;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,wFAAwF,EAAE;AAC9I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,4FAA4F,EAAE;AAC9I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,0FAA0F,EAAE;AAC5I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,2EAA2E,EAAE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,wEAAwE,EAAE;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,0EAA0E,EAAE;AAC5H;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,wEAAwE,EAAE;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,2EAA2E,EAAE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8BAA8B,+BAA+B;AAC7D,sCAAsC,wBAAwB;AAC9D,qCAAqC,sCAAsC;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8BAA8B,4BAA4B;AAC1D,sCAAsC,wBAAwB;AAC9D,qCAAqC,mCAAmC;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,0BAA0B;AACtE,qCAAqC,iCAAiC;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8BAA8B,sBAAsB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,4DAA4D,EAAE;AAC9G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8BAA8B,6BAA6B;AAC3D,qCAAqC,oCAAoC;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,gDAAgD,4DAA4D,EAAE;AAC9G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8BAA8B,gCAAgC;AAC9D;AACA;AACA;AACA;AACA,gDAAgD,cAAc,EAAE;AAChE,uCAAuC,qBAAqB,EAAE;AAC9D,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,kDAAkD,oBAAoB,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,uBAAuB,EAAE;AACvE,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,wCAAwC,EAAE;AAC3F,6CAA6C,oCAAoC,EAAE;AACnF,+CAA+C,sCAAsC,EAAE;AACvF,kDAAkD,gCAAgC,EAAE;AACpF,iDAAiD,0BAA0B,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,8DAA8D,+BAA+B,EAAE;AAC/F;AACA;AACA,yDAAyD,6CAA6C,EAAE;AACxG;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,iHAAiH,mCAAmC,EAAE;AACtJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,gBAAgB,EAAE;AAC5E,2DAA2D,sBAAsB,EAAE;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,4BAA4B;AACrF;AACA,aAAa,iCAAiC,iBAAiB,iBAAiB,+CAA+C;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,sCAAsC,gFAAgF;AAC7J;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,mFAAmF,EAAE;AAC1H;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,gBAAgB,EAAE;AACjF,gEAAgE,sBAAsB,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gBAAgB,EAAE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,oBAAoB;AAC1E;AACA;AACA;AACA;AACA,qBAAqB,gCAAgC,yBAAyB,iBAAiB,mCAAmC,2BAA2B,mBAAmB,GAAG;AACnL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yDAAyD,4BAA4B,+BAA+B,iCAAiC,uEAAuE,mCAAmC,mCAAmC,WAAW;AAC7S;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa,8CAA8C;AAC3D;AACA;AACA;AACA,uCAAuC,sCAAsC,4GAA4G;AACzL;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gBAAgB,EAAE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA,sDAAsD,oBAAoB;AAC1E;AACA;AACA;AACA;AACA,qBAAqB,gCAAgC,yBAAyB,cAAc,mCAAmC,2BAA2B,cAAc,mCAAmC,2BAA2B,iBAAiB,GAAG;AAC1P;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,gCAAgC,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA,kDAAkD,uBAAuB,gCAAgC,6BAA6B,eAAe,GAAG;AACxJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,4BAA4B,iCAAiC,mCAAmC,WAAW;AACpK;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa,EAAE;AACf;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,oBAAoB;AAC5E;AACA,iBAAiB,iCAAiC,0BAA0B,kEAAkE,GAAG;AACjJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,4BAA4B,gCAAgC,iBAAiB,mDAAmD;AACzL;AACA;AACA;AACA,aAAa,iCAAiC,iBAAiB,iDAAiD;AAChH;AACA,aAAa,8CAA8C;AAC3D;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gBAAgB,EAAE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,wDAAwD,oBAAoB;AAC5E;AACA,iBAAiB,4DAA4D,0BAA0B,mDAAmD,GAAG;AAC7J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,4BAA4B,gCAAgC,iBAAiB,kDAAkD;AACxL;AACA;AACA;AACA,aAAa,iCAAiC,iBAAiB,iDAAiD;AAChH;AACA,aAAa,8CAA8C;AAC3D;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,+CAA+C;AAChG,uDAAuD,sCAAsC;AAC7F,gDAAgD,+BAA+B;AAC/E,iDAAiD,wBAAwB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,iGAAiG,wBAAwB,EAAE;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,UAAU,6CAA6C,EAAE,EAAE;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,uCAAuC,EAAE;AAC7F;AACA;AACA;AACA,mCAAmC,qDAAqD;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF,uBAAuB,EAAE;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,oBAAoB;AACxD,6CAA6C,6BAA6B;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,6BAA6B,EAAE;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA,iDAAiD,QAAQ;AACzD,wCAAwC,QAAQ;AAChD,wDAAwD,QAAQ;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,wBAAwB,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,8BAA8B,EAAE,wBAAwB,cAAc,EAAE;AAClI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,4BAA4B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,0BAA0B,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,8BAA8B,EAAE;AAC/D,kCAAkC,eAAe,EAAE;AACnD,mCAAmC,cAAc,EAAE;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,0DAA0D,EAAE,uBAAuB,UAAU,EAAE;AACtJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,8BAA8B,EAAE,wBAAwB,cAAc,EAAE;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,qDAAqD,EAAE;AACnH;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,gBAAgB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,4BAA4B;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA,iDAAiD,QAAQ;AACzD,wCAAwC,QAAQ;AAChD,wDAAwD,QAAQ;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,4CAA4C,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,oDAAoD,sDAAsD,wGAAwG,EAAE,EAAE,EAAE;AACxN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,sDAAsD,+BAA+B,EAAE;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,YAAY;AACvC;AACA,8BAA8B;AAC9B,sDAAsD,YAAY,iBAAiB;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,YAAY;AACvC,8BAA8B;AAC9B,qDAAqD,YAAY,+BAA+B;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2F,sBAAsB,mCAAmC;AACpJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,SAAS,4DAA4D;AACrE,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE,0CAA0C;AAC1C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,0DAA0D,EAAE;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,4BAA4B,EAAE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uDAAuD,eAAe,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,aAAa;AACpF,sEAAsE,iCAAiC;AACvG,uEAAuE,aAAa;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,qCAAqC,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,0CAA0C,EAAE;AACpF,wCAAwC,uCAAuC,EAAE;AACjF,wCAAwC,sCAAsC,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,8BAA8B;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,uBAAuB,EAAE;AAChH;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,6GAA6G,EAAE;AACxJ;AACA;AACA;AACA;AACA;AACA,yCAAyC,8GAA8G,EAAE;AACzJ;AACA;AACA;AACA;AACA;AACA,yCAAyC,4EAA4E,EAAE;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,2FAA2F;AACpI;AACA;AACA;AACA;AACA,yCAAyC,uFAAuF;AAChI;AACA;AACA;AACA;AACA,yCAAyC,wEAAwE,EAAE;AACnH;AACA;AACA;AACA;AACA;AACA,yCAAyC,2EAA2E,EAAE;AACtH;AACA;AACA;AACA;AACA;AACA,yCAAyC,sEAAsE;AAC/G;AACA;AACA;AACA;AACA,yCAAyC,kCAAkC;AAC3E;AACA;AACA;AACA;AACA,yCAAyC,oCAAoC;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,sDAAsD;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,qDAAqD;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,oDAAoD;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,wCAAwC,EAAE;AACnF;AACA;AACA;AACA,kFAAkF;AAClF,yCAAyC;AACzC;AACA,qBAAqB,EAAE;AACvB;AACA;AACA;AACA,oFAAoF;AACpF,yCAAyC;AACzC;AACA,qBAAqB,EAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,6CAA6C,uBAAuB,EAAE;AAC3G;AACA;AACA;AACA;AACA;AACA,qCAAqC,kEAAkE;AACvG;AACA;AACA;AACA;AACA;AACA,oGAAoG;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA,wEAAwE;AACxE;AACA,gFAAgF;AAChF;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA,wEAAwE;AACxE;AACA,gFAAgF;AAChF;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA,qEAAqE;AACrE;AACA,6EAA6E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA,qEAAqE;AACrE;AACA,6EAA6E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA,oEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA,oEAAoE;AACpE;AACA,4DAA4D;AAC5D;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA,sEAAsE;AACtE;AACA,8EAA8E;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA,sEAAsE;AACtE;AACA,8EAA8E;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB,EAAE;AAC9D,sCAAsC,sBAAsB;AAC5D,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,2BAA2B,EAAE;AACnF;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,SAAS,sEAAsE;AAC/E,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA,mCAAmC,oCAAoC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA,mCAAmC,oCAAoC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,uDAAuD,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,yBAAyB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,yBAAyB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,oBAAoB;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA,mCAAmC,oCAAoC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0HAA0H,cAAc;AACxI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,iBAAiB,EAAE;AAC1E;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,2BAA2B,EAAE;AAC/G,kFAAkF,2BAA2B,EAAE;AAC/G;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,oBAAoB,EAAE;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA,SAAS,EAAE,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,8BAA8B,EAAE;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,YAAY;AAC3C,qDAAqD,2BAA2B,EAAE;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,6EAA6E,8CAA8C,EAAE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,gCAAgC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,uBAAuB,EAAE;AAC/G,uBAAuB,iCAAiC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F,uBAAuB,EAAE;AACvH,uBAAuB,iCAAiC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,gBAAgB,mCAAmC;AACnD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4DAA4D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,6BAA6B,EAAE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,eAAe;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,OAAO;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,WAAW;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,gCAAgC,EAAE;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,kCAAkC,EAAE;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,kCAAkC,EAAE;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,gCAAgC,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,gCAAgC,EAAE;AACpF;AACA;AACA;AACA;AACA,kDAAkD,gCAAgC,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0PAA0P,kGAAkG,EAAE;AAC9V;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,qDAAqD,EAAE;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,eAAe;AAC3E;AACA;AACA;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD,gCAAgC,eAAe;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,6CAA6C,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,SAAS,gEAAgE;AACzE,SAAS,oFAAoF;AAC7F;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,yCAAyC,EAAE;AAC/F;AACA;AACA,oDAAoD,2CAA2C,EAAE;AACjG;AACA;AACA,oDAAoD,sEAAsE,EAAE;AAC5H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,6EAA6E,wBAAwB,EAAE;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8GAA8G;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,2BAA2B,EAAE;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,2BAA2B,EAAE;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4MAA4M,uDAAuD,EAAE;AACrQ;AACA;AACA;AACA;AACA;AACA,wIAAwI,6BAA6B,EAAE;AACvK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,SAAS,0DAA0D;AACnE,SAAS,8DAA8D;AACvE;AACA;AACA,SAAS,2EAA2E;AACpF,SAAS,iFAAiF;AAC1F,SAAS,2EAA2E;AACpF,SAAS,iFAAiF;AAC1F,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wHAAwH,cAAc;AACtI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,eAAe;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,0BAA0B;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,gBAAgB,+BAA+B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;AClglCA;AAAe,+yBAAgvB,2uCAA2uC,urD;;;;;;;;;;;;;;;;;;;ACAj8D;AACc;AAEqB;AAE5E,IAAM,MAAM,GAAW,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,wFAA0B,EAAE,CAAC,CAAC;AAM7E;IAAA;IAA8C,CAAC;IAAlC,8BAA8B;QAJ1C,8DAAQ,CAAC;YACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;SACxB,CAAC;OACW,8BAA8B,CAAI;IAAD,qCAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXf;AAmBsF;AAExC;AACF;AACZ;AAEL;AACI;AAC5B;AACY;AACyB;AACb;AAQvD;IA2BE,oCAAoB,eAAgC,EAC1C,wBAAkD,EAClD,eAAgC,EAChC,aAA4B,EAC5B,iBAAoC,EACpC,wBAAiD,EACjD,QAAmB;QAN7B,iBAMkC;QANd,oBAAe,GAAf,eAAe,CAAiB;QAC1C,6BAAwB,GAAxB,wBAAwB,CAA0B;QAClD,oBAAe,GAAf,eAAe,CAAiB;QAChC,kBAAa,GAAb,aAAa,CAAe;QAC5B,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,6BAAwB,GAAxB,wBAAwB,CAAyB;QACjD,aAAQ,GAAR,QAAQ,CAAW;QArB7B,YAAO,GAAG,EAAE,CAAC;QAEb,yBAAoB,GAAG,CAAC,CAAC,CAAC;QAG1B,kBAAa,GAAG;YACd,cAAc,EAAE,UAAU,MAAM;gBAC9B,OAAO,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;YAClC,CAAC;SACF,CAAC;QAIe,kBAAa,GAAkB,IAAI,4CAAO,EAAQ,CAAC;QAgiBpE,2BAAsB,GAAG,UAAC,IAAI;YAC5B,OAAO,KAAI,CAAC,iBAAiB,CAAC,wBAAwB,CAAC,IAAI,CAAC,CAAC;QAC/D,CAAC;IA1hBgC,CAAC;IAElC,6CAAQ,GAAR;QACE,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,eAAe,CAAC,kBAAkB,EAAE,CAAC;QACpE,IAAI,CAAC,WAAW,GAAG,UAAU,IAAI;YAC/B,OAAO,IAAI,CAAC,YAAY,CAAC;QAC3B,CAAC,CAAC;QACF,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAC/B,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,IAAI,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;QAC9G,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAED,gDAAW,GAAX;QACE,OAAO,IAAI,CAAC,eAAe,CAAC,sBAAsB,EAAE,CAAC;IACvD,CAAC;IAED,+CAAU,GAAV;QACE,OAAO;YACL,eAAe,EAAE,IAAI;SACtB,CAAC;IACJ,CAAC;IAED,wDAAmB,GAAnB;QACE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,mBAAmB,EAAE,CAAC;IAClE,CAAC;IAED,iDAAY,GAAZ;QACE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC;IACxD,CAAC;IAED,qDAAgB,GAAhB,UAAiB,MAAM;QACrB,IAAM,QAAQ,GAAG,EAAE,CAAC;QACpB,IAAM,MAAM,GAAG,EAAE,CAAC;QAClB,IAAM,SAAS,GAAG,EAAE,CAAC;QACrB,IAAM,QAAQ,GAAG,EAAE,CAAC;QAEpB,iEAAiE;QACjE,IAAM,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC;QACrC,IAAM,mBAAmB,GACvB,MAAM,CAAC,OAAO;YACd,CAAC,OAAO,KAAK,MAAM;gBACjB,OAAO,KAAK,QAAQ;gBACpB,OAAO,KAAK,QAAQ;gBACpB,OAAO,KAAK,SAAS,CAAC,CAAC;QAE3B,OAAO,mBAAmB,CAAC;IAC7B,CAAC;IAED,mDAAc,GAAd;QACE,IAAI,CAAC,WAAW,GAAG;YACjB,SAAS,EAAE,2DAAS,CAAC,MAAM;YAC3B,sBAAsB,EAAE,KAAK;YAC7B,qBAAqB,EAAE,IAAI;YAC3B,YAAY,EAAE,IAAI;YAClB,aAAa,EAAE,IAAI;YACnB,YAAY,EAAE,QAAQ;YACtB,uBAAuB,EAAE,KAAK;YAC9B,eAAe,EAAE,IAAI;YACrB,mBAAmB,EAAE,qEAAW,CAAC,qBAAqB;YACtD,6BAA6B,EAAE,IAAI;YACnC,yBAAyB,EAAE,KAAK;YAChC,oCAAoC,EAAE,IAAI;YAC1C,WAAW,EAAE,UAAC,MAAM;gBAClB,OAAO,EAAE,CAAC;YACZ,CAAC;SACF,CAAC;IACJ,CAAC;IAED,iDAAY,GAAZ,UAAa,IAAI;QACf,IAAI,EAAE,GAAG,IAAI,CAAC;QACd,QAAQ,IAAI,CAAC,cAAc,EAAE;YAC3B,KAAK,IAAI;gBACP,EAAE,GAAG,IAAI,CAAC;gBACV,MAAM;YACR,KAAK,QAAQ;gBACX,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC;gBACvB,MAAM;YACR,KAAK,SAAS;gBACZ,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC;gBACvB,MAAM;YACR,KAAK,MAAM;gBACT,EAAE,GAAG,IAAI,CAAC,cAAc,CAAC;gBACzB,MAAM;YACR,KAAK,QAAQ;gBACX,EAAE,GAAG,IAAI,CAAC,WAAW,GAAG,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC;gBAClD,MAAM;YACR;gBACE,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC;gBACvB,MAAM;SACT;QACD,OAAO,EAAE,CAAC;IACZ,CAAC;IAED,8CAAS,GAAT,UAAU,MAAsB;QAAhC,iBAsBC;QArBC,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;QACvC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC;QAC1B,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC;QAClC,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,SAAS,CAAC;QACtC,IAAI,CAAC,wBAAwB,CAAC,4BAA4B,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,SAAS,CAAC,cAAI;YAC/H,IAAI,IAAI,EAAE;gBACR,OAAO,CAAC,GAAG,CAAC,uDAAuD,CAAC,CAAC;gBACrE,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;gBAC5B,IAAM,iBAAiB,GAAG,KAAI,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,KAAI,CAAC,WAAW,EAAE,CAAC,CAAC;gBACjG,KAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAC;gBACzD,KAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC,iBAAiB,EAAE,KAAI,CAAC,SAAS,CAAC,CAAC;gBACxE,KAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;gBAC7B,KAAI,CAAC,aAAa,CAAC,qBAAqB,CAAC,KAAI,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;gBAC7E,KAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;aAChC;iBAAM;gBACL,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;gBACtC,8DAA8D;aAC/D;QACH,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAE1B,CAAC;IACA,qDAAgB,GAAhB;QACC,IAAM,IAAI,GAAG,IAAI,CAAC;QAClB,IAAI,IAAI;YACN,wBAAwB,CAAC,qBAAqB,EAAE;YAChD,qBAAqB,CAAC,qEAAmB,CAAC,oBAAoB,CAAC,KAAK,EAAE;YACtE,IAAI;gBACJ,wBAAwB,CAAC,qBAAqB,EAAE;gBAChD,qBAAqB,CAAC,qEAAmB,CAAC,oBAAoB,CAAC,KAAK,SAAS,EAAE;YAC7E,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI;gBAChC,wBAAwB,CAAC,qBAAqB,EAAE,CAAC,qBAAqB,CAAC,qEAAmB,CAAC,oBAAoB,CAAC,CAAC,CAAC;SACrH;QACH,IAAI,CAAC,wBAAwB,CAAC,iBAAiB,EAAE,CAAC,SAAS,CAAC,cAAI;YAC9D,IAAI,IAAI,EAAE;gBACX,IAAI,IAAI;oBACP,wBAAwB,CAAC,qBAAqB,EAAE;oBAChD,qBAAqB,CAAC,qEAAmB,CAAC,oBAAoB,CAAC,KAAK,EAAE;oBACtE,IAAI;wBACJ,wBAAwB,CAAC,qBAAqB,EAAE;wBAChD,qBAAqB,CAAC,qEAAmB,CAAC,oBAAoB,CAAC,KAAK,SAAS,EAAE;oBAC7E,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI;wBAChC,wBAAwB,CAAC,qBAAqB,EAAE,CAAC,qBAAqB,CAAC,qEAAmB,CAAC,oBAAoB,CAAC,CAAC,CAAC;iBACnH;aACH;QACF,CAAC,CAAC,CAAC;IACL,CAAC;IACD,kDAAa,GAAb,UAAc,KAAyB;QACrC,IAAM,IAAI,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YACjB,OAAO;SACR;QACD,IAAI,CAAC,wBAAwB,CAAC,2BAA2B,CACvD,IAAI,CAAC,aAAa,CAAC,cAAc,EAAE,EAAE,qEAAmB,CAAC,oBAAoB,CAAC,CAAC;QACjF,+GAA+G;IACjH,CAAC;IAGD,gDAAW,GAAX,UAAY,KAAuB;QACjC,IAAI,CAAC,wBAAwB,CAAC,2BAA2B,CACvD,IAAI,CAAC,aAAa,CAAC,cAAc,EAAE,EAAE,qEAAmB,CAAC,oBAAoB,CAAC,CAAC;IACnF,CAAC;IAED,sDAAiB,GAAjB,UAAkB,KAAK;QACrB,OAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;QAC9C,KAAK,CAAC,GAAG,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC;IAChD,CAAC;IAED,qDAAgB,GAAhB,UAAiB,KAAK;QACpB,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;QAC7C,KAAK,CAAC,GAAG,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC;IAChD,CAAC;IAED,mDAAc,GAAd,UAAe,KAA0B;QACvC,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;QAC3C,IAAI,CAAC,oBAAoB,CAAC,KAAK,EAAE,+DAAa,CAAC,MAAM,CAAC,CAAC;IACzD,CAAC;IACD,qDAAgB,GAAhB,UAAiB,KAA0B;QACzC,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;QAC7C,IAAI,CAAC,oBAAoB,CAAC,KAAK,EAAE,+DAAa,CAAC,MAAM,CAAC,CAAC;IACzD,CAAC;IAED,yDAAoB,GAApB,UAAqB,KAAK,EAAE,MAA6B;QAA7B,kCAAS,+DAAa,CAAC,MAAM;QACvD,IAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC;QAC5C,IAAM,qBAAqB,GAAG,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,YAAY,CAAC;QACtG,IAAM,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,MAAM,EAAE,KAAK,CAAC,GAAG,EAAE,qBAAqB,CAAC,CAAC;QAC9F,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,EAAE,UAAU,GAAG,IAAI,CAAC,CAAC;QAC/D,KAAK,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;IAC1B,CAAC;IAED,qDAAgB,GAAhB,UAAiB,KAAK;QAAtB,iBA6UC;QA5UC,IAAM,MAAM,GAAG;YACb,aAAa,EAAE,CAAC;YAChB,cAAc,EAAE,CAAC;YACjB,YAAY,EAAE,CAAC;YACf,iBAAiB,EAAE,CAAC;YACpB,iBAAiB,EAAE,CAAC;YACpB,iBAAiB,EAAE,CAAC;YACpB,UAAU,EAAE,CAAC;YACb,cAAc,EAAE,CAAC;YACjB,EAAE,EAAE,CAAC;YACL,wBAAwB,EAAE,CAAC;YAC3B,aAAa,EAAE,CAAC;YAChB,WAAW,EAAE,CAAC;YACd,kBAAkB;YAClB,eAAe,EAAE,IAAI;YACrB,aAAa,EAAE,IAAI;YACnB,sBAAsB,EAAE,IAAI;YAC5B,qBAAqB;YACrB,sBAAsB;YACtB,wBAAwB,EAAE,CAAC;YAC3B,oBAAoB,EAAE,CAAC;YACvB,wBAAwB,EAAE,CAAC;YAC3B,oBAAoB,EAAE,CAAC;YAEvB,6BAA6B,EAAE,CAAC;YAChC,yBAAyB,EAAE,CAAC;YAC5B,gBAAgB,EAAE,CAAC;YACnB,YAAY,EAAE,CAAC;SAChB,CAAC;QACF,IAAI,2BAA2B,GAAG,CAAC,CAAC;QACpC,IAAI,gCAAgC,GAAG,CAAC,CAAC;QACzC,IAAI,iBAAiB,GAAG,CAAC,CAAC;QAC1B,IAAI,gBAAgB,GAAG,CAAC,CAAC;QACzB,IAAI,eAAe,GAAG,CAAC,CAAC;QAExB,IAAI,+BAA+B,GAAG,CAAC,CAAC;QAExC,IAAI,eAAe,GAAG,IAAI,CAAC;QAC3B,KAAK,CAAC,OAAO,CAAC,UAAC,IAAI;YACjB,IAAM,SAAS,GAAG,CAAC,KAAI,IAAI,KAAI,CAAC,eAAe,IAAI,KAAI,CAAC,eAAe,CAAC,qBAAqB,EAAE,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC;YAC7H,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,IAAI,IAAI,CAAC,IAAI,EAAE;gBACb,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;oBACxB,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;iBAClB;qBAAM;oBACL,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;iBACrB;gBAED,IAAI,CAAC,IAAI,EAAE;oBACT,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAAC,CAAC;iBAC3C;gBACD,IAAI,IAAI,IAAI,IAAI,CAAC,aAAa,IAAI,OAAO,IAAI,CAAC,aAAa,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBAC1F,MAAM,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC;iBAC5C;qBAAM;oBACL,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE;wBACxB,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC,sBAAsB,CAAC;qBACpD;iBACF;gBAED,IAAI,IAAI,IAAI,OAAO,IAAI,CAAC,cAAc,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACrE,MAAM,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC;iBAC9C;qBAAM;oBACL,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE;wBACxB,MAAM,CAAC,cAAc,GAAG,IAAI,CAAC,sBAAsB,CAAC;qBACrD;iBACF;gBAED,IAAI,IAAI,IAAI,OAAO,IAAI,CAAC,YAAY,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACnE,MAAM,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC;iBAC1C;qBAAM;oBACL,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE;wBACxB,MAAM,CAAC,YAAY,GAAG,IAAI,CAAC,qBAAqB,CAAC;qBAClD;iBACF;gBAED,IAAI,IAAI,IAAI,OAAO,IAAI,CAAC,iBAAiB,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACxE,MAAM,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC;iBACpD;qBAAM;oBACL,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE;wBACxB,MAAM,CAAC,iBAAiB,GAAG,IAAI,CAAC,0BAA0B,CAAC;qBAC5D;iBACF;gBACD,MAAM,CAAC,iBAAiB,GAAG,CAAC,MAAM,CAAC,iBAAiB,GAAG,MAAM,CAAC,YAAY,CAAC,GAAG,GAAG,CAAC;gBAElF,IAAI,IAAI,IAAI,OAAO,IAAI,CAAC,UAAU,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACjE,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,KAAK,mEAAe,CAAC,IAAI,EAAE;wBACrD,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE;4BACtF,eAAe,EAAE,CAAC;4BAClB,MAAM,CAAC,wBAAwB,EAAE,CAAC;4BAClC,MAAM,CAAC,wBAAwB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;4BACrD,MAAM,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;yBAC7C;wBACD,eAAe,GAAG,mEAAe,CAAC,IAAI,CAAC;qBACxC;yBAAM,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,KAAK,mEAAe,CAAC,OAAO,EAAE;wBAC/D,MAAM,CAAC,wBAAwB,IAAI,IAAI,CAAC,wBAAwB,CAAC;wBACjE,MAAM,CAAC,wBAAwB,IAAI,IAAI,CAAC,wBAAwB,CAAC;wBACjE,eAAe,GAAG,mEAAe,CAAC,OAAO,CAAC;qBAC3C;yBAAM,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,KAAK,mEAAe,CAAC,MAAM,EAAE;wBAC9D,eAAe,GAAG,mEAAe,CAAC,MAAM,CAAC;wBACzC,MAAM,CAAC,oBAAoB,IAAI,IAAI,CAAC,wBAAwB,CAAC;wBAC7D,MAAM,CAAC,oBAAoB,IAAI,IAAI,CAAC,wBAAwB,CAAC;qBAC9D;yBAAM;wBACL,eAAe,EAAE,CAAC;wBAClB,MAAM,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;qBAC7C;iBACF;qBAAM;oBACL,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;wBAClC,MAAM,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC;qBAC9C;iBACF;gBAED,IAAI,IAAI,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACzD,sDAAsD;oBACtD,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,KAAK,mEAAe,CAAC,IAAI,EAAE;wBACrD,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;4BAClD,+BAA+B,EAAE,CAAC;4BAClC,MAAM,CAAC,6BAA6B,EAAE,CAAC;4BACvC,iCAAiC;4BACjC,MAAM,CAAC,gBAAgB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;4BAC1C,4CAA4C;4BAC5C,MAAM,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;yBAC7B;wBACD,eAAe,GAAG,mEAAe,CAAC,IAAI,CAAC;qBACxC;yBAAM,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,KAAK,mEAAe,CAAC,OAAO,EAAE;wBAC/D,MAAM,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC;wBACjD,4DAA4D;wBAC5D,MAAM,CAAC,6BAA6B,IAAI,IAAI,CAAC,6BAA6B,CAAC;wBAC3E,4DAA4D;wBAC5D,eAAe,GAAG,mEAAe,CAAC,OAAO,CAAC;qBAC3C;yBAAM,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,KAAK,mEAAe,CAAC,MAAM,EAAE;wBAC9D,eAAe,GAAG,mEAAe,CAAC,MAAM,CAAC;wBACzC,MAAM,CAAC,yBAAyB,IAAI,IAAI,CAAC,6BAA6B,CAAC;wBACvE,MAAM,CAAC,YAAY,IAAI,IAAI,CAAC,gBAAgB,CAAC;qBAC9C;yBAAM;wBACL,+BAA+B,EAAE,CAAC;wBAClC,MAAM,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;wBAC5B,8BAA8B;wBAC9B,6CAA6C;wBAC7C,IAAI;qBACL;iBACF;qBAAM;oBACL,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;wBAClC,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;qBAC9B;iBACF;gBAID,IAAI,IAAI,IAAI,OAAO,IAAI,CAAC,iBAAiB,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACxE,MAAM,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC;iBACpD;qBAAM;oBACL,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE;wBACxB,MAAM,CAAC,iBAAiB,GAAG,IAAI,CAAC,qBAAqB,CAAC;qBACvD;iBACF;gBAED,IAAI,IAAI,IAAI,OAAO,IAAI,CAAC,cAAc,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACrE,MAAM,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC;iBAC9C;qBAAM;oBACL,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE;wBACxB,MAAM,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC;qBACjD;iBACF;gBAED,IAAI,IAAI,IAAI,OAAO,IAAI,CAAC,wBAAwB,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBAC/E,MAAM,CAAC,wBAAwB,IAAI,IAAI,CAAC,wBAAwB,CAAC;iBAClE;qBAAM;oBACL,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE;wBACxB,MAAM,CAAC,wBAAwB,GAAG,IAAI,CAAC,4BAA4B,CAAC;qBACrE;iBACF;gBAED,IAAI,IAAI,IAAI,OAAO,IAAI,CAAC,aAAa,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACpE,MAAM,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC;iBAC5C;qBAAM;oBACL,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE;wBACxB,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC;qBAC/C;iBACF;gBACD,IAAI,MAAM,CAAC,cAAc,KAAK,CAAC,IAAI,MAAM,CAAC,aAAa,GAAG,CAAC,EAAE;oBAC3D,MAAM,CAAC,WAAW,GAAG,GAAG,CAAC;iBAC1B;qBAAM;oBACL,IAAM,eAAe,GAAG,CAAC,MAAM,CAAC,aAAa,GAAG,MAAM,CAAC,cAAc,CAAC,GAAG,GAAG,CAAC;oBAC7E,MAAM,CAAC,WAAW,GAAG,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC;iBACnE;gBAED,eAAe;gBACf,8DAA8D;gBAC9D,yBAAyB;gBACzB,WAAW;gBACX,sBAAsB;gBACtB,IAAI;gBACJ,cAAc;gBACd,6DAA6D;gBAC7D,gDAAgD;gBAChD,oEAAoE;gBACpE,2CAA2C;gBAC3C,UAAU;gBACV,eAAe;gBACf,yCAAyC;gBACzC,QAAQ;gBACR,uEAAuE;gBACvE,8BAA8B;gBAC9B,aAAa;gBACb,uCAAuC;gBACvC,MAAM;gBACN,IAAI;gBACJ,sBAAsB;gBACtB,8DAA8D;gBAC9D,yBAAyB;gBACzB,WAAW;gBACX,sBAAsB;gBACtB,IAAI;gBACJ,cAAc;gBACd,6DAA6D;gBAC7D,uDAAuD;gBACvD,kFAAkF;gBAClF,yDAAyD;gBACzD,UAAU;gBACV,eAAe;gBACf,uDAAuD;gBACvD,QAAQ;gBACR,uEAAuE;gBACvE,qCAAqC;gBACrC,aAAa;gBACb,qDAAqD;gBACrD,MAAM;gBACN,IAAI;gBACJ,kBAAkB;gBAClB,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,KAAK,mEAAe,CAAC,IAAI,EAAE;oBACrD,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;iBACrB;qBAAM;oBACL,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;iBAClB;gBACD,IAAI,IAAI,EAAE;oBACR,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,KAAK,mEAAe,CAAC,MAAM,EAAE;wBACvD,IAAI,IAAI,CAAC,WAAW,EAAE;4BACpB,2BAA2B,EAAE,CAAC;yBAC/B;wBACD,gCAAgC,EAAE,CAAC;wBACnC,IAAI,KAAK,CAAC,MAAM,KAAK,gCAAgC,EAAE;4BACrD,IAAI,2BAA2B,KAAK,gCAAgC,EAAE;gCACpE,MAAM,CAAC,sBAAsB,GAAG,SAAS,CAAC,GAAG,CAAC;6BAC/C;iCAAM;gCACL,MAAM,CAAC,sBAAsB,GAAG,2BAA2B,GAAG,GAAG,GAAG,SAAS,CAAC,EAAE,GAAG,GAAG,GAAG,gCAAgC,CAAC;6BAC3H;yBACF;qBACF;yBAAM;wBACL,MAAM,CAAC,sBAAsB,GAAG,IAAI,CAAC;qBACtC;iBACF;gBAED,kCAAkC;gBAClC,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,KAAK,mEAAe,CAAC,IAAI,EAAE;oBACrD,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;iBACrB;qBAAM;oBACL,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;iBAClB;gBACD,IAAI,IAAI,EAAE;oBACR,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,KAAK,mEAAe,CAAC,MAAM,EAAE;wBACvD,IAAI,IAAI,CAAC,cAAc,KAAK,IAAI,EAAE;4BAChC,iBAAiB,EAAE,CAAC;yBACrB;wBACD,gBAAgB,EAAE,CAAC;wBACnB,IAAI,KAAK,CAAC,MAAM,KAAK,gBAAgB,EAAE;4BACrC,IAAI,iBAAiB,KAAK,gBAAgB,EAAE;gCAC1C,MAAM,CAAC,aAAa,GAAG,SAAS,CAAC,GAAG,CAAC;6BACtC;iCAAM;gCACL,MAAM,CAAC,aAAa,GAAG,iBAAiB,GAAG,GAAG,GAAG,SAAS,CAAC,EAAE,GAAG,GAAG,GAAG,gBAAgB,CAAC;6BACxF;yBACF;qBACF;yBAAM;wBACL,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC;qBAC7B;iBACF;gBACD,kBAAkB;gBAClB,8DAA8D;gBAC9D,yBAAyB;gBACzB,WAAW;gBACX,sBAAsB;gBACtB,IAAI;gBACJ,cAAc;gBACd,6DAA6D;gBAC7D,mDAAmD;gBACnD,0EAA0E;gBAC1E,iDAAiD;gBACjD,UAAU;gBACV,eAAe;gBACf,+CAA+C;gBAC/C,QAAQ;gBACR,uEAAuE;gBACvE,iCAAiC;gBACjC,aAAa;gBACb,6CAA6C;gBAC7C,MAAM;gBACN,IAAI;gBACJ,oBAAoB;gBACpB,8DAA8D;gBAC9D,yBAAyB;gBACzB,WAAW;gBACX,sBAAsB;gBACtB,IAAI;gBACJ,cAAc;gBACd,6DAA6D;gBAC7D,oDAAoD;gBACpD,4EAA4E;gBAC5E,mDAAmD;gBACnD,UAAU;gBACV,eAAe;gBACf,iDAAiD;gBACjD,QAAQ;gBACR,uEAAuE;gBACvE,kCAAkC;gBAClC,aAAa;gBACb,+CAA+C;gBAC/C,MAAM;gBACN,IAAI;aACL;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,eAAe,KAAK,mEAAe,CAAC,IAAI,EAAE;YAC5C,MAAM,CAAC,UAAU,GAAG,CAAC,MAAM,CAAC,UAAU,GAAG,eAAe,CAAC,CAAC;YAC1D,MAAM,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,+BAA+B,CAAC,CAAC;SAC3D;aAAM,IAAI,eAAe,KAAK,mEAAe,CAAC,OAAO,EAAE;YACtD,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,wBAAwB,GAAG,MAAM,CAAC,wBAAwB,CAAC;YACtF,MAAM,CAAC,EAAE,GAAG,MAAM,CAAC,gBAAgB,GAAG,MAAM,CAAC,6BAA6B,CAAC;SAC5E;aAAM,IAAI,eAAe,KAAK,mEAAe,CAAC,MAAM,EAAE;YACrD,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,oBAAoB,GAAG,MAAM,CAAC,oBAAoB,CAAC;YAC9E,MAAM,CAAC,EAAE,GAAG,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC,yBAAyB,CAAC;SACpE;aAAM;SACN;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,4DAAuB,GAAvB;QAAA,iBASC;QARC,IAAI,CAAC,wBAAwB,CAAC,qBAAqB,EAAE;aAClD,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;aACnC,SAAS,CAAC,cAAI;YACb,IAAI,IAAI,EAAE;gBACR,KAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;gBAC/B,KAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;aAC7B;QACH,CAAC,CAAC,CAAC;IACP,CAAC;IAED,4DAAuB,GAAvB;QACE,OAAO,IAAI,CAAC;IACd,CAAC;IAMD,gDAAW,GAAX;QACE,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;QAC1B,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC;IAChC,CAAC;;gBAriBoC,iEAAe;gBAChB,oFAAwB;gBACjC,wEAAe;gBACjB,mEAAa;gBACT,sEAAiB;gBACV,yEAAuB;gBACvC,uDAAS;;IAX4B;QAAxD,+DAAS,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,wDAAU,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;wEAAS,wDAAU;8DAAC;IACV;QAAjE,+DAAS,CAAC,iBAAiB,EAAE,EAAE,IAAI,EAAE,wDAAU,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;wEAAkB,wDAAU;uEAAC;IAvBnF,0BAA0B;QANtC,+DAAS,CAAC;YACT,QAAQ,EAAE,yBAAyB;YACnC,oQAAkD;YAClD,SAAS,EAAE,CAAC,qEAAmB,EAAE,oFAAwB,CAAC;YAC1D,aAAa,EAAE,+DAAiB,CAAC,IAAI;SACtC,CAAC;+EA4BqC,iEAAe;YAChB,oFAAwB;YACjC,wEAAe;YACjB,mEAAa;YACT,sEAAiB;YACV,yEAAuB;YACvC,uDAAS;OAjClB,0BAA0B,CAkkBtC;IAAD,iCAAC;CAAA;AAlkBsC;;;;;;;;;;;;;;;;;;;;;;;ACtCE;AACM;AAEsC;AACT;AAC7B;AAU/C;IAAA;IAAuC,CAAC;IAA3B,uBAAuB;QARnC,8DAAQ,CAAC;YACR,YAAY,EAAE,CAAC,wFAA0B,CAAC;YAC1C,OAAO,EAAE;gBACP,4DAAY;gBACZ,iGAA8B;gBAC9B,4DAAY,CAAC,cAAc,CAAC,EAAE,CAAC;aAChC;SACF,CAAC;OACW,uBAAuB,CAAI;IAAD,8BAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;ACfO;AAC0B;AAChC;AAEoC;AACzB;AAC+C;AAK/F;IAEE,kCACU,YAA0B,EAC1B,iBAAoC,EACrC,gBAAkC,EAClC,cAA8B;QAH7B,iBAAY,GAAZ,YAAY,CAAc;QAC1B,sBAAiB,GAAjB,iBAAiB,CAAmB;QACrC,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,mBAAc,GAAd,cAAc,CAAgB;IACnC,CAAC;IAEL,+DAA4B,GAA5B,UAA6B,QAAiB;QAA9C,iBAgBC;QAfC,OAAO,IAAI,CAAC,YAAY,CAAC,iBAAiB,EAAE,CAAC,IAAI;QAC/C,kCAAkC;QAClC,0DAAG,CAAC,kBAAQ;YACV,IAAI,QAAQ,EAAE;gBACZ,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,QAAQ,CAAC,CAAC;gBAC1C,IAAM,IAAI,GAAG,KAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,wEAAqB,CAAC,cAAc,CAAC,EACzE,QAAQ,CAAC,wEAAqB,CAAC,uBAAuB,CAAC,EACvD,QAAQ,CAAC,wEAAqB,CAAC,aAAa,CAAC,CAAC,CAAC;gBACjD,IAAM,OAAO,GAAG,KAAI,CAAC,YAAY,CAAC,sBAAsB,EAAE,CAAC;gBAC3D,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,aAAa,EAAE,KAAI,CAAC,YAAY,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC;aACnF;iBAAM;gBACL,OAAO,IAAI,CAAC;aACb;QACH,CAAC,CAAC,CACH,CAAC;IACJ,CAAC;IAED,uDAAoB,GAApB,UAAqB,QAAgB;QACnC,OAAO,IAAI,CAAC,YAAY,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;IACxD,CAAC;IAED,6CAAU,GAAV,UAAW,iBAAsB,EAAE,yBAA8B,EAAE,gBAAqB;QACtF,IAAI,kBAAkB,GAAQ,EAAE,CAAC;QACjC,IAAI,IAAI,CAAC,wBAAwB,CAAC,iBAAiB,CAAC,EAAE;YACpD,kBAAkB,GAAG,IAAI,CAAC,yBAAyB,CAAC,EAAE,CAAC,MAAM,CAAC,iBAAiB,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,CAAC;SACjH;QACD,IAAM,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,sBAAsB,EAAE,CAAC;QAC3D,IAAM,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAC/D,IAAI,IAAI,CAAC,gCAAgC,CAAC,yBAAyB,CAAC,EAAE;YACpE,OAAO,IAAI,CAAC,iCAAiC,CAAC,EAAE,CAAC,MAAM,CAAC,yBAAyB,CAAC,qBAAqB,CAAC,UAAU,CAAC,SAAS,CAAC,EAC3H,kBAAkB,EAAE,aAAa,CAAC,CAAC;SACtC;aAAM;YACL,OAAO,EAAE,CAAC;SACX;IACH,CAAC;IAED,2DAAwB,GAAxB,UAAyB,iBAAsB;QAC7C,OAAO,iBAAiB,IAAI,iBAAiB,CAAC,aAAa,IAAI,iBAAiB,CAAC,aAAa,CAAC,eAAe,CAAC;IACjH,CAAC;IAED,mEAAgC,GAAhC,UAAiC,yBAAyB;QACxD,OAAO,CAAC,yBAAyB;eAC5B,yBAAyB,CAAC,qBAAqB;eAC/C,yBAAyB,CAAC,qBAAqB,CAAC,UAAU;eAC1D,yBAAyB,CAAC,qBAAqB,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;IAC7E,CAAC;IAED,gDAAa,GAAb,UAAc,gBAAqB;QACjC,OAAO,gBAAgB;eAClB,gBAAgB,CAAC,cAAc;eAC/B,gBAAgB,CAAC,cAAc,CAAC,UAAU;eAC1C,gBAAgB,CAAC,cAAc,CAAC,UAAU,CAAC,gBAAgB;eAC3D,EAAE,CAAC,MAAM,CAAC,gBAAgB,CAAC,cAAc,CAAC,UAAU,CAAC,gBAAgB,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;IACzF,CAAC;IAED,oEAAiC,GAAjC,UAAkC,WAAkB,EAAE,kBAAuB,EAAE,aAAsB;QACnG,IAAM,OAAO,GAAU,EAAE,CAAC;QAC1B,IAAI,aAAa,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,WAAW,EAAE;YAChB,OAAO;SACR;QACD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,WAAW,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YACvD,IAAM,OAAO,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;YACnC,IAAI,OAAO,CAAC,cAAc,KAAK,kEAAe,CAAC,OAAO,EAAE;gBACtD,OAAO,CAAC,SAAS,GAAG,aAAa,CAAC,YAAY,CAAC;gBAC/C,OAAO,CAAC,UAAU,GAAG,aAAa,CAAC,aAAa,CAAC;gBACjD,OAAO,CAAC,YAAY,GAAG,CAAC,oEAAiB,EAAE,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,aAAa,CAAC,CAAC;gBACtF,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACtB,OAAO,CAAC,UAAU,CAAC,kBAAkB,GAAG,CAAC,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,UAAU,CAAC,kBAAkB,CAAC;oBACnG,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC1D,IAAM,aAAa,GAAG,IAAI,CAAC,wBAAwB,CAAC,OAAO,EACzD,OAAO,CAAC,UAAU,CAAC,kBAAkB,EAAE,kBAAkB,EAAE,aAAa,CAAC,CAAC;gBAC5E,OAAO,CAAC,IAAI,OAAZ,OAAO,iDAAS,aAAa,GAAE;aAChC;iBAAM,IAAI,OAAO,CAAC,cAAc,KAAK,kEAAe,CAAC,MAAM,EAAE;gBAC5D,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC,aAAa,CAAC;gBAC3C,OAAO,CAAC,YAAY,GAAG,CAAC,oEAAiB,EAAE,OAAO,CAAC,aAAa,CAAC,CAAC;gBAClE,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACtB,aAAa,GAAG,OAAO,CAAC;aACzB;iBAAM,IAAI,OAAO,CAAC,cAAc,KAAK,kEAAe,CAAC,SAAS,EAAE;gBAC/D,OAAO,CAAC,YAAY,GAAG,CAAC,oEAAiB,CAAC,CAAC;gBAC3C,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACvB;SACF;QACD,OAAO,OAAO,CAAC;IACjB,CAAC;IAED,4DAAyB,GAAzB,UAA0B,eAAsB;QAC9C,IAAM,KAAK,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,eAAe,EAAE;YACpB,OAAO;SACR;QACD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,eAAe,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YAC3D,IAAM,OAAO,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC;YACvC,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC;SACzC;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED,2DAAwB,GAAxB,UAAyB,OAAY,EAAE,OAAc,EAAE,kBAAuB,EAAE,aAAsB;QACpG,IAAM,OAAO,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO;SACR;QACD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YACnD,IAAM,OAAO,GAAG,mDACX,OAAO,CAAC,KAAK,CAAC,CAClB,CAAC;YACF,OAAO,CAAC,cAAc,GAAG,kEAAe,CAAC,IAAI,CAAC;YAC9C,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC,aAAa,CAAC;YAC5C,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC,YAAY,CAAC;YAC1C,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;YACtC,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;YACxC,OAAO,CAAC,UAAU,GAAG,CAAC,aAAa,CAAC;YACpC,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;YACxC,OAAO,CAAC,EAAE,GAAG,OAAO,CAAC,cAAc,CAAC;YACpC,MAAM,CAAC,MAAM,CAAC,OAAO,EAAE,kBAAkB,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;YACnE,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;YACrE,OAAO,CAAC,YAAY,GAAG,CAAC,oEAAiB,EAAE,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,WAAW,EAAE,OAAO,CAAC,EAAE,CAAC,CAAC;YAChG,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACtB,IAAI,OAAO,CAAC,aAAa,EAAE;gBACzB,IAAM,gBAAgB,GAAG,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC;gBAC9D,OAAO,CAAC,IAAI,OAAZ,OAAO,iDAAS,gBAAgB,GAAE;aACnC;SACF;QACD,OAAO,OAAO,CAAC;IACjB,CAAC;IAED,oDAAiB,GAAjB,UAAkB,iBAAiB;QACjC,IAAI,iBAAiB,IAAI,iBAAiB,CAAC,aAAa,EAAE;YACxD,OAAO,EAAE,CAAC,MAAM,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,cAAI,IAAI,WAAI,CAAC,WAAW,EAAhB,CAAgB,CAAC,CAAC,IAAI,EAAE,CAAC;SACxF;aAAM;YACL,OAAO,EAAE,CAAC;SACX;IACH,CAAC;IAED,yDAAsB,GAAtB,UAAuB,OAAY;QACjC,IAAM,gBAAgB,GAAG,EAAE,CAAC;QAC5B,IAAM,OAAO,GAAG,OAAO,IAAI,OAAO,CAAC,aAAa,IAAI,OAAO,CAAC,aAAa,CAAC,YAAY;YACpF,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QACvD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YACnD,IAAM,OAAO,GAAG,mDAAK,OAAO,CAAC,KAAK,CAAC,CAAE,CAAC;YACtC,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC,cAAc,CAAC;YACzC,OAAO,CAAC,sBAAsB,GAAG,OAAO,CAAC,aAAa,CAAC;YACvD,OAAO,CAAC,sBAAsB,GAAG,OAAO,CAAC,cAAc,CAAC;YACxD,OAAO,CAAC,qBAAqB,GAAG,OAAO,CAAC,YAAY,CAAC;YACrD,OAAO,CAAC,0BAA0B,GAAG,OAAO,CAAC,iBAAiB,CAAC;YAC/D,OAAO,CAAC,qBAAqB,GAAG,OAAO,CAAC,iBAAiB,CAAC;YAC1D,OAAO,CAAC,cAAc,GAAG,OAAO,CAAC,UAAU,CAAC;YAC5C,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;YACxC,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,EAAE,CAAC;YAC5B,OAAO,CAAC,EAAE,GAAG,OAAO,CAAC,cAAc,CAAC;YACpC,OAAO,CAAC,qBAAqB,GAAG,OAAO,CAAC,iBAAiB,CAAC;YAC1D,OAAO,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,CAAC;YACpD,OAAO,CAAC,iBAAiB,GAAG,OAAO,CAAC,iBAAiB,CAAC;YACtD,OAAO,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;YACpC,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;YAC5B,OAAO,CAAC,UAAU,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC;YAEzC,OAAO,CAAC,kBAAkB,GAAG,OAAO,CAAC,cAAc,CAAC;YACpD,OAAO,CAAC,4BAA4B,GAAG,OAAO,CAAC,wBAAwB,CAAC;YAExE,OAAO,CAAC,iBAAiB,GAAG,OAAO,CAAC,aAAa,CAAC;YAClD,OAAO,CAAC,eAAe,GAAG,OAAO,CAAC,WAAW,CAAC;YAE9C,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC,OAAO,CAAC;YACtC,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC;YACpC,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;YACxC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;YACtC,OAAO,CAAC,YAAY,GAAG,CAAC,oEAAiB,EAAE,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,EAAE;gBACtF,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC9D,OAAO,CAAC,cAAc,GAAG,kEAAe,CAAC,MAAM,CAAC;YAChD,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAChC;QACD,OAAO,gBAAgB,CAAC;IAC1B,CAAC;IAED,wDAAqB,GAArB;QACE,OAAO,IAAI,CAAC,iBAAiB,CAAC,qBAAqB,CAAC;IACtD,CAAC;IAED,qDAAkB,GAAlB,UAAmB,QAAgB;QACjC,IAAM,kBAAkB,GAAG,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,CAChE,QAAQ,CACT,CAAC;QACF,IAAI,aAAa,GAAQ,EAAE,CAAC;QAC5B,IAAI,kBAAkB,EAAE;YACtB,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,yBAAyB,CAC3D,kBAAkB,CAAC,eAAe,CACnC,CAAC;SACH;QACD,OAAO,aAAa,CAAC,KAAK,CAAC;IAC7B,CAAC;;gBAtMuB,2DAAY;gBACP,oFAAiB;gBACnB,kEAAgB;gBAClB,gEAAc;;IAN5B,wBAAwB;QADpC,gEAAU,EAAE;+EAIa,2DAAY;YACP,oFAAiB;YACnB,kEAAgB;YAClB,gEAAc;OAN5B,wBAAwB,CA0MpC;IAAD,+BAAC;CAAA;AA1MoC;;;;;;;;;;;;;;;;;;;;;;ACXM;AACe;AAEF;AACa;AACwC;AAK7G;IAIE,yBAAoB,eAAkC,EAC7C,gBAAkC,EAClC,cAA8B;QAFnB,oBAAe,GAAf,eAAe,CAAmB;QAC7C,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,mBAAc,GAAd,cAAc,CAAgB;QAiXhC,kBAAa,GAAG,UAAC,MAA4B;YAClD,IAAM,QAAQ,GAAG,IAAI,wDAAQ,CAAC,OAAO,CAAC,CAAC;YACvC,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,IAAI,MAAM,CAAC,KAAK,YAAY,IAAI,EAAE;gBAChC,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC;aACrB;iBAAM;gBACL,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,MAAM,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;aAC1D;YACD,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,EAAE;gBAC1C,OAAO,EAAE,CAAC;aACX;YAED,OAAO,QAAQ,CAAC,SAAS,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;QACjD,CAAC;QAEM,0BAAqB,GAAG,UAAC,MAA4B;YAC1D,IAAM,UAAU,GAAG,IAAI,2DAAW,CAAC,OAAO,CAAC,CAAC;YAC5C,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;gBACvB,OAAO,EAAE,CAAC;aACX;YAED,OAAO,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QACrD,CAAC;QAEM,2BAAsB,GAAG,UAAC,MAAM;YACrC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;YACxC,IAAI,MAAM,CAAC,IAAI,CAAC,iBAAiB,IAAI,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,aAAa,EAAE;gBAChF,OAAO,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,cAAI,IAAI,WAAI,CAAC,WAAW,EAAhB,CAAgB,CAAC,CAAC,IAAI,EAAE,CAAC;aACpG;iBAAM;gBACL,OAAO,EAAE,CAAC;aACX;QACH,CAAC;QAEM,wBAAmB,GAAG,UAAC,MAA4B;YACxD,IAAM,UAAU,GAAG,IAAI,2DAAW,CAAC,OAAO,CAAC,CAAC;YAC5C,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;gBACvB,OAAO,EAAE,CAAC;aACX;YAED,OAAO,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QACrD,CAAC;QAEM,4BAAuB,GAAG,UAAC,MAA4B;YAC5D,IAAM,UAAU,GAAG,IAAI,2DAAW,CAAC,OAAO,CAAC,CAAC;YAC5C,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;gBACvB,OAAO,EAAE,CAAC;aACX;YAED,OAAO,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,GAAG,GAAG,CAAC;QAC3D,CAAC;QA6BM,iCAA4B,GAAG,UAAC,MAAM;YAC3C,IAAI,MAAM,CAAC,IAAI,CAAC,cAAc,KAAK,kEAAe,CAAC,OAAO,EAAE;gBAC1D,OAAO,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC;aACvC;iBAAM;gBACL,OAAO,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;aAChC;QACH,CAAC;IAncD,CAAC;IAED,4CAAkB,GAAlB;QAAA,iBAqBC;QApBC,OAAO;YACL,UAAU,EAAE,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,OAAO;YACvD,QAAQ,EAAE,IAAI;YACd,kBAAkB,EAAE;gBAClB,aAAa,EAAE,IAAI;aACpB;YACD,SAAS,EAAE,UAAC,MAAM;gBAChB,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE;oBAC1B,OAAO,EAAE,cAAc,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,CAAC;iBACzD;qBAAM;oBACL,OAAO,IAAI,CAAC;oBACZ,mCAAmC;iBACpC;YACH,CAAC;YACD,iBAAiB,EAAE,UAAC,MAAM;gBACxB,KAAI,CAAC,uBAAuB,EAAE,CAAC;YACjC,CAAC;YACD,MAAM,EAAE,IAAI;YACZ,KAAK,EAAE,GAAG;SACX,CAAC;IACJ,CAAC;IAED,0CAAgB,GAAhB,UAAiB,iBAAiB;QAChC,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;IAC7C,CAAC;IAED,sCAAY,GAAZ;QAAA,iBAuTC;QAtTC,IAAM,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC;QAC5D,IAAM,OAAO,GAAG,EAAE,CAAC;QACnB,UAAU;QACV,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,YAAY;SACpB,EAAE,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC;QAE5B,YAAY;QACZ,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,MAAM;SACd,EAAE,eAAe,CAAC,SAAS,CAAC,CAAC,CAAC;QAE/B,cAAc;QACd,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,YAAY;YACnB,QAAQ,EAAE,IAAI;SACf,EAAE,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC;QAC5B,eAAe;QACf,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,aAAa;YACpB,QAAQ,EAAE,IAAI;SACf,EAAE,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC;QAE7B,oBAAoB;QACpB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,kBAAkB;SAC1B,EAAE,eAAe,CAAC,iBAAiB,CAAC,CAAC,CAAC;QAEvC,WAAW;QACX,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,UAAU;SAElB,EAAE,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC;QAE7B,aAAa;QACb,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,UAAU;YACjB,cAAc,EAAE,IAAI,CAAC,aAAa;SACnC,EAAE,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC;QAEhC,sBAAsB;QACtB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,aAAa;YACpB,WAAW,EAAG,IAAI,CAAC,4BAA4B;YAC/C,cAAc,EAAE,IAAI,CAAC,aAAa;SACnC,EAAE,eAAe,CAAC,oBAAoB,CAAC,CAAC,CAAC;QAE1C,kBAAkB;QAElB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,iBAAiB;YACxB,cAAc,EAAE,IAAI,CAAC,aAAa;SACnC,EAAE,eAAe,CAAC,eAAe,CAAC,CAAC,CAAC;QAErC,uBAAuB;QACvB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,KAAK;YACZ,cAAc,EAAE,IAAI,CAAC,aAAa;SACnC,EAAE,eAAe,CAAC,qBAAqB,CAAC,CAAC,CAAC;QAE3C,sBAAsB;QACtB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,wBAAwB;YAC/B,YAAY,EAAE,UAAC,MAAM;gBACnB,IAAI,MAAM,CAAC,IAAI,CAAC,cAAc,KAAK,kEAAe,CAAC,MAAM,EAAE;oBACzD,IAAI,MAAM,CAAC,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;wBACpC,OAAO,qEAAkB,CAAC;qBAC3B;yBAAM;wBACL,OAAO,sEAAmB,CAAC;qBAC5B;iBACF;qBAAM;oBACL,OAAO,MAAM,CAAC,KAAK,CAAC;iBACrB;YACH,CAAC;YACD,OAAO,EAAE,UAAC,MAAM;gBACd,IAAI,MAAM,CAAC,IAAI,CAAC,cAAc,KAAK,kEAAe,CAAC,MAAM,EAAE;oBACzD,IAAI,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE;wBAC3B,OAAO,eAAe,CAAC,gCAAgC,CAAC;qBACzD;yBAAM;wBACL,OAAO,eAAe,CAAC,oCAAoC,CAAC;qBAC7D;iBACF;gBACD,OAAO,MAAM,CAAC,KAAK,CAAC;YACtB,CAAC;YACD,sDAAsD;SACvD,EAAE,eAAe,CAAC,oBAAoB,CAAC,CAAC,CAAC;QAE1C,qBAAqB;QACrB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,eAAe;YACtB,YAAY,EAAE,UAAC,MAAM;gBACnB,IAAI,MAAM,CAAC,IAAI,CAAC,cAAc,KAAK,kEAAe,CAAC,MAAM,EAAE;oBACzD,IAAI,MAAM,CAAC,IAAI,CAAC,cAAc,KAAK,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE;wBACjE,OAAO,qEAAkB,CAAC;qBAC3B;yBAAM,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE;wBACjC,OAAO,sEAAmB,CAAC;qBAC5B;yBAAM;wBACL,OAAO,IAAI,CAAC;qBACb;iBACF;qBAAM;oBACL,OAAO,MAAM,CAAC,KAAK,CAAC;iBACrB;YACH,CAAC;YACD,OAAO,EAAE,UAAC,MAAM;gBACd,IAAI,MAAM,CAAC,IAAI,CAAC,cAAc,KAAK,kEAAe,CAAC,MAAM,EAAE;oBACzD,IAAI,MAAM,CAAC,IAAI,CAAC,cAAc,KAAK,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE;wBACjE,OAAO,eAAe,CAAC,0BAA0B,CAAC;qBACnD;yBAAM,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE;wBACjC,OAAO,eAAe,CAAC,4BAA4B,CAAC;qBACrD;yBAAM;wBACL,OAAO,IAAI,CAAC;qBACb;iBACF;gBACD,OAAO,MAAM,CAAC,KAAK,CAAC;YACtB,CAAC;SACF,EAAE,eAAe,CAAC,mBAAmB,CAAC,CAAC,CAAC;QAEzC,WAAW;QACX,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CACzC;YACE,KAAK,EAAE,cAAc;YACrB,cAAc,EAAE,IAAI,CAAC,aAAa;SACnC,EAAE,eAAe,CAAC,uBAAuB,CAAC,CAAC,CAAC;QAE/C,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CACzC;YACE,KAAK,EAAE,SAAS;SACjB,EAAE,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC;QAElC,iBAAiB;QACjB,IAAM,qBAAqB,GAAG;YAC5B,IAAI,CAAC,yBAAyB,CAC5B;gBACE,KAAK,EAAE,eAAe;aACvB,EAAE,eAAe,CAAC,KAAK,CAAC;YAC3B,IAAI,CAAC,yBAAyB,CAC5B;gBACE,KAAK,EAAE,gBAAgB;gBACvB,SAAS,EAAE,UAAC,MAAM;oBAChB,IAAI,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE;wBACpB,OAAO,UAAU,CAAC;qBACnB;yBAAM;wBACL,OAAO,IAAI,CAAC;qBACb;gBACH,CAAC;aACF,EAAE,eAAe,CAAC,YAAY,CAAC;YAClC,IAAI,CAAC,yBAAyB,CAAC;gBAC7B,KAAK,EAAE,cAAc;aACtB,EAAE,eAAe,CAAC,SAAS,CAAC;YAC7B,IAAI,CAAC,yBAAyB,CAAC;gBAC7B,KAAK,EAAE,mBAAmB;aAC3B,EAAE,eAAe,CAAC,MAAM,CAAC;YAC1B,IAAI,CAAC,yBAAyB,CAAC;gBAC7B,KAAK,EAAE,mBAAmB;gBAC1B,cAAc,EAAE,IAAI,CAAC,uBAAuB;aAC7C,EAAE,eAAe,CAAC,0BAA0B,CAAC;YAC9C,IAAI,CAAC,yBAAyB,CAAC;gBAC7B,KAAK,EAAE,YAAY;gBACnB,cAAc,EAAE,UAAC,MAA4B;oBAC3C,IAAM,UAAU,GAAG,IAAI,2DAAW,CAAC,OAAO,CAAC,CAAC;oBAC5C,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;wBACvB,OAAO,EAAE,CAAC;qBACX;oBACD,OAAO,UAAU,CAAC,SAAS,CACzB,CAAC,KAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,GAAG,KAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;gBAC9G,CAAC;aACF,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;gBAC3B,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,EAAE,eAAe,CAAC,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,SAAS,CAAE;SACnI,CAAC;QAEF,qBAAqB;QACrB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CACzC;YACE,KAAK,EAAE,EAAE;YACT,QAAQ,EAAE,qBAAqB;YAC/B,WAAW,EAAE,oBAAoB;YACjC,aAAa,EAAE,IAAI;SACpB,EAAE,eAAe,CAAC,qBAAqB,CAAC,CAAC,CAAC;QAE7C,IAAM,yBAAyB,GAAG;YAChC,IAAI,CAAC,yBAAyB,CAC5B;gBACE,KAAK,EAAE,mBAAmB;aAC3B,EAAE,eAAe,CAAC,aAAa,CAAC;YACnC,IAAI,CAAC,yBAAyB,CAC5B;gBACE,KAAK,EAAE,YAAY;aACpB,EAAE,eAAe,CAAC,WAAW,CAAC;YACjC,IAAI,CAAC,yBAAyB,CAAC;gBAC7B,KAAK,EAAE,gBAAgB;aACxB,EAAE,eAAe,CAAC,oBAAoB,CAAC;YACxC,IAAI,CAAC,yBAAyB,CAAC;gBAC7B,KAAK,EAAE,IAAI;gBACX,8CAA8C;gBAC9C,6BAA6B;gBAC7B,oHAAoH;gBACpH,KAAK;gBACL,cAAc,EAAE,UAAC,MAA4B;oBAC3C,IAAM,UAAU,GAAG,IAAI,2DAAW,CAAC,OAAO,CAAC,CAAC;oBAC5C,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;wBACvB,OAAO,EAAE,CAAC;qBACX;oBACD,OAAO,UAAU,CAAC,SAAS,CACzB,CAAC,KAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,GAAG,KAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;gBAC9G,CAAC;gBACH,wEAAwE;aACvE,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;gBAC3B,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,EAAE,eAAe,CAAC,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,SAAS,CAAE;YACpI,gCAAgC;SAC/B,CAAC;QACF,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CACzC;YACE,KAAK,EAAE,EAAE;YACT,QAAQ,EAAE,yBAAyB;YACnC,WAAW,EAAE,oBAAoB;YACjC,aAAa,EAAE,IAAI;SACpB,EAAE,eAAe,CAAC,yBAAyB,CAAC,CAAC,CAAC;QAEjD,sBAAsB;QACtB,IAAM,0BAA0B,GAAG;YACjC,IAAI,CAAC,yBAAyB,CAC5B;gBACE,KAAK,EAAE,kBAAkB;gBACzB,cAAc,EAAE,IAAI,CAAC,aAAa;aACnC,EAAE,eAAe,CAAC,QAAQ,CAAC;YAC9B,IAAI,CAAC,yBAAyB,CAC5B;gBACE,KAAK,EAAE,kBAAkB;gBACzB,cAAc,EAAE,IAAI,CAAC,aAAa;aACnC,EAAE,eAAe,CAAC,UAAU,CAAC;YAChC,IAAI,CAAC,yBAAyB,CAAC;gBAC7B,KAAK,EAAE,YAAY;gBACnB,cAAc,EAAE,IAAI,CAAC,aAAa;aACnC,EAAE,eAAe,CAAC,eAAe,CAAC;YACnC,IAAI,CAAC,yBAAyB,CAAC;gBAC7B,KAAK,EAAE,YAAY;gBACnB,cAAc,EAAE,IAAI,CAAC,aAAa;aACnC,EAAE,eAAe,CAAC,aAAa,CAAC;YACjC,IAAI,CAAC,yBAAyB,CAAC;gBAC7B,KAAK,EAAE,YAAY;aACpB,EAAE,eAAe,CAAC,WAAW,CAAC;YAC/B,IAAI,CAAC,yBAAyB,CAAC;gBAC7B,KAAK,EAAE,eAAe;gBACtB,YAAY,EAAE,UAAC,MAAM;oBACjB,IAAI,MAAM,CAAC,KAAK,KAAK,IAAI,EAAE;wBACzB,OAAO,sEAAmB,CAAC;qBAC5B;yBAAM,IAAI,MAAM,CAAC,KAAK,KAAK,KAAK,EAAE;wBACjC,OAAO,qEAAkB,CAAC;qBAC3B;yBAAM;wBACL,OAAO,IAAI,CAAC;qBACb;gBACL,CAAC;gBACD,OAAO,EAAE,UAAC,MAAM;oBACd,IAAI,MAAM,CAAC,KAAK,KAAK,IAAI,EAAE;wBACzB,OAAO,eAAe,CAAC,uCAAuC,CAAC;qBAChE;yBAAM,IAAI,MAAM,CAAC,KAAK,KAAK,KAAK,EAAE;wBACjC,OAAO,eAAe,CAAC,mCAAmC,CAAC;qBAC5D;yBAAM;wBACL,OAAO,MAAM,CAAC,KAAK,CAAC;qBACrB;gBACH,CAAC;aACF,EAAE,eAAe,CAAC,WAAW,CAAC;SAChC,CAAC;QACF,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,QAAQ,EAAE,0BAA0B;YACpC,WAAW,EAAE,oBAAoB;YACjC,aAAa,EAAE,IAAI;SACpB,EAAE,eAAe,CAAC,oBAAoB,CAAC,CAAC,CAAC;QAE1C,aAAa;QACb,IAAM,iBAAiB,GAAG;YACxB,IAAI,CAAC,yBAAyB,CAC5B;gBACE,KAAK,EAAE,eAAe;aACvB,EAAE,eAAe,CAAC,QAAQ,CAAC;YAC9B,IAAI,CAAC,yBAAyB,CAAC;gBAC7B,KAAK,EAAE,aAAa;gBACpB,cAAc,EAAE,IAAI,CAAC,uBAAuB;aAC7C,EAAE,eAAe,CAAC,aAAa,CAAC;SAClC,CAAC;QACF,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CACzC;YACE,KAAK,EAAE,EAAE;YACT,QAAQ,EAAE,iBAAiB;YAC3B,WAAW,EAAE,oBAAoB;YACjC,aAAa,EAAE,IAAI;SACpB,EAAE,eAAe,CAAC,SAAS,CAAC,CAAC,CAAC;QAEjC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CACzC;YACE,KAAK,EAAE,gBAAgB;SACxB,EAAE,eAAe,CAAC,mBAAmB,CAAC,CAAC,CAAC;QAC3C,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,aAAa;YACpB,cAAc,EAAE,IAAI,CAAC,aAAa;SACnC,EAAE,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC;QAC9B,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,cAAc;YACrB,cAAc,EAAE,IAAI,CAAC,aAAa;SACnC,EAAE,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC;QAC9B,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;YAC1C,KAAK,EAAE,QAAQ;SAChB,EAAE,eAAe,CAAC,WAAW,CAAC,CAAC,CAAC;QACjC,gDAAgD;QAChD,oBAAoB;QACpB,6CAA6C;QAC7C,gDAAgD;QAChD,0BAA0B;QAC1B,8BAA8B;QAC9B,OAAO,OAAO,CAAC;IACjB,CAAC;IAED,mDAAyB,GAAzB,UAA0B,MAAW,EAAE,aAAqB;QAC1D,OAAO,MAAM,CAAC,MAAM,CAAC;YACnB,UAAU,EAAE,aAAa;YACzB,aAAa,EAAE,aAAa;YAC5B,OAAO,EAAE,aAAa;YACtB,aAAa,EAAE,aAAa;YAC5B,KAAK,EAAE,GAAG;YACV,WAAW,EAAE,IAAI;YACjB,OAAO,EAAE,UAAU,MAAM;gBACvB,OAAO,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACxE,CAAC;SACF,EAAE,MAAM,CAAC,CAAC;IACb,CAAC;IAED,6CAAmB,GAAnB;QACE,OAAO;YACL,KAAK,EAAE,GAAG;YACV,QAAQ,EAAE,KAAK;YACf,QAAQ,EAAE,CAAC,eAAe,EAAE,gBAAgB,CAAC;YAC7C,YAAY,EAAE,EAAE,kBAAkB,EAAE,IAAI,EAAE;YAC1C,SAAS,EAAE,EAAE,YAAY,EAAE,QAAQ,EAAE;YACrC,UAAU,EAAE,IAAI;SACjB,CAAC;IACJ,CAAC;IAqDD,oDAA0B,GAA1B,UAA2B,eAAoB,EAAE,KAAa;QAC5D,QAAQ,KAAK,EAAE;YACb,KAAK,OAAO;gBACV,OAAO,eAAe,CAAC,KAAK,CAAC;YAC/B,KAAK,MAAM;gBACT,OAAO,eAAe,CAAC,MAAM,CAAC;YAChC,KAAK,OAAO;gBACV,OAAO,eAAe,CAAC,OAAO,CAAC;YACjC,KAAK,SAAS;gBACZ,OAAO,eAAe,CAAC,SAAS,CAAC;YACnC;gBACE,OAAO,EAAE,CAAC;SACb;IACH,CAAC;IAED,+CAAqB,GAArB;QACE,IAAM,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC;QACtD,OAAO;YACL,EAAE,EAAE,SAAS,CAAC,EAAE;YAChB,GAAG,EAAE,SAAS,CAAC,GAAG;SACnB,CAAC;IACJ,CAAC;IAED,iDAAuB,GAAvB;QACE,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;IAC5C,CAAC;;gBA/boC,sEAAiB;gBAC3B,kEAAgB;gBAClB,gEAAc;;IAN5B,eAAe;QAH3B,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;+EAKqC,sEAAiB;YAC3B,kEAAgB;YAClB,gEAAc;OAN5B,eAAe,CA4c3B;IAAD,sBAAC;CAAA;AA5c2B","file":"enrollment-details-enrollment-details-module.js","sourcesContent":["/**\n * ag-grid-enterprise - ag-Grid Enterprise Features * @version v22.1.1\n * @link http://www.ag-grid.com/\n' * @license Commercial\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar agGridCommunity = require('ag-grid-community');\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar LicenseManager = /** @class */ (function () {\n    function LicenseManager() {\n        this.watermarkMessage = undefined;\n    }\n    LicenseManager_1 = LicenseManager;\n    LicenseManager.prototype.validateLicense = function () {\n        if (agGridCommunity._.missingOrEmpty(LicenseManager_1.licenseKey)) {\n            this.outputMissingLicenseKey();\n        }\n        else if (LicenseManager_1.licenseKey.length > 32) {\n            var _a = LicenseManager_1.extractLicenseComponents(LicenseManager_1.licenseKey), md5 = _a.md5, license = _a.license, version = _a.version, isTrial = _a.isTrial;\n            if (md5 === this.md5.md5(license)) {\n                if (agGridCommunity._.exists(version) && version) {\n                    this.validateLicenseKeyForVersion(version, !!isTrial, license);\n                }\n                else {\n                    this.validateLegacyKey(license);\n                }\n            }\n            else {\n                this.outputInvalidLicenseKey();\n            }\n        }\n        else {\n            this.outputInvalidLicenseKey();\n        }\n    };\n    LicenseManager.extractExpiry = function (license) {\n        var restrictionHashed = license.substring(license.lastIndexOf('_') + 1, license.length);\n        return new Date(parseInt(LicenseManager_1.decode(restrictionHashed), 10));\n    };\n    LicenseManager.extractLicenseComponents = function (licenseKey) {\n        var hashStart = licenseKey.length - 32;\n        var md5 = licenseKey.substring(hashStart);\n        var license = licenseKey.substring(0, hashStart);\n        var _a = LicenseManager_1.extractBracketedInformation(licenseKey), version = _a[0], isTrial = _a[1];\n        return { md5: md5, license: license, version: version, isTrial: isTrial };\n    };\n    LicenseManager.prototype.getLicenseDetails = function (licenseKey) {\n        var _a = LicenseManager_1.extractLicenseComponents(licenseKey), md5 = _a.md5, license = _a.license, version = _a.version, isTrial = _a.isTrial;\n        var valid = (md5 === this.md5.md5(license));\n        var expiry = null;\n        if (valid) {\n            expiry = LicenseManager_1.extractExpiry(license);\n            valid = !isNaN(expiry.getTime());\n        }\n        return {\n            licenseKey: licenseKey,\n            valid: valid,\n            expiry: valid ? LicenseManager_1.formatDate(expiry) : null,\n            version: version ? version : 'legacy',\n            isTrial: isTrial\n        };\n    };\n    LicenseManager.prototype.isDisplayWatermark = function () {\n        return !agGridCommunity._.missingOrEmpty(this.watermarkMessage);\n    };\n    LicenseManager.prototype.getWatermarkMessage = function () {\n        return this.watermarkMessage;\n    };\n    LicenseManager.formatDate = function (date) {\n        var monthNames = [\n            'January', 'February', 'March',\n            'April', 'May', 'June', 'July',\n            'August', 'September', 'October',\n            'November', 'December'\n        ];\n        var day = date.getDate();\n        var monthIndex = date.getMonth();\n        var year = date.getFullYear();\n        return day + ' ' + monthNames[monthIndex] + ' ' + year;\n    };\n    LicenseManager.getGridReleaseDate = function () {\n        return new Date(parseInt(LicenseManager_1.decode(LicenseManager_1.RELEASE_INFORMATION), 10));\n    };\n    LicenseManager.decode = function (input) {\n        var keystr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n        var t = '';\n        var n, r, i;\n        var s, o, u, a;\n        var f = 0;\n        var e = input.replace(/[^A-Za-z0-9+/=]/g, '');\n        while (f < e.length) {\n            s = keystr.indexOf(e.charAt(f++));\n            o = keystr.indexOf(e.charAt(f++));\n            u = keystr.indexOf(e.charAt(f++));\n            a = keystr.indexOf(e.charAt(f++));\n            n = s << 2 | o >> 4;\n            r = (o & 15) << 4 | u >> 2;\n            i = (u & 3) << 6 | a;\n            t = t + String.fromCharCode(n);\n            if (u != 64) {\n                t = t + String.fromCharCode(r);\n            }\n            if (a != 64) {\n                t = t + String.fromCharCode(i);\n            }\n        }\n        t = LicenseManager_1.utf8_decode(t);\n        return t;\n    };\n    LicenseManager.utf8_decode = function (input) {\n        input = input.replace(/rn/g, 'n');\n        var t = '';\n        for (var n = 0; n < input.length; n++) {\n            var r = input.charCodeAt(n);\n            if (r < 128) {\n                t += String.fromCharCode(r);\n            }\n            else if (r > 127 && r < 2048) {\n                t += String.fromCharCode(r >> 6 | 192);\n                t += String.fromCharCode(r & 63 | 128);\n            }\n            else {\n                t += String.fromCharCode(r >> 12 | 224);\n                t += String.fromCharCode(r >> 6 & 63 | 128);\n                t += String.fromCharCode(r & 63 | 128);\n            }\n        }\n        return t;\n    };\n    LicenseManager.setLicenseKey = function (licenseKey) {\n        LicenseManager_1.licenseKey = licenseKey;\n    };\n    LicenseManager.extractBracketedInformation = function (licenseKey) {\n        var matches = licenseKey.split('[')\n            .filter(function (v) {\n            return v.indexOf(']') > -1;\n        })\n            .map(function (value) {\n            return value.split(']')[0];\n        });\n        if (!matches || matches.length === 0) {\n            return [null, null];\n        }\n        var isTrial = matches.filter(function (match) { return match === 'TRIAL'; }).length === 1;\n        var version = matches.filter(function (match) { return match.indexOf(\"v\") === 0; }).map(function (match) { return match.replace(/^v/, \"\"); })[0];\n        return [version, isTrial];\n    };\n    LicenseManager.prototype.validateLicenseKeyForVersion = function (version, isTrial, license) {\n        switch (version) {\n            case \"2\":\n                if (isTrial) {\n                    this.validateForTrial(license);\n                }\n                else {\n                    this.validateLegacyKey(license);\n                }\n                break;\n        }\n    };\n    LicenseManager.prototype.validateLegacyKey = function (license) {\n        var gridReleaseDate = LicenseManager_1.getGridReleaseDate();\n        var expiry = LicenseManager_1.extractExpiry(license);\n        var valid = false;\n        var current = false;\n        if (!isNaN(expiry.getTime())) {\n            valid = true;\n            current = (gridReleaseDate < expiry);\n        }\n        if (!valid) {\n            this.outputInvalidLicenseKey();\n        }\n        else if (!current) {\n            var formattedExpiryDate = LicenseManager_1.formatDate(expiry);\n            var formattedReleaseDate = LicenseManager_1.formatDate(gridReleaseDate);\n            this.outputIncompatibleVersion(formattedExpiryDate, formattedReleaseDate);\n        }\n    };\n    LicenseManager.prototype.validateForTrial = function (license) {\n        var expiry = LicenseManager_1.extractExpiry(license);\n        var now = new Date();\n        var valid = false;\n        var current = false;\n        if (!isNaN(expiry.getTime())) {\n            valid = true;\n            current = (expiry > now);\n        }\n        if (!valid) {\n            this.outputInvalidLicenseKey();\n        }\n        else if (!current) {\n            var formattedExpiryDate = LicenseManager_1.formatDate(expiry);\n            this.outputExpiredTrialKey(formattedExpiryDate);\n        }\n    };\n    LicenseManager.prototype.outputInvalidLicenseKey = function () {\n        console.error('*****************************************************************************************************************');\n        console.error('***************************************** ag-Grid Enterprise License ********************************************');\n        console.error('********************************************* Invalid License ***************************************************');\n        console.error('* Your license for ag-Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *');\n        console.error('*****************************************************************************************************************');\n        console.error('*****************************************************************************************************************');\n        this.watermarkMessage = \"Invalid License\";\n    };\n    LicenseManager.prototype.outputExpiredTrialKey = function (formattedExpiryDate) {\n        console.error('****************************************************************************************************************');\n        console.error('***************************************** ag-Grid Enterprise License *******************************************');\n        console.error('*****************************************   Trial Period Expired.    *******************************************');\n        console.error(\"* Your license for ag-Grid Enterprise expired on \" + formattedExpiryDate + \".                                                *\");\n        console.error('* Please email info@ag-grid.com to purchase a license.                                                         *');\n        console.error('****************************************************************************************************************');\n        console.error('****************************************************************************************************************');\n        this.watermarkMessage = \"Trial Period Expired\";\n    };\n    LicenseManager.prototype.outputMissingLicenseKey = function () {\n        console.error('****************************************************************************************************************');\n        console.error('***************************************** ag-Grid Enterprise License *******************************************');\n        console.error('****************************************** License Key Not Found ***********************************************');\n        console.error('* All ag-Grid Enterprise features are unlocked.                                                                *');\n        console.error('* This is an evaluation only version, it is not licensed for development projects intended for production.     *');\n        console.error('* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *');\n        console.error('****************************************************************************************************************');\n        console.error('****************************************************************************************************************');\n        this.watermarkMessage = \"For Trial Use Only\";\n    };\n    LicenseManager.prototype.outputIncompatibleVersion = function (formattedExpiryDate, formattedReleaseDate) {\n        console.error('****************************************************************************************************************************');\n        console.error('********************************************* ag-Grid Enterprise License ***************************************************');\n        console.error('*************************** License not compatible with installed version of ag-Grid Enterprise. ***************************');\n        console.error(\"* Your license for ag-Grid Enterprise expired on \" + formattedExpiryDate + \" but the version installed was released on \" + formattedReleaseDate + \". *\");\n        console.error('* Please contact info@ag-grid.com to renew your subscription to new versions.                                              *');\n        console.error('****************************************************************************************************************************');\n        console.error('****************************************************************************************************************************');\n        this.watermarkMessage = \"Incompatible License Version\";\n    };\n    var LicenseManager_1;\n    LicenseManager.RELEASE_INFORMATION = 'MTU3NjA1OTQ4NDg4MA==';\n    __decorate([\n        agGridCommunity.Autowired('md5')\n    ], LicenseManager.prototype, \"md5\", void 0);\n    __decorate([\n        agGridCommunity.PreConstruct\n    ], LicenseManager.prototype, \"validateLicense\", null);\n    LicenseManager = LicenseManager_1 = __decorate([\n        agGridCommunity.Bean('licenseManager')\n    ], LicenseManager);\n    return LicenseManager;\n}());\n\nvar __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MD5 = /** @class */ (function () {\n    function MD5() {\n        this.ieCompatibility = false;\n    }\n    MD5.prototype.init = function () {\n        this.ieCompatibility = (this.md5('hello') != '5d41402abc4b2a76b9719d911017c592');\n    };\n    MD5.prototype.md5cycle = function (x, k) {\n        var a = x[0], b = x[1], c = x[2], d = x[3];\n        a = this.ff(a, b, c, d, k[0], 7, -680876936);\n        d = this.ff(d, a, b, c, k[1], 12, -389564586);\n        c = this.ff(c, d, a, b, k[2], 17, 606105819);\n        b = this.ff(b, c, d, a, k[3], 22, -1044525330);\n        a = this.ff(a, b, c, d, k[4], 7, -176418897);\n        d = this.ff(d, a, b, c, k[5], 12, 1200080426);\n        c = this.ff(c, d, a, b, k[6], 17, -1473231341);\n        b = this.ff(b, c, d, a, k[7], 22, -45705983);\n        a = this.ff(a, b, c, d, k[8], 7, 1770035416);\n        d = this.ff(d, a, b, c, k[9], 12, -1958414417);\n        c = this.ff(c, d, a, b, k[10], 17, -42063);\n        b = this.ff(b, c, d, a, k[11], 22, -1990404162);\n        a = this.ff(a, b, c, d, k[12], 7, 1804603682);\n        d = this.ff(d, a, b, c, k[13], 12, -40341101);\n        c = this.ff(c, d, a, b, k[14], 17, -1502002290);\n        b = this.ff(b, c, d, a, k[15], 22, 1236535329);\n        a = this.gg(a, b, c, d, k[1], 5, -165796510);\n        d = this.gg(d, a, b, c, k[6], 9, -1069501632);\n        c = this.gg(c, d, a, b, k[11], 14, 643717713);\n        b = this.gg(b, c, d, a, k[0], 20, -373897302);\n        a = this.gg(a, b, c, d, k[5], 5, -701558691);\n        d = this.gg(d, a, b, c, k[10], 9, 38016083);\n        c = this.gg(c, d, a, b, k[15], 14, -660478335);\n        b = this.gg(b, c, d, a, k[4], 20, -405537848);\n        a = this.gg(a, b, c, d, k[9], 5, 568446438);\n        d = this.gg(d, a, b, c, k[14], 9, -1019803690);\n        c = this.gg(c, d, a, b, k[3], 14, -187363961);\n        b = this.gg(b, c, d, a, k[8], 20, 1163531501);\n        a = this.gg(a, b, c, d, k[13], 5, -1444681467);\n        d = this.gg(d, a, b, c, k[2], 9, -51403784);\n        c = this.gg(c, d, a, b, k[7], 14, 1735328473);\n        b = this.gg(b, c, d, a, k[12], 20, -1926607734);\n        a = this.hh(a, b, c, d, k[5], 4, -378558);\n        d = this.hh(d, a, b, c, k[8], 11, -2022574463);\n        c = this.hh(c, d, a, b, k[11], 16, 1839030562);\n        b = this.hh(b, c, d, a, k[14], 23, -35309556);\n        a = this.hh(a, b, c, d, k[1], 4, -1530992060);\n        d = this.hh(d, a, b, c, k[4], 11, 1272893353);\n        c = this.hh(c, d, a, b, k[7], 16, -155497632);\n        b = this.hh(b, c, d, a, k[10], 23, -1094730640);\n        a = this.hh(a, b, c, d, k[13], 4, 681279174);\n        d = this.hh(d, a, b, c, k[0], 11, -358537222);\n        c = this.hh(c, d, a, b, k[3], 16, -722521979);\n        b = this.hh(b, c, d, a, k[6], 23, 76029189);\n        a = this.hh(a, b, c, d, k[9], 4, -640364487);\n        d = this.hh(d, a, b, c, k[12], 11, -421815835);\n        c = this.hh(c, d, a, b, k[15], 16, 530742520);\n        b = this.hh(b, c, d, a, k[2], 23, -995338651);\n        a = this.ii(a, b, c, d, k[0], 6, -198630844);\n        d = this.ii(d, a, b, c, k[7], 10, 1126891415);\n        c = this.ii(c, d, a, b, k[14], 15, -1416354905);\n        b = this.ii(b, c, d, a, k[5], 21, -57434055);\n        a = this.ii(a, b, c, d, k[12], 6, 1700485571);\n        d = this.ii(d, a, b, c, k[3], 10, -1894986606);\n        c = this.ii(c, d, a, b, k[10], 15, -1051523);\n        b = this.ii(b, c, d, a, k[1], 21, -2054922799);\n        a = this.ii(a, b, c, d, k[8], 6, 1873313359);\n        d = this.ii(d, a, b, c, k[15], 10, -30611744);\n        c = this.ii(c, d, a, b, k[6], 15, -1560198380);\n        b = this.ii(b, c, d, a, k[13], 21, 1309151649);\n        a = this.ii(a, b, c, d, k[4], 6, -145523070);\n        d = this.ii(d, a, b, c, k[11], 10, -1120210379);\n        c = this.ii(c, d, a, b, k[2], 15, 718787259);\n        b = this.ii(b, c, d, a, k[9], 21, -343485551);\n        x[0] = this.add32(a, x[0]);\n        x[1] = this.add32(b, x[1]);\n        x[2] = this.add32(c, x[2]);\n        x[3] = this.add32(d, x[3]);\n    };\n    MD5.prototype.cmn = function (q, a, b, x, s, t) {\n        a = this.add32(this.add32(a, q), this.add32(x, t));\n        return this.add32((a << s) | (a >>> (32 - s)), b);\n    };\n    MD5.prototype.ff = function (a, b, c, d, x, s, t) {\n        return this.cmn((b & c) | ((~b) & d), a, b, x, s, t);\n    };\n    MD5.prototype.gg = function (a, b, c, d, x, s, t) {\n        return this.cmn((b & d) | (c & (~d)), a, b, x, s, t);\n    };\n    MD5.prototype.hh = function (a, b, c, d, x, s, t) {\n        return this.cmn(b ^ c ^ d, a, b, x, s, t);\n    };\n    MD5.prototype.ii = function (a, b, c, d, x, s, t) {\n        return this.cmn(c ^ (b | (~d)), a, b, x, s, t);\n    };\n    MD5.prototype.md51 = function (s) {\n        var n = s.length;\n        var state = [1732584193, -271733879, -1732584194, 271733878];\n        var i;\n        for (i = 64; i <= s.length; i += 64) {\n            this.md5cycle(state, this.md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        var tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < s.length; i++) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            this.md5cycle(state, tail);\n            for (i = 0; i < 16; i++) {\n                tail[i] = 0;\n            }\n        }\n        tail[14] = n * 8;\n        this.md5cycle(state, tail);\n        return state;\n    };\n    /* there needs to be support for Unicode here, * unless we pretend that we can redefine the MD-5\n     * algorithm for multi-byte characters (perhaps by adding every four 16-bit characters and\n     * shortening the sum to 32 bits). Otherwise I suthis.ggest performing MD-5 as if every character\n     * was two bytes--e.g., 0040 0025 = @%--but then how will an ordinary MD-5 sum be matched?\n     * There is no way to standardize text to something like UTF-8 before transformation; speed cost is\n     * utterly prohibitive. The JavaScript standard itself needs to look at this: it should start\n     * providing access to strings as preformed UTF-8 8-bit unsigned value arrays.\n     */\n    MD5.prototype.md5blk = function (s) {\n        var md5blks = [];\n        /* Andy King said do it this way. */\n        for (var i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i)\n                + (s.charCodeAt(i + 1) << 8)\n                + (s.charCodeAt(i + 2) << 16)\n                + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    };\n    MD5.prototype.rhex = function (n) {\n        var hex_chr = '0123456789abcdef'.split('');\n        var s = '', j = 0;\n        for (; j < 4; j++) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F]\n                + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    };\n    MD5.prototype.hex = function (x) {\n        for (var i = 0; i < x.length; i++) {\n            x[i] = this.rhex(x[i]);\n        }\n        return x.join('');\n    };\n    MD5.prototype.md5 = function (s) {\n        return this.hex(this.md51(s));\n    };\n    MD5.prototype.add32 = function (a, b) {\n        return this.ieCompatibility ? this.add32Compat(a, b) : this.add32Std(a, b);\n    };\n    /* this function is much faster, so if possible we use it. Some IEs are the only ones I know of that\n     need the idiotic second function, generated by an if clause.  */\n    MD5.prototype.add32Std = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    };\n    MD5.prototype.add32Compat = function (x, y) {\n        var lsw = (x & 0xFFFF) + (y & 0xFFFF), msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n        return (msw << 16) | (lsw & 0xFFFF);\n    };\n    __decorate$1([\n        agGridCommunity.PostConstruct\n    ], MD5.prototype, \"init\", null);\n    MD5 = __decorate$1([\n        agGridCommunity.Bean('md5')\n    ], MD5);\n    return MD5;\n}());\n\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$2 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar WatermarkComp = /** @class */ (function (_super) {\n    __extends(WatermarkComp, _super);\n    function WatermarkComp() {\n        return _super.call(this, \"<div class=\\\"ag-watermark\\\">\\n                    <div ref=\\\"eLicenseTextRef\\\" class=\\\"ag-watermark-text\\\"></div>\\n               </div>\") || this;\n    }\n    WatermarkComp.prototype.postConstruct = function () {\n        var _this = this;\n        var show = this.shouldDisplayWatermark();\n        agGridCommunity._.addOrRemoveCssClass(this.getGui(), 'ag-hidden', !show);\n        if (show) {\n            this.eLicenseTextRef.innerText = this.licenseManager.getWatermarkMessage();\n            window.setTimeout(function () { return _this.addCssClass('ag-opacity-zero'); }, 0);\n            window.setTimeout(function () { return _this.addCssClass('ag-hidden'); }, 5000);\n        }\n    };\n    WatermarkComp.prototype.shouldDisplayWatermark = function () {\n        var isDisplayWatermark = this.licenseManager.isDisplayWatermark();\n        var isWhiteListURL = location.hostname.match('^127\\.0\\.0\\.1|localhost|www\\.ag-grid\\.com$') != null;\n        var isForceWatermark = location.search.indexOf('forceWatermark') !== -1;\n        return isForceWatermark || (isDisplayWatermark && !isWhiteListURL);\n    };\n    __decorate$2([\n        agGridCommunity.Autowired('licenseManager')\n    ], WatermarkComp.prototype, \"licenseManager\", void 0);\n    __decorate$2([\n        agGridCommunity.RefSelector('eLicenseTextRef')\n    ], WatermarkComp.prototype, \"eLicenseTextRef\", void 0);\n    __decorate$2([\n        agGridCommunity.PostConstruct\n    ], WatermarkComp.prototype, \"postConstruct\", null);\n    return WatermarkComp;\n}(agGridCommunity.Component));\n\nvar EnterpriseCoreModule = {\n    moduleName: agGridCommunity.ModuleNames.EnterpriseCoreModule,\n    beans: [LicenseManager, MD5],\n    agStackComponents: [\n        { componentName: 'AgWatermark', componentClass: WatermarkComp }\n    ]\n};\n\nvar __extends$1 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$3 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar EXPAND_STATE;\n(function (EXPAND_STATE) {\n    EXPAND_STATE[EXPAND_STATE[\"EXPANDED\"] = 0] = \"EXPANDED\";\n    EXPAND_STATE[EXPAND_STATE[\"COLLAPSED\"] = 1] = \"COLLAPSED\";\n    EXPAND_STATE[EXPAND_STATE[\"INDETERMINATE\"] = 2] = \"INDETERMINATE\";\n})(EXPAND_STATE || (EXPAND_STATE = {}));\nvar SELECTED_STATE;\n(function (SELECTED_STATE) {\n    SELECTED_STATE[SELECTED_STATE[\"CHECKED\"] = 0] = \"CHECKED\";\n    SELECTED_STATE[SELECTED_STATE[\"UNCHECKED\"] = 1] = \"UNCHECKED\";\n    SELECTED_STATE[SELECTED_STATE[\"INDETERMINATE\"] = 2] = \"INDETERMINATE\";\n})(SELECTED_STATE || (SELECTED_STATE = {}));\nvar PrimaryColsHeaderPanel = /** @class */ (function (_super) {\n    __extends$1(PrimaryColsHeaderPanel, _super);\n    function PrimaryColsHeaderPanel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PrimaryColsHeaderPanel.prototype.preConstruct = function () {\n        var translate = this.gridOptionsWrapper.getLocaleTextFunc();\n        this.setTemplate(\"<div class=\\\"ag-primary-cols-header-panel\\\" role=\\\"presentation\\\">\\n                <div ref=\\\"eExpand\\\"></div>\\n                <div ref=\\\"eSelect\\\"></div>\\n                <div class=\\\"ag-input-wrapper ag-primary-cols-filter-wrapper\\\" ref=\\\"eFilterWrapper\\\" role=\\\"presentation\\\">\\n                    <input class=\\\"ag-primary-cols-filter\\\" ref=\\\"eFilterTextField\\\" type=\\\"text\\\" placeholder=\\\"\" + translate(\"SearchOoo\", \"Search...\") + \"\\\">\\n                </div>\\n            </div>\");\n    };\n    PrimaryColsHeaderPanel.prototype.postConstruct = function () {\n        this.createExpandIcons();\n        if (this.gridOptionsWrapper.useNativeCheckboxes()) {\n            this.eSelectCheckbox = document.createElement(\"input\");\n            this.eSelectCheckbox.type = \"checkbox\";\n            this.eSelectCheckbox.className = \"ag-checkbox\";\n            this.eSelect.appendChild(this.eSelectCheckbox);\n        }\n        else {\n            this.createCheckIcons();\n        }\n        this.addDestroyableEventListener(this.eExpand, \"click\", this.onExpandClicked.bind(this));\n        this.addDestroyableEventListener(this.eSelect, \"click\", this.onSelectClicked.bind(this));\n        this.addDestroyableEventListener(this.eFilterTextField, \"input\", this.onFilterTextChanged.bind(this));\n        this.addDestroyableEventListener(this.eFilterTextField, \"keypress\", this.onMiniFilterKeyPress.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED, this.showOrHideOptions.bind(this));\n    };\n    PrimaryColsHeaderPanel.prototype.init = function (params) {\n        this.params = params;\n        if (this.columnController.isReady()) {\n            this.showOrHideOptions();\n        }\n    };\n    PrimaryColsHeaderPanel.prototype.createExpandIcons = function () {\n        this.eExpand.appendChild((this.eExpandChecked = agGridCommunity._.createIconNoSpan(\"columnSelectOpen\", this.gridOptionsWrapper)));\n        this.eExpand.appendChild((this.eExpandUnchecked = agGridCommunity._.createIconNoSpan(\"columnSelectClosed\", this.gridOptionsWrapper)));\n        this.eExpand.appendChild((this.eExpandIndeterminate = agGridCommunity._.createIconNoSpan(\"columnSelectIndeterminate\", this.gridOptionsWrapper)));\n    };\n    PrimaryColsHeaderPanel.prototype.createCheckIcons = function () {\n        this.eSelect.appendChild((this.eSelectChecked = agGridCommunity._.createIconNoSpan(\"checkboxChecked\", this.gridOptionsWrapper)));\n        this.eSelect.appendChild((this.eSelectUnchecked = agGridCommunity._.createIconNoSpan(\"checkboxUnchecked\", this.gridOptionsWrapper)));\n        this.eSelect.appendChild((this.eSelectIndeterminate = agGridCommunity._.createIconNoSpan(\"checkboxIndeterminate\", this.gridOptionsWrapper)));\n    };\n    // we only show expand / collapse if we are showing columns\n    PrimaryColsHeaderPanel.prototype.showOrHideOptions = function () {\n        var showFilter = !this.params.suppressColumnFilter;\n        var showSelect = !this.params.suppressColumnSelectAll;\n        var showExpand = !this.params.suppressColumnExpandAll;\n        var groupsPresent = this.columnController.isPrimaryColumnGroupsPresent();\n        agGridCommunity._.setDisplayed(this.eFilterWrapper, showFilter);\n        agGridCommunity._.setDisplayed(this.eSelect, showSelect);\n        agGridCommunity._.setDisplayed(this.eExpand, showExpand && groupsPresent);\n    };\n    PrimaryColsHeaderPanel.prototype.onFilterTextChanged = function () {\n        var _this = this;\n        if (!this.onFilterTextChangedDebounced) {\n            this.onFilterTextChangedDebounced = agGridCommunity._.debounce(function () {\n                var filterText = _this.eFilterTextField.value;\n                _this.dispatchEvent({ type: \"filterChanged\", filterText: filterText });\n            }, 300);\n        }\n        this.onFilterTextChangedDebounced();\n    };\n    PrimaryColsHeaderPanel.prototype.onMiniFilterKeyPress = function (e) {\n        if (agGridCommunity._.isKeyPressed(e, agGridCommunity.Constants.KEY_ENTER)) {\n            this.dispatchEvent({ type: \"selectAll\" });\n        }\n    };\n    PrimaryColsHeaderPanel.prototype.onSelectClicked = function () {\n        var eventType = this.selectState === SELECTED_STATE.CHECKED ? \"unselectAll\" : \"selectAll\";\n        this.dispatchEvent({ type: eventType });\n    };\n    PrimaryColsHeaderPanel.prototype.onExpandClicked = function () {\n        var eventType = this.expandState === EXPAND_STATE.EXPANDED ? \"collapseAll\" : \"expandAll\";\n        this.dispatchEvent({ type: eventType });\n    };\n    PrimaryColsHeaderPanel.prototype.setExpandState = function (state) {\n        this.expandState = state;\n        agGridCommunity._.setDisplayed(this.eExpandChecked, this.expandState === EXPAND_STATE.EXPANDED);\n        agGridCommunity._.setDisplayed(this.eExpandUnchecked, this.expandState === EXPAND_STATE.COLLAPSED);\n        agGridCommunity._.setDisplayed(this.eExpandIndeterminate, this.expandState === EXPAND_STATE.INDETERMINATE);\n    };\n    PrimaryColsHeaderPanel.prototype.setSelectionState = function (state) {\n        this.selectState = state;\n        if (this.gridOptionsWrapper.useNativeCheckboxes()) {\n            this.eSelectCheckbox.checked = this.selectState === SELECTED_STATE.CHECKED;\n            this.eSelectCheckbox.indeterminate = this.selectState === SELECTED_STATE.INDETERMINATE;\n        }\n        else {\n            agGridCommunity._.setDisplayed(this.eSelectChecked, this.selectState === SELECTED_STATE.CHECKED);\n            agGridCommunity._.setDisplayed(this.eSelectUnchecked, this.selectState === SELECTED_STATE.UNCHECKED);\n            agGridCommunity._.setDisplayed(this.eSelectIndeterminate, this.selectState === SELECTED_STATE.INDETERMINATE);\n        }\n    };\n    __decorate$3([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], PrimaryColsHeaderPanel.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$3([\n        agGridCommunity.Autowired('columnController')\n    ], PrimaryColsHeaderPanel.prototype, \"columnController\", void 0);\n    __decorate$3([\n        agGridCommunity.Autowired('eventService')\n    ], PrimaryColsHeaderPanel.prototype, \"eventService\", void 0);\n    __decorate$3([\n        agGridCommunity.RefSelector('eExpand')\n    ], PrimaryColsHeaderPanel.prototype, \"eExpand\", void 0);\n    __decorate$3([\n        agGridCommunity.RefSelector('eSelect')\n    ], PrimaryColsHeaderPanel.prototype, \"eSelect\", void 0);\n    __decorate$3([\n        agGridCommunity.RefSelector('eFilterWrapper')\n    ], PrimaryColsHeaderPanel.prototype, \"eFilterWrapper\", void 0);\n    __decorate$3([\n        agGridCommunity.RefSelector('eFilterTextField')\n    ], PrimaryColsHeaderPanel.prototype, \"eFilterTextField\", void 0);\n    __decorate$3([\n        agGridCommunity.PreConstruct\n    ], PrimaryColsHeaderPanel.prototype, \"preConstruct\", null);\n    __decorate$3([\n        agGridCommunity.PostConstruct\n    ], PrimaryColsHeaderPanel.prototype, \"postConstruct\", null);\n    return PrimaryColsHeaderPanel;\n}(agGridCommunity.Component));\n\nvar __extends$2 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$4 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ToolPanelColumnGroupComp = /** @class */ (function (_super) {\n    __extends$2(ToolPanelColumnGroupComp, _super);\n    function ToolPanelColumnGroupComp(columnGroup, columnDept, allowDragging, expandByDefault, expandedCallback, getFilterResults) {\n        var _this = _super.call(this) || this;\n        _this.processingColumnStateChange = false;\n        _this.columnGroup = columnGroup;\n        _this.columnDept = columnDept;\n        _this.allowDragging = allowDragging;\n        _this.expanded = expandByDefault;\n        _this.expandedCallback = expandedCallback;\n        _this.getFilterResultsCallback = getFilterResults;\n        return _this;\n    }\n    ToolPanelColumnGroupComp.prototype.init = function () {\n        this.setTemplate(ToolPanelColumnGroupComp.TEMPLATE);\n        this.eDragHandle = agGridCommunity._.createIconNoSpan('columnDrag', this.gridOptionsWrapper);\n        agGridCommunity._.addCssClass(this.eDragHandle, 'ag-column-drag');\n        this.cbSelect.getGui().insertAdjacentElement('afterend', this.eDragHandle);\n        this.displayName = this.columnController.getDisplayNameForOriginalColumnGroup(null, this.columnGroup, 'toolPanel');\n        if (agGridCommunity._.missing(this.displayName)) {\n            this.displayName = '>>';\n        }\n        this.eLabel.innerHTML = this.displayName ? this.displayName : '';\n        this.setupExpandContract();\n        this.addCssClass('ag-toolpanel-indent-' + this.columnDept);\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.onColumnStateChanged.bind(this));\n        this.addDestroyableEventListener(this.eLabel, 'click', this.onLabelClicked.bind(this));\n        this.addDestroyableEventListener(this.cbSelect, agGridCommunity.AgCheckbox.EVENT_CHANGED, this.onCheckboxChanged.bind(this));\n        this.setOpenClosedIcons();\n        this.setupDragging();\n        this.onColumnStateChanged();\n        this.addVisibilityListenersToAllChildren();\n        agGridCommunity.CssClassApplier.addToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(), this.getGui(), this.gridOptionsWrapper, null, this.columnGroup);\n    };\n    ToolPanelColumnGroupComp.prototype.addVisibilityListenersToAllChildren = function () {\n        var _this = this;\n        this.columnGroup.getLeafColumns().forEach(function (column) {\n            _this.addDestroyableEventListener(column, agGridCommunity.Column.EVENT_VISIBLE_CHANGED, _this.onColumnStateChanged.bind(_this));\n            _this.addDestroyableEventListener(column, agGridCommunity.Column.EVENT_VALUE_CHANGED, _this.onColumnStateChanged.bind(_this));\n            _this.addDestroyableEventListener(column, agGridCommunity.Column.EVENT_PIVOT_CHANGED, _this.onColumnStateChanged.bind(_this));\n            _this.addDestroyableEventListener(column, agGridCommunity.Column.EVENT_ROW_GROUP_CHANGED, _this.onColumnStateChanged.bind(_this));\n        });\n    };\n    ToolPanelColumnGroupComp.prototype.setupDragging = function () {\n        var _this = this;\n        if (!this.allowDragging) {\n            agGridCommunity._.setDisplayed(this.eDragHandle, false);\n            return;\n        }\n        var dragSource = {\n            type: agGridCommunity.DragSourceType.ToolPanel,\n            eElement: this.eDragHandle,\n            dragItemName: this.displayName,\n            getDragItem: function () { return _this.createDragItem(); }\n        };\n        this.dragAndDropService.addDragSource(dragSource, true);\n        this.addDestroyFunc(function () { return _this.dragAndDropService.removeDragSource(dragSource); });\n    };\n    ToolPanelColumnGroupComp.prototype.createDragItem = function () {\n        var visibleState = {};\n        this.columnGroup.getLeafColumns().forEach(function (col) {\n            visibleState[col.getId()] = col.isVisible();\n        });\n        return {\n            columns: this.columnGroup.getLeafColumns(),\n            visibleState: visibleState\n        };\n    };\n    ToolPanelColumnGroupComp.prototype.setupExpandContract = function () {\n        this.eGroupClosedIcon.appendChild(agGridCommunity._.createIcon('columnSelectClosed', this.gridOptionsWrapper, null));\n        this.eGroupOpenedIcon.appendChild(agGridCommunity._.createIcon('columnSelectOpen', this.gridOptionsWrapper, null));\n        this.addDestroyableEventListener(this.eGroupClosedIcon, 'click', this.onExpandOrContractClicked.bind(this));\n        this.addDestroyableEventListener(this.eGroupOpenedIcon, 'click', this.onExpandOrContractClicked.bind(this));\n        var touchListener = new agGridCommunity.TouchListener(this.eColumnGroupIcons, true);\n        this.addDestroyableEventListener(touchListener, agGridCommunity.TouchListener.EVENT_TAP, this.onExpandOrContractClicked.bind(this));\n        this.addDestroyFunc(touchListener.destroy.bind(touchListener));\n    };\n    ToolPanelColumnGroupComp.prototype.onLabelClicked = function () {\n        var nextState = !this.cbSelect.getValue();\n        this.onChangeCommon(nextState);\n    };\n    ToolPanelColumnGroupComp.prototype.onCheckboxChanged = function (event) {\n        this.onChangeCommon(event.selected);\n    };\n    ToolPanelColumnGroupComp.prototype.onChangeCommon = function (nextState) {\n        if (this.processingColumnStateChange) {\n            return;\n        }\n        var childColumns = this.columnGroup.getLeafColumns();\n        if (this.columnController.isPivotMode()) {\n            if (nextState) {\n                this.actionCheckedReduce(childColumns);\n            }\n            else {\n                this.actionUnCheckedReduce(childColumns);\n            }\n        }\n        else {\n            var isAllowedColumn = function (c) { return !c.getColDef().lockVisible && !c.getColDef().suppressColumnsToolPanel; };\n            var allowedColumns = childColumns.filter(isAllowedColumn);\n            var filterResults_1 = this.getFilterResultsCallback();\n            var passesFilter = function (c) { return !filterResults_1 || filterResults_1[c.getColId()]; };\n            var visibleColumns = allowedColumns.filter(passesFilter);\n            // only columns that are 'allowed' and pass filter should be visible\n            this.columnController.setColumnsVisible(visibleColumns, nextState, \"toolPanelUi\");\n        }\n    };\n    ToolPanelColumnGroupComp.prototype.actionUnCheckedReduce = function (columns) {\n        var columnsToUnPivot = [];\n        var columnsToUnValue = [];\n        var columnsToUnGroup = [];\n        columns.forEach(function (column) {\n            if (column.isPivotActive()) {\n                columnsToUnPivot.push(column);\n            }\n            if (column.isRowGroupActive()) {\n                columnsToUnGroup.push(column);\n            }\n            if (column.isValueActive()) {\n                columnsToUnValue.push(column);\n            }\n        });\n        if (columnsToUnPivot.length > 0) {\n            this.columnController.removePivotColumns(columnsToUnPivot, \"toolPanelUi\");\n        }\n        if (columnsToUnGroup.length > 0) {\n            this.columnController.removeRowGroupColumns(columnsToUnGroup, \"toolPanelUi\");\n        }\n        if (columnsToUnValue.length > 0) {\n            this.columnController.removeValueColumns(columnsToUnValue, \"toolPanelUi\");\n        }\n    };\n    ToolPanelColumnGroupComp.prototype.actionCheckedReduce = function (columns) {\n        var columnsToAggregate = [];\n        var columnsToGroup = [];\n        var columnsToPivot = [];\n        columns.forEach(function (column) {\n            // don't change any column that's already got a function active\n            if (column.isAnyFunctionActive()) {\n                return;\n            }\n            if (column.isAllowValue()) {\n                columnsToAggregate.push(column);\n            }\n            else if (column.isAllowRowGroup()) {\n                columnsToGroup.push(column);\n            }\n            else if (column.isAllowRowGroup()) {\n                columnsToPivot.push(column);\n            }\n        });\n        if (columnsToAggregate.length > 0) {\n            this.columnController.addValueColumns(columnsToAggregate, \"toolPanelUi\");\n        }\n        if (columnsToGroup.length > 0) {\n            this.columnController.addRowGroupColumns(columnsToGroup, \"toolPanelUi\");\n        }\n        if (columnsToPivot.length > 0) {\n            this.columnController.addPivotColumns(columnsToPivot, \"toolPanelUi\");\n        }\n    };\n    ToolPanelColumnGroupComp.prototype.onColumnStateChanged = function () {\n        var selectedValue = this.workOutSelectedValue();\n        var readOnlyValue = this.workOutReadOnlyValue();\n        this.processingColumnStateChange = true;\n        this.cbSelect.setValue(selectedValue);\n        this.cbSelect.setReadOnly(readOnlyValue);\n        this.processingColumnStateChange = false;\n    };\n    ToolPanelColumnGroupComp.prototype.workOutSelectedValue = function () {\n        var pivotMode = this.columnController.isPivotMode();\n        var leafColumns = this.columnGroup.getLeafColumns();\n        var filterResults = this.getFilterResultsCallback();\n        var len = leafColumns.length;\n        var count = { visible: 0, hidden: 0 };\n        var ignoredChildCount = { visible: 0, hidden: 0 };\n        for (var i = 0; i < len; i++) {\n            var column = leafColumns[i];\n            // ignore lock visible columns and columns set to 'suppressColumnsToolPanel'\n            var ignore = column.getColDef().lockVisible || column.getColDef().suppressColumnsToolPanel;\n            var type = this.isColumnVisible(column, pivotMode) ? 'visible' : 'hidden';\n            count[type]++;\n            // also ignore columns that have been removed by the filter\n            if (filterResults) {\n                var columnPassesFilter = filterResults[column.getColId()];\n                if (!columnPassesFilter) {\n                    ignore = true;\n                }\n            }\n            if (!ignore) {\n                continue;\n            }\n            ignoredChildCount[type]++;\n        }\n        // if all columns are ignored we use the regular count, if not\n        // we only consider the columns that were not ignored\n        if (ignoredChildCount.visible + ignoredChildCount.hidden !== len) {\n            count.visible -= ignoredChildCount.visible;\n            count.hidden -= ignoredChildCount.hidden;\n        }\n        var selectedValue;\n        if (count.visible > 0 && count.hidden > 0) {\n            selectedValue = null;\n        }\n        else {\n            selectedValue = count.visible > 0;\n        }\n        return selectedValue == null ? undefined : selectedValue;\n    };\n    ToolPanelColumnGroupComp.prototype.workOutReadOnlyValue = function () {\n        var pivotMode = this.columnController.isPivotMode();\n        var colsThatCanAction = 0;\n        this.columnGroup.getLeafColumns().forEach(function (col) {\n            if (pivotMode) {\n                if (col.isAnyFunctionAllowed()) {\n                    colsThatCanAction++;\n                }\n            }\n            else {\n                if (!col.getColDef().lockVisible) {\n                    colsThatCanAction++;\n                }\n            }\n        });\n        return colsThatCanAction === 0;\n    };\n    ToolPanelColumnGroupComp.prototype.isColumnVisible = function (column, pivotMode) {\n        if (pivotMode) {\n            var pivoted = column.isPivotActive();\n            var grouped = column.isRowGroupActive();\n            var aggregated = column.isValueActive();\n            return pivoted || grouped || aggregated;\n        }\n        else {\n            return column.isVisible();\n        }\n    };\n    ToolPanelColumnGroupComp.prototype.onExpandOrContractClicked = function () {\n        this.expanded = !this.expanded;\n        this.setOpenClosedIcons();\n        this.expandedCallback();\n    };\n    ToolPanelColumnGroupComp.prototype.setOpenClosedIcons = function () {\n        var folderOpen = this.expanded;\n        agGridCommunity._.setDisplayed(this.eGroupClosedIcon, !folderOpen);\n        agGridCommunity._.setDisplayed(this.eGroupOpenedIcon, folderOpen);\n    };\n    ToolPanelColumnGroupComp.prototype.isExpanded = function () {\n        return this.expanded;\n    };\n    ToolPanelColumnGroupComp.prototype.getDisplayName = function () {\n        return this.displayName;\n    };\n    ToolPanelColumnGroupComp.prototype.onSelectAllChanged = function (value) {\n        if ((value && !this.cbSelect.getValue()) ||\n            (!value && this.cbSelect.getValue())) {\n            if (!this.cbSelect.isReadOnly()) {\n                this.cbSelect.toggle();\n            }\n        }\n    };\n    ToolPanelColumnGroupComp.prototype.isSelected = function () {\n        return this.cbSelect.getValue();\n    };\n    ToolPanelColumnGroupComp.prototype.isSelectable = function () {\n        return !this.cbSelect.isReadOnly();\n    };\n    ToolPanelColumnGroupComp.prototype.isExpandable = function () {\n        return true;\n    };\n    ToolPanelColumnGroupComp.prototype.setExpanded = function (value) {\n        if (this.expanded !== value) {\n            this.onExpandOrContractClicked();\n        }\n    };\n    ToolPanelColumnGroupComp.prototype.setSelected = function (selected) {\n        this.cbSelect.setValue(selected, true);\n    };\n    ToolPanelColumnGroupComp.TEMPLATE = \"<div class=\\\"ag-column-tool-panel-column-group\\\">\\n            <span class=\\\"ag-column-group-icons\\\" ref=\\\"eColumnGroupIcons\\\" >\\n                <span class=\\\"ag-column-group-closed-icon\\\" ref=\\\"eGroupClosedIcon\\\"></span>\\n                <span class=\\\"ag-column-group-opened-icon\\\" ref=\\\"eGroupOpenedIcon\\\"></span>\\n            </span>\\n            <ag-checkbox ref=\\\"cbSelect\\\" class=\\\"ag-column-select-checkbox\\\"></ag-checkbox>\\n            <span class=\\\"ag-column-tool-panel-column-label\\\" ref=\\\"eLabel\\\"></span>\\n        </div>\";\n    __decorate$4([\n        agGridCommunity.Autowired('eventService')\n    ], ToolPanelColumnGroupComp.prototype, \"eventService\", void 0);\n    __decorate$4([\n        agGridCommunity.Autowired('columnController')\n    ], ToolPanelColumnGroupComp.prototype, \"columnController\", void 0);\n    __decorate$4([\n        agGridCommunity.Autowired('dragAndDropService')\n    ], ToolPanelColumnGroupComp.prototype, \"dragAndDropService\", void 0);\n    __decorate$4([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ToolPanelColumnGroupComp.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$4([\n        agGridCommunity.RefSelector('cbSelect')\n    ], ToolPanelColumnGroupComp.prototype, \"cbSelect\", void 0);\n    __decorate$4([\n        agGridCommunity.RefSelector('eLabel')\n    ], ToolPanelColumnGroupComp.prototype, \"eLabel\", void 0);\n    __decorate$4([\n        agGridCommunity.RefSelector('eGroupOpenedIcon')\n    ], ToolPanelColumnGroupComp.prototype, \"eGroupOpenedIcon\", void 0);\n    __decorate$4([\n        agGridCommunity.RefSelector('eGroupClosedIcon')\n    ], ToolPanelColumnGroupComp.prototype, \"eGroupClosedIcon\", void 0);\n    __decorate$4([\n        agGridCommunity.RefSelector('eColumnGroupIcons')\n    ], ToolPanelColumnGroupComp.prototype, \"eColumnGroupIcons\", void 0);\n    __decorate$4([\n        agGridCommunity.PostConstruct\n    ], ToolPanelColumnGroupComp.prototype, \"init\", null);\n    return ToolPanelColumnGroupComp;\n}(agGridCommunity.Component));\n\nvar __extends$3 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$5 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ToolPanelColumnComp = /** @class */ (function (_super) {\n    __extends$3(ToolPanelColumnComp, _super);\n    function ToolPanelColumnComp(column, columnDept, allowDragging, groupsExist) {\n        var _this = _super.call(this) || this;\n        _this.processingColumnStateChange = false;\n        _this.column = column;\n        _this.columnDept = columnDept;\n        _this.allowDragging = allowDragging;\n        _this.groupsExist = groupsExist;\n        return _this;\n    }\n    ToolPanelColumnComp.prototype.init = function () {\n        this.setTemplate(ToolPanelColumnComp.TEMPLATE);\n        this.eDragHandle = agGridCommunity._.createIconNoSpan('columnDrag', this.gridOptionsWrapper);\n        agGridCommunity._.addCssClass(this.eDragHandle, 'ag-column-drag');\n        this.cbSelect.getGui().insertAdjacentElement('afterend', this.eDragHandle);\n        this.displayName = this.columnController.getDisplayNameForColumn(this.column, 'toolPanel');\n        var displayNameSanitised = agGridCommunity._.escape(this.displayName);\n        this.eLabel.innerHTML = displayNameSanitised;\n        // if grouping, we add an extra level of indent, to cater for expand/contract icons we need to indent for\n        var indent = this.columnDept;\n        if (this.groupsExist) {\n            this.addCssClass('ag-toolpanel-add-group-indent');\n        }\n        this.addCssClass(\"ag-toolpanel-indent-\" + indent);\n        this.setupDragging();\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.onColumnStateChanged.bind(this));\n        this.addDestroyableEventListener(this.column, agGridCommunity.Column.EVENT_VALUE_CHANGED, this.onColumnStateChanged.bind(this));\n        this.addDestroyableEventListener(this.column, agGridCommunity.Column.EVENT_PIVOT_CHANGED, this.onColumnStateChanged.bind(this));\n        this.addDestroyableEventListener(this.column, agGridCommunity.Column.EVENT_ROW_GROUP_CHANGED, this.onColumnStateChanged.bind(this));\n        this.addDestroyableEventListener(this.column, agGridCommunity.Column.EVENT_VISIBLE_CHANGED, this.onColumnStateChanged.bind(this));\n        this.addDestroyableEventListener(this.gridOptionsWrapper, 'functionsReadOnly', this.onColumnStateChanged.bind(this));\n        this.addDestroyableEventListener(this.cbSelect, agGridCommunity.AgCheckbox.EVENT_CHANGED, this.onCheckboxChanged.bind(this));\n        this.addDestroyableEventListener(this.eLabel, 'click', this.onLabelClicked.bind(this));\n        this.onColumnStateChanged();\n        agGridCommunity.CssClassApplier.addToolPanelClassesFromColDef(this.column.getColDef(), this.getGui(), this.gridOptionsWrapper, this.column, null);\n    };\n    ToolPanelColumnComp.prototype.onLabelClicked = function () {\n        if (this.gridOptionsWrapper.isFunctionsReadOnly()) {\n            return;\n        }\n        var nextState = !this.cbSelect.getValue();\n        this.onChangeCommon(nextState);\n    };\n    ToolPanelColumnComp.prototype.onCheckboxChanged = function (event) {\n        this.onChangeCommon(event.selected);\n    };\n    ToolPanelColumnComp.prototype.onChangeCommon = function (nextState) {\n        // ignore lock visible columns\n        if (this.column.getColDef().lockVisible) {\n            return;\n        }\n        // only want to action if the user clicked the checkbox, not is we are setting the checkbox because\n        // of a change in the model\n        if (this.processingColumnStateChange) {\n            return;\n        }\n        // action in a timeout, as the action takes some time, we want to update the icons first\n        // so the user gets nice feedback when they click. otherwise there would be a lag and the\n        // user would think the checkboxes were clunky\n        if (this.columnController.isPivotMode()) {\n            if (nextState) {\n                this.actionCheckedPivotMode();\n            }\n            else {\n                this.actionUnCheckedPivotMode();\n            }\n        }\n        else {\n            this.columnController.setColumnVisible(this.column, nextState, \"columnMenu\");\n        }\n    };\n    ToolPanelColumnComp.prototype.actionUnCheckedPivotMode = function () {\n        var functionPassive = this.gridOptionsWrapper.isFunctionsPassive();\n        var column = this.column;\n        var columnController = this.columnController;\n        // remove pivot if column is pivoted\n        if (column.isPivotActive()) {\n            if (functionPassive) {\n                var copyOfPivotColumns = this.columnController.getPivotColumns().slice();\n                copyOfPivotColumns.push(column);\n                var event_1 = {\n                    type: agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,\n                    columns: copyOfPivotColumns,\n                    api: this.gridApi,\n                    columnApi: this.columnApi\n                };\n                this.eventService.dispatchEvent(event_1);\n            }\n            else {\n                columnController.removePivotColumn(column, \"columnMenu\");\n            }\n        }\n        // remove value if column is value\n        if (column.isValueActive()) {\n            if (functionPassive) {\n                var copyOfValueColumns = this.columnController.getValueColumns().slice();\n                copyOfValueColumns.push(column);\n                var event_2 = {\n                    type: agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,\n                    columns: copyOfValueColumns,\n                    api: this.gridApi,\n                    columnApi: this.columnApi\n                };\n                this.eventService.dispatchEvent(event_2);\n            }\n            else {\n                columnController.removeValueColumn(column, \"columnMenu\");\n            }\n        }\n        // remove group if column is grouped\n        if (column.isRowGroupActive()) {\n            if (functionPassive) {\n                var copyOfRowGroupColumns = this.columnController.getRowGroupColumns().slice();\n                copyOfRowGroupColumns.push(column);\n                var event_3 = {\n                    type: agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,\n                    columns: copyOfRowGroupColumns,\n                    api: this.gridApi,\n                    columnApi: this.columnApi\n                };\n                this.eventService.dispatchEvent(event_3);\n            }\n            else {\n                columnController.removeRowGroupColumn(column, \"columnMenu\");\n            }\n        }\n    };\n    ToolPanelColumnComp.prototype.actionCheckedPivotMode = function () {\n        var column = this.column;\n        // function already active, so do nothing\n        if (column.isValueActive() || column.isPivotActive() || column.isRowGroupActive()) {\n            return;\n        }\n        var functionPassive = this.gridOptionsWrapper.isFunctionsPassive();\n        if (column.isAllowValue()) {\n            if (functionPassive) {\n                var copyOfValueColumns = this.columnController.getValueColumns().slice();\n                agGridCommunity._.removeFromArray(copyOfValueColumns, column);\n                var event_4 = {\n                    type: agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,\n                    api: this.gridApi,\n                    columnApi: this.columnApi,\n                    columns: copyOfValueColumns\n                };\n                this.eventService.dispatchEvent(event_4);\n            }\n            else {\n                this.columnController.addValueColumn(column, \"columnMenu\");\n            }\n        }\n        else if (column.isAllowRowGroup()) {\n            if (functionPassive) {\n                var copyOfRowGroupColumns = this.columnController.getRowGroupColumns().slice();\n                agGridCommunity._.removeFromArray(copyOfRowGroupColumns, column);\n                var event_5 = {\n                    type: agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,\n                    api: this.gridApi,\n                    columnApi: this.columnApi,\n                    columns: copyOfRowGroupColumns\n                };\n                this.eventService.dispatchEvent(event_5);\n            }\n            else {\n                this.columnController.addRowGroupColumn(column, \"columnMenu\");\n            }\n        }\n        else if (column.isAllowPivot()) {\n            if (functionPassive) {\n                var copyOfPivotColumns = this.columnController.getPivotColumns().slice();\n                agGridCommunity._.removeFromArray(copyOfPivotColumns, column);\n                var event_6 = {\n                    type: agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,\n                    api: this.gridApi,\n                    columnApi: this.columnApi,\n                    columns: copyOfPivotColumns\n                };\n                this.eventService.dispatchEvent(event_6);\n            }\n            else {\n                this.columnController.addPivotColumn(column, \"columnMenu\");\n            }\n        }\n    };\n    ToolPanelColumnComp.prototype.setupDragging = function () {\n        var _this = this;\n        if (!this.allowDragging) {\n            agGridCommunity._.setDisplayed(this.eDragHandle, false);\n            return;\n        }\n        var dragSource = {\n            type: agGridCommunity.DragSourceType.ToolPanel,\n            eElement: this.eDragHandle,\n            dragItemName: this.displayName,\n            getDragItem: function () { return _this.createDragItem(); }\n        };\n        this.dragAndDropService.addDragSource(dragSource, true);\n        this.addDestroyFunc(function () { return _this.dragAndDropService.removeDragSource(dragSource); });\n    };\n    ToolPanelColumnComp.prototype.createDragItem = function () {\n        var visibleState = {};\n        visibleState[this.column.getId()] = this.column.isVisible();\n        return {\n            columns: [this.column],\n            visibleState: visibleState\n        };\n    };\n    ToolPanelColumnComp.prototype.onColumnStateChanged = function () {\n        this.processingColumnStateChange = true;\n        var isPivotMode = this.columnController.isPivotMode();\n        if (isPivotMode) {\n            // if reducing, checkbox means column is one of pivot, value or group\n            var anyFunctionActive = this.column.isAnyFunctionActive();\n            this.cbSelect.setValue(anyFunctionActive);\n        }\n        else {\n            // if not reducing, the checkbox tells us if column is visible or not\n            this.cbSelect.setValue(this.column.isVisible());\n        }\n        var checkboxReadOnly;\n        if (isPivotMode) {\n            // when in pivot mode, the item should be read only if:\n            //  a) gui is not allowed make any changes\n            var functionsReadOnly = this.gridOptionsWrapper.isFunctionsReadOnly();\n            //  b) column is not allow any functions on it\n            var noFunctionsAllowed = !this.column.isAnyFunctionAllowed();\n            checkboxReadOnly = functionsReadOnly || noFunctionsAllowed;\n        }\n        else {\n            // when in normal mode, the checkbox is read only if visibility is locked\n            checkboxReadOnly = !!this.column.getColDef().lockVisible;\n        }\n        this.cbSelect.setReadOnly(checkboxReadOnly);\n        var checkboxPassive = isPivotMode && this.gridOptionsWrapper.isFunctionsPassive();\n        this.cbSelect.setPassive(checkboxPassive);\n        this.processingColumnStateChange = false;\n    };\n    ToolPanelColumnComp.prototype.getDisplayName = function () {\n        return this.displayName;\n    };\n    ToolPanelColumnComp.prototype.onSelectAllChanged = function (value) {\n        if (value !== this.cbSelect.getValue()) {\n            if (!this.cbSelect.isReadOnly()) {\n                this.cbSelect.toggle();\n            }\n        }\n    };\n    ToolPanelColumnComp.prototype.isSelected = function () {\n        return this.cbSelect.getValue();\n    };\n    ToolPanelColumnComp.prototype.isSelectable = function () {\n        return !this.cbSelect.isReadOnly();\n    };\n    ToolPanelColumnComp.prototype.isExpandable = function () {\n        return false;\n    };\n    ToolPanelColumnComp.prototype.setExpanded = function (value) {\n        console.warn('ag-grid: can not expand a column item that does not represent a column group header');\n    };\n    ToolPanelColumnComp.TEMPLATE = \"<div class=\\\"ag-column-tool-panel-column\\\">\\n            <ag-checkbox ref=\\\"cbSelect\\\" class=\\\"ag-column-select-checkbox\\\"></ag-checkbox>\\n            <span class=\\\"ag-column-tool-panel-column-label\\\" ref=\\\"eLabel\\\"></span>\\n        </div>\";\n    __decorate$5([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ToolPanelColumnComp.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$5([\n        agGridCommunity.Autowired('columnController')\n    ], ToolPanelColumnComp.prototype, \"columnController\", void 0);\n    __decorate$5([\n        agGridCommunity.Autowired('eventService')\n    ], ToolPanelColumnComp.prototype, \"eventService\", void 0);\n    __decorate$5([\n        agGridCommunity.Autowired('dragAndDropService')\n    ], ToolPanelColumnComp.prototype, \"dragAndDropService\", void 0);\n    __decorate$5([\n        agGridCommunity.Autowired('columnApi')\n    ], ToolPanelColumnComp.prototype, \"columnApi\", void 0);\n    __decorate$5([\n        agGridCommunity.Autowired('gridApi')\n    ], ToolPanelColumnComp.prototype, \"gridApi\", void 0);\n    __decorate$5([\n        agGridCommunity.RefSelector('eLabel')\n    ], ToolPanelColumnComp.prototype, \"eLabel\", void 0);\n    __decorate$5([\n        agGridCommunity.RefSelector('cbSelect')\n    ], ToolPanelColumnComp.prototype, \"cbSelect\", void 0);\n    __decorate$5([\n        agGridCommunity.PostConstruct\n    ], ToolPanelColumnComp.prototype, \"init\", null);\n    return ToolPanelColumnComp;\n}(agGridCommunity.Component));\n\nvar __extends$4 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$6 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PrimaryColsListPanel = /** @class */ (function (_super) {\n    __extends$4(PrimaryColsListPanel, _super);\n    function PrimaryColsListPanel() {\n        var _this = _super.call(this, PrimaryColsListPanel.TEMPLATE) || this;\n        _this.selectAllChecked = true;\n        _this.getColumnCompId = function (columnGroupChild) {\n            if (columnGroupChild instanceof agGridCommunity.OriginalColumnGroup) {\n                // group comps are stored using a custom key (groupId + child colIds concatenated) as we need\n                // to distinguish individual column groups after they have been split by user\n                var childIds = columnGroupChild.getLeafColumns().map(function (child) { return child.getId(); }).join('-');\n                return columnGroupChild.getId() + '-' + childIds;\n            }\n            else {\n                return columnGroupChild.getId();\n            }\n        };\n        return _this;\n    }\n    PrimaryColsListPanel.prototype.init = function (params, allowDragging) {\n        var _this = this;\n        this.params = params;\n        this.allowDragging = allowDragging;\n        if (!this.params.suppressSyncLayoutWithGrid) {\n            this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_MOVED, this.onColumnsChanged.bind(this));\n        }\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.onColumnsChanged.bind(this));\n        var eventsImpactingCheckedState = [\n            agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED,\n            agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGED,\n            agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,\n            agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,\n            agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGED,\n            agGridCommunity.Events.EVENT_COLUMN_VISIBLE,\n            agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED\n        ];\n        eventsImpactingCheckedState.forEach(function (event) {\n            // update header select all checkbox with current selection state\n            _this.addDestroyableEventListener(_this.eventService, event, _this.fireSelectionChangedEvent.bind(_this));\n        });\n        this.expandGroupsByDefault = !this.params.contractColumnSelection;\n        if (this.columnController.isReady()) {\n            this.onColumnsChanged();\n        }\n    };\n    PrimaryColsListPanel.prototype.onColumnsChanged = function () {\n        var pivotModeActive = this.columnController.isPivotMode();\n        var shouldSyncColumnLayoutWithGrid = !this.params.suppressSyncLayoutWithGrid && !pivotModeActive;\n        shouldSyncColumnLayoutWithGrid ? this.syncColumnLayout() : this.buildTreeFromProvidedColumnDefs();\n    };\n    PrimaryColsListPanel.prototype.syncColumnLayout = function () {\n        this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this));\n    };\n    PrimaryColsListPanel.prototype.setColumnLayout = function (colDefs) {\n        this.destroyColumnComps();\n        // create column tree using supplied colDef's\n        this.columnTree = this.colDefService.createColumnTree(colDefs);\n        // using col defs to check if groups exist as it could be a custom layout\n        var groupsExist = colDefs.some(function (colDef) {\n            return colDef && typeof colDef.children !== 'undefined';\n        });\n        this.recursivelyAddComps(this.columnTree, 0, groupsExist);\n        this.recursivelySetVisibility(this.columnTree, true);\n        // notify header\n        this.notifyListeners();\n    };\n    PrimaryColsListPanel.prototype.buildTreeFromProvidedColumnDefs = function () {\n        this.destroyColumnComps();\n        // add column / group comps to tool panel\n        this.columnTree = this.columnController.getPrimaryColumnTree();\n        var groupsExist = this.columnController.isPrimaryColumnGroupsPresent();\n        this.recursivelyAddComps(this.columnTree, 0, groupsExist);\n        this.recursivelySetVisibility(this.columnTree, true);\n        // notify header\n        this.notifyListeners();\n    };\n    PrimaryColsListPanel.prototype.recursivelyAddComps = function (tree, dept, groupsExist) {\n        var _this = this;\n        tree.forEach(function (child) {\n            if (child instanceof agGridCommunity.OriginalColumnGroup) {\n                _this.recursivelyAddGroupComps(child, dept, groupsExist);\n            }\n            else {\n                _this.addColumnComps(child, dept, groupsExist);\n            }\n        });\n    };\n    PrimaryColsListPanel.prototype.recursivelyAddGroupComps = function (columnGroup, dept, groupsExist) {\n        var _this = this;\n        // only render group if user provided the definition\n        var newDept;\n        if (columnGroup.getColGroupDef() && columnGroup.getColGroupDef().suppressColumnsToolPanel) {\n            return;\n        }\n        if (!columnGroup.isPadding()) {\n            var renderedGroup = new ToolPanelColumnGroupComp(columnGroup, dept, this.allowDragging, this.expandGroupsByDefault, this.onGroupExpanded.bind(this), function () { return _this.filterResults; });\n            this.getContext().wireBean(renderedGroup);\n            this.getGui().appendChild(renderedGroup.getGui());\n            // we want to indent on the gui for the children\n            newDept = dept + 1;\n            // group comps are stored using a custom key (groupId + child colIds concatenated) as we need\n            // to distinguish individual column groups after they have been split by user\n            var key = this.getColumnCompId(columnGroup);\n            this.columnComps[key] = renderedGroup;\n        }\n        else {\n            // no children, so no indent\n            newDept = dept;\n        }\n        this.recursivelyAddComps(columnGroup.getChildren(), newDept, groupsExist);\n    };\n    PrimaryColsListPanel.prototype.addColumnComps = function (column, dept, groupsExist) {\n        if (column.getColDef() && column.getColDef().suppressColumnsToolPanel) {\n            return;\n        }\n        var columnComp = new ToolPanelColumnComp(column, dept, this.allowDragging, groupsExist);\n        this.getContext().wireBean(columnComp);\n        this.getGui().appendChild(columnComp.getGui());\n        this.columnComps[column.getId()] = columnComp;\n    };\n    PrimaryColsListPanel.prototype.onGroupExpanded = function () {\n        this.recursivelySetVisibility(this.columnTree, true);\n        this.fireGroupExpandedEvent();\n    };\n    PrimaryColsListPanel.prototype.doSetExpandedAll = function (value) {\n        agGridCommunity._.iterateObject(this.columnComps, function (key, renderedItem) {\n            if (renderedItem.isExpandable()) {\n                renderedItem.setExpanded(value);\n            }\n        });\n    };\n    PrimaryColsListPanel.prototype.setGroupsExpanded = function (expand, groupIds) {\n        var _this = this;\n        var expandedGroupIds = [];\n        if (!groupIds) {\n            this.doSetExpandedAll(expand);\n            return;\n        }\n        groupIds.forEach(function (suppliedGroupId) {\n            // we need to search through all comps to handle the case when groups are split\n            agGridCommunity._.iterateObject(_this.columnComps, function (key, comp) {\n                // check if group comp starts with supplied group id as the tool panel keys contain\n                // groupId + childIds concatenated\n                var foundMatchingGroupComp = key.indexOf(suppliedGroupId) === 0;\n                if (foundMatchingGroupComp) {\n                    comp.setExpanded(expand);\n                    expandedGroupIds.push(suppliedGroupId);\n                }\n            });\n        });\n        var unrecognisedGroupIds = groupIds.filter(function (groupId) { return !agGridCommunity._.includes(expandedGroupIds, groupId); });\n        if (unrecognisedGroupIds.length > 0) {\n            console.warn('ag-Grid: unable to find group(s) for supplied groupIds:', unrecognisedGroupIds);\n        }\n    };\n    PrimaryColsListPanel.prototype.getExpandState = function () {\n        var _this = this;\n        var expandedCount = 0;\n        var notExpandedCount = 0;\n        var recursiveFunc = function (items) {\n            items.forEach(function (item) {\n                // only interested in groups\n                if (item instanceof agGridCommunity.OriginalColumnGroup) {\n                    var compId = _this.getColumnCompId(item);\n                    var comp = _this.columnComps[compId];\n                    if (comp) {\n                        if (comp.isExpanded()) {\n                            expandedCount++;\n                        }\n                        else {\n                            notExpandedCount++;\n                        }\n                    }\n                    var columnGroup = item;\n                    var groupChildren = columnGroup.getChildren();\n                    recursiveFunc(groupChildren);\n                }\n            });\n        };\n        recursiveFunc(this.columnTree);\n        if (expandedCount > 0 && notExpandedCount > 0) {\n            return EXPAND_STATE.INDETERMINATE;\n        }\n        else if (notExpandedCount > 0) {\n            return EXPAND_STATE.COLLAPSED;\n        }\n        else {\n            return EXPAND_STATE.EXPANDED;\n        }\n    };\n    PrimaryColsListPanel.prototype.doSetSelectedAll = function (selectAllChecked) {\n        this.selectAllChecked = selectAllChecked;\n        this.updateSelections();\n    };\n    PrimaryColsListPanel.prototype.updateSelections = function () {\n        var _this = this;\n        if (this.columnApi.isPivotMode()) {\n            // if pivot mode is on, then selecting columns has special meaning (eg group, aggregate, pivot etc),\n            // so there is no bulk operation we can do.\n            agGridCommunity._.iterateObject(this.columnComps, function (key, column) {\n                column.onSelectAllChanged(_this.selectAllChecked);\n            });\n        }\n        else {\n            // however if pivot mode is off, then it's all about column visibility so we can do a bulk\n            // operation directly with the column controller. we could column.onSelectAllChanged(checked)\n            // as above, however this would work on each column independently and take longer.\n            if (!agGridCommunity._.exists(this.filterText)) {\n                var primaryCols = this.columnApi.getPrimaryColumns();\n                // we don't want to change visibility on lock visible / hidden columns\n                var colsToChange = primaryCols.filter(function (col) {\n                    return !col.getColDef().lockVisible && !col.getColDef().hide;\n                });\n                this.columnApi.setColumnsVisible(colsToChange, this.selectAllChecked);\n                return;\n            }\n            // obtain list of columns currently filtered\n            var filteredCols_1 = [];\n            agGridCommunity._.iterateObject(this.filterResults, function (key, passesFilter) {\n                if (passesFilter)\n                    filteredCols_1.push(key);\n            });\n            if (filteredCols_1.length > 0) {\n                // update visibility of columns currently filtered\n                this.columnApi.setColumnsVisible(filteredCols_1, this.selectAllChecked);\n                // update select all header with new state\n                var selectionState = this.selectAllChecked ? SELECTED_STATE.CHECKED : SELECTED_STATE.UNCHECKED;\n                this.dispatchEvent({ type: 'selectionChanged', state: selectionState });\n            }\n        }\n    };\n    PrimaryColsListPanel.prototype.getSelectionState = function () {\n        var _this = this;\n        var allPrimaryColumns = this.columnController.getAllPrimaryColumns();\n        var columns = [];\n        if (allPrimaryColumns !== null) {\n            columns = allPrimaryColumns.filter(function (col) { return !col.getColDef().lockVisible; });\n        }\n        var pivotMode = this.columnController.isPivotMode();\n        var checkedCount = 0;\n        var uncheckedCount = 0;\n        columns.forEach(function (col) {\n            // ignore lock visible columns\n            if (col.getColDef().lockVisible) {\n                return;\n            }\n            // not not count columns not in tool panel\n            var colDef = col.getColDef();\n            if (colDef && colDef.suppressColumnsToolPanel) {\n                return;\n            }\n            // ignore columns that have been removed from panel by filter\n            if (_this.filterResults && !_this.filterResults[col.getColId()])\n                return;\n            var checked;\n            if (pivotMode) {\n                var noPivotModeOptionsAllowed = !col.isAllowPivot() && !col.isAllowRowGroup() && !col.isAllowValue();\n                if (noPivotModeOptionsAllowed) {\n                    return;\n                }\n                checked = col.isValueActive() || col.isPivotActive() || col.isRowGroupActive();\n            }\n            else {\n                checked = col.isVisible();\n            }\n            if (checked) {\n                checkedCount++;\n            }\n            else {\n                uncheckedCount++;\n            }\n        });\n        if (checkedCount > 0 && uncheckedCount > 0) {\n            return SELECTED_STATE.INDETERMINATE;\n        }\n        else if (checkedCount === 0 || uncheckedCount > 0) {\n            return SELECTED_STATE.UNCHECKED;\n        }\n        else {\n            return SELECTED_STATE.CHECKED;\n        }\n    };\n    PrimaryColsListPanel.prototype.setFilterText = function (filterText) {\n        this.filterText = agGridCommunity._.exists(filterText) ? filterText.toLowerCase() : null;\n        this.filterColumns();\n        this.recursivelySetVisibility(this.columnTree, true);\n        // groups selection state may need to be updated when filter is present\n        agGridCommunity._.iterateObject(this.columnComps, function (key, columnComp) {\n            if (columnComp instanceof ToolPanelColumnGroupComp) {\n                columnComp.onColumnStateChanged();\n            }\n        });\n        // update header panel with current selection and expanded state\n        this.fireSelectionChangedEvent();\n        this.fireGroupExpandedEvent();\n    };\n    PrimaryColsListPanel.prototype.filterColumns = function () {\n        var _this = this;\n        var filterResults = {};\n        var passesFilter = function (item) {\n            if (!agGridCommunity._.exists(_this.filterText))\n                return true;\n            var columnCompId = _this.getColumnCompId(item);\n            var comp = _this.columnComps[columnCompId];\n            if (!comp)\n                return false;\n            var isPaddingGroup = item instanceof agGridCommunity.OriginalColumnGroup && item.isPadding();\n            if (isPaddingGroup)\n                return false;\n            var displayName = comp.getDisplayName();\n            return displayName !== null ? displayName.toLowerCase().indexOf(_this.filterText) >= 0 : true;\n        };\n        var recursivelyCheckFilter = function (item, parentPasses) {\n            var atLeastOneChildPassed = false;\n            if (item instanceof agGridCommunity.OriginalColumnGroup) {\n                var groupPasses_1 = passesFilter(item);\n                item.getChildren().forEach(function (child) {\n                    var childPasses = recursivelyCheckFilter(child, groupPasses_1 || parentPasses);\n                    if (childPasses) {\n                        atLeastOneChildPassed = childPasses;\n                    }\n                });\n            }\n            var filterPasses = (parentPasses || atLeastOneChildPassed) ? true : passesFilter(item);\n            var columnCompId = _this.getColumnCompId(item);\n            filterResults[columnCompId] = filterPasses;\n            return filterPasses;\n        };\n        this.columnTree.forEach(function (item) { return recursivelyCheckFilter(item, false); });\n        this.filterResults = filterResults;\n    };\n    PrimaryColsListPanel.prototype.recursivelySetVisibility = function (columnTree, parentGroupsOpen) {\n        var _this = this;\n        columnTree.forEach(function (child) {\n            var compId = _this.getColumnCompId(child);\n            var comp = _this.columnComps[compId];\n            if (comp) {\n                var passesFilter = _this.filterResults ? _this.filterResults[compId] : true;\n                comp.setDisplayed(parentGroupsOpen && passesFilter);\n            }\n            if (child instanceof agGridCommunity.OriginalColumnGroup) {\n                var columnGroup = child;\n                var childrenOpen = void 0;\n                if (comp) {\n                    var expanded = comp.isExpanded();\n                    childrenOpen = parentGroupsOpen ? expanded : false;\n                }\n                else {\n                    childrenOpen = parentGroupsOpen;\n                }\n                var children = columnGroup.getChildren();\n                _this.recursivelySetVisibility(children, childrenOpen);\n            }\n        });\n    };\n    PrimaryColsListPanel.prototype.notifyListeners = function () {\n        this.fireGroupExpandedEvent();\n        this.fireSelectionChangedEvent();\n    };\n    PrimaryColsListPanel.prototype.fireGroupExpandedEvent = function () {\n        var expandState = this.getExpandState();\n        this.dispatchEvent({ type: 'groupExpanded', state: expandState });\n    };\n    PrimaryColsListPanel.prototype.fireSelectionChangedEvent = function () {\n        var selectionState = this.getSelectionState();\n        this.dispatchEvent({ type: 'selectionChanged', state: selectionState });\n    };\n    PrimaryColsListPanel.prototype.destroyColumnComps = function () {\n        agGridCommunity._.clearElement(this.getGui());\n        if (this.columnComps) {\n            agGridCommunity._.iterateObject(this.columnComps, function (key, renderedItem) { return renderedItem.destroy(); });\n        }\n        this.columnComps = {};\n    };\n    PrimaryColsListPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.destroyColumnComps();\n    };\n    PrimaryColsListPanel.TEMPLATE = \"<div class=\\\"ag-primary-cols-list-panel\\\"></div>\";\n    __decorate$6([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], PrimaryColsListPanel.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$6([\n        agGridCommunity.Autowired('columnController')\n    ], PrimaryColsListPanel.prototype, \"columnController\", void 0);\n    __decorate$6([\n        agGridCommunity.Autowired('toolPanelColDefService')\n    ], PrimaryColsListPanel.prototype, \"colDefService\", void 0);\n    __decorate$6([\n        agGridCommunity.Autowired('eventService')\n    ], PrimaryColsListPanel.prototype, \"eventService\", void 0);\n    __decorate$6([\n        agGridCommunity.Autowired('columnApi')\n    ], PrimaryColsListPanel.prototype, \"columnApi\", void 0);\n    return PrimaryColsListPanel;\n}(agGridCommunity.Component));\n\nvar __extends$5 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$7 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PivotModePanel = /** @class */ (function (_super) {\n    __extends$5(PivotModePanel, _super);\n    function PivotModePanel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PivotModePanel.prototype.createTemplate = function () {\n        return \"<div class=\\\"ag-pivot-mode-panel\\\">\\n                <ag-checkbox ref=\\\"cbPivotMode\\\" class=\\\"ag-pivot-mode-select\\\"></ag-checkbox>\\n            </div>\";\n    };\n    PivotModePanel.prototype.init = function () {\n        this.setTemplate(this.createTemplate());\n        this.cbPivotMode.setValue(this.columnController.isPivotMode());\n        var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n        this.cbPivotMode.setLabel(localeTextFunc('pivotMode', 'Pivot Mode'));\n        this.addDestroyableEventListener(this.cbPivotMode, agGridCommunity.AgCheckbox.EVENT_CHANGED, this.onBtPivotMode.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.onPivotModeChanged.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.onPivotModeChanged.bind(this));\n    };\n    PivotModePanel.prototype.onBtPivotMode = function () {\n        var newValue = this.cbPivotMode.getValue();\n        if (newValue !== this.columnController.isPivotMode()) {\n            this.columnController.setPivotMode(newValue, \"toolPanelUi\");\n            var api = this.gridOptionsWrapper.getApi();\n            if (api) {\n                api.refreshHeader();\n            }\n        }\n    };\n    PivotModePanel.prototype.onPivotModeChanged = function () {\n        var pivotModeActive = this.columnController.isPivotMode();\n        this.cbPivotMode.setValue(pivotModeActive);\n    };\n    __decorate$7([\n        agGridCommunity.Autowired('columnController')\n    ], PivotModePanel.prototype, \"columnController\", void 0);\n    __decorate$7([\n        agGridCommunity.Autowired('eventService')\n    ], PivotModePanel.prototype, \"eventService\", void 0);\n    __decorate$7([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], PivotModePanel.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$7([\n        agGridCommunity.RefSelector('cbPivotMode')\n    ], PivotModePanel.prototype, \"cbPivotMode\", void 0);\n    __decorate$7([\n        agGridCommunity.PreConstruct\n    ], PivotModePanel.prototype, \"init\", null);\n    return PivotModePanel;\n}(agGridCommunity.Component));\n\nvar __decorate$8 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AggregationStage = /** @class */ (function () {\n    function AggregationStage() {\n    }\n    // it's possible to recompute the aggregate without doing the other parts\n    // + gridApi.recomputeAggregates()\n    AggregationStage.prototype.execute = function (params) {\n        // we don't do aggregation if doing legacy tree good\n        var doingLegacyTreeData = agGridCommunity._.exists(this.gridOptionsWrapper.getNodeChildDetailsFunc());\n        if (doingLegacyTreeData) {\n            return null;\n        }\n        // if changed path is active, it means we came from a) change detection or b) transaction update.\n        // for both of these, if no value columns are present, it means there is nothing to aggregate now\n        // and there is no cleanup to be done (as value columns don't change between transactions or change\n        // detections). if no value columns and no changed path, means we have to go through all nodes in\n        // case we need to clean up agg data from before.\n        var noValueColumns = agGridCommunity._.missingOrEmpty(this.columnController.getValueColumns());\n        var noUserAgg = !this.gridOptionsWrapper.getGroupRowAggNodesFunc();\n        var changedPathActive = params.changedPath && params.changedPath.isActive();\n        if (noValueColumns && noUserAgg && changedPathActive) {\n            return;\n        }\n        var aggDetails = this.createAggDetails(params);\n        this.recursivelyCreateAggData(aggDetails);\n    };\n    AggregationStage.prototype.createAggDetails = function (params) {\n        var pivotActive = this.columnController.isPivotActive();\n        var measureColumns = this.columnController.getValueColumns();\n        var pivotColumns = pivotActive ? this.columnController.getPivotColumns() : [];\n        var aggDetails = {\n            changedPath: params.changedPath,\n            valueColumns: measureColumns,\n            pivotColumns: pivotColumns\n        };\n        return aggDetails;\n    };\n    AggregationStage.prototype.recursivelyCreateAggData = function (aggDetails) {\n        var _this = this;\n        var callback = function (rowNode) {\n            var hasNoChildren = !rowNode.hasChildren();\n            if (hasNoChildren) {\n                // this check is needed for TreeData, in case the node is no longer a child,\n                // but it was a child previously.\n                if (rowNode.aggData) {\n                    rowNode.setAggData(null);\n                }\n                // never agg data for leaf nodes\n                return;\n            }\n            //Optionally prevent the aggregation at the root Node\n            //https://ag-grid.atlassian.net/browse/AG-388\n            var isRootNode = rowNode.level === -1;\n            if (isRootNode) {\n                var notPivoting = !_this.columnController.isPivotMode();\n                var suppressAggAtRootLevel = _this.gridOptionsWrapper.isSuppressAggAtRootLevel();\n                if (suppressAggAtRootLevel && notPivoting) {\n                    return;\n                }\n            }\n            _this.aggregateRowNode(rowNode, aggDetails);\n        };\n        aggDetails.changedPath.forEachChangedNodeDepthFirst(callback, true);\n    };\n    AggregationStage.prototype.aggregateRowNode = function (rowNode, aggDetails) {\n        var measureColumnsMissing = aggDetails.valueColumns.length === 0;\n        var pivotColumnsMissing = aggDetails.pivotColumns.length === 0;\n        var userFunc = this.gridOptionsWrapper.getGroupRowAggNodesFunc();\n        var aggResult;\n        if (userFunc) {\n            aggResult = userFunc(rowNode.childrenAfterFilter);\n        }\n        else if (measureColumnsMissing) {\n            aggResult = null;\n        }\n        else if (pivotColumnsMissing) {\n            aggResult = this.aggregateRowNodeUsingValuesOnly(rowNode, aggDetails);\n        }\n        else {\n            aggResult = this.aggregateRowNodeUsingValuesAndPivot(rowNode);\n        }\n        rowNode.setAggData(aggResult);\n        // if we are grouping, then it's possible there is a sibling footer\n        // to the group, so update the data here also if there is one\n        if (rowNode.sibling) {\n            rowNode.sibling.setAggData(aggResult);\n        }\n    };\n    AggregationStage.prototype.aggregateRowNodeUsingValuesAndPivot = function (rowNode) {\n        var _this = this;\n        var result = {};\n        var pivotColumnDefs = this.pivotStage.getPivotColumnDefs();\n        // Step 1: process value columns\n        pivotColumnDefs\n            .filter(function (v) { return !agGridCommunity._.exists(v.pivotTotalColumnIds); }) // only process pivot value columns\n            .forEach(function (valueColDef) {\n            var keys = valueColDef.pivotKeys || [];\n            var values;\n            var valueColumn = valueColDef.pivotValueColumn;\n            var colId = valueColDef.colId;\n            if (rowNode.leafGroup) {\n                // lowest level group, get the values from the mapped set\n                values = _this.getValuesFromMappedSet(rowNode.childrenMapped, keys, valueColumn);\n            }\n            else {\n                // value columns and pivot columns, non-leaf group\n                values = _this.getValuesPivotNonLeaf(rowNode, colId);\n            }\n            result[colId] = _this.aggregateValues(values, valueColumn.getAggFunc());\n        });\n        // Step 2: process total columns\n        pivotColumnDefs\n            .filter(function (v) { return agGridCommunity._.exists(v.pivotTotalColumnIds); }) // only process pivot total columns\n            .forEach(function (totalColDef) {\n            var aggResults = [];\n            var pivotValueColumn = totalColDef.pivotValueColumn, pivotTotalColumnIds = totalColDef.pivotTotalColumnIds, colId = totalColDef.colId;\n            //retrieve results for colIds associated with this pivot total column\n            if (!pivotTotalColumnIds || !pivotTotalColumnIds.length) {\n                return;\n            }\n            pivotTotalColumnIds.forEach(function (colId) {\n                aggResults.push(result[colId]);\n            });\n            result[colId] = _this.aggregateValues(aggResults, pivotValueColumn.getAggFunc());\n        });\n        return result;\n    };\n    AggregationStage.prototype.aggregateRowNodeUsingValuesOnly = function (rowNode, aggDetails) {\n        var _this = this;\n        var result = {};\n        var changedValueColumns = aggDetails.changedPath.isActive() ?\n            aggDetails.changedPath.getValueColumnsForNode(rowNode, aggDetails.valueColumns)\n            : aggDetails.valueColumns;\n        var notChangedValueColumns = aggDetails.changedPath.isActive() ?\n            aggDetails.changedPath.getNotValueColumnsForNode(rowNode, aggDetails.valueColumns)\n            : null;\n        var values2d = this.getValuesNormal(rowNode, changedValueColumns);\n        var oldValues = rowNode.aggData;\n        changedValueColumns.forEach(function (valueColumn, index) {\n            result[valueColumn.getId()] = _this.aggregateValues(values2d[index], valueColumn.getAggFunc());\n        });\n        if (notChangedValueColumns && oldValues) {\n            notChangedValueColumns.forEach(function (valueColumn) {\n                result[valueColumn.getId()] = oldValues[valueColumn.getId()];\n            });\n        }\n        return result;\n    };\n    AggregationStage.prototype.getValuesPivotNonLeaf = function (rowNode, colId) {\n        var values = [];\n        rowNode.childrenAfterFilter.forEach(function (node) {\n            var value = node.aggData[colId];\n            values.push(value);\n        });\n        return values;\n    };\n    AggregationStage.prototype.getValuesFromMappedSet = function (mappedSet, keys, valueColumn) {\n        var _this = this;\n        var mapPointer = mappedSet;\n        keys.forEach(function (key) { return (mapPointer = mapPointer ? mapPointer[key] : null); });\n        if (!mapPointer) {\n            return [];\n        }\n        var values = [];\n        mapPointer.forEach(function (rowNode) {\n            var value = _this.valueService.getValue(valueColumn, rowNode);\n            values.push(value);\n        });\n        return values;\n    };\n    AggregationStage.prototype.getValuesNormal = function (rowNode, valueColumns) {\n        // create 2d array, of all values for all valueColumns\n        var values = [];\n        valueColumns.forEach(function () { return values.push([]); });\n        var valueColumnCount = valueColumns.length;\n        var rowCount = rowNode.childrenAfterFilter.length;\n        for (var i = 0; i < rowCount; i++) {\n            var childNode = rowNode.childrenAfterFilter[i];\n            for (var j = 0; j < valueColumnCount; j++) {\n                var valueColumn = valueColumns[j];\n                // if the row is a group, then it will only have an agg result value,\n                // which means valueGetter is never used.\n                var value = this.valueService.getValue(valueColumn, childNode);\n                values[j].push(value);\n            }\n        }\n        return values;\n    };\n    AggregationStage.prototype.aggregateValues = function (values, aggFuncOrString) {\n        var aggFunction = typeof aggFuncOrString === 'string' ?\n            this.aggFuncService.getAggFunc(aggFuncOrString) :\n            aggFuncOrString;\n        if (typeof aggFunction !== 'function') {\n            console.error(\"ag-Grid: unrecognised aggregation function \" + aggFuncOrString);\n            return null;\n        }\n        return aggFunction(values);\n    };\n    __decorate$8([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], AggregationStage.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$8([\n        agGridCommunity.Autowired('columnController')\n    ], AggregationStage.prototype, \"columnController\", void 0);\n    __decorate$8([\n        agGridCommunity.Autowired('valueService')\n    ], AggregationStage.prototype, \"valueService\", void 0);\n    __decorate$8([\n        agGridCommunity.Autowired('pivotStage')\n    ], AggregationStage.prototype, \"pivotStage\", void 0);\n    __decorate$8([\n        agGridCommunity.Autowired('aggFuncService')\n    ], AggregationStage.prototype, \"aggFuncService\", void 0);\n    AggregationStage = __decorate$8([\n        agGridCommunity.Bean('aggregationStage')\n    ], AggregationStage);\n    return AggregationStage;\n}());\n\nvar __decorate$9 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar GroupStage = /** @class */ (function () {\n    function GroupStage() {\n        // we use a sequence variable so that each time we do a grouping, we don't\n        // reuse the ids - otherwise the rowRenderer will confuse rowNodes between redraws\n        // when it tries to animate between rows. we set to -1 as others row id 0 will be shared\n        // with the other rows.\n        this.groupIdSequence = new agGridCommunity.NumberSequence(1);\n    }\n    GroupStage.prototype.postConstruct = function () {\n        this.usingTreeData = this.gridOptionsWrapper.isTreeData();\n        if (this.usingTreeData) {\n            this.getDataPath = this.gridOptionsWrapper.getDataPathFunc();\n        }\n    };\n    GroupStage.prototype.execute = function (params) {\n        var details = this.createGroupingDetails(params);\n        if (details.transaction) {\n            this.handleTransaction(details);\n        }\n        else {\n            var afterColsChanged = params.afterColumnsChanged === true;\n            this.shotgunResetEverything(details, afterColsChanged);\n        }\n        this.sortGroupsWithComparator(details.rootNode);\n        this.selectableService.updateSelectableAfterGrouping(details.rootNode);\n    };\n    GroupStage.prototype.createGroupingDetails = function (params) {\n        var rowNode = params.rowNode, changedPath = params.changedPath, rowNodeTransaction = params.rowNodeTransaction, rowNodeOrder = params.rowNodeOrder;\n        var groupedCols = this.usingTreeData ? null : this.columnController.getRowGroupColumns();\n        var isGrouping = this.usingTreeData || (groupedCols && groupedCols.length > 0);\n        var usingTransaction = isGrouping && agGridCommunity._.exists(rowNodeTransaction);\n        var details = {\n            // someone complained that the parent attribute was causing some change detection\n            // to break is some angular add-on - which i never used. taking the parent out breaks\n            // a cyclic dependency, hence this flag got introduced.\n            includeParents: !this.gridOptionsWrapper.isSuppressParentsInRowNodes(),\n            expandByDefault: this.gridOptionsWrapper.isGroupSuppressRow() ?\n                -1 : this.gridOptionsWrapper.getGroupDefaultExpanded(),\n            groupedCols: groupedCols,\n            rootNode: rowNode,\n            pivotMode: this.columnController.isPivotMode(),\n            groupedColCount: this.usingTreeData || !groupedCols ? 0 : groupedCols.length,\n            rowNodeOrder: rowNodeOrder,\n            // important not to do transaction if we are not grouping, as otherwise the 'insert index' is ignored.\n            // ie, if not grouping, then we just want to shotgun so the rootNode.allLeafChildren gets copied\n            // to rootNode.childrenAfterGroup and maintaining order (as delta transaction misses the order).\n            transaction: usingTransaction ? rowNodeTransaction : null,\n            // if no transaction, then it's shotgun, changed path would be 'not active' at this point anyway\n            changedPath: changedPath\n        };\n        return details;\n    };\n    GroupStage.prototype.handleTransaction = function (details) {\n        var tran = details.transaction;\n        if (tran.add) {\n            this.insertNodes(tran.add, details, false);\n        }\n        if (tran.update) {\n            this.moveNodesInWrongPath(tran.update, details);\n        }\n        if (tran.remove) {\n            this.removeNodes(tran.remove, details);\n        }\n        if (details.rowNodeOrder) {\n            this.sortChildren(details);\n        }\n    };\n    // this is used when doing delta updates, eg Redux, keeps nodes in right order\n    GroupStage.prototype.sortChildren = function (details) {\n        details.changedPath.forEachChangedNodeDepthFirst(function (rowNode) {\n            agGridCommunity._.sortRowNodesByOrder(rowNode.childrenAfterGroup, details.rowNodeOrder);\n        });\n    };\n    GroupStage.prototype.sortGroupsWithComparator = function (rootNode) {\n        // we don't do group sorting for tree data\n        if (this.usingTreeData) {\n            return;\n        }\n        var comparator = this.gridOptionsWrapper.getDefaultGroupSortComparator();\n        if (agGridCommunity._.exists(comparator)) {\n            recursiveSort(rootNode);\n        }\n        function recursiveSort(rowNode) {\n            var doSort = agGridCommunity._.exists(rowNode.childrenAfterGroup) &&\n                // we only want to sort groups, so we do not sort leafs (a leaf group has leafs as children)\n                !rowNode.leafGroup;\n            if (doSort) {\n                rowNode.childrenAfterGroup.sort(comparator);\n                rowNode.childrenAfterGroup.forEach(function (childNode) { return recursiveSort(childNode); });\n            }\n        }\n    };\n    GroupStage.prototype.getExistingPathForNode = function (node, details) {\n        var res = [];\n        // when doing tree data, the node is part of the path,\n        // but when doing grid grouping, the node is not part of the path so we start with the parent.\n        var pointer = this.usingTreeData ? node : node.parent;\n        while (pointer && pointer !== details.rootNode) {\n            res.push({\n                key: pointer.key,\n                rowGroupColumn: pointer.rowGroupColumn,\n                field: pointer.field\n            });\n            pointer = pointer.parent;\n        }\n        res.reverse();\n        return res;\n    };\n    GroupStage.prototype.moveNodesInWrongPath = function (childNodes, details) {\n        var _this = this;\n        childNodes.forEach(function (childNode) {\n            // we add node, even if parent has not changed, as the data could have\n            // changed, hence aggregations will be wrong\n            if (details.changedPath.isActive()) {\n                details.changedPath.addParentNode(childNode.parent);\n            }\n            var infoToKeyMapper = function (item) { return item.key; };\n            var oldPath = _this.getExistingPathForNode(childNode, details).map(infoToKeyMapper);\n            var newPath = _this.getGroupInfo(childNode, details).map(infoToKeyMapper);\n            var nodeInCorrectPath = agGridCommunity._.compareArrays(oldPath, newPath);\n            if (!nodeInCorrectPath) {\n                _this.moveNode(childNode, details);\n            }\n        });\n    };\n    GroupStage.prototype.moveNode = function (childNode, details) {\n        this.removeNodesInStages([childNode], details);\n        this.insertOneNode(childNode, details, true);\n        // hack - if we didn't do this, then renaming a tree item (ie changing rowNode.key) wouldn't get\n        // refreshed into the gui.\n        // this is needed to kick off the event that rowComp listens to for refresh. this in turn\n        // then will get each cell in the row to refresh - which is what we need as we don't know which\n        // columns will be displaying the rowNode.key info.\n        childNode.setData(childNode.data);\n        // we add both old and new parents to changed path, as both will need to be refreshed.\n        // we already added the old parent (in calling method), so just add the new parent here\n        if (details.changedPath.isActive()) {\n            var newParent = childNode.parent;\n            details.changedPath.addParentNode(newParent);\n        }\n    };\n    GroupStage.prototype.removeNodes = function (leafRowNodes, details) {\n        this.removeNodesInStages(leafRowNodes, details);\n        if (details.changedPath.isActive()) {\n            leafRowNodes.forEach(function (rowNode) { return details.changedPath.addParentNode(rowNode.parent); });\n        }\n    };\n    GroupStage.prototype.removeNodesInStages = function (leafRowNodes, details) {\n        this.removeNodesFromParents(leafRowNodes, details);\n        this.postRemoveCreateFillerNodes(leafRowNodes, details);\n        this.postRemoveRemoveEmptyGroups(leafRowNodes, details);\n    };\n    GroupStage.prototype.forEachParentGroup = function (details, child, callback) {\n        var pointer = child.parent;\n        while (pointer && pointer !== details.rootNode) {\n            callback(pointer);\n            pointer = pointer.parent;\n        }\n    };\n    GroupStage.prototype.removeNodesFromParents = function (nodesToRemove, details) {\n        var _this = this;\n        var batchRemover = new BatchRemover();\n        nodesToRemove.forEach(function (nodeToRemove) {\n            _this.removeFromParent(nodeToRemove, batchRemover);\n            // remove from allLeafChildren. we clear down all parents EXCEPT the Root Node, as\n            // the ClientSideNodeManager is responsible for the Root Node.\n            _this.forEachParentGroup(details, nodeToRemove, function (parentNode) {\n                batchRemover.removeFromAllLeafChildren(parentNode, nodeToRemove);\n            });\n        });\n        batchRemover.flush();\n    };\n    GroupStage.prototype.postRemoveCreateFillerNodes = function (nodesToRemove, details) {\n        var _this = this;\n        nodesToRemove.forEach(function (nodeToRemove) {\n            // if not group, and children are present, need to move children to a group.\n            // otherwise if no children, we can just remove without replacing.\n            var replaceWithGroup = nodeToRemove.hasChildren();\n            if (replaceWithGroup) {\n                var oldPath = _this.getExistingPathForNode(nodeToRemove, details);\n                // because we just removed the userGroup, this will always return new support group\n                var newGroupNode_1 = _this.findParentForNode(nodeToRemove, oldPath, details);\n                // these properties are the ones that will be incorrect in the newly created group,\n                // so copy them from the old childNode\n                newGroupNode_1.expanded = nodeToRemove.expanded;\n                newGroupNode_1.allLeafChildren = nodeToRemove.allLeafChildren;\n                newGroupNode_1.childrenAfterGroup = nodeToRemove.childrenAfterGroup;\n                newGroupNode_1.childrenMapped = nodeToRemove.childrenMapped;\n                newGroupNode_1.childrenAfterGroup.forEach(function (rowNode) { return rowNode.parent = newGroupNode_1; });\n            }\n        });\n    };\n    GroupStage.prototype.postRemoveRemoveEmptyGroups = function (nodesToRemove, details) {\n        var _this = this;\n        // we do this multiple times, as when we remove groups, that means the parent of just removed\n        // group can then be empty. to get around this, if we remove, then we check everything again for\n        // newly emptied groups. the max number of times this will execute is the depth of the group tree.\n        var checkAgain = true;\n        var groupShouldBeRemoved = function (rowNode) {\n            // because of the while loop below, it's possible we already moved the node,\n            // so double check before trying to remove again.\n            var mapKey = _this.getChildrenMappedKey(rowNode.key, rowNode.rowGroupColumn);\n            var parentRowNode = rowNode.parent;\n            var groupAlreadyRemoved = (parentRowNode && parentRowNode.childrenMapped) ?\n                !parentRowNode.childrenMapped[mapKey] : true;\n            if (groupAlreadyRemoved) {\n                // if not linked, then group was already removed\n                return false;\n            }\n            else {\n                // if still not removed, then we remove if this group is empty\n                return rowNode.isEmptyRowGroupNode();\n            }\n        };\n        var _loop_1 = function () {\n            checkAgain = false;\n            var batchRemover = new BatchRemover();\n            nodesToRemove.forEach(function (nodeToRemove) {\n                // remove empty groups\n                _this.forEachParentGroup(details, nodeToRemove, function (rowNode) {\n                    if (groupShouldBeRemoved(rowNode)) {\n                        checkAgain = true;\n                        _this.removeFromParent(rowNode, batchRemover);\n                        // we remove selection on filler nodes here, as the selection would not be removed\n                        // from the RowNodeManager, as filler nodes don't exist on the RowNodeManager\n                        rowNode.setSelected(false);\n                    }\n                });\n            });\n            batchRemover.flush();\n        };\n        while (checkAgain) {\n            _loop_1();\n        }\n    };\n    // removes the node from the parent by:\n    // a) removing from childrenAfterGroup (using batchRemover if present, otherwise immediately)\n    // b) removing from childrenMapped (immediately)\n    // c) setRowTop(null) - as the rowRenderer uses this to know the RowNode is no longer needed\n    GroupStage.prototype.removeFromParent = function (child, batchRemover) {\n        if (child.parent) {\n            if (batchRemover) {\n                batchRemover.removeFromChildrenAfterGroup(child.parent, child);\n            }\n            else {\n                agGridCommunity._.removeFromArray(child.parent.childrenAfterGroup, child);\n            }\n        }\n        var mapKey = this.getChildrenMappedKey(child.key, child.rowGroupColumn);\n        if (child.parent && child.parent.childrenMapped) {\n            child.parent.childrenMapped[mapKey] = undefined;\n        }\n        // this is important for transition, see rowComp removeFirstPassFuncs. when doing animation and\n        // remove, if rowTop is still present, the rowComp thinks it's just moved position.\n        child.setRowTop(null);\n    };\n    GroupStage.prototype.addToParent = function (child, parent) {\n        var mapKey = this.getChildrenMappedKey(child.key, child.rowGroupColumn);\n        if (parent) {\n            if (parent.childrenMapped) {\n                parent.childrenMapped[mapKey] = child;\n            }\n            parent.childrenAfterGroup.push(child);\n        }\n    };\n    GroupStage.prototype.areGroupColsEqual = function (d1, d2) {\n        if (d1 == null || d2 == null) {\n            return false;\n        }\n        if (d1.pivotMode !== d2.pivotMode) {\n            return false;\n        }\n        if (!agGridCommunity._.compareArrays(d1.groupedCols, d2.groupedCols)) {\n            return false;\n        }\n        return true;\n    };\n    GroupStage.prototype.shotgunResetEverything = function (details, afterColumnsChanged) {\n        var skipStage = afterColumnsChanged ?\n            this.usingTreeData || this.areGroupColsEqual(details, this.oldGroupingDetails)\n            : false;\n        this.oldGroupingDetails = details;\n        if (skipStage) {\n            return;\n        }\n        // because we are not creating the root node each time, we have the logic\n        // here to change leafGroup once.\n        // we set .leafGroup to false for tree data, as .leafGroup is only used when pivoting, and pivoting\n        // isn't allowed with treeData, so the grid never actually use .leafGroup when doing treeData.\n        details.rootNode.leafGroup = this.usingTreeData ? false : details.groupedCols.length === 0;\n        // we are doing everything from scratch, so reset childrenAfterGroup and childrenMapped from the rootNode\n        details.rootNode.childrenAfterGroup = [];\n        details.rootNode.childrenMapped = {};\n        this.insertNodes(details.rootNode.allLeafChildren, details, false);\n    };\n    GroupStage.prototype.insertNodes = function (newRowNodes, details, isMove) {\n        var _this = this;\n        newRowNodes.forEach(function (rowNode) {\n            _this.insertOneNode(rowNode, details, isMove);\n            if (details.changedPath.isActive()) {\n                details.changedPath.addParentNode(rowNode.parent);\n            }\n        });\n    };\n    GroupStage.prototype.insertOneNode = function (childNode, details, isMove) {\n        var path = this.getGroupInfo(childNode, details);\n        var parentGroup = this.findParentForNode(childNode, path, details);\n        if (!parentGroup.group) {\n            console.warn(\"ag-Grid: duplicate group keys for row data, keys should be unique\", [parentGroup.data, childNode.data]);\n        }\n        if (this.usingTreeData) {\n            this.swapGroupWithUserNode(parentGroup, childNode, isMove);\n        }\n        else {\n            childNode.parent = parentGroup;\n            childNode.level = path.length;\n            parentGroup.childrenAfterGroup.push(childNode);\n        }\n    };\n    GroupStage.prototype.findParentForNode = function (childNode, path, details) {\n        var _this = this;\n        var nextNode = details.rootNode;\n        path.forEach(function (groupInfo, level) {\n            nextNode = _this.getOrCreateNextNode(nextNode, groupInfo, level, details);\n            // node gets added to all group nodes.\n            // note: we do not add to rootNode here, as the rootNode is the master list of rowNodes\n            nextNode.allLeafChildren.push(childNode);\n        });\n        return nextNode;\n    };\n    GroupStage.prototype.swapGroupWithUserNode = function (fillerGroup, userGroup, isMove) {\n        userGroup.parent = fillerGroup.parent;\n        userGroup.key = fillerGroup.key;\n        userGroup.field = fillerGroup.field;\n        userGroup.groupData = fillerGroup.groupData;\n        userGroup.level = fillerGroup.level;\n        // AG-3441 - preserve the existing expanded status of the node if we're moving it, so that\n        // you can drag a sub tree from one parent to another without changing its expansion\n        if (!isMove) {\n            userGroup.expanded = fillerGroup.expanded;\n        }\n        // we set .leafGroup to false for tree data, as .leafGroup is only used when pivoting, and pivoting\n        // isn't allowed with treeData, so the grid never actually use .leafGroup when doing treeData.\n        userGroup.leafGroup = fillerGroup.leafGroup;\n        // always null for userGroups, as row grouping is not allowed when doing tree data\n        userGroup.rowGroupIndex = fillerGroup.rowGroupIndex;\n        userGroup.allLeafChildren = fillerGroup.allLeafChildren;\n        userGroup.childrenAfterGroup = fillerGroup.childrenAfterGroup;\n        userGroup.childrenMapped = fillerGroup.childrenMapped;\n        this.removeFromParent(fillerGroup);\n        userGroup.childrenAfterGroup.forEach(function (rowNode) { return rowNode.parent = userGroup; });\n        this.addToParent(userGroup, fillerGroup.parent);\n    };\n    GroupStage.prototype.getOrCreateNextNode = function (parentGroup, groupInfo, level, details) {\n        var mapKey = this.getChildrenMappedKey(groupInfo.key, groupInfo.rowGroupColumn);\n        var nextNode = parentGroup.childrenMapped ? parentGroup.childrenMapped[mapKey] : undefined;\n        if (!nextNode) {\n            nextNode = this.createGroup(groupInfo, parentGroup, level, details);\n            // attach the new group to the parent\n            this.addToParent(nextNode, parentGroup);\n        }\n        return nextNode;\n    };\n    GroupStage.prototype.createGroup = function (groupInfo, parent, level, details) {\n        var _this = this;\n        var groupNode = new agGridCommunity.RowNode();\n        this.context.wireBean(groupNode);\n        groupNode.group = true;\n        groupNode.field = groupInfo.field;\n        groupNode.rowGroupColumn = groupInfo.rowGroupColumn;\n        groupNode.groupData = {};\n        var groupDisplayCols = this.columnController.getGroupDisplayColumns();\n        groupDisplayCols.forEach(function (col) {\n            // newGroup.rowGroupColumn=null when working off GroupInfo, and we always display the group in the group column\n            // if rowGroupColumn is present, then it's grid row grouping and we only include if configuration says so\n            var displayGroupForCol = _this.usingTreeData || (groupNode.rowGroupColumn ? col.isRowGroupDisplayed(groupNode.rowGroupColumn.getId()) : false);\n            if (displayGroupForCol) {\n                groupNode.groupData[col.getColId()] = groupInfo.key;\n            }\n        });\n        // we use negative number for the ids of the groups, this makes sure we don't clash with the\n        // id's of the leaf nodes.\n        groupNode.id = (this.groupIdSequence.next() * -1).toString();\n        groupNode.key = groupInfo.key;\n        groupNode.level = level;\n        groupNode.leafGroup = this.usingTreeData ? false : level === (details.groupedColCount - 1);\n        // if doing pivoting, then the leaf group is never expanded,\n        // as we do not show leaf rows\n        if (details.pivotMode && groupNode.leafGroup) {\n            groupNode.expanded = false;\n        }\n        else {\n            groupNode.expanded = this.isExpanded(details.expandByDefault, level);\n        }\n        groupNode.allLeafChildren = [];\n        // why is this done here? we are not updating the children could as we go,\n        // i suspect this is updated in the filter stage\n        groupNode.setAllChildrenCount(0);\n        groupNode.rowGroupIndex = this.usingTreeData ? null : level;\n        groupNode.childrenAfterGroup = [];\n        groupNode.childrenMapped = {};\n        groupNode.parent = details.includeParents ? parent : null;\n        return groupNode;\n    };\n    GroupStage.prototype.getChildrenMappedKey = function (key, rowGroupColumn) {\n        if (rowGroupColumn) {\n            // grouping by columns\n            return rowGroupColumn.getId() + '-' + key;\n        }\n        else {\n            // tree data - we don't have rowGroupColumns\n            return key;\n        }\n    };\n    GroupStage.prototype.isExpanded = function (expandByDefault, level) {\n        if (expandByDefault === -1) {\n            return true;\n        }\n        else {\n            return level < expandByDefault;\n        }\n    };\n    GroupStage.prototype.getGroupInfo = function (rowNode, details) {\n        if (this.usingTreeData) {\n            return this.getGroupInfoFromCallback(rowNode);\n        }\n        else {\n            return this.getGroupInfoFromGroupColumns(rowNode, details);\n        }\n    };\n    GroupStage.prototype.getGroupInfoFromCallback = function (rowNode) {\n        var keys = this.getDataPath ? this.getDataPath(rowNode.data) : null;\n        if (keys === null || keys === undefined || keys.length === 0) {\n            agGridCommunity._.doOnce(function () { return console.warn(\"getDataPath() should not return an empty path for data\", rowNode.data); }, 'groupStage.getGroupInfoFromCallback');\n        }\n        var groupInfoMapper = function (key) { return ({ key: key, field: null, rowGroupColumn: null }); };\n        return keys ? keys.map(groupInfoMapper) : [];\n    };\n    GroupStage.prototype.getGroupInfoFromGroupColumns = function (rowNode, details) {\n        var _this = this;\n        var res = [];\n        details.groupedCols.forEach(function (groupCol) {\n            var key = _this.valueService.getKeyForNode(groupCol, rowNode);\n            var keyExists = key !== null && key !== undefined;\n            // unbalanced tree and pivot mode don't work together - not because of the grid, it doesn't make\n            // mathematical sense as you are building up a cube. so if pivot mode, we put in a blank key where missing.\n            // this keeps the tree balanced and hence can be represented as a group.\n            if (details.pivotMode && !keyExists) {\n                key = ' ';\n                keyExists = true;\n            }\n            if (keyExists) {\n                var item = {\n                    key: key,\n                    field: groupCol.getColDef().field,\n                    rowGroupColumn: groupCol\n                };\n                res.push(item);\n            }\n        });\n        return res;\n    };\n    __decorate$9([\n        agGridCommunity.Autowired('selectionController')\n    ], GroupStage.prototype, \"selectionController\", void 0);\n    __decorate$9([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], GroupStage.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$9([\n        agGridCommunity.Autowired('columnController')\n    ], GroupStage.prototype, \"columnController\", void 0);\n    __decorate$9([\n        agGridCommunity.Autowired('selectableService')\n    ], GroupStage.prototype, \"selectableService\", void 0);\n    __decorate$9([\n        agGridCommunity.Autowired('valueService')\n    ], GroupStage.prototype, \"valueService\", void 0);\n    __decorate$9([\n        agGridCommunity.Autowired('eventService')\n    ], GroupStage.prototype, \"eventService\", void 0);\n    __decorate$9([\n        agGridCommunity.Autowired('context')\n    ], GroupStage.prototype, \"context\", void 0);\n    __decorate$9([\n        agGridCommunity.PostConstruct\n    ], GroupStage.prototype, \"postConstruct\", null);\n    GroupStage = __decorate$9([\n        agGridCommunity.Bean('groupStage')\n    ], GroupStage);\n    return GroupStage;\n}());\n// doing _.removeFromArray() multiple times on a large list can be a bottleneck.\n// when doing large deletes (eg removing 1,000 rows) then we would be calling _.removeFromArray()\n// a thousands of times, in particular RootNode.allGroupChildren could be a large list, and\n// 1,000 removes is time consuming as each one requires traversing the full list.\n// to get around this, we do all the removes in a batch. this class manages the batch.\n//\n// This problem was brought to light by a client (AG-2879), with dataset of 20,000\n// in 10,000 groups (2 items per group), then deleting all rows with transaction,\n// it took about 20 seconds to delete. with the BathRemoved, the reduced to less than 1 second.\nvar BatchRemover = /** @class */ (function () {\n    function BatchRemover() {\n        this.allSets = {};\n        this.allParents = [];\n    }\n    BatchRemover.prototype.removeFromChildrenAfterGroup = function (parent, child) {\n        var set = this.getSet(parent);\n        set.removeFromChildrenAfterGroup[child.id] = true;\n    };\n    BatchRemover.prototype.removeFromAllLeafChildren = function (parent, child) {\n        var set = this.getSet(parent);\n        set.removeFromAllLeafChildren[child.id] = true;\n    };\n    BatchRemover.prototype.getSet = function (parent) {\n        if (!this.allSets[parent.id]) {\n            this.allSets[parent.id] = {\n                removeFromAllLeafChildren: {},\n                removeFromChildrenAfterGroup: {}\n            };\n            this.allParents.push(parent);\n        }\n        return this.allSets[parent.id];\n    };\n    BatchRemover.prototype.flush = function () {\n        var _this = this;\n        this.allParents.forEach(function (parent) {\n            var nodeDetails = _this.allSets[parent.id];\n            parent.childrenAfterGroup = parent.childrenAfterGroup.filter(function (child) {\n                var res = !nodeDetails.removeFromChildrenAfterGroup[child.id];\n                return res;\n            });\n            parent.allLeafChildren = parent.allLeafChildren.filter(function (child) { return !nodeDetails.removeFromAllLeafChildren[child.id]; });\n        });\n        this.allSets = {};\n        this.allParents.length = 0;\n    };\n    return BatchRemover;\n}());\n\nvar __decorate$a = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PivotColDefService = /** @class */ (function () {\n    function PivotColDefService() {\n    }\n    PivotColDefService.prototype.createPivotColumnDefs = function (uniqueValues) {\n        // this is passed to the columnController, to configure the columns and groups we show\n        var pivotColumnGroupDefs = [];\n        // this is used by the aggregation stage, to do the aggregation based on the pivot columns\n        var pivotColumnDefs = [];\n        var pivotColumns = this.columnController.getPivotColumns();\n        var valueColumns = this.columnController.getValueColumns();\n        var levelsDeep = pivotColumns.length;\n        var columnIdSequence = new agGridCommunity.NumberSequence();\n        this.recursivelyAddGroup(pivotColumnGroupDefs, pivotColumnDefs, 1, uniqueValues, [], columnIdSequence, levelsDeep, pivotColumns);\n        this.addRowGroupTotals(pivotColumnGroupDefs, pivotColumnDefs, valueColumns, pivotColumns, columnIdSequence);\n        this.addPivotTotalsToGroups(pivotColumnGroupDefs, pivotColumnDefs, columnIdSequence);\n        // we clone, so the colDefs in pivotColumnsGroupDefs and pivotColumnDefs are not shared. this is so that\n        // any changes the user makes (via processSecondaryColumnDefinitions) don't impact the internal aggregations,\n        // as these use the col defs also\n        var pivotColumnDefsClone = pivotColumnDefs.map(function (colDef) { return agGridCommunity._.cloneObject(colDef); });\n        return {\n            pivotColumnGroupDefs: pivotColumnGroupDefs,\n            pivotColumnDefs: pivotColumnDefsClone\n        };\n    };\n    // parentChildren - the list of colDefs we are adding to\n    // @index - how far the column is from the top (also same as pivotKeys.length)\n    // @uniqueValues - the values for which we should create a col for\n    // @pivotKeys - the keys for the pivot, eg if pivoting on {Language,Country} then could be {English,Ireland}\n    PivotColDefService.prototype.recursivelyAddGroup = function (parentChildren, pivotColumnDefs, index, uniqueValues, pivotKeys, columnIdSequence, levelsDeep, primaryPivotColumns) {\n        var _this = this;\n        agGridCommunity._.iterateObject(uniqueValues, function (key, value) {\n            var newPivotKeys = pivotKeys.slice(0);\n            newPivotKeys.push(key);\n            var createGroup = index !== levelsDeep;\n            if (createGroup) {\n                var groupDef = {\n                    children: [],\n                    headerName: key,\n                    pivotKeys: newPivotKeys,\n                    columnGroupShow: 'open',\n                    groupId: 'pivot' + columnIdSequence.next()\n                };\n                parentChildren.push(groupDef);\n                _this.recursivelyAddGroup(groupDef.children, pivotColumnDefs, index + 1, value, newPivotKeys, columnIdSequence, levelsDeep, primaryPivotColumns);\n            }\n            else {\n                var measureColumns = _this.columnController.getValueColumns();\n                var valueGroup_1 = {\n                    children: [],\n                    headerName: key,\n                    pivotKeys: newPivotKeys,\n                    columnGroupShow: 'open',\n                    groupId: 'pivot' + columnIdSequence.next()\n                };\n                // if no value columns selected, then we insert one blank column, so the user at least sees columns\n                // rendered. otherwise the grid would render with no columns (just empty groups) which would give the\n                // impression that the grid is broken\n                if (measureColumns.length === 0) {\n                    // this is the blank column, for when no value columns enabled.\n                    var colDef_1 = _this.createColDef(null, '-', newPivotKeys, columnIdSequence);\n                    valueGroup_1.children.push(colDef_1);\n                    pivotColumnDefs.push(colDef_1);\n                }\n                else {\n                    measureColumns.forEach(function (measureColumn) {\n                        var columnName = _this.columnController.getDisplayNameForColumn(measureColumn, 'header');\n                        var colDef = _this.createColDef(measureColumn, columnName, newPivotKeys, columnIdSequence);\n                        colDef.columnGroupShow = 'open';\n                        valueGroup_1.children.push(colDef);\n                        pivotColumnDefs.push(colDef);\n                    });\n                }\n                parentChildren.push(valueGroup_1);\n            }\n        });\n        // sort by either user provided comparator, or our own one\n        var colDef = primaryPivotColumns[index - 1].getColDef();\n        var userComparator = colDef.pivotComparator;\n        var comparator = this.headerNameComparator.bind(this, userComparator);\n        parentChildren.sort(comparator);\n    };\n    PivotColDefService.prototype.addPivotTotalsToGroups = function (pivotColumnGroupDefs, pivotColumnDefs, columnIdSequence) {\n        var _this = this;\n        if (!this.gridOptionsWrapper.getPivotColumnGroupTotals()) {\n            return;\n        }\n        var insertAfter = this.gridOptionsWrapper.getPivotColumnGroupTotals() === 'after';\n        var valueCols = this.columnController.getValueColumns();\n        var aggFuncs = valueCols.map(function (valueCol) { return valueCol.getAggFunc(); });\n        // don't add pivot totals if there is less than 1 aggFunc or they are not all the same\n        if (!aggFuncs || aggFuncs.length < 1 || !this.sameAggFuncs(aggFuncs)) {\n            // console.warn('ag-Grid: aborting adding pivot total columns - value columns require same aggFunc');\n            return;\n        }\n        // arbitrarily select a value column to use as a template for pivot columns\n        var valueColumn = valueCols[0];\n        pivotColumnGroupDefs.forEach(function (groupDef) {\n            _this.recursivelyAddPivotTotal(groupDef, pivotColumnDefs, columnIdSequence, valueColumn, insertAfter);\n        });\n    };\n    PivotColDefService.prototype.recursivelyAddPivotTotal = function (groupDef, pivotColumnDefs, columnIdSequence, valueColumn, insertAfter) {\n        var _this = this;\n        var group = groupDef;\n        if (!group.children) {\n            var def = groupDef;\n            return def.colId ? [def.colId] : null;\n        }\n        var colIds = [];\n        // need to recurse children first to obtain colIds used in the aggregation stage\n        group.children\n            .forEach(function (grp) {\n            var childColIds = _this.recursivelyAddPivotTotal(grp, pivotColumnDefs, columnIdSequence, valueColumn, insertAfter);\n            if (childColIds) {\n                colIds = colIds.concat(childColIds);\n            }\n        });\n        // only add total colDef if there is more than 1 child node\n        if (group.children.length > 1) {\n            //create total colDef using an arbitrary value column as a template\n            var totalColDef = this.createColDef(valueColumn, 'Total', groupDef.pivotKeys, columnIdSequence);\n            totalColDef.pivotTotalColumnIds = colIds;\n            totalColDef.aggFunc = valueColumn.getAggFunc();\n            // add total colDef to group and pivot colDefs array\n            var children = groupDef.children;\n            insertAfter ? children.push(totalColDef) : children.unshift(totalColDef);\n            pivotColumnDefs.push(totalColDef);\n        }\n        return colIds;\n    };\n    PivotColDefService.prototype.addRowGroupTotals = function (pivotColumnGroupDefs, pivotColumnDefs, valueColumns, pivotColumns, columnIdSequence) {\n        var _this = this;\n        if (!this.gridOptionsWrapper.getPivotRowTotals()) {\n            return;\n        }\n        var insertAfter = this.gridOptionsWrapper.getPivotRowTotals() === 'after';\n        // order of row group totals depends on position\n        var valueCols = insertAfter ? valueColumns.slice() : valueColumns.slice().reverse();\n        var _loop_1 = function (i) {\n            var valueCol = valueCols[i];\n            var colIds = [];\n            pivotColumnGroupDefs.forEach(function (groupDef) {\n                colIds = colIds.concat(_this.extractColIdsForValueColumn(groupDef, valueCol));\n            });\n            var levelsDeep = pivotColumns.length;\n            this_1.createRowGroupTotal(pivotColumnGroupDefs, pivotColumnDefs, 1, [], columnIdSequence, levelsDeep, pivotColumns, valueCol, colIds, insertAfter);\n        };\n        var this_1 = this;\n        for (var i = 0; i < valueCols.length; i++) {\n            _loop_1(i);\n        }\n    };\n    PivotColDefService.prototype.extractColIdsForValueColumn = function (groupDef, valueColumn) {\n        var _this = this;\n        var group = groupDef;\n        if (!group.children) {\n            var colDef = group;\n            return colDef.pivotValueColumn === valueColumn && colDef.colId ? [colDef.colId] : [];\n        }\n        var colIds = [];\n        group.children\n            .forEach(function (grp) {\n            _this.extractColIdsForValueColumn(grp, valueColumn);\n            var childColIds = _this.extractColIdsForValueColumn(grp, valueColumn);\n            colIds = colIds.concat(childColIds);\n        });\n        return colIds;\n    };\n    PivotColDefService.prototype.createRowGroupTotal = function (parentChildren, pivotColumnDefs, index, pivotKeys, columnIdSequence, levelsDeep, primaryPivotColumns, valueColumn, colIds, insertAfter) {\n        var newPivotKeys = pivotKeys.slice(0);\n        var createGroup = index !== levelsDeep;\n        if (createGroup) {\n            var groupDef = {\n                children: [],\n                pivotKeys: newPivotKeys,\n                groupId: 'pivot' + columnIdSequence.next()\n            };\n            insertAfter ? parentChildren.push(groupDef) : parentChildren.unshift(groupDef);\n            this.createRowGroupTotal(groupDef.children, pivotColumnDefs, index + 1, newPivotKeys, columnIdSequence, levelsDeep, primaryPivotColumns, valueColumn, colIds, insertAfter);\n        }\n        else {\n            var measureColumns = this.columnController.getValueColumns();\n            var valueGroup = {\n                children: [],\n                pivotKeys: newPivotKeys,\n                groupId: 'pivot' + columnIdSequence.next()\n            };\n            if (measureColumns.length === 0) {\n                var colDef = this.createColDef(null, '-', newPivotKeys, columnIdSequence);\n                valueGroup.children.push(colDef);\n                pivotColumnDefs.push(colDef);\n            }\n            else {\n                var columnName = this.columnController.getDisplayNameForColumn(valueColumn, 'header');\n                var colDef = this.createColDef(valueColumn, columnName, newPivotKeys, columnIdSequence);\n                colDef.pivotTotalColumnIds = colIds;\n                valueGroup.children.push(colDef);\n                pivotColumnDefs.push(colDef);\n            }\n            insertAfter ? parentChildren.push(valueGroup) : parentChildren.unshift(valueGroup);\n        }\n    };\n    PivotColDefService.prototype.createColDef = function (valueColumn, headerName, pivotKeys, columnIdSequence) {\n        var colDef = {};\n        if (valueColumn) {\n            var colDefToCopy = valueColumn.getColDef();\n            agGridCommunity._.assign(colDef, colDefToCopy);\n            // even if original column was hidden, we always show the pivot value column, otherwise it would be\n            // very confusing for people thinking the pivot is broken\n            colDef.hide = false;\n        }\n        colDef.headerName = headerName;\n        colDef.colId = 'pivot_' + columnIdSequence.next();\n        // pivot columns repeat over field, so it makes sense to use the unique id instead. For example if you want to\n        // assign values to pinned bottom rows using setPinnedBottomRowData the value service will use this colId.\n        colDef.field = colDef.colId;\n        colDef.pivotKeys = pivotKeys;\n        colDef.pivotValueColumn = valueColumn;\n        colDef.filter = false;\n        return colDef;\n    };\n    PivotColDefService.prototype.sameAggFuncs = function (aggFuncs) {\n        if (aggFuncs.length == 1) {\n            return true;\n        }\n        //check if all aggFunc's match\n        for (var i = 1; i < aggFuncs.length; i++) {\n            if (aggFuncs[i] !== aggFuncs[0]) {\n                return false;\n            }\n        }\n        return true;\n    };\n    PivotColDefService.prototype.headerNameComparator = function (userComparator, a, b) {\n        if (userComparator) {\n            return userComparator(a.headerName, b.headerName);\n        }\n        else {\n            if (a.headerName && !b.headerName) {\n                return 1;\n            }\n            else if (!a.headerName && b.headerName) {\n                return -1;\n            }\n            // slightly naff here - just to satify typescript\n            // really should be &&, but if so ts complains\n            // the above if/else checks would deal with either being falsy, so at this stage if either are falsy, both are\n            // ..still naff though\n            if (!a.headerName || !b.headerName) {\n                return 0;\n            }\n            if (a.headerName < b.headerName) {\n                return -1;\n            }\n            else if (a.headerName > b.headerName) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        }\n    };\n    __decorate$a([\n        agGridCommunity.Autowired('columnController')\n    ], PivotColDefService.prototype, \"columnController\", void 0);\n    __decorate$a([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], PivotColDefService.prototype, \"gridOptionsWrapper\", void 0);\n    PivotColDefService = __decorate$a([\n        agGridCommunity.Bean('pivotColDefService')\n    ], PivotColDefService);\n    return PivotColDefService;\n}());\n\nvar __decorate$b = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PivotStage = /** @class */ (function () {\n    function PivotStage() {\n        this.uniqueValues = {};\n    }\n    PivotStage.prototype.execute = function (params) {\n        var rootNode = params.rowNode;\n        var changedPath = params.changedPath;\n        if (this.columnController.isPivotActive()) {\n            this.executePivotOn(rootNode, changedPath);\n        }\n        else {\n            this.executePivotOff(changedPath);\n        }\n    };\n    PivotStage.prototype.executePivotOff = function (changedPath) {\n        this.aggregationColumnsHashLastTime = null;\n        this.uniqueValues = {};\n        if (this.columnController.isSecondaryColumnsPresent()) {\n            this.columnController.setSecondaryColumns(null, \"rowModelUpdated\");\n            if (changedPath) {\n                changedPath.setInactive();\n            }\n        }\n    };\n    PivotStage.prototype.executePivotOn = function (rootNode, changedPath) {\n        var uniqueValues = this.bucketUpRowNodes(rootNode);\n        var uniqueValuesChanged = this.setUniqueValues(uniqueValues);\n        var aggregationColumns = this.columnController.getValueColumns();\n        var aggregationColumnsHash = aggregationColumns.map(function (column) { return column.getId(); }).join('#');\n        var aggregationFuncsHash = aggregationColumns.map(function (column) { return column.getAggFunc().toString(); }).join('#');\n        var aggregationColumnsChanged = this.aggregationColumnsHashLastTime !== aggregationColumnsHash;\n        var aggregationFuncsChanged = this.aggregationFuncsHashLastTime !== aggregationFuncsHash;\n        this.aggregationColumnsHashLastTime = aggregationColumnsHash;\n        this.aggregationFuncsHashLastTime = aggregationFuncsHash;\n        if (uniqueValuesChanged || aggregationColumnsChanged || aggregationFuncsChanged) {\n            var result = this.pivotColDefService.createPivotColumnDefs(this.uniqueValues);\n            this.pivotColumnGroupDefs = result.pivotColumnGroupDefs;\n            this.pivotColumnDefs = result.pivotColumnDefs;\n            this.columnController.setSecondaryColumns(this.pivotColumnGroupDefs, \"rowModelUpdated\");\n            // because the secondary columns have changed, then the aggregation needs to visit the whole\n            // tree again, so we make the changedPath not active, to force aggregation to visit all paths.\n            if (changedPath) {\n                changedPath.setInactive();\n            }\n        }\n    };\n    PivotStage.prototype.setUniqueValues = function (newValues) {\n        var json1 = JSON.stringify(newValues);\n        var json2 = JSON.stringify(this.uniqueValues);\n        var uniqueValuesChanged = json1 !== json2;\n        // we only continue the below if the unique values are different, as otherwise\n        // the result will be the same as the last time we did it\n        if (uniqueValuesChanged) {\n            this.uniqueValues = newValues;\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    // returns true if values were different\n    PivotStage.prototype.bucketUpRowNodes = function (rootNode) {\n        var _this = this;\n        // accessed from inside inner function\n        var uniqueValues = {};\n        // finds all leaf groups and calls mapRowNode with it\n        var recursivelySearchForLeafNodes = function (rowNode) {\n            if (rowNode.leafGroup) {\n                _this.bucketRowNode(rowNode, uniqueValues);\n            }\n            else {\n                rowNode.childrenAfterFilter.forEach(function (child) {\n                    recursivelySearchForLeafNodes(child);\n                });\n            }\n        };\n        recursivelySearchForLeafNodes(rootNode);\n        return uniqueValues;\n    };\n    PivotStage.prototype.bucketRowNode = function (rowNode, uniqueValues) {\n        var pivotColumns = this.columnController.getPivotColumns();\n        if (pivotColumns.length === 0) {\n            rowNode.childrenMapped = null;\n            return;\n        }\n        rowNode.childrenMapped = this.bucketChildren(rowNode.childrenAfterFilter, pivotColumns, 0, uniqueValues);\n    };\n    PivotStage.prototype.bucketChildren = function (children, pivotColumns, pivotIndex, uniqueValues) {\n        var _this = this;\n        var mappedChildren = {};\n        var pivotColumn = pivotColumns[pivotIndex];\n        // map the children out based on the pivot column\n        children.forEach(function (child) {\n            var key = _this.valueService.getKeyForNode(pivotColumn, child);\n            if (agGridCommunity._.missing(key)) {\n                key = '';\n            }\n            if (!uniqueValues[key]) {\n                uniqueValues[key] = {};\n            }\n            if (!mappedChildren[key]) {\n                mappedChildren[key] = [];\n            }\n            mappedChildren[key].push(child);\n        });\n        // if it's the last pivot column, return as is, otherwise go one level further in the map\n        if (pivotIndex === pivotColumns.length - 1) {\n            return mappedChildren;\n        }\n        else {\n            var result_1 = {};\n            agGridCommunity._.iterateObject(mappedChildren, function (key, value) {\n                result_1[key] = _this.bucketChildren(value, pivotColumns, pivotIndex + 1, uniqueValues[key]);\n            });\n            return result_1;\n        }\n    };\n    PivotStage.prototype.getPivotColumnDefs = function () {\n        return this.pivotColumnDefs;\n    };\n    __decorate$b([\n        agGridCommunity.Autowired('rowModel')\n    ], PivotStage.prototype, \"rowModel\", void 0);\n    __decorate$b([\n        agGridCommunity.Autowired('valueService')\n    ], PivotStage.prototype, \"valueService\", void 0);\n    __decorate$b([\n        agGridCommunity.Autowired('columnController')\n    ], PivotStage.prototype, \"columnController\", void 0);\n    __decorate$b([\n        agGridCommunity.Autowired('eventService')\n    ], PivotStage.prototype, \"eventService\", void 0);\n    __decorate$b([\n        agGridCommunity.Autowired('pivotColDefService')\n    ], PivotStage.prototype, \"pivotColDefService\", void 0);\n    PivotStage = __decorate$b([\n        agGridCommunity.Bean('pivotStage')\n    ], PivotStage);\n    return PivotStage;\n}());\n\nvar __decorate$c = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AggFuncService = /** @class */ (function () {\n    function AggFuncService() {\n        this.aggFuncsMap = {};\n        this.initialised = false;\n    }\n    AggFuncService_1 = AggFuncService;\n    AggFuncService.prototype.init = function () {\n        if (this.initialised) {\n            return;\n        }\n        this.initialiseWithDefaultAggregations();\n        this.addAggFuncs(this.gridOptionsWrapper.getAggFuncs());\n    };\n    AggFuncService.prototype.initialiseWithDefaultAggregations = function () {\n        this.aggFuncsMap[AggFuncService_1.AGG_SUM] = aggSum;\n        this.aggFuncsMap[AggFuncService_1.AGG_FIRST] = aggFirst;\n        this.aggFuncsMap[AggFuncService_1.AGG_LAST] = aggLast;\n        this.aggFuncsMap[AggFuncService_1.AGG_MIN] = aggMin;\n        this.aggFuncsMap[AggFuncService_1.AGG_MAX] = aggMax;\n        this.aggFuncsMap[AggFuncService_1.AGG_COUNT] = aggCount;\n        this.aggFuncsMap[AggFuncService_1.AGG_AVG] = aggAvg;\n        this.initialised = true;\n    };\n    AggFuncService.prototype.getDefaultAggFunc = function (column) {\n        var allKeys = this.getFuncNames(column);\n        // use 'sum' if it's a) allowed for the column and b) still registered\n        // (ie not removed by user)\n        var sumInKeysList = agGridCommunity._.includes(allKeys, AggFuncService_1.AGG_SUM);\n        var sumInFuncs = agGridCommunity._.exists(this.aggFuncsMap[AggFuncService_1.AGG_SUM]);\n        if (sumInKeysList && sumInFuncs) {\n            return AggFuncService_1.AGG_SUM;\n        }\n        else {\n            return agGridCommunity._.existsAndNotEmpty(allKeys) ? allKeys[0] : null;\n        }\n    };\n    AggFuncService.prototype.addAggFuncs = function (aggFuncs) {\n        agGridCommunity._.iterateObject(aggFuncs, this.addAggFunc.bind(this));\n    };\n    AggFuncService.prototype.addAggFunc = function (key, aggFunc) {\n        this.init();\n        this.aggFuncsMap[key] = aggFunc;\n    };\n    AggFuncService.prototype.getAggFunc = function (name) {\n        this.init();\n        return this.aggFuncsMap[name];\n    };\n    AggFuncService.prototype.getFuncNames = function (column) {\n        var userAllowedFuncs = column.getColDef().allowedAggFuncs;\n        if (agGridCommunity._.exists(userAllowedFuncs) && userAllowedFuncs) {\n            return userAllowedFuncs;\n        }\n        else {\n            return Object.keys(this.aggFuncsMap).sort();\n        }\n    };\n    AggFuncService.prototype.clear = function () {\n        this.aggFuncsMap = {};\n    };\n    var AggFuncService_1;\n    AggFuncService.AGG_SUM = 'sum';\n    AggFuncService.AGG_FIRST = 'first';\n    AggFuncService.AGG_LAST = 'last';\n    AggFuncService.AGG_MIN = 'min';\n    AggFuncService.AGG_MAX = 'max';\n    AggFuncService.AGG_COUNT = 'count';\n    AggFuncService.AGG_AVG = 'avg';\n    __decorate$c([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], AggFuncService.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$c([\n        agGridCommunity.PostConstruct\n    ], AggFuncService.prototype, \"init\", null);\n    AggFuncService = AggFuncService_1 = __decorate$c([\n        agGridCommunity.Bean('aggFuncService')\n    ], AggFuncService);\n    return AggFuncService;\n}());\nfunction aggSum(input) {\n    return input\n        .filter(function (value) { return typeof value === 'number'; })\n        .reduce(function (sum, value) { return sum === null ? value : sum + value; }, null);\n}\nfunction aggFirst(input) {\n    return input.length > 0 ? input[0] : null;\n}\nfunction aggLast(input) {\n    return input.length > 0 ? agGridCommunity._.last(input) : null;\n}\nfunction aggMin(input) {\n    return input\n        .filter(function (value) { return typeof value === 'number'; })\n        .reduce(function (min, value) { return min === null || value < min ? value : min; }, null);\n}\nfunction aggMax(input) {\n    return input\n        .filter(function (value) { return typeof value === 'number'; })\n        .reduce(function (max, value) { return max === null || value > max ? value : max; }, null);\n}\nfunction aggCount(input) {\n    var value = input.reduce(function (count, item) {\n        var isGroupAgg = agGridCommunity._.exists(item) && typeof item.value === 'number';\n        return count + (isGroupAgg ? item.value : 1);\n    }, 0);\n    return {\n        value: value,\n        toString: function () {\n            return this.value.toString();\n        },\n        // used for sorting\n        toNumber: function () {\n            return this.value;\n        }\n    };\n}\n// the average function is tricky as the multiple levels require weighted averages\n// for the non-leaf node aggregations.\nfunction aggAvg(input) {\n    // the average will be the sum / count\n    var _a = input.reduce(function (_a, item) {\n        var sum = _a.sum, count = _a.count;\n        var itemIsGroupResult = agGridCommunity._.exists(item) &&\n            typeof item.value === 'number' &&\n            typeof item.count === 'number';\n        if (typeof item === 'number') {\n            return { sum: sum + item, count: count + 1 };\n        }\n        if (itemIsGroupResult) {\n            // we are aggregating groups, so we take the\n            // aggregated values to calculated a weighted average\n            return {\n                sum: sum + item.value * item.count,\n                count: count + item.count\n            };\n        }\n        return { sum: sum, count: count };\n    }, { sum: 0, count: 0 }), sum = _a.sum, count = _a.count;\n    // avoid divide by zero error\n    var value = count > 0 ? sum / count : null;\n    // the result will be an object. when this cell is rendered, only the avg is shown.\n    // however when this cell is part of another aggregation, the count is also needed\n    // to create a weighted average for the next level.\n    return {\n        count: count,\n        value: value,\n        // the grid by default uses toString to render values for an object, so this\n        // is a trick to get the default cellRenderer to display the avg value\n        toString: function () {\n            if (typeof this.value === 'number') {\n                return this.value.toString();\n            }\n            else {\n                return '';\n            }\n        },\n        // used for sorting\n        toNumber: function () {\n            return this.value;\n        }\n    };\n}\n\nvar __extends$6 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$d = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar DropZoneColumnComp = /** @class */ (function (_super) {\n    __extends$6(DropZoneColumnComp, _super);\n    function DropZoneColumnComp(column, dragSourceDropTarget, ghost, valueColumn) {\n        var _this = _super.call(this) || this;\n        _this.popupShowing = false;\n        _this.valueColumn = valueColumn;\n        _this.column = column;\n        _this.dragSourceDropTarget = dragSourceDropTarget;\n        _this.ghost = ghost;\n        return _this;\n    }\n    DropZoneColumnComp.prototype.init = function () {\n        this.setTemplate(DropZoneColumnComp.TEMPLATE);\n        this.eDragHandle.appendChild(agGridCommunity._.createIconNoSpan('columnDrag', this.gridOptionsWrapper));\n        this.btRemove.appendChild(agGridCommunity._.createIconNoSpan('cancel', this.gridOptionsWrapper));\n        this.displayName = this.columnController.getDisplayNameForColumn(this.column, 'columnDrop');\n        this.setupComponents();\n        if (!this.ghost && !this.gridOptionsWrapper.isFunctionsReadOnly()) {\n            this.addDragSource();\n        }\n    };\n    DropZoneColumnComp.prototype.addDragSource = function () {\n        var _this = this;\n        var dragSource = {\n            type: agGridCommunity.DragSourceType.ToolPanel,\n            eElement: this.eDragHandle,\n            getDragItem: function () { return _this.createDragItem(); },\n            dragItemName: this.displayName,\n            dragSourceDropTarget: this.dragSourceDropTarget\n        };\n        this.dragAndDropService.addDragSource(dragSource, true);\n        this.addDestroyFunc(function () { return _this.dragAndDropService.removeDragSource(dragSource); });\n    };\n    DropZoneColumnComp.prototype.createDragItem = function () {\n        var visibleState = {};\n        visibleState[this.column.getId()] = this.column.isVisible();\n        return {\n            columns: [this.column],\n            visibleState: visibleState\n        };\n    };\n    DropZoneColumnComp.prototype.setupComponents = function () {\n        this.setTextValue();\n        this.setupRemove();\n        if (this.ghost) {\n            agGridCommunity._.addCssClass(this.getGui(), 'ag-column-drop-cell-ghost');\n        }\n        if (this.valueColumn && !this.gridOptionsWrapper.isFunctionsReadOnly()) {\n            this.addGuiEventListener('click', this.onShowAggFuncSelection.bind(this));\n        }\n    };\n    DropZoneColumnComp.prototype.setupRemove = function () {\n        var _this = this;\n        agGridCommunity._.setDisplayed(this.btRemove, !this.gridOptionsWrapper.isFunctionsReadOnly());\n        this.addDestroyableEventListener(this.btRemove, 'click', function (mouseEvent) {\n            var agEvent = { type: DropZoneColumnComp.EVENT_COLUMN_REMOVE };\n            _this.dispatchEvent(agEvent);\n            mouseEvent.stopPropagation();\n        });\n        var touchListener = new agGridCommunity.TouchListener(this.btRemove);\n        this.addDestroyableEventListener(touchListener, agGridCommunity.TouchListener.EVENT_TAP, function (event) {\n            var agEvent = { type: DropZoneColumnComp.EVENT_COLUMN_REMOVE };\n            _this.dispatchEvent(agEvent);\n        });\n        this.addDestroyFunc(touchListener.destroy.bind(touchListener));\n    };\n    DropZoneColumnComp.prototype.setTextValue = function () {\n        var displayValue;\n        if (this.valueColumn) {\n            var aggFunc = this.column.getAggFunc();\n            // if aggFunc is a string, we can use it, but if it's a function, then we swap with 'func'\n            var aggFuncString = (typeof aggFunc === 'string') ? aggFunc : 'agg';\n            var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n            var aggFuncStringTranslated = localeTextFunc(aggFuncString, aggFuncString);\n            displayValue = aggFuncStringTranslated + \"(\" + this.displayName + \")\";\n        }\n        else {\n            displayValue = this.displayName;\n        }\n        var displayValueSanitised = agGridCommunity._.escape(displayValue);\n        this.eText.innerHTML = displayValueSanitised;\n    };\n    DropZoneColumnComp.prototype.onShowAggFuncSelection = function () {\n        var _this = this;\n        if (this.popupShowing) {\n            return;\n        }\n        this.popupShowing = true;\n        var virtualList = new agGridCommunity.VirtualList();\n        var rows = this.aggFuncService.getFuncNames(this.column);\n        virtualList.setModel({\n            getRow: function (index) { return rows[index]; },\n            getRowCount: function () { return rows.length; }\n        });\n        this.getContext().wireBean(virtualList);\n        var ePopup = agGridCommunity._.loadTemplate('<div class=\"ag-select-agg-func-popup\"></div>');\n        ePopup.style.top = '0px';\n        ePopup.style.left = '0px';\n        ePopup.appendChild(virtualList.getGui());\n        // ePopup.style.height = this.gridOptionsWrapper.getAggFuncPopupHeight() + 'px';\n        ePopup.style.width = this.getGui().clientWidth + 'px';\n        var popupHiddenFunc = function () {\n            virtualList.destroy();\n            _this.popupShowing = false;\n        };\n        var hidePopup = this.popupService.addAsModalPopup(ePopup, true, popupHiddenFunc);\n        virtualList.setComponentCreator(this.createAggSelect.bind(this, hidePopup));\n        this.popupService.positionPopupUnderComponent({\n            type: 'aggFuncSelect',\n            eventSource: this.getGui(),\n            ePopup: ePopup,\n            keepWithinBounds: true,\n            column: this.column\n        });\n        virtualList.refresh();\n    };\n    DropZoneColumnComp.prototype.createAggSelect = function (hidePopup, value) {\n        var _this = this;\n        var itemSelected = function () {\n            hidePopup();\n            if (_this.gridOptionsWrapper.isFunctionsPassive()) {\n                var event_1 = {\n                    type: agGridCommunity.Events.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,\n                    columns: [_this.column],\n                    aggFunc: value,\n                    api: _this.gridApi,\n                    columnApi: _this.columnApi\n                };\n                _this.eventService.dispatchEvent(event_1);\n            }\n            else {\n                _this.columnController.setColumnAggFunc(_this.column, value, \"toolPanelDragAndDrop\");\n            }\n        };\n        var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n        var aggFuncString = value.toString();\n        var aggFuncStringTranslated = localeTextFunc(aggFuncString, aggFuncString);\n        var comp = new AggItemComp(itemSelected, aggFuncStringTranslated);\n        return comp;\n    };\n    DropZoneColumnComp.EVENT_COLUMN_REMOVE = 'columnRemove';\n    DropZoneColumnComp.TEMPLATE = \"<span class=\\\"ag-column-drop-cell\\\">\\n          <span ref=\\\"eDragHandle\\\" class=\\\"ag-column-drag\\\"></span>\\n          <span ref=\\\"eText\\\" class=\\\"ag-column-drop-cell-text\\\"></span>\\n          <span ref=\\\"btRemove\\\" class=\\\"ag-column-drop-cell-button\\\"></span>\\n        </span>\";\n    __decorate$d([\n        agGridCommunity.Autowired('dragAndDropService')\n    ], DropZoneColumnComp.prototype, \"dragAndDropService\", void 0);\n    __decorate$d([\n        agGridCommunity.Autowired('columnController')\n    ], DropZoneColumnComp.prototype, \"columnController\", void 0);\n    __decorate$d([\n        agGridCommunity.Autowired('popupService')\n    ], DropZoneColumnComp.prototype, \"popupService\", void 0);\n    __decorate$d([\n        agGridCommunity.Optional('aggFuncService')\n    ], DropZoneColumnComp.prototype, \"aggFuncService\", void 0);\n    __decorate$d([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], DropZoneColumnComp.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$d([\n        agGridCommunity.Autowired('eventService')\n    ], DropZoneColumnComp.prototype, \"eventService\", void 0);\n    __decorate$d([\n        agGridCommunity.Autowired('columnApi')\n    ], DropZoneColumnComp.prototype, \"columnApi\", void 0);\n    __decorate$d([\n        agGridCommunity.Autowired('gridApi')\n    ], DropZoneColumnComp.prototype, \"gridApi\", void 0);\n    __decorate$d([\n        agGridCommunity.RefSelector('eText')\n    ], DropZoneColumnComp.prototype, \"eText\", void 0);\n    __decorate$d([\n        agGridCommunity.RefSelector('eDragHandle')\n    ], DropZoneColumnComp.prototype, \"eDragHandle\", void 0);\n    __decorate$d([\n        agGridCommunity.RefSelector('btRemove')\n    ], DropZoneColumnComp.prototype, \"btRemove\", void 0);\n    __decorate$d([\n        agGridCommunity.PostConstruct\n    ], DropZoneColumnComp.prototype, \"init\", null);\n    return DropZoneColumnComp;\n}(agGridCommunity.Component));\nvar AggItemComp = /** @class */ (function (_super) {\n    __extends$6(AggItemComp, _super);\n    function AggItemComp(itemSelected, value) {\n        var _this = _super.call(this, '<div class=\"ag-select-agg-func-item\"/>') || this;\n        _this.getGui().innerText = value;\n        _this.value = value;\n        _this.addGuiEventListener('click', itemSelected);\n        return _this;\n    }\n    return AggItemComp;\n}(agGridCommunity.Component));\n\nvar __extends$7 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar BaseDropZonePanel = /** @class */ (function (_super) {\n    __extends$7(BaseDropZonePanel, _super);\n    function BaseDropZonePanel(horizontal, valueColumn, name) {\n        var _this = _super.call(this, \"<div class=\\\"ag-column-drop ag-unselectable ag-column-drop-\" + (horizontal ? 'horizontal' : 'vertical') + \" ag-column-drop-\" + name + \"\\\"></div>\") || this;\n        _this.state = BaseDropZonePanel.STATE_NOT_DRAGGING;\n        _this.guiDestroyFunctions = [];\n        _this.childColumnComponents = [];\n        _this.horizontal = horizontal;\n        _this.valueColumn = valueColumn;\n        _this.eColumnDropList = agGridCommunity._.loadTemplate('<div class=\"ag-column-drop-list\"></div>');\n        return _this;\n    }\n    BaseDropZonePanel.prototype.isHorizontal = function () {\n        return this.horizontal;\n    };\n    BaseDropZonePanel.prototype.setBeans = function (beans) {\n        this.beans = beans;\n    };\n    BaseDropZonePanel.prototype.destroy = function () {\n        this.destroyGui();\n        _super.prototype.destroy.call(this);\n    };\n    BaseDropZonePanel.prototype.destroyGui = function () {\n        this.guiDestroyFunctions.forEach(function (func) { return func(); });\n        this.guiDestroyFunctions.length = 0;\n        this.childColumnComponents.length = 0;\n        agGridCommunity._.clearElement(this.getGui());\n        agGridCommunity._.clearElement(this.eColumnDropList);\n    };\n    BaseDropZonePanel.prototype.init = function (params) {\n        this.params = params;\n        this.logger = this.beans.loggerFactory.create('AbstractColumnDropPanel');\n        this.beans.eventService.addEventListener(agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.refreshGui.bind(this));\n        this.addDestroyableEventListener(this.beans.gridOptionsWrapper, 'functionsReadOnly', this.refreshGui.bind(this));\n        this.setupDropTarget();\n        // we don't know if this bean will be initialised before columnController.\n        // if columnController first, then below will work\n        // if columnController second, then below will put blank in, and then above event gets first when columnController is set up\n        this.refreshGui();\n    };\n    BaseDropZonePanel.prototype.setupDropTarget = function () {\n        this.dropTarget = {\n            getContainer: this.getGui.bind(this),\n            getIconName: this.getIconName.bind(this),\n            onDragging: this.onDragging.bind(this),\n            onDragEnter: this.onDragEnter.bind(this),\n            onDragLeave: this.onDragLeave.bind(this),\n            onDragStop: this.onDragStop.bind(this),\n            isInterestedIn: this.isInterestedIn.bind(this)\n        };\n        this.beans.dragAndDropService.addDropTarget(this.dropTarget);\n    };\n    BaseDropZonePanel.prototype.isInterestedIn = function (type) {\n        // not interested in row drags\n        return type === agGridCommunity.DragSourceType.HeaderCell || type === agGridCommunity.DragSourceType.ToolPanel;\n    };\n    BaseDropZonePanel.prototype.checkInsertIndex = function (draggingEvent) {\n        var newIndex = this.horizontal ? this.getNewHorizontalInsertIndex(draggingEvent) : this.getNewVerticalInsertIndex(draggingEvent);\n        // <0 happens when drag is no a direction we are interested in, eg drag is up/down but in horizontal panel\n        if (newIndex < 0) {\n            return false;\n        }\n        var changed = newIndex !== this.insertIndex;\n        if (changed) {\n            this.insertIndex = newIndex;\n        }\n        return changed;\n    };\n    BaseDropZonePanel.prototype.getNewHorizontalInsertIndex = function (draggingEvent) {\n        if (agGridCommunity._.missing(draggingEvent.hDirection)) {\n            return -1;\n        }\n        var newIndex = 0;\n        var mouseEvent = draggingEvent.event;\n        var enableRtl = this.beans.gridOptionsWrapper.isEnableRtl();\n        var goingLeft = draggingEvent.hDirection === agGridCommunity.HorizontalDirection.Left;\n        var mouseX = mouseEvent.clientX;\n        this.childColumnComponents.forEach(function (childColumn) {\n            var rect = childColumn.getGui().getBoundingClientRect();\n            var rectX = goingLeft ? rect.right : rect.left;\n            var horizontalFit = enableRtl ? mouseX <= rectX : mouseX >= rectX;\n            if (horizontalFit) {\n                newIndex++;\n            }\n        });\n        return newIndex;\n    };\n    BaseDropZonePanel.prototype.getNewVerticalInsertIndex = function (draggingEvent) {\n        if (agGridCommunity._.missing(draggingEvent.vDirection)) {\n            return -1;\n        }\n        var newIndex = 0;\n        var mouseEvent = draggingEvent.event;\n        this.childColumnComponents.forEach(function (childColumn) {\n            var rect = childColumn.getGui().getBoundingClientRect();\n            var verticalFit = mouseEvent.clientY >= (draggingEvent.vDirection === agGridCommunity.VerticalDirection.Down ? rect.top : rect.bottom);\n            if (verticalFit) {\n                newIndex++;\n            }\n        });\n        return newIndex;\n    };\n    BaseDropZonePanel.prototype.checkDragStartedBySelf = function (draggingEvent) {\n        if (this.state !== BaseDropZonePanel.STATE_NOT_DRAGGING) {\n            return;\n        }\n        this.state = BaseDropZonePanel.STATE_REARRANGE_COLUMNS;\n        this.potentialDndColumns = draggingEvent.dragSource.getDragItem().columns || [];\n        this.refreshGui();\n        this.checkInsertIndex(draggingEvent);\n        this.refreshGui();\n    };\n    BaseDropZonePanel.prototype.onDragging = function (draggingEvent) {\n        this.checkDragStartedBySelf(draggingEvent);\n        if (this.checkInsertIndex(draggingEvent)) {\n            this.refreshGui();\n        }\n    };\n    BaseDropZonePanel.prototype.onDragEnter = function (draggingEvent) {\n        // this will contain all columns that are potential drops\n        var dragColumns = draggingEvent.dragSource.getDragItem().columns || [];\n        this.state = BaseDropZonePanel.STATE_NEW_COLUMNS_IN;\n        // take out columns that are not droppable\n        var goodDragColumns = dragColumns.filter(this.isColumnDroppable.bind(this));\n        if (goodDragColumns.length > 0) {\n            this.potentialDndColumns = goodDragColumns;\n            this.checkInsertIndex(draggingEvent);\n            this.refreshGui();\n        }\n    };\n    BaseDropZonePanel.prototype.isPotentialDndColumns = function () {\n        return agGridCommunity._.existsAndNotEmpty(this.potentialDndColumns);\n    };\n    BaseDropZonePanel.prototype.onDragLeave = function (draggingEvent) {\n        // if the dragging started from us, we remove the group, however if it started\n        // someplace else, then we don't, as it was only 'asking'\n        if (this.state === BaseDropZonePanel.STATE_REARRANGE_COLUMNS) {\n            var columns = draggingEvent.dragSource.getDragItem().columns || [];\n            this.removeColumns(columns);\n        }\n        if (this.isPotentialDndColumns()) {\n            this.potentialDndColumns = [];\n            this.refreshGui();\n        }\n        this.state = BaseDropZonePanel.STATE_NOT_DRAGGING;\n    };\n    BaseDropZonePanel.prototype.onDragStop = function () {\n        if (this.isPotentialDndColumns()) {\n            var success = false;\n            if (this.state === BaseDropZonePanel.STATE_NEW_COLUMNS_IN) {\n                this.addColumns(this.potentialDndColumns);\n                success = true;\n            }\n            else {\n                success = this.rearrangeColumns(this.potentialDndColumns);\n            }\n            this.potentialDndColumns = [];\n            // If the function is passive, then we don't refresh, as we assume the client application\n            // is going to call setRowGroups / setPivots / setValues at a later point which will then\n            // cause a refresh. This gives a nice GUI where the ghost stays until the app has caught\n            // up with the changes. However, if there was no change in the order, then we do need to\n            // refresh to reset the columns\n            if (!this.beans.gridOptionsWrapper.isFunctionsPassive() || !success) {\n                this.refreshGui();\n            }\n        }\n        this.state = BaseDropZonePanel.STATE_NOT_DRAGGING;\n    };\n    BaseDropZonePanel.prototype.removeColumns = function (columnsToRemove) {\n        var newColumnList = this.getExistingColumns().filter(function (col) { return !agGridCommunity._.includes(columnsToRemove, col); });\n        this.updateColumns(newColumnList);\n    };\n    BaseDropZonePanel.prototype.addColumns = function (columnsToAdd) {\n        var newColumnList = this.getExistingColumns().slice();\n        agGridCommunity._.insertArrayIntoArray(newColumnList, columnsToAdd, this.insertIndex);\n        this.updateColumns(newColumnList);\n    };\n    BaseDropZonePanel.prototype.rearrangeColumns = function (columnsToAdd) {\n        var newColumnList = this.getNonGhostColumns().slice();\n        agGridCommunity._.insertArrayIntoArray(newColumnList, columnsToAdd, this.insertIndex);\n        if (agGridCommunity._.shallowCompare(newColumnList, this.getExistingColumns())) {\n            return false;\n        }\n        else {\n            this.updateColumns(newColumnList);\n            return true;\n        }\n    };\n    BaseDropZonePanel.prototype.refreshGui = function () {\n        // we reset the scroll position after the refresh.\n        // if we don't do this, then the list will always scroll to the top\n        // each time we refresh it. this is because part of the refresh empties\n        // out the list which sets scroll to zero. so the user could be just\n        // reordering the list - we want to prevent the resetting of the scroll.\n        // this is relevant for vertical display only (as horizontal has no scroll)\n        var scrollTop = this.eColumnDropList.scrollTop;\n        this.destroyGui();\n        this.addIconAndTitleToGui();\n        this.addEmptyMessageToGui();\n        this.addColumnsToGui();\n        if (!this.isHorizontal()) {\n            this.eColumnDropList.scrollTop = scrollTop;\n        }\n    };\n    BaseDropZonePanel.prototype.getNonGhostColumns = function () {\n        var _this = this;\n        var existingColumns = this.getExistingColumns();\n        if (this.isPotentialDndColumns()) {\n            return existingColumns.filter(function (column) { return !agGridCommunity._.includes(_this.potentialDndColumns, column); });\n        }\n        else {\n            return existingColumns;\n        }\n    };\n    BaseDropZonePanel.prototype.addColumnsToGui = function () {\n        var _this = this;\n        var nonGhostColumns = this.getNonGhostColumns();\n        var addingGhosts = this.isPotentialDndColumns();\n        var itemsToAddToGui = [];\n        nonGhostColumns.forEach(function (column, index) {\n            if (addingGhosts && index >= _this.insertIndex) {\n                return;\n            }\n            var columnComponent = _this.createColumnComponent(column, false);\n            itemsToAddToGui.push(columnComponent);\n        });\n        if (this.isPotentialDndColumns()) {\n            this.potentialDndColumns.forEach(function (column) {\n                var columnComponent = _this.createColumnComponent(column, true);\n                itemsToAddToGui.push(columnComponent);\n            });\n            nonGhostColumns.forEach(function (column, index) {\n                if (index < _this.insertIndex) {\n                    return;\n                }\n                var columnComponent = _this.createColumnComponent(column, false);\n                itemsToAddToGui.push(columnComponent);\n            });\n        }\n        this.getGui().appendChild(this.eColumnDropList);\n        itemsToAddToGui.forEach(function (columnComponent, index) {\n            if (index > 0) {\n                _this.addArrow(_this.eColumnDropList);\n            }\n            _this.eColumnDropList.appendChild(columnComponent.getGui());\n        });\n    };\n    BaseDropZonePanel.prototype.createColumnComponent = function (column, ghost) {\n        var columnComponent = new DropZoneColumnComp(column, this.dropTarget, ghost, this.valueColumn);\n        columnComponent.addEventListener(DropZoneColumnComp.EVENT_COLUMN_REMOVE, this.removeColumns.bind(this, [column]));\n        this.beans.context.wireBean(columnComponent);\n        this.guiDestroyFunctions.push(function () { return columnComponent.destroy(); });\n        if (!ghost) {\n            this.childColumnComponents.push(columnComponent);\n        }\n        return columnComponent;\n    };\n    BaseDropZonePanel.prototype.addIconAndTitleToGui = function () {\n        var iconFaded = this.horizontal && this.isExistingColumnsEmpty();\n        var eGroupIcon = this.params.icon;\n        var eContainer = document.createElement('div');\n        agGridCommunity._.addCssClass(eGroupIcon, 'ag-column-drop-icon');\n        agGridCommunity._.addOrRemoveCssClass(eGroupIcon, 'ag-faded', iconFaded);\n        eContainer.appendChild(eGroupIcon);\n        if (!this.horizontal) {\n            var eTitle = document.createElement('span');\n            eTitle.innerHTML = this.params.title;\n            agGridCommunity._.addCssClass(eTitle, 'ag-column-drop-title');\n            agGridCommunity._.addOrRemoveCssClass(eTitle, 'ag-faded', iconFaded);\n            eContainer.appendChild(eTitle);\n        }\n        this.getGui().appendChild(eContainer);\n    };\n    BaseDropZonePanel.prototype.isExistingColumnsEmpty = function () {\n        return this.getExistingColumns().length === 0;\n    };\n    BaseDropZonePanel.prototype.addEmptyMessageToGui = function () {\n        if (!this.isExistingColumnsEmpty() || this.isPotentialDndColumns()) {\n            return;\n        }\n        var eMessage = document.createElement('span');\n        eMessage.innerHTML = this.params.emptyMessage;\n        agGridCommunity._.addCssClass(eMessage, 'ag-column-drop-empty-message');\n        this.getGui().appendChild(eMessage);\n    };\n    BaseDropZonePanel.prototype.addArrow = function (eParent) {\n        // only add the arrows if the layout is horizontal\n        if (this.horizontal) {\n            // for RTL it's a left arrow, otherwise it's a right arrow\n            var enableRtl = this.beans.gridOptionsWrapper.isEnableRtl();\n            eParent.appendChild(agGridCommunity._.createIconNoSpan(enableRtl ? 'smallLeft' : 'smallRight', this.beans.gridOptionsWrapper));\n        }\n    };\n    BaseDropZonePanel.STATE_NOT_DRAGGING = 'notDragging';\n    BaseDropZonePanel.STATE_NEW_COLUMNS_IN = 'newColumnsIn';\n    BaseDropZonePanel.STATE_REARRANGE_COLUMNS = 'rearrangeColumns';\n    return BaseDropZonePanel;\n}(agGridCommunity.Component));\n\nvar __extends$8 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$e = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar RowGroupDropZonePanel = /** @class */ (function (_super) {\n    __extends$8(RowGroupDropZonePanel, _super);\n    function RowGroupDropZonePanel(horizontal) {\n        return _super.call(this, horizontal, false, 'row-group') || this;\n    }\n    RowGroupDropZonePanel.prototype.passBeansUp = function () {\n        _super.prototype.setBeans.call(this, {\n            gridOptionsWrapper: this.gridOptionsWrapper,\n            eventService: this.eventService,\n            context: this.getContext(),\n            loggerFactory: this.loggerFactory,\n            dragAndDropService: this.dragAndDropService\n        });\n        var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n        var emptyMessage = localeTextFunc('rowGroupColumnsEmptyMessage', 'Drag here to set row groups');\n        var title = localeTextFunc('groups', 'Row Groups');\n        _super.prototype.init.call(this, {\n            dragAndDropIcon: agGridCommunity.DragAndDropService.ICON_GROUP,\n            icon: agGridCommunity._.createIconNoSpan('rowGroupPanel', this.gridOptionsWrapper, null),\n            emptyMessage: emptyMessage,\n            title: title\n        });\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.refreshGui.bind(this));\n    };\n    RowGroupDropZonePanel.prototype.isColumnDroppable = function (column) {\n        // we never allow grouping of secondary columns\n        if (this.gridOptionsWrapper.isFunctionsReadOnly() || !column.isPrimary()) {\n            return false;\n        }\n        return column.isAllowRowGroup() && !column.isRowGroupActive();\n    };\n    RowGroupDropZonePanel.prototype.updateColumns = function (columns) {\n        if (this.gridOptionsWrapper.isFunctionsPassive()) {\n            var event_1 = {\n                type: agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,\n                columns: columns,\n                api: this.gridApi,\n                columnApi: this.columnApi\n            };\n            this.eventService.dispatchEvent(event_1);\n        }\n        else {\n            this.columnController.setRowGroupColumns(columns, \"toolPanelUi\");\n        }\n    };\n    RowGroupDropZonePanel.prototype.getIconName = function () {\n        return this.isPotentialDndColumns() ? agGridCommunity.DragAndDropService.ICON_GROUP : agGridCommunity.DragAndDropService.ICON_NOT_ALLOWED;\n    };\n    RowGroupDropZonePanel.prototype.getExistingColumns = function () {\n        return this.columnController.getRowGroupColumns();\n    };\n    __decorate$e([\n        agGridCommunity.Autowired('columnController')\n    ], RowGroupDropZonePanel.prototype, \"columnController\", void 0);\n    __decorate$e([\n        agGridCommunity.Autowired('eventService')\n    ], RowGroupDropZonePanel.prototype, \"eventService\", void 0);\n    __decorate$e([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], RowGroupDropZonePanel.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$e([\n        agGridCommunity.Autowired('loggerFactory')\n    ], RowGroupDropZonePanel.prototype, \"loggerFactory\", void 0);\n    __decorate$e([\n        agGridCommunity.Autowired('dragAndDropService')\n    ], RowGroupDropZonePanel.prototype, \"dragAndDropService\", void 0);\n    __decorate$e([\n        agGridCommunity.Autowired('columnApi')\n    ], RowGroupDropZonePanel.prototype, \"columnApi\", void 0);\n    __decorate$e([\n        agGridCommunity.Autowired('gridApi')\n    ], RowGroupDropZonePanel.prototype, \"gridApi\", void 0);\n    __decorate$e([\n        agGridCommunity.PostConstruct\n    ], RowGroupDropZonePanel.prototype, \"passBeansUp\", null);\n    return RowGroupDropZonePanel;\n}(BaseDropZonePanel));\n\nvar __extends$9 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$f = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PivotDropZonePanel = /** @class */ (function (_super) {\n    __extends$9(PivotDropZonePanel, _super);\n    function PivotDropZonePanel(horizontal) {\n        return _super.call(this, horizontal, false, 'pivot') || this;\n    }\n    PivotDropZonePanel.prototype.passBeansUp = function () {\n        _super.prototype.setBeans.call(this, {\n            gridOptionsWrapper: this.gridOptionsWrapper,\n            eventService: this.eventService,\n            context: this.getContext(),\n            loggerFactory: this.loggerFactory,\n            dragAndDropService: this.dragAndDropService\n        });\n        var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n        var emptyMessage = localeTextFunc('pivotColumnsEmptyMessage', 'Drag here to set column labels');\n        var title = localeTextFunc('pivots', 'Column Labels');\n        _super.prototype.init.call(this, {\n            dragAndDropIcon: agGridCommunity.DragAndDropService.ICON_GROUP,\n            icon: agGridCommunity._.createIconNoSpan('pivotPanel', this.gridOptionsWrapper, null),\n            emptyMessage: emptyMessage,\n            title: title\n        });\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.refresh.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGED, this.refresh.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.checkVisibility.bind(this));\n        this.refresh();\n    };\n    PivotDropZonePanel.prototype.refresh = function () {\n        this.checkVisibility();\n        this.refreshGui();\n    };\n    PivotDropZonePanel.prototype.checkVisibility = function () {\n        var pivotMode = this.columnController.isPivotMode();\n        if (this.isHorizontal()) {\n            // what we do for horizontal (ie the pivot panel at the top) depends\n            // on the user property as well as pivotMode.\n            switch (this.gridOptionsWrapper.getPivotPanelShow()) {\n                case 'always':\n                    this.setDisplayed(pivotMode);\n                    break;\n                case 'onlyWhenPivoting':\n                    var pivotActive = this.columnController.isPivotActive();\n                    this.setDisplayed(pivotMode && pivotActive);\n                    break;\n                default:\n                    // never show it\n                    this.setDisplayed(false);\n                    break;\n            }\n        }\n        else {\n            // in toolPanel, the pivot panel is always shown when pivot mode is on\n            this.setDisplayed(pivotMode);\n        }\n    };\n    PivotDropZonePanel.prototype.isColumnDroppable = function (column) {\n        // we never allow grouping of secondary columns\n        if (this.gridOptionsWrapper.isFunctionsReadOnly() || !column.isPrimary()) {\n            return false;\n        }\n        return column.isAllowPivot() && !column.isPivotActive();\n    };\n    PivotDropZonePanel.prototype.updateColumns = function (columns) {\n        if (this.gridOptionsWrapper.isFunctionsPassive()) {\n            var event_1 = {\n                type: agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,\n                columns: columns,\n                api: this.gridApi,\n                columnApi: this.columnApi\n            };\n            this.eventService.dispatchEvent(event_1);\n        }\n        else {\n            this.columnController.setPivotColumns(columns, \"toolPanelUi\");\n        }\n    };\n    PivotDropZonePanel.prototype.getIconName = function () {\n        return this.isPotentialDndColumns() ? agGridCommunity.DragAndDropService.ICON_PIVOT : agGridCommunity.DragAndDropService.ICON_NOT_ALLOWED;\n    };\n    PivotDropZonePanel.prototype.getExistingColumns = function () {\n        return this.columnController.getPivotColumns();\n    };\n    __decorate$f([\n        agGridCommunity.Autowired('columnController')\n    ], PivotDropZonePanel.prototype, \"columnController\", void 0);\n    __decorate$f([\n        agGridCommunity.Autowired('eventService')\n    ], PivotDropZonePanel.prototype, \"eventService\", void 0);\n    __decorate$f([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], PivotDropZonePanel.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$f([\n        agGridCommunity.Autowired('loggerFactory')\n    ], PivotDropZonePanel.prototype, \"loggerFactory\", void 0);\n    __decorate$f([\n        agGridCommunity.Autowired('dragAndDropService')\n    ], PivotDropZonePanel.prototype, \"dragAndDropService\", void 0);\n    __decorate$f([\n        agGridCommunity.Autowired('columnApi')\n    ], PivotDropZonePanel.prototype, \"columnApi\", void 0);\n    __decorate$f([\n        agGridCommunity.Autowired('gridApi')\n    ], PivotDropZonePanel.prototype, \"gridApi\", void 0);\n    __decorate$f([\n        agGridCommunity.PostConstruct\n    ], PivotDropZonePanel.prototype, \"passBeansUp\", null);\n    return PivotDropZonePanel;\n}(BaseDropZonePanel));\n\nvar __extends$a = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$g = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar GridHeaderDropZones = /** @class */ (function (_super) {\n    __extends$a(GridHeaderDropZones, _super);\n    function GridHeaderDropZones() {\n        return _super.call(this) || this;\n    }\n    GridHeaderDropZones.prototype.postConstruct = function () {\n        this.setGui(this.createNorthPanel());\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onRowGroupChanged.bind(this));\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.onRowGroupChanged.bind(this));\n        this.onRowGroupChanged();\n    };\n    GridHeaderDropZones.prototype.createNorthPanel = function () {\n        var _this = this;\n        var topPanelGui = document.createElement('div');\n        var dropPanelVisibleListener = this.onDropPanelVisible.bind(this);\n        this.rowGroupComp = new RowGroupDropZonePanel(true);\n        this.getContext().wireBean(this.rowGroupComp);\n        this.addDestroyFunc(function () { return _this.rowGroupComp.destroy(); });\n        this.pivotComp = new PivotDropZonePanel(true);\n        this.getContext().wireBean(this.pivotComp);\n        this.addDestroyFunc(function () { return _this.pivotComp.destroy(); });\n        topPanelGui.appendChild(this.rowGroupComp.getGui());\n        topPanelGui.appendChild(this.pivotComp.getGui());\n        this.rowGroupComp.addEventListener(agGridCommunity.Component.EVENT_DISPLAYED_CHANGED, dropPanelVisibleListener);\n        this.pivotComp.addEventListener(agGridCommunity.Component.EVENT_DISPLAYED_CHANGED, dropPanelVisibleListener);\n        this.addDestroyFunc(function () {\n            _this.rowGroupComp.removeEventListener(agGridCommunity.Component.EVENT_DISPLAYED_CHANGED, dropPanelVisibleListener);\n            _this.pivotComp.removeEventListener(agGridCommunity.Component.EVENT_DISPLAYED_CHANGED, dropPanelVisibleListener);\n        });\n        this.onDropPanelVisible();\n        return topPanelGui;\n    };\n    GridHeaderDropZones.prototype.onDropPanelVisible = function () {\n        var bothDisplayed = this.rowGroupComp.isDisplayed() && this.pivotComp.isDisplayed();\n        this.rowGroupComp.addOrRemoveCssClass('ag-width-half', bothDisplayed);\n        this.pivotComp.addOrRemoveCssClass('ag-width-half', bothDisplayed);\n    };\n    GridHeaderDropZones.prototype.onRowGroupChanged = function () {\n        if (!this.rowGroupComp) {\n            return;\n        }\n        var rowGroupPanelShow = this.gridOptionsWrapper.getRowGroupPanelShow();\n        if (rowGroupPanelShow === agGridCommunity.Constants.ALWAYS) {\n            this.rowGroupComp.setDisplayed(true);\n        }\n        else if (rowGroupPanelShow === agGridCommunity.Constants.ONLY_WHEN_GROUPING) {\n            var grouping = !this.columnController.isRowGroupEmpty();\n            this.rowGroupComp.setDisplayed(grouping);\n        }\n        else {\n            this.rowGroupComp.setDisplayed(false);\n        }\n    };\n    __decorate$g([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], GridHeaderDropZones.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$g([\n        agGridCommunity.Autowired('columnController')\n    ], GridHeaderDropZones.prototype, \"columnController\", void 0);\n    __decorate$g([\n        agGridCommunity.Autowired('eventService')\n    ], GridHeaderDropZones.prototype, \"eventService\", void 0);\n    __decorate$g([\n        agGridCommunity.PostConstruct\n    ], GridHeaderDropZones.prototype, \"postConstruct\", null);\n    return GridHeaderDropZones;\n}(agGridCommunity.Component));\n\nvar RowGroupingModule = {\n    moduleName: agGridCommunity.ModuleNames.RowGroupingModule,\n    beans: [AggregationStage, GroupStage, PivotColDefService, PivotStage, AggFuncService],\n    agStackComponents: [\n        { componentName: 'AgGridHeaderDropZones', componentClass: GridHeaderDropZones }\n    ],\n    dependantModules: [\n        EnterpriseCoreModule\n    ]\n};\n\nvar __extends$b = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$h = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ValuesDropZonePanel = /** @class */ (function (_super) {\n    __extends$b(ValuesDropZonePanel, _super);\n    function ValuesDropZonePanel(horizontal) {\n        return _super.call(this, horizontal, true, 'values') || this;\n    }\n    ValuesDropZonePanel.prototype.passBeansUp = function () {\n        _super.prototype.setBeans.call(this, {\n            gridOptionsWrapper: this.gridOptionsWrapper,\n            eventService: this.eventService,\n            context: this.getContext(),\n            loggerFactory: this.loggerFactory,\n            dragAndDropService: this.dragAndDropService\n        });\n        var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n        var emptyMessage = localeTextFunc('valueColumnsEmptyMessage', 'Drag here to aggregate');\n        var title = localeTextFunc('values', 'Values');\n        _super.prototype.init.call(this, {\n            dragAndDropIcon: agGridCommunity.DragAndDropService.ICON_AGGREGATE,\n            icon: agGridCommunity._.createIconNoSpan('valuePanel', this.gridOptionsWrapper, null),\n            emptyMessage: emptyMessage,\n            title: title\n        });\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGED, this.refreshGui.bind(this));\n    };\n    ValuesDropZonePanel.prototype.getIconName = function () {\n        return this.isPotentialDndColumns() ? agGridCommunity.DragAndDropService.ICON_AGGREGATE : agGridCommunity.DragAndDropService.ICON_NOT_ALLOWED;\n    };\n    ValuesDropZonePanel.prototype.isColumnDroppable = function (column) {\n        // we never allow grouping of secondary columns\n        if (this.gridOptionsWrapper.isFunctionsReadOnly() || !column.isPrimary()) {\n            return false;\n        }\n        return column.isAllowValue() && !column.isValueActive();\n    };\n    ValuesDropZonePanel.prototype.updateColumns = function (columns) {\n        if (this.gridOptionsWrapper.isFunctionsPassive()) {\n            var event_1 = {\n                type: agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,\n                columns: columns,\n                api: this.gridApi,\n                columnApi: this.columnApi\n            };\n            this.eventService.dispatchEvent(event_1);\n        }\n        else {\n            this.columnController.setValueColumns(columns, \"toolPanelUi\");\n        }\n    };\n    ValuesDropZonePanel.prototype.getExistingColumns = function () {\n        return this.columnController.getValueColumns();\n    };\n    __decorate$h([\n        agGridCommunity.Autowired('columnController')\n    ], ValuesDropZonePanel.prototype, \"columnController\", void 0);\n    __decorate$h([\n        agGridCommunity.Autowired('eventService')\n    ], ValuesDropZonePanel.prototype, \"eventService\", void 0);\n    __decorate$h([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ValuesDropZonePanel.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$h([\n        agGridCommunity.Autowired('loggerFactory')\n    ], ValuesDropZonePanel.prototype, \"loggerFactory\", void 0);\n    __decorate$h([\n        agGridCommunity.Autowired('dragAndDropService')\n    ], ValuesDropZonePanel.prototype, \"dragAndDropService\", void 0);\n    __decorate$h([\n        agGridCommunity.Autowired('columnApi')\n    ], ValuesDropZonePanel.prototype, \"columnApi\", void 0);\n    __decorate$h([\n        agGridCommunity.Autowired('gridApi')\n    ], ValuesDropZonePanel.prototype, \"gridApi\", void 0);\n    __decorate$h([\n        agGridCommunity.PostConstruct\n    ], ValuesDropZonePanel.prototype, \"passBeansUp\", null);\n    return ValuesDropZonePanel;\n}(BaseDropZonePanel));\n\nvar __extends$c = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$i = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ColumnToolPanel = /** @class */ (function (_super) {\n    __extends$c(ColumnToolPanel, _super);\n    function ColumnToolPanel() {\n        var _this = _super.call(this, ColumnToolPanel.TEMPLATE) || this;\n        _this.initialised = false;\n        _this.childDestroyFuncs = [];\n        return _this;\n    }\n    // lazy initialise the panel\n    ColumnToolPanel.prototype.setVisible = function (visible) {\n        _super.prototype.setDisplayed.call(this, visible);\n        if (visible && !this.initialised) {\n            this.init(this.params);\n        }\n    };\n    ColumnToolPanel.prototype.init = function (params) {\n        var defaultParams = {\n            suppressSideButtons: false,\n            suppressColumnSelectAll: false,\n            suppressColumnFilter: false,\n            suppressColumnExpandAll: false,\n            contractColumnSelection: false,\n            suppressPivotMode: false,\n            suppressRowGroups: false,\n            suppressValues: false,\n            suppressPivots: false,\n            suppressSyncLayoutWithGrid: false,\n            api: this.gridApi\n        };\n        agGridCommunity._.mergeDeep(defaultParams, params);\n        this.params = defaultParams;\n        if (this.isRowGroupingModuleLoaded() && !this.params.suppressPivotMode) {\n            this.pivotModePanel = new PivotModePanel();\n            this.addComponent(this.pivotModePanel);\n        }\n        this.primaryColsPanel = this.getContext().createComponent('AG-PRIMARY-COLS');\n        this.primaryColsPanel.init(true, this.params);\n        this.addComponent(this.primaryColsPanel);\n        if (this.isRowGroupingModuleLoaded()) {\n            if (!this.params.suppressRowGroups) {\n                this.rowGroupDropZonePanel = new RowGroupDropZonePanel(false);\n                this.addComponent(this.rowGroupDropZonePanel);\n            }\n            if (!this.params.suppressValues) {\n                this.valuesDropZonePanel = new ValuesDropZonePanel(false);\n                this.addComponent(this.valuesDropZonePanel);\n            }\n            if (!this.params.suppressPivots) {\n                this.pivotDropZonePanel = new PivotDropZonePanel(false);\n                this.addComponent(this.pivotDropZonePanel);\n            }\n            this.setLastVisible();\n            this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.setLastVisible.bind(this));\n        }\n        this.initialised = true;\n    };\n    ColumnToolPanel.prototype.setPivotModeSectionVisible = function (visible) {\n        if (!this.isRowGroupingModuleLoaded()) {\n            return;\n        }\n        if (this.pivotModePanel) {\n            this.pivotModePanel.setDisplayed(visible);\n        }\n        else if (visible) {\n            this.pivotModePanel = new PivotModePanel();\n            this.getContext().wireBean(this.pivotModePanel);\n            // ensure pivot mode panel is positioned at the top of the columns tool panel\n            this.getGui().insertBefore(this.pivotModePanel.getGui(), this.getGui().firstChild);\n            this.childDestroyFuncs.push(this.pivotModePanel.destroy.bind(this.pivotModePanel));\n        }\n        this.setLastVisible();\n    };\n    ColumnToolPanel.prototype.setRowGroupsSectionVisible = function (visible) {\n        if (!this.isRowGroupingModuleLoaded()) {\n            return;\n        }\n        if (this.rowGroupDropZonePanel) {\n            this.rowGroupDropZonePanel.setDisplayed(visible);\n        }\n        else if (visible) {\n            this.rowGroupDropZonePanel = new RowGroupDropZonePanel(false);\n            this.addComponent(new RowGroupDropZonePanel(false));\n        }\n        this.setLastVisible();\n    };\n    ColumnToolPanel.prototype.setValuesSectionVisible = function (visible) {\n        if (!this.isRowGroupingModuleLoaded()) {\n            return;\n        }\n        if (this.valuesDropZonePanel) {\n            this.valuesDropZonePanel.setDisplayed(visible);\n        }\n        else if (visible) {\n            this.valuesDropZonePanel = new ValuesDropZonePanel(false);\n            this.addComponent(this.valuesDropZonePanel);\n        }\n        this.setLastVisible();\n    };\n    ColumnToolPanel.prototype.setPivotSectionVisible = function (visible) {\n        if (!this.isRowGroupingModuleLoaded()) {\n            return;\n        }\n        if (this.pivotDropZonePanel) {\n            this.pivotDropZonePanel.setDisplayed(visible);\n        }\n        else if (visible) {\n            this.pivotDropZonePanel = new PivotDropZonePanel(false);\n            this.addComponent(this.pivotDropZonePanel);\n            this.pivotDropZonePanel.setDisplayed(visible);\n        }\n        this.setLastVisible();\n    };\n    ColumnToolPanel.prototype.setLastVisible = function () {\n        var eGui = this.getGui();\n        var columnDrops = Array.prototype.slice.call(eGui.querySelectorAll('.ag-column-drop'));\n        columnDrops.forEach(function (columnDrop) { return agGridCommunity._.removeCssClass(columnDrop, 'ag-last-column-drop'); });\n        var lastVisible = agGridCommunity._.last(eGui.querySelectorAll('.ag-column-drop:not(.ag-hidden)'));\n        if (lastVisible) {\n            agGridCommunity._.addCssClass(lastVisible, 'ag-last-column-drop');\n        }\n    };\n    ColumnToolPanel.prototype.isRowGroupingModuleLoaded = function () {\n        return agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.RowGroupingModule, 'Row Grouping');\n    };\n    ColumnToolPanel.prototype.expandColumnGroups = function (groupIds) {\n        this.primaryColsPanel.expandGroups(groupIds);\n    };\n    ColumnToolPanel.prototype.collapseColumnGroups = function (groupIds) {\n        this.primaryColsPanel.collapseGroups(groupIds);\n    };\n    ColumnToolPanel.prototype.setColumnLayout = function (colDefs) {\n        this.primaryColsPanel.setColumnLayout(colDefs);\n    };\n    ColumnToolPanel.prototype.syncLayoutWithGrid = function () {\n        this.primaryColsPanel.syncLayoutWithGrid();\n    };\n    ColumnToolPanel.prototype.addComponent = function (component) {\n        this.getContext().wireBean(component);\n        this.getGui().appendChild(component.getGui());\n        this.childDestroyFuncs.push(component.destroy.bind(component));\n    };\n    ColumnToolPanel.prototype.destroyChildren = function () {\n        this.childDestroyFuncs.forEach(function (func) { return func(); });\n        this.childDestroyFuncs.length = 0;\n        agGridCommunity._.clearElement(this.getGui());\n    };\n    ColumnToolPanel.prototype.refresh = function () {\n        this.destroyChildren();\n        this.init(this.params);\n    };\n    ColumnToolPanel.prototype.destroy = function () {\n        this.destroyChildren();\n        _super.prototype.destroy.call(this);\n    };\n    ColumnToolPanel.TEMPLATE = \"<div class=\\\"ag-column-panel\\\"></div>\";\n    __decorate$i([\n        agGridCommunity.Autowired(\"gridOptionsWrapper\")\n    ], ColumnToolPanel.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$i([\n        agGridCommunity.Autowired(\"gridApi\")\n    ], ColumnToolPanel.prototype, \"gridApi\", void 0);\n    __decorate$i([\n        agGridCommunity.Autowired(\"eventService\")\n    ], ColumnToolPanel.prototype, \"eventService\", void 0);\n    return ColumnToolPanel;\n}(agGridCommunity.Component));\n\nvar __extends$d = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$j = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PrimaryColsPanel = /** @class */ (function (_super) {\n    __extends$d(PrimaryColsPanel, _super);\n    function PrimaryColsPanel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // we allow dragging in the toolPanel, but not when this component appears in the column menu\n    PrimaryColsPanel.prototype.init = function (allowDragging, params) {\n        this.setTemplate(PrimaryColsPanel.TEMPLATE);\n        this.allowDragging = allowDragging;\n        this.params = params;\n        this.primaryColsHeaderPanel.init(this.params);\n        var hideFilter = this.params.suppressColumnFilter;\n        var hideSelect = this.params.suppressColumnSelectAll;\n        var hideExpand = this.params.suppressColumnExpandAll;\n        if (hideExpand && hideFilter && hideSelect) {\n            this.primaryColsHeaderPanel.setDisplayed(false);\n        }\n        this.addDestroyableEventListener(this.primaryColsListPanel, 'groupExpanded', this.onGroupExpanded.bind(this));\n        this.addDestroyableEventListener(this.primaryColsListPanel, 'selectionChanged', this.onSelectionChange.bind(this));\n        this.primaryColsListPanel.init(this.params, this.allowDragging);\n        this.addDestroyableEventListener(this.primaryColsHeaderPanel, 'expandAll', this.onExpandAll.bind(this));\n        this.addDestroyableEventListener(this.primaryColsHeaderPanel, 'collapseAll', this.onCollapseAll.bind(this));\n        this.addDestroyableEventListener(this.primaryColsHeaderPanel, 'selectAll', this.onSelectAll.bind(this));\n        this.addDestroyableEventListener(this.primaryColsHeaderPanel, 'unselectAll', this.onUnselectAll.bind(this));\n        this.addDestroyableEventListener(this.primaryColsHeaderPanel, 'filterChanged', this.onFilterChanged.bind(this));\n    };\n    PrimaryColsPanel.prototype.onExpandAll = function () {\n        this.primaryColsListPanel.doSetExpandedAll(true);\n    };\n    PrimaryColsPanel.prototype.onCollapseAll = function () {\n        this.primaryColsListPanel.doSetExpandedAll(false);\n    };\n    PrimaryColsPanel.prototype.expandGroups = function (groupIds) {\n        this.primaryColsListPanel.setGroupsExpanded(true, groupIds);\n    };\n    PrimaryColsPanel.prototype.collapseGroups = function (groupIds) {\n        this.primaryColsListPanel.setGroupsExpanded(false, groupIds);\n    };\n    PrimaryColsPanel.prototype.setColumnLayout = function (colDefs) {\n        this.primaryColsListPanel.setColumnLayout(colDefs);\n    };\n    PrimaryColsPanel.prototype.onFilterChanged = function (event) {\n        this.primaryColsListPanel.setFilterText(event.filterText);\n    };\n    PrimaryColsPanel.prototype.syncLayoutWithGrid = function () {\n        this.primaryColsListPanel.syncColumnLayout();\n    };\n    PrimaryColsPanel.prototype.onSelectAll = function () {\n        this.primaryColsListPanel.doSetSelectedAll(true);\n    };\n    PrimaryColsPanel.prototype.onUnselectAll = function () {\n        this.primaryColsListPanel.doSetSelectedAll(false);\n    };\n    PrimaryColsPanel.prototype.onGroupExpanded = function (event) {\n        this.primaryColsHeaderPanel.setExpandState(event.state);\n    };\n    PrimaryColsPanel.prototype.onSelectionChange = function (event) {\n        this.primaryColsHeaderPanel.setSelectionState(event.state);\n    };\n    PrimaryColsPanel.TEMPLATE = \"<div class=\\\"ag-column-select-panel\\\">\\n            <ag-primary-cols-header ref=\\\"primaryColsHeaderPanel\\\"></ag-primary-cols-header>\\n            <ag-primary-cols-list ref=\\\"primaryColsListPanel\\\"></ag-primary-cols-list>\\n        </div>\";\n    __decorate$j([\n        agGridCommunity.RefSelector('primaryColsHeaderPanel')\n    ], PrimaryColsPanel.prototype, \"primaryColsHeaderPanel\", void 0);\n    __decorate$j([\n        agGridCommunity.RefSelector('primaryColsListPanel')\n    ], PrimaryColsPanel.prototype, \"primaryColsListPanel\", void 0);\n    return PrimaryColsPanel;\n}(agGridCommunity.Component));\n\nvar __extends$e = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$k = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar HorizontalResizeComp = /** @class */ (function (_super) {\n    __extends$e(HorizontalResizeComp, _super);\n    function HorizontalResizeComp() {\n        return _super.call(this, \"<div class=\\\"ag-tool-panel-horizontal-resize\\\"></div>\") || this;\n    }\n    HorizontalResizeComp.prototype.setElementToResize = function (elementToResize) {\n        this.elementToResize = elementToResize;\n    };\n    HorizontalResizeComp.prototype.postConstruct = function () {\n        var finishedWithResizeFunc = this.horizontalResizeService.addResizeBar({\n            eResizeBar: this.getGui(),\n            dragStartPixels: 1,\n            onResizeStart: this.onResizeStart.bind(this),\n            onResizing: this.onResizing.bind(this),\n            onResizeEnd: this.onResizing.bind(this)\n        });\n        this.addDestroyFunc(finishedWithResizeFunc);\n        this.setInverted(this.gridOptionsWrapper.isEnableRtl());\n    };\n    HorizontalResizeComp.prototype.onResizeStart = function () {\n        this.startingWidth = this.elementToResize.offsetWidth;\n    };\n    HorizontalResizeComp.prototype.onResizing = function (delta) {\n        var direction = this.inverted ? -1 : 1;\n        var newWidth = Math.max(100, Math.floor(this.startingWidth - (delta * direction)));\n        this.elementToResize.style.width = newWidth + \"px\";\n    };\n    HorizontalResizeComp.prototype.setInverted = function (inverted) {\n        this.inverted = inverted;\n    };\n    __decorate$k([\n        agGridCommunity.Autowired('horizontalResizeService')\n    ], HorizontalResizeComp.prototype, \"horizontalResizeService\", void 0);\n    __decorate$k([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], HorizontalResizeComp.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$k([\n        agGridCommunity.Autowired('eventService')\n    ], HorizontalResizeComp.prototype, \"eventService\", void 0);\n    __decorate$k([\n        agGridCommunity.PostConstruct\n    ], HorizontalResizeComp.prototype, \"postConstruct\", null);\n    return HorizontalResizeComp;\n}(agGridCommunity.Component));\n\nvar __extends$f = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$l = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SideBarButtonsComp = /** @class */ (function (_super) {\n    __extends$f(SideBarButtonsComp, _super);\n    function SideBarButtonsComp() {\n        var _this = _super.call(this, SideBarButtonsComp.TEMPLATE) || this;\n        _this.buttonComps = [];\n        return _this;\n    }\n    SideBarButtonsComp.prototype.setToolPanelDefs = function (toolPanelDefs) {\n        toolPanelDefs.forEach(this.addButtonComp.bind(this));\n    };\n    SideBarButtonsComp.prototype.setActiveButton = function (id) {\n        this.buttonComps.forEach(function (comp) {\n            comp.setSelected(id === comp.getToolPanelId());\n        });\n    };\n    SideBarButtonsComp.prototype.addButtonComp = function (def) {\n        var _this = this;\n        var buttonComp = new SideBarButtonComp(def);\n        this.getContext().wireBean(buttonComp);\n        this.buttonComps.push(buttonComp);\n        this.getGui().appendChild(buttonComp.getGui());\n        buttonComp.addEventListener(SideBarButtonComp.EVENT_TOGGLE_BUTTON_CLICKED, function () {\n            _this.dispatchEvent({\n                type: SideBarButtonsComp.EVENT_SIDE_BAR_BUTTON_CLICKED,\n                toolPanelId: def.id\n            });\n        });\n    };\n    SideBarButtonsComp.prototype.clearButtons = function () {\n        if (this.buttonComps) {\n            this.buttonComps.forEach(function (comp) { return comp.destroy(); });\n        }\n        agGridCommunity._.clearElement(this.getGui());\n        this.buttonComps.length = 0;\n    };\n    SideBarButtonsComp.prototype.destroy = function () {\n        this.clearButtons();\n        _super.prototype.destroy.call(this);\n    };\n    SideBarButtonsComp.EVENT_SIDE_BAR_BUTTON_CLICKED = 'sideBarButtonClicked';\n    SideBarButtonsComp.TEMPLATE = \"<div class=\\\"ag-side-buttons\\\"></div>\";\n    __decorate$l([\n        agGridCommunity.Autowired(\"gridOptionsWrapper\")\n    ], SideBarButtonsComp.prototype, \"gridOptionsWrapper\", void 0);\n    return SideBarButtonsComp;\n}(agGridCommunity.Component));\nvar SideBarButtonComp = /** @class */ (function (_super) {\n    __extends$f(SideBarButtonComp, _super);\n    function SideBarButtonComp(toolPanelDef) {\n        var _this = _super.call(this) || this;\n        _this.toolPanelDef = toolPanelDef;\n        return _this;\n    }\n    SideBarButtonComp.prototype.getToolPanelId = function () {\n        return this.toolPanelDef.id;\n    };\n    SideBarButtonComp.prototype.postConstruct = function () {\n        var template = this.createTemplate();\n        this.setTemplate(template);\n        var toggleButton = this.eToggleButton;\n        var iconDiv = toggleButton.querySelector('div');\n        iconDiv.insertAdjacentElement('afterbegin', agGridCommunity._.createIconNoSpan(this.toolPanelDef.iconKey, this.gridOptionsWrapper));\n        this.addDestroyableEventListener(this.eToggleButton, 'click', this.onButtonPressed.bind(this));\n    };\n    SideBarButtonComp.prototype.createTemplate = function () {\n        var translate = this.gridOptionsWrapper.getLocaleTextFunc();\n        var def = this.toolPanelDef;\n        var label = translate(def.labelKey, def.labelDefault);\n        var res = \"<div class=\\\"ag-side-button\\\">\\n                <button type=\\\"button\\\" ref=\\\"eToggleButton\\\">\\n                    <div></div>\\n                    <span>\" + label + \"</span>\\n                </button>\\n            </div>\";\n        return res;\n    };\n    SideBarButtonComp.prototype.onButtonPressed = function () {\n        this.dispatchEvent({ type: SideBarButtonComp.EVENT_TOGGLE_BUTTON_CLICKED });\n    };\n    SideBarButtonComp.prototype.setSelected = function (selected) {\n        this.addOrRemoveCssClass('ag-selected', selected);\n    };\n    SideBarButtonComp.EVENT_TOGGLE_BUTTON_CLICKED = 'toggleButtonClicked';\n    __decorate$l([\n        agGridCommunity.Autowired(\"gridOptionsWrapper\")\n    ], SideBarButtonComp.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$l([\n        agGridCommunity.RefSelector('eToggleButton')\n    ], SideBarButtonComp.prototype, \"eToggleButton\", void 0);\n    __decorate$l([\n        agGridCommunity.PostConstruct\n    ], SideBarButtonComp.prototype, \"postConstruct\", null);\n    return SideBarButtonComp;\n}(agGridCommunity.Component));\n\nvar __extends$g = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$m = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ToolPanelWrapper = /** @class */ (function (_super) {\n    __extends$g(ToolPanelWrapper, _super);\n    function ToolPanelWrapper() {\n        return _super.call(this, ToolPanelWrapper.TEMPLATE) || this;\n    }\n    ToolPanelWrapper.prototype.getToolPanelId = function () {\n        return this.toolPanelId;\n    };\n    ToolPanelWrapper.prototype.setToolPanelDef = function (toolPanelDef) {\n        this.toolPanelId = toolPanelDef.id;\n        var params = {\n            api: this.gridOptionsWrapper.getApi()\n        };\n        var componentPromise = this.userComponentFactory.newToolPanelComponent(toolPanelDef, params);\n        if (componentPromise == null) {\n            console.warn(\"ag-grid: error processing tool panel component \" + toolPanelDef.id + \". You need to specify either 'toolPanel' or 'toolPanelFramework'\");\n            return;\n        }\n        componentPromise.then(this.setToolPanelComponent.bind(this));\n    };\n    ToolPanelWrapper.prototype.setupResize = function () {\n        var resizeBar = this.resizeBar = new HorizontalResizeComp();\n        this.getContext().wireBean(resizeBar);\n        resizeBar.setElementToResize(this.getGui());\n        this.appendChild(resizeBar);\n    };\n    ToolPanelWrapper.prototype.setToolPanelComponent = function (compInstance) {\n        this.toolPanelCompInstance = compInstance;\n        this.appendChild(compInstance);\n    };\n    ToolPanelWrapper.prototype.getToolPanelInstance = function () {\n        return this.toolPanelCompInstance;\n    };\n    ToolPanelWrapper.prototype.setResizerSizerSide = function (side) {\n        var isRtl = this.gridOptionsWrapper.isEnableRtl();\n        var isLeft = side === 'left';\n        var inverted = isRtl ? isLeft : !isLeft;\n        this.resizeBar.setInverted(inverted);\n    };\n    ToolPanelWrapper.prototype.refresh = function () {\n        this.toolPanelCompInstance.refresh();\n    };\n    ToolPanelWrapper.TEMPLATE = \"<div class=\\\"ag-tool-panel-wrapper\\\"/>\";\n    __decorate$m([\n        agGridCommunity.Autowired(\"userComponentFactory\")\n    ], ToolPanelWrapper.prototype, \"userComponentFactory\", void 0);\n    __decorate$m([\n        agGridCommunity.Autowired(\"gridOptionsWrapper\")\n    ], ToolPanelWrapper.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$m([\n        agGridCommunity.PostConstruct\n    ], ToolPanelWrapper.prototype, \"setupResize\", null);\n    return ToolPanelWrapper;\n}(agGridCommunity.Component));\n\nvar __extends$h = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$n = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SideBarComp = /** @class */ (function (_super) {\n    __extends$h(SideBarComp, _super);\n    function SideBarComp() {\n        var _this = _super.call(this, SideBarComp.TEMPLATE) || this;\n        _this.toolPanelWrappers = [];\n        return _this;\n    }\n    SideBarComp.prototype.postConstruct = function () {\n        this.sideBarButtonsComp.addEventListener(SideBarButtonsComp.EVENT_SIDE_BAR_BUTTON_CLICKED, this.onToolPanelButtonClicked.bind(this));\n        this.setSideBarDef();\n    };\n    SideBarComp.prototype.onToolPanelButtonClicked = function (event) {\n        var id = event.toolPanelId;\n        var openedItem = this.openedItem();\n        // if item was already open, we close it\n        if (openedItem === id) {\n            this.openToolPanel(undefined); // passing undefined closes\n        }\n        else {\n            this.openToolPanel(id);\n        }\n    };\n    SideBarComp.prototype.clearDownUi = function () {\n        this.sideBarButtonsComp.clearButtons();\n        this.destroyToolPanelWrappers();\n    };\n    SideBarComp.prototype.setSideBarDef = function () {\n        // initially hide side bar\n        this.setDisplayed(false);\n        var sideBar = this.gridOptionsWrapper.getSideBar();\n        var sideBarExists = !!sideBar && !!sideBar.toolPanels;\n        if (sideBarExists) {\n            var shouldDisplaySideBar = sideBarExists && !sideBar.hiddenByDefault;\n            this.setDisplayed(shouldDisplaySideBar);\n            var toolPanelDefs = sideBar.toolPanels;\n            this.sideBarButtonsComp.setToolPanelDefs(toolPanelDefs);\n            this.setupToolPanels(toolPanelDefs);\n            this.setSideBarPosition(sideBar.position);\n            if (!sideBar.hiddenByDefault) {\n                this.openToolPanel(sideBar.defaultToolPanel);\n            }\n        }\n    };\n    SideBarComp.prototype.setSideBarPosition = function (position) {\n        if (!position) {\n            position = 'right';\n        }\n        var isLeft = position === 'left';\n        var resizerSide = isLeft ? 'right' : 'left';\n        var eGui = this.getGui();\n        agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-side-bar-left', isLeft);\n        agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-side-bar-right', !isLeft);\n        this.toolPanelWrappers.forEach(function (wrapper) {\n            wrapper.setResizerSizerSide(resizerSide);\n        });\n        return this;\n    };\n    SideBarComp.prototype.setupToolPanels = function (defs) {\n        var _this = this;\n        defs.forEach(function (def) {\n            if (def.id == null) {\n                console.warn(\"ag-grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id\");\n                return;\n            }\n            // helpers, in case user doesn't have the right module loaded\n            if (def.toolPanel === 'agColumnsToolPanel') {\n                var moduleMissing = !agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.ColumnToolPanelModule, 'Column Tool Panel');\n                if (moduleMissing) {\n                    return;\n                }\n            }\n            if (def.toolPanel === 'agFiltersToolPanel') {\n                var moduleMissing = !agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.FiltersToolPanelModule, 'Filters Tool Panel');\n                if (moduleMissing) {\n                    return;\n                }\n            }\n            var wrapper = new ToolPanelWrapper();\n            _this.getContext().wireBean(wrapper);\n            wrapper.setToolPanelDef(def);\n            wrapper.setDisplayed(false);\n            _this.getGui().appendChild(wrapper.getGui());\n            _this.toolPanelWrappers.push(wrapper);\n        });\n    };\n    SideBarComp.prototype.refresh = function () {\n        this.toolPanelWrappers.forEach(function (wrapper) { return wrapper.refresh(); });\n    };\n    SideBarComp.prototype.openToolPanel = function (key) {\n        var currentlyOpenedKey = this.openedItem();\n        if (currentlyOpenedKey === key) {\n            return;\n        }\n        this.toolPanelWrappers.forEach(function (wrapper) {\n            var show = key === wrapper.getToolPanelId();\n            wrapper.setDisplayed(show);\n        });\n        var newlyOpenedKey = this.openedItem();\n        var openToolPanelChanged = currentlyOpenedKey !== newlyOpenedKey;\n        if (openToolPanelChanged) {\n            this.sideBarButtonsComp.setActiveButton(key);\n            this.raiseToolPanelVisibleEvent(key);\n        }\n    };\n    SideBarComp.prototype.getToolPanelInstance = function (key) {\n        var toolPanelWrapper = this.toolPanelWrappers.filter(function (toolPanel) { return toolPanel.getToolPanelId() === key; })[0];\n        if (!toolPanelWrapper) {\n            console.warn(\"ag-grid: unable to lookup Tool Panel as invalid key supplied: \" + key);\n            return;\n        }\n        return toolPanelWrapper.getToolPanelInstance();\n    };\n    SideBarComp.prototype.raiseToolPanelVisibleEvent = function (key) {\n        var event = {\n            type: agGridCommunity.Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,\n            source: key,\n            api: this.gridOptionsWrapper.getApi(),\n            columnApi: this.gridOptionsWrapper.getColumnApi()\n        };\n        this.eventService.dispatchEvent(event);\n    };\n    SideBarComp.prototype.close = function () {\n        this.openToolPanel(undefined);\n    };\n    SideBarComp.prototype.isToolPanelShowing = function () {\n        return !!this.openedItem();\n    };\n    SideBarComp.prototype.openedItem = function () {\n        var activeToolPanel = null;\n        this.toolPanelWrappers.forEach(function (wrapper) {\n            if (wrapper.isDisplayed()) {\n                activeToolPanel = wrapper.getToolPanelId();\n            }\n        });\n        return activeToolPanel;\n    };\n    // get called after user sets new sideBarDef via the API\n    SideBarComp.prototype.reset = function () {\n        this.clearDownUi();\n        this.setSideBarDef();\n    };\n    SideBarComp.prototype.destroyToolPanelWrappers = function () {\n        this.toolPanelWrappers.forEach(function (wrapper) {\n            agGridCommunity._.removeFromParent(wrapper.getGui());\n            wrapper.destroy();\n        });\n        this.toolPanelWrappers.length = 0;\n    };\n    SideBarComp.prototype.destroy = function () {\n        this.destroyToolPanelWrappers();\n        _super.prototype.destroy.call(this);\n    };\n    SideBarComp.TEMPLATE = \"<div class=\\\"ag-side-bar ag-unselectable\\\">\\n              <ag-side-bar-buttons ref=\\\"sideBarButtons\\\">\\n          </div>\";\n    __decorate$n([\n        agGridCommunity.Autowired(\"eventService\")\n    ], SideBarComp.prototype, \"eventService\", void 0);\n    __decorate$n([\n        agGridCommunity.Autowired(\"gridOptionsWrapper\")\n    ], SideBarComp.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$n([\n        agGridCommunity.RefSelector('sideBarButtons')\n    ], SideBarComp.prototype, \"sideBarButtonsComp\", void 0);\n    __decorate$n([\n        agGridCommunity.PostConstruct\n    ], SideBarComp.prototype, \"postConstruct\", null);\n    return SideBarComp;\n}(agGridCommunity.Component));\n\nvar __decorate$o = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ToolPanelColDefService = /** @class */ (function () {\n    function ToolPanelColDefService() {\n        var _this = this;\n        this.isColGroupDef = function (colDef) { return colDef && typeof colDef.children !== 'undefined'; };\n        this.getId = function (colDef) {\n            return _this.isColGroupDef(colDef) ? colDef.groupId : colDef.colId;\n        };\n    }\n    ToolPanelColDefService.prototype.createColumnTree = function (colDefs) {\n        var _this = this;\n        var invalidColIds = [];\n        var createDummyColGroup = function (abstractColDef, depth) {\n            if (_this.isColGroupDef(abstractColDef)) {\n                // creating 'dummy' group which is not associated with grid column group\n                var groupDef = abstractColDef;\n                var groupId = (typeof groupDef.groupId !== 'undefined') ? groupDef.groupId : groupDef.headerName;\n                var group = new agGridCommunity.OriginalColumnGroup(groupDef, groupId, false, depth);\n                var children_1 = [];\n                groupDef.children.forEach(function (def) {\n                    var child = createDummyColGroup(def, depth + 1);\n                    // check column exists in case invalid colDef is supplied for primary column\n                    if (child) {\n                        children_1.push(child);\n                    }\n                });\n                group.setChildren(children_1);\n                return group;\n            }\n            else {\n                var colDef = abstractColDef;\n                var key = colDef.colId ? colDef.colId : colDef.field;\n                var column = _this.columnController.getPrimaryColumn(key);\n                if (!column) {\n                    invalidColIds.push(colDef);\n                }\n                return column;\n            }\n        };\n        var mappedResults = [];\n        colDefs.forEach(function (colDef) {\n            var result = createDummyColGroup(colDef, 0);\n            if (result) {\n                // only return correctly mapped colDef results\n                mappedResults.push(result);\n            }\n        });\n        if (invalidColIds.length > 0) {\n            console.warn('ag-Grid: unable to find grid columns for the supplied colDef(s):', invalidColIds);\n        }\n        return mappedResults;\n    };\n    ToolPanelColDefService.prototype.syncLayoutWithGrid = function (syncLayoutCallback) {\n        // extract ordered list of leaf path trees (column group hierarchy for each individual leaf column)\n        var leafPathTrees = this.getLeafPathTrees();\n        // merge leaf path tree taking split column groups into account\n        var mergedColumnTrees = this.mergeLeafPathTrees(leafPathTrees);\n        // sync layout with merged column trees\n        syncLayoutCallback(mergedColumnTrees);\n    };\n    ToolPanelColDefService.prototype.getLeafPathTrees = function () {\n        // leaf tree paths are obtained by walking up the tree starting at a column until we reach the top level group.\n        var getLeafPathTree = function (node, childDef) {\n            var leafPathTree;\n            // build up tree in reverse order\n            if (node instanceof agGridCommunity.OriginalColumnGroup) {\n                if (node.isPadding()) {\n                    // skip over padding groups\n                    leafPathTree = childDef;\n                }\n                else {\n                    var groupDef = agGridCommunity._.assign({}, node.getColGroupDef());\n                    // ensure group contains groupId\n                    groupDef.groupId = node.getGroupId();\n                    groupDef.children = [childDef];\n                    leafPathTree = groupDef;\n                }\n            }\n            else {\n                var colDef = agGridCommunity._.assign({}, node.getColDef());\n                // ensure col contains colId\n                colDef.colId = node.getColId();\n                leafPathTree = colDef;\n            }\n            // walk tree\n            var parent = node.getOriginalParent();\n            if (parent) {\n                // keep walking up the tree until we reach the root\n                return getLeafPathTree(parent, leafPathTree);\n            }\n            else {\n                // we have reached the root - exit with resulting leaf path tree\n                return leafPathTree;\n            }\n        };\n        // obtain a sorted list of all grid columns\n        var allGridColumns = this.columnController.getAllGridColumns();\n        // only primary columns and non row group columns should appear in the tool panel\n        var allPrimaryGridColumns = allGridColumns.filter(function (column) {\n            var colDef = column.getColDef();\n            return column.isPrimary() && !colDef.showRowGroup;\n        });\n        // construct a leaf path tree for each column\n        return allPrimaryGridColumns.map(function (col) { return getLeafPathTree(col, col.getColDef()); });\n    };\n    ToolPanelColDefService.prototype.mergeLeafPathTrees = function (leafPathTrees) {\n        var _this = this;\n        var matchingRootGroupIds = function (pathA, pathB) {\n            var bothPathsAreGroups = _this.isColGroupDef(pathA) && _this.isColGroupDef(pathB);\n            return bothPathsAreGroups && _this.getId(pathA) === _this.getId(pathB);\n        };\n        var mergeTrees = function (treeA, treeB) {\n            if (!_this.isColGroupDef(treeB))\n                return treeA;\n            var mergeResult = treeA;\n            var groupToMerge = treeB;\n            if (groupToMerge.children && groupToMerge.groupId) {\n                var added = _this.addChildrenToGroup(mergeResult, groupToMerge.groupId, groupToMerge.children[0]);\n                if (added)\n                    return mergeResult;\n            }\n            groupToMerge.children.forEach(function (child) { return mergeTrees(mergeResult, child); });\n            return mergeResult;\n        };\n        // we can't just merge the leaf path trees as groups can be split apart - instead only merge if leaf\n        // path groups with the same root group id are contiguous.\n        var mergeColDefs = [];\n        for (var i = 1; i <= leafPathTrees.length; i++) {\n            var first = leafPathTrees[i - 1];\n            var second = leafPathTrees[i];\n            if (matchingRootGroupIds(first, second)) {\n                leafPathTrees[i] = mergeTrees(first, second);\n            }\n            else {\n                mergeColDefs.push(first);\n            }\n        }\n        return mergeColDefs;\n    };\n    ToolPanelColDefService.prototype.addChildrenToGroup = function (tree, groupId, colDef) {\n        var _this = this;\n        var subGroupIsSplit = function (currentGroup, groupToAdd) {\n            var existingChildIds = currentGroup.children.map(_this.getId);\n            var childGroupAlreadyExists = agGridCommunity._.includes(existingChildIds, _this.getId(groupToAdd));\n            var lastChild = agGridCommunity._.last(currentGroup.children);\n            var lastChildIsDifferent = lastChild && _this.getId(lastChild) !== _this.getId(groupToAdd);\n            return childGroupAlreadyExists && lastChildIsDifferent;\n        };\n        if (!this.isColGroupDef(tree))\n            return true;\n        var currentGroup = tree;\n        var groupToAdd = colDef;\n        if (subGroupIsSplit(currentGroup, groupToAdd)) {\n            currentGroup.children.push(groupToAdd);\n            return true;\n        }\n        if (currentGroup.groupId === groupId) {\n            // add children that don't already exist to group\n            var existingChildIds = currentGroup.children.map(this.getId);\n            var colDefAlreadyPresent = agGridCommunity._.includes(existingChildIds, this.getId(groupToAdd));\n            if (!colDefAlreadyPresent) {\n                currentGroup.children.push(groupToAdd);\n                return true;\n            }\n        }\n        // recurse until correct group is found to add children\n        currentGroup.children.forEach(function (subGroup) { return _this.addChildrenToGroup(subGroup, groupId, colDef); });\n        return false;\n    };\n    __decorate$o([\n        agGridCommunity.Autowired('columnController')\n    ], ToolPanelColDefService.prototype, \"columnController\", void 0);\n    ToolPanelColDefService = __decorate$o([\n        agGridCommunity.Bean('toolPanelColDefService')\n    ], ToolPanelColDefService);\n    return ToolPanelColDefService;\n}());\n\nvar SideBarModule = {\n    moduleName: agGridCommunity.ModuleNames.SideBarModule,\n    beans: [ToolPanelColDefService],\n    agStackComponents: [\n        { componentName: 'AgHorizontalResize', componentClass: HorizontalResizeComp },\n        { componentName: 'AgSideBar', componentClass: SideBarComp },\n        { componentName: 'AgSideBarButtons', componentClass: SideBarButtonsComp },\n    ],\n    dependantModules: [\n        EnterpriseCoreModule\n    ]\n};\n\nvar ColumnsToolPanelModule = {\n    moduleName: agGridCommunity.ModuleNames.ColumnToolPanelModule,\n    beans: [],\n    agStackComponents: [\n        { componentName: 'AgPrimaryColsHeader', componentClass: PrimaryColsHeaderPanel },\n        { componentName: 'AgPrimaryColsList', componentClass: PrimaryColsListPanel },\n        { componentName: 'AgPrimaryCols', componentClass: PrimaryColsPanel }\n    ],\n    userComponents: [\n        { componentName: 'agColumnsToolPanel', componentClass: ColumnToolPanel },\n    ],\n    dependantModules: [\n        EnterpriseCoreModule,\n        RowGroupingModule,\n        SideBarModule\n    ]\n};\n\nvar coreFactory = {\n    getTemplate: function () {\n        var dt = new Date(), jsonDate = dt.toJSON();\n        return {\n            name: 'cp:coreProperties',\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"xmlns:\",\n                        map: {\n                            cp: \"http://schemas.openxmlformats.org/package/2006/metadata/core-properties\",\n                            dc: 'http://purl.org/dc/elements/1.1/',\n                            dcterms: 'http://purl.org/dc/terms/',\n                            dcmitype: 'http://purl.org/dc/dcmitype/',\n                            xsi: 'http://www.w3.org/2001/XMLSchema-instance'\n                        }\n                    }]\n            },\n            children: [{\n                    name: 'dc:creator',\n                    textNode: 'ag-Grid'\n                }, {\n                    name: 'dc:title',\n                    textNode: 'Workbook'\n                }, {\n                    name: 'dcterms:created',\n                    properties: {\n                        rawMap: {\n                            'xsi:type': 'dcterms:W3CDTF'\n                        }\n                    },\n                    textNode: jsonDate\n                }, {\n                    name: 'dcterms:modified',\n                    properties: {\n                        rawMap: {\n                            'xsi:type': 'dcterms:W3CDTF'\n                        }\n                    },\n                    textNode: jsonDate\n                }]\n        };\n    }\n};\n\nvar contentTypeFactory = {\n    getTemplate: function (config) {\n        var name = config.name, ContentType = config.ContentType, Extension = config.Extension, PartName = config.PartName;\n        return {\n            name: name,\n            properties: {\n                rawMap: {\n                    Extension: Extension,\n                    PartName: PartName,\n                    ContentType: ContentType\n                }\n            }\n        };\n    }\n};\n\nvar contentTypesFactory = {\n    getTemplate: function () {\n        var children = [{\n                name: 'Default',\n                Extension: 'rels',\n                ContentType: 'application/vnd.openxmlformats-package.relationships+xml'\n            }, {\n                name: 'Default',\n                ContentType: 'application/xml',\n                Extension: 'xml'\n            }, {\n                name: 'Override',\n                ContentType: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml',\n                PartName: \"/xl/workbook.xml\"\n            }, {\n                name: 'Override',\n                ContentType: 'application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml',\n                PartName: '/xl/worksheets/sheet1.xml'\n            }, {\n                name: 'Override',\n                ContentType: 'application/vnd.openxmlformats-officedocument.theme+xml',\n                PartName: '/xl/theme/theme1.xml'\n            }, {\n                name: 'Override',\n                ContentType: 'application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml',\n                PartName: '/xl/styles.xml'\n            }, {\n                name: 'Override',\n                ContentType: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml',\n                PartName: '/xl/sharedStrings.xml'\n            }, {\n                name: 'Override',\n                ContentType: 'application/vnd.openxmlformats-package.core-properties+xml',\n                PartName: '/docProps/core.xml'\n            }].map(contentTypeFactory.getTemplate);\n        return {\n            name: \"Types\",\n            properties: {\n                rawMap: {\n                    xmlns: \"http://schemas.openxmlformats.org/package/2006/content-types\"\n                }\n            },\n            children: children\n        };\n    }\n};\n\nvar getColorChildren = function (props) {\n    var type = props[0], innerType = props[1], val = props[2], lastClr = props[3];\n    return {\n        name: \"a:\" + type,\n        children: [{\n                name: \"a:\" + innerType,\n                properties: {\n                    rawMap: {\n                        val: val,\n                        lastClr: lastClr\n                    }\n                }\n            }]\n    };\n};\nvar colorScheme = {\n    getTemplate: function () {\n        return {\n            name: \"a:clrScheme\",\n            properties: {\n                rawMap: {\n                    name: \"Office\"\n                }\n            },\n            children: [\n                getColorChildren(['dk1', 'sysClr', 'windowText', '000000']),\n                getColorChildren(['lt1', 'sysClr', 'window', 'FFFFFF']),\n                getColorChildren(['dk2', 'srgbClr', '44546A']),\n                getColorChildren(['lt2', 'srgbClr', 'E7E6E6']),\n                getColorChildren(['accent1', 'srgbClr', '4472C4']),\n                getColorChildren(['accent2', 'srgbClr', 'ED7D31']),\n                getColorChildren(['accent3', 'srgbClr', 'A5A5A5']),\n                getColorChildren(['accent4', 'srgbClr', 'FFC000']),\n                getColorChildren(['accent5', 'srgbClr', '5B9BD5']),\n                getColorChildren(['accent6', 'srgbClr', '70AD47']),\n                getColorChildren(['hlink', 'srgbClr', '0563C1']),\n                getColorChildren(['folHlink', 'srgbClr', '954F72'])\n            ]\n        };\n    }\n};\n\nvar getFont = function (props) {\n    var type = props[0], typeface = props[1], script = props[2], panose = props[3];\n    return {\n        name: \"a:\" + type,\n        properties: {\n            rawMap: {\n                script: script,\n                typeface: typeface,\n                panose: panose\n            }\n        }\n    };\n};\nvar fontScheme = {\n    getTemplate: function () {\n        var utf8_encode = agGridCommunity._.utf8_encode;\n        return {\n            name: \"a:fontScheme\",\n            properties: {\n                rawMap: {\n                    name: \"Office\"\n                }\n            },\n            children: [{\n                    name: 'a:majorFont',\n                    children: [\n                        getFont(['latin', 'Calibri Light', undefined, '020F0302020204030204']),\n                        getFont(['ea', '']),\n                        getFont(['cs', '']),\n                        getFont(['font', utf8_encode('游ゴシック Light'), 'Jpan']),\n                        getFont(['font', utf8_encode('맑은 고딕'), 'Hang']),\n                        getFont(['font', utf8_encode('等线 Light'), 'Hans']),\n                        getFont(['font', utf8_encode('新細明體'), 'Hant']),\n                        getFont(['font', 'Times New Roman', 'Arab']),\n                        getFont(['font', 'Times New Roman', 'Hebr']),\n                        getFont(['font', 'Tahoma', 'Thai']),\n                        getFont(['font', 'Nyala', 'Ethi']),\n                        getFont(['font', 'Vrinda', 'Beng']),\n                        getFont(['font', 'Shruti', 'Gujr']),\n                        getFont(['font', 'MoolBoran', 'Khmr']),\n                        getFont(['font', 'Tunga', 'Knda']),\n                        getFont(['font', 'Raavi', 'Guru']),\n                        getFont(['font', 'Euphemia', 'Cans']),\n                        getFont(['font', 'Plantagenet Cherokee', 'Cher']),\n                        getFont(['font', 'Microsoft Yi Baiti', 'Yiii']),\n                        getFont(['font', 'Microsoft Himalaya', 'Tibt']),\n                        getFont(['font', 'MV Boli', 'Thaa']),\n                        getFont(['font', 'Mangal', 'Deva']),\n                        getFont(['font', 'Gautami', 'Telu']),\n                        getFont(['font', 'Latha', 'Taml']),\n                        getFont(['font', 'Estrangelo Edessa', 'Syrc']),\n                        getFont(['font', 'Kalinga', 'Orya']),\n                        getFont(['font', 'Kartika', 'Mlym']),\n                        getFont(['font', 'DokChampa', 'Laoo']),\n                        getFont(['font', 'Iskoola Pota', 'Sinh']),\n                        getFont(['font', 'Mongolian Baiti', 'Mong']),\n                        getFont(['font', 'Times New Roman', 'Viet']),\n                        getFont(['font', 'Microsoft Uighur', 'Uigh']),\n                        getFont(['font', 'Sylfaen', 'Geor']),\n                        getFont(['font', 'Arial', 'Armn']),\n                        getFont(['font', 'Leelawadee UI', 'Bugi']),\n                        getFont(['font', 'Microsoft JhengHei', 'Bopo']),\n                        getFont(['font', 'Javanese Text', 'Java']),\n                        getFont(['font', 'Segoe UI', 'Lisu']),\n                        getFont(['font', 'Myanmar Text', 'Mymr']),\n                        getFont(['font', 'Ebrima', 'Nkoo']),\n                        getFont(['font', 'Nirmala UI', 'Olck']),\n                        getFont(['font', 'Ebrima', 'Osma']),\n                        getFont(['font', 'Phagspa', 'Phag']),\n                        getFont(['font', 'Estrangelo Edessa', 'Syrn']),\n                        getFont(['font', 'Estrangelo Edessa', 'Syrj']),\n                        getFont(['font', 'Estrangelo Edessa', 'Syre']),\n                        getFont(['font', 'Nirmala UI', 'Sora']),\n                        getFont(['font', 'Microsoft Tai Le', 'Tale']),\n                        getFont(['font', 'Microsoft New Tai Lue', 'Talu']),\n                        getFont(['font', 'Ebrima', 'Tfng'])\n                    ]\n                }, {\n                    name: 'a:minorFont',\n                    children: [\n                        getFont(['latin', 'Calibri', undefined, '020F0502020204030204']),\n                        getFont(['ea', '']),\n                        getFont(['cs', '']),\n                        getFont(['font', utf8_encode('游ゴシック'), 'Jpan']),\n                        getFont(['font', utf8_encode('맑은 고딕'), 'Hang']),\n                        getFont(['font', utf8_encode('等线'), 'Hans']),\n                        getFont(['font', utf8_encode('新細明體'), 'Hant']),\n                        getFont(['font', 'Arial', 'Arab']),\n                        getFont(['font', 'Arial', 'Hebr']),\n                        getFont(['font', 'Tahoma', 'Thai']),\n                        getFont(['font', 'Nyala', 'Ethi']),\n                        getFont(['font', 'Vrinda', 'Beng']),\n                        getFont(['font', 'Shruti', 'Gujr']),\n                        getFont(['font', 'DaunPenh', 'Khmr']),\n                        getFont(['font', 'Tunga', 'Knda']),\n                        getFont(['font', 'Raavi', 'Guru']),\n                        getFont(['font', 'Euphemia', 'Cans']),\n                        getFont(['font', 'Plantagenet Cherokee', 'Cher']),\n                        getFont(['font', 'Microsoft Yi Baiti', 'Yiii']),\n                        getFont(['font', 'Microsoft Himalaya', 'Tibt']),\n                        getFont(['font', 'MV Boli', 'Thaa']),\n                        getFont(['font', 'Mangal', 'Deva']),\n                        getFont(['font', 'Gautami', 'Telu']),\n                        getFont(['font', 'Latha', 'Taml']),\n                        getFont(['font', 'Estrangelo Edessa', 'Syrc']),\n                        getFont(['font', 'Kalinga', 'Orya']),\n                        getFont(['font', 'Kartika', 'Mlym']),\n                        getFont(['font', 'DokChampa', 'Laoo']),\n                        getFont(['font', 'Iskoola Pota', 'Sinh']),\n                        getFont(['font', 'Mongolian Baiti', 'Mong']),\n                        getFont(['font', 'Arial', 'Viet']),\n                        getFont(['font', 'Microsoft Uighur', 'Uigh']),\n                        getFont(['font', 'Sylfaen', 'Geor']),\n                        getFont(['font', 'Arial', 'Armn']),\n                        getFont(['font', 'Leelawadee UI', 'Bugi']),\n                        getFont(['font', 'Microsoft JhengHei', 'Bopo']),\n                        getFont(['font', 'Javanese Text', 'Java']),\n                        getFont(['font', 'Segoe UI', 'Lisu']),\n                        getFont(['font', 'Myanmar Text', 'Mymr']),\n                        getFont(['font', 'Ebrima', 'Nkoo']),\n                        getFont(['font', 'Nirmala UI', 'Olck']),\n                        getFont(['font', 'Ebrima', 'Osma']),\n                        getFont(['font', 'Phagspa', 'Phag']),\n                        getFont(['font', 'Estrangelo Edessa', 'Syrn']),\n                        getFont(['font', 'Estrangelo Edessa', 'Syrj']),\n                        getFont(['font', 'Estrangelo Edessa', 'Syre']),\n                        getFont(['font', 'Nirmala UI', 'Sora']),\n                        getFont(['font', 'Microsoft Tai Le', 'Tale']),\n                        getFont(['font', 'Microsoft New Tai Lue', 'Talu']),\n                        getFont(['font', 'Ebrima', 'Tfng'])\n                    ]\n                }]\n        };\n    }\n};\n\nvar getPropertyVal = function (name, val, children) { return ({\n    name: \"a:\" + name,\n    properties: {\n        rawMap: {\n            val: val\n        }\n    },\n    children: children\n}); };\nvar getGs = function (props) {\n    var pos = props[0], schemeColor = props[1], satMod = props[2], lumMod = props[3], tint = props[4], shade = props[5];\n    var children = [];\n    children.push(getPropertyVal('satMod', satMod));\n    if (lumMod) {\n        children.push(getPropertyVal('lumMod', lumMod));\n    }\n    if (tint) {\n        children.push(getPropertyVal('tint', tint));\n    }\n    if (shade) {\n        children.push(getPropertyVal('shade', shade));\n    }\n    return {\n        name: 'a:gs',\n        properties: {\n            rawMap: {\n                pos: pos\n            }\n        },\n        children: [{\n                name: 'a:schemeClr',\n                properties: {\n                    rawMap: {\n                        val: schemeColor\n                    }\n                },\n                children: children\n            }]\n    };\n};\nvar getSolidFill = function (val, children) { return ({\n    name: 'a:solidFill',\n    children: [getPropertyVal('schemeClr', val, children)]\n}); };\nvar getGradFill = function (props) {\n    var rotWithShape = props[0], gs1 = props[1], gs2 = props[2], gs3 = props[3], lin = props[4];\n    var ang = lin[0], scaled = lin[1];\n    return {\n        name: 'a:gradFill',\n        properties: {\n            rawMap: {\n                rotWithShape: rotWithShape\n            }\n        },\n        children: [{\n                name: 'a:gsLst',\n                children: [\n                    getGs(gs1),\n                    getGs(gs2),\n                    getGs(gs3)\n                ]\n            }, {\n                name: 'a:lin',\n                properties: {\n                    rawMap: {\n                        ang: ang,\n                        scaled: scaled\n                    }\n                }\n            }]\n    };\n};\nvar getLine = function (props) {\n    var w = props[0], cap = props[1], cmpd = props[2], algn = props[3];\n    return {\n        name: 'a:ln',\n        properties: {\n            rawMap: { w: w, cap: cap, cmpd: cmpd, algn: algn }\n        },\n        children: [\n            getSolidFill('phClr'),\n            getPropertyVal('prstDash', 'solid'),\n            {\n                name: 'a:miter',\n                properties: {\n                    rawMap: {\n                        lim: '800000'\n                    }\n                }\n            }\n        ]\n    };\n};\nvar getEffectStyle = function (shadow) {\n    var children = [];\n    if (shadow) {\n        var blurRad = shadow[0], dist = shadow[1], dir = shadow[2], algn = shadow[3], rotWithShape = shadow[4];\n        children.push({\n            name: 'a:outerShdw',\n            properties: {\n                rawMap: { blurRad: blurRad, dist: dist, dir: dir, algn: algn, rotWithShape: rotWithShape }\n            },\n            children: [\n                getPropertyVal('srgbClr', '000000', [getPropertyVal('alpha', '63000')])\n            ]\n        });\n    }\n    return {\n        name: 'a:effectStyle',\n        children: [agGridCommunity._.assign({}, {\n                name: 'a:effectLst'\n            }, children.length ? { children: children } : {})]\n    };\n};\nvar getFillStyleList = function () { return ({\n    name: 'a:fillStyleLst',\n    children: [\n        getSolidFill('phClr'),\n        getGradFill([\n            '1',\n            ['0', 'phClr', '105000', '110000', '67000'],\n            ['50000', 'phClr', '103000', '105000', '73000'],\n            ['100000', 'phClr', '109000', '105000', '81000'],\n            ['5400000', '0']\n        ]),\n        getGradFill([\n            '1',\n            ['0', 'phClr', '103000', '102000', '94000'],\n            ['50000', 'phClr', '110000', '100000', undefined, '100000'],\n            ['100000', 'phClr', '120000', '99000', undefined, '78000'],\n            ['5400000', '0']\n        ])\n    ]\n}); };\nvar getLineStyleList = function () { return ({\n    name: 'a:lnStyleLst',\n    children: [\n        getLine(['6350', 'flat', 'sng', 'ctr']),\n        getLine(['12700', 'flat', 'sng', 'ctr']),\n        getLine(['19050', 'flat', 'sng', 'ctr'])\n    ]\n}); };\nvar getEffectStyleList = function () { return ({\n    name: 'a:effectStyleLst',\n    children: [\n        getEffectStyle(),\n        getEffectStyle(),\n        getEffectStyle(['57150', '19050', '5400000', 'ctr', '0'])\n    ]\n}); };\nvar getBgFillStyleList = function () { return ({\n    name: 'a:bgFillStyleLst',\n    children: [\n        getSolidFill('phClr'),\n        getSolidFill('phClr', [\n            getPropertyVal('tint', '95000'),\n            getPropertyVal('satMod', '170000'),\n        ]),\n        getGradFill([\n            '1',\n            ['0', 'phClr', '150000', '102000', '93000', '98000'],\n            ['50000', 'phClr', '130000', '103000', '98000', '90000'],\n            ['100000', 'phClr', '120000', undefined, undefined, '63000'],\n            ['5400000', '0']\n        ])\n    ]\n}); };\nvar formatScheme = {\n    getTemplate: function () {\n        return {\n            name: \"a:fmtScheme\",\n            properties: {\n                rawMap: {\n                    name: \"Office\"\n                }\n            },\n            children: [\n                getFillStyleList(),\n                getLineStyleList(),\n                getEffectStyleList(),\n                getBgFillStyleList()\n            ]\n        };\n    }\n};\n\nvar themeElements = {\n    getTemplate: function () {\n        return {\n            name: \"a:themeElements\",\n            children: [\n                colorScheme.getTemplate(),\n                fontScheme.getTemplate(),\n                formatScheme.getTemplate()\n            ]\n        };\n    }\n};\n\nvar officeTheme = {\n    getTemplate: function () {\n        return {\n            name: \"a:theme\",\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"xmlns:\",\n                        map: {\n                            a: \"http://schemas.openxmlformats.org/drawingml/2006/main\"\n                        },\n                    }],\n                rawMap: {\n                    name: \"Office Theme\"\n                }\n            },\n            children: [\n                themeElements.getTemplate(),\n                {\n                    name: 'a:objectDefaults'\n                },\n                {\n                    name: 'a:extraClrSchemeLst'\n                }\n            ]\n        };\n    }\n};\n\nvar buildSharedString = function (textNode) { return ({\n    name: 'si',\n    children: [{\n            name: 't',\n            textNode: agGridCommunity._.utf8_encode(agGridCommunity._.escape(textNode.toString()))\n        }]\n}); };\nvar sharedStrings = {\n    getTemplate: function (strings) {\n        return {\n            name: \"sst\",\n            properties: {\n                rawMap: {\n                    xmlns: 'http://schemas.openxmlformats.org/spreadsheetml/2006/main',\n                    count: strings.length,\n                    uniqueCount: strings.length\n                }\n            },\n            children: strings.map(buildSharedString)\n        };\n    }\n};\n\nvar numberFormatFactory = {\n    getTemplate: function (numberFormat) {\n        var formatCode = numberFormat.formatCode, numFmtId = numberFormat.numFmtId;\n        return {\n            name: \"numFmt\",\n            properties: {\n                rawMap: {\n                    formatCode: formatCode,\n                    numFmtId: numFmtId\n                }\n            }\n        };\n    }\n};\nvar numberFormatMap = {\n    '0': 1,\n    '0.00': 2,\n    '#,##0': 3,\n    '#,##0.00': 4,\n    '0%': 9,\n    '0.00%': 10,\n    '0.00E+00': 11,\n    '# ?/?': 12,\n    '# ??/??': 13,\n    'mm-dd-yy': 14,\n    'd-mmm-yy': 15,\n    'd-mmm': 16,\n    'mmm-yy': 17,\n    'h:mm AM/PM': 18,\n    'h:mm:ss AM/PM': 19,\n    'h:mm': 20,\n    'h:mm:ss': 21,\n    'm/d/yy h:mm': 22,\n    '#,##0 ;(#,##0)': 37,\n    '#,##0 ;[Red](#,##0)': 38,\n    '#,##0.00;(#,##0.00)': 39,\n    '#,##0.00;[Red](#,##0.00)': 40,\n    'mm:ss': 45,\n    '[h]:mm:ss': 46,\n    'mmss.0': 47,\n    '##0.0E+0': 48,\n    '@': 49\n};\n\nvar numberFormatsFactory = {\n    getTemplate: function (numberFormats) {\n        return {\n            name: \"numFmts\",\n            properties: {\n                rawMap: {\n                    count: numberFormats.length\n                }\n            },\n            children: numberFormats.map(numberFormatFactory.getTemplate)\n        };\n    }\n};\n\nvar fontFactory = {\n    getTemplate: function (font) {\n        var _a = font.size, size = _a === void 0 ? 14 : _a, colorTheme = font.colorTheme, _b = font.color, color = _b === void 0 ? '00000000' : _b, _c = font.name, name = _c === void 0 ? 'Calibri' : _c, family = font.family, scheme = font.scheme, italic = font.italic, bold = font.bold, strike = font.strike, outline = font.outline, shadow = font.shadow, underline = font.underline;\n        var children = [\n            { name: 'sz', properties: { rawMap: { val: size } } },\n            { name: 'color', properties: { rawMap: { theme: colorTheme, rgb: color } } },\n            { name: 'name', properties: { rawMap: { val: name } } }\n        ];\n        if (family) {\n            children.push({ name: 'family', properties: { rawMap: { val: family } } });\n        }\n        if (scheme) {\n            children.push({ name: 'scheme', properties: { rawMap: { val: scheme } } });\n        }\n        if (italic) {\n            children.push({ name: 'i' });\n        }\n        if (bold) {\n            children.push({ name: 'b' });\n        }\n        if (strike) {\n            children.push({ name: 'strike' });\n        }\n        if (outline) {\n            children.push({ name: 'outline' });\n        }\n        if (shadow) {\n            children.push({ name: 'shadow' });\n        }\n        if (underline) {\n            var lUnder = underline.toLocaleLowerCase();\n            children.push({ name: 'u', properties: { rawMap: { val: lUnder === 'double' ? 'double' : 'single' } } });\n        }\n        return {\n            name: \"font\",\n            children: children\n        };\n    }\n};\nvar getFamilyId = function (name) {\n    var families = ['Automatic', 'Roman', 'Swiss', 'Modern', 'Script', 'Decorative'];\n    var pos = families.indexOf(name || 'Automatic');\n    return Math.max(pos, 0);\n};\n\nvar fontsFactory = {\n    getTemplate: function (fonts) {\n        return {\n            name: \"fonts\",\n            properties: {\n                rawMap: {\n                    count: fonts.length\n                }\n            },\n            children: fonts.map(fontFactory.getTemplate)\n        };\n    }\n};\n\nvar fillFactory = {\n    getTemplate: function (fill) {\n        var patternType = fill.patternType, fgTheme = fill.fgTheme, fgTint = fill.fgTint, fgRgb = fill.fgRgb, bgRgb = fill.bgRgb, bgIndexed = fill.bgIndexed;\n        var pf = {\n            name: 'patternFill',\n            properties: {\n                rawMap: {\n                    patternType: patternType\n                }\n            }\n        };\n        if (fgTheme || fgTint || fgRgb) {\n            pf.children = [{\n                    name: 'fgColor',\n                    properties: {\n                        rawMap: {\n                            theme: fgTheme,\n                            tint: fgTint,\n                            rgb: fgRgb\n                        }\n                    }\n                }];\n        }\n        if (bgIndexed) {\n            if (!pf.children) {\n                pf.children = [];\n            }\n            pf.children.push({\n                name: 'bgColor',\n                properties: {\n                    rawMap: {\n                        indexed: bgIndexed,\n                        rgb: bgRgb\n                    }\n                }\n            });\n        }\n        return {\n            name: \"fill\",\n            children: [pf]\n        };\n    }\n};\n\nvar fillsFactory = {\n    getTemplate: function (fills) {\n        return {\n            name: \"fills\",\n            properties: {\n                rawMap: {\n                    count: fills.length\n                }\n            },\n            children: fills.map(fillFactory.getTemplate)\n        };\n    }\n};\n\nvar getBorderColor = function (color) {\n    return {\n        name: 'color',\n        properties: {\n            rawMap: {\n                rgb: convertLegacyColor(color || '#000000')\n            }\n        }\n    };\n};\nvar borderFactory = {\n    getTemplate: function (border) {\n        var left = border.left, right = border.right, top = border.top, bottom = border.bottom, diagonal = border.diagonal;\n        var leftChildren = left ? [getBorderColor(left.color)] : undefined;\n        var rightChildren = right ? [getBorderColor(right.color)] : undefined;\n        var topChildren = top ? [getBorderColor(top.color)] : undefined;\n        var bottomChildren = bottom ? [getBorderColor(bottom.color)] : undefined;\n        var diagonalChildren = diagonal ? [getBorderColor(diagonal.color)] : undefined;\n        return {\n            name: 'border',\n            children: [{\n                    name: 'left',\n                    properties: { rawMap: { style: left && left.style } },\n                    children: leftChildren\n                }, {\n                    name: 'right',\n                    properties: { rawMap: { style: right && right.style } },\n                    children: rightChildren\n                }, {\n                    name: 'top',\n                    properties: { rawMap: { style: top && top.style } },\n                    children: topChildren\n                }, {\n                    name: 'bottom',\n                    properties: { rawMap: { style: bottom && bottom.style } },\n                    children: bottomChildren\n                }, {\n                    name: 'diagonal',\n                    properties: { rawMap: { style: diagonal && diagonal.style } },\n                    children: diagonalChildren\n                }]\n        };\n    }\n};\nvar getWeightName = function (value) {\n    if (value === 1) {\n        return 'thin';\n    }\n    if (value === 2) {\n        return 'medium';\n    }\n    if (value === 3) {\n        return 'thick';\n    }\n    return 'hair';\n};\nvar mappedNames = {\n    None: 'None',\n    Dot: 'Dotted',\n    Dash: 'Dashed',\n    Double: 'Double',\n    DashDot: 'DashDot',\n    DashDotDot: 'DashDotDot',\n    SlantDashDot: 'SlantDashDot'\n};\nvar mediumBorders = ['Dashed', 'DashDot', 'DashDotDot'];\nvar convertLegacyBorder = function (type, weight) {\n    // Legacy Types are: None, Continuous, Dash, Dot, DashDot, DashDotDot, SlantDashDot, and Double\n    // Weight represents: 0—Hairline, 1—Thin , 2—Medium, 3—Thick\n    // New types: none, thin, medium, dashed, dotted, thick, double, hair, mediumDashed, dashDot, mediumDashDot,\n    // dashDotDot, mediumDashDotDot, slantDashDot\n    var namedWeight = getWeightName(weight);\n    var mappedName = mappedNames[type];\n    if (!type) {\n        return 'thin';\n    }\n    if (type === 'Continuous') {\n        return namedWeight;\n    }\n    if (namedWeight === 'medium' && mediumBorders.indexOf(mappedName) > 0) {\n        return \"medium\" + mappedName;\n    }\n    return mappedName.charAt(0).toLowerCase() + mappedName.substr(1);\n};\n\nvar bordersFactory = {\n    getTemplate: function (borders) {\n        return {\n            name: \"borders\",\n            properties: {\n                rawMap: {\n                    count: borders.length\n                }\n            },\n            children: borders.map(borderFactory.getTemplate)\n        };\n    }\n};\n\nvar convertLegacyHorizontalAlignment = function (alignment) {\n    var map = {\n        Automatic: 'general',\n        Left: 'left',\n        Center: 'center',\n        Right: 'right',\n        Fill: 'fill',\n        Justify: 'justify',\n        CenterAcrossSelection: 'centerContinuous',\n        Distributed: 'distributed',\n        JustifyDistributed: 'justify'\n    };\n    return map[alignment] || 'general';\n};\nvar convertLegacyVerticalAlignment = function (alignment) {\n    var map = {\n        Automatic: undefined,\n        Top: 'top',\n        Bottom: 'bottom',\n        Center: 'center',\n        Justify: 'justify',\n        Distributed: 'distributed',\n        JustifyDistributed: 'justify'\n    };\n    return map[alignment] || undefined;\n};\nvar getReadingOrderId = function (readingOrder) {\n    var order = ['Context', 'LeftToRight', 'RightToLeft'];\n    var pos = order.indexOf(readingOrder);\n    return Math.max(pos, 0);\n};\nvar alignmentFactory = {\n    getTemplate: function (alignment) {\n        var horizontal = alignment.horizontal, indent = alignment.indent, readingOrder = alignment.readingOrder, rotate = alignment.rotate, shrinkToFit = alignment.shrinkToFit, vertical = alignment.vertical, wrapText = alignment.wrapText;\n        return {\n            name: 'alignment',\n            properties: {\n                rawMap: {\n                    horizontal: horizontal && convertLegacyHorizontalAlignment(horizontal),\n                    indent: indent,\n                    readingOrder: readingOrder && getReadingOrderId(readingOrder),\n                    textRotation: rotate,\n                    shrinkToFit: shrinkToFit,\n                    vertical: vertical && convertLegacyVerticalAlignment(vertical),\n                    wrapText: wrapText\n                }\n            }\n        };\n    }\n};\n\nvar protectionFactory = {\n    getTemplate: function (protection) {\n        var locked = protection.protected === false ? 0 : 1;\n        var hidden = protection.hideFormula === true ? 1 : 0;\n        return {\n            name: 'protection',\n            properties: {\n                rawMap: {\n                    hidden: hidden,\n                    locked: locked\n                }\n            }\n        };\n    }\n};\n\nvar xfFactory = {\n    getTemplate: function (xf) {\n        var alignment = xf.alignment, borderId = xf.borderId, fillId = xf.fillId, fontId = xf.fontId, numFmtId = xf.numFmtId, protection = xf.protection, xfId = xf.xfId;\n        var children = [];\n        if (alignment) {\n            children.push(alignmentFactory.getTemplate(alignment));\n        }\n        if (protection) {\n            children.push(protectionFactory.getTemplate(protection));\n        }\n        return {\n            name: \"xf\",\n            properties: {\n                rawMap: {\n                    applyAlignment: alignment ? 1 : undefined,\n                    applyProtection: protection ? 1 : undefined,\n                    applyBorder: borderId ? 1 : undefined,\n                    borderId: borderId,\n                    fillId: fillId,\n                    applyFont: fontId ? 1 : undefined,\n                    fontId: fontId,\n                    applyNumberFormat: numFmtId ? 1 : undefined,\n                    numFmtId: numFmtId,\n                    xfId: xfId\n                }\n            },\n            children: children.length ? children : undefined\n        };\n    }\n};\n\nvar cellStylesXfsFactory = {\n    getTemplate: function (xf) {\n        return {\n            name: \"cellStyleXfs\",\n            properties: {\n                rawMap: {\n                    count: xf.length\n                }\n            },\n            children: xf.map(xfFactory.getTemplate)\n        };\n    }\n};\n\nvar cellXfsFactory = {\n    getTemplate: function (xf) {\n        return {\n            name: \"cellXfs\",\n            properties: {\n                rawMap: {\n                    count: xf.length\n                }\n            },\n            children: xf.map(xfFactory.getTemplate)\n        };\n    }\n};\n\nvar borderFactory$1 = {\n    getTemplate: function (cellStyle) {\n        var builtinId = cellStyle.builtinId, name = cellStyle.name, xfId = cellStyle.xfId;\n        return {\n            name: \"cellStyle\",\n            properties: {\n                rawMap: {\n                    builtinId: builtinId,\n                    name: name,\n                    xfId: xfId\n                }\n            }\n        };\n    }\n};\n\nvar cellStylesFactory = {\n    getTemplate: function (cellStyles) {\n        return {\n            name: \"cellStyles\",\n            properties: {\n                rawMap: {\n                    count: cellStyles.length\n                }\n            },\n            children: cellStyles.map(borderFactory$1.getTemplate)\n        };\n    }\n};\n\nvar stylesMap;\nvar registeredNumberFmts;\nvar registeredFonts;\nvar registeredFills;\nvar registeredBorders;\nvar registeredCellStyleXfs;\nvar registeredCellXfs;\nvar registeredCellStyles;\nvar resetStylesheetValues = function () {\n    stylesMap = { base: 0 };\n    registeredNumberFmts = [];\n    registeredFonts = [{ name: 'Calibri', size: 14, colorTheme: '1', family: 2, scheme: 'minor' }];\n    registeredFills = [{ patternType: 'none', }, { patternType: 'gray125' }];\n    registeredBorders = [{ left: undefined, right: undefined, top: undefined, bottom: undefined, diagonal: undefined }];\n    registeredCellStyleXfs = [{ borderId: 0, fillId: 0, fontId: 0, numFmtId: 0 }];\n    registeredCellXfs = [{ borderId: 0, fillId: 0, fontId: 0, numFmtId: 0, xfId: 0 }];\n    registeredCellStyles = [{ builtinId: 0, name: 'normal', xfId: 0 }];\n};\nvar convertLegacyPattern = function (name) {\n    var colorMap = {\n        None: 'none',\n        Solid: 'solid',\n        Gray50: 'mediumGray',\n        Gray75: 'darkGray',\n        Gray25: 'lightGray',\n        HorzStripe: 'darkHorizontal',\n        VertStripe: 'darkVertical',\n        ReverseDiagStripe: 'darkDown',\n        DiagStripe: 'darkUp',\n        DiagCross: 'darkGrid',\n        ThickDiagCross: 'darkTrellis',\n        ThinHorzStripe: 'lightHorizontal',\n        ThinVertStripe: 'lightVertical',\n        ThinReverseDiagStripe: 'lightDown',\n        ThinDiagStripe: 'lightUp',\n        ThinHorzCross: 'lightGrid',\n        ThinDiagCross: 'lightTrellis',\n        Gray125: 'gray125',\n        Gray0625: 'gray0625'\n    };\n    if (!name) {\n        return 'none';\n    }\n    return colorMap[name] || name;\n};\nvar convertLegacyColor = function (color) {\n    if (color == undefined) {\n        return color;\n    }\n    if (color.charAt(0) === '#') {\n        color = color.substr(1);\n    }\n    return color.length === 6 ? '00' + color : color;\n};\nvar registerFill = function (fill) {\n    var convertedPattern = convertLegacyPattern(fill.pattern);\n    var convertedFillColor = convertLegacyColor(fill.color);\n    var convertedPatternColor = convertLegacyColor(fill.patternColor);\n    var pos = agGridCommunity._.findIndex(registeredFills, function (currentFill) {\n        var patternType = currentFill.patternType, fgRgb = currentFill.fgRgb, bgRgb = currentFill.bgRgb;\n        if (patternType != convertedPattern ||\n            fgRgb != convertedFillColor ||\n            bgRgb != convertedPatternColor) {\n            return false;\n        }\n        return true;\n    });\n    if (pos === -1) {\n        pos = registeredFills.length;\n        registeredFills.push({ patternType: convertedPattern, fgRgb: convertedFillColor, bgRgb: convertedPatternColor });\n    }\n    return pos;\n};\nvar registerNumberFmt = function (format) {\n    format = agGridCommunity._.utf8_encode(format);\n    if (numberFormatMap[format]) {\n        return numberFormatMap[format];\n    }\n    var pos = agGridCommunity._.findIndex(registeredNumberFmts, function (currentFormat) { return currentFormat.formatCode === format; });\n    if (pos === -1) {\n        pos = registeredNumberFmts.length + 164;\n        registeredNumberFmts.push({ formatCode: format, numFmtId: pos });\n    }\n    else {\n        pos = registeredNumberFmts[pos].numFmtId;\n    }\n    return pos;\n};\nvar registerBorders = function (borders) {\n    var borderBottom = borders.borderBottom, borderTop = borders.borderTop, borderLeft = borders.borderLeft, borderRight = borders.borderRight;\n    var bottomStyle, topStyle, leftStyle, rightStyle;\n    var bottomColor, topColor, leftColor, rightColor;\n    if (borderLeft) {\n        leftStyle = convertLegacyBorder(borderLeft.lineStyle, borderLeft.weight);\n        leftColor = convertLegacyColor(borderLeft.color);\n    }\n    if (borderRight) {\n        rightStyle = convertLegacyBorder(borderRight.lineStyle, borderRight.weight);\n        rightColor = convertLegacyColor(borderRight.color);\n    }\n    if (borderBottom) {\n        bottomStyle = convertLegacyBorder(borderBottom.lineStyle, borderBottom.weight);\n        bottomColor = convertLegacyColor(borderBottom.color);\n    }\n    if (borderTop) {\n        topStyle = convertLegacyBorder(borderTop.lineStyle, borderTop.weight);\n        topColor = convertLegacyColor(borderTop.color);\n    }\n    var pos = agGridCommunity._.findIndex(registeredBorders, function (currentBorder) {\n        var left = currentBorder.left, right = currentBorder.right, top = currentBorder.top, bottom = currentBorder.bottom;\n        if (!left && (leftStyle || leftColor)) {\n            return false;\n        }\n        if (!right && (rightStyle || rightColor)) {\n            return false;\n        }\n        if (!top && (topStyle || topColor)) {\n            return false;\n        }\n        if (!bottom && (bottomStyle || bottomColor)) {\n            return false;\n        }\n        var _a = left || {}, clS = _a.style, clC = _a.color;\n        var _b = right || {}, crS = _b.style, crC = _b.color;\n        var _c = top || {}, ctS = _c.style, ctC = _c.color;\n        var _d = bottom || {}, cbS = _d.style, cbC = _d.color;\n        if (clS != leftStyle || clC != leftColor) {\n            return false;\n        }\n        if (crS != rightStyle || crC != rightColor) {\n            return false;\n        }\n        if (ctS != topStyle || ctC != topColor) {\n            return false;\n        }\n        if (cbS != bottomStyle || cbC != bottomColor) {\n            return false;\n        }\n        return true;\n    });\n    if (pos === -1) {\n        pos = registeredBorders.length;\n        registeredBorders.push({\n            left: {\n                style: leftStyle, color: leftColor\n            },\n            right: {\n                style: rightStyle, color: rightColor\n            },\n            top: {\n                style: topStyle, color: topColor\n            },\n            bottom: {\n                style: bottomStyle, color: bottomColor\n            },\n            diagonal: {\n                style: undefined,\n                color: undefined\n            }\n        });\n    }\n    return pos;\n};\nvar registerFont = function (font) {\n    var name = font.fontName, color = font.color, size = font.size, bold = font.bold, italic = font.italic, outline = font.outline, shadow = font.shadow, strikeThrough = font.strikeThrough, underline = font.underline, family = font.family;\n    var utf8Name = name ? agGridCommunity._.utf8_encode(name) : name;\n    var convertedColor = convertLegacyColor(color);\n    var familyId = getFamilyId(family);\n    var pos = agGridCommunity._.findIndex(registeredFonts, function (currentFont) {\n        if (currentFont.name != utf8Name ||\n            currentFont.color != convertedColor ||\n            currentFont.size != size ||\n            currentFont.bold != bold ||\n            currentFont.italic != italic ||\n            currentFont.outline != outline ||\n            currentFont.shadow != shadow ||\n            currentFont.strike != strikeThrough ||\n            currentFont.underline != underline ||\n            currentFont.family != familyId) {\n            return false;\n        }\n        return true;\n    });\n    if (pos === -1) {\n        pos = registeredFonts.length;\n        registeredFonts.push({\n            name: utf8Name,\n            color: convertedColor,\n            size: size,\n            bold: bold,\n            italic: italic,\n            outline: outline,\n            shadow: shadow,\n            strike: strikeThrough,\n            underline: underline,\n            family: familyId\n        });\n    }\n    return pos;\n};\nvar registerStyle = function (config) {\n    var id = config.id, alignment = config.alignment, borders = config.borders, font = config.font, interior = config.interior, numberFormat = config.numberFormat, protection = config.protection;\n    var currentFill = 0;\n    var currentBorder = 0;\n    var currentFont = 0;\n    var currentNumberFmt = 0;\n    if (!id || stylesMap[id] != undefined) {\n        return;\n    }\n    if (interior) {\n        currentFill = registerFill(interior);\n    }\n    if (borders) {\n        currentBorder = registerBorders(borders);\n    }\n    if (font) {\n        currentFont = registerFont(font);\n    }\n    if (numberFormat) {\n        currentNumberFmt = registerNumberFmt(numberFormat.format);\n    }\n    stylesMap[id] = registeredCellXfs.length;\n    registeredCellXfs.push({\n        alignment: alignment,\n        borderId: currentBorder || 0,\n        fillId: currentFill || 0,\n        fontId: currentFont || 0,\n        numFmtId: currentNumberFmt || 0,\n        protection: protection,\n        xfId: 0\n    });\n};\nvar stylesheetFactory = {\n    getTemplate: function () {\n        var numberFormats = numberFormatsFactory.getTemplate(registeredNumberFmts);\n        var fonts = fontsFactory.getTemplate(registeredFonts);\n        var fills = fillsFactory.getTemplate(registeredFills);\n        var borders = bordersFactory.getTemplate(registeredBorders);\n        var cellStylesXfs = cellStylesXfsFactory.getTemplate(registeredCellStyleXfs);\n        var cellXfs = cellXfsFactory.getTemplate(registeredCellXfs);\n        var cellStyles = cellStylesFactory.getTemplate(registeredCellStyles);\n        resetStylesheetValues();\n        return {\n            name: 'styleSheet',\n            properties: {\n                rawMap: {\n                    xmlns: 'http://schemas.openxmlformats.org/spreadsheetml/2006/main'\n                }\n            },\n            children: [\n                numberFormats,\n                fonts,\n                fills,\n                borders,\n                cellStylesXfs,\n                cellXfs,\n                cellStyles,\n                {\n                    name: 'tableStyles',\n                    properties: {\n                        rawMap: {\n                            count: 0,\n                            defaultPivotStyle: 'PivotStyleLight16',\n                            defaultTableStyle: 'TableStyleMedium2'\n                        }\n                    }\n                }\n            ]\n        };\n    }\n};\nvar getStyleId = function (name) {\n    return stylesMap[name] || 0;\n};\nvar registerStyles = function (styles) {\n    resetStylesheetValues();\n    styles.forEach(registerStyle);\n};\n\nvar sheetFactory = {\n    getTemplate: function (name, idx) {\n        var sheetId = (idx + 1).toString();\n        return {\n            name: \"sheet\",\n            properties: {\n                rawMap: {\n                    \"name\": name,\n                    \"sheetId\": sheetId,\n                    \"r:id\": \"rId\" + sheetId\n                }\n            }\n        };\n    }\n};\n\nvar sheetsFactory = {\n    getTemplate: function (names) {\n        return {\n            name: \"sheets\",\n            children: names.map(sheetFactory.getTemplate)\n        };\n    }\n};\n\nvar workbookFactory = {\n    getTemplate: function (names) {\n        return {\n            name: \"workbook\",\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"xmlns:\",\n                        map: {\n                            r: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships\"\n                        },\n                    }],\n                rawMap: {\n                    xmlns: \"http://schemas.openxmlformats.org/spreadsheetml/2006/main\"\n                }\n            },\n            children: [sheetsFactory.getTemplate(names)]\n        };\n    }\n};\n\n// https://docs.microsoft.com/en-us/office/troubleshoot/excel/determine-column-widths\nvar getExcelCellWidth = function (width) { return Math.ceil((width - 12) / 7 + 1); };\nvar columnFactory = {\n    getTemplate: function (config) {\n        var min = config.min, max = config.max, s = config.s, width = config.width, hidden = config.hidden, bestFit = config.bestFit;\n        var excelWidth = 1;\n        var customWidth = '0';\n        if (width > 1) {\n            excelWidth = getExcelCellWidth(width);\n            customWidth = '1';\n        }\n        return {\n            name: 'col',\n            properties: {\n                rawMap: {\n                    min: min,\n                    max: max,\n                    width: excelWidth,\n                    style: s,\n                    hidden: hidden ? '1' : '0',\n                    bestFit: bestFit ? '1' : '0',\n                    customWidth: customWidth\n                }\n            }\n        };\n    }\n};\n\nvar convertLegacyType = function (type) {\n    var t = type.charAt(0).toLowerCase();\n    return t === 's' ? 'inlineStr' : t;\n};\nvar cellFactory = {\n    getTemplate: function (config) {\n        var ref = config.ref, data = config.data, styleId = config.styleId;\n        var type = data.type, value = data.value;\n        var convertedType = type;\n        if (type.charAt(0) === type.charAt(0).toUpperCase()) {\n            convertedType = convertLegacyType(type);\n        }\n        var obj = {\n            name: 'c',\n            properties: {\n                rawMap: {\n                    r: ref,\n                    t: convertedType === 'empty' ? undefined : convertedType,\n                    s: styleId ? getStyleId(styleId) : undefined\n                }\n            }\n        };\n        var children;\n        if (convertedType === 'inlineStr') {\n            children = [{\n                    name: 'is',\n                    children: [{\n                            name: 't',\n                            textNode: agGridCommunity._.escape(agGridCommunity._.utf8_encode(value))\n                        }]\n                }];\n        }\n        else {\n            children = [{\n                    name: 'v',\n                    textNode: value\n                }];\n        }\n        return agGridCommunity._.assign({}, obj, { children: children });\n    }\n};\n\nvar __spreadArrays = (undefined && undefined.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar addEmptyCells = function (cells, rowIdx) {\n    var mergeMap = [];\n    var posCounter = 0;\n    for (var i = 0; i < cells.length; i++) {\n        var cell = cells[i];\n        if (cell.mergeAcross) {\n            mergeMap.push({\n                pos: i,\n                excelPos: posCounter\n            });\n            posCounter += cells[i].mergeAcross;\n        }\n        posCounter++;\n    }\n    if (mergeMap.length) {\n        for (var i = mergeMap.length - 1; i >= 0; i--) {\n            var mergedCells = [];\n            var cell = cells[mergeMap[i].pos];\n            for (var j = 1; j <= cell.mergeAcross; j++) {\n                mergedCells.push({\n                    ref: \"\" + getExcelColumnName(mergeMap[i].excelPos + 1 + j) + (rowIdx + 1),\n                    styleId: cell.styleId,\n                    data: { type: 'empty', value: null }\n                });\n            }\n            if (mergedCells.length) {\n                cells.splice.apply(cells, __spreadArrays([mergeMap[i].pos + 1, 0], mergedCells));\n            }\n        }\n    }\n};\nvar rowFactory = {\n    getTemplate: function (config, idx) {\n        var index = config.index, collapsed = config.collapsed, hidden = config.hidden, height = config.height, s = config.s, _a = config.cells, cells = _a === void 0 ? [] : _a;\n        addEmptyCells(cells, idx);\n        var children = cells.map(cellFactory.getTemplate);\n        return {\n            name: \"row\",\n            properties: {\n                rawMap: {\n                    r: index,\n                    collapsed: collapsed,\n                    hidden: hidden ? '1' : '0',\n                    ht: height,\n                    customHeight: height != null ? '1' : '0',\n                    s: s,\n                    customFormat: s != null ? '1' : '0'\n                }\n            },\n            children: children\n        };\n    }\n};\n\nvar mergeCell = {\n    getTemplate: function (ref) {\n        return {\n            name: 'mergeCell',\n            properties: {\n                rawMap: {\n                    ref: ref\n                }\n            }\n        };\n    }\n};\n\nvar updateColMinMax = function (col, min, range, prevCol) {\n    if (!col.min) {\n        col.min = min;\n        col.max = min + range;\n        return;\n    }\n    var currentMin = min;\n    if (prevCol) {\n        currentMin = Math.max(currentMin, prevCol.min);\n    }\n    col.min = Math.max(col.min, currentMin);\n    col.max = Math.max(col.max, currentMin + range);\n};\nvar getMergedCells = function (rows, cols) {\n    var mergedCells = [];\n    rows.forEach(function (currentRow, rowIdx) {\n        var cells = currentRow.cells;\n        var merges = 0;\n        currentRow.index = rowIdx + 1;\n        var lastCol;\n        cells.forEach(function (currentCell, cellIdx) {\n            var min = cellIdx + merges + 1;\n            var start = getExcelColumnName(min);\n            var outputRow = rowIdx + 1;\n            if (currentCell.mergeAcross) {\n                merges += currentCell.mergeAcross;\n                var end = getExcelColumnName(cellIdx + merges + 1);\n                mergedCells.push(\"\" + start + outputRow + \":\" + end + outputRow);\n            }\n            if (!cols[min - 1]) {\n                cols[min - 1] = {};\n            }\n            updateColMinMax(cols[min - 1], min, merges, lastCol);\n            lastCol = cols[min - 1];\n            currentCell.ref = \"\" + start + outputRow;\n        });\n    });\n    return mergedCells;\n};\nvar getExcelColumnName = function (colIdx) {\n    var startCode = 65;\n    var tableWidth = 26;\n    var fromCharCode = String.fromCharCode;\n    var pos = Math.floor(colIdx / tableWidth);\n    var tableIdx = colIdx % tableWidth;\n    if (!pos || colIdx === tableWidth) {\n        return fromCharCode(startCode + colIdx - 1);\n    }\n    if (!tableIdx) {\n        return getExcelColumnName(pos - 1) + 'Z';\n    }\n    if (pos < tableWidth) {\n        return fromCharCode(startCode + pos - 1) + fromCharCode(startCode + tableIdx - 1);\n    }\n    return getExcelColumnName(pos) + fromCharCode(startCode + tableIdx - 1);\n};\nvar worksheetFactory = {\n    getTemplate: function (config) {\n        var table = config.table;\n        var rows = table.rows, columns = table.columns;\n        var mergedCells = (columns && columns.length) ? getMergedCells(rows, columns) : [];\n        var children = [];\n        if (columns.length) {\n            children.push({\n                name: 'cols',\n                children: columns.map(columnFactory.getTemplate)\n            });\n        }\n        if (rows.length) {\n            children.push({\n                name: 'sheetData',\n                children: rows.map(rowFactory.getTemplate)\n            });\n        }\n        if (mergedCells.length) {\n            children.push({\n                name: 'mergeCells',\n                properties: {\n                    rawMap: {\n                        count: mergedCells.length\n                    }\n                },\n                children: mergedCells.map(mergeCell.getTemplate)\n            });\n        }\n        return {\n            name: \"worksheet\",\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"xmlns:\",\n                        map: {\n                            r: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships\"\n                        }\n                    }],\n                rawMap: {\n                    xmlns: \"http://schemas.openxmlformats.org/spreadsheetml/2006/main\"\n                }\n            },\n            children: children\n        };\n    }\n};\n\nvar relationshipFactory = {\n    getTemplate: function (config) {\n        var Id = config.Id, Type = config.Type, Target = config.Target;\n        return {\n            name: \"Relationship\",\n            properties: {\n                rawMap: {\n                    Id: Id,\n                    Type: Type,\n                    Target: Target\n                }\n            }\n        };\n    }\n};\n\nvar relationshipsFactory = {\n    getTemplate: function (c) {\n        var children = c.map(relationshipFactory.getTemplate);\n        return {\n            name: \"Relationships\",\n            properties: {\n                rawMap: {\n                    xmlns: \"http://schemas.openxmlformats.org/package/2006/relationships\"\n                }\n            },\n            children: children\n        };\n    }\n};\n\nvar __decorate$p = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * See https://www.ecma-international.org/news/TC45_current_work/OpenXML%20White%20Paper.pdf\n */\nvar ExcelXlsxFactory = /** @class */ (function () {\n    function ExcelXlsxFactory() {\n        this.sharedStrings = [];\n    }\n    ExcelXlsxFactory.prototype.createSharedStrings = function () {\n        return this.createXmlPart(sharedStrings.getTemplate(this.sharedStrings));\n    };\n    ExcelXlsxFactory.prototype.createXmlPart = function (body) {\n        var header = this.xmlFactory.createHeader({\n            encoding: 'UTF-8',\n            standalone: 'yes'\n        });\n        var xmlBody = this.xmlFactory.createXml(body);\n        return \"\" + header + xmlBody;\n    };\n    ExcelXlsxFactory.prototype.createExcel = function (styles, worksheets, sharedStrings) {\n        if (sharedStrings === void 0) { sharedStrings = []; }\n        this.sharedStrings = sharedStrings;\n        this.sheetNames = worksheets.map(function (worksheet) { return worksheet.name; });\n        registerStyles(styles);\n        return this.createWorksheet(worksheets);\n    };\n    ExcelXlsxFactory.prototype.createCore = function () {\n        return this.createXmlPart(coreFactory.getTemplate());\n    };\n    ExcelXlsxFactory.prototype.createContentTypes = function () {\n        return this.createXmlPart(contentTypesFactory.getTemplate());\n    };\n    ExcelXlsxFactory.prototype.createRels = function () {\n        var rs = relationshipsFactory.getTemplate([{\n                Id: 'rId1',\n                Type: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument',\n                Target: 'xl/workbook.xml'\n            }, {\n                Id: 'rId2',\n                Type: 'http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties',\n                Target: 'docProps/core.xml'\n            }]);\n        return this.createXmlPart(rs);\n    };\n    ExcelXlsxFactory.prototype.createStylesheet = function () {\n        return this.createXmlPart(stylesheetFactory.getTemplate());\n    };\n    ExcelXlsxFactory.prototype.createTheme = function () {\n        return this.createXmlPart(officeTheme.getTemplate());\n    };\n    ExcelXlsxFactory.prototype.createWorkbook = function () {\n        return this.createXmlPart(workbookFactory.getTemplate(this.sheetNames));\n    };\n    ExcelXlsxFactory.prototype.createWorkbookRels = function () {\n        var rs = relationshipsFactory.getTemplate([{\n                Id: 'rId1',\n                Type: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet',\n                Target: 'worksheets/sheet1.xml'\n            }, {\n                Id: 'rId2',\n                Type: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme',\n                Target: 'theme/theme1.xml'\n            }, {\n                Id: 'rId3',\n                Type: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles',\n                Target: 'styles.xml'\n            }, {\n                Id: 'rId4',\n                Type: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings',\n                Target: 'sharedStrings.xml'\n            }]);\n        return this.createXmlPart(rs);\n    };\n    ExcelXlsxFactory.prototype.createWorksheet = function (worksheets) {\n        return this.createXmlPart(worksheetFactory.getTemplate(worksheets[0]));\n    };\n    __decorate$p([\n        agGridCommunity.Autowired('xmlFactory')\n    ], ExcelXlsxFactory.prototype, \"xmlFactory\", void 0);\n    ExcelXlsxFactory = __decorate$p([\n        agGridCommunity.Bean('excelXlsxFactory')\n    ], ExcelXlsxFactory);\n    return ExcelXlsxFactory;\n}());\n\nvar workbook = {\n    getTemplate: function () {\n        return {\n            name: \"Workbook\",\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"xmlns:\",\n                        map: {\n                            o: \"urn:schemas-microsoft-com:office:office\",\n                            x: \"urn:schemas-microsoft-com:office:excel\",\n                            ss: \"urn:schemas-microsoft-com:office:spreadsheet\",\n                            html: \"http://www.w3.org/TR/REC-html40\"\n                        },\n                    }],\n                rawMap: {\n                    xmlns: \"urn:schemas-microsoft-com:office:spreadsheet\"\n                }\n            }\n        };\n    }\n};\n\nvar excelWorkbook = {\n    getTemplate: function () {\n        return {\n            name: \"ExcelWorkbook\",\n            properties: {\n                rawMap: {\n                    xmlns: \"urn:schemas-microsoft-com:office:excel\"\n                }\n            },\n            children: [{\n                    name: \"WindowHeight\",\n                    textNode: \"8130\"\n                }, {\n                    name: \"WindowWidth\",\n                    textNode: \"15135\"\n                }, {\n                    name: \"WindowHeight\",\n                    textNode: \"8130\"\n                }, {\n                    name: \"WindowTopX\",\n                    textNode: \"120\"\n                }, {\n                    name: \"WindowTopY\",\n                    textNode: \"45\"\n                }, {\n                    name: \"ProtectStructure\",\n                    textNode: \"False\"\n                }, {\n                    name: \"ProtectWindow\",\n                    textNode: \"False\"\n                }]\n        };\n    }\n};\n\nvar column = {\n    getTemplate: function (c) {\n        var width = c.width;\n        return {\n            name: \"Column\",\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"ss:\",\n                        map: {\n                            Width: width\n                        }\n                    }]\n            }\n        };\n    }\n};\n\nvar cell = {\n    getTemplate: function (c) {\n        var mergeAcross = c.mergeAcross, styleId = c.styleId, data = c.data;\n        var properties = {};\n        if (mergeAcross) {\n            properties.MergeAcross = mergeAcross;\n        }\n        if (styleId) {\n            properties.StyleID = styleId;\n        }\n        return {\n            name: \"Cell\",\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"ss:\",\n                        map: properties\n                    }]\n            },\n            children: [{\n                    name: \"Data\",\n                    properties: {\n                        prefixedAttributes: [{\n                                prefix: \"ss:\",\n                                map: {\n                                    Type: data.type\n                                }\n                            }]\n                    },\n                    textNode: data.value\n                }]\n        };\n    }\n};\n\nvar row = {\n    getTemplate: function (r) {\n        var cells = r.cells;\n        return {\n            name: \"Row\",\n            children: cells.map(function (it) { return cell.getTemplate(it); })\n        };\n    }\n};\n\nvar worksheet = {\n    getTemplate: function (ws) {\n        var table = ws.table, name = ws.name;\n        var columns = table.columns, rows = table.rows;\n        var c = columns.map(function (it) { return column.getTemplate(it); });\n        var r = rows.map(function (it) { return row.getTemplate(it); });\n        return {\n            name: \"Worksheet\",\n            children: [{\n                    name: \"Table\",\n                    children: c.concat(r)\n                }],\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"ss:\",\n                        map: {\n                            Name: name\n                        }\n                    }]\n            }\n        };\n    }\n};\n\nvar documentProperties = {\n    getTemplate: function () {\n        return {\n            name: \"DocumentProperties\",\n            properties: {\n                rawMap: {\n                    xmlns: \"urn:schemas-microsoft-com:office:office\"\n                }\n            },\n            children: [{\n                    name: \"Version\",\n                    textNode: \"12.00\"\n                }]\n        };\n    }\n};\n\nvar alignment = {\n    getTemplate: function (styleProperties) {\n        var _a = styleProperties.alignment, vertical = _a.vertical, horizontal = _a.horizontal, indent = _a.indent, readingOrder = _a.readingOrder, rotate = _a.rotate, shrinkToFit = _a.shrinkToFit, verticalText = _a.verticalText, wrapText = _a.wrapText;\n        return {\n            name: 'Alignment',\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"ss:\",\n                        map: {\n                            Vertical: vertical,\n                            Horizontal: horizontal,\n                            Indent: indent,\n                            ReadingOrder: readingOrder,\n                            Rotate: rotate,\n                            ShrinkToFit: shrinkToFit,\n                            VerticalText: verticalText,\n                            WrapText: wrapText\n                        }\n                    }]\n            }\n        };\n    }\n};\n\nvar borders = {\n    getTemplate: function (styleProperties) {\n        var _a = styleProperties.borders, borderBottom = _a.borderBottom, borderLeft = _a.borderLeft, borderRight = _a.borderRight, borderTop = _a.borderTop;\n        return {\n            name: 'Borders',\n            children: [borderBottom, borderLeft, borderRight, borderTop].map(function (it, index) {\n                var current = index == 0 ? \"Bottom\" : index == 1 ? \"Left\" : index == 2 ? \"Right\" : \"Top\";\n                return {\n                    name: 'Border',\n                    properties: {\n                        prefixedAttributes: [{\n                                prefix: 'ss:',\n                                map: {\n                                    Position: current,\n                                    LineStyle: it.lineStyle,\n                                    Weight: it.weight,\n                                    Color: it.color\n                                }\n                            }]\n                    }\n                };\n            })\n        };\n    }\n};\n\nvar font = {\n    getTemplate: function (styleProperties) {\n        var _a = styleProperties.font, bold = _a.bold, fontName = _a.fontName, italic = _a.italic, color = _a.color, outline = _a.outline, shadow = _a.shadow, size = _a.size, strikeThrough = _a.strikeThrough, underline = _a.underline, verticalAlign = _a.verticalAlign, charSet = _a.charSet, family = _a.family;\n        return {\n            name: \"Font\",\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"ss:\",\n                        map: {\n                            Bold: bold,\n                            FontName: fontName,\n                            Italic: italic,\n                            Color: color,\n                            Outline: outline,\n                            Shadow: shadow,\n                            Size: size,\n                            StrikeThrough: strikeThrough,\n                            Underline: underline,\n                            VerticalAlign: verticalAlign\n                        }\n                    }, {\n                        prefix: \"x:\",\n                        map: {\n                            CharSet: charSet,\n                            Family: family\n                        }\n                    }]\n            }\n        };\n    }\n};\n\nvar interior = {\n    getTemplate: function (styleProperties) {\n        var _a = styleProperties.interior, color = _a.color, pattern = _a.pattern, patternColor = _a.patternColor;\n        return {\n            name: \"Interior\",\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"ss:\",\n                        map: {\n                            Color: color,\n                            Pattern: pattern,\n                            PatternColor: patternColor\n                        }\n                    }]\n            }\n        };\n    }\n};\n\nvar protection = {\n    getTemplate: function (styleProperties) {\n        return {\n            name: \"Protection\",\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"ss:\",\n                        map: {\n                            Protected: styleProperties.protection.protected,\n                            HideFormula: styleProperties.protection.hideFormula\n                        }\n                    }]\n            }\n        };\n    }\n};\n\nvar numberFormat = {\n    getTemplate: function (styleProperties) {\n        var format = styleProperties.numberFormat.format;\n        return {\n            name: \"NumberFormat\",\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"ss:\",\n                        map: {\n                            Format: format\n                        }\n                    }]\n            }\n        };\n    }\n};\n\nvar style = {\n    getTemplate: function (styleProperties) {\n        var id = styleProperties.id, name = styleProperties.name;\n        return {\n            name: 'Style',\n            properties: {\n                prefixedAttributes: [{\n                        prefix: \"ss:\",\n                        map: {\n                            ID: id,\n                            Name: name ? name : id\n                        }\n                    }]\n            }\n        };\n    }\n};\n\nvar __decorate$q = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * See https://msdn.microsoft.com/en-us/library/aa140066(v=office.10).aspx\n */\nvar ExcelXmlFactory = /** @class */ (function () {\n    function ExcelXmlFactory() {\n    }\n    ExcelXmlFactory.prototype.createExcel = function (styles, worksheets, sharedStrings) {\n        var header = this.excelXmlHeader();\n        var docProps = documentProperties.getTemplate();\n        var eWorkbook = excelWorkbook.getTemplate();\n        var wb = this.workbook(docProps, eWorkbook, styles, worksheets);\n        return \"\" + header + this.xmlFactory.createXml(wb, function (boolean) { return boolean ? '1' : '0'; });\n    };\n    ExcelXmlFactory.prototype.workbook = function (docProperties, eWorkbook, styles, worksheets) {\n        var children = [\n            docProperties,\n            eWorkbook,\n            this.stylesXmlElement(styles)\n        ].concat(worksheets.map(function (it) { return worksheet.getTemplate(it); }));\n        return agGridCommunity._.assign({}, workbook.getTemplate(), { children: children });\n    };\n    ExcelXmlFactory.prototype.excelXmlHeader = function () {\n        return \"<?xml version=\\\"1.0\\\" ?>\\n        <?mso-application progid=\\\"Excel.Sheet\\\" ?>\\n        \";\n    };\n    ExcelXmlFactory.prototype.stylesXmlElement = function (styles) {\n        var _this = this;\n        return {\n            name: 'Styles',\n            children: styles ? styles.map(function (it) { return _this.styleXmlElement(it); }) : []\n        };\n    };\n    ExcelXmlFactory.prototype.styleXmlElement = function (styleProperties) {\n        var children = agGridCommunity._.compose(this.addProperty('alignment', styleProperties), this.addProperty('borders', styleProperties), this.addProperty('font', styleProperties), this.addProperty('interior', styleProperties), this.addProperty('protection', styleProperties), this.addProperty('numberFormat', styleProperties))([]);\n        return agGridCommunity._.assign({}, style.getTemplate(styleProperties), { children: children });\n    };\n    ExcelXmlFactory.prototype.addProperty = function (property, styleProperties) {\n        return function (children) {\n            if (!styleProperties[property]) {\n                return children;\n            }\n            var options = {\n                alignment: alignment,\n                borders: borders,\n                font: font,\n                interior: interior,\n                numberFormat: numberFormat,\n                protection: protection\n            };\n            return children.concat(options[property].getTemplate(styleProperties));\n        };\n    };\n    __decorate$q([\n        agGridCommunity.Autowired('xmlFactory')\n    ], ExcelXmlFactory.prototype, \"xmlFactory\", void 0);\n    ExcelXmlFactory = __decorate$q([\n        agGridCommunity.Bean('excelXmlFactory')\n    ], ExcelXmlFactory);\n    return ExcelXmlFactory;\n}());\n\nvar __decorate$r = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar BaseGridSerializingSession = /** @class */ (function () {\n    function BaseGridSerializingSession(config) {\n        var columnController = config.columnController, valueService = config.valueService, gridOptionsWrapper = config.gridOptionsWrapper, processCellCallback = config.processCellCallback, processHeaderCallback = config.processHeaderCallback, processGroupHeaderCallback = config.processGroupHeaderCallback, processRowGroupCallback = config.processRowGroupCallback;\n        this.columnController = columnController;\n        this.valueService = valueService;\n        this.gridOptionsWrapper = gridOptionsWrapper;\n        this.processCellCallback = processCellCallback;\n        this.processHeaderCallback = processHeaderCallback;\n        this.processGroupHeaderCallback = processGroupHeaderCallback;\n        this.processRowGroupCallback = processRowGroupCallback;\n    }\n    BaseGridSerializingSession.prototype.prepare = function (columnsToExport) {\n        this.firstGroupColumn = agGridCommunity._.find(columnsToExport, function (col) { return !!col.getColDef().showRowGroup; });\n    };\n    BaseGridSerializingSession.prototype.extractHeaderValue = function (column) {\n        var value = this.getHeaderName(this.processHeaderCallback, column);\n        return value != null ? value : '';\n    };\n    BaseGridSerializingSession.prototype.extractRowCellValue = function (column, index, type, node) {\n        // we render the group summary text e.g. \"-> Parent -> Child\"...\n        var renderGroupSummaryCell = \n        // on group rows\n        node && node.group\n            && (\n            // in the first group column if groups appear in regular grid cells\n            column === this.firstGroupColumn\n                // or the first cell in the row, if we're doing full width rows\n                || (index === 0 && this.gridOptionsWrapper.isGroupUseEntireRow(this.columnController.isPivotMode())));\n        var valueForCell;\n        if (renderGroupSummaryCell) {\n            valueForCell = this.createValueForGroupNode(node);\n        }\n        else {\n            valueForCell = this.valueService.getValue(column, node);\n        }\n        var value = this.processCell(node, column, valueForCell, this.processCellCallback, type);\n        return value != null ? value : '';\n    };\n    BaseGridSerializingSession.prototype.getHeaderName = function (callback, column) {\n        if (callback) {\n            return callback({\n                column: column,\n                api: this.gridOptionsWrapper.getApi(),\n                columnApi: this.gridOptionsWrapper.getColumnApi(),\n                context: this.gridOptionsWrapper.getContext()\n            });\n        }\n        else {\n            return this.columnController.getDisplayNameForColumn(column, 'csv', true);\n        }\n    };\n    BaseGridSerializingSession.prototype.createValueForGroupNode = function (node) {\n        if (this.processRowGroupCallback) {\n            return this.processRowGroupCallback({\n                node: node,\n                api: this.gridOptionsWrapper.getApi(),\n                columnApi: this.gridOptionsWrapper.getColumnApi(),\n                context: this.gridOptionsWrapper.getContext(),\n            });\n        }\n        var keys = [node.key];\n        while (node.parent) {\n            node = node.parent;\n            keys.push(node.key);\n        }\n        return keys.reverse().join(' -> ');\n    };\n    BaseGridSerializingSession.prototype.processCell = function (rowNode, column, value, processCellCallback, type) {\n        if (processCellCallback) {\n            return processCellCallback({\n                column: column,\n                node: rowNode,\n                value: value,\n                api: this.gridOptionsWrapper.getApi(),\n                columnApi: this.gridOptionsWrapper.getColumnApi(),\n                context: this.gridOptionsWrapper.getContext(),\n                type: type\n            });\n        }\n        else {\n            return value;\n        }\n    };\n    return BaseGridSerializingSession;\n}());\nvar GridSerializer = /** @class */ (function () {\n    function GridSerializer() {\n    }\n    GridSerializer.prototype.serialize = function (gridSerializingSession, params) {\n        if (params === void 0) { params = {}; }\n        var rowSkipper = params.shouldRowBeSkipped || (function () { return false; });\n        var api = this.gridOptionsWrapper.getApi();\n        var columnApi = this.gridOptionsWrapper.getColumnApi();\n        var skipSingleChildrenGroup = this.gridOptionsWrapper.isGroupRemoveSingleChildren();\n        var skipLowestSingleChildrenGroup = this.gridOptionsWrapper.isGroupRemoveLowestSingleChildren();\n        var context = this.gridOptionsWrapper.getContext();\n        // when in pivot mode, we always render cols on screen, never 'all columns'\n        var isPivotMode = this.columnController.isPivotMode();\n        var rowModelNormal = this.rowModel.getType() === agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE;\n        var onlySelectedNonStandardModel = !rowModelNormal && params.onlySelected;\n        var columnsToExport = [];\n        if (agGridCommunity._.existsAndNotEmpty(params.columnKeys)) {\n            columnsToExport = this.columnController.getGridColumns(params.columnKeys);\n        }\n        else if (params.allColumns && !isPivotMode) {\n            // add auto group column for tree data\n            columnsToExport = this.gridOptionsWrapper.isTreeData() ?\n                this.columnController.getGridColumns([agGridCommunity.Constants.GROUP_AUTO_COLUMN_ID]) : [];\n            columnsToExport = columnsToExport.concat(this.columnController.getAllPrimaryColumns() || []);\n        }\n        else {\n            columnsToExport = this.columnController.getAllDisplayedColumns();\n        }\n        if (params.customHeader) {\n            gridSerializingSession.addCustomContent(params.customHeader);\n        }\n        gridSerializingSession.prepare(columnsToExport);\n        // first pass, put in the header names of the cols\n        if (params.columnGroups) {\n            var groupInstanceIdCreator = new agGridCommunity.GroupInstanceIdCreator();\n            var displayedGroups = this.displayedGroupCreator.createDisplayedGroups(columnsToExport, this.columnController.getGridBalancedTree(), groupInstanceIdCreator, null);\n            this.recursivelyAddHeaderGroups(displayedGroups, gridSerializingSession, params.processGroupHeaderCallback);\n        }\n        if (!params.skipHeader) {\n            var gridRowIterator_1 = gridSerializingSession.onNewHeaderRow();\n            columnsToExport.forEach(function (column, index) {\n                gridRowIterator_1.onColumn(column, index, undefined);\n            });\n        }\n        this.pinnedRowModel.forEachPinnedTopRow(processRow);\n        if (isPivotMode) {\n            if (this.rowModel.forEachPivotNode) {\n                this.rowModel.forEachPivotNode(processRow);\n            }\n            else {\n                //Must be enterprise, so we can just loop through all the nodes\n                this.rowModel.forEachNode(processRow);\n            }\n        }\n        else {\n            // onlySelectedAllPages: user doing pagination and wants selected items from\n            // other pages, so cannot use the standard row model as it won't have rows from\n            // other pages.\n            // onlySelectedNonStandardModel: if user wants selected in non standard row model\n            // (eg viewport) then again rowmodel cannot be used, so need to use selected instead.\n            if (params.onlySelectedAllPages || onlySelectedNonStandardModel) {\n                var selectedNodes = this.selectionController.getSelectedNodes();\n                selectedNodes.forEach(function (node) {\n                    processRow(node);\n                });\n            }\n            else {\n                // here is everything else - including standard row model and selected. we don't use\n                // the selection model even when just using selected, so that the result is the order\n                // of the rows appearing on the screen.\n                if (rowModelNormal) {\n                    this.rowModel.forEachNodeAfterFilterAndSort(processRow);\n                }\n                else {\n                    this.rowModel.forEachNode(processRow);\n                }\n            }\n        }\n        this.pinnedRowModel.forEachPinnedBottomRow(processRow);\n        if (params.customFooter) {\n            gridSerializingSession.addCustomContent(params.customFooter);\n        }\n        function processRow(node) {\n            var shouldSkipLowestGroup = skipLowestSingleChildrenGroup && node.leafGroup;\n            var shouldSkipCurrentGroup = node.allChildrenCount === 1 && (skipSingleChildrenGroup || shouldSkipLowestGroup);\n            if (node.group && (params.skipGroups || shouldSkipCurrentGroup)) {\n                return;\n            }\n            if (params.skipFooters && node.footer) {\n                return;\n            }\n            if (params.onlySelected && !node.isSelected()) {\n                return;\n            }\n            if (params.skipPinnedTop && node.rowPinned === 'top') {\n                return;\n            }\n            if (params.skipPinnedBottom && node.rowPinned === 'bottom') {\n                return;\n            }\n            // if we are in pivotMode, then the grid will show the root node only\n            // if it's not a leaf group\n            var nodeIsRootNode = node.level === -1;\n            if (nodeIsRootNode && !node.leafGroup) {\n                return;\n            }\n            var shouldRowBeSkipped = rowSkipper({ node: node, api: api, context: context });\n            if (shouldRowBeSkipped) {\n                return;\n            }\n            var rowAccumulator = gridSerializingSession.onNewBodyRow();\n            columnsToExport.forEach(function (column, index) {\n                rowAccumulator.onColumn(column, index, node);\n            });\n            if (params.getCustomContentBelowRow) {\n                var content = params.getCustomContentBelowRow({ node: node, api: api, columnApi: columnApi, context: context });\n                if (content) {\n                    gridSerializingSession.addCustomContent(content);\n                }\n            }\n        }\n        return gridSerializingSession.parse();\n    };\n    GridSerializer.prototype.recursivelyAddHeaderGroups = function (displayedGroups, gridSerializingSession, processGroupHeaderCallback) {\n        var directChildrenHeaderGroups = [];\n        displayedGroups.forEach(function (columnGroupChild) {\n            var columnGroup = columnGroupChild;\n            if (!columnGroup.getChildren) {\n                return;\n            }\n            columnGroup.getChildren().forEach(function (it) { return directChildrenHeaderGroups.push(it); });\n        });\n        if (displayedGroups.length > 0 && displayedGroups[0] instanceof agGridCommunity.ColumnGroup) {\n            this.doAddHeaderHeader(gridSerializingSession, displayedGroups, processGroupHeaderCallback);\n        }\n        if (directChildrenHeaderGroups && directChildrenHeaderGroups.length > 0) {\n            this.recursivelyAddHeaderGroups(directChildrenHeaderGroups, gridSerializingSession, processGroupHeaderCallback);\n        }\n    };\n    GridSerializer.prototype.doAddHeaderHeader = function (gridSerializingSession, displayedGroups, processGroupHeaderCallback) {\n        var _this = this;\n        var gridRowIterator = gridSerializingSession.onNewHeaderGroupingRow();\n        var columnIndex = 0;\n        displayedGroups.forEach(function (columnGroupChild) {\n            var columnGroup = columnGroupChild;\n            var name;\n            if (processGroupHeaderCallback) {\n                name = processGroupHeaderCallback({\n                    columnGroup: columnGroup,\n                    api: _this.gridOptionsWrapper.getApi(),\n                    columnApi: _this.gridOptionsWrapper.getColumnApi(),\n                    context: _this.gridOptionsWrapper.getContext()\n                });\n            }\n            else {\n                name = _this.columnController.getDisplayNameForColumnGroup(columnGroup, 'header');\n            }\n            gridRowIterator.onColumn(name || '', columnIndex++, columnGroup.getLeafColumns().length - 1);\n        });\n    };\n    __decorate$r([\n        agGridCommunity.Autowired('displayedGroupCreator')\n    ], GridSerializer.prototype, \"displayedGroupCreator\", void 0);\n    __decorate$r([\n        agGridCommunity.Autowired('columnController')\n    ], GridSerializer.prototype, \"columnController\", void 0);\n    __decorate$r([\n        agGridCommunity.Autowired('rowModel')\n    ], GridSerializer.prototype, \"rowModel\", void 0);\n    __decorate$r([\n        agGridCommunity.Autowired('pinnedRowModel')\n    ], GridSerializer.prototype, \"pinnedRowModel\", void 0);\n    __decorate$r([\n        agGridCommunity.Autowired('selectionController')\n    ], GridSerializer.prototype, \"selectionController\", void 0);\n    __decorate$r([\n        agGridCommunity.Autowired('columnFactory')\n    ], GridSerializer.prototype, \"columnFactory\", void 0);\n    __decorate$r([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], GridSerializer.prototype, \"gridOptionsWrapper\", void 0);\n    GridSerializer = __decorate$r([\n        agGridCommunity.Bean(\"gridSerializer\")\n    ], GridSerializer);\n    return GridSerializer;\n}());\nvar RowType;\n(function (RowType) {\n    RowType[RowType[\"HEADER_GROUPING\"] = 0] = \"HEADER_GROUPING\";\n    RowType[RowType[\"HEADER\"] = 1] = \"HEADER\";\n    RowType[RowType[\"BODY\"] = 2] = \"BODY\";\n})(RowType || (RowType = {}));\n\nvar __extends$i = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$s = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar LINE_SEPARATOR = '\\r\\n';\nvar CsvSerializingSession = /** @class */ (function (_super) {\n    __extends$i(CsvSerializingSession, _super);\n    function CsvSerializingSession(config) {\n        var _this = _super.call(this, config) || this;\n        _this.isFirstLine = true;\n        _this.result = '';\n        var suppressQuotes = config.suppressQuotes, columnSeparator = config.columnSeparator;\n        _this.suppressQuotes = suppressQuotes;\n        _this.columnSeparator = columnSeparator;\n        return _this;\n    }\n    CsvSerializingSession.prototype.addCustomContent = function (content) {\n        var _this = this;\n        if (!content) {\n            return;\n        }\n        if (typeof content === 'string') {\n            // we used to require the customFooter to be prefixed with a newline but no longer do,\n            // so only add the newline if the user has not supplied one\n            if (!/^\\s*\\n/.test(content)) {\n                this.beginNewLine();\n            }\n            // replace whatever newlines are supplied with the style we're using\n            content = content.replace(/\\r?\\n/g, LINE_SEPARATOR);\n            this.result += content;\n        }\n        else {\n            content.forEach(function (row) {\n                _this.beginNewLine();\n                row.forEach(function (cell, index) {\n                    if (index !== 0) {\n                        _this.result += _this.columnSeparator;\n                    }\n                    _this.result += _this.putInQuotes(cell.data.value || '');\n                    if (cell.mergeAcross) {\n                        _this.appendEmptyCells(cell.mergeAcross);\n                    }\n                });\n            });\n        }\n    };\n    CsvSerializingSession.prototype.onNewHeaderGroupingRow = function () {\n        this.beginNewLine();\n        return {\n            onColumn: this.onNewHeaderGroupingRowColumn.bind(this)\n        };\n    };\n    CsvSerializingSession.prototype.onNewHeaderGroupingRowColumn = function (header, index, span) {\n        if (index != 0) {\n            this.result += this.columnSeparator;\n        }\n        this.result += this.putInQuotes(header);\n        this.appendEmptyCells(span);\n    };\n    CsvSerializingSession.prototype.appendEmptyCells = function (count) {\n        for (var i = 1; i <= count; i++) {\n            this.result += this.columnSeparator + this.putInQuotes(\"\");\n        }\n    };\n    CsvSerializingSession.prototype.onNewHeaderRow = function () {\n        this.beginNewLine();\n        return {\n            onColumn: this.onNewHeaderRowColumn.bind(this)\n        };\n    };\n    CsvSerializingSession.prototype.onNewHeaderRowColumn = function (column, index, node) {\n        if (index != 0) {\n            this.result += this.columnSeparator;\n        }\n        this.result += this.putInQuotes(this.extractHeaderValue(column));\n    };\n    CsvSerializingSession.prototype.onNewBodyRow = function () {\n        this.beginNewLine();\n        return {\n            onColumn: this.onNewBodyRowColumn.bind(this)\n        };\n    };\n    CsvSerializingSession.prototype.onNewBodyRowColumn = function (column, index, node) {\n        if (index != 0) {\n            this.result += this.columnSeparator;\n        }\n        this.result += this.putInQuotes(this.extractRowCellValue(column, index, agGridCommunity.Constants.EXPORT_TYPE_CSV, node));\n    };\n    CsvSerializingSession.prototype.putInQuotes = function (value) {\n        if (this.suppressQuotes) {\n            return value;\n        }\n        if (value === null || value === undefined) {\n            return '\"\"';\n        }\n        var stringValue;\n        if (typeof value === 'string') {\n            stringValue = value;\n        }\n        else if (typeof value.toString === 'function') {\n            stringValue = value.toString();\n        }\n        else {\n            console.warn('unknown value type during csv conversion');\n            stringValue = '';\n        }\n        // replace each \" with \"\" (ie two sets of double quotes is how to do double quotes in csv)\n        var valueEscaped = stringValue.replace(/\"/g, \"\\\"\\\"\");\n        return '\"' + valueEscaped + '\"';\n    };\n    CsvSerializingSession.prototype.parse = function () {\n        return this.result + LINE_SEPARATOR;\n    };\n    CsvSerializingSession.prototype.beginNewLine = function () {\n        if (!this.isFirstLine) {\n            this.result += LINE_SEPARATOR;\n        }\n        this.isFirstLine = false;\n    };\n    return CsvSerializingSession;\n}(BaseGridSerializingSession));\nvar BaseCreator = /** @class */ (function () {\n    function BaseCreator() {\n    }\n    BaseCreator.prototype.setBeans = function (beans) {\n        this.beans = beans;\n    };\n    BaseCreator.prototype.export = function (userParams) {\n        if (this.isExportSuppressed()) {\n            console.warn(\"ag-grid: Export cancelled. Export is not allowed as per your configuration.\");\n            return '';\n        }\n        var _a = this.getMergedParamsAndData(userParams), mergedParams = _a.mergedParams, data = _a.data;\n        var fileNamePresent = mergedParams && mergedParams.fileName && mergedParams.fileName.length !== 0;\n        var fileName = fileNamePresent ? mergedParams.fileName : this.getDefaultFileName();\n        if (fileName.indexOf(\".\") === -1) {\n            fileName = fileName + \".\" + this.getDefaultFileExtension();\n        }\n        this.beans.downloader.download(fileName, this.packageFile(data));\n        return data;\n    };\n    BaseCreator.prototype.getData = function (params) {\n        return this.getMergedParamsAndData(params).data;\n    };\n    BaseCreator.prototype.getMergedParamsAndData = function (userParams) {\n        var mergedParams = this.mergeDefaultParams(userParams);\n        var data = this.beans.gridSerializer.serialize(this.createSerializingSession(mergedParams), mergedParams);\n        return { mergedParams: mergedParams, data: data };\n    };\n    BaseCreator.prototype.mergeDefaultParams = function (userParams) {\n        var baseParams = this.beans.gridOptionsWrapper.getDefaultExportParams();\n        var params = {};\n        agGridCommunity._.assign(params, baseParams);\n        agGridCommunity._.assign(params, userParams);\n        return params;\n    };\n    BaseCreator.prototype.packageFile = function (data) {\n        return new Blob([\"\\ufeff\", data], {\n            type: window.navigator.msSaveOrOpenBlob ? this.getMimeType() : 'octet/stream'\n        });\n    };\n    return BaseCreator;\n}());\nvar CsvCreator = /** @class */ (function (_super) {\n    __extends$i(CsvCreator, _super);\n    function CsvCreator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CsvCreator.prototype.postConstruct = function () {\n        this.setBeans({\n            downloader: this.downloader,\n            gridSerializer: this.gridSerializer,\n            gridOptionsWrapper: this.gridOptionsWrapper\n        });\n    };\n    CsvCreator.prototype.exportDataAsCsv = function (params) {\n        return this.export(params);\n    };\n    CsvCreator.prototype.getDataAsCsv = function (params) {\n        return this.getData(params);\n    };\n    CsvCreator.prototype.getMimeType = function () {\n        return 'text/csv;charset=utf-8;';\n    };\n    CsvCreator.prototype.getDefaultFileName = function () {\n        return 'export.csv';\n    };\n    CsvCreator.prototype.getDefaultFileExtension = function () {\n        return 'csv';\n    };\n    CsvCreator.prototype.createSerializingSession = function (params) {\n        var _a = this, columnController = _a.columnController, valueService = _a.valueService, gridOptionsWrapper = _a.gridOptionsWrapper;\n        var processCellCallback = params.processCellCallback, processHeaderCallback = params.processHeaderCallback, processGroupHeaderCallback = params.processGroupHeaderCallback, processRowGroupCallback = params.processRowGroupCallback, suppressQuotes = params.suppressQuotes, columnSeparator = params.columnSeparator;\n        return new CsvSerializingSession({\n            columnController: columnController,\n            valueService: valueService,\n            gridOptionsWrapper: gridOptionsWrapper,\n            processCellCallback: processCellCallback || undefined,\n            processHeaderCallback: processHeaderCallback || undefined,\n            processGroupHeaderCallback: processGroupHeaderCallback || undefined,\n            processRowGroupCallback: processRowGroupCallback || undefined,\n            suppressQuotes: suppressQuotes || false,\n            columnSeparator: columnSeparator || ','\n        });\n    };\n    CsvCreator.prototype.isExportSuppressed = function () {\n        return this.gridOptionsWrapper.isSuppressCsvExport();\n    };\n    __decorate$s([\n        agGridCommunity.Autowired('columnController')\n    ], CsvCreator.prototype, \"columnController\", void 0);\n    __decorate$s([\n        agGridCommunity.Autowired('valueService')\n    ], CsvCreator.prototype, \"valueService\", void 0);\n    __decorate$s([\n        agGridCommunity.Autowired('downloader')\n    ], CsvCreator.prototype, \"downloader\", void 0);\n    __decorate$s([\n        agGridCommunity.Autowired('gridSerializer')\n    ], CsvCreator.prototype, \"gridSerializer\", void 0);\n    __decorate$s([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], CsvCreator.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$s([\n        agGridCommunity.PostConstruct\n    ], CsvCreator.prototype, \"postConstruct\", null);\n    CsvCreator = __decorate$s([\n        agGridCommunity.Bean('csvCreator')\n    ], CsvCreator);\n    return CsvCreator;\n}(BaseCreator));\n\nvar __decorate$t = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar Downloader = /** @class */ (function () {\n    function Downloader() {\n    }\n    Downloader.prototype.download = function (fileName, content) {\n        // Internet Explorer\n        if (window.navigator.msSaveOrOpenBlob) {\n            window.navigator.msSaveOrOpenBlob(content, fileName);\n        }\n        else {\n            // Other Browsers\n            var element = document.createElement(\"a\");\n            var url_1 = window.URL.createObjectURL(content);\n            element.setAttribute(\"href\", url_1);\n            element.setAttribute(\"download\", fileName);\n            element.style.display = \"none\";\n            document.body.appendChild(element);\n            element.dispatchEvent(new MouseEvent('click', {\n                bubbles: false,\n                cancelable: true,\n                view: window\n            }));\n            document.body.removeChild(element);\n            window.setTimeout(function () {\n                window.URL.revokeObjectURL(url_1);\n            }, 0);\n        }\n    };\n    Downloader = __decorate$t([\n        agGridCommunity.Bean(\"downloader\")\n    ], Downloader);\n    return Downloader;\n}());\n\nvar __decorate$u = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar LINE_SEPARATOR$1 = '\\r\\n';\nvar XmlFactory = /** @class */ (function () {\n    function XmlFactory() {\n    }\n    XmlFactory.prototype.createHeader = function (headerElement) {\n        if (headerElement === void 0) { headerElement = {}; }\n        var headerStart = '<?';\n        var headerEnd = '?>';\n        var keys = ['version'];\n        if (!headerElement.version) {\n            headerElement.version = \"1.0\";\n        }\n        if (headerElement.encoding) {\n            keys.push('encoding');\n        }\n        if (headerElement.standalone) {\n            keys.push('standalone');\n        }\n        var att = keys.map(function (key) { return key + \"=\\\"\" + headerElement[key] + \"\\\"\"; }).join(' ');\n        return headerStart + \"xml \" + att + \" \" + headerEnd;\n    };\n    XmlFactory.prototype.createXml = function (xmlElement, booleanTransformer) {\n        var _this = this;\n        var props = '';\n        if (xmlElement.properties) {\n            if (xmlElement.properties.prefixedAttributes) {\n                xmlElement.properties.prefixedAttributes.forEach(function (prefixedSet) {\n                    Object.keys(prefixedSet.map).forEach(function (key) {\n                        props += _this.returnAttributeIfPopulated(prefixedSet.prefix + key, prefixedSet.map[key], booleanTransformer);\n                    });\n                });\n            }\n            if (xmlElement.properties.rawMap) {\n                Object.keys(xmlElement.properties.rawMap).forEach(function (key) {\n                    props += _this.returnAttributeIfPopulated(key, xmlElement.properties.rawMap[key], booleanTransformer);\n                });\n            }\n        }\n        var result = '<' + xmlElement.name + props;\n        if (!xmlElement.children && xmlElement.textNode == null) {\n            return result + '/>' + LINE_SEPARATOR$1;\n        }\n        if (xmlElement.textNode != null) {\n            return result + '>' + xmlElement.textNode + '</' + xmlElement.name + '>' + LINE_SEPARATOR$1;\n        }\n        result += '>' + LINE_SEPARATOR$1;\n        if (xmlElement.children) {\n            xmlElement.children.forEach(function (it) {\n                result += _this.createXml(it, booleanTransformer);\n            });\n        }\n        return result + '</' + xmlElement.name + '>' + LINE_SEPARATOR$1;\n    };\n    XmlFactory.prototype.returnAttributeIfPopulated = function (key, value, booleanTransformer) {\n        if (!value && value !== '' && value !== 0) {\n            return '';\n        }\n        var xmlValue = value;\n        if ((typeof (value) === 'boolean')) {\n            if (booleanTransformer) {\n                xmlValue = booleanTransformer(value);\n            }\n        }\n        return \" \" + key + \"=\\\"\" + xmlValue + \"\\\"\";\n    };\n    XmlFactory = __decorate$u([\n        agGridCommunity.Bean('xmlFactory')\n    ], XmlFactory);\n    return XmlFactory;\n}());\n\nvar __decorate$v = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// table for crc calculation\n// from: https://referencesource.microsoft.com/#System/sys/System/IO/compression/Crc32Helper.cs,3b31978c7d7f7246,references\nvar crcTable = [\n    0, 1996959894, -301047508, -1727442502, 124634137, 1886057615, -379345611, -1637575261, 249268274,\n    2044508324, -522852066, -1747789432, 162941995, 2125561021, -407360249, -1866523247, 498536548,\n    1789927666, -205950648, -2067906082, 450548861, 1843258603, -187386543, -2083289657, 325883990,\n    1684777152, -43845254, -1973040660, 335633487, 1661365465, -99664541, -1928851979, 997073096,\n    1281953886, -715111964, -1570279054, 1006888145, 1258607687, -770865667, -1526024853, 901097722,\n    1119000684, -608450090, -1396901568, 853044451, 1172266101, -589951537, -1412350631, 651767980,\n    1373503546, -925412992, -1076862698, 565507253, 1454621731, -809855591, -1195530993, 671266974,\n    1594198024, -972236366, -1324619484, 795835527, 1483230225, -1050600021, -1234817731, 1994146192,\n    31158534, -1731059524, -271249366, 1907459465, 112637215, -1614814043, -390540237, 2013776290,\n    251722036, -1777751922, -519137256, 2137656763, 141376813, -1855689577, -429695999, 1802195444,\n    476864866, -2056965928, -228458418, 1812370925, 453092731, -2113342271, -183516073, 1706088902,\n    314042704, -1950435094, -54949764, 1658658271, 366619977, -1932296973, -69972891, 1303535960,\n    984961486, -1547960204, -725929758, 1256170817, 1037604311, -1529756563, -740887301, 1131014506,\n    879679996, -1385723834, -631195440, 1141124467, 855842277, -1442165665, -586318647, 1342533948,\n    654459306, -1106571248, -921952122, 1466479909, 544179635, -1184443383, -832445281, 1591671054,\n    702138776, -1328506846, -942167884, 1504918807, 783551873, -1212326853, -1061524307, -306674912,\n    -1698712650, 62317068, 1957810842, -355121351, -1647151185, 81470997, 1943803523, -480048366,\n    -1805370492, 225274430, 2053790376, -468791541, -1828061283, 167816743, 2097651377, -267414716,\n    -2029476910, 503444072, 1762050814, -144550051, -2140837941, 426522225, 1852507879, -19653770,\n    -1982649376, 282753626, 1742555852, -105259153, -1900089351, 397917763, 1622183637, -690576408,\n    -1580100738, 953729732, 1340076626, -776247311, -1497606297, 1068828381, 1219638859, -670225446,\n    -1358292148, 906185462, 1090812512, -547295293, -1469587627, 829329135, 1181335161, -882789492,\n    -1134132454, 628085408, 1382605366, -871598187, -1156888829, 570562233, 1426400815, -977650754,\n    -1296233688, 733239954, 1555261956, -1026031705, -1244606671, 752459403, 1541320221, -1687895376,\n    -328994266, 1969922972, 40735498, -1677130071, -351390145, 1913087877, 83908371, -1782625662,\n    -491226604, 2075208622, 213261112, -1831694693, -438977011, 2094854071, 198958881, -2032938284,\n    -237706686, 1759359992, 534414190, -2118248755, -155638181, 1873836001, 414664567, -2012718362,\n    -15766928, 1711684554, 285281116, -1889165569, -127750551, 1634467795, 376229701, -1609899400,\n    -686959890, 1308918612, 956543938, -1486412191, -799009033, 1231636301, 1047427035, -1362007478,\n    -640263460, 1088359270, 936918000, -1447252397, -558129467, 1202900863, 817233897, -1111625188,\n    -893730166, 1404277552, 615818150, -1160759803, -841546093, 1423857449, 601450431, -1285129682,\n    -1000256840, 1567103746, 711928724, -1274298825, -1022587231, 1510334235, 755167117\n];\nvar ZipContainer = /** @class */ (function () {\n    function ZipContainer() {\n        var _this = this;\n        this.folders = [];\n        this.files = [];\n        this.addFolder = function (path) {\n            _this.folders.push({\n                path: path,\n                created: new Date()\n            });\n        };\n    }\n    ZipContainer.prototype.addFolders = function (paths) {\n        paths.forEach(this.addFolder);\n    };\n    ZipContainer.prototype.addFile = function (path, content) {\n        this.files.push({\n            path: path,\n            created: new Date(),\n            content: content\n        });\n    };\n    ZipContainer.prototype.clearStream = function () {\n        this.folders = [];\n        this.files = [];\n    };\n    ZipContainer.prototype.getContent = function (mimeType) {\n        if (mimeType === void 0) { mimeType = 'application/zip'; }\n        var textOutput = this.buildFileStream();\n        var uInt8Output = this.buildUint8Array(textOutput);\n        this.clearStream();\n        return new Blob([uInt8Output], { type: mimeType });\n    };\n    ZipContainer.prototype.buildFileStream = function (fData) {\n        if (fData === void 0) { fData = ''; }\n        var totalFiles = this.folders.concat(this.files);\n        var len = totalFiles.length;\n        var foData = '';\n        var lL = 0;\n        var cL = 0;\n        for (var _i = 0, totalFiles_1 = totalFiles; _i < totalFiles_1.length; _i++) {\n            var currentFile = totalFiles_1[_i];\n            var _a = this.getHeader(currentFile, lL), fileHeader = _a.fileHeader, folderHeader = _a.folderHeader, content = _a.content;\n            lL += fileHeader.length + content.length;\n            cL += folderHeader.length;\n            fData += fileHeader + content;\n            foData += folderHeader;\n        }\n        var foEnd = this.buildFolderEnd(len, cL, lL);\n        return fData + foData + foEnd;\n    };\n    ZipContainer.prototype.getHeader = function (currentFile, offset) {\n        var content = currentFile.content, path = currentFile.path, created = currentFile.created;\n        var utf8_encode = agGridCommunity._.utf8_encode, decToHex = agGridCommunity._.decToHex;\n        var utfPath = utf8_encode(path);\n        var isUTF8 = utfPath !== path;\n        var time = this.convertTime(created);\n        var dt = this.convertDate(created);\n        var extraFields = '';\n        if (isUTF8) {\n            var uExtraFieldPath = decToHex(1, 1) + decToHex(this.getFromCrc32Table(utfPath), 4) + utfPath;\n            extraFields = \"\\x75\\x70\" + decToHex(uExtraFieldPath.length, 2) + uExtraFieldPath;\n        }\n        var header = '\\x0A\\x00' +\n            (isUTF8 ? '\\x00\\x08' : '\\x00\\x00') +\n            '\\x00\\x00' +\n            decToHex(time, 2) + // last modified time\n            decToHex(dt, 2) + // last modified date\n            decToHex(content ? this.getFromCrc32Table(content) : 0, 4) +\n            decToHex(content ? content.length : 0, 4) + // compressed size\n            decToHex(content ? content.length : 0, 4) + // uncompressed size\n            decToHex(utfPath.length, 2) + // file name length\n            decToHex(extraFields.length, 2); // extra field length\n        var fileHeader = 'PK\\x03\\x04' + header + utfPath + extraFields;\n        var folderHeader = 'PK\\x01\\x02' + // central header\n            '\\x14\\x00' +\n            header + // file header\n            '\\x00\\x00' +\n            '\\x00\\x00' +\n            '\\x00\\x00' +\n            (content ? '\\x00\\x00\\x00\\x00' : '\\x10\\x00\\x00\\x00') + // external file attributes\n            decToHex(offset, 4) + // relative offset of local header\n            utfPath + // file name\n            extraFields; // extra field\n        return { fileHeader: fileHeader, folderHeader: folderHeader, content: content || '' };\n    };\n    ZipContainer.prototype.buildFolderEnd = function (tLen, cLen, lLen) {\n        var decToHex = agGridCommunity._.decToHex;\n        return 'PK\\x05\\x06' + // central folder end\n            '\\x00\\x00' +\n            '\\x00\\x00' +\n            decToHex(tLen, 2) + // total number of entries in the central folder\n            decToHex(tLen, 2) + // total number of entries in the central folder\n            decToHex(cLen, 4) + // size of the central folder\n            decToHex(lLen, 4) + // central folder start offset\n            '\\x00\\x00';\n    };\n    ZipContainer.prototype.buildUint8Array = function (content) {\n        var uint8 = new Uint8Array(content.length);\n        for (var i = 0; i < uint8.length; i++) {\n            uint8[i] = content.charCodeAt(i);\n        }\n        return uint8;\n    };\n    ZipContainer.prototype.getFromCrc32Table = function (content, crc) {\n        if (crc === void 0) { crc = 0; }\n        if (!content.length) {\n            return 0;\n        }\n        crc ^= (-1);\n        var j = 0;\n        var k = 0;\n        var l = 0;\n        for (var i = 0; i < content.length; i++) {\n            j = content.charCodeAt(i);\n            k = (crc ^ j) & 0xFF;\n            l = crcTable[k];\n            crc = (crc >>> 8) ^ l;\n        }\n        return crc ^ (-1);\n    };\n    ZipContainer.prototype.convertTime = function (date) {\n        var time = date.getHours();\n        time <<= 6;\n        time = time | date.getMinutes();\n        time <<= 5;\n        time = time | date.getSeconds() / 2;\n        return time;\n    };\n    ZipContainer.prototype.convertDate = function (date) {\n        var dt = date.getFullYear() - 1980;\n        dt <<= 4;\n        dt = dt | (date.getMonth() + 1);\n        dt <<= 5;\n        dt = dt | date.getDate();\n        return dt;\n    };\n    ZipContainer = __decorate$v([\n        agGridCommunity.Bean('zipContainer')\n    ], ZipContainer);\n    return ZipContainer;\n}());\n\nvar CsvExportModule = {\n    moduleName: agGridCommunity.ModuleNames.CsvExportModule,\n    beans: [CsvCreator, Downloader, XmlFactory, GridSerializer, ZipContainer]\n};\n\nvar __extends$j = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays$1 = (undefined && undefined.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar ExcelXmlSerializingSession = /** @class */ (function (_super) {\n    __extends$j(ExcelXmlSerializingSession, _super);\n    function ExcelXmlSerializingSession(config) {\n        var _this = _super.call(this, config) || this;\n        _this.mixedStyles = {};\n        _this.mixedStyleCounter = 0;\n        _this.rows = [];\n        _this.config = agGridCommunity._.assign({}, config);\n        _this.stylesByIds = {};\n        _this.config.baseExcelStyles.forEach(function (style) {\n            _this.stylesByIds[style.id] = style;\n        });\n        _this.excelStyles = __spreadArrays$1(_this.config.baseExcelStyles);\n        return _this;\n    }\n    ExcelXmlSerializingSession.prototype.addCustomContent = function (customContent) {\n        var _this = this;\n        customContent.forEach(function (cells) { return _this.rows.push({ cells: cells }); });\n    };\n    ExcelXmlSerializingSession.prototype.prepare = function (columnsToExport) {\n        var _this = this;\n        _super.prototype.prepare.call(this, columnsToExport);\n        this.cols = columnsToExport.map(function (col, i) { return _this.convertColumnToExcel(col, i); });\n    };\n    ExcelXmlSerializingSession.prototype.onNewHeaderGroupingRow = function () {\n        var _this = this;\n        var currentCells = [];\n        this.rows.push({\n            cells: currentCells,\n            height: this.config.headerRowHeight\n        });\n        return {\n            onColumn: function (header, index, span) {\n                var styleIds = _this.config.styleLinker(RowType.HEADER_GROUPING, 1, index, \"grouping-\" + header, undefined, undefined);\n                currentCells.push(_this.createMergedCell((styleIds && styleIds.length > 0) ? styleIds[0] : undefined, \"String\", header, span));\n            }\n        };\n    };\n    ExcelXmlSerializingSession.prototype.onNewHeaderRow = function () {\n        return this.onNewRow(this.onNewHeaderColumn, this.config.headerRowHeight);\n    };\n    ExcelXmlSerializingSession.prototype.onNewBodyRow = function () {\n        return this.onNewRow(this.onNewBodyColumn, this.config.rowHeight);\n    };\n    ExcelXmlSerializingSession.prototype.onNewRow = function (onNewColumnAccumulator, height) {\n        var currentCells = [];\n        this.rows.push({\n            cells: currentCells,\n            height: height\n        });\n        return {\n            onColumn: onNewColumnAccumulator.bind(this, this.rows.length, currentCells)()\n        };\n    };\n    ExcelXmlSerializingSession.prototype.onNewHeaderColumn = function (rowIndex, currentCells) {\n        var _this = this;\n        return function (column, index) {\n            var nameForCol = _this.extractHeaderValue(column);\n            var styleIds = _this.config.styleLinker(RowType.HEADER, rowIndex, index, nameForCol, column, undefined);\n            currentCells.push(_this.createCell((styleIds && styleIds.length > 0) ? styleIds[0] : undefined, 'String', nameForCol));\n        };\n    };\n    ExcelXmlSerializingSession.prototype.parse = function () {\n        // adding custom content might have made some rows wider than the grid, so add new columns\n        var longestRow = this.rows.reduce(function (a, b) { return Math.max(a, b.cells.length); }, 0);\n        while (this.cols.length < longestRow) {\n            this.cols.push(this.convertColumnToExcel(null, this.cols.length + 1));\n        }\n        var data = [{\n                name: this.config.sheetName,\n                table: {\n                    columns: this.cols,\n                    rows: this.rows\n                }\n            }];\n        return this.createExcel(data);\n    };\n    ExcelXmlSerializingSession.prototype.createExcel = function (data) {\n        return this.config.excelFactory.createExcel(this.excelStyles, data, []);\n    };\n    ExcelXmlSerializingSession.prototype.onNewBodyColumn = function (rowIndex, currentCells) {\n        var _this = this;\n        return function (column, index, node) {\n            var valueForCell = _this.extractRowCellValue(column, index, agGridCommunity.Constants.EXPORT_TYPE_EXCEL, node);\n            var styleIds = _this.config.styleLinker(RowType.BODY, rowIndex, index, valueForCell, column, node);\n            var excelStyleId;\n            if (styleIds && styleIds.length == 1) {\n                excelStyleId = styleIds[0];\n            }\n            else if (styleIds && styleIds.length > 1) {\n                var key = styleIds.join(\"-\");\n                if (!_this.mixedStyles[key]) {\n                    _this.addNewMixedStyle(styleIds);\n                }\n                excelStyleId = _this.mixedStyles[key].excelID;\n            }\n            currentCells.push(_this.createCell(excelStyleId, _this.getDataTypeForValue(valueForCell), valueForCell));\n        };\n    };\n    ExcelXmlSerializingSession.prototype.getDataTypeForValue = function (valueForCell) {\n        return agGridCommunity._.isNumeric(valueForCell) ? 'Number' : 'String';\n    };\n    ExcelXmlSerializingSession.prototype.addNewMixedStyle = function (styleIds) {\n        var _this = this;\n        this.mixedStyleCounter += 1;\n        var excelId = 'mixedStyle' + this.mixedStyleCounter;\n        var resultantStyle = {};\n        styleIds.forEach(function (styleId) {\n            _this.excelStyles.forEach(function (excelStyle) {\n                if (excelStyle.id === styleId) {\n                    agGridCommunity._.mergeDeep(resultantStyle, agGridCommunity._.deepCloneObject(excelStyle));\n                }\n            });\n        });\n        resultantStyle.id = excelId;\n        resultantStyle.name = excelId;\n        var key = styleIds.join(\"-\");\n        this.mixedStyles[key] = {\n            excelID: excelId,\n            key: key,\n            result: resultantStyle\n        };\n        this.excelStyles.push(resultantStyle);\n        this.stylesByIds[excelId] = resultantStyle;\n    };\n    ExcelXmlSerializingSession.prototype.styleExists = function (styleId) {\n        if (styleId == null) {\n            return false;\n        }\n        return this.stylesByIds[styleId];\n    };\n    ExcelXmlSerializingSession.prototype.createCell = function (styleId, type, value) {\n        var _this = this;\n        var actualStyle = styleId && this.stylesByIds[styleId];\n        var styleExists = actualStyle !== undefined;\n        function getType() {\n            if (styleExists &&\n                actualStyle.dataType) {\n                switch (actualStyle.dataType) {\n                    case 'string':\n                        return 'String';\n                    case 'number':\n                        return 'Number';\n                    case 'dateTime':\n                        return 'DateTime';\n                    case 'error':\n                        return 'Error';\n                    case 'boolean':\n                        return 'Boolean';\n                    default:\n                        console.warn(\"ag-grid: Unrecognized data type for excel export [\" + actualStyle.id + \".dataType=\" + actualStyle.dataType + \"]\");\n                }\n            }\n            return type;\n        }\n        var typeTransformed = getType();\n        var massageText = function (val) {\n            if (_this.config.suppressTextAsCDATA) {\n                return agGridCommunity._.escape(val);\n            }\n            var cdataStart = '<![CDATA[';\n            var cdataEnd = ']]>';\n            var cdataEndRegex = new RegExp(cdataEnd, \"g\");\n            return cdataStart\n                // CDATA sections are closed by the character sequence ']]>' and there is no\n                // way of escaping this, so if the text contains the offending sequence, emit\n                // multiple CDATA sections and split the characters between them.\n                + String(val).replace(cdataEndRegex, ']]' + cdataEnd + cdataStart + '>')\n                + cdataEnd;\n        };\n        var convertBoolean = function (val) {\n            if (!val || val === '0' || val === 'false') {\n                return '0';\n            }\n            return '1';\n        };\n        return {\n            styleId: styleExists ? styleId : undefined,\n            data: {\n                type: typeTransformed,\n                value: typeTransformed === 'String' ? massageText(value) :\n                    typeTransformed === 'Number' ? Number(value).valueOf() + '' :\n                        typeTransformed === 'Boolean' ? convertBoolean(value) :\n                            value\n            }\n        };\n    };\n    ExcelXmlSerializingSession.prototype.createMergedCell = function (styleId, type, value, numOfCells) {\n        return {\n            styleId: this.styleExists(styleId) ? styleId : undefined,\n            data: {\n                type: type,\n                value: value\n            },\n            mergeAcross: numOfCells\n        };\n    };\n    ExcelXmlSerializingSession.prototype.convertColumnToExcel = function (column, index) {\n        var columnWidth = this.config.columnWidth;\n        if (columnWidth) {\n            if (typeof columnWidth === 'number') {\n                return { width: columnWidth };\n            }\n            else {\n                return { width: columnWidth({ column: column, index: index }) };\n            }\n        }\n        if (column) {\n            var smallestUsefulWidth = 75;\n            return { width: Math.max(column.getActualWidth(), smallestUsefulWidth) };\n        }\n        return {};\n    };\n    return ExcelXmlSerializingSession;\n}(BaseGridSerializingSession));\n\nvar __extends$k = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar ExcelXlsxSerializingSession = /** @class */ (function (_super) {\n    __extends$k(ExcelXlsxSerializingSession, _super);\n    function ExcelXlsxSerializingSession() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stringList = [];\n        _this.stringMap = {};\n        return _this;\n    }\n    ExcelXlsxSerializingSession.prototype.onNewHeaderGroupingRow = function () {\n        var _this = this;\n        var currentCells = [];\n        this.rows.push({\n            cells: currentCells,\n            height: this.config.headerRowHeight\n        });\n        return {\n            onColumn: function (header, index, span) {\n                var styleIds = _this.config.styleLinker(RowType.HEADER_GROUPING, 1, index, \"grouping-\" + header, undefined, undefined);\n                currentCells.push(_this.createMergedCell((styleIds && styleIds.length > 0) ? styleIds[0] : undefined, 's', header, span));\n            }\n        };\n    };\n    ExcelXlsxSerializingSession.prototype.onNewHeaderColumn = function (rowIndex, currentCells) {\n        var _this = this;\n        return function (column, index, node) {\n            var nameForCol = _this.extractHeaderValue(column);\n            var styleIds = _this.config.styleLinker(RowType.HEADER, rowIndex, index, nameForCol, column, undefined);\n            currentCells.push(_this.createCell((styleIds && styleIds.length > 0) ? styleIds[0] : undefined, 's', nameForCol));\n        };\n    };\n    ExcelXlsxSerializingSession.prototype.createExcel = function (data) {\n        return this.config.excelFactory.createExcel(this.excelStyles, data, this.stringList);\n    };\n    ExcelXlsxSerializingSession.prototype.getDataTypeForValue = function (valueForCell) {\n        return agGridCommunity._.isNumeric(valueForCell) ? 'n' : 's';\n    };\n    ExcelXlsxSerializingSession.prototype.getStringPosition = function (val) {\n        var pos = this.stringMap[val];\n        if (pos === undefined) {\n            pos = this.stringMap[val] = this.stringList.length;\n            this.stringList.push(val);\n        }\n        return pos;\n    };\n    ExcelXlsxSerializingSession.prototype.createCell = function (styleId, type, value) {\n        var actualStyle = styleId && this.stylesByIds[styleId];\n        var styleExists = actualStyle !== undefined;\n        function getType() {\n            if (styleExists &&\n                actualStyle.dataType) {\n                switch (actualStyle.dataType) {\n                    case 'string':\n                        return 's';\n                    case 'number':\n                        return 'n';\n                    case 'dateTime':\n                        return 'd';\n                    case 'error':\n                        return 'e';\n                    case 'boolean':\n                        return 'b';\n                    default:\n                        console.warn(\"ag-grid: Unrecognized data type for excel export [\" + actualStyle.id + \".dataType=\" + actualStyle.dataType + \"]\");\n                }\n            }\n            return type;\n        }\n        var typeTransformed = getType();\n        return {\n            styleId: styleExists ? styleId : undefined,\n            data: {\n                type: typeTransformed,\n                value: typeTransformed === 's'\n                    ? this.getStringPosition(value == null ? '' : value).toString()\n                    : typeTransformed === 'n'\n                        ? Number(value).toString()\n                        : value\n            }\n        };\n    };\n    ExcelXlsxSerializingSession.prototype.createMergedCell = function (styleId, type, value, numOfCells) {\n        return {\n            styleId: this.styleExists(styleId) ? styleId : undefined,\n            data: {\n                type: type,\n                value: type === 's' ? this.getStringPosition(value == null ? '' : value).toString() : value\n            },\n            mergeAcross: numOfCells\n        };\n    };\n    return ExcelXlsxSerializingSession;\n}(ExcelXmlSerializingSession));\n\nvar __extends$l = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate$w = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ExcelCreator = /** @class */ (function (_super) {\n    __extends$l(ExcelCreator, _super);\n    function ExcelCreator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ExcelCreator.prototype.postConstruct = function () {\n        this.setBeans({\n            downloader: this.downloader,\n            gridSerializer: this.gridSerializer,\n            gridOptionsWrapper: this.gridOptionsWrapper\n        });\n    };\n    ExcelCreator.prototype.exportDataAsExcel = function (params) {\n        this.setExportMode(params ? params.exportMode : undefined);\n        return this.export(params);\n    };\n    ExcelCreator.prototype.getDataAsExcelXml = function (params) {\n        if (params && params.exportMode) {\n            delete params.exportMode;\n        }\n        this.setExportMode('xml');\n        return this.getData(params || {});\n    };\n    ExcelCreator.prototype.getMimeType = function () {\n        return this.getExportMode() === 'xml' ? 'application/vnd.ms-excel' : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\n    };\n    ExcelCreator.prototype.getDefaultFileName = function () {\n        return \"export.\" + this.getExportMode();\n    };\n    ExcelCreator.prototype.getDefaultFileExtension = function () {\n        return this.getExportMode();\n    };\n    ExcelCreator.prototype.createSerializingSession = function (params) {\n        var _a = this, columnController = _a.columnController, valueService = _a.valueService, gridOptionsWrapper = _a.gridOptionsWrapper;\n        var isXlsx = this.getExportMode() === 'xlsx';\n        var excelFactory = isXlsx ? this.xlsxFactory : this.excelXmlFactory;\n        var sheetName = 'ag-grid';\n        if (agGridCommunity._.exists(params.sheetName)) {\n            sheetName = agGridCommunity._.utf8_encode(params.sheetName.toString().substr(0, 31));\n        }\n        var config = __assign(__assign({}, params), { columnController: columnController,\n            valueService: valueService,\n            gridOptionsWrapper: gridOptionsWrapper, headerRowHeight: params.headerRowHeight || params.rowHeight, sheetName: sheetName,\n            excelFactory: excelFactory, baseExcelStyles: this.gridOptions.excelStyles || [], styleLinker: this.styleLinker.bind(this) });\n        return new (isXlsx ? ExcelXlsxSerializingSession : ExcelXmlSerializingSession)((config));\n    };\n    ExcelCreator.prototype.styleLinker = function (rowType, rowIndex, colIndex, value, column, node) {\n        if ((rowType === RowType.HEADER) || (rowType === RowType.HEADER_GROUPING)) {\n            return [\"header\"];\n        }\n        var styles = this.gridOptions.excelStyles;\n        if (!styles || !styles.length) {\n            return null;\n        }\n        var styleIds = styles.map(function (it) {\n            return it.id;\n        });\n        var applicableStyles = [];\n        this.stylingService.processAllCellClasses(column.getColDef(), {\n            value: value,\n            data: node.data,\n            node: node,\n            colDef: column.getColDef(),\n            rowIndex: rowIndex,\n            api: this.gridOptionsWrapper.getApi(),\n            columnApi: this.gridOptionsWrapper.getColumnApi(),\n            $scope: null,\n            context: this.gridOptionsWrapper.getContext()\n        }, function (className) {\n            if (styleIds.indexOf(className) > -1) {\n                applicableStyles.push(className);\n            }\n        });\n        return applicableStyles.sort(function (left, right) {\n            return (styleIds.indexOf(left) < styleIds.indexOf(right)) ? -1 : 1;\n        });\n    };\n    ExcelCreator.prototype.isExportSuppressed = function () {\n        return this.gridOptionsWrapper.isSuppressExcelExport();\n    };\n    ExcelCreator.prototype.setExportMode = function (exportMode) {\n        this.exportMode = exportMode;\n    };\n    ExcelCreator.prototype.getExportMode = function () {\n        return this.exportMode || 'xlsx';\n    };\n    ExcelCreator.prototype.packageFile = function (data) {\n        if (this.getExportMode() === 'xml') {\n            return _super.prototype.packageFile.call(this, data);\n        }\n        var _a = this, zipContainer = _a.zipContainer, xlsxFactory = _a.xlsxFactory;\n        zipContainer.addFolders([\n            'xl/worksheets/',\n            'xl/',\n            'xl/theme/',\n            'xl/_rels/',\n            'docProps/',\n            '_rels/'\n        ]);\n        zipContainer.addFile('xl/worksheets/sheet1.xml', data);\n        zipContainer.addFile('xl/workbook.xml', xlsxFactory.createWorkbook());\n        zipContainer.addFile('xl/styles.xml', xlsxFactory.createStylesheet());\n        zipContainer.addFile('xl/sharedStrings.xml', xlsxFactory.createSharedStrings());\n        zipContainer.addFile('xl/theme/theme1.xml', xlsxFactory.createTheme());\n        zipContainer.addFile('xl/_rels/workbook.xml.rels', xlsxFactory.createWorkbookRels());\n        zipContainer.addFile('docProps/core.xml', xlsxFactory.createCore());\n        zipContainer.addFile('[Content_Types].xml', xlsxFactory.createContentTypes());\n        zipContainer.addFile('_rels/.rels', xlsxFactory.createRels());\n        return zipContainer.getContent('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n    };\n    __decorate$w([\n        agGridCommunity.Autowired('excelXmlFactory')\n    ], ExcelCreator.prototype, \"excelXmlFactory\", void 0);\n    __decorate$w([\n        agGridCommunity.Autowired('excelXlsxFactory')\n    ], ExcelCreator.prototype, \"xlsxFactory\", void 0);\n    __decorate$w([\n        agGridCommunity.Autowired('columnController')\n    ], ExcelCreator.prototype, \"columnController\", void 0);\n    __decorate$w([\n        agGridCommunity.Autowired('valueService')\n    ], ExcelCreator.prototype, \"valueService\", void 0);\n    __decorate$w([\n        agGridCommunity.Autowired('gridOptions')\n    ], ExcelCreator.prototype, \"gridOptions\", void 0);\n    __decorate$w([\n        agGridCommunity.Autowired('stylingService')\n    ], ExcelCreator.prototype, \"stylingService\", void 0);\n    __decorate$w([\n        agGridCommunity.Autowired('downloader')\n    ], ExcelCreator.prototype, \"downloader\", void 0);\n    __decorate$w([\n        agGridCommunity.Autowired('gridSerializer')\n    ], ExcelCreator.prototype, \"gridSerializer\", void 0);\n    __decorate$w([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ExcelCreator.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$w([\n        agGridCommunity.Autowired('zipContainer')\n    ], ExcelCreator.prototype, \"zipContainer\", void 0);\n    __decorate$w([\n        agGridCommunity.PostConstruct\n    ], ExcelCreator.prototype, \"postConstruct\", null);\n    ExcelCreator = __decorate$w([\n        agGridCommunity.Bean('excelCreator')\n    ], ExcelCreator);\n    return ExcelCreator;\n}(BaseCreator));\n\nvar ExcelExportModule = {\n    moduleName: agGridCommunity.ModuleNames.ExcelExportModule,\n    beans: [\n        // beans in this module\n        ExcelCreator, ExcelXmlFactory, ExcelXlsxFactory,\n        // these beans are part of CSV Export module\n        GridSerializer, ZipContainer, XmlFactory, Downloader, CsvCreator\n    ],\n    dependantModules: [\n        CsvExportModule,\n        EnterpriseCoreModule\n    ]\n};\n\nvar __extends$m = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$x = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar EXPAND_STATE$1;\n(function (EXPAND_STATE) {\n    EXPAND_STATE[EXPAND_STATE[\"EXPANDED\"] = 0] = \"EXPANDED\";\n    EXPAND_STATE[EXPAND_STATE[\"COLLAPSED\"] = 1] = \"COLLAPSED\";\n    EXPAND_STATE[EXPAND_STATE[\"INDETERMINATE\"] = 2] = \"INDETERMINATE\";\n})(EXPAND_STATE$1 || (EXPAND_STATE$1 = {}));\nvar FiltersToolPanelHeaderPanel = /** @class */ (function (_super) {\n    __extends$m(FiltersToolPanelHeaderPanel, _super);\n    function FiltersToolPanelHeaderPanel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FiltersToolPanelHeaderPanel.prototype.preConstruct = function () {\n        var translate = this.gridOptionsWrapper.getLocaleTextFunc();\n        this.setTemplate(\"<div class=\\\"ag-filter-toolpanel-header ag-filter-header\\\" role=\\\"presentation\\\">\\n            <div ref=\\\"eExpand\\\"></div>\\n            <div class=\\\"ag-input-wrapper ag-filters-tool-panel-filter-wrapper\\\" ref=\\\"eFilterWrapper\\\" role=\\\"presentation\\\">\\n                <input ref=\\\"eFilterTextField\\\" type=\\\"text\\\" placeholder=\\\"\" + translate('searchOoo', 'Search...') + \"\\\">        \\n            </div>\\n        </div>\");\n    };\n    FiltersToolPanelHeaderPanel.prototype.postConstruct = function () {\n        this.createExpandIcons();\n        this.setExpandState(EXPAND_STATE$1.EXPANDED);\n        this.addDestroyableEventListener(this.eExpand, 'click', this.onExpandClicked.bind(this));\n        this.addDestroyableEventListener(this.eSearchTextField, 'input', this.onSearchTextChanged.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED, this.showOrHideOptions.bind(this));\n    };\n    FiltersToolPanelHeaderPanel.prototype.init = function (params) {\n        this.params = params;\n        if (this.columnController.isReady()) {\n            this.showOrHideOptions();\n        }\n    };\n    FiltersToolPanelHeaderPanel.prototype.createExpandIcons = function () {\n        this.eExpand.appendChild(this.eExpandChecked = agGridCommunity._.createIconNoSpan('columnSelectOpen', this.gridOptionsWrapper));\n        this.eExpand.appendChild(this.eExpandUnchecked = agGridCommunity._.createIconNoSpan('columnSelectClosed', this.gridOptionsWrapper));\n        this.eExpand.appendChild(this.eExpandIndeterminate = agGridCommunity._.createIconNoSpan('columnSelectIndeterminate', this.gridOptionsWrapper));\n    };\n    // we only show expand / collapse if we are showing filters\n    FiltersToolPanelHeaderPanel.prototype.showOrHideOptions = function () {\n        var showFilterSearch = !this.params.suppressFilterSearch;\n        var showExpand = !this.params.suppressExpandAll;\n        var isFilterGroupPresent = function (col) { return col.getOriginalParent() && col.isFilterAllowed(); };\n        var filterGroupsPresent = this.columnController.getAllGridColumns().some(isFilterGroupPresent);\n        agGridCommunity._.setDisplayed(this.eFilterWrapper, showFilterSearch);\n        agGridCommunity._.setDisplayed(this.eExpand, showExpand && filterGroupsPresent);\n    };\n    FiltersToolPanelHeaderPanel.prototype.onSearchTextChanged = function () {\n        var _this = this;\n        if (!this.onSearchTextChangedDebounced) {\n            this.onSearchTextChangedDebounced = agGridCommunity._.debounce(function () {\n                _this.dispatchEvent({ type: 'searchChanged', searchText: _this.eSearchTextField.value });\n            }, 300);\n        }\n        this.onSearchTextChangedDebounced();\n    };\n    FiltersToolPanelHeaderPanel.prototype.onExpandClicked = function () {\n        var event = this.currentExpandState === EXPAND_STATE$1.EXPANDED ? { type: 'collapseAll' } : { type: 'expandAll' };\n        this.dispatchEvent(event);\n    };\n    FiltersToolPanelHeaderPanel.prototype.setExpandState = function (state) {\n        this.currentExpandState = state;\n        agGridCommunity._.setDisplayed(this.eExpandChecked, this.currentExpandState === EXPAND_STATE$1.EXPANDED);\n        agGridCommunity._.setDisplayed(this.eExpandUnchecked, this.currentExpandState === EXPAND_STATE$1.COLLAPSED);\n        agGridCommunity._.setDisplayed(this.eExpandIndeterminate, this.currentExpandState === EXPAND_STATE$1.INDETERMINATE);\n    };\n    __decorate$x([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], FiltersToolPanelHeaderPanel.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$x([\n        agGridCommunity.Autowired('columnController')\n    ], FiltersToolPanelHeaderPanel.prototype, \"columnController\", void 0);\n    __decorate$x([\n        agGridCommunity.Autowired('eventService')\n    ], FiltersToolPanelHeaderPanel.prototype, \"eventService\", void 0);\n    __decorate$x([\n        agGridCommunity.RefSelector('eExpand')\n    ], FiltersToolPanelHeaderPanel.prototype, \"eExpand\", void 0);\n    __decorate$x([\n        agGridCommunity.RefSelector('eFilterWrapper')\n    ], FiltersToolPanelHeaderPanel.prototype, \"eFilterWrapper\", void 0);\n    __decorate$x([\n        agGridCommunity.RefSelector('eFilterTextField')\n    ], FiltersToolPanelHeaderPanel.prototype, \"eSearchTextField\", void 0);\n    __decorate$x([\n        agGridCommunity.PreConstruct\n    ], FiltersToolPanelHeaderPanel.prototype, \"preConstruct\", null);\n    __decorate$x([\n        agGridCommunity.PostConstruct\n    ], FiltersToolPanelHeaderPanel.prototype, \"postConstruct\", null);\n    return FiltersToolPanelHeaderPanel;\n}(agGridCommunity.Component));\n\nvar __extends$n = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$y = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ToolPanelFilterComp = /** @class */ (function (_super) {\n    __extends$n(ToolPanelFilterComp, _super);\n    function ToolPanelFilterComp(hideHeader) {\n        if (hideHeader === void 0) { hideHeader = false; }\n        var _this = _super.call(this, ToolPanelFilterComp.TEMPLATE) || this;\n        _this.expanded = false;\n        _this.hideHeader = hideHeader;\n        return _this;\n    }\n    ToolPanelFilterComp.prototype.postConstruct = function () {\n        this.eExpandChecked = agGridCommunity._.createIconNoSpan('columnSelectOpen', this.gridOptionsWrapper);\n        this.eExpandUnchecked = agGridCommunity._.createIconNoSpan('columnSelectClosed', this.gridOptionsWrapper);\n        this.eExpand.appendChild(this.eExpandChecked);\n        this.eExpand.appendChild(this.eExpandUnchecked);\n    };\n    ToolPanelFilterComp.prototype.setColumn = function (column) {\n        this.column = column;\n        this.eFilterName.innerText = this.columnController.getDisplayNameForColumn(this.column, 'header', false);\n        this.addDestroyableEventListener(this.eFilterToolPanelHeader, 'click', this.toggleExpanded.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_FILTER_OPENED, this.onFilterOpened.bind(this));\n        this.addInIcon('filter', this.eFilterIcon, this.column);\n        agGridCommunity._.addOrRemoveCssClass(this.eFilterIcon, 'ag-hidden', !this.isFilterActive());\n        agGridCommunity._.addCssClass(this.eExpandChecked, 'ag-hidden');\n        if (this.hideHeader) {\n            agGridCommunity._.addOrRemoveCssClass(this.eFilterToolPanelHeader, 'ag-hidden', true);\n        }\n        this.addDestroyableEventListener(this.column, agGridCommunity.Column.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));\n    };\n    ToolPanelFilterComp.prototype.getColumn = function () {\n        return this.column;\n    };\n    ToolPanelFilterComp.prototype.getColumnFilterName = function () {\n        return this.columnController.getDisplayNameForColumn(this.column, 'header', false);\n    };\n    ToolPanelFilterComp.prototype.addInIcon = function (iconName, eParent, column) {\n        if (eParent == null) {\n            return;\n        }\n        var eIcon = agGridCommunity._.createIconNoSpan(iconName, this.gridOptionsWrapper, column);\n        eParent.appendChild(eIcon);\n    };\n    ToolPanelFilterComp.prototype.isFilterActive = function () {\n        return this.filterManager.isFilterActive(this.column);\n    };\n    ToolPanelFilterComp.prototype.onFilterChanged = function () {\n        agGridCommunity._.addOrRemoveCssClass(this.eFilterIcon, 'ag-hidden', !this.isFilterActive());\n        this.dispatchEvent({ type: agGridCommunity.Column.EVENT_FILTER_CHANGED });\n    };\n    ToolPanelFilterComp.prototype.toggleExpanded = function () {\n        this.expanded ? this.collapse() : this.expand();\n    };\n    ToolPanelFilterComp.prototype.expand = function () {\n        var _this = this;\n        if (this.expanded)\n            return;\n        this.expanded = true;\n        var container = agGridCommunity._.loadTemplate(\"<div class=\\\"ag-filter-air\\\" />\");\n        var filterPromise = this.filterManager.getOrCreateFilterWrapper(this.column, 'TOOLBAR').filterPromise;\n        if (filterPromise) {\n            filterPromise.then(function (filter) {\n                _this.underlyingFilter = filter;\n                container.appendChild(filter.getGui());\n                _this.agFilterToolPanelBody.appendChild(container);\n                if (filter.afterGuiAttached) {\n                    filter.afterGuiAttached({});\n                }\n            });\n        }\n        agGridCommunity._.setDisplayed(this.eExpandChecked, true);\n        agGridCommunity._.setDisplayed(this.eExpandUnchecked, false);\n    };\n    ToolPanelFilterComp.prototype.collapse = function () {\n        if (!this.expanded)\n            return;\n        this.expanded = false;\n        this.agFilterToolPanelBody.removeChild(this.agFilterToolPanelBody.children[0]);\n        agGridCommunity._.setDisplayed(this.eExpandChecked, false);\n        agGridCommunity._.setDisplayed(this.eExpandUnchecked, true);\n    };\n    ToolPanelFilterComp.prototype.refreshFilter = function () {\n        var filter = this.underlyingFilter;\n        if (!filter)\n            return;\n        // set filters should be updated when the filter has been changed elsewhere, i.e. via api. Note that we can't\n        // use 'afterGuiAttached' to refresh the virtual list as it also focuses on the mini filter which changes the\n        // scroll position in the filter list panel\n        var isSetFilter = filter.refreshVirtualList;\n        if (isSetFilter) {\n            filter.refreshVirtualList();\n        }\n    };\n    ToolPanelFilterComp.prototype.onFilterOpened = function (event) {\n        if (event.source !== 'COLUMN_MENU') {\n            return;\n        }\n        if (event.column !== this.column) {\n            return;\n        }\n        if (!this.expanded) {\n            return;\n        }\n        this.collapse();\n    };\n    ToolPanelFilterComp.TEMPLATE = \"<div class=\\\"ag-filter-toolpanel-instance\\\" >\\n            <div class=\\\"ag-filter-toolpanel-header ag-header-cell-label\\\" ref=\\\"eFilterToolPanelHeader\\\">\\n                <div ref=\\\"eExpand\\\"></div>\\n                <span ref=\\\"eFilterName\\\" class=\\\"ag-header-cell-text\\\"></span>\\n                <span ref=\\\"eFilterIcon\\\" class=\\\"ag-header-icon ag-filter-icon\\\" aria-hidden=\\\"true\\\"></span>\\n            </div>\\n            <div class=\\\"ag-filter-toolpanel-body ag-filter\\\" ref=\\\"agFilterToolPanelBody\\\"/></div>\";\n    __decorate$y([\n        agGridCommunity.RefSelector('eFilterToolPanelHeader')\n    ], ToolPanelFilterComp.prototype, \"eFilterToolPanelHeader\", void 0);\n    __decorate$y([\n        agGridCommunity.RefSelector('eFilterName')\n    ], ToolPanelFilterComp.prototype, \"eFilterName\", void 0);\n    __decorate$y([\n        agGridCommunity.RefSelector('agFilterToolPanelBody')\n    ], ToolPanelFilterComp.prototype, \"agFilterToolPanelBody\", void 0);\n    __decorate$y([\n        agGridCommunity.RefSelector('eFilterIcon')\n    ], ToolPanelFilterComp.prototype, \"eFilterIcon\", void 0);\n    __decorate$y([\n        agGridCommunity.RefSelector('eExpand')\n    ], ToolPanelFilterComp.prototype, \"eExpand\", void 0);\n    __decorate$y([\n        agGridCommunity.Autowired('gridApi')\n    ], ToolPanelFilterComp.prototype, \"gridApi\", void 0);\n    __decorate$y([\n        agGridCommunity.Autowired('filterManager')\n    ], ToolPanelFilterComp.prototype, \"filterManager\", void 0);\n    __decorate$y([\n        agGridCommunity.Autowired('eventService')\n    ], ToolPanelFilterComp.prototype, \"eventService\", void 0);\n    __decorate$y([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ToolPanelFilterComp.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$y([\n        agGridCommunity.Autowired('columnController')\n    ], ToolPanelFilterComp.prototype, \"columnController\", void 0);\n    __decorate$y([\n        agGridCommunity.PostConstruct\n    ], ToolPanelFilterComp.prototype, \"postConstruct\", null);\n    return ToolPanelFilterComp;\n}(agGridCommunity.Component));\n\nvar __extends$o = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$z = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ToolPanelFilterGroupComp = /** @class */ (function (_super) {\n    __extends$o(ToolPanelFilterGroupComp, _super);\n    function ToolPanelFilterGroupComp(columnGroup, childFilterComps, expandedCallback, depth) {\n        var _this = _super.call(this) || this;\n        _this.columnGroup = columnGroup;\n        _this.childFilterComps = childFilterComps;\n        _this.depth = depth;\n        _this.expandedCallback = expandedCallback;\n        return _this;\n    }\n    ToolPanelFilterGroupComp.prototype.preConstruct = function () {\n        this.setTemplate(ToolPanelFilterGroupComp.TEMPLATE);\n    };\n    ToolPanelFilterGroupComp.prototype.init = function () {\n        var _this = this;\n        this.setGroupTitle();\n        this.filterGroupComp.setAlignItems('stretch');\n        agGridCommunity._.addCssClass(this.filterGroupComp.getGui(), \"ag-level-\" + this.depth);\n        this.childFilterComps.forEach(function (filterComp) { return _this.filterGroupComp.addItem(filterComp); });\n        if (!this.isColumnGroup()) {\n            this.addTopLevelColumnGroupExpandListener();\n        }\n        else {\n            this.addDestroyableEventListener(this.filterGroupComp, 'expanded', function () {\n                _this.expandedCallback();\n            });\n            this.addDestroyableEventListener(this.filterGroupComp, 'collapsed', function () {\n                _this.expandedCallback();\n            });\n        }\n        this.addFilterChangedListeners();\n    };\n    ToolPanelFilterGroupComp.prototype.refreshFilters = function () {\n        this.childFilterComps.forEach(function (filterComp) {\n            if (filterComp instanceof ToolPanelFilterGroupComp) {\n                filterComp.refreshFilters();\n            }\n            else {\n                filterComp.refreshFilter();\n            }\n        });\n    };\n    ToolPanelFilterGroupComp.prototype.isColumnGroup = function () {\n        return this.columnGroup instanceof agGridCommunity.OriginalColumnGroup;\n    };\n    ToolPanelFilterGroupComp.prototype.isExpanded = function () {\n        return this.filterGroupComp.isExpanded();\n    };\n    ToolPanelFilterGroupComp.prototype.getChildren = function () {\n        return this.childFilterComps;\n    };\n    ToolPanelFilterGroupComp.prototype.getFilterGroupName = function () {\n        return this.filterGroupName ? this.filterGroupName : '';\n    };\n    ToolPanelFilterGroupComp.prototype.getFilterGroupId = function () {\n        return this.columnGroup.getId();\n    };\n    ToolPanelFilterGroupComp.prototype.hideGroupItem = function (hide, index) {\n        this.filterGroupComp.hideItem(hide, index);\n    };\n    ToolPanelFilterGroupComp.prototype.hideGroup = function (hide) {\n        agGridCommunity._.addOrRemoveCssClass(this.getGui(), 'ag-hidden', hide);\n    };\n    ToolPanelFilterGroupComp.prototype.addTopLevelColumnGroupExpandListener = function () {\n        var _this = this;\n        this.addDestroyableEventListener(this.filterGroupComp, 'expanded', function () {\n            _this.childFilterComps.forEach(function (filterComp) {\n                // also need to refresh the virtual list on set filters as the filter may have been updated elsewhere\n                if (filterComp instanceof ToolPanelFilterComp) {\n                    filterComp.expand();\n                    filterComp.refreshFilter();\n                }\n                else {\n                    filterComp.refreshFilters();\n                }\n            });\n        });\n    };\n    ToolPanelFilterGroupComp.prototype.addFilterChangedListeners = function () {\n        var _this = this;\n        if (this.columnGroup instanceof agGridCommunity.OriginalColumnGroup) {\n            var group_1 = this.columnGroup;\n            var anyChildFiltersActive_1 = function () { return group_1.getLeafColumns().some(function (col) { return col.isFilterActive(); }); };\n            group_1.getLeafColumns().forEach(function (column) {\n                _this.addDestroyableEventListener(column, agGridCommunity.Column.EVENT_FILTER_CHANGED, function () {\n                    agGridCommunity._.addOrRemoveCssClass(_this.filterGroupComp.getGui(), 'ag-has-filter', anyChildFiltersActive_1());\n                });\n            });\n        }\n        else {\n            var column_1 = this.columnGroup;\n            this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_FILTER_OPENED, this.onFilterOpened.bind(this));\n            this.addDestroyableEventListener(column_1, agGridCommunity.Column.EVENT_FILTER_CHANGED, function () {\n                agGridCommunity._.addOrRemoveCssClass(_this.filterGroupComp.getGui(), 'ag-has-filter', column_1.isFilterActive());\n            });\n        }\n    };\n    ToolPanelFilterGroupComp.prototype.onFilterOpened = function (event) {\n        // when a filter is opened elsewhere, i.e. column menu we close the filter comp so we also need to collapse\n        // the column group. This approach means we don't need to try and sync filter models on the same column.\n        if (event.source !== 'COLUMN_MENU') {\n            return;\n        }\n        if (event.column !== this.columnGroup) {\n            return;\n        }\n        if (!this.isExpanded()) {\n            return;\n        }\n        this.collapse();\n    };\n    ToolPanelFilterGroupComp.prototype.expand = function () {\n        this.filterGroupComp.toggleGroupExpand(true);\n    };\n    ToolPanelFilterGroupComp.prototype.collapse = function () {\n        this.filterGroupComp.toggleGroupExpand(false);\n    };\n    ToolPanelFilterGroupComp.prototype.setGroupTitle = function () {\n        this.filterGroupName = (this.columnGroup instanceof agGridCommunity.OriginalColumnGroup) ?\n            this.getColumnGroupName(this.columnGroup) : this.getColumnName(this.columnGroup);\n        this.filterGroupComp.setTitle(this.filterGroupName);\n    };\n    ToolPanelFilterGroupComp.prototype.getColumnGroupName = function (columnGroup) {\n        return this.columnController.getDisplayNameForOriginalColumnGroup(null, columnGroup, 'toolPanel');\n    };\n    ToolPanelFilterGroupComp.prototype.getColumnName = function (column) {\n        return this.columnController.getDisplayNameForColumn(column, 'header', false);\n    };\n    ToolPanelFilterGroupComp.prototype.destroyFilters = function () {\n        this.childFilterComps.forEach(function (filterComp) { return filterComp.destroy(); });\n        this.childFilterComps.length = 0;\n        agGridCommunity._.clearElement(this.getGui());\n    };\n    ToolPanelFilterGroupComp.prototype.destroy = function () {\n        this.destroyFilters();\n        _super.prototype.destroy.call(this);\n    };\n    ToolPanelFilterGroupComp.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"filterGroupComp\\\"></ag-group-component>\\n         </div>\";\n    __decorate$z([\n        agGridCommunity.RefSelector('filterGroupComp')\n    ], ToolPanelFilterGroupComp.prototype, \"filterGroupComp\", void 0);\n    __decorate$z([\n        agGridCommunity.Autowired('gridApi')\n    ], ToolPanelFilterGroupComp.prototype, \"gridApi\", void 0);\n    __decorate$z([\n        agGridCommunity.Autowired('filterManager')\n    ], ToolPanelFilterGroupComp.prototype, \"filterManager\", void 0);\n    __decorate$z([\n        agGridCommunity.Autowired('eventService')\n    ], ToolPanelFilterGroupComp.prototype, \"eventService\", void 0);\n    __decorate$z([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ToolPanelFilterGroupComp.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$z([\n        agGridCommunity.Autowired('columnController')\n    ], ToolPanelFilterGroupComp.prototype, \"columnController\", void 0);\n    __decorate$z([\n        agGridCommunity.PreConstruct\n    ], ToolPanelFilterGroupComp.prototype, \"preConstruct\", null);\n    __decorate$z([\n        agGridCommunity.PostConstruct\n    ], ToolPanelFilterGroupComp.prototype, \"init\", null);\n    return ToolPanelFilterGroupComp;\n}(agGridCommunity.Component));\n\nvar __extends$p = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$A = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar FiltersToolPanelListPanel = /** @class */ (function (_super) {\n    __extends$p(FiltersToolPanelListPanel, _super);\n    function FiltersToolPanelListPanel() {\n        var _this = _super.call(this, FiltersToolPanelListPanel.TEMPLATE) || this;\n        _this.initialised = false;\n        _this.filterGroupComps = [];\n        return _this;\n    }\n    FiltersToolPanelListPanel.prototype.init = function (params) {\n        var _this = this;\n        this.initialised = true;\n        var defaultParams = {\n            suppressExpandAll: false,\n            suppressFilterSearch: false,\n            suppressSyncLayoutWithGrid: false,\n            api: this.gridApi\n        };\n        agGridCommunity._.mergeDeep(defaultParams, params);\n        this.params = defaultParams;\n        if (!this.params.suppressSyncLayoutWithGrid) {\n            this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_MOVED, function () { return _this.onColumnsChanged(); });\n        }\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED, function () { return _this.onColumnsChanged(); });\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED, function (event) {\n            // when re-entering the filters tool panel we need to refresh the virtual lists in the set filters in case\n            // filters have been changed elsewhere, i.e. via an api call.\n            if (event.source === 'filters') {\n                _this.refreshFilters();\n            }\n        });\n        if (this.columnController.isReady()) {\n            this.onColumnsChanged();\n        }\n    };\n    FiltersToolPanelListPanel.prototype.onColumnsChanged = function () {\n        var pivotModeActive = this.columnController.isPivotMode();\n        var shouldSyncColumnLayoutWithGrid = !this.params.suppressSyncLayoutWithGrid && !pivotModeActive;\n        shouldSyncColumnLayoutWithGrid ? this.syncFilterLayout() : this.buildTreeFromProvidedColumnDefs();\n    };\n    FiltersToolPanelListPanel.prototype.syncFilterLayout = function () {\n        this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this));\n    };\n    FiltersToolPanelListPanel.prototype.buildTreeFromProvidedColumnDefs = function () {\n        var _this = this;\n        this.destroyFilters();\n        var columnTree = this.columnController.getPrimaryColumnTree();\n        this.filterGroupComps = this.recursivelyAddComps(columnTree, 0);\n        var len = this.filterGroupComps.length;\n        if (len) {\n            this.filterGroupComps.forEach(function (comp) { return _this.appendChild(comp); });\n            this.setFirstAndLastVisible(0, len - 1);\n        }\n        // perform search if searchFilterText exists\n        if (agGridCommunity._.exists(this.searchFilterText)) {\n            this.searchFilters(this.searchFilterText);\n        }\n        // notify header of expand\n        this.fireExpandedEvent();\n    };\n    FiltersToolPanelListPanel.prototype.setFiltersLayout = function (colDefs) {\n        var _this = this;\n        this.destroyFilters();\n        var columnTree = this.toolPanelColDefService.createColumnTree(colDefs);\n        this.filterGroupComps = this.recursivelyAddComps(columnTree, 0);\n        var len = this.filterGroupComps.length;\n        if (len) {\n            this.filterGroupComps.forEach(function (comp) { return _this.appendChild(comp); });\n            this.setFirstAndLastVisible(0, len - 1);\n        }\n        // perform search if searchFilterText exists\n        if (agGridCommunity._.exists(this.searchFilterText)) {\n            this.searchFilters(this.searchFilterText);\n        }\n        // notify header of expand\n        this.fireExpandedEvent();\n    };\n    FiltersToolPanelListPanel.prototype.recursivelyAddComps = function (tree, depth) {\n        var _this = this;\n        return agGridCommunity._.flatten(tree.map(function (child) {\n            if (child instanceof agGridCommunity.OriginalColumnGroup) {\n                return agGridCommunity._.flatten(_this.recursivelyAddFilterGroupComps(child, depth));\n            }\n            var column = child;\n            if (!_this.shouldDisplayFilter(column)) {\n                return [];\n            }\n            var hideFilterCompHeader = depth === 0;\n            var filterComp = new ToolPanelFilterComp(hideFilterCompHeader);\n            _this.getContext().wireBean(filterComp);\n            filterComp.setColumn(column);\n            if (depth > 0) {\n                return filterComp;\n            }\n            var filterGroupComp = new ToolPanelFilterGroupComp(column, [filterComp], _this.onGroupExpanded.bind(_this), depth);\n            _this.getContext().wireBean(filterGroupComp);\n            filterGroupComp.collapse();\n            return filterGroupComp;\n        }));\n    };\n    FiltersToolPanelListPanel.prototype.recursivelyAddFilterGroupComps = function (columnGroup, depth) {\n        if (!this.filtersExistInChildren(columnGroup.getChildren()))\n            return;\n        if (columnGroup.getColGroupDef() && columnGroup.getColGroupDef().suppressFiltersToolPanel) {\n            return [];\n        }\n        var newDepth = columnGroup.isPadding() ? depth : depth + 1;\n        var childFilterComps = agGridCommunity._.flatten(this.recursivelyAddComps(columnGroup.getChildren(), newDepth));\n        if (columnGroup.isPadding())\n            return childFilterComps;\n        var filterGroupComp = new ToolPanelFilterGroupComp(columnGroup, childFilterComps, this.onGroupExpanded.bind(this), depth);\n        this.getContext().wireBean(filterGroupComp);\n        return [filterGroupComp];\n    };\n    FiltersToolPanelListPanel.prototype.filtersExistInChildren = function (tree) {\n        var _this = this;\n        return tree.some(function (child) {\n            if (child instanceof agGridCommunity.OriginalColumnGroup) {\n                return _this.filtersExistInChildren(child.getChildren());\n            }\n            return _this.shouldDisplayFilter(child);\n        });\n    };\n    FiltersToolPanelListPanel.prototype.shouldDisplayFilter = function (column) {\n        var suppressFiltersToolPanel = column.getColDef() && column.getColDef().suppressFiltersToolPanel;\n        return column.isFilterAllowed() && !suppressFiltersToolPanel;\n    };\n    // we don't support refreshing, but must implement because it's on the tool panel interface\n    FiltersToolPanelListPanel.prototype.refresh = function () { };\n    // lazy initialise the panel\n    FiltersToolPanelListPanel.prototype.setVisible = function (visible) {\n        _super.prototype.setDisplayed.call(this, visible);\n        if (visible && !this.initialised) {\n            this.init(this.params);\n        }\n    };\n    FiltersToolPanelListPanel.prototype.expandFilterGroups = function (expand, groupIds) {\n        var updatedGroupIds = [];\n        var updateGroupExpandState = function (filterGroup) {\n            var groupId = filterGroup.getFilterGroupId();\n            var shouldExpandOrCollapse = !groupIds || agGridCommunity._.includes(groupIds, groupId);\n            if (shouldExpandOrCollapse) {\n                // don't expand 'column groups', i.e. top level columns wrapped in a group\n                if (expand && filterGroup.isColumnGroup()) {\n                    filterGroup.expand();\n                }\n                else {\n                    filterGroup.collapse();\n                }\n                updatedGroupIds.push(groupId);\n            }\n            // recursively look for more groups to expand / collapse\n            filterGroup.getChildren().forEach(function (child) {\n                if (child instanceof ToolPanelFilterGroupComp) {\n                    updateGroupExpandState(child);\n                }\n            });\n        };\n        this.filterGroupComps.forEach(updateGroupExpandState);\n        // update header expand / collapse icon\n        this.onGroupExpanded();\n        if (groupIds) {\n            var unrecognisedGroupIds = groupIds.filter(function (groupId) { return updatedGroupIds.indexOf(groupId) < 0; });\n            if (unrecognisedGroupIds.length > 0) {\n                console.warn('ag-Grid: unable to find groups for these supplied groupIds:', unrecognisedGroupIds);\n            }\n        }\n    };\n    FiltersToolPanelListPanel.prototype.expandFilters = function (expand, colIds) {\n        var updatedColIds = [];\n        var updateGroupExpandState = function (filterComp) {\n            if (filterComp instanceof ToolPanelFilterGroupComp) {\n                var anyChildrenChanged_1 = false;\n                filterComp.getChildren().forEach(function (child) {\n                    var childUpdated = updateGroupExpandState(child);\n                    if (childUpdated) {\n                        if (expand) {\n                            filterComp.expand();\n                            anyChildrenChanged_1 = true;\n                        }\n                        else if (!filterComp.isColumnGroup()) {\n                            // we only collapse columns wrapped in groups\n                            filterComp.collapse();\n                        }\n                    }\n                });\n                return anyChildrenChanged_1;\n            }\n            var colId = filterComp.getColumn().getColId();\n            var updateFilterExpandState = !colIds || agGridCommunity._.includes(colIds, colId);\n            if (updateFilterExpandState) {\n                expand ? filterComp.expand() : filterComp.collapse();\n                updatedColIds.push(colId);\n            }\n            return updateFilterExpandState;\n        };\n        this.filterGroupComps.forEach(updateGroupExpandState);\n        // update header expand / collapse icon\n        this.onGroupExpanded();\n        if (colIds) {\n            var unrecognisedColIds = colIds.filter(function (colId) { return updatedColIds.indexOf(colId) < 0; });\n            if (unrecognisedColIds.length > 0) {\n                console.warn('ag-Grid: unable to find columns for these supplied colIds:', unrecognisedColIds);\n            }\n        }\n    };\n    FiltersToolPanelListPanel.prototype.onGroupExpanded = function () {\n        this.fireExpandedEvent();\n    };\n    FiltersToolPanelListPanel.prototype.fireExpandedEvent = function () {\n        var expandedCount = 0;\n        var notExpandedCount = 0;\n        var updateExpandCounts = function (filterGroup) {\n            if (!filterGroup.isColumnGroup())\n                return;\n            filterGroup.isExpanded() ? expandedCount++ : notExpandedCount++;\n            filterGroup.getChildren().forEach(function (child) {\n                if (child instanceof ToolPanelFilterGroupComp) {\n                    updateExpandCounts(child);\n                }\n            });\n        };\n        this.filterGroupComps.forEach(updateExpandCounts);\n        var state;\n        if (expandedCount > 0 && notExpandedCount > 0) {\n            state = EXPAND_STATE$1.INDETERMINATE;\n        }\n        else if (notExpandedCount > 0) {\n            state = EXPAND_STATE$1.COLLAPSED;\n        }\n        else {\n            state = EXPAND_STATE$1.EXPANDED;\n        }\n        this.dispatchEvent({ type: 'groupExpanded', state: state });\n    };\n    FiltersToolPanelListPanel.prototype.performFilterSearch = function (searchText) {\n        this.searchFilterText = searchText;\n        this.searchFilters(searchText);\n    };\n    FiltersToolPanelListPanel.prototype.searchFilters = function (searchFilter) {\n        var passesFilter = function (groupName) {\n            return !agGridCommunity._.exists(searchFilter) || groupName.toLowerCase().indexOf(searchFilter) !== -1;\n        };\n        var recursivelySearch = function (filterItem, parentPasses) {\n            if (!(filterItem instanceof ToolPanelFilterGroupComp)) {\n                return passesFilter(filterItem.getColumnFilterName());\n            }\n            var children = filterItem.getChildren();\n            var groupNamePasses = passesFilter(filterItem.getFilterGroupName());\n            // if group or parent already passed - ensure this group and all children are visible\n            var alreadyPassed = parentPasses || groupNamePasses;\n            if (alreadyPassed) {\n                // ensure group visible\n                filterItem.hideGroup(false);\n                // ensure all children are visible\n                for (var i = 0; i < children.length; i++) {\n                    recursivelySearch(children[i], alreadyPassed);\n                    filterItem.hideGroupItem(false, i);\n                }\n                return true;\n            }\n            // hide group item filters\n            var anyChildPasses = false;\n            children.forEach(function (child, index) {\n                var childPasses = recursivelySearch(child, parentPasses);\n                filterItem.hideGroupItem(!childPasses, index);\n                if (childPasses)\n                    anyChildPasses = true;\n            });\n            // hide group if no children pass\n            filterItem.hideGroup(!anyChildPasses);\n            return anyChildPasses;\n        };\n        var firstVisible;\n        var lastVisible;\n        this.filterGroupComps.forEach(function (filterGroup, idx) {\n            recursivelySearch(filterGroup, false);\n            if (firstVisible === undefined) {\n                if (!agGridCommunity._.containsClass(filterGroup.getGui(), 'ag-hidden')) {\n                    firstVisible = idx;\n                    lastVisible = idx;\n                }\n            }\n            else if (!agGridCommunity._.containsClass(filterGroup.getGui(), 'ag-hidden') && lastVisible !== idx) {\n                lastVisible = idx;\n            }\n        });\n        this.setFirstAndLastVisible(firstVisible, lastVisible);\n    };\n    FiltersToolPanelListPanel.prototype.setFirstAndLastVisible = function (firstIdx, lastIdx) {\n        this.filterGroupComps.forEach(function (filterGroup, idx) {\n            agGridCommunity._.removeCssClass(filterGroup.getGui(), 'ag-first-group-visible');\n            agGridCommunity._.removeCssClass(filterGroup.getGui(), 'ag-last-group-visible');\n            if (idx === firstIdx) {\n                agGridCommunity._.addCssClass(filterGroup.getGui(), 'ag-first-group-visible');\n            }\n            if (idx === lastIdx) {\n                agGridCommunity._.addCssClass(filterGroup.getGui(), 'ag-last-group-visible');\n            }\n        });\n    };\n    FiltersToolPanelListPanel.prototype.refreshFilters = function () {\n        this.filterGroupComps.forEach(function (filterGroupComp) { return filterGroupComp.refreshFilters(); });\n    };\n    FiltersToolPanelListPanel.prototype.destroyFilters = function () {\n        this.filterGroupComps.forEach(function (filterComp) { return filterComp.destroy(); });\n        this.filterGroupComps.length = 0;\n        agGridCommunity._.clearElement(this.getGui());\n    };\n    FiltersToolPanelListPanel.prototype.destroy = function () {\n        this.destroyFilters();\n        _super.prototype.destroy.call(this);\n    };\n    FiltersToolPanelListPanel.TEMPLATE = \"<div class=\\\"ag-filter-list-panel\\\"></div>\";\n    __decorate$A([\n        agGridCommunity.Autowired(\"gridApi\")\n    ], FiltersToolPanelListPanel.prototype, \"gridApi\", void 0);\n    __decorate$A([\n        agGridCommunity.Autowired(\"eventService\")\n    ], FiltersToolPanelListPanel.prototype, \"eventService\", void 0);\n    __decorate$A([\n        agGridCommunity.Autowired('toolPanelColDefService')\n    ], FiltersToolPanelListPanel.prototype, \"toolPanelColDefService\", void 0);\n    __decorate$A([\n        agGridCommunity.Autowired('columnController')\n    ], FiltersToolPanelListPanel.prototype, \"columnController\", void 0);\n    return FiltersToolPanelListPanel;\n}(agGridCommunity.Component));\n\nvar __extends$q = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$B = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar FiltersToolPanel = /** @class */ (function (_super) {\n    __extends$q(FiltersToolPanel, _super);\n    function FiltersToolPanel() {\n        var _this = _super.call(this, FiltersToolPanel.TEMPLATE) || this;\n        _this.initialised = false;\n        return _this;\n    }\n    FiltersToolPanel.prototype.init = function (params) {\n        this.initialised = true;\n        var defaultParams = {\n            suppressExpandAll: false,\n            suppressFilterSearch: false,\n            suppressSyncLayoutWithGrid: false,\n            api: this.gridApi\n        };\n        agGridCommunity._.mergeDeep(defaultParams, params);\n        this.params = defaultParams;\n        this.filtersToolPanelHeaderPanel.init(this.params);\n        this.filtersToolPanelListPanel.init(this.params);\n        var hideExpand = this.params.suppressExpandAll;\n        var hideSearch = this.params.suppressFilterSearch;\n        if (hideExpand && hideSearch) {\n            this.filtersToolPanelHeaderPanel.setDisplayed(false);\n        }\n        this.addDestroyableEventListener(this.filtersToolPanelHeaderPanel, 'expandAll', this.onExpandAll.bind(this));\n        this.addDestroyableEventListener(this.filtersToolPanelHeaderPanel, 'collapseAll', this.onCollapseAll.bind(this));\n        this.addDestroyableEventListener(this.filtersToolPanelHeaderPanel, 'searchChanged', this.onSearchChanged.bind(this));\n        this.addDestroyableEventListener(this.filtersToolPanelListPanel, 'groupExpanded', this.onGroupExpanded.bind(this));\n    };\n    // lazy initialise the panel\n    FiltersToolPanel.prototype.setVisible = function (visible) {\n        _super.prototype.setDisplayed.call(this, visible);\n        if (visible && !this.initialised) {\n            this.init(this.params);\n        }\n    };\n    FiltersToolPanel.prototype.onExpandAll = function () {\n        this.filtersToolPanelListPanel.expandFilterGroups(true);\n    };\n    FiltersToolPanel.prototype.onCollapseAll = function () {\n        this.filtersToolPanelListPanel.expandFilterGroups(false);\n    };\n    FiltersToolPanel.prototype.onSearchChanged = function (event) {\n        this.filtersToolPanelListPanel.performFilterSearch(event.searchText);\n    };\n    FiltersToolPanel.prototype.setFilterLayout = function (colDefs) {\n        this.filtersToolPanelListPanel.setFiltersLayout(colDefs);\n    };\n    FiltersToolPanel.prototype.onGroupExpanded = function (event) {\n        this.filtersToolPanelHeaderPanel.setExpandState(event.state);\n    };\n    FiltersToolPanel.prototype.expandFilterGroups = function (groupIds) {\n        this.filtersToolPanelListPanel.expandFilterGroups(true, groupIds);\n    };\n    FiltersToolPanel.prototype.collapseFilterGroups = function (groupIds) {\n        this.filtersToolPanelListPanel.expandFilterGroups(false, groupIds);\n    };\n    FiltersToolPanel.prototype.expandFilters = function (colIds) {\n        this.filtersToolPanelListPanel.expandFilters(true, colIds);\n    };\n    FiltersToolPanel.prototype.collapseFilters = function (colIds) {\n        this.filtersToolPanelListPanel.expandFilters(false, colIds);\n    };\n    FiltersToolPanel.prototype.syncLayoutWithGrid = function () {\n        this.filtersToolPanelListPanel.syncFilterLayout();\n    };\n    FiltersToolPanel.prototype.refresh = function () {\n        this.init(this.params);\n    };\n    FiltersToolPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    FiltersToolPanel.TEMPLATE = \"<div class=\\\"ag-filter-panel\\\">\\n            <ag-filters-tool-panel-header ref=\\\"filtersToolPanelHeaderPanel\\\"></ag-filters-tool-panel-header>\\n            <ag-filters-tool-panel-list ref=\\\"filtersToolPanelListPanel\\\"></ag-filters-tool-panel-list> \\n         </div>\";\n    __decorate$B([\n        agGridCommunity.RefSelector('filtersToolPanelHeaderPanel')\n    ], FiltersToolPanel.prototype, \"filtersToolPanelHeaderPanel\", void 0);\n    __decorate$B([\n        agGridCommunity.RefSelector('filtersToolPanelListPanel')\n    ], FiltersToolPanel.prototype, \"filtersToolPanelListPanel\", void 0);\n    __decorate$B([\n        agGridCommunity.Autowired(\"gridApi\")\n    ], FiltersToolPanel.prototype, \"gridApi\", void 0);\n    __decorate$B([\n        agGridCommunity.Autowired(\"eventService\")\n    ], FiltersToolPanel.prototype, \"eventService\", void 0);\n    __decorate$B([\n        agGridCommunity.Autowired('columnController')\n    ], FiltersToolPanel.prototype, \"columnController\", void 0);\n    return FiltersToolPanel;\n}(agGridCommunity.Component));\n\nvar FiltersToolPanelModule = {\n    moduleName: agGridCommunity.ModuleNames.FiltersToolPanelModule,\n    beans: [],\n    agStackComponents: [\n        { componentName: 'AgFiltersToolPanelHeader', componentClass: FiltersToolPanelHeaderPanel },\n        { componentName: 'AgFiltersToolPanelList', componentClass: FiltersToolPanelListPanel }\n    ],\n    userComponents: [\n        { componentName: 'agFiltersToolPanel', componentClass: FiltersToolPanel },\n    ],\n    dependantModules: [\n        SideBarModule,\n        EnterpriseCoreModule\n    ]\n};\n\n/**\n * Returns the minimum and maximum value in the given iterable using natural order.\n * If the iterable contains no comparable values, returns `undefined`.\n * @param values\n */\nfunction extent(values) {\n    var n = values.length;\n    var i = -1;\n    var value;\n    var min;\n    var max;\n    while (++i < n) { // Find the first comparable value.\n        if ((value = values[i]) != null && value >= value) {\n            min = max = value;\n            while (++i < n) { // Compare the remaining values.\n                if ((value = values[i]) != null) {\n                    if (min > value) {\n                        min = value;\n                    }\n                    if (max < value) {\n                        max = value;\n                    }\n                }\n            }\n        }\n    }\n    return typeof min === 'undefined' || typeof max === 'undefined' ? undefined : [min, max];\n}\n// Custom `Array.find` implementation for legacy browsers.\nfunction find(arr, predicate) {\n    for (var i = 0, ln = arr.length; i < ln; i++) {\n        var value = arr[i];\n        if (predicate(value, i, arr)) {\n            return value;\n        }\n    }\n}\n/**\n * This method will only return `undefined` if there's not a single valid finite number present\n * in the given array of values. Date values will be converted to timestamps.\n * @param values\n */\nfunction numericExtent(values) {\n    var calculatedExtent = extent(values);\n    if (typeof calculatedExtent === 'undefined') {\n        return;\n    }\n    var a = calculatedExtent[0], b = calculatedExtent[1];\n    var min = a instanceof Date ? a.getTime() : a;\n    var max = b instanceof Date ? b.getTime() : b;\n    if (typeof min === 'number' && isFinite(min) && typeof max === 'number' && isFinite(max)) {\n        return [min, max];\n    }\n}\nfunction sumPositiveValues(array) {\n    return array.reduce(function (total, value) { return value > 0 ? total + value : total; }, 0);\n}\n\nvar __extends$r = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$C = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartDatasource = /** @class */ (function (_super) {\n    __extends$r(ChartDatasource, _super);\n    function ChartDatasource() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ChartDatasource.prototype.getData = function (params) {\n        var result = this.extractRowsFromGridRowModel(params);\n        result.data = this.aggregateRowsByDimension(params, result.data);\n        return result;\n    };\n    ChartDatasource.prototype.extractRowsFromGridRowModel = function (params) {\n        var _this = this;\n        var extractedRowData = [];\n        var columnNames = {};\n        // maps used to keep track of expanded groups that need to be removed\n        var groupNodeIndexes = {};\n        var groupsToRemove = {};\n        // make sure enough rows in range to chart. if user filters and less rows, then end row will be\n        // the last displayed row, not where the range ends.\n        var modelLastRow = this.gridRowModel.getRowCount() - 1;\n        var rangeLastRow = params.endRow > 0 ? Math.min(params.endRow, modelLastRow) : modelLastRow;\n        var numRows = rangeLastRow - params.startRow + 1;\n        var _loop_1 = function (i) {\n            var data = {};\n            var rowNode = this_1.gridRowModel.getRow(i + params.startRow);\n            // first get data for dimensions columns\n            params.dimensionCols.forEach(function (col) {\n                var colId = col.colId;\n                var column = _this.columnController.getGridColumn(colId);\n                if (column) {\n                    var valueObject = _this.valueService.getValue(column, rowNode);\n                    // when grouping we also need to build up multi category labels for charts\n                    if (params.grouping) {\n                        var valueString = valueObject && valueObject.toString ? String(valueObject.toString()) : '';\n                        // traverse parents to extract group label path\n                        var labels = _this.getGroupLabels(rowNode, valueString);\n                        if (params.multiCategories) {\n                            // add group labels to group column for multi category charts\n                            data[colId] = { labels: labels, toString: function () { return find(this.labels, function (v) { return !!v; }) || ''; } };\n                        }\n                        else {\n                            // concat group keys from the top group key down (used when grouping Pie charts)\n                            data[colId] = labels.slice().reverse().join(' - ');\n                        }\n                        // keep track of group node indexes so they can be padded when other groups are expanded\n                        if (rowNode.group) {\n                            groupNodeIndexes[labels.toString()] = i;\n                        }\n                        // if node (group or leaf) has parents then it is expanded and should be removed\n                        var groupKey = labels.slice(1, labels.length).toString();\n                        if (groupKey) {\n                            groupsToRemove[groupKey] = groupNodeIndexes[groupKey];\n                        }\n                    }\n                    else {\n                        // leaf nodes can be directly added to dimension columns\n                        data[colId] = valueObject;\n                    }\n                }\n                else {\n                    // introduce a default category when no dimensions exist with a value based off row index (+1)\n                    data[ChartDataModel.DEFAULT_CATEGORY] = i + 1;\n                }\n            });\n            // then get data for value columns\n            params.valueCols.forEach(function (col) {\n                var columnNamesArr = [];\n                // pivot keys should be added first\n                var pivotKeys = col.getColDef().pivotKeys;\n                if (pivotKeys) {\n                    columnNamesArr = pivotKeys.slice();\n                }\n                // then add column header name to results\n                var headerName = col.getColDef().headerName;\n                if (headerName) {\n                    columnNamesArr.push(headerName);\n                }\n                // add array of column names to results\n                if (columnNamesArr.length > 0) {\n                    columnNames[col.getId()] = columnNamesArr;\n                }\n                // add data value to value column\n                var value = _this.valueService.getValue(col, rowNode);\n                data[col.getId()] = value != null && typeof value.toNumber === 'function' ? value.toNumber() : value;\n            });\n            // add data to results\n            extractedRowData.push(data);\n        };\n        var this_1 = this;\n        for (var i = 0; i < numRows; i++) {\n            _loop_1(i);\n        }\n        if (params.grouping) {\n            var groupIndexesToRemove_1 = agGridCommunity._.values(groupsToRemove);\n            extractedRowData = extractedRowData.filter(function (_1, index) { return !agGridCommunity._.includes(groupIndexesToRemove_1, index); });\n        }\n        return { data: extractedRowData, columnNames: columnNames };\n    };\n    ChartDatasource.prototype.aggregateRowsByDimension = function (params, dataFromGrid) {\n        var _this = this;\n        var dimensionCols = params.dimensionCols;\n        if (!params.aggFunc || dimensionCols.length === 0) {\n            return dataFromGrid;\n        }\n        var lastCol = agGridCommunity._.last(dimensionCols);\n        var lastColId = lastCol && lastCol.colId;\n        var map = {};\n        var dataAggregated = [];\n        dataFromGrid.forEach(function (data) {\n            var currentMap = map;\n            dimensionCols.forEach(function (col) {\n                var colId = col.colId;\n                var key = data[colId];\n                if (colId === lastColId) {\n                    var groupItem_1 = currentMap[key];\n                    if (!groupItem_1) {\n                        groupItem_1 = { __children: [] };\n                        dimensionCols.forEach(function (col) {\n                            var colId = col.colId;\n                            groupItem_1[colId] = data[colId];\n                        });\n                        currentMap[key] = groupItem_1;\n                        dataAggregated.push(groupItem_1);\n                    }\n                    groupItem_1.__children.push(data);\n                }\n                else {\n                    // map of maps\n                    if (!currentMap[key]) {\n                        currentMap[key] = {};\n                    }\n                    currentMap = currentMap[key];\n                }\n            });\n        });\n        dataAggregated.forEach(function (groupItem) { return params.valueCols.forEach(function (col) {\n            var dataToAgg = groupItem.__children.map(function (child) { return child[col.getId()]; });\n            var aggResult = 0;\n            if (agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.RowGroupingModule, 'Charting Aggregation')) {\n                aggResult = _this.aggregationStage.aggregateValues(dataToAgg, params.aggFunc);\n            }\n            groupItem[col.getId()] = aggResult && typeof aggResult.value !== 'undefined' ? aggResult.value : aggResult;\n        }); });\n        return dataAggregated;\n    };\n    ChartDatasource.prototype.getGroupLabels = function (rowNode, initialLabel) {\n        var labels = [initialLabel];\n        while (rowNode.level !== 0) {\n            rowNode = rowNode.parent;\n            labels.push(rowNode.key);\n        }\n        return labels;\n    };\n    __decorate$C([\n        agGridCommunity.Autowired('rowModel')\n    ], ChartDatasource.prototype, \"gridRowModel\", void 0);\n    __decorate$C([\n        agGridCommunity.Autowired('valueService')\n    ], ChartDatasource.prototype, \"valueService\", void 0);\n    __decorate$C([\n        agGridCommunity.Optional('aggregationStage')\n    ], ChartDatasource.prototype, \"aggregationStage\", void 0);\n    __decorate$C([\n        agGridCommunity.Autowired('columnController')\n    ], ChartDatasource.prototype, \"columnController\", void 0);\n    return ChartDatasource;\n}(agGridCommunity.BeanStub));\n\nvar __extends$s = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$D = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays$2 = (undefined && undefined.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar ChartDataModel = /** @class */ (function (_super) {\n    __extends$s(ChartDataModel, _super);\n    function ChartDataModel(params) {\n        var _this = _super.call(this) || this;\n        _this.dimensionColState = [];\n        _this.valueColState = [];\n        _this.detached = false;\n        _this.columnNames = {};\n        _this.isPivotActive = function () { return _this.columnController.isPivotActive(); };\n        _this.isPivotMode = function () { return _this.columnController.isPivotMode(); };\n        _this.isPivotChart = function () { return _this.pivotChart; };\n        _this.getChartId = function () { return _this.chartId; };\n        _this.getValueColState = function () { return _this.valueColState.map(_this.displayNameMapper.bind(_this)); };\n        _this.getDimensionColState = function () { return _this.dimensionColState; };\n        _this.getCellRanges = function () { return [_this.dimensionCellRange, _this.valueCellRange].filter(function (r) { return r; }); };\n        _this.getChartType = function () { return _this.chartType; };\n        _this.isSuppressChartRanges = function () { return _this.suppressChartRanges; };\n        _this.isDetached = function () { return _this.detached; };\n        _this.getSelectedValueColState = function () { return _this.getValueColState().filter(function (cs) { return cs.selected; }); };\n        _this.getSelectedValueCols = function () { return _this.valueColState.filter(function (cs) { return cs.selected; }).map(function (cs) { return cs.column; }); };\n        _this.getSelectedDimension = function () { return _this.dimensionColState.filter(function (cs) { return cs.selected; })[0]; };\n        _this.getColDisplayName = function (col) { return _this.columnController.getDisplayNameForColumn(col, 'chart'); };\n        _this.pivotChart = params.pivotChart;\n        _this.chartType = params.chartType;\n        _this.aggFunc = params.aggFunc;\n        _this.referenceCellRange = params.cellRange;\n        _this.suppressChartRanges = params.suppressChartRanges;\n        // this is used to associate chart ranges with charts\n        _this.chartId = _this.generateId();\n        return _this;\n    }\n    ChartDataModel.prototype.init = function () {\n        this.datasource = this.wireBean(new ChartDatasource());\n        this.updateCellRanges();\n    };\n    ChartDataModel.prototype.updateCellRanges = function (updatedColState) {\n        if (this.valueCellRange) {\n            this.referenceCellRange = this.valueCellRange;\n        }\n        var _a = this.getAllChartColumns(), dimensionCols = _a.dimensionCols, valueCols = _a.valueCols;\n        var allColsFromRanges = this.getAllColumnsFromRanges();\n        if (updatedColState) {\n            this.updateColumnState(updatedColState);\n        }\n        this.setDimensionCellRange(dimensionCols, allColsFromRanges, updatedColState);\n        this.setValueCellRange(valueCols, allColsFromRanges, updatedColState);\n        if (!updatedColState) {\n            this.resetColumnState();\n        }\n        this.updateData();\n    };\n    ChartDataModel.prototype.getData = function () {\n        return this.chartData;\n    };\n    ChartDataModel.prototype.setChartType = function (chartType) {\n        var isCurrentMultiCategory = this.isMultiCategoryChart();\n        this.chartType = chartType;\n        // switching between single and multi-category charts requires data to be reformatted\n        if (isCurrentMultiCategory !== this.isMultiCategoryChart()) {\n            this.updateData();\n        }\n    };\n    ChartDataModel.prototype.isGrouping = function () {\n        var usingTreeData = this.gridOptionsWrapper.isTreeData();\n        var groupedCols = usingTreeData ? null : this.columnController.getRowGroupColumns();\n        var groupActive = usingTreeData || (groupedCols && groupedCols.length > 0);\n        // charts only group when the selected category is a group column\n        var groupCols = this.columnController.getGroupDisplayColumns();\n        var colId = this.getSelectedDimension().colId;\n        var groupDimensionSelected = groupCols\n            .map(function (col) { return col.getColId(); })\n            .some(function (id) { return id === colId; });\n        return groupActive && groupDimensionSelected;\n    };\n    ChartDataModel.prototype.toggleDetached = function () {\n        this.detached = !this.detached;\n    };\n    ChartDataModel.prototype.createCellRange = function (type) {\n        var columns = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            columns[_i - 1] = arguments[_i];\n        }\n        return {\n            id: this.chartId,\n            startRow: this.referenceCellRange.startRow,\n            endRow: this.referenceCellRange.endRow,\n            columns: columns,\n            startColumn: type === agGridCommunity.CellRangeType.DIMENSION ? columns[0] : this.referenceCellRange.startColumn,\n            type: type\n        };\n    };\n    ChartDataModel.prototype.getAllColumnsFromRanges = function () {\n        if (this.pivotChart) {\n            return agGridCommunity._.convertToSet(this.columnController.getAllDisplayedColumns());\n        }\n        var columns = this.dimensionCellRange || this.valueCellRange ? [] : this.referenceCellRange.columns;\n        if (this.dimensionCellRange) {\n            columns.push.apply(columns, this.dimensionCellRange.columns);\n        }\n        if (this.valueCellRange) {\n            columns.push.apply(columns, this.valueCellRange.columns);\n        }\n        return agGridCommunity._.convertToSet(columns);\n    };\n    ChartDataModel.prototype.getRowIndexes = function () {\n        var startRow = 0, endRow = 0;\n        var rangeController = this.rangeController;\n        var range = this.valueCellRange;\n        if (rangeController && range) {\n            startRow = rangeController.getRangeStartRow(range).rowIndex;\n            endRow = rangeController.getRangeEndRow(range).rowIndex;\n        }\n        return { startRow: startRow, endRow: endRow };\n    };\n    ChartDataModel.prototype.getAllChartColumns = function () {\n        var _this = this;\n        var displayedCols = this.columnController.getAllDisplayedColumns();\n        var dimensionCols = new Set();\n        var valueCols = new Set();\n        displayedCols.forEach(function (col) {\n            var colDef = col.getColDef();\n            var chartDataType = colDef.chartDataType;\n            if (chartDataType) {\n                // chart data type was specified explicitly\n                switch (chartDataType) {\n                    case 'category':\n                        dimensionCols.add(col);\n                        return;\n                    case 'series':\n                        valueCols.add(col);\n                        return;\n                    case 'excluded':\n                        return;\n                    default:\n                        console.warn(\"ag-Grid: unexpected chartDataType value '\" + chartDataType + \"' supplied, instead use 'category', 'series' or 'excluded'\");\n                        break;\n                }\n            }\n            if (colDef.colId === 'ag-Grid-AutoColumn') {\n                dimensionCols.add(col);\n                return;\n            }\n            if (!col.isPrimary()) {\n                valueCols.add(col);\n                return;\n            }\n            // if 'chartDataType' is not provided then infer type based data contained in first row\n            (_this.isNumberCol(col) ? valueCols : dimensionCols).add(col);\n        });\n        return { dimensionCols: dimensionCols, valueCols: valueCols };\n    };\n    ChartDataModel.prototype.isNumberCol = function (col) {\n        if (col.getColId() === 'ag-Grid-AutoColumn') {\n            return false;\n        }\n        var row = this.rowRenderer.getRowNode({ rowIndex: 0, rowPinned: undefined });\n        if (!row) {\n            return false;\n        }\n        var cellValue = this.valueService.getValue(col, row);\n        if (cellValue == null) {\n            cellValue = this.extractLeafData(row, col);\n        }\n        if (cellValue != null && typeof cellValue.toNumber === 'function') {\n            cellValue = cellValue.toNumber();\n        }\n        return typeof cellValue === 'number';\n    };\n    ChartDataModel.prototype.extractLeafData = function (row, col) {\n        if (!row.allLeafChildren) {\n            return null;\n        }\n        for (var i = 0; i < row.allLeafChildren.length; i++) {\n            var childRow = row.allLeafChildren[i];\n            var value = this.valueService.getValue(col, childRow);\n            if (value != null) {\n                return value;\n            }\n        }\n        return null;\n    };\n    ChartDataModel.prototype.displayNameMapper = function (col) {\n        var columnNames = this.columnNames[col.colId];\n        col.displayName = columnNames ? columnNames.join(' - ') : this.getColDisplayName(col.column);\n        return col;\n    };\n    ChartDataModel.prototype.isMultiCategoryChart = function () {\n        return !agGridCommunity._.includes([agGridCommunity.ChartType.Pie, agGridCommunity.ChartType.Doughnut, agGridCommunity.ChartType.Scatter, agGridCommunity.ChartType.Bubble], this.chartType);\n    };\n    ChartDataModel.prototype.generateId = function () {\n        return 'id-' + Math.random().toString(36).substr(2, 16);\n    };\n    ChartDataModel.prototype.updateData = function () {\n        var _a = this.getRowIndexes(), startRow = _a.startRow, endRow = _a.endRow;\n        if (this.pivotChart) {\n            this.resetColumnState();\n        }\n        this.grouping = this.isGrouping();\n        var params = {\n            aggFunc: this.aggFunc,\n            dimensionCols: [this.getSelectedDimension()],\n            grouping: this.grouping,\n            pivoting: this.isPivotActive(),\n            multiCategories: this.isMultiCategoryChart(),\n            valueCols: this.getSelectedValueCols(),\n            startRow: startRow,\n            endRow: endRow\n        };\n        var result = this.datasource.getData(params);\n        this.chartData = result.data;\n        this.columnNames = result.columnNames;\n    };\n    ChartDataModel.prototype.resetColumnState = function () {\n        var _this = this;\n        var _a = this.getAllChartColumns(), dimensionCols = _a.dimensionCols, valueCols = _a.valueCols;\n        var allCols = this.getAllColumnsFromRanges();\n        var isInitialising = this.valueColState.length < 1;\n        this.dimensionColState = [];\n        this.valueColState = [];\n        var hasSelectedDimension = false;\n        var order = 1;\n        dimensionCols.forEach(function (column) {\n            var selected = !hasSelectedDimension && allCols.has(column);\n            _this.dimensionColState.push({\n                column: column,\n                colId: column.getColId(),\n                displayName: _this.getColDisplayName(column),\n                selected: selected,\n                order: order++\n            });\n            if (selected) {\n                hasSelectedDimension = true;\n            }\n        });\n        var defaultCategory = {\n            colId: ChartDataModel.DEFAULT_CATEGORY,\n            displayName: '(None)',\n            selected: !hasSelectedDimension,\n            order: 0\n        };\n        this.dimensionColState.unshift(defaultCategory);\n        var valueColumnsFromReferenceRange = this.referenceCellRange.columns.filter(function (c) { return valueCols.has(c); });\n        valueCols.forEach(function (column) {\n            // first time the value cell range is set, preserve the column order from the supplied range\n            if (isInitialising && agGridCommunity._.includes(_this.referenceCellRange.columns, column)) {\n                column = valueColumnsFromReferenceRange.shift();\n            }\n            _this.valueColState.push({\n                column: column,\n                colId: column.getColId(),\n                displayName: _this.getColDisplayName(column),\n                selected: allCols.has(column),\n                order: order++\n            });\n        });\n    };\n    ChartDataModel.prototype.updateColumnState = function (updatedCol) {\n        var idsMatch = function (cs) { return cs.colId === updatedCol.colId; };\n        var _a = this, dimensionColState = _a.dimensionColState, valueColState = _a.valueColState;\n        if (dimensionColState.filter(idsMatch).length > 0) {\n            // only one dimension should be selected\n            dimensionColState.forEach(function (cs) { return cs.selected = idsMatch(cs); });\n        }\n        else {\n            // just update the selected value on the supplied value column\n            valueColState.filter(idsMatch).forEach(function (cs) { return cs.selected = updatedCol.selected; });\n        }\n        var allColumns = __spreadArrays$2(dimensionColState, valueColState);\n        var orderedColIds = [];\n        // calculate new order\n        allColumns.forEach(function (col, i) {\n            if (i === updatedCol.order) {\n                orderedColIds.push(updatedCol.colId);\n            }\n            if (col.colId !== updatedCol.colId) {\n                orderedColIds.push(col.colId);\n            }\n        });\n        // update col state with new order\n        allColumns.forEach(function (col) {\n            var order = orderedColIds.indexOf(col.colId);\n            col.order = order >= 0 ? orderedColIds.indexOf(col.colId) : allColumns.length - 1;\n        });\n        this.reorderColState();\n    };\n    ChartDataModel.prototype.reorderColState = function () {\n        var _a = this, dimensionColState = _a.dimensionColState, valueColState = _a.valueColState;\n        dimensionColState.sort(function (a, b) { return a.order - b.order; });\n        valueColState.sort(function (a, b) { return a.order - b.order; });\n    };\n    ChartDataModel.prototype.setDimensionCellRange = function (dimensionCols, colsInRange, updatedColState) {\n        var _this = this;\n        this.dimensionCellRange = undefined;\n        var dimensionColState = this.dimensionColState;\n        if (!updatedColState && !dimensionColState.length) {\n            // use first dimension column in range by default\n            dimensionCols.forEach(function (col) {\n                if (_this.dimensionCellRange || !colsInRange.has(col)) {\n                    return;\n                }\n                _this.dimensionCellRange = _this.createCellRange(agGridCommunity.CellRangeType.DIMENSION, col);\n            });\n            return;\n        }\n        var selectedDimensionColState = updatedColState;\n        if (!selectedDimensionColState || !dimensionCols.has(selectedDimensionColState.column)) {\n            selectedDimensionColState = this.dimensionColState.filter(function (cs) { return cs.selected; })[0];\n        }\n        if (selectedDimensionColState && selectedDimensionColState.colId !== ChartDataModel.DEFAULT_CATEGORY) {\n            this.dimensionCellRange = this.createCellRange(agGridCommunity.CellRangeType.DIMENSION, selectedDimensionColState.column);\n        }\n    };\n    ChartDataModel.prototype.setValueCellRange = function (valueCols, colsInRange, updatedColState) {\n        this.valueCellRange = undefined;\n        var selectedValueCols = [];\n        valueCols.forEach(function (col) {\n            if (updatedColState && updatedColState.colId === col.getColId()) {\n                if (updatedColState.selected) {\n                    selectedValueCols.push(updatedColState.column);\n                }\n            }\n            else if (colsInRange.has(col)) {\n                selectedValueCols.push(col);\n            }\n        });\n        if (selectedValueCols.length > 0) {\n            var orderedColIds_1 = [];\n            if (this.valueColState.length > 0) {\n                orderedColIds_1 = this.valueColState.map(function (c) { return c.colId; });\n            }\n            else {\n                colsInRange.forEach(function (c) { return orderedColIds_1.push(c.getColId()); });\n            }\n            selectedValueCols.sort(function (a, b) { return orderedColIds_1.indexOf(a.getColId()) - orderedColIds_1.indexOf(b.getColId()); });\n            this.valueCellRange = this.createCellRange.apply(this, __spreadArrays$2([agGridCommunity.CellRangeType.VALUE], selectedValueCols));\n        }\n    };\n    ChartDataModel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.datasource) {\n            this.datasource.destroy();\n        }\n    };\n    ChartDataModel.DEFAULT_CATEGORY = 'AG-GRID-DEFAULT-CATEGORY';\n    __decorate$D([\n        agGridCommunity.Autowired('columnController')\n    ], ChartDataModel.prototype, \"columnController\", void 0);\n    __decorate$D([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ChartDataModel.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$D([\n        agGridCommunity.Autowired('valueService')\n    ], ChartDataModel.prototype, \"valueService\", void 0);\n    __decorate$D([\n        agGridCommunity.Autowired('rangeController')\n    ], ChartDataModel.prototype, \"rangeController\", void 0);\n    __decorate$D([\n        agGridCommunity.Autowired('rowRenderer')\n    ], ChartDataModel.prototype, \"rowRenderer\", void 0);\n    __decorate$D([\n        agGridCommunity.PostConstruct\n    ], ChartDataModel.prototype, \"init\", null);\n    return ChartDataModel;\n}(agGridCommunity.BeanStub));\n\nvar borneo = {\n    fills: [\n        '#f3622d',\n        '#fba71b',\n        '#57b757',\n        '#41a9c9',\n        '#4258c9',\n        '#9a42c8',\n        '#c84164',\n        '#888888'\n    ],\n    strokes: [\n        '#aa4520',\n        '#b07513',\n        '#3d803d',\n        '#2d768d',\n        '#2e3e8d',\n        '#6c2e8c',\n        '#8c2d46',\n        '#5f5f5f'\n    ]\n};\nvar material = {\n    fills: [\n        '#f44336',\n        '#e91e63',\n        '#9c27b0',\n        '#673ab7',\n        '#3f51b5',\n        '#2196f3',\n        '#03a9f4',\n        '#00bcd4',\n        '#009688',\n        '#4caf50',\n        '#8bc34a',\n        '#cddc39',\n        '#ffeb3b',\n        '#ffc107',\n        '#ff9800',\n        '#ff5722'\n    ],\n    strokes: [\n        '#ab2f26',\n        '#a31545',\n        '#6d1b7b',\n        '#482980',\n        '#2c397f',\n        '#1769aa',\n        '#0276ab',\n        '#008494',\n        '#00695f',\n        '#357a38',\n        '#618834',\n        '#909a28',\n        '#b3a429',\n        '#b38705',\n        '#b36a00',\n        '#b33d18'\n    ]\n};\nvar pastel = {\n    fills: [\n        '#c16068',\n        '#a2bf8a',\n        '#ebcc87',\n        '#80a0c3',\n        '#b58dae',\n        '#85c0d1'\n    ],\n    strokes: [\n        '#874349',\n        '#718661',\n        '#a48f5f',\n        '#5a7088',\n        '#7f637a',\n        '#5d8692'\n    ]\n};\nvar bright = {\n    fills: [\n        '#5BC0EB',\n        '#FDE74C',\n        '#9BC53D',\n        '#E55934',\n        '#FA7921',\n        '#fa3081'\n    ],\n    strokes: [\n        '#4086a4',\n        '#b1a235',\n        '#6c8a2b',\n        '#a03e24',\n        '#af5517',\n        '#af225a'\n    ]\n};\nvar flat = {\n    fills: [\n        '#febe76',\n        '#ff7979',\n        '#badc58',\n        '#f9ca23',\n        '#f0932b',\n        '#eb4c4b',\n        '#6ab04c',\n        '#7ed6df',\n        '#e056fd',\n        '#686de0'\n    ],\n    strokes: [\n        '#b28553',\n        '#b35555',\n        '#829a3e',\n        '#ae8d19',\n        '#a8671e',\n        '#a43535',\n        '#4a7b35',\n        '#58969c',\n        '#9d3cb1',\n        '#494c9d'\n    ]\n};\nvar palettes = (function () {\n    var map = new Map();\n    map.set('borneo', borneo);\n    map.set('material', material);\n    map.set('pastel', pastel);\n    map.set('bright', bright);\n    map.set('flat', flat);\n    return map;\n})();\n\nvar __extends$t = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$E = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartController = /** @class */ (function (_super) {\n    __extends$t(ChartController, _super);\n    function ChartController(model, paletteName) {\n        if (paletteName === void 0) { paletteName = 'borneo'; }\n        var _this = _super.call(this) || this;\n        _this.model = model;\n        _this.getChartType = function () { return _this.model.getChartType(); };\n        _this.isPivotChart = function () { return _this.model.isPivotChart(); };\n        _this.chartPaletteName = paletteName;\n        return _this;\n    }\n    ChartController.prototype.init = function () {\n        var _this = this;\n        this.setChartRange();\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_RANGE_SELECTION_CHANGED, function (event) {\n            if (event.id && event.id === _this.model.getChartId()) {\n                _this.updateForRangeChange();\n            }\n        });\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_MOVED, this.updateForGridChange.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PINNED, this.updateForGridChange.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_VISIBLE, this.updateForGridChange.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_MODEL_UPDATED, this.updateForDataChange.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_CELL_VALUE_CHANGED, this.updateForDataChange.bind(this));\n    };\n    ChartController.prototype.updateForGridChange = function () {\n        if (this.model.isDetached()) {\n            return;\n        }\n        this.model.updateCellRanges();\n        this.setChartRange();\n    };\n    ChartController.prototype.updateForDataChange = function () {\n        if (this.model.isDetached()) {\n            return;\n        }\n        this.model.updateData();\n        this.raiseChartUpdatedEvent();\n    };\n    ChartController.prototype.updateForRangeChange = function () {\n        this.updateForGridChange();\n        this.raiseChartRangeSelectionChangedEvent();\n    };\n    ChartController.prototype.updateForPanelChange = function (updatedCol) {\n        this.model.updateCellRanges(updatedCol);\n        this.setChartRange();\n        this.raiseChartRangeSelectionChangedEvent();\n    };\n    ChartController.prototype.getChartModel = function () {\n        return {\n            chartId: this.model.getChartId(),\n            chartType: this.model.getChartType(),\n            chartPalette: this.getPaletteName(),\n            chartOptions: this.chartProxy.getChartOptions(),\n            cellRange: this.getCurrentCellRangeParams()\n        };\n    };\n    ChartController.prototype.getPaletteName = function () {\n        return this.chartPaletteName;\n    };\n    ChartController.prototype.getPalettes = function () {\n        var customPalette = this.chartProxy.getCustomPalette();\n        if (customPalette) {\n            var map = new Map();\n            map.set(undefined, customPalette);\n            return map;\n        }\n        return palettes;\n    };\n    ChartController.prototype.setChartType = function (chartType) {\n        this.model.setChartType(chartType);\n        this.raiseChartUpdatedEvent();\n        this.raiseChartOptionsChangedEvent();\n    };\n    ChartController.prototype.setChartPaletteName = function (palette) {\n        this.chartPaletteName = palette;\n        this.raiseChartUpdatedEvent();\n        this.raiseChartOptionsChangedEvent();\n    };\n    ChartController.prototype.getColStateForMenu = function () {\n        return { dimensionCols: this.model.getDimensionColState(), valueCols: this.model.getValueColState() };\n    };\n    ChartController.prototype.isDefaultCategorySelected = function () {\n        var selectedDimension = this.model.getSelectedDimension().colId;\n        return selectedDimension && selectedDimension === ChartDataModel.DEFAULT_CATEGORY;\n    };\n    ChartController.prototype.setChartRange = function () {\n        if (this.rangeController && !this.model.isSuppressChartRanges() && !this.model.isDetached()) {\n            this.rangeController.setCellRanges(this.model.getCellRanges());\n        }\n        this.raiseChartUpdatedEvent();\n    };\n    ChartController.prototype.detachChartRange = function () {\n        // when chart is detached it won't listen to changes from the grid\n        this.model.toggleDetached();\n        if (this.model.isDetached()) {\n            // remove range from grid\n            if (this.rangeController) {\n                this.rangeController.setCellRanges([]);\n            }\n        }\n        else {\n            // update chart data may have changed\n            this.updateForGridChange();\n        }\n    };\n    ChartController.prototype.setChartProxy = function (chartProxy) {\n        this.chartProxy = chartProxy;\n    };\n    ChartController.prototype.getChartProxy = function () {\n        return this.chartProxy;\n    };\n    ChartController.prototype.isActiveXYChart = function () {\n        return agGridCommunity._.includes([agGridCommunity.ChartType.Scatter, agGridCommunity.ChartType.Bubble], this.getChartType());\n    };\n    ChartController.prototype.getCurrentCellRangeParams = function () {\n        var cellRanges = this.model.getCellRanges();\n        var firstCellRange = cellRanges[0];\n        return {\n            rowStartIndex: firstCellRange.startRow && firstCellRange.startRow.rowIndex,\n            rowStartPinned: firstCellRange.startRow && firstCellRange.startRow.rowPinned,\n            rowEndIndex: firstCellRange.endRow && firstCellRange.endRow.rowIndex,\n            rowEndPinned: firstCellRange.endRow && firstCellRange.endRow.rowPinned,\n            columns: cellRanges.reduce(function (columns, value) { return columns.concat(value.columns.map(function (c) { return c.getId(); })); }, [])\n        };\n    };\n    ChartController.prototype.raiseChartUpdatedEvent = function () {\n        var event = Object.freeze({\n            type: ChartController.EVENT_CHART_UPDATED\n        });\n        this.dispatchEvent(event);\n    };\n    ChartController.prototype.raiseChartOptionsChangedEvent = function () {\n        var event = Object.freeze({\n            type: agGridCommunity.Events.EVENT_CHART_OPTIONS_CHANGED,\n            chartType: this.getChartType(),\n            chartPalette: this.chartPaletteName,\n            chartOptions: this.getChartProxy().getChartOptions(),\n        });\n        this.eventService.dispatchEvent(event);\n    };\n    ChartController.prototype.raiseChartRangeSelectionChangedEvent = function () {\n        var event = Object.freeze({\n            type: agGridCommunity.Events.EVENT_CHART_RANGE_SELECTION_CHANGED,\n            id: this.model.getChartId(),\n            cellRange: this.getCurrentCellRangeParams(),\n            api: this.gridApi,\n            columnApi: this.columnApi,\n        });\n        this.eventService.dispatchEvent(event);\n    };\n    ChartController.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.rangeController) {\n            this.rangeController.setCellRanges([]);\n        }\n    };\n    ChartController.EVENT_CHART_UPDATED = 'chartUpdated';\n    __decorate$E([\n        agGridCommunity.Autowired('eventService')\n    ], ChartController.prototype, \"eventService\", void 0);\n    __decorate$E([\n        agGridCommunity.Autowired('rangeController')\n    ], ChartController.prototype, \"rangeController\", void 0);\n    __decorate$E([\n        agGridCommunity.Autowired('gridApi')\n    ], ChartController.prototype, \"gridApi\", void 0);\n    __decorate$E([\n        agGridCommunity.Autowired('columnApi')\n    ], ChartController.prototype, \"columnApi\", void 0);\n    __decorate$E([\n        agGridCommunity.PostConstruct\n    ], ChartController.prototype, \"init\", null);\n    return ChartController;\n}(agGridCommunity.BeanStub));\n\nvar __extends$u = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$F = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays$3 = (undefined && undefined.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar ChartDataPanel = /** @class */ (function (_super) {\n    __extends$u(ChartDataPanel, _super);\n    function ChartDataPanel(chartController) {\n        var _this = _super.call(this, ChartDataPanel.TEMPLATE) || this;\n        _this.columnComps = new Map();\n        _this.chartController = chartController;\n        return _this;\n    }\n    ChartDataPanel.prototype.init = function () {\n        this.updatePanels();\n        this.addDestroyableEventListener(this.chartController, ChartController.EVENT_CHART_UPDATED, this.updatePanels.bind(this));\n    };\n    ChartDataPanel.prototype.destroy = function () {\n        this.clearComponents();\n        _super.prototype.destroy.call(this);\n    };\n    ChartDataPanel.prototype.updatePanels = function () {\n        var _this = this;\n        var currentChartType = this.chartType;\n        var _a = this.chartController.getColStateForMenu(), dimensionCols = _a.dimensionCols, valueCols = _a.valueCols;\n        var colIds = dimensionCols.map(function (c) { return c.colId; }).concat(valueCols.map(function (c) { return c.colId; }));\n        this.chartType = this.chartController.getChartType();\n        if (agGridCommunity._.areEqual(agGridCommunity._.keys(this.columnComps), colIds) && this.chartType === currentChartType) {\n            // if possible, we just update existing components\n            __spreadArrays$3(dimensionCols, valueCols).forEach(function (col) {\n                _this.columnComps.get(col.colId).setValue(col.selected, true);\n            });\n            if (this.chartController.isActiveXYChart()) {\n                var getSeriesLabel_1 = this.generateGetSeriesLabel();\n                valueCols.forEach(function (col) {\n                    _this.columnComps.get(col.colId).setLabel(getSeriesLabel_1(col));\n                });\n            }\n        }\n        else {\n            // otherwise we re-create everything\n            this.clearComponents();\n            this.createCategoriesGroupComponent(dimensionCols);\n            this.createSeriesGroupComponent(valueCols);\n        }\n    };\n    ChartDataPanel.prototype.addComponent = function (parent, component) {\n        var eDiv = document.createElement('div');\n        eDiv.appendChild(component.getGui());\n        parent.appendChild(eDiv);\n    };\n    ChartDataPanel.prototype.addChangeListener = function (component, columnState) {\n        var _this = this;\n        this.addDestroyableEventListener(component, agGridCommunity.AgAbstractField.EVENT_CHANGED, function () {\n            columnState.selected = component.getValue();\n            _this.chartController.updateForPanelChange(columnState);\n        });\n    };\n    ChartDataPanel.prototype.createCategoriesGroupComponent = function (columns) {\n        var _this = this;\n        this.categoriesGroupComp = this.wireBean(new agGridCommunity.AgGroupComponent({\n            title: this.getCategoryGroupTitle(),\n            enabled: true,\n            suppressEnabledCheckbox: true,\n            suppressOpenCloseIcons: false\n        }));\n        var inputName = \"chartDimension\" + this.getCompId();\n        columns.forEach(function (col) {\n            var comp = _this.categoriesGroupComp.wireDependentBean(new agGridCommunity.AgRadioButton());\n            comp.setLabel(agGridCommunity._.escape(col.displayName));\n            comp.setValue(col.selected);\n            comp.setInputName(inputName);\n            _this.addChangeListener(comp, col);\n            _this.categoriesGroupComp.addItem(comp);\n            _this.columnComps.set(col.colId, comp);\n        });\n        this.addComponent(this.getGui(), this.categoriesGroupComp);\n    };\n    ChartDataPanel.prototype.createSeriesGroupComponent = function (columns) {\n        var _this = this;\n        this.seriesGroupComp = this.wireDependentBean(new agGridCommunity.AgGroupComponent({\n            title: this.getSeriesGroupTitle(),\n            enabled: true,\n            suppressEnabledCheckbox: true,\n            suppressOpenCloseIcons: false\n        }));\n        if (this.chartController.isActiveXYChart()) {\n            var pairedModeToggle = this.seriesGroupComp.wireDependentBean(new agGridCommunity.AgToggleButton());\n            var chartProxy_1 = this.chartController.getChartProxy();\n            pairedModeToggle\n                .setLabel(this.chartTranslator.translate('paired'))\n                .setLabelAlignment('left')\n                .setLabelWidth('flex')\n                .setInputWidth(40)\n                .setValue(chartProxy_1.getSeriesOption('paired') || false)\n                .onValueChange(function (newValue) {\n                chartProxy_1.setSeriesOption('paired', newValue);\n                _this.chartController.updateForGridChange();\n            });\n            this.seriesGroupComp.addItem(pairedModeToggle);\n        }\n        var getSeriesLabel = this.generateGetSeriesLabel();\n        columns.forEach(function (col) {\n            var comp = _this.seriesGroupComp.wireDependentBean(new agGridCommunity.AgCheckbox());\n            comp.addCssClass('ag-data-select-checkbox');\n            var label = getSeriesLabel(col);\n            comp.setLabel(label);\n            comp.setValue(col.selected);\n            _this.addChangeListener(comp, col);\n            _this.seriesGroupComp.addItem(comp);\n            _this.columnComps.set(col.colId, comp);\n            _this.addDragHandle(comp, col);\n        });\n        this.addComponent(this.getGui(), this.seriesGroupComp);\n        var dropTarget = {\n            getContainer: this.getGui.bind(this),\n            onDragging: this.onDragging.bind(this),\n            isInterestedIn: this.isInterestedIn.bind(this),\n        };\n        this.dragAndDropService.addDropTarget(dropTarget);\n    };\n    ChartDataPanel.prototype.addDragHandle = function (comp, col) {\n        var _this = this;\n        var eDragHandle = agGridCommunity._.createIconNoSpan('columnDrag', this.gridOptionsWrapper);\n        agGridCommunity._.addCssClass(eDragHandle, 'ag-column-drag');\n        comp.getGui().insertAdjacentElement('beforeend', eDragHandle);\n        var dragSource = {\n            type: agGridCommunity.DragSourceType.ChartPanel,\n            eElement: eDragHandle,\n            dragItemName: col.displayName,\n            getDragItem: function () { return ({ columns: [col.column] }); },\n            onDragStopped: function () { _this.insertIndex = undefined; }\n        };\n        this.dragAndDropService.addDragSource(dragSource, true);\n        this.addDestroyFunc(function () { return _this.dragAndDropService.removeDragSource(dragSource); });\n    };\n    ChartDataPanel.prototype.generateGetSeriesLabel = function () {\n        if (!this.chartController.isActiveXYChart()) {\n            return function (col) { return agGridCommunity._.escape(col.displayName); };\n        }\n        var isBubble = this.chartType === agGridCommunity.ChartType.Bubble;\n        var isInPairedMode = this.isInPairedMode();\n        var selectedValuesCount = 0;\n        var indexToAxisLabel = new Map();\n        indexToAxisLabel.set(0, 'X');\n        indexToAxisLabel.set(1, 'Y');\n        indexToAxisLabel.set(2, 'size');\n        return function (col) {\n            var escapedLabel = agGridCommunity._.escape(col.displayName);\n            if (!col.selected) {\n                return escapedLabel;\n            }\n            var axisLabel;\n            if (isInPairedMode) {\n                axisLabel = indexToAxisLabel.get(selectedValuesCount % (isBubble ? 3 : 2));\n            }\n            else {\n                if (selectedValuesCount === 0) {\n                    axisLabel = 'X';\n                }\n                else {\n                    axisLabel = isBubble && selectedValuesCount % 2 === 0 ? 'size' : 'Y';\n                }\n            }\n            selectedValuesCount++;\n            return escapedLabel + \" (\" + axisLabel + \")\";\n        };\n    };\n    ChartDataPanel.prototype.getCategoryGroupTitle = function () {\n        return this.chartTranslator.translate(this.chartController.isActiveXYChart() ? 'labels' : 'categories');\n    };\n    ChartDataPanel.prototype.getSeriesGroupTitle = function () {\n        return this.chartTranslator.translate(this.chartController.isActiveXYChart() ? 'xyValues' : 'series');\n    };\n    ChartDataPanel.prototype.isInPairedMode = function () {\n        return this.chartController.isActiveXYChart() && this.chartController.getChartProxy().getSeriesOption('paired');\n    };\n    ChartDataPanel.prototype.clearComponents = function () {\n        agGridCommunity._.clearElement(this.getGui());\n        if (this.categoriesGroupComp) {\n            this.categoriesGroupComp.destroy();\n            this.categoriesGroupComp = undefined;\n        }\n        if (this.seriesGroupComp) {\n            this.seriesGroupComp.destroy();\n            this.seriesGroupComp = undefined;\n        }\n        this.columnComps.clear();\n    };\n    ChartDataPanel.prototype.onDragging = function (draggingEvent) {\n        var _this = this;\n        if (this.checkInsertIndex(draggingEvent)) {\n            var column_1 = draggingEvent.dragItem.columns[0];\n            var _a = this.chartController.getColStateForMenu(), dimensionCols = _a.dimensionCols, valueCols = _a.valueCols;\n            __spreadArrays$3(dimensionCols, valueCols).filter(function (state) { return state.column === column_1; })\n                .forEach(function (state) {\n                state.order = _this.insertIndex;\n                _this.chartController.updateForPanelChange(state);\n            });\n        }\n    };\n    ChartDataPanel.prototype.checkInsertIndex = function (draggingEvent) {\n        if (agGridCommunity._.missing(draggingEvent.vDirection)) {\n            return false;\n        }\n        var newIndex = 0;\n        var mouseEvent = draggingEvent.event;\n        this.columnComps.forEach(function (comp) {\n            var rect = comp.getGui().getBoundingClientRect();\n            var verticalFit = mouseEvent.clientY >= (draggingEvent.vDirection === agGridCommunity.VerticalDirection.Down ? rect.top : rect.bottom);\n            if (verticalFit) {\n                newIndex++;\n            }\n        });\n        var changed = this.insertIndex !== undefined && newIndex !== this.insertIndex;\n        this.insertIndex = newIndex;\n        return changed;\n    };\n    ChartDataPanel.prototype.isInterestedIn = function (type) {\n        return type === agGridCommunity.DragSourceType.ChartPanel;\n    };\n    ChartDataPanel.TEMPLATE = \"<div class=\\\"ag-chart-data-wrapper\\\"></div>\";\n    __decorate$F([\n        agGridCommunity.Autowired('dragAndDropService')\n    ], ChartDataPanel.prototype, \"dragAndDropService\", void 0);\n    __decorate$F([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ChartDataPanel.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$F([\n        agGridCommunity.Autowired('chartTranslator')\n    ], ChartDataPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$F([\n        agGridCommunity.PostConstruct\n    ], ChartDataPanel.prototype, \"init\", null);\n    return ChartDataPanel;\n}(agGridCommunity.Component));\n\nvar __extends$v = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$G = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar FontPanel = /** @class */ (function (_super) {\n    __extends$v(FontPanel, _super);\n    function FontPanel(params) {\n        var _this = _super.call(this) || this;\n        _this.activeComps = [];\n        _this.params = params;\n        return _this;\n    }\n    FontPanel.prototype.init = function () {\n        this.setTemplate(FontPanel.TEMPLATE);\n        this.initGroup();\n        this.initFontFamilySelect();\n        this.initFontWeightStyleSelect();\n        this.initFontSizeSelect();\n        this.initFontColorPicker();\n    };\n    FontPanel.prototype.addCompToPanel = function (comp) {\n        this.fontGroup.addItem(comp);\n        this.activeComps.push(comp);\n    };\n    FontPanel.prototype.setEnabled = function (enabled) {\n        this.fontGroup.setEnabled(enabled);\n    };\n    FontPanel.prototype.initGroup = function () {\n        var _this = this;\n        this.fontGroup\n            .setTitle(this.params.name || this.chartTranslator.translate('font'))\n            .setEnabled(this.params.enabled)\n            .hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox)\n            .hideOpenCloseIcons(true)\n            .onEnableChange(function (enabled) {\n            if (_this.params.setEnabled) {\n                _this.params.setEnabled(enabled);\n            }\n        });\n    };\n    FontPanel.prototype.initFontFamilySelect = function () {\n        var _this = this;\n        var families = [\n            'Arial, sans-serif',\n            'Aria Black, sans-serif',\n            'Book Antiqua,  serif',\n            'Charcoal, sans-serif',\n            'Comic Sans MS, cursive',\n            'Courier, monospace',\n            'Courier New, monospace',\n            'Gadget, sans-serif',\n            'Geneva, sans-serif',\n            'Helvetica, sans-serif',\n            'Impact, sans-serif',\n            'Lucida Console, monospace',\n            'Lucida Grande, sans-serif',\n            'Lucida Sans Unicode,  sans-serif',\n            'Monaco, monospace',\n            'Palatino Linotype, serif',\n            'Palatino, serif',\n            'Times New Roman, serif',\n            'Times, serif',\n            'Verdana, sans-serif',\n        ];\n        var family = this.params.initialFont.family;\n        var initialValue = families[0];\n        if (family) {\n            // check for known values using lowercase\n            var lowerCaseValues = families.map(function (f) { return f.toLowerCase(); });\n            var valueIndex = lowerCaseValues.indexOf(family.toLowerCase());\n            if (valueIndex >= 0) {\n                initialValue = families[valueIndex];\n            }\n            else {\n                // add user provided value to list\n                var capitalisedFontValue = agGridCommunity._.capitalise(family);\n                families.push(capitalisedFontValue);\n                initialValue = capitalisedFontValue;\n            }\n        }\n        var options = families.sort().map(function (value) { return ({ value: value, text: value }); });\n        this.familySelect.addOptions(options)\n            .setValue(\"\" + initialValue)\n            .onValueChange(function (newValue) { return _this.params.setFont({ family: newValue }); });\n    };\n    FontPanel.prototype.initFontSizeSelect = function () {\n        var _this = this;\n        var sizes = [8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36];\n        var size = this.params.initialFont.size;\n        if (!agGridCommunity._.includes(sizes, size)) {\n            sizes.push(size);\n        }\n        var options = sizes.sort(function (a, b) { return a - b; }).map(function (value) { return ({ value: \"\" + value, text: \"\" + value }); });\n        this.sizeSelect.addOptions(options)\n            .setValue(\"\" + size)\n            .onValueChange(function (newValue) { return _this.params.setFont({ size: parseInt(newValue, 10) }); });\n        this.sizeSelect.setLabel(this.chartTranslator.translate('size'));\n    };\n    FontPanel.prototype.initFontWeightStyleSelect = function () {\n        var _this = this;\n        var _a = this.params.initialFont, _b = _a.weight, weight = _b === void 0 ? 'normal' : _b, _c = _a.style, style = _c === void 0 ? 'normal' : _c;\n        var weightStyles = [\n            { name: 'normal', weight: 'normal', style: 'normal' },\n            { name: 'bold', weight: 'bold', style: 'normal' },\n            { name: 'italic', weight: 'normal', style: 'italic' },\n            { name: 'boldItalic', weight: 'bold', style: 'italic' }\n        ];\n        var selectedOption = agGridCommunity._.find(weightStyles, function (x) { return x.weight === weight && x.style === style; });\n        if (!selectedOption) {\n            selectedOption = { name: 'predefined', weight: weight, style: style };\n            weightStyles.unshift(selectedOption);\n        }\n        var options = weightStyles.map(function (ws) { return ({\n            value: ws.name,\n            text: _this.chartTranslator.translate(ws.name),\n        }); });\n        this.weightStyleSelect.addOptions(options)\n            .setValue(selectedOption.name)\n            .onValueChange(function (newValue) {\n            var selectedWeightStyle = agGridCommunity._.find(weightStyles, function (x) { return x.name === newValue; });\n            _this.params.setFont({ weight: selectedWeightStyle.weight, style: selectedWeightStyle.style });\n        });\n    };\n    FontPanel.prototype.initFontColorPicker = function () {\n        var _this = this;\n        this.colorPicker\n            .setLabel(this.chartTranslator.translate('color'))\n            .setInputWidth(45)\n            .setValue(\"\" + this.params.initialFont.color)\n            .onValueChange(function (newColor) { return _this.params.setFont({ color: newColor }); });\n    };\n    FontPanel.prototype.destroyActiveComps = function () {\n        this.activeComps.forEach(function (comp) {\n            agGridCommunity._.removeFromParent(comp.getGui());\n            comp.destroy();\n        });\n    };\n    FontPanel.prototype.destroy = function () {\n        this.destroyActiveComps();\n        _super.prototype.destroy.call(this);\n    };\n    FontPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"fontGroup\\\">\\n                <ag-select ref=\\\"familySelect\\\"></ag-select>\\n                <ag-select ref=\\\"weightStyleSelect\\\"></ag-select>\\n                <div class=\\\"ag-group-subgroup\\\">\\n                    <ag-select ref=\\\"sizeSelect\\\"></ag-select>\\n                    <ag-color-picker ref=\\\"colorPicker\\\"></ag-color-picker>\\n                </div>\\n            </ag-group-component>\\n        </div>\";\n    __decorate$G([\n        agGridCommunity.RefSelector('fontGroup')\n    ], FontPanel.prototype, \"fontGroup\", void 0);\n    __decorate$G([\n        agGridCommunity.RefSelector('familySelect')\n    ], FontPanel.prototype, \"familySelect\", void 0);\n    __decorate$G([\n        agGridCommunity.RefSelector('weightStyleSelect')\n    ], FontPanel.prototype, \"weightStyleSelect\", void 0);\n    __decorate$G([\n        agGridCommunity.RefSelector('sizeSelect')\n    ], FontPanel.prototype, \"sizeSelect\", void 0);\n    __decorate$G([\n        agGridCommunity.RefSelector('colorPicker')\n    ], FontPanel.prototype, \"colorPicker\", void 0);\n    __decorate$G([\n        agGridCommunity.Autowired('chartTranslator')\n    ], FontPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$G([\n        agGridCommunity.PostConstruct\n    ], FontPanel.prototype, \"init\", null);\n    return FontPanel;\n}(agGridCommunity.Component));\n\nvar __extends$w = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$H = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar LegendPanel = /** @class */ (function (_super) {\n    __extends$w(LegendPanel, _super);\n    function LegendPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.activePanels = [];\n        _this.chartController = chartController;\n        return _this;\n    }\n    LegendPanel.prototype.init = function () {\n        this.setTemplate(LegendPanel.TEMPLATE);\n        this.initLegendGroup();\n        this.initLegendPosition();\n        this.initLegendPadding();\n        this.initLegendItems();\n        this.initLabelPanel();\n    };\n    LegendPanel.prototype.initLegendGroup = function () {\n        var _this = this;\n        this.legendGroup\n            .setTitle(this.chartTranslator.translate(\"legend\"))\n            .hideEnabledCheckbox(false)\n            .setEnabled(this.chartController.getChartProxy().getChartOption(\"legend.enabled\") || false)\n            .toggleGroupExpand(false)\n            .onEnableChange(function (enabled) {\n            _this.chartController.getChartProxy().setChartOption(\"legend.enabled\", enabled);\n            _this.legendGroup.toggleGroupExpand(true);\n        });\n    };\n    LegendPanel.prototype.initLegendPosition = function () {\n        var _this = this;\n        var positions = [\"top\", \"right\", \"bottom\", \"left\"];\n        this.legendPositionSelect\n            .setLabel(this.chartTranslator.translate(\"position\"))\n            .setLabelWidth(\"flex\")\n            .setInputWidth(80)\n            .addOptions(positions.map(function (position) { return ({\n            value: position,\n            text: _this.chartTranslator.translate(position)\n        }); }))\n            .setValue(this.chartController.getChartProxy().getChartOption(\"legend.position\"))\n            .onValueChange(function (newValue) { return _this.chartController.getChartProxy().setChartOption(\"legend.position\", newValue); });\n    };\n    LegendPanel.prototype.initLegendPadding = function () {\n        var _this = this;\n        this.legendPaddingSlider\n            .setLabel(this.chartTranslator.translate(\"padding\"))\n            .setValue(this.chartController.getChartProxy().getChartOption(\"legend.padding\"))\n            .setTextFieldWidth(45)\n            .setMaxValue(200)\n            .onValueChange(function (newValue) { return _this.chartController.getChartProxy().setChartOption(\"legend.padding\", newValue); });\n    };\n    LegendPanel.prototype.initLegendItems = function () {\n        var _this = this;\n        var initSlider = function (expression, labelKey, input, maxValue) {\n            input.setLabel(_this.chartTranslator.translate(labelKey))\n                .setValue(_this.chartController.getChartProxy().getChartOption(\"legend.\" + expression))\n                .setMaxValue(maxValue)\n                .setTextFieldWidth(45)\n                .onValueChange(function (newValue) { return _this.chartController.getChartProxy().setChartOption(\"legend.\" + expression, newValue); });\n        };\n        initSlider(\"item.marker.size\", \"markerSize\", this.markerSizeSlider, 40);\n        initSlider(\"item.marker.strokeWidth\", \"markerStroke\", this.markerStrokeSlider, 10);\n        initSlider(\"item.marker.padding\", \"markerPadding\", this.markerPaddingSlider, 20);\n        initSlider(\"item.paddingX\", \"itemPaddingX\", this.itemPaddingXSlider, 50);\n        initSlider(\"item.paddingY\", \"itemPaddingY\", this.itemPaddingYSlider, 50);\n    };\n    LegendPanel.prototype.initLabelPanel = function () {\n        var _this = this;\n        var chartProxy = this.chartController.getChartProxy();\n        var initialFont = {\n            family: chartProxy.getChartOption(\"legend.item.label.fontFamily\"),\n            style: chartProxy.getChartOption(\"legend.item.label.fontStyle\"),\n            weight: chartProxy.getChartOption(\"legend.item.label.fontWeight\"),\n            size: chartProxy.getChartOption(\"legend.item.label.fontSize\"),\n            color: chartProxy.getChartOption(\"legend.item.label.color\")\n        };\n        var setFont = function (font) {\n            var chartProxy = _this.chartController.getChartProxy();\n            if (font.family) {\n                chartProxy.setChartOption(\"legend.item.label.fontFamily\", font.family);\n            }\n            if (font.weight) {\n                chartProxy.setChartOption(\"legend.item.label.fontWeight\", font.weight);\n            }\n            if (font.style) {\n                chartProxy.setChartOption(\"legend.item.label.fontStyle\", font.style);\n            }\n            if (font.size) {\n                chartProxy.setChartOption(\"legend.item.label.fontSize\", font.size);\n            }\n            if (font.color) {\n                chartProxy.setChartOption(\"legend.item.label.color\", font.color);\n            }\n        };\n        var params = {\n            enabled: true,\n            suppressEnabledCheckbox: true,\n            initialFont: initialFont,\n            setFont: setFont\n        };\n        var fontPanelComp = this.wireBean(new FontPanel(params));\n        this.legendGroup.addItem(fontPanelComp);\n        this.activePanels.push(fontPanelComp);\n    };\n    LegendPanel.prototype.destroyActivePanels = function () {\n        this.activePanels.forEach(function (panel) {\n            agGridCommunity._.removeFromParent(panel.getGui());\n            panel.destroy();\n        });\n    };\n    LegendPanel.prototype.destroy = function () {\n        this.destroyActivePanels();\n        _super.prototype.destroy.call(this);\n    };\n    LegendPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"legendGroup\\\">\\n                <ag-select ref=\\\"legendPositionSelect\\\"></ag-select>\\n                <ag-slider ref=\\\"legendPaddingSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"markerSizeSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"markerStrokeSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"markerPaddingSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"itemPaddingXSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"itemPaddingYSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n    __decorate$H([\n        agGridCommunity.RefSelector('legendGroup')\n    ], LegendPanel.prototype, \"legendGroup\", void 0);\n    __decorate$H([\n        agGridCommunity.RefSelector('legendPositionSelect')\n    ], LegendPanel.prototype, \"legendPositionSelect\", void 0);\n    __decorate$H([\n        agGridCommunity.RefSelector('legendPaddingSlider')\n    ], LegendPanel.prototype, \"legendPaddingSlider\", void 0);\n    __decorate$H([\n        agGridCommunity.RefSelector('markerSizeSlider')\n    ], LegendPanel.prototype, \"markerSizeSlider\", void 0);\n    __decorate$H([\n        agGridCommunity.RefSelector('markerStrokeSlider')\n    ], LegendPanel.prototype, \"markerStrokeSlider\", void 0);\n    __decorate$H([\n        agGridCommunity.RefSelector('markerPaddingSlider')\n    ], LegendPanel.prototype, \"markerPaddingSlider\", void 0);\n    __decorate$H([\n        agGridCommunity.RefSelector('itemPaddingXSlider')\n    ], LegendPanel.prototype, \"itemPaddingXSlider\", void 0);\n    __decorate$H([\n        agGridCommunity.RefSelector('itemPaddingYSlider')\n    ], LegendPanel.prototype, \"itemPaddingYSlider\", void 0);\n    __decorate$H([\n        agGridCommunity.Autowired('chartTranslator')\n    ], LegendPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$H([\n        agGridCommunity.PostConstruct\n    ], LegendPanel.prototype, \"init\", null);\n    return LegendPanel;\n}(agGridCommunity.Component));\n\nvar __extends$x = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$I = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ShadowPanel = /** @class */ (function (_super) {\n    __extends$x(ShadowPanel, _super);\n    function ShadowPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.chartController = chartController;\n        return _this;\n    }\n    ShadowPanel.prototype.init = function () {\n        this.setTemplate(ShadowPanel.TEMPLATE);\n        this.shadowBlurSlider.setTextFieldWidth(45);\n        this.shadowXOffsetSlider.setTextFieldWidth(45);\n        this.shadowYOffsetSlider.setTextFieldWidth(45);\n        this.initSeriesShadow();\n    };\n    ShadowPanel.prototype.initSeriesShadow = function () {\n        var _this = this;\n        this.shadowGroup\n            .setTitle(this.chartTranslator.translate(\"shadow\"))\n            .setEnabled(this.chartController.getChartProxy().getShadowEnabled())\n            .hideOpenCloseIcons(true)\n            .hideEnabledCheckbox(false)\n            .onEnableChange(function (newValue) { return _this.chartController.getChartProxy().setShadowProperty(\"enabled\", newValue); });\n        this.shadowColorPicker\n            .setLabel(this.chartTranslator.translate(\"color\"))\n            .setLabelWidth(\"flex\")\n            .setInputWidth(45)\n            .setValue(\"rgba(0,0,0,0.5)\")\n            .onValueChange(function (newValue) { return _this.chartController.getChartProxy().setShadowProperty(\"color\", newValue); });\n        var initInput = function (input, property, minValue, maxValue) {\n            input.setLabel(_this.chartTranslator.translate(property))\n                .setValue(_this.chartController.getChartProxy().getShadowProperty(property))\n                .setMinValue(minValue)\n                .setMaxValue(maxValue)\n                .onValueChange(function (newValue) { return _this.chartController.getChartProxy().setShadowProperty(property, newValue); });\n        };\n        initInput(this.shadowBlurSlider, \"blur\", 0, 20);\n        initInput(this.shadowXOffsetSlider, \"xOffset\", -10, 10);\n        initInput(this.shadowYOffsetSlider, \"yOffset\", -10, 10);\n    };\n    ShadowPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"shadowGroup\\\">\\n                <ag-color-picker ref=\\\"shadowColorPicker\\\"></ag-color-picker>\\n                <ag-slider ref=\\\"shadowBlurSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"shadowXOffsetSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"shadowYOffsetSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n    __decorate$I([\n        agGridCommunity.RefSelector('shadowGroup')\n    ], ShadowPanel.prototype, \"shadowGroup\", void 0);\n    __decorate$I([\n        agGridCommunity.RefSelector('shadowColorPicker')\n    ], ShadowPanel.prototype, \"shadowColorPicker\", void 0);\n    __decorate$I([\n        agGridCommunity.RefSelector('shadowBlurSlider')\n    ], ShadowPanel.prototype, \"shadowBlurSlider\", void 0);\n    __decorate$I([\n        agGridCommunity.RefSelector('shadowXOffsetSlider')\n    ], ShadowPanel.prototype, \"shadowXOffsetSlider\", void 0);\n    __decorate$I([\n        agGridCommunity.RefSelector('shadowYOffsetSlider')\n    ], ShadowPanel.prototype, \"shadowYOffsetSlider\", void 0);\n    __decorate$I([\n        agGridCommunity.Autowired('chartTranslator')\n    ], ShadowPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$I([\n        agGridCommunity.PostConstruct\n    ], ShadowPanel.prototype, \"init\", null);\n    return ShadowPanel;\n}(agGridCommunity.Component));\n\nvar __extends$y = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$J = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar BarSeriesPanel = /** @class */ (function (_super) {\n    __extends$y(BarSeriesPanel, _super);\n    function BarSeriesPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.activePanels = [];\n        _this.chartController = chartController;\n        return _this;\n    }\n    BarSeriesPanel.prototype.init = function () {\n        this.setTemplate(BarSeriesPanel.TEMPLATE);\n        this.seriesGroup\n            .setTitle(this.chartTranslator.translate(\"series\"))\n            .toggleGroupExpand(false)\n            .hideEnabledCheckbox(true);\n        this.initSeriesTooltips();\n        this.initSeriesStrokeWidth();\n        this.initOpacity();\n        this.initLabelPanel();\n        this.initShadowPanel();\n    };\n    BarSeriesPanel.prototype.initSeriesTooltips = function () {\n        var _this = this;\n        this.seriesTooltipsToggle\n            .setLabel(this.chartTranslator.translate(\"tooltips\"))\n            .setLabelAlignment(\"left\")\n            .setLabelWidth(\"flex\")\n            .setInputWidth(40)\n            .setValue(this.getChartProxy().getSeriesOption(\"tooltip.enabled\") || false)\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"tooltip.enabled\", newValue); });\n    };\n    BarSeriesPanel.prototype.initSeriesStrokeWidth = function () {\n        var _this = this;\n        this.seriesStrokeWidthSlider\n            .setLabel(this.chartTranslator.translate(\"strokeWidth\"))\n            .setMaxValue(10)\n            .setTextFieldWidth(45)\n            .setValue(this.getChartProxy().getSeriesOption(\"stroke.width\"))\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"stroke.width\", newValue); });\n    };\n    BarSeriesPanel.prototype.initOpacity = function () {\n        var _this = this;\n        this.seriesLineOpacitySlider\n            .setLabel(this.chartTranslator.translate(\"strokeOpacity\"))\n            .setStep(0.05)\n            .setMaxValue(1)\n            .setTextFieldWidth(45)\n            .setValue(this.getChartProxy().getSeriesOption(\"stroke.opacity\") || \"1\")\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"stroke.opacity\", newValue); });\n        this.seriesFillOpacitySlider\n            .setLabel(this.chartTranslator.translate(\"fillOpacity\"))\n            .setStep(0.05)\n            .setMaxValue(1)\n            .setTextFieldWidth(45)\n            .setValue(this.getChartProxy().getSeriesOption(\"fill.opacity\") || \"1\")\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"fill.opacity\", newValue); });\n    };\n    BarSeriesPanel.prototype.initLabelPanel = function () {\n        var _this = this;\n        var chartProxy = this.getChartProxy();\n        var initialFont = {\n            family: chartProxy.getSeriesOption(\"label.fontFamily\"),\n            style: chartProxy.getSeriesOption(\"label.fontStyle\"),\n            weight: chartProxy.getSeriesOption(\"label.fontWeight\"),\n            size: chartProxy.getSeriesOption(\"label.fontSize\"),\n            color: chartProxy.getSeriesOption(\"label.color\")\n        };\n        var setFont = function (font) {\n            var chartProxy = _this.getChartProxy();\n            if (font.family) {\n                chartProxy.setSeriesOption(\"label.fontFamily\", font.family);\n            }\n            if (font.weight) {\n                chartProxy.setSeriesOption(\"label.fontWeight\", font.weight);\n            }\n            if (font.style) {\n                chartProxy.setSeriesOption(\"label.fontStyle\", font.style);\n            }\n            if (font.size) {\n                chartProxy.setSeriesOption(\"label.fontSize\", font.size);\n            }\n            if (font.color) {\n                chartProxy.setSeriesOption(\"label.color\", font.color);\n            }\n        };\n        var params = {\n            name: this.chartTranslator.translate('labels'),\n            enabled: chartProxy.getSeriesOption(\"label.enabled\") || false,\n            setEnabled: function (enabled) { return _this.getChartProxy().setSeriesOption(\"label.enabled\", enabled); },\n            suppressEnabledCheckbox: false,\n            initialFont: initialFont,\n            setFont: setFont\n        };\n        var labelPanelComp = this.wireBean(new FontPanel(params));\n        this.activePanels.push(labelPanelComp);\n        this.seriesGroup.addItem(labelPanelComp);\n    };\n    BarSeriesPanel.prototype.initShadowPanel = function () {\n        var shadowPanelComp = this.wireBean(new ShadowPanel(this.chartController));\n        this.seriesGroup.addItem(shadowPanelComp);\n        this.activePanels.push(shadowPanelComp);\n    };\n    BarSeriesPanel.prototype.destroyActivePanels = function () {\n        this.activePanels.forEach(function (panel) {\n            agGridCommunity._.removeFromParent(panel.getGui());\n            panel.destroy();\n        });\n    };\n    BarSeriesPanel.prototype.getChartProxy = function () {\n        return this.chartController.getChartProxy();\n    };\n    BarSeriesPanel.prototype.destroy = function () {\n        this.destroyActivePanels();\n        _super.prototype.destroy.call(this);\n    };\n    BarSeriesPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"seriesGroup\\\">\\n                <ag-toggle-button ref=\\\"seriesTooltipsToggle\\\"></ag-toggle-button>\\n                <ag-slider ref=\\\"seriesStrokeWidthSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesLineOpacitySlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesFillOpacitySlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n    __decorate$J([\n        agGridCommunity.RefSelector('seriesGroup')\n    ], BarSeriesPanel.prototype, \"seriesGroup\", void 0);\n    __decorate$J([\n        agGridCommunity.RefSelector('seriesTooltipsToggle')\n    ], BarSeriesPanel.prototype, \"seriesTooltipsToggle\", void 0);\n    __decorate$J([\n        agGridCommunity.RefSelector('seriesStrokeWidthSlider')\n    ], BarSeriesPanel.prototype, \"seriesStrokeWidthSlider\", void 0);\n    __decorate$J([\n        agGridCommunity.RefSelector('seriesLineOpacitySlider')\n    ], BarSeriesPanel.prototype, \"seriesLineOpacitySlider\", void 0);\n    __decorate$J([\n        agGridCommunity.RefSelector('seriesFillOpacitySlider')\n    ], BarSeriesPanel.prototype, \"seriesFillOpacitySlider\", void 0);\n    __decorate$J([\n        agGridCommunity.Autowired('chartTranslator')\n    ], BarSeriesPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$J([\n        agGridCommunity.PostConstruct\n    ], BarSeriesPanel.prototype, \"init\", null);\n    return BarSeriesPanel;\n}(agGridCommunity.Component));\n\nvar __extends$z = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$K = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AxisTicksPanel = /** @class */ (function (_super) {\n    __extends$z(AxisTicksPanel, _super);\n    function AxisTicksPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.chartController = chartController;\n        return _this;\n    }\n    AxisTicksPanel.prototype.init = function () {\n        this.setTemplate(AxisTicksPanel.TEMPLATE);\n        this.initAxisTicks();\n    };\n    AxisTicksPanel.prototype.initAxisTicks = function () {\n        var _this = this;\n        this.axisTicksGroup\n            .setTitle(this.chartTranslator.translate(\"ticks\"))\n            .hideOpenCloseIcons(true)\n            .hideEnabledCheckbox(true);\n        this.axisTicksColorPicker\n            .setLabel(this.chartTranslator.translate(\"color\"))\n            .setLabelWidth(\"flex\")\n            .setInputWidth(45)\n            .setValue(this.getChartProxy().getAxisProperty(\"tick.color\"))\n            .onValueChange(function (newColor) { return _this.getChartProxy().setAxisProperty(\"tick.color\", newColor); });\n        var initInput = function (expression, input, label, maxValue) {\n            input.setLabel(label)\n                .setValue(_this.getChartProxy().getAxisProperty(expression))\n                .setMaxValue(maxValue)\n                .setTextFieldWidth(45)\n                .onValueChange(function (newValue) { return _this.getChartProxy().setAxisProperty(expression, newValue); });\n        };\n        initInput(\"tick.width\", this.axisTicksWidthSlider, this.chartTranslator.translate(\"width\"), 10);\n        initInput(\"tick.size\", this.axisTicksSizeSlider, this.chartTranslator.translate(\"length\"), 30);\n    };\n    AxisTicksPanel.prototype.getChartProxy = function () {\n        return this.chartController.getChartProxy();\n    };\n    AxisTicksPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"axisTicksGroup\\\">\\n                <ag-color-picker ref=\\\"axisTicksColorPicker\\\"></ag-color-picker>\\n                <ag-slider ref=\\\"axisTicksWidthSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"axisTicksSizeSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n    __decorate$K([\n        agGridCommunity.RefSelector('axisTicksGroup')\n    ], AxisTicksPanel.prototype, \"axisTicksGroup\", void 0);\n    __decorate$K([\n        agGridCommunity.RefSelector('axisTicksColorPicker')\n    ], AxisTicksPanel.prototype, \"axisTicksColorPicker\", void 0);\n    __decorate$K([\n        agGridCommunity.RefSelector('axisTicksWidthSlider')\n    ], AxisTicksPanel.prototype, \"axisTicksWidthSlider\", void 0);\n    __decorate$K([\n        agGridCommunity.RefSelector('axisTicksSizeSlider')\n    ], AxisTicksPanel.prototype, \"axisTicksSizeSlider\", void 0);\n    __decorate$K([\n        agGridCommunity.Autowired('chartTranslator')\n    ], AxisTicksPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$K([\n        agGridCommunity.PostConstruct\n    ], AxisTicksPanel.prototype, \"init\", null);\n    return AxisTicksPanel;\n}(agGridCommunity.Component));\n\n// For small data structs like a bounding box, objects are superior to arrays\n// in terms of performance (by 3-4% in Chrome 71, Safari 12 and by 20% in Firefox 64).\n// They are also self descriptive and harder to abuse.\n// For example, one has to do:\n// `ctx.strokeRect(bbox.x, bbox.y, bbox.width, bbox.height);`\n// rather than become enticed by the much slower:\n// `ctx.strokeRect(...bbox);`\n// https://jsperf.com/array-vs-object-create-access\nvar BBox = /** @class */ (function () {\n    function BBox(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    BBox.prototype.isValid = function () {\n        return isFinite(this.x) && isFinite(this.y) && isFinite(this.width) && isFinite(this.height);\n    };\n    BBox.prototype.dilate = function (value) {\n        this.x -= value;\n        this.y -= value;\n        this.width += value * 2;\n        this.height += value * 2;\n    };\n    BBox.prototype.containsPoint = function (x, y) {\n        return x >= this.x && x <= (this.x + this.width)\n            && y >= this.y && y <= (this.y + this.height);\n    };\n    BBox.prototype.render = function (ctx, params) {\n        if (params === void 0) { params = BBox.noParams; }\n        ctx.save();\n        if (params.resetTransform) {\n            ctx.setTransform(1, 0, 0, 1, 0, 0);\n        }\n        ctx.strokeStyle = params.strokeStyle || 'cyan';\n        ctx.lineWidth = params.lineWidth || 1;\n        ctx.strokeRect(this.x, this.y, this.width, this.height);\n        if (params.label) {\n            ctx.fillStyle = params.fillStyle || 'black';\n            ctx.textBaseline = 'bottom';\n            ctx.fillText(params.label, this.x, this.y);\n        }\n        ctx.restore();\n    };\n    BBox.noParams = {};\n    return BBox;\n}());\n\n/**\n * As of Jan 8, 2019, Firefox still doesn't implement\n * `getTransform(): DOMMatrix;`\n * `setTransform(transform?: DOMMatrix2DInit)`\n * in the `CanvasRenderingContext2D`.\n * Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=928150\n * IE11 and Edge 44 also don't have the support.\n * Thus this class, to keep track of the current transform and\n * combine transformations.\n * Standards:\n * https://html.spec.whatwg.org/dev/canvas.html\n * https://www.w3.org/TR/geometry-1/\n */\nvar Matrix = /** @class */ (function () {\n    function Matrix(elements) {\n        if (elements === void 0) { elements = [1, 0, 0, 1, 0, 0]; }\n        this.elements = elements;\n    }\n    Matrix.prototype.setElements = function (elements) {\n        var e = this.elements;\n        // `this.elements = elements.slice()` is 4-5 times slower\n        // (in Chrome 71 and FF 64) than manually copying elements,\n        // since slicing allocates new memory.\n        // The performance of passing parameters individually\n        // vs as an array is about the same in both browsers, so we\n        // go with a single (array of elements) parameter, because\n        // `setElements(elements)` and `setElements([a, b, c, d, e, f])`\n        // calls give us roughly the same performance, versus\n        // `setElements(...elements)` and `setElements(a, b, c, d, e, f)`,\n        // where the spread operator causes a 20-30x performance drop\n        // (30x when compiled to ES5's `.apply(this, elements)`\n        //  20x when used natively).\n        e[0] = elements[0];\n        e[1] = elements[1];\n        e[2] = elements[2];\n        e[3] = elements[3];\n        e[4] = elements[4];\n        e[5] = elements[5];\n        return this;\n    };\n    Matrix.prototype.setIdentityElements = function () {\n        var e = this.elements;\n        e[0] = 1;\n        e[1] = 0;\n        e[2] = 0;\n        e[3] = 1;\n        e[4] = 0;\n        e[5] = 0;\n        return this;\n    };\n    Object.defineProperty(Matrix.prototype, \"identity\", {\n        get: function () {\n            var e = this.elements;\n            return e[0] === 1 && e[1] === 0 && e[2] === 0 &&\n                e[3] === 1 && e[4] === 0 && e[5] === 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix.prototype, \"a\", {\n        get: function () {\n            return this.elements[0];\n        },\n        set: function (value) {\n            this.elements[0] = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix.prototype, \"b\", {\n        get: function () {\n            return this.elements[1];\n        },\n        set: function (value) {\n            this.elements[1] = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix.prototype, \"c\", {\n        get: function () {\n            return this.elements[2];\n        },\n        set: function (value) {\n            this.elements[2] = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix.prototype, \"d\", {\n        get: function () {\n            return this.elements[3];\n        },\n        set: function (value) {\n            this.elements[3] = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix.prototype, \"e\", {\n        get: function () {\n            return this.elements[4];\n        },\n        set: function (value) {\n            this.elements[4] = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix.prototype, \"f\", {\n        get: function () {\n            return this.elements[5];\n        },\n        set: function (value) {\n            this.elements[5] = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Performs the AxB matrix multiplication and saves the result\n     * to `C`, if given, or to `A` otherwise.\n     */\n    Matrix.prototype.AxB = function (A, B, C) {\n        var m11 = A[0], m12 = A[1], m21 = A[2], m22 = A[3], m31 = A[4], m32 = A[5];\n        var o11 = B[0], o12 = B[1], o21 = B[2], o22 = B[3], o31 = B[4], o32 = B[5];\n        C = C || A;\n        C[0] = m11 * o11 + m21 * o12;\n        C[1] = m12 * o11 + m22 * o12;\n        C[2] = m11 * o21 + m21 * o22;\n        C[3] = m12 * o21 + m22 * o22;\n        C[4] = m11 * o31 + m21 * o32 + m31;\n        C[5] = m12 * o31 + m22 * o32 + m32;\n    };\n    /**\n     * The `other` matrix gets post-multiplied to the current matrix.\n     * Returns the current matrix.\n     * @param other\n     */\n    Matrix.prototype.multiplySelf = function (other) {\n        this.AxB(this.elements, other.elements);\n        return this;\n    };\n    /**\n     * The `other` matrix gets post-multiplied to the current matrix.\n     * Returns a new matrix.\n     * @param other\n     */\n    Matrix.prototype.multiply = function (other) {\n        var elements = new Array(6);\n        this.AxB(this.elements, other.elements, elements);\n        return new Matrix(elements);\n    };\n    Matrix.prototype.preMultiplySelf = function (other) {\n        this.AxB(other.elements, this.elements, this.elements);\n        return this;\n    };\n    /**\n     * Returns the inverse of this matrix as a new matrix.\n     */\n    Matrix.prototype.inverse = function () {\n        var _a = this.elements, a = _a[0], b = _a[1], c = _a[2], d = _a[3], e = _a[4], f = _a[5];\n        var rD = 1 / (a * d - b * c); // reciprocal of determinant\n        a *= rD;\n        b *= rD;\n        c *= rD;\n        d *= rD;\n        return new Matrix([d, -b, -c, a, c * f - d * e, b * e - a * f]);\n    };\n    /**\n     * Save the inverse of this matrix to the given matrix.\n     */\n    Matrix.prototype.inverseTo = function (other) {\n        var _a = this.elements, a = _a[0], b = _a[1], c = _a[2], d = _a[3], e = _a[4], f = _a[5];\n        var rD = 1 / (a * d - b * c); // reciprocal of determinant\n        a *= rD;\n        b *= rD;\n        c *= rD;\n        d *= rD;\n        other.setElements([d, -b, -c, a, c * f - d * e, b * e - a * f]);\n        return this;\n    };\n    Matrix.prototype.invertSelf = function () {\n        var elements = this.elements;\n        var a = elements[0], b = elements[1], c = elements[2], d = elements[3], e = elements[4], f = elements[5];\n        var rD = 1 / (a * d - b * c); // reciprocal of determinant\n        a *= rD;\n        b *= rD;\n        c *= rD;\n        d *= rD;\n        elements[0] = d;\n        elements[1] = -b;\n        elements[2] = -c;\n        elements[3] = a;\n        elements[4] = c * f - d * e;\n        elements[5] = b * e - a * f;\n        return this;\n    };\n    Matrix.prototype.clone = function () {\n        return new Matrix(this.elements.slice());\n    };\n    Matrix.prototype.transformPoint = function (x, y) {\n        var e = this.elements;\n        return {\n            x: x * e[0] + y * e[2] + e[4],\n            y: x * e[1] + y * e[3] + e[5]\n        };\n    };\n    Matrix.prototype.transformBBox = function (bbox, radius, target) {\n        if (radius === void 0) { radius = 0; }\n        var elements = this.elements;\n        var xx = elements[0];\n        var xy = elements[1];\n        var yx = elements[2];\n        var yy = elements[3];\n        var h_w = bbox.width * 0.5;\n        var h_h = bbox.height * 0.5;\n        var cx = bbox.x + h_w;\n        var cy = bbox.y + h_h;\n        var w, h;\n        if (radius) {\n            h_w -= radius;\n            h_h -= radius;\n            var sx = Math.sqrt(xx * xx + yx * yx);\n            var sy = Math.sqrt(xy * xy + yy * yy);\n            w = Math.abs(h_w * xx) + Math.abs(h_h * yx) + Math.abs(sx * radius);\n            h = Math.abs(h_w * xy) + Math.abs(h_h * yy) + Math.abs(sy * radius);\n        }\n        else {\n            w = Math.abs(h_w * xx) + Math.abs(h_h * yx);\n            h = Math.abs(h_w * xy) + Math.abs(h_h * yy);\n        }\n        if (!target) {\n            target = new BBox(0, 0, 0, 0);\n        }\n        target.x = cx * xx + cy * yx + elements[4] - w;\n        target.y = cx * xy + cy * yy + elements[5] - h;\n        target.width = w + w;\n        target.height = h + h;\n        return target;\n    };\n    Matrix.prototype.toContext = function (ctx) {\n        // It's fair to say that matrix multiplications are not cheap.\n        // However, updating path definitions on every frame isn't either, so\n        // it may be cheaper to just translate paths. It's also fair to\n        // say, that most paths will have to be re-rendered anyway, say\n        // rectangle paths in a bar chart, where an animation would happen when\n        // the data set changes and existing bars are morphed into new ones.\n        // Or a pie chart, where old sectors are also morphed into new ones.\n        // Same for the line chart. The only plausible case where translating\n        // existing paths would be enough, is the scatter chart, where marker\n        // icons, typically circles, stay the same size. But if circle radii\n        // are bound to some data points, even circle paths would have to be\n        // updated. And thus it makes sense to optimize for fewer matrix\n        // transforms, where transform matrices of paths are mostly identity\n        // matrices and `x`/`y`, `centerX`/`centerY` and similar properties\n        // are used to define a path at specific coordinates. And only groups\n        // are used to collectively apply a transform to a set of nodes.\n        // If the matrix is mostly identity (95% of the time),\n        // the `if (this.isIdentity)` check can make this call 3-4 times\n        // faster on average: https://jsperf.com/matrix-check-first-vs-always-set\n        if (this.identity) {\n            return;\n        }\n        var e = this.elements;\n        ctx.transform(e[0], e[1], e[2], e[3], e[4], e[5]);\n    };\n    Matrix.flyweight = function (elements) {\n        if (elements) {\n            if (elements instanceof Matrix) {\n                Matrix.matrix.setElements(elements.elements);\n            }\n            else {\n                Matrix.matrix.setElements(elements);\n            }\n        }\n        else {\n            Matrix.matrix.setIdentityElements();\n        }\n        return Matrix.matrix;\n    };\n    Matrix.matrix = new Matrix();\n    return Matrix;\n}());\n\nvar PointerEvents;\n(function (PointerEvents) {\n    PointerEvents[PointerEvents[\"All\"] = 0] = \"All\";\n    PointerEvents[PointerEvents[\"None\"] = 1] = \"None\";\n})(PointerEvents || (PointerEvents = {}));\n/**\n * Abstract scene graph node.\n * Each node can have zero or one parent and belong to zero or one scene.\n */\nvar Node = /** @class */ (function () {\n    function Node() {\n        /**\n         * Unique node ID in the form `ClassName-NaturalNumber`.\n         */\n        this.id = this.createId();\n        /**\n         * Some number to identify this node, typically within a `Group` node.\n         * Usually this will be some enum value used as a selector.\n         */\n        this.tag = NaN;\n        /**\n         * To simplify the type system (especially in Selections) we don't have the `Parent` node\n         * (one that has children). Instead, we mimic HTML DOM, where any node can have children.\n         * But we still need to distinguish regular leaf nodes from container leafs somehow.\n         */\n        this.isContainerNode = false;\n        this._children = [];\n        // Used to check for duplicate nodes.\n        this.childSet = {}; // new Set<Node>()\n        // These matrices may need to have package level visibility\n        // for performance optimization purposes.\n        this.matrix = new Matrix();\n        this.inverseMatrix = new Matrix();\n        // TODO: should this be `true` by default as well?\n        this._dirtyTransform = false;\n        this._scalingX = 1;\n        this._scalingY = 1;\n        /**\n         * The center of scaling.\n         * The default value of `null` means the scaling center will be\n         * determined automatically, as the center of the bounding box\n         * of a node.\n         */\n        this._scalingCenterX = null;\n        this._scalingCenterY = null;\n        this._rotationCenterX = null;\n        this._rotationCenterY = null;\n        /**\n         * Rotation angle in radians.\n         * The value is set as is. No normalization to the [-180, 180) or [0, 360)\n         * interval is performed.\n         */\n        this._rotation = 0;\n        this._translationX = 0;\n        this._translationY = 0;\n        /**\n         * Each time a property of the node that effects how it renders changes\n         * the `dirty` property of the node should be set to `true`. The change\n         * to the `dirty` property of the node will propagate up to its parents\n         * and eventually to the scene, at which point an animation frame callback\n         * will be scheduled to rerender the scene and its nodes and reset the `dirty`\n         * flags of all nodes and the {@link Scene._dirty | Scene} back to `false`.\n         * Since changes to node properties are not rendered immediately, it's possible\n         * to change as many properties on as many nodes as needed and the rendering\n         * will still only happen once in the next animation frame callback.\n         * The animation frame callback is only scheduled if it hasn't been already.\n         */\n        this._dirty = true;\n        this._visible = true;\n        this.pointerEvents = PointerEvents.All;\n    }\n    // Uniquely identify nodes (to check for duplicates, for example).\n    Node.prototype.createId = function () {\n        var constructor = this.constructor;\n        var className = constructor.className;\n        if (!className) {\n            throw new Error(\"The \" + constructor + \" is missing the 'className' property.\");\n        }\n        return className + '-' + (constructor.id = (constructor.id || 0) + 1);\n    };\n    /**\n     * This is meaningfully faster than `instanceof` and should be the preferred way\n     * of checking inside loops.\n     * @param node\n     */\n    Node.isNode = function (node) {\n        return node ? node.matrix !== undefined : false;\n    };\n    Node.prototype._setScene = function (value) {\n        this._scene = value;\n        var children = this.children;\n        var n = children.length;\n        for (var i = 0; i < n; i++) {\n            children[i]._setScene(value);\n        }\n    };\n    Object.defineProperty(Node.prototype, \"scene\", {\n        get: function () {\n            return this._scene;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Node.prototype._setParent = function (value) {\n        this._parent = value;\n    };\n    Object.defineProperty(Node.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"children\", {\n        get: function () {\n            return this._children;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Node.prototype.countChildren = function (depth) {\n        if (depth === void 0) { depth = Node.MAX_SAFE_INTEGER; }\n        if (depth <= 0) {\n            return 0;\n        }\n        var children = this.children;\n        var n = children.length;\n        var size = n;\n        for (var i = 0; i < n; i++) {\n            size += children[i].countChildren(depth - 1);\n        }\n        return size;\n    };\n    /**\n     * Appends one or more new node instances to this parent.\n     * If one needs to:\n     * - move a child to the end of the list of children\n     * - move a child from one parent to another (including parents in other scenes)\n     * one should use the {@link insertBefore} method instead.\n     * @param nodes A node or nodes to append.\n     */\n    Node.prototype.append = function (nodes) {\n        // Passing a single parameter to an open-ended version of `append`\n        // would be 30-35% slower than this.\n        if (Node.isNode(nodes)) {\n            nodes = [nodes];\n        }\n        // The function takes an array rather than having open-ended\n        // arguments like `...nodes: Node[]` because the latter is\n        // transpiled to a function where the `arguments` object\n        // is copied to a temporary array inside a loop.\n        // So an array is created either way. And if we already have\n        // an array of nodes we want to add, we have to use the prohibitively\n        // expensive spread operator to pass it to the function,\n        // and, on top of that, the copy of the `arguments` is still made.\n        var n = nodes.length;\n        for (var i = 0; i < n; i++) {\n            var node = nodes[i];\n            if (node.parent) {\n                throw new Error(node + \" already belongs to another parent: \" + node.parent + \".\");\n            }\n            if (node.scene) {\n                throw new Error(node + \" already belongs a scene: \" + node.scene + \".\");\n            }\n            if (this.childSet[node.id]) {\n                // Cast to `any` to avoid `Property 'name' does not exist on type 'Function'`.\n                throw new Error(\"Duplicate \" + node.constructor.name + \" node: \" + node);\n            }\n            this._children.push(node);\n            this.childSet[node.id] = true;\n            node._setParent(this);\n            node._setScene(this.scene);\n        }\n        this.dirty = true;\n    };\n    Node.prototype.appendChild = function (node) {\n        if (node.parent) {\n            throw new Error(node + \" already belongs to another parent: \" + node.parent + \".\");\n        }\n        if (node.scene) {\n            throw new Error(node + \" already belongs a scene: \" + node.scene + \".\");\n        }\n        if (this.childSet[node.id]) {\n            // Cast to `any` to avoid `Property 'name' does not exist on type 'Function'`.\n            throw new Error(\"Duplicate \" + node.constructor.name + \" node: \" + node);\n        }\n        this._children.push(node);\n        this.childSet[node.id] = true;\n        node._setParent(this);\n        node._setScene(this.scene);\n        this.dirty = true;\n        return node;\n    };\n    Node.prototype.removeChild = function (node) {\n        if (node.parent === this) {\n            var i = this.children.indexOf(node);\n            if (i >= 0) {\n                this._children.splice(i, 1);\n                delete this.childSet[node.id];\n                node._setParent(undefined);\n                node._setScene(undefined);\n                this.dirty = true;\n                return node;\n            }\n        }\n        throw new Error(\"The node to be removed is not a child of this node.\");\n    };\n    /**\n     * Inserts the node `node` before the existing child node `nextNode`.\n     * If `nextNode` is null, insert `node` at the end of the list of children.\n     * If the `node` belongs to another parent, it is first removed.\n     * Returns the `node`.\n     * @param node\n     * @param nextNode\n     */\n    Node.prototype.insertBefore = function (node, nextNode) {\n        var parent = node.parent;\n        if (node.parent) {\n            node.parent.removeChild(node);\n        }\n        if (nextNode && nextNode.parent === this) {\n            var i = this.children.indexOf(nextNode);\n            if (i >= 0) {\n                this._children.splice(i, 0, node);\n                this.childSet[node.id] = true;\n                node._setParent(this);\n                node._setScene(this.scene);\n            }\n            else {\n                throw new Error(nextNode + \" has \" + parent + \" as the parent, \"\n                    + \"but is not in its list of children.\");\n            }\n            this.dirty = true;\n        }\n        else {\n            this.append(node);\n        }\n        return node;\n    };\n    Object.defineProperty(Node.prototype, \"nextSibling\", {\n        get: function () {\n            var parent = this.parent;\n            if (parent) {\n                var children = parent.children;\n                var index = children.indexOf(this);\n                if (index >= 0 && index <= children.length - 1) {\n                    return children[index + 1];\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Calculates the combined inverse transformation for this node,\n     * and uses it to convert the given transformed point\n     * to the untransformed one.\n     * @param x\n     * @param y\n     */\n    Node.prototype.transformPoint = function (x, y) {\n        var matrix = Matrix.flyweight(this.matrix);\n        var parent = this.parent;\n        while (parent) {\n            matrix.preMultiplySelf(parent.matrix);\n            parent = parent.parent;\n        }\n        return matrix.invertSelf().transformPoint(x, y);\n    };\n    Object.defineProperty(Node.prototype, \"dirtyTransform\", {\n        get: function () {\n            return this._dirtyTransform;\n        },\n        set: function (value) {\n            this._dirtyTransform = value;\n            // TODO: replace this with simply `this.dirty = true`,\n            //       see `set dirty` method.\n            if (value) {\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"scalingX\", {\n        get: function () {\n            return this._scalingX;\n        },\n        set: function (value) {\n            if (this._scalingX !== value) {\n                this._scalingX = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"scalingY\", {\n        get: function () {\n            return this._scalingY;\n        },\n        set: function (value) {\n            if (this._scalingY !== value) {\n                this._scalingY = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"scalingCenterX\", {\n        get: function () {\n            return this._scalingCenterX;\n        },\n        set: function (value) {\n            if (this._scalingCenterX !== value) {\n                this._scalingCenterX = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"scalingCenterY\", {\n        get: function () {\n            return this._scalingCenterY;\n        },\n        set: function (value) {\n            if (this._scalingCenterY !== value) {\n                this._scalingCenterY = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"rotationCenterX\", {\n        get: function () {\n            return this._rotationCenterX;\n        },\n        set: function (value) {\n            if (this._rotationCenterX !== value) {\n                this._rotationCenterX = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"rotationCenterY\", {\n        get: function () {\n            return this._rotationCenterY;\n        },\n        set: function (value) {\n            if (this._rotationCenterY !== value) {\n                this._rotationCenterY = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"rotation\", {\n        get: function () {\n            return this._rotation;\n        },\n        set: function (value) {\n            if (this._rotation !== value) {\n                this._rotation = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"rotationDeg\", {\n        get: function () {\n            return this.rotation / Math.PI * 180;\n        },\n        /**\n         * For performance reasons the rotation angle's internal representation\n         * is in radians. Therefore, don't expect to get the same number you set.\n         * Even with integer angles about a quarter of them from 0 to 359 cannot\n         * be converted to radians and back without precision loss.\n         * For example:\n         *\n         *     node.rotationDeg = 11;\n         *     console.log(node.rotationDeg); // 10.999999999999998\n         *\n         * @param value Rotation angle in degrees.\n         */\n        set: function (value) {\n            this.rotation = value / 180 * Math.PI;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"translationX\", {\n        get: function () {\n            return this._translationX;\n        },\n        set: function (value) {\n            if (this._translationX !== value) {\n                this._translationX = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"translationY\", {\n        get: function () {\n            return this._translationY;\n        },\n        set: function (value) {\n            if (this._translationY !== value) {\n                this._translationY = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Node.prototype.isPointInNode = function (x, y) {\n        return false;\n    };\n    /**\n     * Hit testing method.\n     * Recursively checks if the given point is inside this node or any of its children.\n     * Returns the first matching node or `undefined`.\n     * Nodes that render later (show on top) are hit tested first.\n     * @param x\n     * @param y\n     */\n    Node.prototype.pickNode = function (x, y) {\n        if (!this.visible || this.pointerEvents === PointerEvents.None || !this.isPointInNode(x, y)) {\n            return;\n        }\n        var children = this.children;\n        if (children.length) {\n            // Nodes added later should be hit-tested first,\n            // as they are rendered on top of the previously added nodes.\n            for (var i = children.length - 1; i >= 0; i--) {\n                var hit = children[i].pickNode(x, y);\n                if (hit) {\n                    return hit;\n                }\n            }\n        }\n        else if (!this.isContainerNode) { // a leaf node, but not a container leaf\n            return this;\n        }\n    };\n    Node.prototype.computeBBox = function () { return; };\n    Node.prototype.computeBBoxCenter = function () {\n        var bbox = this.computeBBox && this.computeBBox();\n        if (bbox) {\n            return [\n                bbox.x + bbox.width * 0.5,\n                bbox.y + bbox.height * 0.5\n            ];\n        }\n        return [0, 0];\n    };\n    Node.prototype.computeTransformMatrix = function () {\n        // TODO: transforms without center of scaling and rotation correspond directly\n        //       to `setAttribute('transform', 'translate(tx, ty) rotate(rDeg) scale(sx, sy)')`\n        //       in SVG. Our use cases will mostly require positioning elements (rects, circles)\n        //       within a group, rotating groups at right angles (e.g. for axis) and translating\n        //       groups. We shouldn't even need `scale(1, -1)` (invert vertically), since this\n        //       can be done using D3-like scales already by inverting the output range.\n        //       So for now, just assume that centers of scaling and rotation are at the origin.\n        // const [bbcx, bbcy] = this.computeBBoxCenter();\n        var _a = [0, 0], bbcx = _a[0], bbcy = _a[1];\n        var sx = this.scalingX;\n        var sy = this.scalingY;\n        var scx;\n        var scy;\n        if (sx === 1 && sy === 1) {\n            scx = 0;\n            scy = 0;\n        }\n        else {\n            scx = this.scalingCenterX === null ? bbcx : this.scalingCenterX;\n            scy = this.scalingCenterY === null ? bbcy : this.scalingCenterY;\n        }\n        var r = this.rotation;\n        var cos = Math.cos(r);\n        var sin = Math.sin(r);\n        var rcx;\n        var rcy;\n        if (r === 0) {\n            rcx = 0;\n            rcy = 0;\n        }\n        else {\n            rcx = this.rotationCenterX === null ? bbcx : this.rotationCenterX;\n            rcy = this.rotationCenterY === null ? bbcy : this.rotationCenterY;\n        }\n        var tx = this.translationX;\n        var ty = this.translationY;\n        // The transform matrix `M` is a result of the following transformations:\n        // 1) translate the center of scaling to the origin\n        // 2) scale\n        // 3) translate back\n        // 4) translate the center of rotation to the origin\n        // 5) rotate\n        // 6) translate back\n        // 7) translate\n        //         (7)          (6)             (5)             (4)           (3)           (2)           (1)\n        //     | 1 0 tx |   | 1 0 rcx |   | cos -sin 0 |   | 1 0 -rcx |   | 1 0 scx |   | sx 0 0 |   | 1 0 -scx |\n        // M = | 0 1 ty | * | 0 1 rcy | * | sin  cos 0 | * | 0 1 -rcy | * | 0 1 scy | * | 0 sy 0 | * | 0 1 -scy |\n        //     | 0 0  1 |   | 0 0  1  |   |  0    0  1 |   | 0 0  1   |   | 0 0  1  |   | 0  0 0 |   | 0 0  1   |\n        // Translation after steps 1-4 above:\n        var tx4 = scx * (1 - sx) - rcx;\n        var ty4 = scy * (1 - sy) - rcy;\n        this.dirtyTransform = false;\n        this.matrix.setElements([\n            cos * sx, sin * sx,\n            -sin * sy, cos * sy,\n            cos * tx4 - sin * ty4 + rcx + tx,\n            sin * tx4 + cos * ty4 + rcy + ty\n        ]).inverseTo(this.inverseMatrix);\n    };\n    Object.defineProperty(Node.prototype, \"dirty\", {\n        get: function () {\n            return this._dirty;\n        },\n        set: function (value) {\n            // TODO: check if we are already dirty (e.g. if (this._dirty !== value))\n            //       if we are, then all parents and the scene have been\n            //       notified already, and we are doing redundant work\n            //       (but test if this is indeed the case)\n            this._dirty = value;\n            if (value) {\n                if (this.parent) {\n                    this.parent.dirty = true;\n                }\n                else if (this.scene) {\n                    this.scene.dirty = true;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"visible\", {\n        get: function () {\n            return this._visible;\n        },\n        set: function (value) {\n            if (this._visible !== value) {\n                this._visible = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Node.MAX_SAFE_INTEGER = Math.pow(2, 53) - 1; // Number.MAX_SAFE_INTEGER\n    return Node;\n}());\n\nvar __extends$A = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Group = /** @class */ (function (_super) {\n    __extends$A(Group, _super);\n    function Group() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isContainerNode = true;\n        return _this;\n    }\n    // We consider a group to be boundless, thus any point belongs to it.\n    Group.prototype.isPointInNode = function (x, y) {\n        return true;\n    };\n    Group.prototype.computeBBox = function () {\n        var left = Infinity;\n        var right = -Infinity;\n        var top = Infinity;\n        var bottom = -Infinity;\n        if (this.dirtyTransform) {\n            this.computeTransformMatrix();\n        }\n        this.children.forEach(function (child) {\n            if (!child.visible) {\n                return;\n            }\n            var bbox = child.computeBBox();\n            if (!bbox) {\n                return;\n            }\n            if (!(child instanceof Group)) {\n                if (child.dirtyTransform) {\n                    child.computeTransformMatrix();\n                }\n                var matrix = Matrix.flyweight(child.matrix);\n                var parent_1 = child.parent;\n                while (parent_1) {\n                    matrix.preMultiplySelf(parent_1.matrix);\n                    parent_1 = parent_1.parent;\n                }\n                matrix.transformBBox(bbox, 0, bbox);\n            }\n            var x = bbox.x;\n            var y = bbox.y;\n            if (x < left) {\n                left = x;\n            }\n            if (y < top) {\n                top = y;\n            }\n            if (x + bbox.width > right) {\n                right = x + bbox.width;\n            }\n            if (y + bbox.height > bottom) {\n                bottom = y + bbox.height;\n            }\n        });\n        return new BBox(left, top, right - left, bottom - top);\n    };\n    Group.prototype.render = function (ctx) {\n        // A group can have `scaling`, `rotation`, `translation` properties\n        // that are applied to the canvas context before children are rendered,\n        // so all children can be transformed at once.\n        if (this.dirtyTransform) {\n            this.computeTransformMatrix();\n        }\n        this.matrix.toContext(ctx);\n        var children = this.children;\n        var n = children.length;\n        for (var i = 0; i < n; i++) {\n            ctx.save();\n            var child = children[i];\n            if (child.visible) {\n                child.render(ctx);\n            }\n            ctx.restore();\n        }\n        // debug\n        // this.computeBBox().render(ctx, {\n        //     label: this.id,\n        //     resetTransform: true,\n        //     fillStyle: 'rgba(0, 0, 0, 0.5)'\n        // });\n    };\n    Group.className = 'Group';\n    return Group;\n}(Node));\n\nvar EnterNode = /** @class */ (function () {\n    function EnterNode(parent, datum) {\n        this.next = null;\n        this.scene = parent.scene;\n        this.parent = parent;\n        this.datum = datum;\n    }\n    EnterNode.prototype.appendChild = function (node) {\n        // This doesn't work without the `strict: true` in the `tsconfig.json`,\n        // so we must have two `if` checks below, instead of this single one.\n        // if (this.next && !Node.isNode(this.next)) {\n        //     throw new Error(`${this.next} is not a Node.`);\n        // }\n        if (this.next === null) {\n            return this.parent.insertBefore(node, null);\n        }\n        if (!Node.isNode(this.next)) {\n            throw new Error(this.next + \" is not a Node.\");\n        }\n        return this.parent.insertBefore(node, this.next);\n    };\n    EnterNode.prototype.insertBefore = function (node, nextNode) {\n        return this.parent.insertBefore(node, nextNode);\n    };\n    return EnterNode;\n}());\n/**\n * G - type of the selected node(s).\n * GDatum - type of the datum of the selected node(s).\n * P - type of the parent node(s).\n * PDatum - type of the datum of the parent node(s).\n */\nvar Selection = /** @class */ (function () {\n    function Selection(groups, parents) {\n        this.groups = groups;\n        this.parents = parents;\n    }\n    Selection.select = function (node) {\n        return new Selection([[typeof node === 'function' ? node() : node]], [undefined]);\n    };\n    Selection.selectAll = function (nodes) {\n        return new Selection([nodes == null ? [] : nodes], [undefined]);\n    };\n    /**\n     * Creates new nodes, appends them to the nodes of this selection and returns them\n     * as a new selection. The created nodes inherit the datums and the parents of the nodes\n     * they replace.\n     * @param Class The constructor function to use to create the new nodes.\n     */\n    Selection.prototype.append = function (Class) {\n        return this.select(function (node) {\n            return node.appendChild(new Class());\n        });\n    };\n    /**\n     * Same as the {@link append}, but accepts a custom creator function with the\n     * {@link NodeSelector} signature rather than a constructor function.\n     * @param creator\n     */\n    Selection.prototype.appendFn = function (creator) {\n        return this.select(function (node, data, index, group) {\n            return node.appendChild(creator(node, data, index, group));\n        });\n    };\n    /**\n     * Runs the given selector that returns a single node for every node in each group.\n     * The original nodes are then replaced by the nodes returned by the selector\n     * and returned as a new selection.\n     * The selected nodes inherit the datums and the parents of the original nodes.\n     */\n    Selection.prototype.select = function (selector) {\n        var groups = this.groups;\n        var numGroups = groups.length;\n        var subgroups = [];\n        for (var j = 0; j < numGroups; j++) {\n            var group = groups[j];\n            var groupSize = group.length;\n            var subgroup = subgroups[j] = new Array(groupSize);\n            for (var i = 0; i < groupSize; i++) {\n                var node = group[i];\n                if (node) {\n                    var subnode = selector(node, node.datum, i, group);\n                    if (subnode) {\n                        subnode.datum = node.datum;\n                    }\n                    subgroup[i] = subnode;\n                }\n                // else this can be a group of the `enter` selection,\n                // for example, with no nodes at the i-th position,\n                // only nodes at the end of the group\n            }\n        }\n        return new Selection(subgroups, this.parents);\n    };\n    /**\n     * Same as {@link select}, but uses the given {@param Class} (constructor) as a selector.\n     * @param Class The constructor function to use to find matching nodes.\n     */\n    Selection.prototype.selectByClass = function (Class) {\n        return this.select(function (node) {\n            if (Node.isNode(node)) {\n                var children = node.children;\n                var n = children.length;\n                for (var i = 0; i < n; i++) {\n                    var child = children[i];\n                    if (child instanceof Class) {\n                        return child;\n                    }\n                }\n            }\n        });\n    };\n    Selection.prototype.selectByTag = function (tag) {\n        return this.select(function (node) {\n            if (Node.isNode(node)) {\n                var children = node.children;\n                var n = children.length;\n                for (var i = 0; i < n; i++) {\n                    var child = children[i];\n                    if (child.tag === tag) {\n                        return child;\n                    }\n                }\n            }\n        });\n    };\n    Selection.prototype.selectAllByClass = function (Class) {\n        return this.selectAll(function (node) {\n            var nodes = [];\n            if (Node.isNode(node)) {\n                var children = node.children;\n                var n = children.length;\n                for (var i = 0; i < n; i++) {\n                    var child = children[i];\n                    if (child instanceof Class) {\n                        nodes.push(child);\n                    }\n                }\n            }\n            return nodes;\n        });\n    };\n    Selection.prototype.selectAllByTag = function (tag) {\n        return this.selectAll(function (node) {\n            var nodes = [];\n            if (Node.isNode(node)) {\n                var children = node.children;\n                var n = children.length;\n                for (var i = 0; i < n; i++) {\n                    var child = children[i];\n                    if (child.tag === tag) {\n                        nodes.push(child);\n                    }\n                }\n            }\n            return nodes;\n        });\n    };\n    Selection.prototype.selectNone = function () {\n        return [];\n    };\n    /**\n     * Runs the given selector that returns a group of nodes for every node in each group.\n     * The original nodes are then replaced by the groups of nodes returned by the selector\n     * and returned as a new selection. The original nodes become the parent nodes for each\n     * group in the new selection. The selected nodes do not inherit the datums of the original nodes.\n     * If called without any parameters, creates a new selection with an empty group for each\n     * node in this selection.\n     */\n    Selection.prototype.selectAll = function (selectorAll) {\n        if (!selectorAll) {\n            selectorAll = this.selectNone;\n        }\n        // Each subgroup is populated with the selector (run on each group node) results.\n        var subgroups = [];\n        // In the new selection that we return, subgroups become groups,\n        // and group nodes become parents.\n        var parents = [];\n        var groups = this.groups;\n        var groupCount = groups.length;\n        for (var j = 0; j < groupCount; j++) {\n            var group = groups[j];\n            var groupLength = group.length;\n            for (var i = 0; i < groupLength; i++) {\n                var node = group[i];\n                if (node) {\n                    subgroups.push(selectorAll(node, node.datum, i, group));\n                    parents.push(node);\n                }\n            }\n        }\n        return new Selection(subgroups, parents);\n    };\n    /**\n     * Runs the given callback for every node in this selection and returns this selection.\n     * @param cb\n     */\n    Selection.prototype.each = function (cb) {\n        var groups = this.groups;\n        var numGroups = groups.length;\n        for (var j = 0; j < numGroups; j++) {\n            var group = groups[j];\n            var groupSize = group.length;\n            for (var i = 0; i < groupSize; i++) {\n                var node = group[i];\n                if (node) {\n                    cb(node, node.datum, i, group);\n                }\n            }\n        }\n        return this;\n    };\n    Selection.prototype.remove = function () {\n        return this.each(function (node) {\n            if (Node.isNode(node)) {\n                var parent_1 = node.parent;\n                if (parent_1) {\n                    parent_1.removeChild(node);\n                }\n            }\n        });\n    };\n    Selection.prototype.merge = function (other) {\n        var groups0 = this.groups;\n        var groups1 = other.groups;\n        var m0 = groups0.length;\n        var m1 = groups1.length;\n        var m = Math.min(m0, m1);\n        var merges = new Array(m0);\n        var j = 0;\n        for (; j < m; j++) {\n            var group0 = groups0[j];\n            var group1 = groups1[j];\n            var n = group0.length;\n            var merge = merges[j] = new Array(n);\n            for (var i = 0; i < n; i++) {\n                var node = group0[i] || group1[i];\n                merge[i] = node || undefined;\n            }\n        }\n        for (; j < m0; j++) {\n            merges[j] = groups0[j];\n        }\n        return new Selection(merges, this.parents);\n    };\n    /**\n     * Return the first non-null element in this selection.\n     * If the selection is empty, returns null.\n     */\n    Selection.prototype.node = function () {\n        var groups = this.groups;\n        var numGroups = groups.length;\n        for (var j = 0; j < numGroups; j++) {\n            var group = groups[j];\n            var groupSize = group.length;\n            for (var i = 0; i < groupSize; i++) {\n                var node = group[i];\n                if (node) {\n                    return node;\n                }\n            }\n        }\n        return null;\n    };\n    Selection.prototype.attr = function (name, value) {\n        this.each(function (node) {\n            node[name] = value;\n        });\n        return this;\n    };\n    Selection.prototype.attrFn = function (name, value) {\n        this.each(function (node, datum, index, group) {\n            node[name] = value(node, datum, index, group);\n        });\n        return this;\n    };\n    /**\n     * Invokes the given function once, passing in this selection.\n     * Returns this selection. Facilitates method chaining.\n     * @param cb\n     */\n    Selection.prototype.call = function (cb) {\n        cb(this);\n        return this;\n    };\n    Object.defineProperty(Selection.prototype, \"size\", {\n        /**\n         * Returns the total number of nodes in this selection.\n         */\n        get: function () {\n            var size = 0;\n            this.each(function () { return size++; });\n            return size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Selection.prototype, \"data\", {\n        /**\n         * Returns the array of data for the selected elements.\n         */\n        get: function () {\n            var data = [];\n            this.each(function (_, datum) { return data.push(datum); });\n            return data;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Selection.prototype, \"enter\", {\n        get: function () {\n            return new Selection(this.enterGroups ? this.enterGroups : [[]], this.parents);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Selection.prototype, \"exit\", {\n        get: function () {\n            return new Selection(this.exitGroups ? this.exitGroups : [[]], this.parents);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Binds the given value to each selected node and returns this selection\n     * with its {@link GDatum} type changed to the type of the given value.\n     * This method doesn't compute a join and doesn't affect indexes or the enter and exit selections.\n     * This method can also be used to clear bound data.\n     * @param value\n     */\n    Selection.prototype.setDatum = function (value) {\n        return this.each(function (node) {\n            node.datum = value;\n        });\n    };\n    Object.defineProperty(Selection.prototype, \"datum\", {\n        /**\n         * Returns the bound datum for the first non-null element in the selection.\n         * This is generally useful only if you know the selection contains exactly one element.\n         */\n        get: function () {\n            var node = this.node();\n            return node ? node.datum : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Binds the specified array of values with the selected nodes, returning a new selection\n     * that represents the _update_ selection: the nodes successfully bound to the values.\n     * Also defines the {@link enter} and {@link exit} selections on the returned selection,\n     * which can be used to add or remove the nodes to correspond to the new data.\n     * The `values` is an array of values of a particular type, or a function that returns\n     * an array of values for each group.\n     * When values are assigned to the nodes, they are stored in the {@link Node.datum} property.\n     * @param values\n     * @param key\n     */\n    Selection.prototype.setData = function (values, key) {\n        if (typeof values !== 'function') {\n            var data_1 = values;\n            values = function () { return data_1; };\n        }\n        var groups = this.groups;\n        var parents = this.parents;\n        var numGroups = groups.length;\n        var updateGroups = new Array(numGroups);\n        var enterGroups = new Array(numGroups);\n        var exitGroups = new Array(numGroups);\n        for (var j = 0; j < numGroups; j++) {\n            var group = groups[j];\n            var parent_2 = parents[j];\n            if (!parent_2) {\n                throw new Error(\"Group #\" + j + \" has no parent: \" + group);\n            }\n            var groupSize = group.length;\n            var data = values(parent_2, parent_2.datum, j, parents);\n            var dataSize = data.length;\n            var enterGroup = enterGroups[j] = new Array(dataSize);\n            var updateGroup = updateGroups[j] = new Array(dataSize);\n            var exitGroup = exitGroups[j] = new Array(groupSize);\n            if (key) {\n                this.bindKey(parent_2, group, enterGroup, updateGroup, exitGroup, data, key);\n            }\n            else {\n                this.bindIndex(parent_2, group, enterGroup, updateGroup, exitGroup, data);\n            }\n            // Now connect the enter nodes to their following update node, such that\n            // appendChild can insert the materialized enter node before this node,\n            // rather than at the end of the parent node.\n            for (var i0 = 0, i1 = 0; i0 < dataSize; i0++) {\n                var previous = enterGroup[i0];\n                if (previous) {\n                    if (i0 >= i1) {\n                        i1 = i0 + 1;\n                    }\n                    var next = void 0;\n                    while (!(next = updateGroup[i1]) && i1 < dataSize) {\n                        i1++;\n                    }\n                    previous.next = next || null;\n                }\n            }\n        }\n        var result = new Selection(updateGroups, parents);\n        result.enterGroups = enterGroups;\n        result.exitGroups = exitGroups;\n        return result;\n    };\n    Selection.prototype.bindIndex = function (parent, group, enter, update, exit, data) {\n        var groupSize = group.length;\n        var dataSize = data.length;\n        var i = 0;\n        for (; i < dataSize; i++) {\n            var node = group[i];\n            if (node) {\n                node.datum = data[i];\n                update[i] = node;\n            }\n            else { // more datums than group nodes\n                enter[i] = new EnterNode(parent, data[i]);\n            }\n        }\n        // more group nodes than datums\n        for (; i < groupSize; i++) {\n            var node = group[i];\n            if (node) {\n                exit[i] = node;\n            }\n        }\n    };\n    Selection.prototype.bindKey = function (parent, group, enter, update, exit, data, key) {\n        var groupSize = group.length;\n        var dataSize = data.length;\n        var keyValues = new Array(groupSize);\n        var nodeByKeyValue = {};\n        // Compute the key for each node.\n        // If multiple nodes have the same key, the duplicates are added to exit.\n        for (var i = 0; i < groupSize; i++) {\n            var node = group[i];\n            if (node) {\n                var keyValue = keyValues[i] = Selection.keyPrefix + key(node, node.datum, i, group);\n                if (keyValue in nodeByKeyValue) {\n                    exit[i] = node;\n                }\n                else {\n                    nodeByKeyValue[keyValue] = node;\n                }\n            }\n        }\n        // Compute the key for each datum.\n        // If there is a node associated with this key, join and add it to update.\n        // If there is not (or the key is a duplicate), add it to enter.\n        for (var i = 0; i < dataSize; i++) {\n            var keyValue = Selection.keyPrefix + key(parent, data[i], i, data);\n            var node = nodeByKeyValue[keyValue];\n            if (node) {\n                update[i] = node;\n                node.datum = data[i];\n                nodeByKeyValue[keyValue] = undefined;\n            }\n            else {\n                enter[i] = new EnterNode(parent, data[i]);\n            }\n        }\n        // Add any remaining nodes that were not bound to data to exit.\n        for (var i = 0; i < groupSize; i++) {\n            var node = group[i];\n            if (node && (nodeByKeyValue[keyValues[i]] === node)) {\n                exit[i] = node;\n            }\n        }\n    };\n    Selection.keyPrefix = '$'; // Protect against keys like '__proto__'.\n    return Selection;\n}());\n\nfunction chainObjects(parent, child) {\n    var obj = Object.create(parent);\n    for (var prop in child) {\n        if (child.hasOwnProperty(prop)) {\n            obj[prop] = child[prop];\n        }\n    }\n    return obj;\n}\n\nvar __extends$B = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Shape = /** @class */ (function (_super) {\n    __extends$B(Shape, _super);\n    function Shape() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.lastInstanceId = 0;\n        _this._fillOpacity = 1;\n        _this._strokeOpacity = 1;\n        _this._fill = Shape.defaultStyles.fill;\n        /**\n         * Note that `strokeStyle = null` means invisible stroke,\n         * while `lineWidth = 0` means no stroke, and sometimes this can mean different things.\n         * For example, a rect shape with an invisible stroke may not align to the pixel grid\n         * properly because the stroke affects the rules of alignment, and arc shapes forming\n         * a pie chart will have a gap between them if they have an invisible stroke, whereas\n         * there would be not gap if there was no stroke at all.\n         * The preferred way of making the stroke invisible is setting the `lineWidth` to zero,\n         * unless specific looks that is achieved by having an invisible stroke is desired.\n         */\n        _this._stroke = Shape.defaultStyles.stroke;\n        _this._strokeWidth = Shape.defaultStyles.strokeWidth;\n        _this._lineDash = Shape.defaultStyles.lineDash;\n        _this._lineDashOffset = Shape.defaultStyles.lineDashOffset;\n        _this._lineCap = Shape.defaultStyles.lineCap;\n        _this._lineJoin = Shape.defaultStyles.lineJoin;\n        _this._opacity = Shape.defaultStyles.opacity;\n        _this.onShadowChange = function () {\n            _this.dirty = true;\n        };\n        _this._fillShadow = Shape.defaultStyles.fillShadow;\n        _this._strokeShadow = Shape.defaultStyles.strokeShadow;\n        return _this;\n    }\n    /**\n     * Creates a light-weight instance of the given shape (that serves as a template).\n     * The created instance only stores the properites set on the instance itself\n     * and the rest of the properties come via the prototype chain from the template.\n     * This can greatly reduce memory usage in cases where one has many simular shapes,\n     * for example, circles of different size, position and color. The exact memory usage\n     * reduction will depend on the size of the template and the number of own properties\n     * set on its lightweight instances, but will typically be around an order of magnitude\n     * or more.\n     *\n     * Note: template shapes are not supposed to be part of the scene graph (they should not\n     * have a parent).\n     *\n     * @param template\n     */\n    Shape.createInstance = function (template) {\n        var shape = Object.create(template);\n        shape._setParent(undefined);\n        shape.id = template.id + '-Instance-' + String(++template.lastInstanceId);\n        return shape;\n    };\n    /**\n     * Restores the default styles introduced by this subclass.\n     */\n    Shape.prototype.restoreOwnStyles = function () {\n        var styles = this.constructor.defaultStyles;\n        var keys = Object.getOwnPropertyNames(styles);\n        // getOwnPropertyNames is about 2.5 times faster than\n        // for..in with the hasOwnProperty check and in this\n        // case, where most properties are inherited, can be\n        // more then an order of magnitude faster.\n        for (var i = 0, n = keys.length; i < n; i++) {\n            var key = keys[i];\n            this[key] = styles[key];\n        }\n    };\n    Shape.prototype.restoreAllStyles = function () {\n        var styles = this.constructor.defaultStyles;\n        for (var property in styles) {\n            this[property] = styles[property];\n        }\n    };\n    /**\n     * Restores the base class default styles that have been overridden by this subclass.\n     */\n    Shape.prototype.restoreOverriddenStyles = function () {\n        var styles = this.constructor.defaultStyles;\n        var protoStyles = Object.getPrototypeOf(styles);\n        for (var property in styles) {\n            if (styles.hasOwnProperty(property) && protoStyles.hasOwnProperty(property)) {\n                this[property] = styles[property];\n            }\n        }\n    };\n    Object.defineProperty(Shape.prototype, \"fillOpacity\", {\n        get: function () {\n            return this._fillOpacity;\n        },\n        set: function (value) {\n            if (this._fillOpacity !== value) {\n                this._fillOpacity = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"strokeOpacity\", {\n        get: function () {\n            return this._strokeOpacity;\n        },\n        set: function (value) {\n            if (this._strokeOpacity !== value) {\n                this._strokeOpacity = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"fill\", {\n        get: function () {\n            return this._fill;\n        },\n        set: function (value) {\n            if (this._fill !== value) {\n                this._fill = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"stroke\", {\n        get: function () {\n            return this._stroke;\n        },\n        set: function (value) {\n            if (this._stroke !== value) {\n                this._stroke = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"strokeWidth\", {\n        get: function () {\n            return this._strokeWidth;\n        },\n        set: function (value) {\n            if (this._strokeWidth !== value) {\n                this._strokeWidth = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"lineDash\", {\n        get: function () {\n            return this._lineDash;\n        },\n        set: function (value) {\n            var oldValue = this._lineDash;\n            if (oldValue !== value) {\n                if (oldValue && value && oldValue.length === value.length) {\n                    var identical = true;\n                    var n = value.length;\n                    for (var i = 0; i < n; i++) {\n                        if (oldValue[i] !== value[i]) {\n                            identical = false;\n                            break;\n                        }\n                    }\n                    if (identical) {\n                        return;\n                    }\n                }\n                this._lineDash = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"lineDashOffset\", {\n        get: function () {\n            return this._lineDashOffset;\n        },\n        set: function (value) {\n            if (this._lineDashOffset !== value) {\n                this._lineDashOffset = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"lineCap\", {\n        get: function () {\n            return this._lineCap;\n        },\n        set: function (value) {\n            if (this._lineCap !== value) {\n                this._lineCap = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"lineJoin\", {\n        get: function () {\n            return this._lineJoin;\n        },\n        set: function (value) {\n            if (this._lineJoin !== value) {\n                this._lineJoin = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"opacity\", {\n        get: function () {\n            return this._opacity;\n        },\n        set: function (value) {\n            value = Math.min(1, Math.max(0, value));\n            if (this._opacity !== value) {\n                this._opacity = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"fillShadow\", {\n        get: function () {\n            return this._fillShadow;\n        },\n        set: function (value) {\n            var oldValue = this._fillShadow;\n            if (oldValue !== value) {\n                if (oldValue) {\n                    oldValue.removeEventListener('change', this.onShadowChange);\n                }\n                if (value) {\n                    value.addEventListener('change', this.onShadowChange);\n                }\n                this._fillShadow = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"strokeShadow\", {\n        get: function () {\n            return this._strokeShadow;\n        },\n        set: function (value) {\n            var oldValue = this._strokeShadow;\n            if (oldValue !== value) {\n                if (oldValue) {\n                    oldValue.removeEventListener('change', this.onShadowChange);\n                }\n                if (value) {\n                    value.addEventListener('change', this.onShadowChange);\n                }\n                this._strokeShadow = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Shape.prototype.fillStroke = function (ctx) {\n        if (!this.scene) {\n            return;\n        }\n        var pixelRatio = this.scene.canvas.pixelRatio || 1;\n        if (this.fill) {\n            ctx.fillStyle = this.fill;\n            ctx.globalAlpha = this.opacity * this.fillOpacity;\n            // The canvas context scaling (depends on the device's pixel ratio)\n            // has no effect on shadows, so we have to account for the pixel ratio\n            // manually here.\n            var fillShadow = this.fillShadow;\n            if (fillShadow && fillShadow.enabled) {\n                ctx.shadowColor = fillShadow.color;\n                ctx.shadowOffsetX = fillShadow.xOffset * pixelRatio;\n                ctx.shadowOffsetY = fillShadow.yOffset * pixelRatio;\n                ctx.shadowBlur = fillShadow.blur * pixelRatio;\n            }\n            ctx.fill();\n        }\n        ctx.shadowColor = 'rgba(0, 0, 0, 0)';\n        if (this.stroke && this.strokeWidth) {\n            ctx.strokeStyle = this.stroke;\n            ctx.globalAlpha = this.opacity * this.strokeOpacity;\n            ctx.lineWidth = this.strokeWidth;\n            if (this.lineDash) {\n                ctx.setLineDash(this.lineDash);\n            }\n            if (this.lineDashOffset) {\n                ctx.lineDashOffset = this.lineDashOffset;\n            }\n            if (this.lineCap) {\n                ctx.lineCap = this.lineCap;\n            }\n            if (this.lineJoin) {\n                ctx.lineJoin = this.lineJoin;\n            }\n            var strokeShadow = this.strokeShadow;\n            if (strokeShadow && strokeShadow.enabled) {\n                ctx.shadowColor = strokeShadow.color;\n                ctx.shadowOffsetX = strokeShadow.xOffset * pixelRatio;\n                ctx.shadowOffsetY = strokeShadow.yOffset * pixelRatio;\n                ctx.shadowBlur = strokeShadow.blur * pixelRatio;\n            }\n            ctx.stroke();\n        }\n    };\n    Shape.prototype.isPointInNode = function (x, y) {\n        return this.isPointInPath(x, y);\n    };\n    /**\n     * Defaults for style properties. Note that properties that affect the position\n     * and shape of the node are not considered style properties, for example:\n     * `x`, `y`, `width`, `height`, `radius`, `rotation`, etc.\n     * Can be used to reset to the original styling after some custom styling\n     * has been applied (using the `restoreOwnStyles` and `restoreAllStyles` methods).\n     * These static defaults are meant to be inherited by subclasses.\n     */\n    Shape.defaultStyles = chainObjects({}, {\n        fill: 'black',\n        stroke: undefined,\n        strokeWidth: 0,\n        lineDash: undefined,\n        lineDashOffset: 0,\n        lineCap: null,\n        lineJoin: null,\n        opacity: 1,\n        fillShadow: undefined,\n        strokeShadow: undefined\n    });\n    return Shape;\n}(Node));\n\nvar __extends$C = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Line = /** @class */ (function (_super) {\n    __extends$C(Line, _super);\n    function Line() {\n        var _this = _super.call(this) || this;\n        _this._x1 = 0;\n        _this._y1 = 0;\n        _this._x2 = 0;\n        _this._y2 = 0;\n        _this.restoreOwnStyles();\n        return _this;\n    }\n    Object.defineProperty(Line.prototype, \"x1\", {\n        get: function () {\n            // TODO: Investigate getter performance further in the context\n            //       of the scene graph.\n            //       In isolated benchmarks using a getter has the same\n            //       performance as a direct property access in Firefox 64.\n            //       But in Chrome 71 the getter is 60% slower than direct access.\n            //       Direct read is 4.5+ times slower in Chrome than it is in Firefox.\n            //       Property access and direct read have the same performance\n            //       in Safari 12, which is 2+ times faster than Firefox at this.\n            // https://jsperf.com/es5-getters-setters-versus-getter-setter-methods/18\n            // This is a know Chrome issue. They say it's not a regression, since\n            // the behavior is observed since M60, but jsperf.com history shows the\n            // 10x slowdown happened between Chrome 48 and Chrome 57.\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=908743\n            return this._x1;\n        },\n        set: function (value) {\n            if (this._x1 !== value) {\n                this._x1 = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Line.prototype, \"y1\", {\n        get: function () {\n            return this._y1;\n        },\n        set: function (value) {\n            if (this._y1 !== value) {\n                this._y1 = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Line.prototype, \"x2\", {\n        get: function () {\n            return this._x2;\n        },\n        set: function (value) {\n            if (this._x2 !== value) {\n                this._x2 = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Line.prototype, \"y2\", {\n        get: function () {\n            return this._y2;\n        },\n        set: function (value) {\n            if (this._y2 !== value) {\n                this._y2 = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Line.prototype.computeBBox = function () {\n        return new BBox(this.x1, this.y1, this.x2 - this.x1, this.y2 - this.y1);\n    };\n    Line.prototype.isPointInPath = function (x, y) {\n        return false;\n    };\n    Line.prototype.isPointInStroke = function (x, y) {\n        return false;\n    };\n    Line.prototype.render = function (ctx) {\n        if (this.dirtyTransform) {\n            this.computeTransformMatrix();\n        }\n        this.matrix.toContext(ctx);\n        var x1 = this.x1;\n        var y1 = this.y1;\n        var x2 = this.x2;\n        var y2 = this.y2;\n        // Align to the pixel grid if the line is strictly vertical\n        // or horizontal (but not both, i.e. a dot).\n        if (x1 === x2) {\n            var x = Math.round(x1) + Math.floor(this.strokeWidth) % 2 / 2;\n            x1 = x;\n            x2 = x;\n        }\n        else if (y1 === y2) {\n            var y = Math.round(y1) + Math.floor(this.strokeWidth) % 2 / 2;\n            y1 = y;\n            y2 = y;\n        }\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n        this.fillStroke(ctx);\n        this.dirty = false;\n    };\n    Line.className = 'Line';\n    Line.defaultStyles = chainObjects(Shape.defaultStyles, {\n        fill: undefined,\n        strokeWidth: 1\n    });\n    return Line;\n}(Shape));\n\nvar __extends$D = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nfunction ticks (a, b, count) {\n    var step = tickStep(a, b, count);\n    a = Math.ceil(a / step) * step;\n    b = Math.floor(b / step) * step + step / 2;\n    // Add half a step here so that the array returned by `range` includes the last tick.\n    return range(a, b, step);\n}\nvar e10 = Math.sqrt(50);\nvar e5 = Math.sqrt(10);\nvar e2 = Math.sqrt(2);\nfunction tickStep(a, b, count) {\n    var rawStep = Math.abs(b - a) / Math.max(0, count);\n    var step = Math.pow(10, Math.floor(Math.log(rawStep) / Math.LN10)); // = Math.log10(rawStep)\n    var error = rawStep / step;\n    if (error >= e10) {\n        step *= 10;\n    }\n    else if (error >= e5) {\n        step *= 5;\n    }\n    else if (error >= e2) {\n        step *= 2;\n    }\n    return b < a ? -step : step;\n}\nfunction tickIncrement(a, b, count) {\n    var rawStep = (b - a) / Math.max(0, count);\n    var power = Math.floor(Math.log(rawStep) / Math.LN10);\n    var error = rawStep / Math.pow(10, power);\n    return power >= 0\n        ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n        : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\nvar NumericTicks = /** @class */ (function (_super) {\n    __extends$D(NumericTicks, _super);\n    function NumericTicks(fractionDigits, size) {\n        if (size === void 0) { size = 0; }\n        var _this = _super.call(this, size) || this;\n        _this.fractionDigits = fractionDigits;\n        return _this;\n    }\n    return NumericTicks;\n}(Array));\nfunction range(a, b, step) {\n    if (step === void 0) { step = 1; }\n    var absStep = Math.abs(step);\n    var fractionDigits = (absStep > 0 && absStep < 1)\n        ? Math.abs(Math.floor(Math.log(absStep) / Math.LN10))\n        : 0;\n    var f = Math.pow(10, fractionDigits);\n    var n = Math.max(0, Math.ceil((b - a) / step)) || 0;\n    var values = new NumericTicks(fractionDigits, n);\n    for (var i = 0; i < n; i++) {\n        var value = a + step * i;\n        values[i] = Math.round(value * f) / f;\n    }\n    return values;\n}\n\nvar twoPi = Math.PI * 2;\n/**\n * Normalize the given angle to be in the [0, 2π) interval.\n * @param radians Angle in radians.\n */\nfunction normalizeAngle360(radians) {\n    radians %= twoPi;\n    radians += twoPi;\n    radians %= twoPi;\n    return radians;\n}\nfunction normalizeAngle360Inclusive(radians) {\n    radians %= twoPi;\n    radians += twoPi;\n    if (radians !== twoPi) {\n        radians %= twoPi;\n    }\n    return radians;\n}\n/**\n * Normalize the given angle to be in the [-π, π) interval.\n * @param radians Angle in radians.\n */\nfunction normalizeAngle180(radians) {\n    radians %= twoPi;\n    if (radians < -Math.PI) {\n        radians += twoPi;\n    }\n    else if (radians >= Math.PI) {\n        radians -= twoPi;\n    }\n    return radians;\n}\nfunction toRadians(degrees) {\n    return degrees / 180 * Math.PI;\n}\n\nvar __extends$E = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Text = /** @class */ (function (_super) {\n    __extends$E(Text, _super);\n    function Text() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._x = 0;\n        _this._y = 0;\n        _this.lineBreakRegex = /\\r?\\n/g;\n        _this.lines = [];\n        _this._text = '';\n        _this._dirtyFont = true;\n        _this._fontSize = 10;\n        _this._fontFamily = 'sans-serif';\n        _this._textAlign = Text.defaultStyles.textAlign;\n        _this._textBaseline = Text.defaultStyles.textBaseline;\n        _this._lineHeight = 14;\n        return _this;\n    }\n    Object.defineProperty(Text.prototype, \"x\", {\n        get: function () {\n            return this._x;\n        },\n        set: function (value) {\n            if (this._x !== value) {\n                this._x = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"y\", {\n        get: function () {\n            return this._y;\n        },\n        set: function (value) {\n            if (this._y !== value) {\n                this._y = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Text.prototype.splitText = function () {\n        this.lines = this._text.split(this.lineBreakRegex);\n    };\n    Object.defineProperty(Text.prototype, \"text\", {\n        get: function () {\n            return this._text;\n        },\n        set: function (value) {\n            var str = String(value); // `value` can be an object here\n            if (this._text !== str) {\n                this._text = str;\n                this.splitText();\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"font\", {\n        get: function () {\n            if (this.dirtyFont) {\n                this.dirtyFont = false;\n                this._font = [\n                    this.fontStyle || '',\n                    this.fontWeight || '',\n                    this.fontSize + 'px',\n                    this.fontFamily\n                ].join(' ').trim();\n            }\n            return this._font;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"dirtyFont\", {\n        get: function () {\n            return this._dirtyFont;\n        },\n        set: function (value) {\n            if (this._dirtyFont !== value) {\n                this._dirtyFont = value;\n                if (value) {\n                    this.dirty = true;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"fontStyle\", {\n        get: function () {\n            return this._fontStyle;\n        },\n        set: function (value) {\n            if (this._fontStyle !== value) {\n                this._fontStyle = value;\n                this.dirtyFont = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"fontWeight\", {\n        get: function () {\n            return this._fontWeight;\n        },\n        set: function (value) {\n            if (this._fontWeight !== value) {\n                this._fontWeight = value;\n                this.dirtyFont = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"fontSize\", {\n        get: function () {\n            return this._fontSize;\n        },\n        set: function (value) {\n            if (!isFinite(value)) {\n                value = 10;\n            }\n            if (this._fontSize !== value) {\n                this._fontSize = value;\n                this.dirtyFont = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"fontFamily\", {\n        get: function () {\n            return this._fontFamily;\n        },\n        set: function (value) {\n            if (this._fontFamily !== value) {\n                this._fontFamily = value;\n                this.dirtyFont = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"textAlign\", {\n        get: function () {\n            return this._textAlign;\n        },\n        set: function (value) {\n            if (this._textAlign !== value) {\n                this._textAlign = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"textBaseline\", {\n        get: function () {\n            return this._textBaseline;\n        },\n        set: function (value) {\n            if (this._textBaseline !== value) {\n                this._textBaseline = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"lineHeight\", {\n        get: function () {\n            return this._lineHeight;\n        },\n        set: function (value) {\n            // Multi-line text is complicated because:\n            // - Canvas does not support it natively, so we have to implement it manually\n            // - need to know the height of each line -> need to parse the font shorthand ->\n            //   generally impossible to do because font size may not be in pixels\n            // - so, need to measure the text instead, each line individually -> expensive\n            // - or make the user provide the line height manually for multi-line text\n            // - computeBBox should use the lineHeight for multi-line text but ignore it otherwise\n            // - textBaseline kind of loses its meaning for multi-line text\n            if (this._lineHeight !== value) {\n                this._lineHeight = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Text.prototype.computeBBox = function () {\n        return this.scene\n            ? this.scene.canvas.has.textMetrics\n                ? this.getPreciseBBox()\n                : this.getApproximateBBox()\n            : undefined;\n    };\n    Text.prototype.getPreciseBBox = function () {\n        var metrics = this.scene.canvas.measureText(this.text, this.font, this.textBaseline, this.textAlign);\n        return new BBox(this.x - metrics.actualBoundingBoxLeft, this.y - metrics.actualBoundingBoxAscent, metrics.width, metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent);\n    };\n    Text.prototype.getApproximateBBox = function () {\n        var size = this.scene.canvas.getTextSize(this.text, this.font);\n        var _a = this, x = _a.x, y = _a.y;\n        switch (this.textAlign) {\n            case 'end':\n            case 'right':\n                x -= size.width;\n                break;\n            case 'center':\n                x -= size.width / 2;\n        }\n        switch (this.textBaseline) {\n            case 'alphabetic':\n                y -= size.height * 0.7;\n                break;\n            case 'middle':\n                y -= size.height * 0.45;\n                break;\n            case 'ideographic':\n                y -= size.height;\n                break;\n            case 'hanging':\n                y -= size.height * 0.2;\n                break;\n            case 'bottom':\n                y -= size.height;\n                break;\n        }\n        return new BBox(x, y, size.width, size.height);\n    };\n    Text.prototype.isPointInPath = function (x, y) {\n        var point = this.transformPoint(x, y);\n        var bbox = this.computeBBox();\n        return bbox ? bbox.containsPoint(point.x, point.y) : false;\n    };\n    Text.prototype.isPointInStroke = function (x, y) {\n        return false;\n    };\n    Text.prototype.render = function (ctx) {\n        if (!this.lines.length) {\n            return;\n        }\n        if (this.dirtyTransform) {\n            this.computeTransformMatrix();\n        }\n        // this.matrix.transformBBox(this.computeBBox!()).render(ctx); // debug\n        this.matrix.toContext(ctx);\n        var _a = this, opacity = _a.opacity, fill = _a.fill, stroke = _a.stroke, strokeWidth = _a.strokeWidth;\n        if (opacity < 1) {\n            ctx.globalAlpha = opacity;\n        }\n        ctx.font = this.font;\n        ctx.textAlign = this.textAlign;\n        ctx.textBaseline = this.textBaseline;\n        var pixelRatio = this.scene.canvas.pixelRatio || 1;\n        if (fill) {\n            ctx.fillStyle = fill;\n            var _b = this, fillShadow = _b.fillShadow, text = _b.text, x = _b.x, y = _b.y;\n            if (fillShadow && fillShadow.enabled) {\n                ctx.shadowColor = fillShadow.color;\n                ctx.shadowOffsetX = fillShadow.xOffset * pixelRatio;\n                ctx.shadowOffsetY = fillShadow.yOffset * pixelRatio;\n                ctx.shadowBlur = fillShadow.blur * pixelRatio;\n            }\n            ctx.fillText(text, x, y);\n        }\n        if (stroke && strokeWidth) {\n            ctx.strokeStyle = stroke;\n            ctx.lineWidth = strokeWidth;\n            var _c = this, lineDash = _c.lineDash, lineDashOffset = _c.lineDashOffset, lineCap = _c.lineCap, lineJoin = _c.lineJoin, strokeShadow = _c.strokeShadow, text = _c.text, x = _c.x, y = _c.y;\n            if (lineDash) {\n                ctx.setLineDash(lineDash);\n            }\n            if (lineDashOffset) {\n                ctx.lineDashOffset = lineDashOffset;\n            }\n            if (lineCap) {\n                ctx.lineCap = lineCap;\n            }\n            if (lineJoin) {\n                ctx.lineJoin = lineJoin;\n            }\n            if (strokeShadow && strokeShadow.enabled) {\n                ctx.shadowColor = strokeShadow.color;\n                ctx.shadowOffsetX = strokeShadow.xOffset * pixelRatio;\n                ctx.shadowOffsetY = strokeShadow.yOffset * pixelRatio;\n                ctx.shadowBlur = strokeShadow.blur * pixelRatio;\n            }\n            ctx.strokeText(text, x, y);\n        }\n        this.dirty = false;\n    };\n    Text.className = 'Text';\n    Text.defaultStyles = chainObjects(Shape.defaultStyles, {\n        textAlign: 'start',\n        fontStyle: undefined,\n        fontWeight: undefined,\n        fontSize: 10,\n        fontFamily: 'sans-serif',\n        textBaseline: 'alphabetic'\n    });\n    return Text;\n}(Shape));\n\n// @ts-ignore Suppress tsc error: Property 'sign' does not exist on type 'Math'\nvar sign = Math.sign ? Math.sign : function (x) {\n    x = +x;\n    if (x === 0 || isNaN(x)) {\n        return x;\n    }\n    return x > 0 ? 1 : -1;\n};\n/**\n * Finds the roots of a parametric linear equation in `t`,\n * where `t` lies in the interval of `[0,1]`.\n */\nfunction linearRoot(a, b) {\n    var t = -b / a;\n    return (a !== 0 && t >= 0 && t <= 1) ? [t] : [];\n}\n/**\n * Finds the roots of a parametric quadratic equation in `t`,\n * where `t` lies in the interval of `[0,1]`.\n */\nfunction quadraticRoots(a, b, c) {\n    if (a === 0) {\n        return linearRoot(b, c);\n    }\n    var D = b * b - 4 * a * c; // The polynomial's discriminant.\n    var roots = [];\n    if (D === 0) { // A single real root.\n        var t = -b / (2 * a);\n        if (t >= 0 && t <= 1) {\n            roots.push(t);\n        }\n    }\n    else if (D > 0) { // A pair of distinct real roots.\n        var rD = Math.sqrt(D);\n        var t1 = (-b - rD) / (2 * a);\n        var t2 = (-b + rD) / (2 * a);\n        if (t1 >= 0 && t1 <= 1) {\n            roots.push(t1);\n        }\n        if (t2 >= 0 && t2 <= 1) {\n            roots.push(t2);\n        }\n    }\n    // else -> Complex roots.\n    return roots;\n}\n/**\n * Finds the roots of a parametric cubic equation in `t`,\n * where `t` lies in the interval of `[0,1]`.\n * Returns an array of parametric intersection locations along the cubic,\n * excluding out-of-bounds intersections (before or after the end point\n * or in the imaginary plane).\n * An adaptation of http://www.particleincell.com/blog/2013/cubic-line-intersection/\n */\nfunction cubicRoots(a, b, c, d) {\n    if (a === 0) {\n        return quadraticRoots(b, c, d);\n    }\n    var A = b / a;\n    var B = c / a;\n    var C = d / a;\n    var Q = (3 * B - A * A) / 9;\n    var R = (9 * A * B - 27 * C - 2 * A * A * A) / 54;\n    var D = Q * Q * Q + R * R; // The polynomial's discriminant.\n    var third = 1 / 3;\n    var roots = [];\n    if (D >= 0) { // Complex or duplicate roots.\n        var rD = Math.sqrt(D);\n        var S = sign(R + rD) * Math.pow(Math.abs(R + rD), third);\n        var T = sign(R - rD) * Math.pow(Math.abs(R - rD), third);\n        var Im = Math.abs(Math.sqrt(3) * (S - T) / 2); // Complex part of the root pair.\n        var t = -third * A + (S + T); // A real root.\n        if (t >= 0 && t <= 1) {\n            roots.push(t);\n        }\n        if (Im === 0) {\n            var t_1 = -third * A - (S + T) / 2; // The real part of a complex root.\n            if (t_1 >= 0 && t_1 <= 1) {\n                roots.push(t_1);\n            }\n        }\n    }\n    else { // Distinct real roots.\n        var theta = Math.acos(R / Math.sqrt(-Q * Q * Q));\n        var thirdA = third * A;\n        var twoSqrtQ = 2 * Math.sqrt(-Q);\n        var t1 = twoSqrtQ * Math.cos(third * theta) - thirdA;\n        var t2 = twoSqrtQ * Math.cos(third * (theta + 2 * Math.PI)) - thirdA;\n        var t3 = twoSqrtQ * Math.cos(third * (theta + 4 * Math.PI)) - thirdA;\n        if (t1 >= 0 && t1 <= 1) {\n            roots.push(t1);\n        }\n        if (t2 >= 0 && t2 <= 1) {\n            roots.push(t2);\n        }\n        if (t3 >= 0 && t3 <= 1) {\n            roots.push(t3);\n        }\n    }\n    return roots;\n}\n\n/**\n * Returns the intersection point for the given pair of line segments, or null,\n * if the segments are parallel or don't intersect.\n * Based on http://paulbourke.net/geometry/pointlineplane/\n */\nfunction segmentIntersection(ax1, ay1, ax2, ay2, bx1, by1, bx2, by2) {\n    var d = (ax2 - ax1) * (by2 - by1) - (ay2 - ay1) * (bx2 - bx1);\n    if (d === 0) { // The lines are parallel.\n        return null;\n    }\n    var ua = ((bx2 - bx1) * (ay1 - by1) - (ax1 - bx1) * (by2 - by1)) / d;\n    var ub = ((ax2 - ax1) * (ay1 - by1) - (ay2 - ay1) * (ax1 - bx1)) / d;\n    if (ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1) {\n        return {\n            x: ax1 + ua * (ax2 - ax1),\n            y: ay1 + ua * (ay2 - ay1)\n        };\n    }\n    return null; // The intersection point is outside either or both segments.\n}\n/**\n * Returns intersection points of the given cubic curve and the line segment.\n * Takes in x/y components of cubic control points and line segment start/end points\n * as parameters.\n */\nfunction cubicSegmentIntersections(px1, py1, px2, py2, px3, py3, px4, py4, x1, y1, x2, y2) {\n    var intersections = [];\n    // Find line equation coefficients.\n    var A = y1 - y2;\n    var B = x2 - x1;\n    var C = x1 * (y2 - y1) - y1 * (x2 - x1);\n    // Find cubic Bezier curve equation coefficients from control points.\n    var bx = bezierCoefficients(px1, px2, px3, px4);\n    var by = bezierCoefficients(py1, py2, py3, py4);\n    var a = A * bx[0] + B * by[0]; // t^3\n    var b = A * bx[1] + B * by[1]; // t^2\n    var c = A * bx[2] + B * by[2]; // t\n    var d = A * bx[3] + B * by[3] + C; // 1\n    var roots = cubicRoots(a, b, c, d);\n    // Verify that the roots are within bounds of the linear segment.\n    for (var i = 0; i < roots.length; i++) {\n        var t = roots[i];\n        var tt = t * t;\n        var ttt = t * tt;\n        // Find the cartesian plane coordinates for the parametric root `t`.\n        var x = bx[0] * ttt + bx[1] * tt + bx[2] * t + bx[3];\n        var y = by[0] * ttt + by[1] * tt + by[2] * t + by[3];\n        // The parametric cubic roots we found are intersection points\n        // with an infinite line, and so the x/y coordinates above are as well.\n        // Make sure the x/y is also within the bounds of the given segment.\n        var s = void 0;\n        if (x1 !== x2) {\n            s = (x - x1) / (x2 - x1);\n        }\n        else { // the line is vertical\n            s = (y - y1) / (y2 - y1);\n        }\n        if (s >= 0 && s <= 1) {\n            intersections.push({ x: x, y: y });\n        }\n    }\n    return intersections;\n}\n/**\n * Returns the given coordinates vector multiplied by the coefficient matrix\n * of the parametric cubic Bézier equation.\n */\nfunction bezierCoefficients(P1, P2, P3, P4) {\n    return [\n        -P1 + 3 * P2 - 3 * P3 + P4,\n        3 * P1 - 6 * P2 + 3 * P3,\n        -3 * P1 + 3 * P2,\n        P1 //                 | 1  0  0  0| |P4|\n    ];\n}\n\nvar Path2D = /** @class */ (function () {\n    function Path2D() {\n        // The methods of this class will likely be called many times per animation frame,\n        // and any allocation can trigger a GC cycle during animation, so we attempt\n        // to minimize the number of allocations.\n        this.commands = [];\n        this.params = [];\n        this._closedPath = false;\n    }\n    Path2D.prototype.moveTo = function (x, y) {\n        if (this.xy) {\n            this.xy[0] = x;\n            this.xy[1] = y;\n        }\n        else {\n            this.xy = [x, y];\n        }\n        this.commands.push('M');\n        this.params.push(x, y);\n    };\n    Path2D.prototype.lineTo = function (x, y) {\n        if (this.xy) {\n            this.commands.push('L');\n            this.params.push(x, y);\n            this.xy[0] = x;\n            this.xy[1] = y;\n        }\n        else {\n            this.moveTo(x, y);\n        }\n    };\n    Path2D.prototype.rect = function (x, y, width, height) {\n        this.moveTo(x, y);\n        this.lineTo(x + width, y);\n        this.lineTo(x + width, y + height);\n        this.lineTo(x, y + height);\n        this.closePath();\n    };\n    /**\n     * Adds an arc segment to the path definition.\n     * https://www.w3.org/TR/SVG11/paths.html#PathDataEllipticalArcCommands\n     * @param rx The major-axis radius.\n     * @param ry The minor-axis radius.\n     * @param rotation The x-axis rotation, expressed in radians.\n     * @param fA The large arc flag. `1` to use angle > π.\n     * @param fS The sweep flag. `1` for the arc that goes to `x`/`y` clockwise.\n     * @param x2 The x coordinate to arc to.\n     * @param y2 The y coordinate to arc to.\n     */\n    Path2D.prototype.arcTo = function (rx, ry, rotation, fA, fS, x2, y2) {\n        // Convert from endpoint to center parametrization:\n        // https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n        var xy = this.xy;\n        if (!xy) {\n            return;\n        }\n        if (rx < 0) {\n            rx = -rx;\n        }\n        if (ry < 0) {\n            ry = -ry;\n        }\n        var x1 = xy[0];\n        var y1 = xy[1];\n        var hdx = (x1 - x2) / 2;\n        var hdy = (y1 - y2) / 2;\n        var sinPhi = Math.sin(rotation);\n        var cosPhi = Math.cos(rotation);\n        var xp = cosPhi * hdx + sinPhi * hdy;\n        var yp = -sinPhi * hdx + cosPhi * hdy;\n        var ratX = xp / rx;\n        var ratY = yp / ry;\n        var lambda = ratX * ratX + ratY * ratY;\n        var cx = (x1 + x2) / 2;\n        var cy = (y1 + y2) / 2;\n        var cpx = 0;\n        var cpy = 0;\n        if (lambda >= 1) {\n            lambda = Math.sqrt(lambda);\n            rx *= lambda;\n            ry *= lambda;\n            // me gives lambda == cpx == cpy == 0;\n        }\n        else {\n            lambda = Math.sqrt(1 / lambda - 1);\n            if (fA === fS) {\n                lambda = -lambda;\n            }\n            cpx = lambda * rx * ratY;\n            cpy = -lambda * ry * ratX;\n            cx += cosPhi * cpx - sinPhi * cpy;\n            cy += sinPhi * cpx + cosPhi * cpy;\n        }\n        var theta1 = Math.atan2((yp - cpy) / ry, (xp - cpx) / rx);\n        var deltaTheta = Math.atan2((-yp - cpy) / ry, (-xp - cpx) / rx) - theta1;\n        // if (fS) {\n        //     if (deltaTheta <= 0) {\n        //         deltaTheta += Math.PI * 2;\n        //     }\n        // }\n        // else {\n        //     if (deltaTheta >= 0) {\n        //         deltaTheta -= Math.PI * 2;\n        //     }\n        // }\n        this.cubicArc(cx, cy, rx, ry, rotation, theta1, theta1 + deltaTheta, 1 - fS);\n    };\n    Path2D.prototype.arcToAlt = function (rx, ry, rotation, fA, fS, x2, y2) {\n        // Convert from endpoint to center parametrization. See:\n        // https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n        if (!this.xy) {\n            return;\n        }\n        var x1 = this.xy[0];\n        var y1 = this.xy[1];\n    };\n    /**\n     * Approximates an elliptical arc with up to four cubic Bézier curves.\n     * @param commands The string array to write SVG command letters to.\n     * @param params The number array to write SVG command parameters (cubic control points) to.\n     * @param cx The x-axis coordinate for the ellipse's center.\n     * @param cy The y-axis coordinate for the ellipse's center.\n     * @param rx The ellipse's major-axis radius.\n     * @param ry The ellipse's minor-axis radius.\n     * @param phi The rotation for this ellipse, expressed in radians.\n     * @param theta1 The starting angle, measured clockwise from the positive x-axis and expressed in radians.\n     * @param theta2 The ending angle, measured clockwise from the positive x-axis and expressed in radians.\n     * @param anticlockwise The arc control points are always placed clockwise from `theta1` to `theta2`,\n     * even when `theta1 > theta2`, unless this flag is set to `1`.\n     */\n    Path2D.cubicArc = function (commands, params, cx, cy, rx, ry, phi, theta1, theta2, anticlockwise) {\n        if (anticlockwise) {\n            var temp = theta1;\n            theta1 = theta2;\n            theta2 = temp;\n        }\n        var start = params.length;\n        // See https://pomax.github.io/bezierinfo/#circles_cubic\n        // Arc of unit circle (start angle = 0, end angle <= π/2) in cubic Bézier coordinates:\n        // S = [1, 0]\n        // C1 = [1, f]\n        // C2 = [cos(θ) + f * sin(θ), sin(θ) - f * cos(θ)]\n        // E = [cos(θ), sin(θ)]\n        // f = 4/3 * tan(θ/4)\n        var f90 = 0.5522847498307935; // f for θ = π/2 is 4/3 * (Math.sqrt(2) - 1)\n        var sinTheta1 = Math.sin(theta1);\n        var cosTheta1 = Math.cos(theta1);\n        var sinPhi = Math.sin(phi);\n        var cosPhi = Math.cos(phi);\n        var rightAngle = Math.PI / 2;\n        // Since we know how to draw an arc of a unit circle with a cubic Bézier,\n        // to draw an elliptical arc with arbitrary rotation and radii we:\n        // 1) rotate the Bézier coordinates that represent a circular arc by θ\n        // 2) scale the circular arc separately along the x/y axes, making it elliptical\n        // 3) rotate elliptical arc by φ\n        // |cos(φ) -sin(φ)| |sx  0| |cos(θ) -sin(θ)| -> |xx xy|\n        // |sin(φ)  cos(φ)| | 0 sy| |sin(θ)  cos(θ)| -> |yx yy|\n        var xx = cosPhi * cosTheta1 * rx - sinPhi * sinTheta1 * ry;\n        var yx = sinPhi * cosTheta1 * rx + cosPhi * sinTheta1 * ry;\n        var xy = -cosPhi * sinTheta1 * rx - sinPhi * cosTheta1 * ry;\n        var yy = -sinPhi * sinTheta1 * rx + cosPhi * cosTheta1 * ry;\n        // TODO: what if delta between θ1 and θ2 is greater than 2π?\n        // Always draw clockwise from θ1 to θ2.\n        theta2 -= theta1;\n        if (theta2 < 0) {\n            theta2 += Math.PI * 2;\n        }\n        // Multiplying each point [x, y] by:\n        // |xx xy cx| |x|\n        // |yx yy cy| |y|\n        // | 0  0  1| |1|\n        // TODO: This move command may be redundant, if we are already at this point.\n        // The coordinates of the point calculated here may differ ever so slightly\n        // because of precision error.\n        commands.push('M');\n        params.push(xx + cx, yx + cy);\n        while (theta2 >= rightAngle) {\n            theta2 -= rightAngle;\n            commands.push('C');\n            // Temp workaround for https://bugs.chromium.org/p/chromium/issues/detail?id=993330\n            // Revert this commit when fixed ^^.\n            var lastX = xy + cx;\n            params.push(xx + xy * f90 + cx, yx + yy * f90 + cy, xx * f90 + xy + cx, yx * f90 + yy + cy, Math.abs(lastX) < 1e-8 ? 0 : lastX, yy + cy);\n            // Prepend π/2 rotation matrix.\n            // |xx xy| | 0 1| -> | xy -xx|\n            // |yx yy| |-1 0| -> | yy -yx|\n            // [xx, yx, xy, yy] = [xy, yy, -xx, -yx];\n            // Compared to swapping with a temp variable, destructuring is:\n            // - 10% faster in Chrome 70\n            // - 99% slower in Firefox 63\n            // Temp variable solution is 45% faster in FF than Chrome.\n            // https://jsperf.com/multi-swap\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1165569\n            var temp = xx;\n            xx = xy;\n            xy = -temp;\n            temp = yx;\n            yx = yy;\n            yy = -temp;\n        }\n        if (theta2) {\n            var f = 4 / 3 * Math.tan(theta2 / 4);\n            var sinPhi2 = Math.sin(theta2);\n            var cosPhi2 = Math.cos(theta2);\n            var C2x = cosPhi2 + f * sinPhi2;\n            var C2y = sinPhi2 - f * cosPhi2;\n            commands.push('C');\n            // Temp workaround for https://bugs.chromium.org/p/chromium/issues/detail?id=993330\n            // Revert this commit when fixed ^^.\n            var lastX = xx * cosPhi2 + xy * sinPhi2 + cx;\n            params.push(xx + xy * f + cx, yx + yy * f + cy, xx * C2x + xy * C2y + cx, yx * C2x + yy * C2y + cy, Math.abs(lastX) < 1e-8 ? 0 : lastX, yx * cosPhi2 + yy * sinPhi2 + cy);\n        }\n        if (anticlockwise) {\n            for (var i = start, j = params.length - 2; i < j; i += 2, j -= 2) {\n                var temp = params[i];\n                params[i] = params[j];\n                params[j] = temp;\n                temp = params[i + 1];\n                params[i + 1] = params[j + 1];\n                params[j + 1] = temp;\n            }\n        }\n    };\n    Path2D.prototype.cubicArc = function (cx, cy, rx, ry, phi, theta1, theta2, anticlockwise) {\n        var commands = this.commands;\n        var params = this.params;\n        var start = commands.length;\n        Path2D.cubicArc(commands, params, cx, cy, rx, ry, phi, theta1, theta2, anticlockwise);\n        var x = params[params.length - 2];\n        var y = params[params.length - 1];\n        if (this.xy) {\n            commands[start] = 'L';\n            this.xy[0] = x;\n            this.xy[1] = y;\n        }\n        else {\n            this.xy = [x, y];\n        }\n    };\n    /**\n     * Returns the `[x, y]` coordinates of the curve at `t`.\n     * @param points `(n + 1) * 2` control point coordinates for a Bézier curve of n-th order.\n     * @param t\n     */\n    Path2D.prototype.deCasteljau = function (points, t) {\n        var n = points.length;\n        if (n < 2 || n % 2 === 1) {\n            throw new Error('Fewer than two points or not an even count.');\n        }\n        else if (n === 2 || t === 0) {\n            return points.slice(0, 2);\n        }\n        else if (t === 1) {\n            return points.slice(-2);\n        }\n        else {\n            var newPoints = [];\n            var last = n - 2;\n            for (var i = 0; i < last; i += 2) {\n                newPoints.push((1 - t) * points[i] + t * points[i + 2], // x\n                (1 - t) * points[i + 1] + t * points[i + 3] // y\n                );\n            }\n            return this.deCasteljau(newPoints, t);\n        }\n    };\n    /**\n     * Approximates the given curve using `n` line segments.\n     * @param points `(n + 1) * 2` control point coordinates for a Bézier curve of n-th order.\n     * @param n\n     */\n    Path2D.prototype.approximateCurve = function (points, n) {\n        var xy = this.deCasteljau(points, 0);\n        this.moveTo(xy[0], xy[1]);\n        var step = 1 / n;\n        for (var t = step; t <= 1; t += step) {\n            var xy_1 = this.deCasteljau(points, t);\n            this.lineTo(xy_1[0], xy_1[1]);\n        }\n    };\n    /**\n     * Adds a quadratic curve segment to the path definition.\n     * Note: the given quadratic segment is converted and stored as a cubic one.\n     * @param cx x-component of the curve's control point\n     * @param cy y-component of the curve's control point\n     * @param x x-component of the end point\n     * @param y y-component of the end point\n     */\n    Path2D.prototype.quadraticCurveTo = function (cx, cy, x, y) {\n        if (!this.xy) {\n            this.moveTo(cx, cy);\n        }\n        // See https://pomax.github.io/bezierinfo/#reordering\n        this.cubicCurveTo((this.xy[0] + 2 * cx) / 3, (this.xy[1] + 2 * cy) / 3, // 1/3 start + 2/3 control\n        (2 * cx + x) / 3, (2 * cy + y) / 3, // 2/3 control + 1/3 end\n        x, y);\n    };\n    Path2D.prototype.cubicCurveTo = function (cx1, cy1, cx2, cy2, x, y) {\n        if (!this.xy) {\n            this.moveTo(cx1, cy1);\n        }\n        this.commands.push('C');\n        this.params.push(cx1, cy1, cx2, cy2, x, y);\n        this.xy[0] = x;\n        this.xy[1] = y;\n    };\n    Object.defineProperty(Path2D.prototype, \"closedPath\", {\n        get: function () {\n            return this._closedPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Path2D.prototype.closePath = function () {\n        if (this.xy) {\n            this.xy = undefined;\n            this.commands.push('Z');\n            this._closedPath = true;\n        }\n    };\n    Path2D.prototype.clear = function () {\n        this.commands.length = 0;\n        this.params.length = 0;\n        this.xy = undefined;\n        this._closedPath = false;\n    };\n    Path2D.prototype.isPointInPath = function (x, y) {\n        var commands = this.commands;\n        var params = this.params;\n        var cn = commands.length;\n        // Hit testing using ray casting method, where the ray's origin is some point\n        // outside the path. In this case, an offscreen point that is remote enough, so that\n        // even if the path itself is large and is partially offscreen, the ray's origin\n        // will likely be outside the path anyway. To test if the given point is inside the\n        // path or not, we cast a ray from the origin to the given point and check the number\n        // of intersections of this segment with the path. If the number of intersections is\n        // even, then the ray both entered and exited the path an equal number of times,\n        // therefore the point is outside the path, and inside the path, if the number of\n        // intersections is odd. Since the path is compound, we check if the ray segment\n        // intersects with each of the path's segments, which can be either a line segment\n        // (one or no intersection points) or a Bézier curve segment (up to 3 intersection\n        // points).\n        var ox = -10000;\n        var oy = -10000;\n        // the starting point of the  current path\n        var sx = NaN;\n        var sy = NaN;\n        // the previous point of the current path\n        var px = 0;\n        var py = 0;\n        var intersectionCount = 0;\n        for (var ci = 0, pi = 0; ci < cn; ci++) {\n            switch (commands[ci]) {\n                case 'M':\n                    if (!isNaN(sx)) {\n                        if (segmentIntersection(sx, sy, px, py, ox, oy, x, y)) {\n                            intersectionCount++;\n                        }\n                    }\n                    sx = px = params[pi++];\n                    sy = py = params[pi++];\n                    break;\n                case 'L':\n                    if (segmentIntersection(px, py, px = params[pi++], py = params[pi++], ox, oy, x, y)) {\n                        intersectionCount++;\n                    }\n                    break;\n                case 'C':\n                    intersectionCount += cubicSegmentIntersections(px, py, params[pi++], params[pi++], params[pi++], params[pi++], px = params[pi++], py = params[pi++], ox, oy, x, y).length;\n                    break;\n                case 'Z':\n                    if (!isNaN(sx)) {\n                        if (segmentIntersection(sx, sy, px, py, ox, oy, x, y)) {\n                            intersectionCount++;\n                        }\n                    }\n                    break;\n            }\n        }\n        return intersectionCount % 2 === 1;\n    };\n    Path2D.fromString = function (value) {\n        var path = new Path2D();\n        path.setFromString(value);\n        return path;\n    };\n    /**\n     * Split the SVG path at command letters,\n     * then extract the command letter and parameters from each substring.\n     * @param value\n     */\n    Path2D.parseSvgPath = function (value) {\n        return value.trim().split(Path2D.splitCommandsRe).map(function (part) {\n            var strParams = part.match(Path2D.matchParamsRe);\n            return {\n                command: part.substr(0, 1),\n                params: strParams ? strParams.map(parseFloat) : []\n            };\n        });\n    };\n    Path2D.prettifySvgPath = function (value) {\n        return Path2D.parseSvgPath(value).map(function (d) { return d.command + d.params.join(','); }).join('\\n');\n    };\n    /**\n     * See https://www.w3.org/TR/SVG11/paths.html\n     * @param value\n     */\n    Path2D.prototype.setFromString = function (value) {\n        var _this = this;\n        this.clear();\n        var parts = Path2D.parseSvgPath(value);\n        // Current point.\n        var x;\n        var y;\n        // Last control point. Used to calculate the reflection point\n        // for `S`, `s`, `T`, `t` commands.\n        var cpx;\n        var cpy;\n        var lastCommand;\n        function checkQuadraticCP() {\n            if (!lastCommand.match(Path2D.quadraticCommandRe)) {\n                cpx = x;\n                cpy = y;\n            }\n        }\n        function checkCubicCP() {\n            if (!lastCommand.match(Path2D.cubicCommandRe)) {\n                cpx = x;\n                cpy = y;\n            }\n        }\n        // But that will make compiler complain about x/y, cpx/cpy\n        // being used without being set first.\n        parts.forEach(function (part) {\n            var p = part.params;\n            var n = p.length;\n            var i = 0;\n            switch (part.command) {\n                case 'M':\n                    _this.moveTo(x = p[i++], y = p[i++]);\n                    while (i < n) {\n                        _this.lineTo(x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 'm':\n                    _this.moveTo(x += p[i++], y += p[i++]);\n                    while (i < n) {\n                        _this.lineTo(x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'L':\n                    while (i < n) {\n                        _this.lineTo(x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 'l':\n                    while (i < n) {\n                        _this.lineTo(x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'C':\n                    while (i < n) {\n                        _this.cubicCurveTo(p[i++], p[i++], cpx = p[i++], cpy = p[i++], x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 'c':\n                    while (i < n) {\n                        _this.cubicCurveTo(x + p[i++], y + p[i++], cpx = x + p[i++], cpy = y + p[i++], x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'S':\n                    checkCubicCP();\n                    while (i < n) {\n                        _this.cubicCurveTo(x + x - cpx, y + y - cpy, cpx = p[i++], cpy = p[i++], x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 's':\n                    checkCubicCP();\n                    while (i < n) {\n                        _this.cubicCurveTo(x + x - cpx, y + y - cpy, cpx = x + p[i++], cpy = y + p[i++], x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'Q':\n                    while (i < n) {\n                        _this.quadraticCurveTo(cpx = p[i++], cpy = p[i++], x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 'q':\n                    while (i < n) {\n                        _this.quadraticCurveTo(cpx = x + p[i++], cpy = y + p[i++], x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'T':\n                    checkQuadraticCP();\n                    while (i < n) {\n                        _this.quadraticCurveTo(cpx = x + x - cpx, cpy = y + y - cpy, x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 't':\n                    checkQuadraticCP();\n                    while (i < n) {\n                        _this.quadraticCurveTo(cpx = x + x - cpx, cpy = y + y - cpy, x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'A':\n                    while (i < n) {\n                        _this.arcTo(p[i++], p[i++], p[i++] * Math.PI / 180, p[i++], p[i++], x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 'a':\n                    while (i < n) {\n                        _this.arcTo(p[i++], p[i++], p[i++] * Math.PI / 180, p[i++], p[i++], x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'Z':\n                case 'z':\n                    _this.closePath();\n                    break;\n                case 'H':\n                    while (i < n) {\n                        _this.lineTo(x = p[i++], y);\n                    }\n                    break;\n                case 'h':\n                    while (i < n) {\n                        _this.lineTo(x += p[i++], y);\n                    }\n                    break;\n                case 'V':\n                    while (i < n) {\n                        _this.lineTo(x, y = p[i++]);\n                    }\n                    break;\n                case 'v':\n                    while (i < n) {\n                        _this.lineTo(x, y += p[i++]);\n                    }\n                    break;\n            }\n            lastCommand = part.command;\n        });\n    };\n    Path2D.prototype.toString = function () {\n        var c = this.commands;\n        var p = this.params;\n        var cn = c.length;\n        var out = [];\n        for (var ci = 0, pi = 0; ci < cn; ci++) {\n            switch (c[ci]) {\n                case 'M':\n                    out.push('M' + p[pi++] + ',' + p[pi++]);\n                    break;\n                case 'L':\n                    out.push('L' + p[pi++] + ',' + p[pi++]);\n                    break;\n                case 'C':\n                    out.push('C' + p[pi++] + ',' + p[pi++] + ' ' +\n                        p[pi++] + ',' + p[pi++] + ' ' +\n                        p[pi++] + ',' + p[pi++]);\n                    break;\n                case 'Z':\n                    out.push('Z');\n                    break;\n            }\n        }\n        return out.join('');\n    };\n    Path2D.prototype.toPrettyString = function () {\n        return Path2D.prettifySvgPath(this.toString());\n    };\n    Path2D.prototype.toSvg = function () {\n        return Path2D.xmlDeclaration + \"\\n<svg width=\\\"100%\\\" height=\\\"100%\\\" viewBox=\\\"0 0 50 50\\\" version=\\\"1.1\\\" xmlns=\\\"\" + Path2D.xmlns + \"\\\">\\n    <path d=\\\"\" + this.toString() + \"\\\" style=\\\"fill:none;stroke:#000;stroke-width:0.5;\\\"/>\\n</svg>\";\n    };\n    Path2D.prototype.toDebugSvg = function () {\n        var d = Path2D.prettifySvgPath(this.toString());\n        return Path2D.xmlDeclaration + \"\\n<svg width=\\\"100%\\\" height=\\\"100%\\\" viewBox=\\\"0 0 100 100\\\" version=\\\"1.1\\\" xmlns=\\\"\" + Path2D.xmlns + \"\\\">\\n    <path d=\\\"\" + d + \"\\\" style=\\\"fill:none;stroke:#000;stroke-width:0.5;\\\"/>\\n</svg>\";\n    };\n    /**\n     * Returns an array of sub-paths of this Path,\n     * where each sub-path is represented exclusively by cubic segments.\n     */\n    Path2D.prototype.toCubicPaths = function () {\n        // Each sub-path is an array of `(n * 3 + 1) * 2` numbers,\n        // where `n` is the number of segments.\n        var paths = [];\n        var params = this.params;\n        // current path\n        var path;\n        // the starting point of the  current path\n        var sx;\n        var sy;\n        // the previous point of the current path\n        var px;\n        var py;\n        var i = 0; // current parameter\n        this.commands.forEach(function (command) {\n            switch (command) {\n                case 'M':\n                    path = [\n                        sx = px = params[i++],\n                        sy = py = params[i++]\n                    ];\n                    paths.push(path);\n                    break;\n                case 'L':\n                    var x = params[i++];\n                    var y = params[i++];\n                    // Place control points along the line `a + (b - a) * t`\n                    // at t = 1/3 and 2/3:\n                    path.push((px + px + x) / 3, (py + py + y) / 3, (px + x + x) / 3, (py + y + y) / 3, px = x, py = y);\n                    break;\n                case 'C':\n                    path.push(params[i++], params[i++], params[i++], params[i++], px = params[i++], py = params[i++]);\n                    break;\n                case 'Z':\n                    path.push((px + px + sx) / 3, (py + py + sy) / 3, (px + sx + sx) / 3, (py + sy + sy) / 3, px = sx, py = sy);\n                    break;\n            }\n        });\n        return paths;\n    };\n    Path2D.cubicPathToString = function (path) {\n        var n = path.length;\n        if (!(n % 2 === 0 && (n / 2 - 1) / 2 >= 1)) {\n            throw new Error('Invalid path.');\n        }\n        return 'M' + path.slice(0, 2).join(',') + 'C' + path.slice(2).join(',');\n    };\n    Path2D.splitCommandsRe = /(?=[AaCcHhLlMmQqSsTtVvZz])/g;\n    Path2D.matchParamsRe = /-?[0-9]*\\.?\\d+/g;\n    Path2D.quadraticCommandRe = /[QqTt]/;\n    Path2D.cubicCommandRe = /[CcSs]/;\n    Path2D.xmlDeclaration = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>';\n    Path2D.xmlns = 'http://www.w3.org/2000/svg';\n    return Path2D;\n}());\n\nvar __extends$F = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Path = /** @class */ (function (_super) {\n    __extends$F(Path, _super);\n    function Path() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * Declare a path to retain for later rendering and hit testing\n         * using custom Path2D class. Think of it as a TypeScript version\n         * of the native Path2D (with some differences) that works in all browsers.\n         */\n        _this.path = new Path2D();\n        /**\n        * The path only has to be updated when certain attributes change.\n        * For example, if transform attributes (such as `translationX`)\n        * are changed, we don't have to update the path. The `dirtyPath` flag\n        * is how we keep track if the path has to be updated or not.\n        */\n        _this._dirtyPath = true;\n        /**\n         * Path definition in SVG path syntax:\n         * https://www.w3.org/TR/SVG11/paths.html#DAttribute\n         */\n        _this._svgPath = '';\n        return _this;\n    }\n    Object.defineProperty(Path.prototype, \"dirtyPath\", {\n        get: function () {\n            return this._dirtyPath;\n        },\n        set: function (value) {\n            if (this._dirtyPath !== value) {\n                this._dirtyPath = value;\n                if (value) {\n                    this.dirty = true;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Path.prototype, \"svgPath\", {\n        get: function () {\n            return this._svgPath;\n        },\n        set: function (value) {\n            if (this._svgPath !== value) {\n                this._svgPath = value;\n                this.path.setFromString(value);\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Path.prototype.isPointInPath = function (x, y) {\n        var point = this.transformPoint(x, y);\n        return this.path.closedPath && this.path.isPointInPath(point.x, point.y);\n    };\n    Path.prototype.isPointInStroke = function (x, y) {\n        return false;\n    };\n    Path.prototype.updatePath = function () { };\n    Path.prototype.render = function (ctx) {\n        if (this.dirtyTransform) {\n            this.computeTransformMatrix();\n        }\n        // this.matrix.transformBBox(this.computeBBox()!).render(ctx);\n        this.matrix.toContext(ctx);\n        if (this.dirtyPath) {\n            this.updatePath();\n            this.dirtyPath = false;\n        }\n        this.scene.appendPath(this.path);\n        this.fillStroke(ctx);\n        this.dirty = false;\n    };\n    Path.className = 'Path';\n    return Path;\n}(Shape));\n\nfunction isEqual(a, b, epsilon) {\n    if (epsilon === void 0) { epsilon = 1e-10; }\n    return Math.abs(a - b) < epsilon;\n}\n/**\n * `Number.toFixed(n)` always formats a number so that it has `n` digits after the decimal point.\n * For example, `Number(0.00003427).toFixed(2)` returns `0.00`.\n * That's not very helpful, because all the meaningful information is lost.\n * In this case we would want the formatted value to have at least two significant digits: `0.000034`,\n * not two fraction digits.\n * @param value\n * @param fractionOrSignificantDigits\n */\nfunction toFixed(value, fractionOrSignificantDigits) {\n    if (fractionOrSignificantDigits === void 0) { fractionOrSignificantDigits = 2; }\n    var power = Math.floor(Math.log(Math.abs(value)) / Math.LN10);\n    if (power >= 0 || !isFinite(power)) {\n        return value.toFixed(fractionOrSignificantDigits); // fraction digits\n    }\n    return value.toFixed(Math.abs(power) - 1 + fractionOrSignificantDigits); // significant digits\n}\n\nvar __extends$G = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar ArcType;\n(function (ArcType) {\n    ArcType[ArcType[\"Open\"] = 0] = \"Open\";\n    ArcType[ArcType[\"Chord\"] = 1] = \"Chord\";\n    ArcType[ArcType[\"Round\"] = 2] = \"Round\";\n})(ArcType || (ArcType = {}));\n/**\n * Elliptical arc node.\n */\nvar Arc = /** @class */ (function (_super) {\n    __extends$G(Arc, _super);\n    function Arc() {\n        var _this = _super.call(this) || this;\n        _this._centerX = 0;\n        _this._centerY = 0;\n        _this._radiusX = 10;\n        _this._radiusY = 10;\n        _this._startAngle = 0;\n        _this._endAngle = Math.PI * 2;\n        _this._counterClockwise = false;\n        /**\n         * The type of arc to render:\n         * - {@link ArcType.Open} - end points of the arc segment are not connected (default)\n         * - {@link ArcType.Chord} - end points of the arc segment are connected by a line segment\n         * - {@link ArcType.Round} - each of the end points of the arc segment are connected\n         *                           to the center of the arc\n         * Arcs with {@link ArcType.Open} do not support hit testing, even if they have their\n         * {@link Shape.fillStyle} set, because they are not closed paths. Hit testing support\n         * would require using two paths - one for rendering, another for hit testing - and there\n         * doesn't seem to be a compelling reason to do that, when one can just use {@link ArcType.Chord}\n         * to create a closed path.\n         */\n        _this._type = ArcType.Open;\n        _this.restoreOwnStyles();\n        return _this;\n    }\n    Object.defineProperty(Arc.prototype, \"centerX\", {\n        get: function () {\n            return this._centerX;\n        },\n        set: function (value) {\n            if (this._centerX !== value) {\n                this._centerX = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"centerY\", {\n        get: function () {\n            return this._centerY;\n        },\n        set: function (value) {\n            if (this._centerY !== value) {\n                this._centerY = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"radiusX\", {\n        get: function () {\n            return this._radiusX;\n        },\n        set: function (value) {\n            if (this._radiusX !== value) {\n                this._radiusX = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"radiusY\", {\n        get: function () {\n            return this._radiusY;\n        },\n        set: function (value) {\n            if (this._radiusY !== value) {\n                this._radiusY = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"startAngle\", {\n        get: function () {\n            return this._startAngle;\n        },\n        set: function (value) {\n            if (this._startAngle !== value) {\n                this._startAngle = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"endAngle\", {\n        get: function () {\n            return this._endAngle;\n        },\n        set: function (value) {\n            if (this._endAngle !== value) {\n                this._endAngle = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"fullPie\", {\n        get: function () {\n            return isEqual(normalizeAngle360(this.startAngle), normalizeAngle360(this.endAngle));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"counterClockwise\", {\n        get: function () {\n            return this._counterClockwise;\n        },\n        set: function (value) {\n            if (this._counterClockwise !== value) {\n                this._counterClockwise = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"type\", {\n        get: function () {\n            return this._type;\n        },\n        set: function (value) {\n            if (this._type !== value) {\n                this._type = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Arc.prototype.updatePath = function () {\n        var path = this.path;\n        path.clear(); // No need to recreate the Path, can simply clear the existing one.\n        // This is much faster than the native Path2D implementation even though this `cubicArc`\n        // method is pure TypeScript and actually produces the definition of an elliptical arc,\n        // where you can specify two radii and rotation, while Path2D's `arc` method simply produces\n        // a circular arc. Maybe it's due to the experimental nature of the Path2D class,\n        // maybe it's because we have to create a new instance of it on each render, who knows...\n        path.cubicArc(this.centerX, this.centerY, this.radiusX, this.radiusY, 0, this.startAngle, this.endAngle, this.counterClockwise ? 1 : 0);\n        if (this.type === ArcType.Chord) {\n            path.closePath();\n        }\n        else if (this.type === ArcType.Round && !this.fullPie) {\n            path.lineTo(this.centerX, this.centerY);\n            path.closePath();\n        }\n    };\n    Arc.prototype.computeBBox = function () {\n        // Only works with full arcs (circles) and untransformed ellipses.\n        return new BBox(this.centerX - this.radiusX, this.centerY - this.radiusY, this.radiusX * 2, this.radiusY * 2);\n    };\n    Arc.prototype.isPointInPath = function (x, y) {\n        var point = this.transformPoint(x, y);\n        var bbox = this.computeBBox();\n        return this.type !== ArcType.Open\n            && bbox.containsPoint(point.x, point.y)\n            && this.path.isPointInPath(point.x, point.y);\n    };\n    Arc.className = 'Arc';\n    Arc.defaultStyles = chainObjects(Shape.defaultStyles, {\n        lineWidth: 1,\n        fillStyle: null\n    });\n    return Arc;\n}(Path));\n\n// import { Rect } from \"./scene/shape/rect\"; // debug (bbox)\nvar Tags;\n(function (Tags) {\n    Tags[Tags[\"Tick\"] = 0] = \"Tick\";\n    Tags[Tags[\"GridLine\"] = 1] = \"GridLine\";\n})(Tags || (Tags = {}));\nvar AxisTick = /** @class */ (function () {\n    function AxisTick() {\n        /**\n         * The line width to be used by axis ticks.\n         */\n        this.width = 1;\n        /**\n         * The line length to be used by axis ticks.\n         */\n        this.size = 6;\n        /**\n         * The color of the axis ticks.\n         * Use `null` rather than `rgba(0, 0, 0, 0)` to make the ticks invisible.\n         */\n        this.color = 'rgba(195, 195, 195, 1)';\n        /**\n         * A hint of how many ticks to use (the exact number of ticks might differ),\n         * a `TimeInterval` or a `CountableTimeInterval`.\n         * For example:\n         *\n         *     axis.tick.count = 5;\n         *     axis.tick.count = year;\n         *     axis.tick.count = month.every(6);\n         */\n        this.count = 10;\n    }\n    return AxisTick;\n}());\nvar AxisLabel = /** @class */ (function () {\n    function AxisLabel() {\n        this.fontSize = 12;\n        this.fontFamily = 'Verdana, sans-serif';\n        /**\n         * The padding between the labels and the ticks.\n         */\n        this.padding = 5;\n        /**\n         * The color of the labels.\n         * Use `null` rather than `rgba(0, 0, 0, 0)` to make labels invisible.\n         */\n        this.color = 'rgba(87, 87, 87, 1)';\n        /**\n         * Custom label rotation in degrees.\n         * Labels are rendered perpendicular to the axis line by default.\n         * Or parallel to the axis line, if the {@link parallelLabels} is set to `true`.\n         * The value of this config is used as the angular offset/deflection\n         * from the default rotation.\n         */\n        this.rotation = 0;\n        /**\n         * By default labels and ticks are positioned to the left of the axis line.\n         * `true` positions the labels to the right of the axis line.\n         * However, if the axis is rotated, its easier to think in terms\n         * of this side or the opposite side, rather than left and right.\n         * We use the term `mirror` for conciseness, although it's not\n         * true mirroring - for example, when a label is rotated, so that\n         * it is inclined at the 45 degree angle, text flowing from north-west\n         * to south-east, ending at the tick to the left of the axis line,\n         * and then we set this config to `true`, the text will still be flowing\n         * from north-west to south-east, _starting_ at the tick to the right\n         * of the axis line.\n         */\n        this.mirrored = false;\n        /**\n         * Labels are rendered perpendicular to the axis line by default.\n         * Setting this config to `true` makes labels render parallel to the axis line\n         * and center aligns labels' text at the ticks.\n         */\n        this.parallel = false;\n    }\n    Object.defineProperty(AxisLabel.prototype, \"format\", {\n        get: function () {\n            return this._format;\n        },\n        set: function (value) {\n            // See `TimeLocaleObject` docs for the list of supported format directives.\n            if (this._format !== value) {\n                this._format = value;\n                if (this.onFormatChange) {\n                    this.onFormatChange(value);\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return AxisLabel;\n}());\n/**\n * A general purpose linear axis with no notion of orientation.\n * The axis is always rendered vertically, with horizontal labels positioned to the left\n * of the axis line by default. The axis can be {@link rotation | rotated} by an arbitrary angle,\n * so that it can be used as a top, right, bottom, left, radial or any other kind\n * of linear axis.\n * The generic `D` parameter is the type of the domain of the axis' scale.\n * The output range of the axis' scale is always numeric (screen coordinates).\n */\nvar Axis = /** @class */ (function () {\n    function Axis(scale) {\n        this.lineNode = new Line();\n        this.group = new Group();\n        this.line = {\n            width: 1,\n            color: 'rgba(195, 195, 195, 1)'\n        };\n        this.tick = new AxisTick();\n        this.label = new AxisLabel();\n        this.translation = { x: 0, y: 0 };\n        this.rotation = 0; // axis rotation angle in degrees\n        this._title = undefined;\n        /**\n         * The length of the grid. The grid is only visible in case of a non-zero value.\n         * In case {@link radialGrid} is `true`, the value is interpreted as an angle\n         * (in degrees).\n         */\n        this._gridLength = 0;\n        /**\n         * The array of styles to cycle through when rendering grid lines.\n         * For example, use two {@link GridStyle} objects for alternating styles.\n         * Contains only one {@link GridStyle} object by default, meaning all grid lines\n         * have the same style.\n         */\n        this.gridStyle = [{\n                stroke: 'rgba(219, 219, 219, 1)',\n                lineDash: [4, 2]\n            }];\n        /**\n         * `false` - render grid as lines of {@link gridLength} that extend the ticks\n         *           on the opposite side of the axis\n         * `true` - render grid as concentric circles that go through the ticks\n         */\n        this._radialGrid = false;\n        this.scale = scale;\n        this.groupSelection = Selection.select(this.group).selectAll();\n        this.label.onFormatChange = this.onTickFormatChange.bind(this);\n        this.group.append(this.lineNode);\n        this.onTickFormatChange();\n        // this.group.append(this.bboxRect); // debug (bbox)\n    }\n    Object.defineProperty(Axis.prototype, \"range\", {\n        get: function () {\n            return this.scale.range;\n        },\n        set: function (value) {\n            this.scale.range = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Axis.prototype, \"domain\", {\n        get: function () {\n            return this.scale.domain;\n        },\n        set: function (value) {\n            this.scale.domain = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Axis.prototype.onTickFormatChange = function (format) {\n        if (format) {\n            if (this.scale.tickFormat) {\n                this.tickFormatter = this.scale.tickFormat(10, format);\n            }\n        }\n        else {\n            if (this.scale.tickFormat) {\n                this.tickFormatter = this.scale.tickFormat(10, undefined);\n            }\n            else {\n                this.tickFormatter = undefined;\n            }\n        }\n    };\n    Object.defineProperty(Axis.prototype, \"title\", {\n        get: function () {\n            return this._title;\n        },\n        set: function (value) {\n            var oldTitle = this._title;\n            if (oldTitle !== value) {\n                if (oldTitle) {\n                    this.group.removeChild(oldTitle.node);\n                }\n                if (value) {\n                    value.node.rotation = -Math.PI / 2;\n                    this.group.appendChild(value.node);\n                }\n                this._title = value;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Axis.prototype, \"gridLength\", {\n        get: function () {\n            return this._gridLength;\n        },\n        set: function (value) {\n            // Was visible and now invisible, or was invisible and now visible.\n            if (this._gridLength && !value || !this._gridLength && value) {\n                this.groupSelection = this.groupSelection.remove().setData([]);\n            }\n            this._gridLength = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Axis.prototype, \"radialGrid\", {\n        get: function () {\n            return this._radialGrid;\n        },\n        set: function (value) {\n            if (this._radialGrid !== value) {\n                this._radialGrid = value;\n                this.groupSelection = this.groupSelection.remove().setData([]);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates/removes/updates the scene graph nodes that constitute the axis.\n     * Supposed to be called _manually_ after changing _any_ of the axis properties.\n     * This allows to bulk set axis properties before updating the nodes.\n     * The node changes made by this method are rendered on the next animation frame.\n     * We could schedule this method call automatically on the next animation frame\n     * when any of the axis properties change (the way we do when properties of scene graph's\n     * nodes change), but this will mean that we first wait for the next animation\n     * frame to make changes to the nodes of the axis, then wait for another animation\n     * frame to render those changes. It's nice to have everything update automatically,\n     * but this extra level of async indirection will not just introduce an unwanted delay,\n     * it will also make it harder to reason about the program.\n     */\n    Axis.prototype.update = function () {\n        var _this = this;\n        var _a = this, group = _a.group, scale = _a.scale, tick = _a.tick, label = _a.label, gridStyle = _a.gridStyle;\n        var rotation = toRadians(this.rotation);\n        var parallelLabels = label.parallel;\n        var labelRotation = normalizeAngle360(toRadians(label.rotation));\n        group.translationX = this.translation.x;\n        group.translationY = this.translation.y;\n        group.rotation = rotation;\n        var bandwidth = (scale.bandwidth || 0) / 2;\n        // The side of the axis line to position the labels on.\n        // -1 = left (default)\n        //  1 = right\n        var sideFlag = label.mirrored ? 1 : -1;\n        // When labels are parallel to the axis line, the `parallelFlipFlag` is used to\n        // flip the labels to avoid upside-down text, when the axis is rotated\n        // such that it is in the right hemisphere, i.e. the angle of rotation\n        // is in the [0, π] interval.\n        // The rotation angle is normalized, so that we have an easier time checking\n        // if it's in the said interval. Since the axis is always rendered vertically\n        // and then rotated, zero rotation means 12 (not 3) o-clock.\n        // -1 = flip\n        //  1 = don't flip (default)\n        var parallelFlipRotation = normalizeAngle360(rotation);\n        var parallelFlipFlag = !labelRotation && parallelFlipRotation >= 0 && parallelFlipRotation <= Math.PI ? -1 : 1;\n        var regularFlipRotation = normalizeAngle360(rotation - Math.PI / 2);\n        // Flip if the axis rotation angle is in the top hemisphere.\n        var regularFlipFlag = !labelRotation && regularFlipRotation >= 0 && regularFlipRotation <= Math.PI ? -1 : 1;\n        var alignFlag = labelRotation >= 0 && labelRotation <= Math.PI ? -1 : 1;\n        var ticks = scale.ticks(this.tick.count);\n        var update = this.groupSelection.setData(ticks);\n        update.exit.remove();\n        var enter = update.enter.append(Group);\n        // Line auto-snaps to pixel grid if vertical or horizontal.\n        enter.append(Line).each(function (node) { return node.tag = Tags.Tick; });\n        if (this.gridLength) {\n            if (this.radialGrid) {\n                enter.append(Arc).each(function (node) { return node.tag = Tags.GridLine; });\n            }\n            else {\n                enter.append(Line).each(function (node) { return node.tag = Tags.GridLine; });\n            }\n        }\n        enter.append(Text);\n        var groupSelection = update.merge(enter);\n        groupSelection\n            .attrFn('translationY', function (_, datum) { return Math.round(scale.convert(datum) + bandwidth); });\n        groupSelection.selectByTag(Tags.Tick)\n            .each(function (line) {\n            line.strokeWidth = tick.width;\n            line.stroke = tick.color;\n        })\n            .attr('x1', sideFlag * tick.size)\n            .attr('x2', 0)\n            .attr('y1', 0)\n            .attr('y2', 0);\n        if (this.gridLength && gridStyle.length) {\n            var styleCount_1 = gridStyle.length;\n            var gridLines = void 0;\n            if (this.radialGrid) {\n                var angularGridLength_1 = normalizeAngle360Inclusive(toRadians(this.gridLength));\n                gridLines = groupSelection.selectByTag(Tags.GridLine)\n                    .each(function (arc, datum) {\n                    var radius = Math.round(scale.convert(datum) + bandwidth);\n                    arc.centerX = 0;\n                    arc.centerY = scale.range[0] - radius;\n                    arc.endAngle = angularGridLength_1;\n                    arc.radiusX = radius;\n                    arc.radiusY = radius;\n                });\n            }\n            else {\n                gridLines = groupSelection.selectByTag(Tags.GridLine)\n                    .each(function (line) {\n                    line.x1 = 0;\n                    line.x2 = -sideFlag * _this.gridLength;\n                    line.y1 = 0;\n                    line.y2 = 0;\n                    line.visible = Math.abs(line.parent.translationY - scale.range[0]) > 1;\n                });\n            }\n            gridLines.each(function (gridLine, _, index) {\n                var style = gridStyle[index % styleCount_1];\n                gridLine.stroke = style.stroke;\n                gridLine.strokeWidth = tick.width;\n                gridLine.lineDash = style.lineDash;\n                gridLine.fill = undefined;\n            });\n        }\n        var tickFormatter = this.tickFormatter;\n        var fractionDigits = ticks instanceof NumericTicks ? ticks.fractionDigits : 0;\n        var labelSelection = groupSelection.selectByClass(Text)\n            .each(function (node, datum, index) {\n            node.fontStyle = label.fontStyle;\n            node.fontWeight = label.fontWeight;\n            node.fontSize = label.fontSize;\n            node.fontFamily = label.fontFamily;\n            node.fill = label.color;\n            node.textBaseline = parallelLabels && !labelRotation\n                ? (sideFlag * parallelFlipFlag === -1 ? 'hanging' : 'bottom')\n                : 'middle';\n            node.text = label.formatter\n                ? label.formatter({\n                    value: fractionDigits >= 0 ? datum : String(datum),\n                    index: index,\n                    fractionDigits: fractionDigits,\n                    formatter: tickFormatter\n                })\n                : fractionDigits\n                    // the `datum` is a floating point number\n                    ? datum.toFixed(fractionDigits)\n                    // the `datum` is an integer, a string or an object\n                    : tickFormatter\n                        ? tickFormatter(datum)\n                        : String(datum);\n            node.textAlign = parallelLabels\n                ? labelRotation ? (sideFlag * alignFlag === -1 ? 'end' : 'start') : 'center'\n                : sideFlag * regularFlipFlag === -1 ? 'end' : 'start';\n        });\n        var labelX = sideFlag * (tick.size + label.padding);\n        var autoRotation = parallelLabels\n            ? parallelFlipFlag * Math.PI / 2\n            : (regularFlipFlag === -1 ? Math.PI : 0);\n        labelSelection.each(function (label) {\n            label.x = labelX;\n            label.rotationCenterX = labelX;\n            label.rotation = autoRotation + labelRotation;\n        });\n        this.groupSelection = groupSelection;\n        // Render axis line.\n        var lineNode = this.lineNode;\n        lineNode.x1 = 0;\n        lineNode.x2 = 0;\n        lineNode.y1 = scale.range[0];\n        lineNode.y2 = scale.range[scale.range.length - 1];\n        lineNode.strokeWidth = this.line.width;\n        lineNode.stroke = this.line.color;\n        lineNode.visible = ticks.length > 0;\n        var title = this.title;\n        if (title) {\n            var padding = title.padding.bottom;\n            var titleNode = title.node;\n            var bbox = this.computeBBox({ excludeTitle: true });\n            var titleRotationFlag = sideFlag === -1 && parallelFlipRotation > Math.PI && parallelFlipRotation < Math.PI * 2 ? -1 : 1;\n            titleNode.rotation = titleRotationFlag * sideFlag * Math.PI / 2;\n            titleNode.x = titleRotationFlag * sideFlag * (lineNode.y1 + lineNode.y2) / 2;\n            if (sideFlag === -1) {\n                titleNode.y = titleRotationFlag * (-padding - bbox.width + Math.max(bbox.x + bbox.width, 0));\n            }\n            else {\n                titleNode.y = -padding - bbox.width - Math.min(bbox.x, 0);\n            }\n            // title.text = `Axis Title: ${sideFlag} ${toDegrees(parallelFlipRotation).toFixed(0)} ${titleRotationFlag}`;\n            titleNode.textBaseline = titleRotationFlag === 1 ? 'bottom' : 'top';\n        }\n        // debug (bbox)\n        // const bbox = this.computeBBox();\n        // const bboxRect = this.bboxRect;\n        // bboxRect.x = bbox.x;\n        // bboxRect.y = bbox.y;\n        // bboxRect.width = bbox.width;\n        // bboxRect.height = bbox.height;\n    };\n    Axis.prototype.computeBBox = function (options) {\n        var lineNode = this.lineNode;\n        var labels = this.groupSelection.selectByClass(Text);\n        var left = Infinity;\n        var right = -Infinity;\n        var top = Infinity;\n        var bottom = -Infinity;\n        labels.each(function (label) {\n            // The label itself is rotated, but not translated, the group that\n            // contains it is. So to capture the group transform in the label bbox\n            // calculation we combine the transform matrices of the label and the group.\n            // Depending on the timing of the `axis.computeBBox()` method call, we may\n            // not have the group's and the label's transform matrices updated yet (because\n            // the transform matrix is not recalculated whenever a node's transform attributes\n            // change, instead it's marked for recalculation on the next frame by setting\n            // the node's `dirtyTransform` flag to `true`), so we force them to update\n            // right here by calling `computeTransformMatrix`.\n            label.computeTransformMatrix();\n            var matrix = Matrix.flyweight(label.matrix);\n            var group = label.parent;\n            group.computeTransformMatrix();\n            matrix.preMultiplySelf(group.matrix);\n            var labelBBox = label.computeBBox();\n            if (labelBBox) {\n                var bbox = matrix.transformBBox(labelBBox);\n                left = Math.min(left, bbox.x);\n                right = Math.max(right, bbox.x + bbox.width);\n                top = Math.min(top, bbox.y);\n                bottom = Math.max(bottom, bbox.y + bbox.height);\n            }\n        });\n        if (this.title && (!options || !options.excludeTitle)) {\n            var label = this.title.node;\n            label.computeTransformMatrix();\n            var matrix = Matrix.flyweight(label.matrix);\n            var labelBBox = label.computeBBox();\n            if (labelBBox) {\n                var bbox = matrix.transformBBox(labelBBox);\n                left = Math.min(left, bbox.x);\n                right = Math.max(right, bbox.x + bbox.width);\n                top = Math.min(top, bbox.y);\n                bottom = Math.max(bottom, bbox.y + bbox.height);\n            }\n        }\n        left = Math.min(left, 0);\n        right = Math.max(right, 0);\n        top = Math.min(top, lineNode.y1, lineNode.y2);\n        bottom = Math.max(bottom, lineNode.y1, lineNode.y2);\n        return new BBox(left, top, right - left, bottom - top);\n    };\n    return Axis;\n}());\n\nvar __extends$H = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar ChartAxisDirection;\n(function (ChartAxisDirection) {\n    ChartAxisDirection[\"X\"] = \"x\";\n    ChartAxisDirection[\"Y\"] = \"y\"; // means 'radius' in polar charts\n})(ChartAxisDirection || (ChartAxisDirection = {}));\nfunction flipChartAxisDirection(direction) {\n    if (direction === ChartAxisDirection.X) {\n        return ChartAxisDirection.Y;\n    }\n    else {\n        return ChartAxisDirection.X;\n    }\n}\nvar ChartAxisPosition;\n(function (ChartAxisPosition) {\n    ChartAxisPosition[\"Top\"] = \"top\";\n    ChartAxisPosition[\"Right\"] = \"right\";\n    ChartAxisPosition[\"Bottom\"] = \"bottom\";\n    ChartAxisPosition[\"Left\"] = \"left\";\n    ChartAxisPosition[\"Angle\"] = \"angle\";\n    ChartAxisPosition[\"Radius\"] = \"radius\";\n})(ChartAxisPosition || (ChartAxisPosition = {}));\nvar ChartAxis = /** @class */ (function (_super) {\n    __extends$H(ChartAxis, _super);\n    function ChartAxis() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.keys = [];\n        _this.boundSeries = [];\n        _this.thickness = 0;\n        return _this;\n    }\n    Object.defineProperty(ChartAxis.prototype, \"position\", {\n        get: function () {\n            return this._position;\n        },\n        set: function (value) {\n            if (this._position !== value) {\n                this._position = value;\n                switch (value) {\n                    case ChartAxisPosition.Top:\n                        this.direction = ChartAxisDirection.X;\n                        this.rotation = -90;\n                        this.label.mirrored = true;\n                        this.label.parallel = true;\n                        break;\n                    case ChartAxisPosition.Right:\n                        this.direction = ChartAxisDirection.Y;\n                        this.rotation = 0;\n                        this.label.mirrored = true;\n                        this.label.parallel = false;\n                        break;\n                    case ChartAxisPosition.Bottom:\n                        this.direction = ChartAxisDirection.X;\n                        this.rotation = -90;\n                        this.label.mirrored = false;\n                        this.label.parallel = true;\n                        break;\n                    case ChartAxisPosition.Left:\n                        this.direction = ChartAxisDirection.Y;\n                        this.rotation = 0;\n                        this.label.mirrored = false;\n                        this.label.parallel = false;\n                        break;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ChartAxis;\n}(Axis));\n\nvar __extends$I = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$L = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AxisPanel = /** @class */ (function (_super) {\n    __extends$I(AxisPanel, _super);\n    function AxisPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.activePanels = [];\n        _this.chartController = chartController;\n        return _this;\n    }\n    AxisPanel.prototype.init = function () {\n        this.setTemplate(AxisPanel.TEMPLATE);\n        this.initAxis();\n        this.initAxisTicks();\n        this.initAxisLabels();\n    };\n    AxisPanel.prototype.initAxis = function () {\n        var _this = this;\n        this.axisGroup\n            .setTitle(this.chartTranslator.translate(\"axis\"))\n            .toggleGroupExpand(false)\n            .hideEnabledCheckbox(true);\n        this.axisColorInput\n            .setLabel(this.chartTranslator.translate(\"color\"))\n            .setLabelWidth(\"flex\")\n            .setInputWidth(45)\n            .setValue(this.getChartProxy().getAxisProperty(\"line.color\"))\n            .onValueChange(function (newColor) { return _this.getChartProxy().setAxisProperty(\"line.color\", newColor); });\n        this.axisLineWidthSlider\n            .setLabel(this.chartTranslator.translate(\"thickness\"))\n            .setMaxValue(10)\n            .setTextFieldWidth(45)\n            .setValue(this.getChartProxy().getAxisProperty(\"line.width\"))\n            .onValueChange(function (newValue) { return _this.getChartProxy().setAxisProperty(\"line.width\", newValue); });\n    };\n    AxisPanel.prototype.initAxisTicks = function () {\n        var axisTicksComp = this.wireBean(new AxisTicksPanel(this.chartController));\n        this.axisGroup.addItem(axisTicksComp);\n        this.activePanels.push(axisTicksComp);\n    };\n    AxisPanel.prototype.initAxisLabels = function () {\n        var _this = this;\n        var chartProxy = this.getChartProxy();\n        var initialFont = {\n            family: chartProxy.getAxisProperty(\"label.fontFamily\"),\n            style: chartProxy.getAxisProperty(\"label.fontStyle\"),\n            weight: chartProxy.getAxisProperty(\"label.fontWeight\"),\n            size: chartProxy.getAxisProperty(\"label.fontSize\"),\n            color: chartProxy.getAxisProperty(\"label.color\")\n        };\n        var setFont = function (font) {\n            var chartProxy = _this.getChartProxy();\n            if (font.family) {\n                chartProxy.setAxisProperty(\"label.fontFamily\", font.family);\n            }\n            if (font.weight) {\n                chartProxy.setAxisProperty(\"label.fontWeight\", font.weight);\n            }\n            if (font.style) {\n                chartProxy.setAxisProperty(\"label.fontStyle\", font.style);\n            }\n            if (font.size) {\n                chartProxy.setAxisProperty(\"label.fontSize\", font.size);\n            }\n            if (font.color) {\n                chartProxy.setAxisProperty(\"label.color\", font.color);\n            }\n            chartProxy.getChart().performLayout();\n        };\n        var params = {\n            enabled: true,\n            suppressEnabledCheckbox: true,\n            initialFont: initialFont,\n            setFont: setFont\n        };\n        var labelPanelComp = this.wireBean(new FontPanel(params));\n        this.axisGroup.addItem(labelPanelComp);\n        this.activePanels.push(labelPanelComp);\n        this.addAdditionalLabelComps(labelPanelComp);\n    };\n    AxisPanel.prototype.addAdditionalLabelComps = function (labelPanelComp) {\n        var _this = this;\n        var createAngleComp = function (label, initialValue, updateFunc) {\n            var rotationInput = _this.wireBean(new agGridCommunity.AgAngleSelect()\n                .setLabel(label)\n                .setLabelWidth(\"flex\")\n                .setValue(initialValue || 0)\n                .onValueChange(updateFunc));\n            labelPanelComp.addCompToPanel(rotationInput);\n        };\n        var degreesSymbol = String.fromCharCode(176);\n        var createLabelUpdateFunc = function (axisPosition) { return function (newValue) {\n            var chart = _this.getChartProxy().getChart();\n            var axis = find(chart.axes, function (axis) { return axis.position === axisPosition; });\n            if (axis) {\n                axis.label.rotation = newValue;\n                chart.performLayout();\n            }\n        }; };\n        var xRotationLabel = this.chartTranslator.translate(\"xRotation\") + \" \" + degreesSymbol;\n        var yRotationLabel = this.chartTranslator.translate(\"yRotation\") + \" \" + degreesSymbol;\n        createAngleComp(xRotationLabel, this.getChartProxy().getChartOption(\"xAxis.label.rotation\"), createLabelUpdateFunc(ChartAxisPosition.Bottom));\n        createAngleComp(yRotationLabel, this.getChartProxy().getChartOption(\"yAxis.label.rotation\"), createLabelUpdateFunc(ChartAxisPosition.Left));\n        var labelPaddingSlider = this.wireBean(new agGridCommunity.AgSlider());\n        labelPaddingSlider.setLabel(this.chartTranslator.translate(\"padding\"))\n            .setValue(this.getChartProxy().getAxisProperty(\"label.padding\"))\n            .setMaxValue(30)\n            .setTextFieldWidth(45)\n            .onValueChange(function (newValue) { return _this.getChartProxy().setAxisProperty(\"label.padding\", newValue); });\n        labelPanelComp.addCompToPanel(labelPaddingSlider);\n    };\n    AxisPanel.prototype.destroyActivePanels = function () {\n        this.activePanels.forEach(function (panel) {\n            agGridCommunity._.removeFromParent(panel.getGui());\n            panel.destroy();\n        });\n    };\n    AxisPanel.prototype.getChartProxy = function () {\n        return this.chartController.getChartProxy();\n    };\n    AxisPanel.prototype.destroy = function () {\n        this.destroyActivePanels();\n        _super.prototype.destroy.call(this);\n    };\n    AxisPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"axisGroup\\\">\\n                <ag-color-picker ref=\\\"axisColorInput\\\"></ag-color-picker>\\n                <ag-slider ref=\\\"axisLineWidthSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n    __decorate$L([\n        agGridCommunity.RefSelector('axisGroup')\n    ], AxisPanel.prototype, \"axisGroup\", void 0);\n    __decorate$L([\n        agGridCommunity.RefSelector('axisLineWidthSlider')\n    ], AxisPanel.prototype, \"axisLineWidthSlider\", void 0);\n    __decorate$L([\n        agGridCommunity.RefSelector('axisColorInput')\n    ], AxisPanel.prototype, \"axisColorInput\", void 0);\n    __decorate$L([\n        agGridCommunity.Autowired('chartTranslator')\n    ], AxisPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$L([\n        agGridCommunity.PostConstruct\n    ], AxisPanel.prototype, \"init\", null);\n    return AxisPanel;\n}(agGridCommunity.Component));\n\n/**\n * Wraps the native Canvas element and overrides its CanvasRenderingContext2D to\n * provide resolution independent rendering based on `window.devicePixelRatio`.\n */\nvar HdpiCanvas = /** @class */ (function () {\n    // The width/height attributes of the Canvas element default to\n    // 300/150 according to w3.org.\n    function HdpiCanvas(document) {\n        if (document === void 0) { document = window.document; }\n        this._parent = undefined;\n        // `NaN` is deliberate here, so that overrides are always applied\n        // and the `resetTransform` inside the `resize` method works in IE11.\n        this._pixelRatio = NaN;\n        this.document = document;\n        this.tempCanvas = document.createElement('canvas');\n        this.element = document.createElement('canvas');\n        this.element.style.userSelect = 'none';\n        this.context = this.element.getContext('2d');\n        this.updatePixelRatio(0, false);\n        this.resize(this._width = 300, this._height = 150);\n    }\n    Object.defineProperty(HdpiCanvas.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        set: function (value) {\n            if (this._parent !== value) {\n                this.remove();\n                if (value) {\n                    value.appendChild(this.element);\n                }\n                this._parent = value;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HdpiCanvas.prototype.remove = function () {\n        var parent = this.element.parentNode;\n        if (parent != null) {\n            parent.removeChild(this.element);\n        }\n    };\n    HdpiCanvas.prototype.destroy = function () {\n        this.element.remove();\n        this._canvas = undefined;\n        Object.freeze(this);\n    };\n    HdpiCanvas.prototype.toImage = function () {\n        var img = this.document.createElement('img');\n        img.src = this.element.toDataURL();\n        return img;\n    };\n    /**\n     * @param options.fileName The `.png` extension is going to be added automatically.\n     * @param [options.background] Defaults to `white`.\n     */\n    HdpiCanvas.prototype.download = function (fileName) {\n        fileName = ((fileName || '').trim() || 'image') + '.png';\n        // Chart images saved as JPEG are a few times larger at 50% quality than PNG images,\n        // so we don't support saving to JPEG.\n        var type = 'image/png';\n        var dataUrl = this.element.toDataURL(type);\n        var document = this.document;\n        if (navigator.msSaveOrOpenBlob) { // IE11\n            var binary = atob(dataUrl.split(',')[1]); // strip the `data:image/png;base64,` part\n            var array = [];\n            for (var i = 0, n = binary.length; i < n; i++) {\n                array.push(binary.charCodeAt(i));\n            }\n            var blob = new Blob([new Uint8Array(array)], { type: type });\n            navigator.msSaveOrOpenBlob(blob, fileName);\n        }\n        else {\n            var a = document.createElement('a');\n            a.href = dataUrl;\n            a.download = fileName;\n            a.style.display = 'none';\n            document.body.appendChild(a); // required for the `click` to work in Firefox\n            a.click();\n            document.body.removeChild(a);\n        }\n    };\n    Object.defineProperty(HdpiCanvas.prototype, \"pixelRatio\", {\n        get: function () {\n            return this._pixelRatio;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Updates the pixel ratio of the Canvas element with the given value,\n     * or uses the window.devicePixelRatio (default), then resizes the Canvas\n     * element accordingly (default).\n     * @param ratio\n     * @param resize\n     */\n    HdpiCanvas.prototype.updatePixelRatio = function (ratio, resize) {\n        if (ratio === void 0) { ratio = 0; }\n        if (resize === void 0) { resize = true; }\n        var pixelRatio = ratio || window.devicePixelRatio;\n        if (pixelRatio === this.pixelRatio) {\n            return;\n        }\n        var canvas = this.element;\n        var ctx = this.context;\n        var overrides = this.overrides = HdpiCanvas.makeHdpiOverrides(pixelRatio);\n        for (var name_1 in overrides) {\n            if (overrides.hasOwnProperty(name_1)) {\n                // Save native methods under prefixed names,\n                // if this hasn't been done by the previous overrides already.\n                if (!ctx['$' + name_1]) {\n                    ctx['$' + name_1] = ctx[name_1];\n                }\n                // Replace native methods with overrides,\n                // or previous overrides with the new ones.\n                ctx[name_1] = overrides[name_1];\n            }\n        }\n        if (resize) {\n            var logicalWidth = canvas.width / this.pixelRatio;\n            var logicalHeight = canvas.height / this.pixelRatio;\n            canvas.width = Math.round(logicalWidth * pixelRatio);\n            canvas.height = Math.round(logicalHeight * pixelRatio);\n            canvas.style.width = Math.round(logicalWidth) + 'px';\n            canvas.style.height = Math.round(logicalHeight) + 'px';\n            ctx.resetTransform(); // should be called every time Canvas size changes\n        }\n        this._pixelRatio = pixelRatio;\n    };\n    Object.defineProperty(HdpiCanvas.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HdpiCanvas.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HdpiCanvas.prototype.resize = function (width, height) {\n        var canvas = this.element;\n        var context = this.context;\n        var tempCanvas = this.tempCanvas;\n        this._width = width;\n        this._height = height;\n        tempCanvas.width = canvas.width;\n        tempCanvas.height = canvas.height;\n        var tempContext = tempCanvas.getContext('2d');\n        tempContext.drawImage(context.canvas, 0, 0);\n        canvas.width = Math.round(width * this.pixelRatio);\n        canvas.height = Math.round(height * this.pixelRatio);\n        canvas.style.width = Math.round(width) + 'px';\n        canvas.style.height = Math.round(height) + 'px';\n        context.drawImage(tempContext.canvas, 0, 0);\n        context.resetTransform();\n    };\n    Object.defineProperty(HdpiCanvas.prototype, \"textMeasuringContext\", {\n        get: function () {\n            if (this._textMeasuringContext) {\n                return this._textMeasuringContext;\n            }\n            var canvas = document.createElement('canvas');\n            return this._textMeasuringContext = canvas.getContext('2d');\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HdpiCanvas.prototype, \"svgText\", {\n        get: function () {\n            if (this._svgText) {\n                return this._svgText;\n            }\n            var xmlns = 'http://www.w3.org/2000/svg';\n            var svg = document.createElementNS(xmlns, 'svg');\n            svg.setAttribute('width', '100');\n            svg.setAttribute('height', '100');\n            // Add a descriptive class name in case someone sees this SVG element\n            // in devtools and wonders about its purpose:\n            if (svg.classList) {\n                svg.classList.add('text-measuring-svg');\n            }\n            else {\n                svg.setAttribute('class', 'text-measuring-svg');\n            }\n            svg.style.position = 'absolute';\n            svg.style.top = '-1000px';\n            svg.style.visibility = 'hidden';\n            var svgText = document.createElementNS(xmlns, 'text');\n            svgText.setAttribute('x', '0');\n            svgText.setAttribute('y', '30');\n            svgText.setAttribute('text', 'black');\n            svg.appendChild(svgText);\n            document.body.appendChild(svg);\n            this._svgText = svgText;\n            return svgText;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HdpiCanvas.prototype, \"has\", {\n        get: function () {\n            if (this._has) {\n                return this._has;\n            }\n            return this._has = Object.freeze({\n                textMetrics: this.textMeasuringContext.measureText('test')\n                    .actualBoundingBoxDescent !== undefined,\n                getTransform: this.textMeasuringContext.getTransform !== undefined,\n                flicker: !!window.safari\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HdpiCanvas.prototype.measureText = function (text, font, textBaseline, textAlign) {\n        var ctx = this.textMeasuringContext;\n        ctx.font = font;\n        ctx.textBaseline = textBaseline;\n        ctx.textAlign = textAlign;\n        return ctx.measureText(text);\n    };\n    /**\n     * Returns the width and height of the measured text.\n     * @param text The single-line text to measure.\n     * @param font The font shorthand string.\n     */\n    HdpiCanvas.prototype.getTextSize = function (text, font) {\n        if (this.has.textMetrics) {\n            var ctx = this.textMeasuringContext;\n            ctx.font = font;\n            var metrics = ctx.measureText(text);\n            return {\n                width: metrics.width,\n                height: metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent\n            };\n        }\n        else {\n            return this.measureSvgText(text, font);\n        }\n    };\n    HdpiCanvas.prototype.measureSvgText = function (text, font) {\n        var cache = HdpiCanvas.textSizeCache;\n        var fontCache = cache[font];\n        // Note: consider not caching the size of numeric strings.\n        // For example: if (isNaN(+text)) { // skip\n        if (fontCache) {\n            var size_1 = fontCache[text];\n            if (size_1) {\n                return size_1;\n            }\n        }\n        else {\n            cache[font] = {};\n        }\n        var svgText = this.svgText;\n        svgText.style.font = font;\n        svgText.textContent = text;\n        // `getBBox` returns an instance of `SVGRect` with the same `width` and `height`\n        // measurements as `DOMRect` instance returned by the `getBoundingClientRect`.\n        // But the `SVGRect` instance has half the properties of the `DOMRect`,\n        // so we use the `getBBox` method.\n        var bbox = svgText.getBBox();\n        var size = {\n            width: bbox.width,\n            height: bbox.height\n        };\n        cache[font][text] = size;\n        return size;\n    };\n    HdpiCanvas.makeHdpiOverrides = function (pixelRatio) {\n        var depth = 0;\n        return {\n            save: function () {\n                this.$save();\n                depth++;\n            },\n            restore: function () {\n                if (depth > 0) {\n                    this.$restore();\n                    depth--;\n                }\n            },\n            setTransform: function (a, b, c, d, e, f) {\n                this.$setTransform(a * pixelRatio, b * pixelRatio, c * pixelRatio, d * pixelRatio, e * pixelRatio, f * pixelRatio);\n            },\n            resetTransform: function () {\n                // As of Jan 8, 2019, `resetTransform` is still an \"experimental technology\",\n                // and doesn't work in IE11 and Edge 44.\n                this.$setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n                this.save();\n                depth = 0;\n                // The scale above will be impossible to restore,\n                // because we override the `ctx.restore` above and\n                // check `depth` there.\n            }\n        };\n    };\n    HdpiCanvas.textSizeCache = {};\n    return HdpiCanvas;\n}());\n\nvar Scene = /** @class */ (function () {\n    function Scene(document) {\n        var _this = this;\n        if (document === void 0) { document = window.document; }\n        this.id = this.createId();\n        this._dirty = false;\n        this.animationFrameId = 0;\n        this._root = null;\n        this._frameIndex = 0;\n        this._renderFrameIndex = false;\n        this.render = function () {\n            var _a = _this, ctx = _a.ctx, root = _a.root;\n            if (root && !root.visible) {\n                _this.dirty = false;\n                return;\n            }\n            // start with a blank canvas, clear previous drawing\n            ctx.clearRect(0, 0, _this.width, _this.height);\n            if (root) {\n                ctx.save();\n                if (root.visible) {\n                    root.render(ctx);\n                }\n                ctx.restore();\n            }\n            _this._frameIndex++;\n            if (_this.renderFrameIndex) {\n                ctx.fillStyle = 'white';\n                ctx.fillRect(0, 0, 40, 15);\n                ctx.fillStyle = 'black';\n                ctx.fillText(_this.frameIndex.toString(), 0, 10);\n            }\n            _this.dirty = false;\n        };\n        this.canvas = new HdpiCanvas(document);\n        this.ctx = this.canvas.context;\n    }\n    Scene.prototype.createId = function () {\n        return this.constructor.name + '-' + (Scene.id++);\n    };\n    Object.defineProperty(Scene.prototype, \"parent\", {\n        get: function () {\n            return this.canvas.parent;\n        },\n        set: function (value) {\n            this.canvas.parent = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Scene.prototype.download = function (fileName) {\n        this.canvas.download(fileName);\n    };\n    Object.defineProperty(Scene.prototype, \"width\", {\n        get: function () {\n            return this.canvas.width;\n        },\n        set: function (value) {\n            this.size = [value, this.height];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Scene.prototype, \"height\", {\n        get: function () {\n            return this.canvas.height;\n        },\n        set: function (value) {\n            this.size = [this.width, value];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Scene.prototype, \"size\", {\n        get: function () {\n            return [this.width, this.height];\n        },\n        set: function (value) {\n            var width = value[0], height = value[1];\n            if (this.width !== width || this.height !== height) {\n                this.canvas.resize(width, height);\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Scene.prototype, \"dirty\", {\n        get: function () {\n            return this._dirty;\n        },\n        set: function (dirty) {\n            if (dirty && !this._dirty) {\n                this.animationFrameId = requestAnimationFrame(this.render);\n            }\n            this._dirty = dirty;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Scene.prototype.cancelRender = function () {\n        if (this.animationFrameId) {\n            cancelAnimationFrame(this.animationFrameId);\n            this.animationFrameId = 0;\n            this._dirty = false;\n        }\n    };\n    Object.defineProperty(Scene.prototype, \"root\", {\n        get: function () {\n            return this._root;\n        },\n        set: function (node) {\n            if (node === this._root) {\n                return;\n            }\n            if (this._root) {\n                this._root._setScene(undefined);\n            }\n            this._root = node;\n            if (node) {\n                // If `node` is the root node of another scene ...\n                if (node.parent === null && node.scene && node.scene !== this) {\n                    node.scene.root = null;\n                }\n                node._setScene(this);\n            }\n            this.dirty = true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Scene.prototype.appendPath = function (path) {\n        var ctx = this.ctx;\n        var commands = path.commands;\n        var params = path.params;\n        var n = commands.length;\n        var j = 0;\n        ctx.beginPath();\n        for (var i = 0; i < n; i++) {\n            switch (commands[i]) {\n                case 'M':\n                    ctx.moveTo(params[j++], params[j++]);\n                    break;\n                case 'L':\n                    ctx.lineTo(params[j++], params[j++]);\n                    break;\n                case 'C':\n                    ctx.bezierCurveTo(params[j++], params[j++], params[j++], params[j++], params[j++], params[j++]);\n                    break;\n                case 'Z':\n                    ctx.closePath();\n                    break;\n            }\n        }\n    };\n    Object.defineProperty(Scene.prototype, \"frameIndex\", {\n        get: function () {\n            return this._frameIndex;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Scene.prototype, \"renderFrameIndex\", {\n        get: function () {\n            return this._renderFrameIndex;\n        },\n        set: function (value) {\n            if (this._renderFrameIndex !== value) {\n                this._renderFrameIndex = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Scene.id = 1;\n    return Scene;\n}());\n\nvar Padding = /** @class */ (function () {\n    function Padding(top, right, bottom, left) {\n        if (top === void 0) { top = 0; }\n        if (right === void 0) { right = top; }\n        if (bottom === void 0) { bottom = top; }\n        if (left === void 0) { left = right; }\n        this.top = top;\n        this.right = right;\n        this.bottom = bottom;\n        this.left = left;\n    }\n    Padding.prototype.clear = function () {\n        this.top = this.right = this.bottom = this.left = 0;\n    };\n    return Padding;\n}());\n\nvar __extends$J = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar RectSizing;\n(function (RectSizing) {\n    RectSizing[RectSizing[\"Content\"] = 0] = \"Content\";\n    RectSizing[RectSizing[\"Border\"] = 1] = \"Border\";\n})(RectSizing || (RectSizing = {}));\nvar Rect = /** @class */ (function (_super) {\n    __extends$J(Rect, _super);\n    function Rect() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._x = 0;\n        _this._y = 0;\n        _this._width = 10;\n        _this._height = 10;\n        _this._radius = 0;\n        /**\n         * If `true`, the rect is aligned to the pixel grid for crisp looking lines.\n         * Animated rects may not look nice with this option enabled, for example\n         * when a rect is translated by a sub-pixel value on each frame.\n         */\n        _this._crisp = false;\n        _this.effectiveStrokeWidth = Shape.defaultStyles.strokeWidth;\n        /**\n         * Similar to https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing\n         */\n        _this._sizing = RectSizing.Content;\n        return _this;\n    }\n    Object.defineProperty(Rect.prototype, \"x\", {\n        get: function () {\n            return this._x;\n        },\n        set: function (value) {\n            if (this._x !== value) {\n                this._x = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"y\", {\n        get: function () {\n            return this._y;\n        },\n        set: function (value) {\n            if (this._y !== value) {\n                this._y = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        set: function (value) {\n            if (this._width !== value) {\n                this._width = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        set: function (value) {\n            if (this._height !== value) {\n                this._height = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"radius\", {\n        get: function () {\n            return this._radius;\n        },\n        set: function (value) {\n            if (this._radius !== value) {\n                this._radius = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"crisp\", {\n        get: function () {\n            return this._crisp;\n        },\n        set: function (value) {\n            if (this._crisp !== value) {\n                this._crisp = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"strokeWidth\", {\n        get: function () {\n            return this._strokeWidth;\n        },\n        set: function (value) {\n            if (this._strokeWidth !== value) {\n                this._strokeWidth = value;\n                // Normally, when the `lineWidth` changes, we only need to repaint the rect\n                // without updating the path. If the `isCrisp` is set to `true` however,\n                // we need to update the path to make sure the new stroke aligns to\n                // the pixel grid. This is the reason we override the `lineWidth` setter\n                // and getter here.\n                if (this.crisp || this.sizing === RectSizing.Border) {\n                    this.dirtyPath = true;\n                }\n                else {\n                    this.effectiveStrokeWidth = value;\n                    this.dirty = true;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"sizing\", {\n        get: function () {\n            return this._sizing;\n        },\n        set: function (value) {\n            if (this._sizing !== value) {\n                this._sizing = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Rect.prototype.updatePath = function () {\n        var borderSizing = this.sizing === RectSizing.Border;\n        var path = this.path;\n        path.clear();\n        var x = this.x;\n        var y = this.y;\n        var width = this.width;\n        var height = this.height;\n        var strokeWidth;\n        if (borderSizing) {\n            var halfWidth = width / 2;\n            var halfHeight = height / 2;\n            strokeWidth = Math.min(this.strokeWidth, halfWidth, halfHeight);\n            x = Math.min(x + strokeWidth / 2, x + halfWidth);\n            y = Math.min(y + strokeWidth / 2, y + halfHeight);\n            width = Math.max(width - strokeWidth, 0);\n            height = Math.max(height - strokeWidth, 0);\n        }\n        else {\n            strokeWidth = this.strokeWidth;\n        }\n        this.effectiveStrokeWidth = strokeWidth;\n        if (this.crisp && !borderSizing) {\n            var alignment = Math.floor(strokeWidth) % 2 / 2;\n            path.rect(Math.floor(x) + alignment, Math.floor(y) + alignment, Math.floor(width) + Math.floor(x % 1 + width % 1), Math.floor(height) + Math.floor(y % 1 + height % 1));\n        }\n        else {\n            path.rect(x, y, width, height);\n        }\n    };\n    Rect.prototype.computeBBox = function () {\n        return new BBox(this.x, this.y, this.width, this.height);\n    };\n    Rect.prototype.isPointInPath = function (x, y) {\n        var point = this.transformPoint(x, y);\n        var bbox = this.computeBBox();\n        return bbox.containsPoint(point.x, point.y);\n    };\n    Rect.prototype.isPointInStroke = function (x, y) {\n        return false;\n    };\n    Rect.prototype.fillStroke = function (ctx) {\n        if (!this.scene) {\n            return;\n        }\n        var pixelRatio = this.scene.canvas.pixelRatio || 1;\n        if (this.fill) {\n            ctx.fillStyle = this.fill;\n            ctx.globalAlpha = this.opacity * this.fillOpacity;\n            // The canvas context scaling (depends on the device's pixel ratio)\n            // has no effect on shadows, so we have to account for the pixel ratio\n            // manually here.\n            var fillShadow = this.fillShadow;\n            if (fillShadow && fillShadow.enabled) {\n                ctx.shadowColor = fillShadow.color;\n                ctx.shadowOffsetX = fillShadow.xOffset * pixelRatio;\n                ctx.shadowOffsetY = fillShadow.yOffset * pixelRatio;\n                ctx.shadowBlur = fillShadow.blur * pixelRatio;\n            }\n            ctx.fill();\n        }\n        ctx.shadowColor = 'rgba(0, 0, 0, 0)';\n        if (this.stroke && this.effectiveStrokeWidth) {\n            ctx.strokeStyle = this.stroke;\n            ctx.globalAlpha = this.opacity * this.strokeOpacity;\n            ctx.lineWidth = this.effectiveStrokeWidth;\n            if (this.lineDash) {\n                ctx.setLineDash(this.lineDash);\n            }\n            if (this.lineDashOffset) {\n                ctx.lineDashOffset = this.lineDashOffset;\n            }\n            if (this.lineCap) {\n                ctx.lineCap = this.lineCap;\n            }\n            if (this.lineJoin) {\n                ctx.lineJoin = this.lineJoin;\n            }\n            var strokeShadow = this.strokeShadow;\n            if (strokeShadow && strokeShadow.enabled) {\n                ctx.shadowColor = strokeShadow.color;\n                ctx.shadowOffsetX = strokeShadow.xOffset * pixelRatio;\n                ctx.shadowOffsetY = strokeShadow.yOffset * pixelRatio;\n                ctx.shadowBlur = strokeShadow.blur * pixelRatio;\n            }\n            ctx.stroke();\n        }\n    };\n    Rect.className = 'Rect';\n    return Rect;\n}(Path));\n\nvar __extends$K = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Marker = /** @class */ (function (_super) {\n    __extends$K(Marker, _super);\n    function Marker() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._x = 0;\n        _this._y = 0;\n        _this._size = 4;\n        return _this;\n    }\n    Object.defineProperty(Marker.prototype, \"x\", {\n        get: function () {\n            return this._x;\n        },\n        set: function (value) {\n            if (this._x !== value) {\n                this._x = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Marker.prototype, \"y\", {\n        get: function () {\n            return this._y;\n        },\n        set: function (value) {\n            if (this._y !== value) {\n                this._y = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Marker.prototype, \"size\", {\n        get: function () {\n            return this._size;\n        },\n        set: function (value) {\n            if (this._size !== value) {\n                this._size = Math.abs(value);\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Marker.prototype.computeBBox = function () {\n        var _a = this, x = _a.x, y = _a.y, size = _a.size;\n        var half = size / 2;\n        return new BBox(x - half, y - half, size, size);\n    };\n    return Marker;\n}(Path));\n\nvar __extends$L = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Square = /** @class */ (function (_super) {\n    __extends$L(Square, _super);\n    function Square() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Square.prototype.updatePath = function () {\n        var _a = this, path = _a.path, x = _a.x, y = _a.y;\n        var hs = this.size / 2;\n        path.clear();\n        path.moveTo(x - hs, y - hs);\n        path.lineTo(x + hs, y - hs);\n        path.lineTo(x + hs, y + hs);\n        path.lineTo(x - hs, y + hs);\n        path.closePath();\n    };\n    Square.className = 'Square';\n    return Square;\n}(Marker));\n\nvar __extends$M = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MarkerLabel = /** @class */ (function (_super) {\n    __extends$M(MarkerLabel, _super);\n    function MarkerLabel() {\n        var _this = _super.call(this) || this;\n        _this.label = new Text();\n        _this._marker = new Square();\n        _this._markerSize = MarkerLabel.defaults.markerSize;\n        _this._padding = MarkerLabel.defaults.padding;\n        var label = _this.label;\n        label.textBaseline = 'middle';\n        label.fontStyle = MarkerLabel.defaults.labelFontStyle;\n        label.fontWeight = MarkerLabel.defaults.labelFontWeight;\n        label.fontSize = MarkerLabel.defaults.labelFontSize;\n        label.fontFamily = MarkerLabel.defaults.labelFontFamily;\n        label.fill = MarkerLabel.defaults.labelColor;\n        label.y = 2; // for better looking vertical alignment of labels to markers\n        _this.append([_this.marker, label]);\n        _this.update();\n        return _this;\n    }\n    Object.defineProperty(MarkerLabel.prototype, \"labelText\", {\n        get: function () {\n            return this.label.text;\n        },\n        set: function (value) {\n            this.label.text = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"labelFontStyle\", {\n        get: function () {\n            return this.label.fontStyle;\n        },\n        set: function (value) {\n            this.label.fontStyle = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"labelFontWeight\", {\n        get: function () {\n            return this.label.fontWeight;\n        },\n        set: function (value) {\n            this.label.fontWeight = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"labelFontSize\", {\n        get: function () {\n            return this.label.fontSize;\n        },\n        set: function (value) {\n            this.label.fontSize = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"labelFontFamily\", {\n        get: function () {\n            return this.label.fontFamily;\n        },\n        set: function (value) {\n            this.label.fontFamily = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"labelColor\", {\n        get: function () {\n            return this.label.fill;\n        },\n        set: function (value) {\n            this.label.fill = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"marker\", {\n        get: function () {\n            return this._marker;\n        },\n        set: function (value) {\n            if (this._marker !== value) {\n                this.removeChild(this._marker);\n                this._marker = value;\n                this.appendChild(value);\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"markerSize\", {\n        get: function () {\n            return this._markerSize;\n        },\n        set: function (value) {\n            if (this._markerSize !== value) {\n                this._markerSize = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"markerFill\", {\n        get: function () {\n            return this.marker.fill;\n        },\n        set: function (value) {\n            this.marker.fill = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"markerStroke\", {\n        get: function () {\n            return this.marker.stroke;\n        },\n        set: function (value) {\n            this.marker.stroke = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"markerStrokeWidth\", {\n        get: function () {\n            return this.marker.strokeWidth;\n        },\n        set: function (value) {\n            this.marker.strokeWidth = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"markerFillOpacity\", {\n        get: function () {\n            return this.marker.fillOpacity;\n        },\n        set: function (value) {\n            this.marker.fillOpacity = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"markerStrokeOpacity\", {\n        get: function () {\n            return this.marker.strokeOpacity;\n        },\n        set: function (value) {\n            this.marker.strokeOpacity = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"opacity\", {\n        get: function () {\n            return this.marker.opacity;\n        },\n        set: function (value) {\n            this.marker.opacity = value;\n            this.label.opacity = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"padding\", {\n        get: function () {\n            return this._padding;\n        },\n        set: function (value) {\n            if (this._padding !== value) {\n                this._padding = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MarkerLabel.prototype.update = function () {\n        var marker = this.marker;\n        var markerSize = this.markerSize;\n        marker.size = markerSize;\n        this.label.x = markerSize / 2 + this.padding;\n    };\n    MarkerLabel.className = 'MarkerLabel';\n    MarkerLabel.defaults = Object.freeze({\n        padding: 8,\n        markerSize: 15,\n        labelFont: '12px Verdana, sans-serif',\n        labelFontStyle: undefined,\n        labelFontWeight: undefined,\n        labelFontSize: 12,\n        labelFontFamily: 'Verdana, sans-serif',\n        labelColor: 'black'\n    });\n    return MarkerLabel;\n}(Group));\n\nvar Observable = /** @class */ (function () {\n    function Observable() {\n        this.propertyListeners = new Map(); // property name => property change listeners\n        this.eventListeners = new Map(); // event type => event listeners\n    }\n    Observable.prototype.addPropertyListener = function (name, listener) {\n        var propertyListeners = this.propertyListeners;\n        var listeners = propertyListeners.get(name);\n        if (!listeners) {\n            listeners = new Set();\n            propertyListeners.set(name, listeners);\n        }\n        if (!listeners.has(listener)) {\n            listeners.add(listener);\n            return listener;\n        }\n        else {\n            console.warn('Listener ', listener, ' already added to ', this);\n        }\n    };\n    Observable.prototype.removePropertyListener = function (name, listener) {\n        var propertyListeners = this.propertyListeners;\n        var listeners = propertyListeners.get(name);\n        if (listeners) {\n            if (listener) {\n                listeners.delete(listener);\n            }\n            else {\n                listeners.clear();\n            }\n        }\n    };\n    Observable.prototype.notifyPropertyListeners = function (name, oldValue, value) {\n        var _this = this;\n        var nameListeners = this.propertyListeners;\n        var listeners = nameListeners.get(name);\n        if (listeners) {\n            listeners.forEach(function (listener) {\n                listener({\n                    type: name,\n                    source: _this,\n                    value: value,\n                    oldValue: oldValue\n                });\n            });\n        }\n    };\n    Observable.prototype.addEventListener = function (type, listener) {\n        var eventListeners = this.eventListeners;\n        var listeners = eventListeners.get(type);\n        if (!listeners) {\n            listeners = new Set();\n            eventListeners.set(type, listeners);\n        }\n        if (!listeners.has(listener)) {\n            listeners.add(listener);\n            return listener;\n        }\n        else {\n            console.warn('Category listener ', listener, ' already added to ', this);\n        }\n    };\n    Observable.prototype.removeEventListener = function (type, listener) {\n        var eventListeners = this.eventListeners;\n        var listeners = eventListeners.get(type);\n        if (listeners) {\n            if (listener) {\n                listeners.delete(listener);\n            }\n            else {\n                listeners.clear();\n            }\n        }\n    };\n    Observable.prototype.notifyEventListeners = function (types) {\n        var eventListeners = this.eventListeners;\n        types.forEach(function (type) {\n            var listeners = eventListeners.get(type);\n            if (listeners) {\n                listeners.forEach(function (listener) { return listener({ type: type }); });\n            }\n        });\n    };\n    Observable.prototype.fireEvent = function (event) {\n        var listeners = this.eventListeners.get(event.type);\n        if (listeners) {\n            listeners.forEach(function (listener) { return listener(event); });\n        }\n    };\n    Observable.privateKeyPrefix = '_';\n    return Observable;\n}());\nfunction reactive(events, property) {\n    return function (target, key) {\n        // `target` is either a constructor (static member) or prototype (instance member)\n        var privateKey = Observable.privateKeyPrefix + key;\n        var backingProperty = property ? property.split('.') : undefined;\n        var privateKeyEvents = privateKey + 'Events';\n        if (!target[key]) {\n            if (events) {\n                target[privateKeyEvents] = events;\n            }\n            Object.defineProperty(target, key, {\n                set: function (value) {\n                    var oldValue;\n                    if (backingProperty) {\n                        oldValue = this;\n                        backingProperty.forEach(function (key) {\n                            oldValue = oldValue[key];\n                        });\n                    }\n                    else {\n                        oldValue = this[privateKey];\n                    }\n                    if (oldValue !== value || (typeof value === 'object' && value !== null)) {\n                        if (backingProperty) {\n                            var i = 0, last = backingProperty.length - 1, obj = this;\n                            while (i < last) {\n                                obj = obj[backingProperty[i++]];\n                            }\n                            obj[backingProperty[last]] = value;\n                        }\n                        else {\n                            this[privateKey] = value;\n                        }\n                        this.notifyPropertyListeners(key, oldValue, value);\n                        var events_1 = this[privateKeyEvents];\n                        if (events_1) {\n                            this.notifyEventListeners(events_1);\n                        }\n                    }\n                },\n                get: function () {\n                    var value;\n                    if (backingProperty) {\n                        value = this;\n                        backingProperty.forEach(function (key) {\n                            value = value[key];\n                        });\n                    }\n                    else {\n                        value = this[privateKey];\n                    }\n                    return value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n        }\n    };\n}\n\nvar __extends$N = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$M = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar Orientation;\n(function (Orientation) {\n    Orientation[Orientation[\"Vertical\"] = 0] = \"Vertical\";\n    Orientation[Orientation[\"Horizontal\"] = 1] = \"Horizontal\";\n})(Orientation || (Orientation = {}));\nvar Legend = /** @class */ (function (_super) {\n    __extends$N(Legend, _super);\n    function Legend() {\n        var _this = _super.call(this) || this;\n        _this.group = new Group();\n        _this.itemSelection = Selection.select(_this.group).selectAll();\n        _this.oldSize = [0, 0];\n        _this.data = [];\n        _this.enabled = true;\n        _this.orientation = Orientation.Vertical;\n        _this.position = 'right';\n        _this.padding = 20;\n        _this.itemPaddingX = 16;\n        _this.itemPaddingY = 8;\n        _this.markerPadding = MarkerLabel.defaults.padding;\n        _this.markerSize = MarkerLabel.defaults.markerSize;\n        _this.markerStrokeWidth = 1;\n        _this.labelColor = MarkerLabel.defaults.labelColor;\n        _this.labelFontStyle = MarkerLabel.defaults.labelFontStyle;\n        _this.labelFontWeight = MarkerLabel.defaults.labelFontWeight;\n        _this.labelFontSize = MarkerLabel.defaults.labelFontSize;\n        _this.labelFontFamily = MarkerLabel.defaults.labelFontFamily;\n        _this._size = [0, 0];\n        _this.addPropertyListener('data', function (event) {\n            var legend = event.source, data = event.value;\n            legend.group.visible = legend.enabled && data.length > 0;\n        });\n        _this.addPropertyListener('enabled', function (event) {\n            var legend = event.source, value = event.value;\n            legend.group.visible = value && legend.data.length > 0;\n        });\n        _this.addPropertyListener('position', function (event) {\n            var legend = event.source, position = event.value;\n            switch (position) {\n                case 'right':\n                case 'left':\n                    legend.orientation = Orientation.Vertical;\n                    break;\n                case 'bottom':\n                case 'top':\n                    legend.orientation = Orientation.Horizontal;\n                    break;\n            }\n        });\n        _this.addEventListener('change', function () { return _this.update(); });\n        return _this;\n    }\n    Object.defineProperty(Legend.prototype, \"size\", {\n        get: function () {\n            return this._size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * The method is given the desired size of the legend, which only serves as a hint.\n     * The vertically oriented legend will take as much horizontal space as needed, but will\n     * respect the height constraints, and the horizontal legend will take as much vertical\n     * space as needed in an attempt not to exceed the given width.\n     * After the layout is done, the {@link size} will contain the actual size of the legend.\n     * If the actual size is not the same as the previous actual size, the legend will fire\n     * the 'layoutChange' event to communicate that another layout is needed, and the above\n     * process should be repeated.\n     * @param width\n     * @param height\n     */\n    Legend.prototype.performLayout = function (width, height) {\n        var _this = this;\n        var markerType = this.markerType;\n        var updateSelection = this.itemSelection.setData(this.data, function (_, datum) {\n            var itemMarkerType = markerType || datum.marker.type;\n            var itemMarkerName = itemMarkerType ? itemMarkerType.name : 'Square';\n            return datum.id + '-' + datum.itemId + '-' + itemMarkerName;\n        });\n        updateSelection.exit.remove();\n        var enterSelection = updateSelection.enter.append(MarkerLabel).each(function (node, datum) {\n            var Marker = markerType || datum.marker.type || Square;\n            node.marker = new Marker();\n        });\n        var itemSelection = this.itemSelection = updateSelection.merge(enterSelection);\n        var itemCount = itemSelection.size;\n        var itemPaddingX = this.itemPaddingX;\n        var itemPaddingY = this.itemPaddingY;\n        // Update properties that affect the size of the legend items and measure them.\n        var bboxes = [];\n        itemSelection.each(function (markerLabel, datum) {\n            // TODO: measure only when one of these properties or data change (in a separate routine)\n            markerLabel.markerSize = _this.markerSize;\n            markerLabel.labelFontStyle = _this.labelFontStyle;\n            markerLabel.labelFontWeight = _this.labelFontWeight;\n            markerLabel.labelFontSize = _this.labelFontSize;\n            markerLabel.labelFontFamily = _this.labelFontFamily;\n            markerLabel.labelText = datum.label.text;\n            markerLabel.padding = _this.markerPadding;\n            bboxes.push(markerLabel.computeBBox());\n        });\n        var itemHeight = bboxes.length && bboxes[0].height;\n        var rowCount = 0;\n        var columnWidth = 0;\n        var paddedItemsWidth = 0;\n        var paddedItemsHeight = 0;\n        switch (this.orientation) {\n            case Orientation.Horizontal:\n                if (!(isFinite(width) && width > 0)) {\n                    return false;\n                }\n                rowCount = 0;\n                var columnCount = 0;\n                // Split legend items into columns until the width is suitable.\n                do {\n                    var itemsWidth = 0;\n                    columnCount = 0;\n                    columnWidth = 0;\n                    rowCount++;\n                    var i = 0;\n                    while (i < itemCount) {\n                        var bbox = bboxes[i];\n                        if (bbox.width > columnWidth) {\n                            columnWidth = bbox.width;\n                        }\n                        i++;\n                        if (i % rowCount === 0) {\n                            itemsWidth += columnWidth;\n                            columnWidth = 0;\n                            columnCount++;\n                        }\n                    }\n                    if (i % rowCount !== 0) {\n                        itemsWidth += columnWidth;\n                        columnCount++;\n                    }\n                    paddedItemsWidth = itemsWidth + (columnCount - 1) * itemPaddingX;\n                } while (paddedItemsWidth > width && columnCount > 1);\n                paddedItemsHeight = itemHeight * rowCount + (rowCount - 1) * itemPaddingY;\n                break;\n            case Orientation.Vertical:\n                if (!(isFinite(height) && height > 0)) {\n                    return false;\n                }\n                rowCount = itemCount * 2;\n                // Split legend items into columns until the height is suitable.\n                do {\n                    rowCount = (rowCount >> 1) + (rowCount % 2);\n                    columnWidth = 0;\n                    var itemsWidth = 0;\n                    var itemsHeight = 0;\n                    var columnCount_1 = 0;\n                    var i = 0;\n                    while (i < itemCount) {\n                        var bbox = bboxes[i];\n                        if (!columnCount_1) {\n                            itemsHeight += bbox.height;\n                        }\n                        if (bbox.width > columnWidth) {\n                            columnWidth = bbox.width;\n                        }\n                        i++;\n                        if (i % rowCount === 0) {\n                            itemsWidth += columnWidth;\n                            columnWidth = 0;\n                            columnCount_1++;\n                        }\n                    }\n                    if (i % rowCount !== 0) {\n                        itemsWidth += columnWidth;\n                        columnCount_1++;\n                    }\n                    paddedItemsWidth = itemsWidth + (columnCount_1 - 1) * itemPaddingX;\n                    paddedItemsHeight = itemsHeight + (rowCount - 1) * itemPaddingY;\n                } while (paddedItemsHeight > height && rowCount > 1);\n                break;\n        }\n        // Top-left corner of the first legend item.\n        var startX = (width - paddedItemsWidth) / 2;\n        var startY = (height - paddedItemsHeight) / 2;\n        var x = 0;\n        var y = 0;\n        columnWidth = 0;\n        // Position legend items using the layout computed above.\n        itemSelection.each(function (markerLabel, datum, i) {\n            // Round off for pixel grid alignment to work properly.\n            markerLabel.translationX = Math.floor(startX + x);\n            markerLabel.translationY = Math.floor(startY + y);\n            var bbox = bboxes[i];\n            if (bbox.width > columnWidth) {\n                columnWidth = bbox.width;\n            }\n            if ((i + 1) % rowCount === 0) {\n                x += columnWidth + itemPaddingX;\n                y = 0;\n                columnWidth = 0;\n            }\n            else {\n                y += bbox.height + itemPaddingY;\n            }\n        });\n        // Update legend item properties that don't affect the layout.\n        this.update();\n        var size = this._size;\n        var oldSize = this.oldSize;\n        size[0] = paddedItemsWidth;\n        size[1] = paddedItemsHeight;\n        if (size[0] !== oldSize[0] || size[1] !== oldSize[1]) {\n            oldSize[0] = size[0];\n            oldSize[1] = size[1];\n        }\n    };\n    Legend.prototype.update = function () {\n        var _this = this;\n        this.itemSelection.each(function (markerLabel, datum) {\n            var marker = datum.marker;\n            markerLabel.markerFill = marker.fill;\n            markerLabel.markerStroke = marker.stroke;\n            markerLabel.markerStrokeWidth = _this.markerStrokeWidth;\n            markerLabel.markerFillOpacity = marker.fillOpacity;\n            markerLabel.markerStrokeOpacity = marker.strokeOpacity;\n            markerLabel.opacity = datum.enabled ? 1 : 0.5;\n            markerLabel.labelColor = _this.labelColor;\n        });\n    };\n    Legend.prototype.datumForPoint = function (x, y) {\n        var node = this.group.pickNode(x, y);\n        if (node && node.parent) {\n            return node.parent.datum;\n        }\n    };\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"data\", void 0);\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"enabled\", void 0);\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"orientation\", void 0);\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"position\", void 0);\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"padding\", void 0);\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"itemPaddingX\", void 0);\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"itemPaddingY\", void 0);\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"markerType\", void 0);\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"markerPadding\", void 0);\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"markerSize\", void 0);\n    __decorate$M([\n        reactive(['change'])\n    ], Legend.prototype, \"markerStrokeWidth\", void 0);\n    __decorate$M([\n        reactive(['change'])\n    ], Legend.prototype, \"labelColor\", void 0);\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"labelFontStyle\", void 0);\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"labelFontWeight\", void 0);\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"labelFontSize\", void 0);\n    __decorate$M([\n        reactive(['layoutChange'])\n    ], Legend.prototype, \"labelFontFamily\", void 0);\n    return Legend;\n}(Observable));\n\nvar __extends$O = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$N = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar Series = /** @class */ (function (_super) {\n    __extends$O(Series, _super);\n    function Series() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.id = _this.createId();\n        /**\n         * The group node that contains all the nodes used to render this series.\n         */\n        _this.group = new Group();\n        _this.directions = [ChartAxisDirection.X, ChartAxisDirection.Y];\n        _this.tooltipEnabled = false;\n        _this.data = [];\n        _this.visible = true;\n        _this.showInLegend = true;\n        _this.scheduleLayout = function () {\n            _this.fireEvent({ type: 'layoutChange' });\n        };\n        _this.scheduleData = function () {\n            _this.fireEvent({ type: 'dataChange' });\n        };\n        return _this;\n    }\n    /**\n     * Returns the actual keys used (to fetch the values from `data` items) for the given direction.\n     */\n    Series.prototype.getKeys = function (direction) {\n        var _this = this;\n        var directionKeys = this.directionKeys;\n        var keys = directionKeys && directionKeys[direction];\n        var values = [];\n        if (keys) {\n            keys.forEach(function (key) {\n                var value = _this[key];\n                if (value) {\n                    if (Array.isArray(value)) {\n                        values.push.apply(values, value);\n                    }\n                    else {\n                        values.push(value);\n                    }\n                }\n            });\n        }\n        return values;\n    };\n    Series.prototype.createId = function () {\n        var constructor = this.constructor;\n        var className = constructor.className;\n        if (!className) {\n            throw new Error(\"The \" + constructor + \" is missing the 'className' property.\");\n        }\n        return className + '-' + (constructor.id = (constructor.id || 0) + 1);\n    };\n    Series.prototype.toggleSeriesItem = function (itemId, enabled) {\n        this.visible = enabled;\n    };\n    Series.prototype.fixNumericExtent = function (extent, type) {\n        if (!extent) {\n            // if (type) {\n            //     console.warn(`The ${type}-domain could not be found (no valid values), using the default of [0, 1].`);\n            // }\n            return [0, 1];\n        }\n        var min = extent[0], max = extent[1];\n        if (min === max) {\n            min -= 1;\n            max += 1;\n            // if (type) {\n            //     console.warn(`The ${type}-domain has zero length and has been automatically expanded`\n            //         + ` by 1 in each direction (from the single valid ${type}-value: ${min}).`);\n            // }\n        }\n        if (!isFinite(min) || !isFinite(max)) {\n            min = 0;\n            max = 1;\n            // if (type) {\n            //     console.warn(`The ${type}-domain has infinite length, using the default of [0, 1].`);\n            // }\n        }\n        return [min, max];\n    };\n    __decorate$N([\n        reactive(['dataChange'])\n    ], Series.prototype, \"data\", void 0);\n    __decorate$N([\n        reactive(['dataChange'])\n    ], Series.prototype, \"visible\", void 0);\n    __decorate$N([\n        reactive(['layoutChange'])\n    ], Series.prototype, \"showInLegend\", void 0);\n    return Series;\n}(Observable));\n\nvar __extends$P = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Circle = /** @class */ (function (_super) {\n    __extends$P(Circle, _super);\n    function Circle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Circle.prototype.updatePath = function () {\n        var _a = this, x = _a.x, y = _a.y, path = _a.path, size = _a.size;\n        var r = size / 2;\n        path.clear();\n        path.cubicArc(x, y, r, r, 0, 0, Math.PI * 2, 0);\n        path.closePath();\n    };\n    Circle.className = 'Circle';\n    return Circle;\n}(Marker));\n\nvar __extends$Q = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$O = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SeriesMarker = /** @class */ (function (_super) {\n    __extends$Q(SeriesMarker, _super);\n    function SeriesMarker() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.enabled = true;\n        /**\n         * Marker constructor function. A series will create one marker instance per data point.\n         */\n        _this.type = Circle;\n        _this.size = 8;\n        /**\n         * In case a series has the `sizeKey` set, the `sizeKey` values along with the `minSize/size` configs\n         * will be used to determine the size of the marker. All values will be mapped to a marker size\n         * within the `[minSize, size]` range, where the largest values will correspond to the `size`\n         * and the lowest to the `minSize`.\n         */\n        _this.minSize = 12;\n        return _this;\n    }\n    __decorate$O([\n        reactive(['change'])\n    ], SeriesMarker.prototype, \"enabled\", void 0);\n    __decorate$O([\n        reactive(['change'])\n    ], SeriesMarker.prototype, \"type\", void 0);\n    __decorate$O([\n        reactive(['change'])\n    ], SeriesMarker.prototype, \"size\", void 0);\n    __decorate$O([\n        reactive(['change'])\n    ], SeriesMarker.prototype, \"minSize\", void 0);\n    __decorate$O([\n        reactive(['change'])\n    ], SeriesMarker.prototype, \"fill\", void 0);\n    __decorate$O([\n        reactive(['change'])\n    ], SeriesMarker.prototype, \"stroke\", void 0);\n    __decorate$O([\n        reactive(['change'])\n    ], SeriesMarker.prototype, \"strokeWidth\", void 0);\n    return SeriesMarker;\n}(Observable));\n\nvar __extends$R = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar CartesianSeries = /** @class */ (function (_super) {\n    __extends$R(CartesianSeries, _super);\n    function CartesianSeries() {\n        var _a;\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.directionKeys = (_a = {},\n            _a[ChartAxisDirection.X] = ['xKey'],\n            _a[ChartAxisDirection.Y] = ['yKey'],\n            _a);\n        return _this;\n    }\n    return CartesianSeries;\n}(Series));\nvar CartesianSeriesMarker = /** @class */ (function (_super) {\n    __extends$R(CartesianSeriesMarker, _super);\n    function CartesianSeriesMarker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return CartesianSeriesMarker;\n}(SeriesMarker));\n\nvar __extends$S = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$P = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar Chart = /** @class */ (function (_super) {\n    __extends$S(Chart, _super);\n    function Chart(document) {\n        if (document === void 0) { document = window.document; }\n        var _this = _super.call(this) || this;\n        _this.id = _this.createId();\n        _this.background = new Rect();\n        _this.legendAutoPadding = new Padding();\n        _this.captionAutoPadding = 0; // top padding only\n        _this.defaultTooltipClass = 'ag-chart-tooltip';\n        _this.legend = new Legend();\n        _this.tooltipOffset = [20, 20];\n        _this.padding = new Padding(20);\n        _this.onLayoutChange = function () {\n            _this.layoutPending = true;\n        };\n        _this.onLegendPositionChange = function () {\n            _this.legendAutoPadding.clear();\n            _this.layoutPending = true;\n        };\n        _this._axes = [];\n        _this._series = [];\n        _this.scheduleLayout = function () {\n            _this.layoutPending = true;\n        };\n        _this.scheduleData = function () {\n            _this.dataPending = true;\n        };\n        _this._data = [];\n        _this._axesChanged = false;\n        _this._seriesChanged = false;\n        _this.layoutCallbackId = 0;\n        _this._performLayout = function () {\n            _this.layoutCallbackId = 0;\n            _this.background.width = _this.width;\n            _this.background.height = _this.height;\n            _this.performLayout();\n            if (!_this.layoutPending) {\n                _this.fireEvent({ type: 'layoutDone' });\n            }\n        };\n        _this.dataCallbackId = 0;\n        _this.updateLegend = function () {\n            var legendData = [];\n            _this.series.filter(function (s) { return s.showInLegend; }).forEach(function (series) { return series.listSeriesItems(legendData); });\n            _this.legend.data = legendData;\n        };\n        _this.onMouseMove = function (event) {\n            var x = event.offsetX, y = event.offsetY;\n            var pick = _this.pickSeriesNode(x, y);\n            if (pick) {\n                var node = pick.node;\n                if (node instanceof Shape) {\n                    if (!_this.lastPick || // cursor moved from empty space to a node\n                        _this.lastPick.node !== node) { // cursor moved from one node to another\n                        _this.onSeriesNodePick(event, pick.series, node);\n                    }\n                    else if (pick.series.tooltipEnabled) { // cursor moved within the same node\n                        _this.showTooltip(event);\n                    }\n                }\n            }\n            else if (_this.lastPick) { // cursor moved from a node to empty space\n                _this.lastPick.series.dehighlightNode();\n                _this.hideTooltip();\n                _this.lastPick = undefined;\n            }\n        };\n        _this.onMouseOut = function (_) {\n            _this.toggleTooltip(false);\n        };\n        _this.onClick = function (event) {\n            var x = event.offsetX, y = event.offsetY;\n            var datum = _this.legend.datumForPoint(x, y);\n            if (datum) {\n                var id_1 = datum.id, itemId = datum.itemId, enabled = datum.enabled;\n                var series = find(_this.series, function (series) { return series.id === id_1; });\n                if (series) {\n                    series.toggleSeriesItem(itemId, !enabled);\n                }\n            }\n        };\n        _this._tooltipClass = _this.defaultTooltipClass;\n        var root = new Group();\n        var background = _this.background;\n        background.fill = 'white';\n        root.appendChild(background);\n        var scene = new Scene(document);\n        _this.scene = scene;\n        scene.root = root;\n        var legend = _this.legend;\n        legend.addEventListener('layoutChange', _this.onLayoutChange);\n        legend.addPropertyListener('position', _this.onLegendPositionChange);\n        _this.tooltipElement = document.createElement('div');\n        _this.tooltipClass = '';\n        document.body.appendChild(_this.tooltipElement);\n        _this.setupListeners(scene.canvas.element);\n        var captionListener = (function (event) {\n            var chart = event.source, caption = event.value, oldCaption = event.oldValue;\n            if (oldCaption) {\n                oldCaption.removeEventListener('change', chart.onLayoutChange);\n                chart.scene.root.removeChild(oldCaption.node);\n            }\n            if (caption) {\n                caption.addEventListener('change', chart.onLayoutChange);\n                chart.scene.root.appendChild(caption.node);\n            }\n        });\n        _this.addPropertyListener('title', captionListener);\n        _this.addPropertyListener('subtitle', captionListener);\n        _this.addEventListener('layoutChange', function () { return _this.layoutPending = true; });\n        return _this;\n    }\n    Chart.prototype.createId = function () {\n        var constructor = this.constructor;\n        var className = constructor.className;\n        if (!className) {\n            throw new Error(\"The \" + constructor + \" is missing the 'className' property.\");\n        }\n        return className + '-' + (constructor.id = (constructor.id || 0) + 1);\n    };\n    Chart.prototype.destroy = function () {\n        var tooltipParent = this.tooltipElement.parentNode;\n        if (tooltipParent) {\n            tooltipParent.removeChild(this.tooltipElement);\n        }\n        this.legend.removeEventListener('layoutChange', this.onLayoutChange);\n        this.cleanupListeners(this.scene.canvas.element);\n        this.scene.parent = undefined;\n    };\n    Object.defineProperty(Chart.prototype, \"element\", {\n        get: function () {\n            return this.scene.canvas.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"axes\", {\n        get: function () {\n            return this._axes;\n        },\n        set: function (values) {\n            var _this = this;\n            var root = this.scene.root;\n            this._axes.forEach(function (axis) { return root.removeChild(axis.group); });\n            this._axes = values;\n            this._axes.forEach(function (axis) { return root.insertBefore(axis.group, _this.seriesRoot); });\n            this.axesChanged = true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"series\", {\n        get: function () {\n            return this._series;\n        },\n        set: function (values) {\n            var _this = this;\n            this.removeAllSeries();\n            values.forEach(function (series) { return _this.addSeries(series); });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.addSeries = function (series, before) {\n        var _a = this, allSeries = _a.series, seriesRoot = _a.seriesRoot;\n        var canAdd = allSeries.indexOf(series) < 0;\n        if (canAdd) {\n            var beforeIndex = before ? allSeries.indexOf(before) : -1;\n            if (beforeIndex >= 0) {\n                allSeries.splice(beforeIndex, 0, series);\n                seriesRoot.insertBefore(series.group, before.group);\n            }\n            else {\n                allSeries.push(series);\n                seriesRoot.append(series.group);\n            }\n            this.initSeries(series);\n            this.seriesChanged = true;\n            this.axesChanged = true;\n            return true;\n        }\n        return false;\n    };\n    Chart.prototype.initSeries = function (series) {\n        series.chart = this;\n        series.addEventListener('layoutChange', this.scheduleLayout);\n        series.addEventListener('dataChange', this.scheduleData);\n        series.addEventListener('legendChange', this.updateLegend);\n    };\n    Chart.prototype.freeSeries = function (series) {\n        series.chart = undefined;\n        series.removeEventListener('layoutChange', this.scheduleLayout);\n        series.removeEventListener('dataChange', this.scheduleData);\n        series.removeEventListener('legendChange', this.updateLegend);\n    };\n    Chart.prototype.addSeriesAfter = function (series, after) {\n        var _a = this, allSeries = _a.series, seriesRoot = _a.seriesRoot;\n        var canAdd = allSeries.indexOf(series) < 0;\n        if (canAdd) {\n            var afterIndex = after ? this.series.indexOf(after) : -1;\n            if (afterIndex >= 0) {\n                if (afterIndex + 1 < allSeries.length) {\n                    seriesRoot.insertBefore(series.group, allSeries[afterIndex + 1].group);\n                }\n                else {\n                    seriesRoot.append(series.group);\n                }\n                this.initSeries(series);\n                allSeries.splice(afterIndex + 1, 0, series);\n            }\n            else {\n                if (allSeries.length > 0) {\n                    seriesRoot.insertBefore(series.group, allSeries[0].group);\n                }\n                else {\n                    seriesRoot.append(series.group);\n                }\n                this.initSeries(series);\n                allSeries.unshift(series);\n            }\n            this.seriesChanged = true;\n            this.axesChanged = true;\n        }\n        return false;\n    };\n    Chart.prototype.removeSeries = function (series) {\n        var index = this.series.indexOf(series);\n        if (index >= 0) {\n            this.series.splice(index, 1);\n            this.freeSeries(series);\n            this.seriesRoot.removeChild(series.group);\n            this.seriesChanged = true;\n            return true;\n        }\n        return false;\n    };\n    Chart.prototype.removeAllSeries = function () {\n        var _this = this;\n        this.series.forEach(function (series) {\n            _this.freeSeries(series);\n            _this.seriesRoot.removeChild(series.group);\n        });\n        this._series = []; // using `_series` instead of `series` to prevent infinite recursion\n        this.seriesChanged = true;\n    };\n    /**\n     * Finds all the series that use any given axis.\n     */\n    Chart.prototype.onSeriesChange = function () {\n        var _this = this;\n        this.axes.forEach(function (axis) {\n            var axisName = axis.direction + 'Axis';\n            var boundSeries = [];\n            _this.series.forEach(function (series) {\n                if (series[axisName] === axis) {\n                    boundSeries.push(series);\n                }\n            });\n            axis.boundSeries = boundSeries;\n        });\n        this.seriesChanged = false;\n    };\n    // Has to run before onSeriesChange\n    Chart.prototype.onAxesChange = function (force) {\n        var _this = this;\n        if (force === void 0) { force = false; }\n        var directionToAxesMap = {};\n        this.axes.forEach(function (axis) {\n            var direction = axis.direction;\n            var directionAxes = directionToAxesMap[direction] || (directionToAxesMap[direction] = []);\n            directionAxes.push(axis);\n        });\n        this.series.forEach(function (series) {\n            series.directions.forEach(function (direction) {\n                var axisName = direction + 'Axis';\n                if (!series[axisName] || force) {\n                    var directionAxes = directionToAxesMap[direction];\n                    if (directionAxes) {\n                        var axis = _this.findMatchingAxis(directionAxes, series.getKeys(direction));\n                        if (axis) {\n                            series[axisName] = axis;\n                        }\n                    }\n                }\n            });\n            if (series instanceof CartesianSeries) {\n                if (!series.xAxis) {\n                    console.warn(\"Could not find a matching xAxis for the \" + series.id + \" series.\");\n                    return;\n                }\n                if (!series.yAxis) {\n                    console.warn(\"Could not find a matching yAxis for the \" + series.id + \" series.\");\n                    return;\n                }\n            }\n        });\n        this.axesChanged = false;\n    };\n    Chart.prototype.findMatchingAxis = function (directionAxes, directionKeys) {\n        for (var i = 0; i < directionAxes.length; i++) {\n            var axis = directionAxes[i];\n            var axisKeys = axis.keys;\n            if (!axisKeys.length) {\n                return axis;\n            }\n            else if (directionKeys) {\n                for (var j = 0; j < directionKeys.length; j++) {\n                    if (axisKeys.indexOf(directionKeys[j]) >= 0) {\n                        return axis;\n                    }\n                }\n            }\n        }\n    };\n    Object.defineProperty(Chart.prototype, \"data\", {\n        get: function () {\n            return this._data;\n        },\n        set: function (data) {\n            this._data = data;\n            this.series.forEach(function (series) { return series.data = data; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"axesChanged\", {\n        get: function () {\n            return this._axesChanged;\n        },\n        set: function (value) {\n            this._axesChanged = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"seriesChanged\", {\n        get: function () {\n            return this._seriesChanged;\n        },\n        set: function (value) {\n            this._seriesChanged = value;\n            if (value) {\n                this.dataPending = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"layoutPending\", {\n        /**\n         * Only `true` while we are waiting for the layout to start.\n         * This will be `false` if the layout has already started and is ongoing.\n         */\n        get: function () {\n            return !!this.layoutCallbackId;\n        },\n        set: function (value) {\n            if (value) {\n                if (!(this.layoutCallbackId || this.dataPending)) {\n                    this.layoutCallbackId = requestAnimationFrame(this._performLayout);\n                }\n            }\n            else if (this.layoutCallbackId) {\n                cancelAnimationFrame(this.layoutCallbackId);\n                this.layoutCallbackId = 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"dataPending\", {\n        get: function () {\n            return !!this.dataCallbackId;\n        },\n        set: function (value) {\n            var _this = this;\n            if (this.dataCallbackId) {\n                clearTimeout(this.dataCallbackId);\n                this.dataCallbackId = 0;\n            }\n            if (value) {\n                this.dataCallbackId = window.setTimeout(function () {\n                    _this.dataPending = false;\n                    _this.processData();\n                }, 0);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.processData = function () {\n        this.layoutPending = false;\n        if (this.axesChanged) {\n            this.onAxesChange();\n        }\n        if (this.seriesChanged) {\n            this.onSeriesChange();\n        }\n        this.series.filter(function (s) { return s.visible; }).forEach(function (series) { return series.processData(); });\n        this.updateLegend();\n        this.layoutPending = true;\n    };\n    Chart.prototype.positionCaptions = function () {\n        var _a = this, title = _a.title, subtitle = _a.subtitle;\n        var titleVisible = false;\n        var subtitleVisible = false;\n        var spacing = 10;\n        var paddingTop = spacing;\n        if (title && title.enabled) {\n            title.node.x = this.width / 2;\n            title.node.y = paddingTop;\n            titleVisible = true;\n            var titleBBox = title.node.computeBBox(); // make sure to set node's x/y, then computeBBox\n            if (titleBBox) {\n                paddingTop = titleBBox.y + titleBBox.height;\n            }\n            if (subtitle && subtitle.enabled) {\n                subtitle.node.x = this.width / 2;\n                subtitle.node.y = paddingTop + spacing;\n                subtitleVisible = true;\n                var subtitleBBox = subtitle.node.computeBBox();\n                if (subtitleBBox) {\n                    paddingTop = subtitleBBox.y + subtitleBBox.height;\n                }\n            }\n        }\n        if (title) {\n            title.node.visible = titleVisible;\n        }\n        if (subtitle) {\n            subtitle.node.visible = subtitleVisible;\n        }\n        this.captionAutoPadding = paddingTop;\n    };\n    Chart.prototype.positionLegend = function () {\n        if (!this.legend.enabled || !this.legend.data.length) {\n            return;\n        }\n        var _a = this, legend = _a.legend, captionAutoPadding = _a.captionAutoPadding, legendAutoPadding = _a.legendAutoPadding;\n        var width = this.width;\n        var height = this.height - captionAutoPadding;\n        var legendGroup = legend.group;\n        var legendPadding = legend.padding;\n        legendGroup.translationX = 0;\n        legendGroup.translationY = 0;\n        var legendBBox;\n        switch (legend.position) {\n            case 'bottom':\n                legend.performLayout(width - legendPadding * 2, 0);\n                legendBBox = legendGroup.computeBBox();\n                legendGroup.translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n                legendGroup.translationY = captionAutoPadding + height - legendBBox.height - legendBBox.y - legendPadding;\n                legendAutoPadding.bottom = legendBBox.height;\n                break;\n            case 'top':\n                legend.performLayout(width - legendPadding * 2, 0);\n                legendBBox = legendGroup.computeBBox();\n                legendGroup.translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n                legendGroup.translationY = captionAutoPadding + legendPadding - legendBBox.y;\n                legendAutoPadding.top = legendBBox.height;\n                break;\n            case 'left':\n                legend.performLayout(0, height - legendPadding * 2);\n                legendBBox = legendGroup.computeBBox();\n                legendGroup.translationX = legendPadding - legendBBox.x;\n                legendGroup.translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n                legendAutoPadding.left = legendBBox.width;\n                break;\n            default: // case 'right':\n                legend.performLayout(0, height - legendPadding * 2);\n                legendBBox = legendGroup.computeBBox();\n                legendGroup.translationX = width - legendBBox.width - legendBBox.x - legendPadding;\n                legendGroup.translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n                legendAutoPadding.right = legendBBox.width;\n                break;\n        }\n        // Round off for pixel grid alignment to work properly.\n        legendGroup.translationX = Math.floor(legendGroup.translationX);\n        legendGroup.translationY = Math.floor(legendGroup.translationY);\n    };\n    Chart.prototype.setupListeners = function (chartElement) {\n        chartElement.addEventListener('mousemove', this.onMouseMove);\n        chartElement.addEventListener('mouseout', this.onMouseOut);\n        chartElement.addEventListener('click', this.onClick);\n    };\n    Chart.prototype.cleanupListeners = function (chartElement) {\n        chartElement.removeEventListener('mousemove', this.onMouseMove);\n        chartElement.removeEventListener('mouseout', this.onMouseMove);\n        chartElement.removeEventListener('click', this.onClick);\n    };\n    Chart.prototype.pickSeriesNode = function (x, y) {\n        var allSeries = this.series;\n        var node = undefined;\n        for (var i = allSeries.length - 1; i >= 0; i--) {\n            var series = allSeries[i];\n            node = series.group.pickNode(x, y);\n            if (node) {\n                return {\n                    series: series,\n                    node: node\n                };\n            }\n        }\n    };\n    Chart.prototype.onSeriesNodePick = function (event, series, node) {\n        if (this.lastPick) {\n            this.lastPick.series.dehighlightNode();\n        }\n        this.lastPick = {\n            series: series,\n            node: node\n        };\n        series.highlightNode(node);\n        var html = series.tooltipEnabled && series.getTooltipHtml(node.datum);\n        if (html) {\n            this.showTooltip(event, html);\n        }\n    };\n    Object.defineProperty(Chart.prototype, \"tooltipClass\", {\n        get: function () {\n            return this._tooltipClass;\n        },\n        set: function (value) {\n            if (this._tooltipClass !== value) {\n                this._tooltipClass = value;\n                this.toggleTooltip();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.toggleTooltip = function (visible) {\n        var classList = [this.defaultTooltipClass, this._tooltipClass];\n        if (visible) {\n            classList.push('visible');\n        }\n        else if (this.lastPick) {\n            this.lastPick.series.dehighlightNode();\n            this.lastPick = undefined;\n        }\n        this.tooltipElement.setAttribute('class', classList.join(' '));\n    };\n    /**\n     * Shows tooltip at the given event's coordinates.\n     * If the `html` parameter is missing, moves the existing tooltip to the new position.\n     */\n    Chart.prototype.showTooltip = function (event, html) {\n        var el = this.tooltipElement;\n        var offset = this.tooltipOffset;\n        var parent = el.parentElement;\n        if (html !== undefined) {\n            el.innerHTML = html;\n        }\n        else if (!el.innerHTML) {\n            return;\n        }\n        if (html) {\n            this.toggleTooltip(true);\n        }\n        var tooltipRect = el.getBoundingClientRect();\n        var top = event.pageY + offset[1];\n        var left = event.pageX + offset[0];\n        if (tooltipRect &&\n            parent &&\n            parent.parentElement &&\n            (left - pageXOffset + tooltipRect.width > parent.parentElement.offsetWidth)) {\n            left -= tooltipRect.width + offset[0];\n        }\n        el.style.left = left + \"px\";\n        el.style.top = top + \"px\";\n    };\n    Chart.prototype.hideTooltip = function () {\n        this.toggleTooltip(false);\n    };\n    __decorate$P([\n        reactive([], 'scene.parent')\n    ], Chart.prototype, \"parent\", void 0);\n    __decorate$P([\n        reactive(['layoutChange'])\n    ], Chart.prototype, \"title\", void 0);\n    __decorate$P([\n        reactive(['layoutChange'])\n    ], Chart.prototype, \"subtitle\", void 0);\n    __decorate$P([\n        reactive(['layoutChange'])\n    ], Chart.prototype, \"padding\", void 0);\n    __decorate$P([\n        reactive(['layoutChange'], 'scene.size')\n    ], Chart.prototype, \"size\", void 0);\n    __decorate$P([\n        reactive(['layoutChange'], 'scene.height')\n    ], Chart.prototype, \"height\", void 0);\n    __decorate$P([\n        reactive(['layoutChange'], 'scene.width')\n    ], Chart.prototype, \"width\", void 0);\n    return Chart;\n}(Observable));\n\n/**\n * Maps a discrete domain to a continuous numeric range.\n * See https://github.com/d3/d3-scale#band-scales for more info.\n */\nvar BandScale = /** @class */ (function () {\n    function BandScale() {\n        /**\n         * Maps datum to its index in the {@link domain} array.\n         * Used to check for duplicate datums (not allowed).\n         */\n        this.index = new Map();\n        /**\n         * The output range values for datum at each index.\n         */\n        this.ordinalRange = [];\n        /**\n         * Contains unique datums only. Since `{}` is used in place of `Map`\n         * for IE11 compatibility, the datums are converted `toString` before\n         * the uniqueness check.\n         */\n        this._domain = [];\n        this._range = [0, 1];\n        this._bandwidth = 1;\n        /**\n         * The ratio of the range that is reserved for space between bands.\n         */\n        this._paddingInner = 0;\n        /**\n         * The ratio of the range that is reserved for space before the first\n         * and after the last band.\n         */\n        this._paddingOuter = 0;\n        this._round = false;\n        /**\n         * How the leftover range is distributed.\n         * `0.5` - equal distribution of space before the first and after the last band,\n         * with bands effectively centered within the range.\n         */\n        this._align = 0.5;\n    }\n    Object.defineProperty(BandScale.prototype, \"domain\", {\n        get: function () {\n            return this._domain;\n        },\n        set: function (values) {\n            var domain = this._domain;\n            domain.length = 0;\n            this.index = new Map();\n            var index = this.index;\n            // In case one wants to have duplicate domain values, for example, two 'Italy' categories,\n            // one should use objects rather than strings for domain values like so:\n            // { toString: () => 'Italy' }\n            // { toString: () => 'Italy' }\n            values.forEach(function (value) {\n                if (index.get(value) === undefined) {\n                    index.set(value, domain.push(value) - 1);\n                }\n            });\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BandScale.prototype, \"range\", {\n        get: function () {\n            return this._range;\n        },\n        set: function (values) {\n            this._range[0] = values[0];\n            this._range[1] = values[1];\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BandScale.prototype.ticks = function () {\n        return this._domain;\n    };\n    BandScale.prototype.convert = function (d) {\n        var i = this.index.get(d);\n        if (i === undefined) {\n            return NaN;\n        }\n        var r = this.ordinalRange[i];\n        if (r === undefined) {\n            return NaN;\n        }\n        return r;\n    };\n    Object.defineProperty(BandScale.prototype, \"bandwidth\", {\n        get: function () {\n            return this._bandwidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BandScale.prototype, \"padding\", {\n        get: function () {\n            return this._paddingInner;\n        },\n        set: function (value) {\n            value = Math.max(0, Math.min(1, value));\n            this._paddingInner = value;\n            this._paddingOuter = value;\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BandScale.prototype, \"paddingInner\", {\n        get: function () {\n            return this._paddingInner;\n        },\n        set: function (value) {\n            this._paddingInner = Math.max(0, Math.min(1, value)); // [0, 1]\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BandScale.prototype, \"paddingOuter\", {\n        get: function () {\n            return this._paddingOuter;\n        },\n        set: function (value) {\n            this._paddingOuter = Math.max(0, Math.min(1, value)); // [0, 1]\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BandScale.prototype, \"round\", {\n        get: function () {\n            return this._round;\n        },\n        set: function (value) {\n            this._round = value;\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BandScale.prototype, \"align\", {\n        get: function () {\n            return this._align;\n        },\n        set: function (value) {\n            this._align = Math.max(0, Math.min(1, value)); // [0, 1]\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BandScale.prototype.rescale = function () {\n        var _a;\n        var n = this._domain.length;\n        if (!n) {\n            return;\n        }\n        var _b = this._range, a = _b[0], b = _b[1];\n        var reversed = b < a;\n        if (reversed) {\n            _a = [b, a], a = _a[0], b = _a[1];\n        }\n        var step = (b - a) / Math.max(1, n - this._paddingInner + this._paddingOuter * 2);\n        if (this._round) {\n            step = Math.floor(step);\n        }\n        a += (b - a - step * (n - this._paddingInner)) * this._align;\n        this._bandwidth = step * (1 - this._paddingInner);\n        if (this._round) {\n            a = Math.round(a);\n            this._bandwidth = Math.round(this._bandwidth);\n        }\n        var values = [];\n        for (var i = 0; i < n; i++) {\n            values.push(a + step * i);\n        }\n        this.ordinalRange = reversed ? values.reverse() : values;\n    };\n    return BandScale;\n}());\n\nvar __extends$T = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar CategoryAxis = /** @class */ (function (_super) {\n    __extends$T(CategoryAxis, _super);\n    function CategoryAxis() {\n        var _this = this;\n        var scale = new BandScale();\n        scale.paddingInner = 0.2;\n        scale.paddingOuter = 0.3;\n        _this = _super.call(this, scale) || this;\n        return _this;\n    }\n    return CategoryAxis;\n}(ChartAxis));\n\n/**\n * The tree layout is calculated in abstract x/y coordinates, where the root is at (0, 0)\n * and the tree grows downward from the root.\n */\nvar TreeNode = /** @class */ (function () {\n    function TreeNode(label, parent, number) {\n        if (label === void 0) { label = ''; }\n        if (number === void 0) { number = 0; }\n        this.x = 0;\n        this.y = 0;\n        this.subtreeLeft = NaN;\n        this.subtreeRight = NaN;\n        this.screenX = 0;\n        this.screenY = 0;\n        this.children = [];\n        this.leafCount = 0;\n        this.prelim = 0;\n        this.mod = 0;\n        this.ancestor = this;\n        this.change = 0;\n        this.shift = 0;\n        this.label = label;\n        // screenX and screenY are meant to be recomputed from (layout) x and y\n        // when the tree is resized (without performing another layout)\n        this.parent = parent;\n        this.depth = parent ? parent.depth + 1 : 0;\n        this.number = number;\n    }\n    TreeNode.prototype.getLeftSibling = function () {\n        return this.number > 0 && this.parent ? this.parent.children[this.number - 1] : undefined;\n    };\n    TreeNode.prototype.getLeftmostSibling = function () {\n        return this.number > 0 && this.parent ? this.parent.children[0] : undefined;\n    };\n    // traverse the left contour of a subtree, return the successor of v on this contour\n    TreeNode.prototype.nextLeft = function () {\n        return this.children ? this.children[0] : this.thread;\n    };\n    // traverse the right contour of a subtree, return the successor of v on this contour\n    TreeNode.prototype.nextRight = function () {\n        return this.children ? this.children[this.children.length - 1] : this.thread;\n    };\n    TreeNode.prototype.getSiblings = function () {\n        var _this = this;\n        return this.parent ? this.parent.children.filter(function (_, i) { return i !== _this.number; }) : [];\n    };\n    return TreeNode;\n}());\n/**\n * Converts an array of ticks, where each tick has an array of labels, to a label tree.\n * If `pad` is `true`, will ensure that every branch matches the depth of the tree by\n * creating empty labels.\n */\nfunction ticksToTree(ticks, pad) {\n    if (pad === void 0) { pad = true; }\n    var root = new TreeNode();\n    var depth = 0;\n    if (pad) {\n        ticks.forEach(function (tick) { return depth = Math.max(depth, tick.labels.length); });\n    }\n    ticks.forEach(function (tick) {\n        if (pad) {\n            while (tick.labels.length < depth) {\n                tick.labels.unshift('');\n            }\n        }\n        insertTick(root, tick);\n    });\n    return root;\n}\nfunction insertTick(root, tick) {\n    var pathParts = tick.labels.slice().reverse(); // path elements from root to leaf label\n    var lastPartIndex = pathParts.length - 1;\n    pathParts.forEach(function (pathPart, partIndex) {\n        var children = root.children;\n        var existingNode = find(children, function (child) { return child.label === pathPart; });\n        var isNotLeaf = partIndex !== lastPartIndex;\n        if (existingNode && isNotLeaf) { // the isNotLeaf check is to allow duplicate leafs\n            root = existingNode;\n        }\n        else {\n            var node = new TreeNode(pathPart, root);\n            node.number = children.length;\n            children.push(node);\n            if (isNotLeaf) {\n                root = node;\n            }\n        }\n    });\n}\n// Shift the subtree.\nfunction moveSubtree(wm, wp, shift) {\n    var subtrees = wp.number - wm.number;\n    var ratio = shift / subtrees;\n    wp.change -= ratio;\n    wp.shift += shift;\n    wm.change += ratio;\n    wp.prelim += shift;\n    wp.mod += shift;\n}\nfunction ancestor(vim, v, defaultAncestor) {\n    return v.getSiblings().indexOf(vim.ancestor) >= 0 ? vim.ancestor : defaultAncestor;\n}\n// Spaces out the children.\nfunction executeShifts(v) {\n    var children = v.children;\n    if (children) {\n        var shift = 0;\n        var change = 0;\n        for (var i = children.length - 1; i >= 0; i--) {\n            var w = children[i];\n            w.prelim += shift;\n            w.mod += shift;\n            change += w.change;\n            shift += w.shift + change;\n        }\n    }\n}\n// Moves current subtree with v as the root if some nodes are conflicting in space.\nfunction apportion(v, defaultAncestor, distance) {\n    var w = v.getLeftSibling();\n    if (w) {\n        var vop = v;\n        var vip = v;\n        var vim = w;\n        var vom = vip.getLeftmostSibling();\n        var sip = vip.mod;\n        var sop = vop.mod;\n        var sim = vim.mod;\n        var som = vom.mod;\n        while (vim.nextRight() && vip.nextLeft()) {\n            vim = vim.nextRight();\n            vip = vip.nextLeft();\n            vom = vom.nextLeft();\n            vop = vop.nextRight();\n            vop.ancestor = v;\n            var shift = (vim.prelim + sim) - (vip.prelim + sip) + distance;\n            if (shift > 0) {\n                moveSubtree(ancestor(vim, v, defaultAncestor), v, shift);\n                sip += shift;\n                sop += shift;\n            }\n            sim += vim.mod;\n            sip += vip.mod;\n            som += vom.mod;\n            sop += vop.mod;\n        }\n        if (vim.nextRight() && !vop.nextRight()) {\n            vop.thread = vim.nextRight();\n            vop.mod += sim - sop;\n        }\n        else {\n            if (vip.nextLeft() && !vom.nextLeft()) {\n                vom.thread = vip.nextLeft();\n                vom.mod += sip - som;\n            }\n            defaultAncestor = v;\n        }\n    }\n    return defaultAncestor;\n}\n// Compute the preliminary x-coordinate of node and its children (recursively).\nfunction firstWalk(node, distance) {\n    var children = node.children;\n    if (children.length) {\n        var defaultAncestor_1 = children[0];\n        children.forEach(function (child) {\n            firstWalk(child, distance);\n            defaultAncestor_1 = apportion(child, defaultAncestor_1, distance);\n        });\n        executeShifts(node);\n        var midpoint = (children[0].prelim + children[children.length - 1].prelim) / 2;\n        var leftSibling = node.getLeftSibling();\n        if (leftSibling) {\n            node.prelim = leftSibling.prelim + distance;\n            node.mod = node.prelim - midpoint;\n        }\n        else {\n            node.prelim = midpoint;\n        }\n    }\n    else {\n        var leftSibling = node.getLeftSibling();\n        node.prelim = leftSibling ? leftSibling.prelim + distance : 0;\n    }\n}\nvar Dimensions = /** @class */ (function () {\n    function Dimensions() {\n        this.top = Infinity;\n        this.right = -Infinity;\n        this.bottom = -Infinity;\n        this.left = Infinity;\n    }\n    Dimensions.prototype.update = function (node, xy) {\n        var _a = xy(node), x = _a.x, y = _a.y;\n        if (x > this.right) {\n            this.right = x;\n        }\n        if (x < this.left) {\n            this.left = x;\n        }\n        if (y > this.bottom) {\n            this.bottom = y;\n        }\n        if (y < this.top) {\n            this.top = y;\n        }\n    };\n    return Dimensions;\n}());\nfunction secondWalk(v, m, layout) {\n    v.x = v.prelim + m;\n    v.y = v.depth;\n    layout.update(v);\n    v.children.forEach(function (w) { return secondWalk(w, m + v.mod, layout); });\n}\n// After the second walk the parent nodes are positioned at the center of their immediate children.\n// If we want the parent nodes to be positioned at the center of the subtree for which they are roots,\n// we need a third walk to adjust the positions.\nfunction thirdWalk(v) {\n    var children = v.children;\n    var leafCount = 0;\n    children.forEach(function (w) {\n        thirdWalk(w);\n        if (w.children.length) {\n            leafCount += w.leafCount;\n        }\n        else {\n            leafCount++;\n        }\n    });\n    v.leafCount = leafCount;\n    if (children.length) {\n        v.subtreeLeft = children[0].subtreeLeft;\n        v.subtreeRight = children[v.children.length - 1].subtreeRight;\n        v.x = (v.subtreeLeft + v.subtreeRight) / 2;\n    }\n    else {\n        v.subtreeLeft = v.x;\n        v.subtreeRight = v.x;\n    }\n}\nfunction treeLayout(root) {\n    var layout = new TreeLayout;\n    firstWalk(root, 1);\n    secondWalk(root, -root.prelim, layout);\n    thirdWalk(root);\n    return layout;\n}\nvar TreeLayout = /** @class */ (function () {\n    function TreeLayout() {\n        this.dimensions = new Dimensions;\n        this.leafCount = 0;\n        this.nodes = [];\n        // One might want to process leaf nodes separately from the rest of the tree.\n        // For example, position labels corresponding to leafs vertically, rather than horizontally.\n        this.leafNodes = [];\n        this.nonLeafNodes = [];\n        this.depth = 0;\n    }\n    TreeLayout.prototype.update = function (node) {\n        this.dimensions.update(node, function (node) { return ({ x: node.x, y: node.y }); });\n        if (!node.children.length) {\n            this.leafCount++;\n            this.leafNodes.push(node);\n        }\n        else {\n            this.nonLeafNodes.push(node);\n        }\n        if (node.depth > this.depth) {\n            this.depth = node.depth;\n        }\n        this.nodes.push(node);\n    };\n    TreeLayout.prototype.resize = function (width, height, shiftX, shiftY, flipX) {\n        if (shiftX === void 0) { shiftX = 0; }\n        if (shiftY === void 0) { shiftY = 0; }\n        if (flipX === void 0) { flipX = false; }\n        var xSteps = this.leafCount - 1;\n        var ySteps = this.depth;\n        var dimensions = this.dimensions;\n        var scalingX = 1;\n        var scalingY = 1;\n        if (width > 0 && xSteps) {\n            var existingSpacingX = (dimensions.right - dimensions.left) / xSteps;\n            var desiredSpacingX = width / xSteps;\n            scalingX = desiredSpacingX / existingSpacingX;\n            if (flipX) {\n                scalingX = -scalingX;\n            }\n        }\n        if (height > 0 && ySteps) {\n            var existingSpacingY = (dimensions.bottom - dimensions.top) / ySteps;\n            var desiredSpacingY = height / ySteps;\n            scalingY = desiredSpacingY / existingSpacingY;\n        }\n        var screenDimensions = new Dimensions();\n        this.nodes.forEach(function (node) {\n            node.screenX = node.x * scalingX;\n            node.screenY = node.y * scalingY;\n            screenDimensions.update(node, function (node) { return ({ x: node.screenX, y: node.screenY }); });\n        });\n        // Normalize so that root top and leftmost leaf left start at zero.\n        var offsetX = -screenDimensions.left;\n        var offsetY = -screenDimensions.top;\n        this.nodes.forEach(function (node) {\n            node.screenX += offsetX + shiftX;\n            node.screenY += offsetY + shiftY;\n        });\n    };\n    return TreeLayout;\n}());\n\nvar __extends$U = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar GroupedCategoryAxisLabel = /** @class */ (function (_super) {\n    __extends$U(GroupedCategoryAxisLabel, _super);\n    function GroupedCategoryAxisLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.grid = false;\n        return _this;\n    }\n    return GroupedCategoryAxisLabel;\n}(AxisLabel));\n/**\n * A general purpose linear axis with no notion of orientation.\n * The axis is always rendered vertically, with horizontal labels positioned to the left\n * of the axis line by default. The axis can be {@link rotation | rotated} by an arbitrary angle,\n * so that it can be used as a top, right, bottom, left, radial or any other kind\n * of linear axis.\n * The generic `D` parameter is the type of the domain of the axis' scale.\n * The output range of the axis' scale is always numeric (screen coordinates).\n */\nvar GroupedCategoryAxis = /** @class */ (function (_super) {\n    __extends$U(GroupedCategoryAxis, _super);\n    function GroupedCategoryAxis() {\n        var _this = _super.call(this, new BandScale()) || this;\n        _this.id = _this.createId();\n        _this.tickScale = new BandScale();\n        _this.group = new Group();\n        _this.translation = {\n            x: 0,\n            y: 0\n        };\n        /**\n         * Axis rotation angle in degrees.\n         */\n        _this.rotation = 0;\n        _this.line = {\n            width: 1,\n            color: 'rgba(195, 195, 195, 1)'\n        };\n        // readonly tick = new AxisTick();\n        _this.label = new GroupedCategoryAxisLabel();\n        /**\n         * The color of the labels.\n         * Use `undefined` rather than `rgba(0, 0, 0, 0)` to make labels invisible.\n         */\n        _this.labelColor = 'rgba(87, 87, 87, 1)';\n        var _a = _this, group = _a.group, scale = _a.scale, tickScale = _a.tickScale;\n        scale.paddingOuter = 0.1;\n        scale.paddingInner = scale.paddingOuter * 2;\n        tickScale.paddingInner = 1;\n        tickScale.paddingOuter = 0;\n        _this.gridLineSelection = Selection.select(group).selectAll();\n        _this.axisLineSelection = Selection.select(group).selectAll();\n        _this.separatorSelection = Selection.select(group).selectAll();\n        _this.labelSelection = Selection.select(group).selectAll();\n        return _this;\n        // this.group.append(this.bboxRect); // debug (bbox)\n    }\n    GroupedCategoryAxis.prototype.createId = function () {\n        var constructor = this.constructor;\n        var className = constructor.className;\n        if (!className) {\n            throw new Error(\"The \" + constructor + \" is missing the 'className' property.\");\n        }\n        return className + '-' + (constructor.id = (constructor.id || 0) + 1);\n    };\n    Object.defineProperty(GroupedCategoryAxis.prototype, \"domain\", {\n        get: function () {\n            return this.scale.domain;\n        },\n        set: function (value) {\n            this.scale.domain = value;\n            var tickTree = ticksToTree(value);\n            this.tickTreeLayout = treeLayout(tickTree);\n            var domain = value.slice();\n            domain.push('');\n            this.tickScale.domain = domain;\n            this.resizeTickTree();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GroupedCategoryAxis.prototype, \"range\", {\n        get: function () {\n            return this.scale.range;\n        },\n        set: function (value) {\n            this.scale.range = value;\n            this.tickScale.range = value;\n            this.resizeTickTree();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    GroupedCategoryAxis.prototype.resizeTickTree = function () {\n        var s = this.scale;\n        var range = s.domain.length ? [s.convert(s.domain[0]), s.convert(s.domain[s.domain.length - 1])] : s.range;\n        var layout = this.tickTreeLayout;\n        var lineHeight = this.lineHeight;\n        if (layout) {\n            layout.resize(Math.abs(range[1] - range[0]), layout.depth * lineHeight, (Math.min(range[0], range[1]) || 0) + (s.bandwidth || 0) / 2, -layout.depth * lineHeight, (range[1] - range[0]) < 0);\n        }\n    };\n    Object.defineProperty(GroupedCategoryAxis.prototype, \"lineHeight\", {\n        get: function () {\n            return this.label.fontSize * 1.5;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GroupedCategoryAxis.prototype, \"gridLength\", {\n        get: function () {\n            return this._gridLength;\n        },\n        /**\n         * The length of the grid. The grid is only visible in case of a non-zero value.\n         */\n        set: function (value) {\n            // Was visible and now invisible, or was invisible and now visible.\n            if (this._gridLength && !value || !this._gridLength && value) {\n                this.gridLineSelection = this.gridLineSelection.remove().setData([]);\n                this.labelSelection = this.labelSelection.remove().setData([]);\n            }\n            this._gridLength = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates/removes/updates the scene graph nodes that constitute the axis.\n     * Supposed to be called _manually_ after changing _any_ of the axis properties.\n     * This allows to bulk set axis properties before updating the nodes.\n     * The node changes made by this method are rendered on the next animation frame.\n     * We could schedule this method call automatically on the next animation frame\n     * when any of the axis properties change (the way we do when properties of scene graph's\n     * nodes change), but this will mean that we first wait for the next animation\n     * frame to make changes to the nodes of the axis, then wait for another animation\n     * frame to render those changes. It's nice to have everything update automatically,\n     * but this extra level of async indirection will not just introduce an unwanted delay,\n     * it will also make it harder to reason about the program.\n     */\n    GroupedCategoryAxis.prototype.update = function () {\n        var _this = this;\n        var _a = this, group = _a.group, scale = _a.scale, label = _a.label, tickScale = _a.tickScale;\n        var rangeStart = scale.range[0];\n        var rangeEnd = scale.range[1];\n        var rangeLength = Math.abs(rangeEnd - rangeStart);\n        var bandwidth = (rangeLength / scale.domain.length) || 0;\n        var parallelLabels = label.parallel;\n        var rotation = toRadians(this.rotation);\n        var isHorizontal = Math.abs(Math.cos(rotation)) < 1e-8;\n        var labelRotation = normalizeAngle360(toRadians(this.label.rotation));\n        group.translationX = this.translation.x;\n        group.translationY = this.translation.y;\n        group.rotation = rotation;\n        var title = this.title;\n        // The Text `node` of the Caption is not used to render the title of the grouped category axis.\n        // The phantom root of the tree layout is used instead.\n        if (title) {\n            title.node.visible = false;\n        }\n        var lineHeight = this.lineHeight;\n        // Render ticks and labels.\n        var tickTreeLayout = this.tickTreeLayout;\n        var labels = scale.ticks();\n        var treeLabels = tickTreeLayout ? tickTreeLayout.nodes : [];\n        var isLabelTree = tickTreeLayout ? tickTreeLayout.depth > 1 : false;\n        var ticks = tickScale.ticks();\n        // The side of the axis line to position the labels on.\n        // -1 = left (default)\n        //  1 = right\n        var sideFlag = label.mirrored ? 1 : -1;\n        // When labels are parallel to the axis line, the `parallelFlipFlag` is used to\n        // flip the labels to avoid upside-down text, when the axis is rotated\n        // such that it is in the right hemisphere, i.e. the angle of rotation\n        // is in the [0, π] interval.\n        // The rotation angle is normalized, so that we have an easier time checking\n        // if it's in the said interval. Since the axis is always rendered vertically\n        // and then rotated, zero rotation means 12 (not 3) o-clock.\n        // -1 = flip\n        //  1 = don't flip (default)\n        var parallelFlipRotation = normalizeAngle360(rotation);\n        var parallelFlipFlag = (!labelRotation && parallelFlipRotation >= 0 && parallelFlipRotation <= Math.PI) ? -1 : 1;\n        var regularFlipRotation = normalizeAngle360(rotation - Math.PI / 2);\n        // Flip if the axis rotation angle is in the top hemisphere.\n        var regularFlipFlag = (!labelRotation && regularFlipRotation >= 0 && regularFlipRotation <= Math.PI) ? -1 : 1;\n        var updateGridLines = this.gridLineSelection.setData(this.gridLength ? ticks : []);\n        updateGridLines.exit.remove();\n        var enterGridLines = updateGridLines.enter.append(Line);\n        var gridLineSelection = updateGridLines.merge(enterGridLines);\n        var updateLabels = this.labelSelection.setData(treeLabels);\n        updateLabels.exit.remove();\n        var enterLabels = updateLabels.enter.append(Text);\n        var labelSelection = updateLabels.merge(enterLabels);\n        var labelFormatter = label.formatter;\n        var maxLeafLabelWidth = 0;\n        labelSelection\n            .each(function (node, datum, index) {\n            node.fontStyle = label.fontStyle;\n            node.fontWeight = label.fontWeight;\n            node.fontSize = label.fontSize;\n            node.fontFamily = label.fontFamily;\n            node.fill = label.color;\n            node.textBaseline = parallelFlipFlag === -1 ? 'bottom' : 'hanging';\n            // label.textBaseline = parallelLabels && !labelRotation\n            //     ? (sideFlag * parallelFlipFlag === -1 ? 'hanging' : 'bottom')\n            //     : 'middle';\n            if (title && index === 0) { // use the phantom root as the axis title\n                node.text = title.text;\n                node.fontSize = title.fontSize;\n                node.fontStyle = title.fontStyle;\n                node.fontWeight = title.fontWeight;\n                node.fontFamily = title.fontFamily;\n                node.textBaseline = 'hanging';\n                node.visible = labels.length > 0;\n            }\n            else {\n                node.text = labelFormatter\n                    ? labelFormatter({\n                        value: String(datum.label),\n                        index: index\n                    })\n                    : String(datum.label);\n            }\n            node.textAlign = 'center';\n            node.translationX = datum.screenY - label.fontSize * 0.25;\n            node.translationY = datum.screenX;\n            var bbox = node.computeBBox();\n            if (bbox && bbox.width > maxLeafLabelWidth) {\n                maxLeafLabelWidth = bbox.width;\n            }\n        });\n        var labelX = sideFlag * label.padding;\n        var autoRotation = parallelLabels\n            ? parallelFlipFlag * Math.PI / 2\n            : (regularFlipFlag === -1 ? Math.PI : 0);\n        var labelGrid = this.label.grid;\n        var separatorData = [];\n        labelSelection.each(function (label, datum, index) {\n            label.x = labelX;\n            label.rotationCenterX = labelX;\n            if (!datum.children.length) {\n                label.rotation = labelRotation;\n                label.textAlign = 'end';\n                label.textBaseline = 'middle';\n            }\n            else {\n                label.translationX -= maxLeafLabelWidth - lineHeight + _this.label.padding;\n                if (isHorizontal) {\n                    label.rotation = autoRotation;\n                }\n                else {\n                    label.rotation = -Math.PI / 2;\n                }\n            }\n            // Calculate positions of label separators for all nodes except the root.\n            // Each separator is placed to the top of the current label.\n            if (datum.parent && isLabelTree) {\n                var y = !datum.children.length\n                    ? datum.screenX - bandwidth / 2\n                    : datum.screenX - datum.leafCount * bandwidth / 2;\n                if (!datum.children.length) {\n                    if ((datum.number !== datum.children.length - 1) || labelGrid) {\n                        separatorData.push({\n                            y: y,\n                            x1: 0,\n                            x2: -maxLeafLabelWidth - _this.label.padding * 2,\n                            toString: function () { return String(index); }\n                        });\n                    }\n                }\n                else {\n                    var x = -maxLeafLabelWidth - _this.label.padding * 2 + datum.screenY;\n                    separatorData.push({\n                        y: y,\n                        x1: x + lineHeight,\n                        x2: x,\n                        toString: function () { return String(index); }\n                    });\n                }\n            }\n        });\n        // Calculate the position of the long separator on the far bottom of the axis.\n        var minX = 0;\n        separatorData.forEach(function (d) { return minX = Math.min(minX, d.x2); });\n        separatorData.push({\n            y: Math.max(rangeStart, rangeEnd),\n            x1: 0,\n            x2: minX,\n            toString: function () { return String(separatorData.length); }\n        });\n        var updateSeparators = this.separatorSelection.setData(separatorData);\n        updateSeparators.exit.remove();\n        var enterSeparators = updateSeparators.enter.append(Line);\n        var separatorSelection = updateSeparators.merge(enterSeparators);\n        this.separatorSelection = separatorSelection;\n        separatorSelection.each(function (line, datum) {\n            line.x1 = datum.x1;\n            line.x2 = datum.x2;\n            line.y1 = datum.y;\n            line.y2 = datum.y;\n            line.stroke = _this.tick.color;\n            line.fill = undefined;\n            line.strokeWidth = 1;\n        });\n        this.gridLineSelection = gridLineSelection;\n        this.labelSelection = labelSelection;\n        // Render axis lines.\n        var lineCount = tickTreeLayout ? tickTreeLayout.depth + 1 : 1;\n        var lines = [];\n        for (var i = 0; i < lineCount; i++) {\n            lines.push(i);\n        }\n        var updateAxisLines = this.axisLineSelection.setData(lines);\n        updateAxisLines.exit.remove();\n        var enterAxisLines = updateAxisLines.enter.append(Line);\n        var axisLineSelection = updateAxisLines.merge(enterAxisLines);\n        this.axisLineSelection = axisLineSelection;\n        axisLineSelection.each(function (line, _, index) {\n            var x = index > 0 ? -maxLeafLabelWidth - _this.label.padding * 2 - (index - 1) * lineHeight : 0;\n            line.x1 = x;\n            line.x2 = x;\n            line.y1 = rangeStart;\n            line.y2 = rangeEnd;\n            line.strokeWidth = _this.line.width;\n            line.stroke = _this.line.color;\n            line.visible = labels.length > 0 && (index === 0 || (labelGrid && isLabelTree));\n        });\n        if (this.gridLength) {\n            var styles_1 = this.gridStyle;\n            var styleCount_1 = styles_1.length;\n            gridLineSelection\n                .each(function (line, datum, index) {\n                var y = Math.round(tickScale.convert(datum));\n                line.x1 = 0;\n                line.x2 = -sideFlag * _this.gridLength;\n                line.y1 = y;\n                line.y2 = y;\n                line.visible = Math.abs(line.parent.translationY - rangeStart) > 1;\n                var style = styles_1[index % styleCount_1];\n                line.stroke = style.stroke;\n                line.strokeWidth = _this.tick.width;\n                line.lineDash = style.lineDash;\n                line.fill = undefined;\n            });\n        }\n        // debug (bbox)\n        // const bbox = this.computeBBox();\n        // const bboxRect = this.bboxRect;\n        // bboxRect.x = bbox.x;\n        // bboxRect.y = bbox.y;\n        // bboxRect.width = bbox.width;\n        // bboxRect.height = bbox.height;\n    };\n    GroupedCategoryAxis.prototype.computeBBox = function (options) {\n        var includeTitle = !options || !options.excludeTitle;\n        var left = Infinity;\n        var right = -Infinity;\n        var top = Infinity;\n        var bottom = -Infinity;\n        this.labelSelection.each(function (label, _, index) {\n            // The label itself is rotated, but not translated, the group that\n            // contains it is. So to capture the group transform in the label bbox\n            // calculation we combine the transform matrices of the label and the group.\n            // Depending on the timing of the `axis.computeBBox()` method call, we may\n            // not have the group's and the label's transform matrices updated yet (because\n            // the transform matrix is not recalculated whenever a node's transform attributes\n            // change, instead it's marked for recalculation on the next frame by setting\n            // the node's `dirtyTransform` flag to `true`), so we force them to update\n            // right here by calling `computeTransformMatrix`.\n            if (index > 0 || includeTitle) { // first node is the root (title)\n                label.computeTransformMatrix();\n                var matrix = Matrix.flyweight(label.matrix);\n                var labelBBox = label.computeBBox();\n                if (labelBBox) {\n                    var bbox = matrix.transformBBox(labelBBox);\n                    left = Math.min(left, bbox.x);\n                    right = Math.max(right, bbox.x + bbox.width);\n                    top = Math.min(top, bbox.y);\n                    bottom = Math.max(bottom, bbox.y + bbox.height);\n                }\n            }\n        });\n        return new BBox(left, top, right - left, bottom - top);\n    };\n    // debug (bbox)\n    // private bboxRect = (() => {\n    //     const rect = new Rect();\n    //     rect.fill = undefined;\n    //     rect.stroke = 'red';\n    //     rect.strokeWidth = 1;\n    //     rect.strokeOpacity = 0.7;\n    //     return rect;\n    // })();\n    GroupedCategoryAxis.className = 'GroupedCategoryAxis';\n    return GroupedCategoryAxis;\n}(ChartAxis));\n\nvar __extends$V = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$Q = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/** Defines the orientation used when rendering data series */\nvar CartesianChartLayout;\n(function (CartesianChartLayout) {\n    CartesianChartLayout[CartesianChartLayout[\"Vertical\"] = 0] = \"Vertical\";\n    CartesianChartLayout[CartesianChartLayout[\"Horizontal\"] = 1] = \"Horizontal\";\n})(CartesianChartLayout || (CartesianChartLayout = {}));\nvar CartesianChart = /** @class */ (function (_super) {\n    __extends$V(CartesianChart, _super);\n    function CartesianChart(document) {\n        if (document === void 0) { document = window.document; }\n        var _this = _super.call(this, document) || this;\n        _this.axisAutoPadding = new Padding();\n        _this.flipXY = false;\n        _this._seriesRoot = new Group();\n        _this._layout = CartesianChartLayout.Vertical;\n        _this._updateAxes = _this.updateAxes.bind(_this);\n        // Prevent the scene from rendering chart components in an invalid state\n        // (before first layout is performed).\n        _this.scene.root.visible = false;\n        var root = _this.scene.root;\n        root.append(_this._seriesRoot);\n        root.append(_this.legend.group);\n        return _this;\n    }\n    Object.defineProperty(CartesianChart.prototype, \"seriesRoot\", {\n        get: function () {\n            return this._seriesRoot;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CartesianChart.prototype.performLayout = function () {\n        if (this.dataPending) {\n            return;\n        }\n        this.scene.root.visible = true;\n        var _a = this, width = _a.width, height = _a.height, axes = _a.axes, legend = _a.legend;\n        var shrinkRect = {\n            x: 0,\n            y: 0,\n            width: width,\n            height: height\n        };\n        this.positionCaptions();\n        this.positionLegend();\n        if (legend.enabled && legend.data.length) {\n            var legendAutoPadding = this.legendAutoPadding;\n            var legendPadding = this.legend.padding;\n            shrinkRect.x += legendAutoPadding.left;\n            shrinkRect.y += legendAutoPadding.top;\n            shrinkRect.width -= legendAutoPadding.left + legendAutoPadding.right;\n            shrinkRect.height -= legendAutoPadding.top + legendAutoPadding.bottom;\n            switch (this.legend.position) {\n                case 'right':\n                    shrinkRect.width -= legendPadding;\n                    break;\n                case 'bottom':\n                    shrinkRect.height -= legendPadding;\n                    break;\n                case 'left':\n                    shrinkRect.x += legendPadding;\n                    shrinkRect.width -= legendPadding;\n                    break;\n                case 'top':\n                    shrinkRect.y += legendPadding;\n                    shrinkRect.height -= legendPadding;\n                    break;\n            }\n        }\n        var _b = this, captionAutoPadding = _b.captionAutoPadding, padding = _b.padding, axisAutoPadding = _b.axisAutoPadding;\n        this.updateAxes();\n        shrinkRect.x += padding.left + axisAutoPadding.left;\n        shrinkRect.y += padding.top + axisAutoPadding.top + captionAutoPadding;\n        shrinkRect.width -= padding.left + padding.right + axisAutoPadding.left + axisAutoPadding.right;\n        shrinkRect.height -= padding.top + padding.bottom + axisAutoPadding.top + axisAutoPadding.bottom + captionAutoPadding;\n        axes.forEach(function (axis) {\n            axis.group.visible = true;\n            switch (axis.position) {\n                case ChartAxisPosition.Top:\n                    axis.range = [0, shrinkRect.width];\n                    axis.translation.x = Math.floor(shrinkRect.x);\n                    axis.translation.y = Math.floor(shrinkRect.y + 1);\n                    axis.label.mirrored = true;\n                    axis.gridLength = shrinkRect.height;\n                    break;\n                case ChartAxisPosition.Right:\n                    if (axis instanceof CategoryAxis || axis instanceof GroupedCategoryAxis) {\n                        axis.range = [0, shrinkRect.height];\n                    }\n                    else {\n                        axis.range = [shrinkRect.height, 0];\n                    }\n                    axis.translation.x = Math.floor(shrinkRect.x + shrinkRect.width + 1);\n                    axis.translation.y = Math.floor(shrinkRect.y);\n                    axis.label.mirrored = true;\n                    axis.gridLength = shrinkRect.width;\n                    break;\n                case ChartAxisPosition.Bottom:\n                    axis.range = [0, shrinkRect.width];\n                    axis.translation.x = Math.floor(shrinkRect.x);\n                    axis.translation.y = Math.floor(shrinkRect.y + shrinkRect.height + 1);\n                    axis.gridLength = shrinkRect.height;\n                    break;\n                case ChartAxisPosition.Left:\n                    if (axis instanceof CategoryAxis || axis instanceof GroupedCategoryAxis) {\n                        axis.range = [0, shrinkRect.height];\n                    }\n                    else {\n                        axis.range = [shrinkRect.height, 0];\n                    }\n                    axis.translation.x = Math.floor(shrinkRect.x);\n                    axis.translation.y = Math.floor(shrinkRect.y);\n                    axis.gridLength = shrinkRect.width;\n                    break;\n            }\n        });\n        this.series.forEach(function (series) {\n            series.group.translationX = Math.floor(shrinkRect.x);\n            series.group.translationY = Math.floor(shrinkRect.y);\n            series.update(); // this has to happen after the `updateAxes` call\n        });\n        this.axes.forEach(function (axis) { return axis.update(); });\n    };\n    Object.defineProperty(CartesianChart.prototype, \"layout\", {\n        get: function () {\n            return this._layout;\n        },\n        set: function (value) {\n            if (this._layout !== value) {\n                this._layout = value;\n                this.layoutPending = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CartesianChart.prototype.initSeries = function (series) {\n        _super.prototype.initSeries.call(this, series);\n        series.addEventListener('dataProcessed', this._updateAxes);\n    };\n    CartesianChart.prototype.freeSeries = function (series) {\n        _super.prototype.freeSeries.call(this, series);\n        series.removeEventListener('dataProcessed', this._updateAxes);\n    };\n    CartesianChart.prototype.updateAxes = function () {\n        var _this = this;\n        var axes = this.axes.filter(function (a) { return !a.linkedTo; });\n        var linkedAxes = this.axes.filter(function (a) { return a.linkedTo; });\n        axes.concat(linkedAxes).forEach(function (axis) {\n            var _a;\n            var direction = axis.direction, position = axis.position, boundSeries = axis.boundSeries;\n            if (axis.linkedTo) {\n                axis.domain = axis.linkedTo.domain;\n            }\n            else {\n                var domains_1 = [];\n                boundSeries.filter(function (s) { return s.visible; }).forEach(function (series) {\n                    domains_1.push(series.getDomain(direction));\n                });\n                var domain = (_a = new Array()).concat.apply(_a, domains_1);\n                axis.domain = numericExtent(domain) || domain; // if numeric extent can't be found, it's categories\n            }\n            axis.update();\n            var axisThickness = Math.floor(axis.computeBBox().width);\n            switch (position) {\n                case ChartAxisPosition.Left:\n                    _this.axisAutoPadding.left = axisThickness;\n                    break;\n                case ChartAxisPosition.Right:\n                    _this.axisAutoPadding.right = axisThickness;\n                    break;\n                case ChartAxisPosition.Bottom:\n                    _this.axisAutoPadding.bottom = axisThickness;\n                    break;\n                case ChartAxisPosition.Top:\n                    _this.axisAutoPadding.top = axisThickness;\n                    break;\n            }\n        });\n    };\n    CartesianChart.className = 'CartesianChart';\n    __decorate$Q([\n        reactive(['layoutChange'])\n    ], CartesianChart.prototype, \"flipXY\", void 0);\n    return CartesianChart;\n}(Chart));\n\nvar __extends$W = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar PolarSeries = /** @class */ (function (_super) {\n    __extends$W(PolarSeries, _super);\n    function PolarSeries() {\n        var _a;\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.directionKeys = (_a = {},\n            _a[ChartAxisDirection.X] = ['angleKey'],\n            _a[ChartAxisDirection.Y] = ['radiusKey'],\n            _a);\n        /**\n         * The center of the polar series (for example, the center of a pie).\n         * If the polar chart has multiple series, all of them will have their\n         * center set to the same value as a result of the polar chart layout.\n         * The center coordinates are not supposed to be set by the user.\n         */\n        _this.centerX = 0;\n        _this.centerY = 0;\n        /**\n         * The maximum radius the series can use.\n         * This value is set automatically as a result of the polar chart layout\n         * and is not supposed to be set by the user.\n         */\n        _this.radius = 0;\n        return _this;\n    }\n    return PolarSeries;\n}(Series));\nvar PolarSeriesMarker = /** @class */ (function (_super) {\n    __extends$W(PolarSeriesMarker, _super);\n    function PolarSeriesMarker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PolarSeriesMarker;\n}(SeriesMarker));\n\nvar __extends$X = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar PolarChart = /** @class */ (function (_super) {\n    __extends$X(PolarChart, _super);\n    function PolarChart(document) {\n        if (document === void 0) { document = window.document; }\n        var _this = _super.call(this, document) || this;\n        _this.scene.root.append(_this.legend.group);\n        return _this;\n    }\n    Object.defineProperty(PolarChart.prototype, \"seriesRoot\", {\n        get: function () {\n            return this.scene.root;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PolarChart.prototype.performLayout = function () {\n        var shrinkRect = {\n            x: 0,\n            y: 0,\n            width: this.width,\n            height: this.height\n        };\n        this.positionCaptions();\n        this.positionLegend();\n        var captionAutoPadding = this.captionAutoPadding;\n        shrinkRect.y += captionAutoPadding;\n        shrinkRect.height -= captionAutoPadding;\n        if (this.legend.enabled && this.legend.data.length) {\n            var legendAutoPadding = this.legendAutoPadding;\n            shrinkRect.x += legendAutoPadding.left;\n            shrinkRect.y += legendAutoPadding.top;\n            shrinkRect.width -= legendAutoPadding.left + legendAutoPadding.right;\n            shrinkRect.height -= legendAutoPadding.top + legendAutoPadding.bottom;\n            var legendPadding = this.legend.padding;\n            switch (this.legend.position) {\n                case 'right':\n                    shrinkRect.width -= legendPadding;\n                    break;\n                case 'bottom':\n                    shrinkRect.height -= legendPadding;\n                    break;\n                case 'left':\n                    shrinkRect.x += legendPadding;\n                    shrinkRect.width -= legendPadding;\n                    break;\n                case 'top':\n                    shrinkRect.y += legendPadding;\n                    shrinkRect.height -= legendPadding;\n                    break;\n            }\n        }\n        var padding = this.padding;\n        shrinkRect.x += padding.left;\n        shrinkRect.y += padding.top;\n        shrinkRect.width -= padding.left + padding.right;\n        shrinkRect.height -= padding.top + padding.bottom;\n        var centerX = shrinkRect.x + shrinkRect.width / 2;\n        var centerY = shrinkRect.y + shrinkRect.height / 2;\n        var radius = Math.min(shrinkRect.width, shrinkRect.height) / 2;\n        this.series.forEach(function (series) {\n            if (series instanceof PolarSeries) {\n                series.centerX = centerX;\n                series.centerY = centerY;\n                series.radius = radius;\n                series.update();\n            }\n        });\n    };\n    PolarChart.className = 'PolarChart';\n    return PolarChart;\n}(Chart));\n\nfunction ascending(a, b) {\n    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n\nvar constant = (function (x) { return function () { return x; }; });\n\nfunction interpolateNumber (a, b) {\n    a = +a;\n    b -= a;\n    return function (t) { return a + b * t; };\n}\n\nfunction date (a, b) {\n    var date = new Date;\n    var msA = +a;\n    var msB = +b - msA;\n    return function (t) {\n        date.setTime(msA + msB * t);\n        return date;\n    };\n}\n\nfunction array (a, b) {\n    var nb = b ? b.length : 0;\n    var na = a ? Math.min(nb, a.length) : 0;\n    var x = new Array(na);\n    var c = new Array(nb);\n    var i;\n    for (i = 0; i < na; ++i) {\n        x[i] = interpolateValue(a[i], b[i]);\n    }\n    for (; i < nb; ++i) {\n        c[i] = b[i];\n    }\n    return function (t) {\n        for (i = 0; i < na; ++i) {\n            c[i] = x[i](t);\n        }\n        return c;\n    };\n}\n\nfunction object (a, b) {\n    var i = {};\n    var c = {};\n    var k;\n    if (a === null || typeof a !== 'object') {\n        a = {};\n    }\n    if (b === null || typeof b !== 'object') {\n        b = {};\n    }\n    for (k in b) {\n        if (k in a) {\n            i[k] = interpolateValue(a[k], b[k]);\n        }\n        else {\n            c[k] = b[k];\n        }\n    }\n    return function (t) {\n        for (k in i) {\n            c[k] = i[k](t);\n        }\n        return c;\n    };\n}\n\nfunction interpolateValue (a, b) {\n    var t = typeof b;\n    // let c;\n    return b == null || t === 'boolean' ? constant(b)\n        : (t === 'number' ? interpolateNumber\n            // : t === 'string' ? ((c = color(b)) ? (b = c, rgb) : string)\n            //     : b instanceof color ? rgb\n            : b instanceof Date ? date\n                : Array.isArray(b) ? array\n                    : typeof b.valueOf !== 'function' && typeof b.toString !== 'function' || isNaN(b) ? object\n                        : interpolateNumber)(a, b);\n}\n\nfunction bisectRight(list, x, comparator, lo, hi) {\n    if (lo === void 0) { lo = 0; }\n    if (hi === void 0) { hi = list.length; }\n    while (lo < hi) {\n        var mid = (lo + hi) >>> 1;\n        if (comparator(list[mid], x) > 0) { // list[mid] > x\n            hi = mid;\n        }\n        else {\n            lo = mid + 1;\n        }\n    }\n    return lo;\n}\nfunction complexBisectRight(list, x, map, lo, hi) {\n    if (lo === void 0) { lo = 0; }\n    if (hi === void 0) { hi = list.length; }\n    var comparator = ascendingComparator(map);\n    while (lo < hi) {\n        var mid = (lo + hi) >>> 1;\n        if (comparator(list[mid], x) < 0) {\n            lo = mid + 1;\n        }\n        else {\n            hi = mid;\n        }\n    }\n    return lo;\n}\nfunction ascendingComparator(map) {\n    return function (item, x) {\n        return ascending(map(item), x);\n    };\n}\n\nvar constant$1 = function (x) { return function () { return x; }; };\nvar identity = function (x) { return x; };\nfunction clamper(domain) {\n    var _a;\n    var a = domain[0];\n    var b = domain[domain.length - 1];\n    if (a > b) {\n        _a = [b, a], a = _a[0], b = _a[1];\n    }\n    return function (x) { return Math.max(a, Math.min(b, x)); };\n}\nvar ContinuousScale = /** @class */ (function () {\n    function ContinuousScale() {\n        /**\n         * The output value of the scale for `undefined` or `NaN` input values.\n         */\n        this.unknown = undefined;\n        this._clamp = identity;\n        this._domain = [0, 1];\n        this._range = [0, 1];\n        this.transform = identity; // transforms domain value\n        this.untransform = identity; // untransforms domain value\n        this._interpolate = interpolateValue;\n        this.rescale();\n    }\n    Object.defineProperty(ContinuousScale.prototype, \"clamp\", {\n        get: function () {\n            return this._clamp !== identity;\n        },\n        set: function (value) {\n            this._clamp = value ? clamper(this.domain) : identity;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ContinuousScale.prototype.setDomain = function (values) {\n        this._domain = Array.prototype.map.call(values, function (v) { return +v; });\n        if (this._clamp !== identity) {\n            this._clamp = clamper(this.domain);\n        }\n        this.rescale();\n    };\n    ContinuousScale.prototype.getDomain = function () {\n        return this._domain.slice();\n    };\n    Object.defineProperty(ContinuousScale.prototype, \"domain\", {\n        get: function () {\n            return this.getDomain();\n        },\n        set: function (values) {\n            this.setDomain(values);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ContinuousScale.prototype, \"range\", {\n        get: function () {\n            return this._range.slice();\n        },\n        set: function (values) {\n            this._range = Array.prototype.slice.call(values);\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ContinuousScale.prototype, \"interpolate\", {\n        get: function () {\n            return this._interpolate;\n        },\n        set: function (value) {\n            this._interpolate = value;\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ContinuousScale.prototype.rescale = function () {\n        if (Math.min(this.domain.length, this.range.length) > 2) {\n            this.piecewise = this.polymap;\n        }\n        else {\n            this.piecewise = this.bimap;\n        }\n        this.output = undefined;\n        this.input = undefined;\n    };\n    /**\n     * Returns a function that converts `x` in `[a, b]` to `t` in `[0, 1]`. Non-clamping.\n     * @param a\n     * @param b\n     */\n    ContinuousScale.prototype.normalize = function (a, b) {\n        return (b -= (a = +a))\n            ? function (x) { return (x - a) / b; }\n            : constant$1(isNaN(b) ? NaN : 0.5);\n    };\n    ContinuousScale.prototype.bimap = function (domain, range, interpolate) {\n        var x0 = domain[0];\n        var x1 = domain[1];\n        var y0 = range[0];\n        var y1 = range[1];\n        var xt;\n        var ty;\n        if (x1 < x0) {\n            xt = this.normalize(x1, x0);\n            ty = interpolate(y1, y0);\n        }\n        else {\n            xt = this.normalize(x0, x1);\n            ty = interpolate(y0, y1);\n        }\n        return function (x) { return ty(xt(x)); }; // domain value x --> t in [0, 1] --> range value y\n    };\n    ContinuousScale.prototype.polymap = function (domain, range, interpolate) {\n        var _this = this;\n        // number of segments in the polylinear scale\n        var n = Math.min(domain.length, range.length) - 1;\n        if (domain[n] < domain[0]) {\n            domain = domain.slice().reverse();\n            range = range.slice().reverse();\n        }\n        // deinterpolators from domain segment value to t\n        var dt = Array.from({ length: n }, function (_, i) { return _this.normalize(domain[i], domain[i + 1]); });\n        // reinterpolators from t to range segment value\n        var tr = Array.from({ length: n }, function (_, i) { return interpolate(range[i], range[i + 1]); });\n        return function (x) {\n            var i = bisectRight(domain, x, ascending, 1, n) - 1; // Find the domain segment that `x` belongs to.\n            // This also tells us which deinterpolator/reinterpolator pair to use.\n            return tr[i](dt[i](x));\n        };\n    };\n    ContinuousScale.prototype.convert = function (x) {\n        x = +x;\n        if (isNaN(x)) {\n            return this.unknown;\n        }\n        else {\n            if (!this.output) {\n                this.output = this.piecewise(this.domain.map(this.transform), this.range, this.interpolate);\n            }\n            return this.output(this.transform(this._clamp(x)));\n        }\n    };\n    ContinuousScale.prototype.invert = function (y) {\n        if (!this.input) {\n            this.input = this.piecewise(this.range, this.domain.map(this.transform), interpolateNumber);\n        }\n        return this._clamp(this.untransform(this.input(y)));\n    };\n    return ContinuousScale;\n}());\n\nvar __extends$Y = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar LineSeries = /** @class */ (function (_super) {\n    __extends$Y(LineSeries, _super);\n    function LineSeries() {\n        var _this = _super.call(this) || this;\n        _this.xDomain = [];\n        _this.yDomain = [];\n        _this.xData = [];\n        _this.yData = [];\n        _this.lineNode = new Path();\n        // We use groups for this selection even though each group only contains a marker ATM\n        // because in the future we might want to add label support as well.\n        _this.groupSelection = Selection.select(_this.group).selectAll();\n        _this.marker = new CartesianSeriesMarker();\n        _this._xKey = '';\n        _this._xName = '';\n        _this._yKey = '';\n        _this._yName = '';\n        _this._fill = borneo.fills[0];\n        _this._stroke = borneo.strokes[0];\n        _this._strokeWidth = 2;\n        _this._fillOpacity = 1;\n        _this._strokeOpacity = 1;\n        _this.highlightStyle = { fill: 'yellow' };\n        var lineNode = _this.lineNode;\n        lineNode.fill = undefined;\n        lineNode.lineJoin = 'round';\n        lineNode.pointerEvents = PointerEvents.None;\n        _this.group.append(lineNode);\n        var marker = _this.marker;\n        marker.addPropertyListener('type', function () { return _this.onMarkerTypeChange(); });\n        marker.addPropertyListener('enabled', function (event) {\n            if (!event.value) {\n                _this.groupSelection = _this.groupSelection.setData([]);\n                _this.groupSelection.exit.remove();\n            }\n        });\n        marker.addEventListener('change', function () { return _this.update(); });\n        return _this;\n    }\n    LineSeries.prototype.onMarkerTypeChange = function () {\n        this.groupSelection = this.groupSelection.setData([]);\n        this.groupSelection.exit.remove();\n        this.update();\n        this.fireEvent({ type: 'legendChange' });\n    };\n    Object.defineProperty(LineSeries.prototype, \"title\", {\n        get: function () {\n            return this._title;\n        },\n        set: function (value) {\n            if (this._title !== value) {\n                this._title = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LineSeries.prototype, \"xKey\", {\n        get: function () {\n            return this._xKey;\n        },\n        set: function (value) {\n            if (this._xKey !== value) {\n                this._xKey = value;\n                this.xData = [];\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LineSeries.prototype, \"xName\", {\n        get: function () {\n            return this._xName;\n        },\n        set: function (value) {\n            if (this._xName !== value) {\n                this._xName = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LineSeries.prototype, \"yKey\", {\n        get: function () {\n            return this._yKey;\n        },\n        set: function (value) {\n            if (this._yKey !== value) {\n                this._yKey = value;\n                this.yData = [];\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LineSeries.prototype, \"yName\", {\n        get: function () {\n            return this._yName;\n        },\n        set: function (value) {\n            if (this._yName !== value) {\n                this._yName = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LineSeries.prototype.processData = function () {\n        var _a = this, xAxis = _a.xAxis, xKey = _a.xKey, yKey = _a.yKey, xData = _a.xData, yData = _a.yData;\n        var data = xKey && yKey ? this.data : [];\n        if (!xAxis) {\n            return false;\n        }\n        var isContinuousX = xAxis.scale instanceof ContinuousScale;\n        xData.length = 0;\n        yData.length = 0;\n        for (var i = 0, n = data.length; i < n; i++) {\n            var datum = data[i];\n            var x = datum[xKey];\n            var y = datum[yKey];\n            if (x == null || (isContinuousX && isNaN(x)) || y == null || isNaN(y)) {\n                continue;\n            }\n            xData.push(x);\n            yData.push(y);\n        }\n        this.xDomain = isContinuousX ? this.fixNumericExtent(numericExtent(xData), 'x') : xData;\n        this.yDomain = this.fixNumericExtent(numericExtent(yData), 'y');\n        return true;\n    };\n    LineSeries.prototype.getDomain = function (direction) {\n        if (direction === ChartAxisDirection.X) {\n            return this.xDomain;\n        }\n        else {\n            return this.yDomain;\n        }\n    };\n    Object.defineProperty(LineSeries.prototype, \"fill\", {\n        get: function () {\n            return this._fill;\n        },\n        set: function (value) {\n            if (this._fill !== value) {\n                this._fill = value;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LineSeries.prototype, \"stroke\", {\n        get: function () {\n            return this._stroke;\n        },\n        set: function (value) {\n            if (this._stroke !== value) {\n                this._stroke = value;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LineSeries.prototype, \"strokeWidth\", {\n        get: function () {\n            return this._strokeWidth;\n        },\n        set: function (value) {\n            if (this._strokeWidth !== value) {\n                this._strokeWidth = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LineSeries.prototype, \"fillOpacity\", {\n        get: function () {\n            return this._fillOpacity;\n        },\n        set: function (value) {\n            if (this._fillOpacity !== value) {\n                this._fillOpacity = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LineSeries.prototype, \"strokeOpacity\", {\n        get: function () {\n            return this._strokeOpacity;\n        },\n        set: function (value) {\n            if (this._strokeOpacity !== value) {\n                this._strokeOpacity = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LineSeries.prototype.highlightNode = function (node) {\n        if (!(node instanceof Marker)) {\n            return;\n        }\n        this.highlightedNode = node;\n        this.scheduleLayout();\n    };\n    LineSeries.prototype.dehighlightNode = function () {\n        this.highlightedNode = undefined;\n        this.scheduleLayout();\n    };\n    LineSeries.prototype.update = function () {\n        var _a = this, chart = _a.chart, xAxis = _a.xAxis, yAxis = _a.yAxis;\n        this.group.visible = this.visible;\n        if (!xAxis || !yAxis || !chart || chart.layoutPending || chart.dataPending) {\n            return;\n        }\n        var xScale = xAxis.scale;\n        var yScale = yAxis.scale;\n        var xOffset = (xScale.bandwidth || 0) / 2;\n        var yOffset = (yScale.bandwidth || 0) / 2;\n        var _b = this, data = _b.data, xData = _b.xData, yData = _b.yData, marker = _b.marker, lineNode = _b.lineNode;\n        var groupSelectionData = [];\n        var linePath = lineNode.path;\n        linePath.clear();\n        xData.forEach(function (xDatum, i) {\n            var yDatum = yData[i];\n            var x = xScale.convert(xDatum) + xOffset;\n            var y = yScale.convert(yDatum) + yOffset;\n            if (i > 0) {\n                linePath.lineTo(x, y);\n            }\n            else {\n                linePath.moveTo(x, y);\n            }\n            if (marker) {\n                groupSelectionData.push({\n                    seriesDatum: data[i],\n                    x: x,\n                    y: y\n                });\n            }\n        });\n        lineNode.stroke = this.stroke;\n        lineNode.strokeWidth = this.strokeWidth;\n        this.updateGroupSelection(groupSelectionData);\n    };\n    LineSeries.prototype.updateGroupSelection = function (groupSelectionData) {\n        var _a = this, marker = _a.marker, xKey = _a.xKey, yKey = _a.yKey, highlightedNode = _a.highlightedNode, fill = _a.fill, stroke = _a.stroke, strokeWidth = _a.strokeWidth;\n        var groupSelection = this.groupSelection;\n        var Marker = marker.type;\n        var updateGroups = groupSelection.setData(groupSelectionData);\n        updateGroups.exit.remove();\n        var enterGroups = updateGroups.enter.append(Group);\n        enterGroups.append(Marker);\n        var _b = this.highlightStyle, highlightFill = _b.fill, highlightStroke = _b.stroke;\n        var markerFormatter = marker.formatter;\n        var markerSize = marker.size;\n        var markerStrokeWidth = marker.strokeWidth !== undefined ? marker.strokeWidth : strokeWidth;\n        groupSelection = updateGroups.merge(enterGroups);\n        groupSelection.selectByClass(Marker)\n            .each(function (node, datum) {\n            var isHighlightedNode = node === highlightedNode;\n            var markerFill = isHighlightedNode && highlightFill !== undefined ? highlightFill : marker.fill || fill;\n            var markerStroke = isHighlightedNode && highlightStroke !== undefined ? highlightStroke : marker.stroke || stroke;\n            var markerFormat = undefined;\n            if (markerFormatter) {\n                markerFormat = markerFormatter({\n                    datum: datum.seriesDatum,\n                    xKey: xKey,\n                    yKey: yKey,\n                    fill: markerFill,\n                    stroke: markerStroke,\n                    strokeWidth: markerStrokeWidth,\n                    size: markerSize,\n                    highlighted: isHighlightedNode\n                });\n            }\n            node.fill = markerFormat && markerFormat.fill || markerFill;\n            node.stroke = markerFormat && markerFormat.stroke || markerStroke;\n            node.strokeWidth = markerFormat && markerFormat.strokeWidth !== undefined\n                ? markerFormat.strokeWidth\n                : markerStrokeWidth;\n            node.size = markerFormat && markerFormat.size !== undefined\n                ? markerFormat.size\n                : markerSize;\n            node.translationX = datum.x;\n            node.translationY = datum.y;\n            node.visible = marker.enabled && node.size > 0;\n        });\n        this.groupSelection = groupSelection;\n    };\n    LineSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var _a = this, xKey = _a.xKey, yKey = _a.yKey;\n        if (!xKey || !yKey) {\n            return '';\n        }\n        var _b = this, xName = _b.xName, yName = _b.yName, color = _b.fill, title = _b.title, tooltipRenderer = _b.tooltipRenderer;\n        if (tooltipRenderer) {\n            return tooltipRenderer({\n                datum: nodeDatum.seriesDatum,\n                xKey: xKey,\n                xName: xName,\n                yKey: yKey,\n                yName: yName,\n                title: title,\n                color: color,\n            });\n        }\n        else {\n            var titleStyle = \"style=\\\"color: white; background-color: \" + color + \"\\\"\";\n            var titleString = title ? \"<div class=\\\"title\\\" \" + titleStyle + \">\" + title + \"</div>\" : '';\n            var seriesDatum = nodeDatum.seriesDatum;\n            var xValue = seriesDatum[xKey];\n            var yValue = seriesDatum[yKey];\n            var xString = typeof xValue === 'number' ? toFixed(xValue) : String(xValue);\n            var yString = typeof yValue === 'number' ? toFixed(yValue) : String(yValue);\n            return titleString + \"<div class=\\\"content\\\">\" + xString + \": \" + yString + \"</div>\";\n        }\n    };\n    LineSeries.prototype.listSeriesItems = function (data) {\n        var _a = this, id = _a.id, xKey = _a.xKey, yKey = _a.yKey, yName = _a.yName, title = _a.title, visible = _a.visible, marker = _a.marker, fill = _a.fill, stroke = _a.stroke, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity;\n        if (this.data.length && xKey && yKey) {\n            data.push({\n                id: id,\n                itemId: undefined,\n                enabled: visible,\n                label: {\n                    text: title || yName || yKey\n                },\n                marker: {\n                    type: marker.type,\n                    fill: marker.fill || fill,\n                    stroke: marker.stroke || stroke,\n                    fillOpacity: fillOpacity,\n                    strokeOpacity: strokeOpacity\n                }\n            });\n        }\n    };\n    LineSeries.className = 'LineSeries';\n    return LineSeries;\n}(CartesianSeries));\n\nvar __extends$Z = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Maps continuous domain to a continuous range.\n */\nvar LinearScale = /** @class */ (function (_super) {\n    __extends$Z(LinearScale, _super);\n    function LinearScale() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LinearScale.prototype.ticks = function (count) {\n        if (count === void 0) { count = 10; }\n        var d = this._domain;\n        return ticks(d[0], d[d.length - 1], count);\n    };\n    /**\n     * Extends the domain so that it starts and ends on nice round values.\n     * @param count Tick count.\n     */\n    LinearScale.prototype.nice = function (count) {\n        if (count === void 0) { count = 10; }\n        var d = this.domain;\n        var i0 = 0;\n        var i1 = d.length - 1;\n        var start = d[i0];\n        var stop = d[i1];\n        var step;\n        if (stop < start) {\n            step = start;\n            start = stop;\n            stop = step;\n            step = i0;\n            i0 = i1;\n            i1 = step;\n        }\n        step = tickIncrement(start, stop, count);\n        if (step > 0) {\n            start = Math.floor(start / step) * step;\n            stop = Math.ceil(stop / step) * step;\n            step = tickIncrement(start, stop, count);\n        }\n        else if (step < 0) {\n            start = Math.ceil(start * step) / step;\n            stop = Math.floor(stop * step) / step;\n            step = tickIncrement(start, stop, count);\n        }\n        if (step > 0) {\n            d[i0] = Math.floor(start / step) * step;\n            d[i1] = Math.ceil(stop / step) * step;\n            this.domain = d;\n        }\n        else if (step < 0) {\n            d[i0] = Math.ceil(start * step) / step;\n            d[i1] = Math.floor(stop * step) / step;\n            this.domain = d;\n        }\n    };\n    return LinearScale;\n}(ContinuousScale));\n/**\n * Creates a continuous scale with the default interpolator and no clamping.\n */\nfunction scaleLinear() {\n    return new LinearScale();\n}\n\nvar __extends$_ = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$R = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ScatterSeries = /** @class */ (function (_super) {\n    __extends$_(ScatterSeries, _super);\n    function ScatterSeries() {\n        var _this = _super.call(this) || this;\n        _this.xDomain = [];\n        _this.yDomain = [];\n        _this.xData = [];\n        _this.yData = [];\n        _this.sizeData = [];\n        _this.sizeScale = scaleLinear();\n        _this.groupSelection = Selection.select(_this.group).selectAll();\n        _this.marker = new CartesianSeriesMarker();\n        _this._fill = borneo.fills[0];\n        _this._stroke = borneo.strokes[0];\n        _this._strokeWidth = 2;\n        _this._fillOpacity = 1;\n        _this._strokeOpacity = 1;\n        _this.highlightStyle = {\n            fill: 'yellow'\n        };\n        _this.xKey = '';\n        _this.yKey = '';\n        _this.xName = 'X';\n        _this.yName = 'Y';\n        _this.sizeName = 'Size';\n        _this.labelName = 'Label';\n        var marker = _this.marker;\n        marker.addPropertyListener('type', function () { return _this.onMarkerTypeChange(); });\n        marker.addEventListener('change', function () { return _this.update(); });\n        _this.addPropertyListener('xKey', function () { return _this.xData = []; });\n        _this.addPropertyListener('yKey', function () { return _this.yData = []; });\n        _this.addPropertyListener('sizeKey', function () { return _this.sizeData = []; });\n        return _this;\n    }\n    Object.defineProperty(ScatterSeries.prototype, \"fill\", {\n        get: function () {\n            return this._fill;\n        },\n        set: function (value) {\n            if (this._fill !== value) {\n                this._fill = value;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ScatterSeries.prototype, \"stroke\", {\n        get: function () {\n            return this._stroke;\n        },\n        set: function (value) {\n            if (this._stroke !== value) {\n                this._stroke = value;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ScatterSeries.prototype, \"strokeWidth\", {\n        get: function () {\n            return this._strokeWidth;\n        },\n        set: function (value) {\n            if (this._strokeWidth !== value) {\n                this._strokeWidth = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ScatterSeries.prototype, \"fillOpacity\", {\n        get: function () {\n            return this._fillOpacity;\n        },\n        set: function (value) {\n            if (this._fillOpacity !== value) {\n                this._fillOpacity = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ScatterSeries.prototype, \"strokeOpacity\", {\n        get: function () {\n            return this._strokeOpacity;\n        },\n        set: function (value) {\n            if (this._strokeOpacity !== value) {\n                this._strokeOpacity = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ScatterSeries.prototype.onMarkerTypeChange = function () {\n        this.groupSelection = this.groupSelection.setData([]);\n        this.groupSelection.exit.remove();\n        this.update();\n        this.fireEvent({ type: 'legendChange' });\n    };\n    ScatterSeries.prototype.processData = function () {\n        var _a = this, xKey = _a.xKey, yKey = _a.yKey, sizeKey = _a.sizeKey;\n        var data = xKey && yKey ? this.data : [];\n        this.xData = data.map(function (d) { return d[xKey]; });\n        this.yData = data.map(function (d) { return d[yKey]; });\n        if (sizeKey) {\n            this.sizeData = data.map(function (d) { return d[sizeKey]; });\n        }\n        else {\n            this.sizeData = [];\n        }\n        this.sizeScale.domain = numericExtent(this.sizeData) || [1, 1];\n        this.xDomain = this.fixNumericExtent(numericExtent(this.xData), 'x');\n        this.yDomain = this.fixNumericExtent(numericExtent(this.yData), 'y');\n        return true;\n    };\n    ScatterSeries.prototype.getDomain = function (direction) {\n        if (direction === ChartAxisDirection.X) {\n            return this.xDomain;\n        }\n        else {\n            return this.yDomain;\n        }\n    };\n    ScatterSeries.prototype.highlightNode = function (node) {\n        if (!(node instanceof Marker)) {\n            return;\n        }\n        this.highlightedNode = node;\n        this.scheduleLayout();\n    };\n    ScatterSeries.prototype.dehighlightNode = function () {\n        this.highlightedNode = undefined;\n        this.scheduleLayout();\n    };\n    ScatterSeries.prototype.update = function () {\n        var _a = this, visible = _a.visible, chart = _a.chart, xAxis = _a.xAxis, yAxis = _a.yAxis;\n        this.group.visible = visible;\n        if (!xAxis || !yAxis || !visible || !chart || chart.layoutPending || chart.dataPending) {\n            return;\n        }\n        var xScale = xAxis.scale;\n        var yScale = yAxis.scale;\n        var xOffset = (xScale.bandwidth || 0) / 2;\n        var yOffset = (yScale.bandwidth || 0) / 2;\n        var _b = this, data = _b.data, xData = _b.xData, yData = _b.yData, sizeData = _b.sizeData, xKey = _b.xKey, yKey = _b.yKey, sizeScale = _b.sizeScale, marker = _b.marker, fill = _b.fill, stroke = _b.stroke, strokeWidth = _b.strokeWidth, fillOpacity = _b.fillOpacity, strokeOpacity = _b.strokeOpacity, highlightedNode = _b.highlightedNode;\n        var Marker = marker.type;\n        var markerFormatter = marker.formatter;\n        this.sizeScale.range = [marker.minSize, marker.size];\n        var groupSelectionData = xData.map(function (xDatum, i) { return ({\n            seriesDatum: data[i],\n            x: xScale.convert(xDatum) + xOffset,\n            y: yScale.convert(yData[i]) + yOffset,\n            size: sizeData.length ? sizeScale.convert(sizeData[i]) : marker.size\n        }); });\n        var updateGroups = this.groupSelection.setData(groupSelectionData);\n        updateGroups.exit.remove();\n        var enterGroups = updateGroups.enter.append(Group);\n        enterGroups.append(Marker);\n        var groupSelection = updateGroups.merge(enterGroups);\n        var _c = this.highlightStyle, highlightFill = _c.fill, highlightStroke = _c.stroke;\n        var markerStrokeWidth = marker.strokeWidth !== undefined ? marker.strokeWidth : strokeWidth;\n        groupSelection.selectByClass(Marker)\n            .each(function (node, datum) {\n            var isHighlightedNode = node === highlightedNode;\n            var markerFill = isHighlightedNode && highlightFill !== undefined ? highlightFill : marker.fill || fill;\n            var markerStroke = isHighlightedNode && highlightStroke !== undefined ? highlightStroke : marker.stroke || stroke;\n            var markerFormat = undefined;\n            if (markerFormatter) {\n                markerFormat = markerFormatter({\n                    datum: datum.seriesDatum,\n                    xKey: xKey,\n                    yKey: yKey,\n                    fill: markerFill,\n                    stroke: markerStroke,\n                    strokeWidth: markerStrokeWidth,\n                    size: datum.size,\n                    highlighted: isHighlightedNode\n                });\n            }\n            node.fill = markerFormat && markerFormat.fill || markerFill;\n            node.stroke = markerFormat && markerFormat.stroke || markerStroke;\n            node.strokeWidth = markerFormat && markerFormat.strokeWidth !== undefined\n                ? markerFormat.strokeWidth\n                : markerStrokeWidth;\n            node.size = markerFormat && markerFormat.size !== undefined\n                ? markerFormat.size\n                : datum.size;\n            node.fillOpacity = fillOpacity;\n            node.strokeOpacity = strokeOpacity;\n            node.translationX = datum.x;\n            node.translationY = datum.y;\n            node.visible = marker.enabled && node.size > 0;\n        });\n        this.groupSelection = groupSelection;\n    };\n    ScatterSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var _a = this, xKey = _a.xKey, yKey = _a.yKey;\n        if (!xKey || !yKey) {\n            return '';\n        }\n        var _b = this, title = _b.title, tooltipRenderer = _b.tooltipRenderer, xName = _b.xName, yName = _b.yName, sizeKey = _b.sizeKey, sizeName = _b.sizeName, labelKey = _b.labelKey, labelName = _b.labelName, fill = _b.fill;\n        var color = fill || 'gray';\n        if (tooltipRenderer) {\n            return tooltipRenderer({\n                datum: nodeDatum.seriesDatum,\n                xKey: xKey,\n                yKey: yKey,\n                sizeKey: sizeKey,\n                labelKey: labelKey,\n                xName: xName,\n                yName: yName,\n                sizeName: sizeName,\n                labelName: labelName,\n                title: title,\n                color: color\n            });\n        }\n        else {\n            var titleStyle = \"style=\\\"color: white; background-color: \" + color + \"\\\"\";\n            var titleHtml = title ? \"<div class=\\\"title\\\" \" + titleStyle + \">\" + title + \"</div>\" : '';\n            var seriesDatum = nodeDatum.seriesDatum;\n            var xValue = seriesDatum[xKey];\n            var yValue = seriesDatum[yKey];\n            var contentHtml = \"<b>\" + xName + \"</b>: \" + toFixed(xValue) + \"<br><b>\" + yName + \"</b>: \" + toFixed(yValue);\n            if (sizeKey) {\n                contentHtml += \"<br><b>\" + sizeName + \"</b>: \" + seriesDatum[sizeKey];\n            }\n            if (labelKey) {\n                contentHtml = \"<b>\" + labelName + \"</b>: \" + seriesDatum[labelKey] + \"<br>\" + contentHtml;\n            }\n            return titleHtml + \"<div class=\\\"content\\\">\" + contentHtml + \"</div>\";\n        }\n    };\n    ScatterSeries.prototype.listSeriesItems = function (data) {\n        var _a = this, id = _a.id, title = _a.title, visible = _a.visible, xKey = _a.xKey, yKey = _a.yKey, yName = _a.yName, marker = _a.marker, fill = _a.fill, stroke = _a.stroke, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity;\n        if (this.data.length && xKey && yKey) {\n            data.push({\n                id: id,\n                itemId: undefined,\n                enabled: visible,\n                label: {\n                    text: title || yName || yKey\n                },\n                marker: {\n                    type: marker.type,\n                    fill: marker.fill || fill,\n                    stroke: marker.stroke || stroke,\n                    fillOpacity: fillOpacity,\n                    strokeOpacity: strokeOpacity\n                }\n            });\n        }\n    };\n    ScatterSeries.className = 'ScatterSeries';\n    __decorate$R([\n        reactive(['layoutChange'])\n    ], ScatterSeries.prototype, \"title\", void 0);\n    __decorate$R([\n        reactive(['dataChange'])\n    ], ScatterSeries.prototype, \"xKey\", void 0);\n    __decorate$R([\n        reactive(['dataChange'])\n    ], ScatterSeries.prototype, \"yKey\", void 0);\n    __decorate$R([\n        reactive(['dataChange'])\n    ], ScatterSeries.prototype, \"sizeKey\", void 0);\n    __decorate$R([\n        reactive(['dataChange'])\n    ], ScatterSeries.prototype, \"labelKey\", void 0);\n    return ScatterSeries;\n}(CartesianSeries));\n\nvar __extends$$ = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$S = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar Label = /** @class */ (function (_super) {\n    __extends$$(Label, _super);\n    function Label() {\n        var _this = _super.call(this) || this;\n        _this.enabled = true;\n        _this.fontSize = 12;\n        _this.fontFamily = 'Verdana, sans-serif';\n        _this.color = 'black';\n        return _this;\n    }\n    __decorate$S([\n        reactive(['change', 'dataChange'])\n    ], Label.prototype, \"enabled\", void 0);\n    __decorate$S([\n        reactive(['change'])\n    ], Label.prototype, \"fontStyle\", void 0);\n    __decorate$S([\n        reactive(['change'])\n    ], Label.prototype, \"fontWeight\", void 0);\n    __decorate$S([\n        reactive(['change'])\n    ], Label.prototype, \"fontSize\", void 0);\n    __decorate$S([\n        reactive(['change'])\n    ], Label.prototype, \"fontFamily\", void 0);\n    __decorate$S([\n        reactive(['change'])\n    ], Label.prototype, \"color\", void 0);\n    return Label;\n}(Observable));\n\nvar __extends$10 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$T = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays$4 = (undefined && undefined.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar ColumnSeriesNodeTag;\n(function (ColumnSeriesNodeTag) {\n    ColumnSeriesNodeTag[ColumnSeriesNodeTag[\"Column\"] = 0] = \"Column\";\n    ColumnSeriesNodeTag[ColumnSeriesNodeTag[\"Label\"] = 1] = \"Label\";\n})(ColumnSeriesNodeTag || (ColumnSeriesNodeTag = {}));\nvar ColumnSeriesLabel = /** @class */ (function (_super) {\n    __extends$10(ColumnSeriesLabel, _super);\n    function ColumnSeriesLabel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$T([\n        reactive(['change'])\n    ], ColumnSeriesLabel.prototype, \"formatter\", void 0);\n    return ColumnSeriesLabel;\n}(Label));\nvar ColumnSeries = /** @class */ (function (_super) {\n    __extends$10(ColumnSeries, _super);\n    function ColumnSeries() {\n        var _a;\n        var _this = _super.call(this) || this;\n        // Need to put column and label nodes into separate groups, because even though label nodes are\n        // created after the column nodes, this only guarantees that labels will always be on top of columns\n        // on the first run. If on the next run more columns are added, they might clip the labels\n        // rendered during the previous run.\n        _this.rectGroup = _this.group.appendChild(new Group);\n        _this.textGroup = _this.group.appendChild(new Group);\n        _this.rectSelection = Selection.select(_this.rectGroup).selectAll();\n        _this.textSelection = Selection.select(_this.textGroup).selectAll();\n        _this.xData = [];\n        _this.yData = [];\n        _this.yDomain = [];\n        _this.label = new ColumnSeriesLabel();\n        /**\n         * The assumption is that the values will be reset (to `true`)\n         * in the {@link yKeys} setter.\n         */\n        _this.yKeyEnabled = new Map();\n        _this.fills = borneo.fills;\n        _this.strokes = borneo.strokes;\n        _this.fillOpacity = 1;\n        _this.strokeOpacity = 1;\n        /**\n         * Used to get the position of columns within each group.\n         */\n        _this.groupScale = new BandScale();\n        _this.directionKeys = (_a = {},\n            _a[ChartAxisDirection.X] = ['xKey'],\n            _a[ChartAxisDirection.Y] = ['yKeys'],\n            _a);\n        _this.flipXY = false;\n        _this._xKey = '';\n        _this._xName = '';\n        /**\n         * With a single value in the `yKeys` array we get the regular column series.\n         * With multiple values, we get the stacked column series.\n         * If the {@link grouped} set to `true`, we get the grouped column series.\n         * @param values\n         */\n        _this._yKeys = [];\n        _this._yNames = [];\n        _this._grouped = false;\n        _this._strokeWidth = 1;\n        _this.highlightStyle = {\n            fill: 'yellow'\n        };\n        _this.label.enabled = false;\n        _this.label.addEventListener('change', function () { return _this.update(); });\n        return _this;\n    }\n    ColumnSeries.prototype.getKeys = function (direction) {\n        var _this = this;\n        var directionKeys = this.directionKeys;\n        var keys = directionKeys && directionKeys[this.flipXY ? flipChartAxisDirection(direction) : direction];\n        var values = [];\n        if (keys) {\n            keys.forEach(function (key) {\n                var value = _this[key];\n                if (value) {\n                    if (Array.isArray(value)) {\n                        values.push.apply(values, value);\n                    }\n                    else {\n                        values.push(value);\n                    }\n                }\n            });\n        }\n        return values;\n    };\n    Object.defineProperty(ColumnSeries.prototype, \"xKey\", {\n        get: function () {\n            return this._xKey;\n        },\n        set: function (value) {\n            if (this._xKey !== value) {\n                this._xKey = value;\n                this.xData = [];\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ColumnSeries.prototype, \"xName\", {\n        get: function () {\n            return this._xName;\n        },\n        set: function (value) {\n            if (this._xName !== value) {\n                this._xName = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ColumnSeries.prototype, \"yKeys\", {\n        get: function () {\n            return this._yKeys;\n        },\n        set: function (values) {\n            this._yKeys = values;\n            this.yData = [];\n            var yKeyEnabled = this.yKeyEnabled;\n            yKeyEnabled.clear();\n            values.forEach(function (key) { return yKeyEnabled.set(key, true); });\n            var groupScale = this.groupScale;\n            groupScale.domain = values;\n            groupScale.padding = 0.1;\n            groupScale.round = true;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ColumnSeries.prototype, \"yNames\", {\n        get: function () {\n            return this._yNames;\n        },\n        set: function (values) {\n            this._yNames = values;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ColumnSeries.prototype, \"grouped\", {\n        get: function () {\n            return this._grouped;\n        },\n        set: function (value) {\n            if (this._grouped !== value) {\n                this._grouped = value;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ColumnSeries.prototype, \"normalizedTo\", {\n        get: function () {\n            return this._normalizedTo;\n        },\n        set: function (value) {\n            var absValue = value ? Math.abs(value) : undefined;\n            if (this._normalizedTo !== absValue) {\n                this._normalizedTo = absValue;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ColumnSeries.prototype, \"strokeWidth\", {\n        get: function () {\n            return this._strokeWidth;\n        },\n        set: function (value) {\n            if (this._strokeWidth !== value) {\n                this._strokeWidth = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ColumnSeries.prototype, \"shadow\", {\n        get: function () {\n            return this._shadow;\n        },\n        set: function (value) {\n            if (this._shadow !== value) {\n                this._shadow = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ColumnSeries.prototype.highlightNode = function (node) {\n        if (!(node instanceof Rect)) {\n            return;\n        }\n        this.highlightedNode = node;\n        this.scheduleLayout();\n    };\n    ColumnSeries.prototype.dehighlightNode = function () {\n        this.highlightedNode = undefined;\n        this.scheduleLayout();\n    };\n    ColumnSeries.prototype.processData = function () {\n        var _a = this, xKey = _a.xKey, yKeys = _a.yKeys, yKeyEnabled = _a.yKeyEnabled;\n        var data = xKey && yKeys.length ? this.data : [];\n        // If the data is an array of rows like so:\n        //\n        // [{\n        //   xKey: 'Jan',\n        //   yKey1: 5,\n        //   yKey2: 7,\n        //   yKey3: -9,\n        // }, {\n        //   xKey: 'Feb',\n        //   yKey1: 10,\n        //   yKey2: -15,\n        //   yKey3: 20\n        // }]\n        //\n        var keysFound = true; // only warn once\n        this.xData = data.map(function (datum) {\n            if (keysFound && !(xKey in datum)) {\n                keysFound = false;\n                console.warn(\"The key '\" + xKey + \"' was not found in the data: \", datum);\n            }\n            return datum[xKey];\n        });\n        this.yData = data.map(function (datum) { return yKeys.map(function (yKey) {\n            if (keysFound && !(yKey in datum)) {\n                keysFound = false;\n                console.warn(\"The key '\" + yKey + \"' was not found in the data: \", datum);\n            }\n            var value = datum[yKey];\n            return isFinite(value) && yKeyEnabled.get(yKey) ? value : 0;\n        }); });\n        // xData: ['Jan', 'Feb']\n        //\n        // yData: [\n        //   [5, 7, -9],\n        //   [10, -15, 20]\n        // ]\n        var ySums = this.yData.map(function (values) { return sumPositiveValues(values); }); // used for normalization of stacked columns\n        var _b = this, yData = _b.yData, normalizedTo = _b.normalizedTo;\n        var yMin = Infinity;\n        var yMax = -Infinity;\n        if (this.grouped) {\n            // Find the tallest positive/negative column in each group,\n            // then find the tallest positive/negative column overall.\n            // The `yMin` should always be <= 0,\n            // otherwise with the `yData` like [300, 200, 100] the last column\n            // will have zero height, because the y-axis range is [100, 300].\n            yMin = Math.min.apply(Math, __spreadArrays$4([0], yData.map(function (values) { return Math.min.apply(Math, values); })));\n            yMax = Math.max.apply(Math, yData.map(function (values) { return Math.max.apply(Math, values); }));\n        }\n        else { // stacked or regular\n            if (normalizedTo && isFinite(normalizedTo)) {\n                yMin = 0;\n                yMax = normalizedTo;\n                yData.forEach(function (stackValues, i) { return stackValues.forEach(function (y, j) { return stackValues[j] = y / ySums[i] * normalizedTo; }); });\n            }\n            else {\n                // Find the height of each stack in the positive and negative directions,\n                // then find the tallest stacks in both directions.\n                yMin = Math.min.apply(Math, __spreadArrays$4([0], yData.map(function (values) { return values.reduce(function (min, value) { return value < 0 ? min - value : min; }, 0); })));\n                yMax = Math.max.apply(Math, yData.map(function (values) { return values.reduce(function (max, value) { return value > 0 ? max + value : max; }, 0); }));\n            }\n        }\n        this.yDomain = this.fixNumericExtent([yMin, yMax], 'y');\n        this.fireEvent({ type: 'dataProcessed' });\n        return true;\n    };\n    ColumnSeries.prototype.getDomain = function (direction) {\n        if (this.flipXY) {\n            direction = flipChartAxisDirection(direction);\n        }\n        if (direction === ChartAxisDirection.X) {\n            return this.xData;\n        }\n        else {\n            return this.yDomain;\n        }\n    };\n    ColumnSeries.prototype.update = function () {\n        var _a = this, visible = _a.visible, chart = _a.chart, xAxis = _a.xAxis, yAxis = _a.yAxis, xData = _a.xData, yData = _a.yData;\n        this.group.visible = visible;\n        if (!xAxis || !yAxis || !visible || !chart || chart.layoutPending || chart.dataPending || !xData.length || !yData.length) {\n            return;\n        }\n        var selectionData = this.generateSelectionData();\n        this.updateRectSelection(selectionData);\n        this.updateTextSelection(selectionData);\n    };\n    ColumnSeries.prototype.generateSelectionData = function () {\n        var _a = this, xAxis = _a.xAxis, yAxis = _a.yAxis, flipXY = _a.flipXY;\n        var xScale = (flipXY ? yAxis : xAxis).scale;\n        var yScale = (flipXY ? xAxis : yAxis).scale;\n        var _b = this, groupScale = _b.groupScale, yKeys = _b.yKeys, fills = _b.fills, strokes = _b.strokes, grouped = _b.grouped, strokeWidth = _b.strokeWidth, yKeyEnabled = _b.yKeyEnabled, data = _b.data, xData = _b.xData, yData = _b.yData;\n        var label = this.label;\n        var labelFontStyle = label.fontStyle;\n        var labelFontWeight = label.fontWeight;\n        var labelFontSize = label.fontSize;\n        var labelFontFamily = label.fontFamily;\n        var labelColor = label.color;\n        var labelFormatter = label.formatter;\n        groupScale.range = [0, xScale.bandwidth];\n        var columnWidth = grouped ? groupScale.bandwidth : xScale.bandwidth;\n        var selectionData = [];\n        xData.forEach(function (category, i) {\n            var values = yData[i];\n            var seriesDatum = data[i];\n            var x = xScale.convert(category);\n            var prev = 0;\n            values.forEach(function (curr, j) {\n                var yKey = yKeys[j];\n                var columnX = grouped ? x + groupScale.convert(yKey) : x;\n                var y = yScale.convert(grouped ? curr : prev + curr);\n                var bottomY = yScale.convert(grouped ? 0 : prev);\n                var yValue = seriesDatum[yKey]; // unprocessed y-value\n                var yValueIsNumber = typeof yValue === 'number';\n                var labelText;\n                if (labelFormatter) {\n                    labelText = labelFormatter({ value: yValueIsNumber ? yValue : undefined });\n                }\n                else {\n                    labelText = yValueIsNumber && isFinite(yValue) ? yValue.toFixed(2) : '';\n                }\n                selectionData.push({\n                    seriesDatum: seriesDatum,\n                    yValue: yValue,\n                    yKey: yKey,\n                    x: flipXY ? Math.min(y, bottomY) : columnX,\n                    y: flipXY ? columnX : Math.min(y, bottomY),\n                    width: flipXY ? Math.abs(bottomY - y) : columnWidth,\n                    height: flipXY ? columnWidth : Math.abs(bottomY - y),\n                    fill: fills[j % fills.length],\n                    stroke: strokes[j % strokes.length],\n                    strokeWidth: strokeWidth,\n                    label: yKeyEnabled.get(yKey) && labelText ? {\n                        text: labelText,\n                        fontStyle: labelFontStyle,\n                        fontWeight: labelFontWeight,\n                        fontSize: labelFontSize,\n                        fontFamily: labelFontFamily,\n                        fill: labelColor,\n                        x: flipXY ? y + (yValue >= 0 ? -1 : 1) * Math.abs(bottomY - y) / 2 : columnX + columnWidth / 2,\n                        y: flipXY ? columnX + columnWidth / 2 : y + (yValue >= 0 ? 1 : -1) * Math.abs(bottomY - y) / 2\n                    } : undefined\n                });\n                if (grouped) {\n                    prev = curr;\n                }\n                else {\n                    prev += curr;\n                }\n            });\n        });\n        return selectionData;\n    };\n    ColumnSeries.prototype.updateRectSelection = function (selectionData) {\n        var _a = this, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity, shadow = _a.shadow, highlightedNode = _a.highlightedNode, _b = _a.highlightStyle, fill = _b.fill, stroke = _b.stroke;\n        var updateRects = this.rectSelection.setData(selectionData);\n        updateRects.exit.remove();\n        var enterRects = updateRects.enter.append(Rect).each(function (rect) {\n            rect.tag = ColumnSeriesNodeTag.Column;\n            rect.crisp = true;\n        });\n        var rectSelection = updateRects.merge(enterRects);\n        rectSelection.each(function (rect, datum) {\n            rect.x = datum.x;\n            rect.y = datum.y;\n            rect.width = datum.width;\n            rect.height = datum.height;\n            rect.fill = rect === highlightedNode && fill !== undefined ? fill : datum.fill;\n            rect.stroke = rect === highlightedNode && stroke !== undefined ? stroke : datum.stroke;\n            rect.fillOpacity = fillOpacity;\n            rect.strokeOpacity = strokeOpacity;\n            rect.strokeWidth = datum.strokeWidth;\n            rect.fillShadow = shadow;\n            rect.visible = datum.height > 0; // prevent stroke from rendering for zero height columns\n        });\n        this.rectSelection = rectSelection;\n    };\n    ColumnSeries.prototype.updateTextSelection = function (selectionData) {\n        var labelEnabled = this.label.enabled;\n        var updateTexts = this.textSelection.setData(selectionData);\n        updateTexts.exit.remove();\n        var enterTexts = updateTexts.enter.append(Text).each(function (text) {\n            text.tag = ColumnSeriesNodeTag.Label;\n            text.pointerEvents = PointerEvents.None;\n            text.textAlign = 'center';\n            text.textBaseline = 'middle';\n        });\n        var textSelection = updateTexts.merge(enterTexts);\n        textSelection.each(function (text, datum) {\n            var label = datum.label;\n            if (label && labelEnabled) {\n                text.fontStyle = label.fontStyle;\n                text.fontWeight = label.fontWeight;\n                text.fontSize = label.fontSize;\n                text.fontFamily = label.fontFamily;\n                text.text = label.text;\n                text.x = label.x;\n                text.y = label.y;\n                text.fill = label.fill;\n                text.visible = true;\n            }\n            else {\n                text.visible = false;\n            }\n        });\n        this.textSelection = textSelection;\n    };\n    ColumnSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var xKey = this.xKey;\n        var yKey = nodeDatum.yKey;\n        if (!xKey || !yKey) {\n            return '';\n        }\n        var _a = this, xName = _a.xName, yKeys = _a.yKeys, yNames = _a.yNames, fills = _a.fills, tooltipRenderer = _a.tooltipRenderer;\n        var datum = nodeDatum.seriesDatum;\n        var yKeyIndex = yKeys.indexOf(yKey);\n        var yName = yNames[yKeyIndex];\n        var color = fills[yKeyIndex % fills.length];\n        var title = yName;\n        if (tooltipRenderer) {\n            return tooltipRenderer({\n                datum: datum,\n                xKey: xKey,\n                xName: xName,\n                yKey: yKey,\n                yName: yName,\n                title: title,\n                color: color,\n            });\n        }\n        else {\n            var titleStyle = \"style=\\\"color: white; background-color: \" + color + \"\\\"\";\n            var titleString = title ? \"<div class=\\\"title\\\" \" + titleStyle + \">\" + title + \"</div>\" : '';\n            var xValue = datum[xKey];\n            var yValue = datum[yKey];\n            var xString = typeof xValue === 'number' ? toFixed(xValue) : String(xValue);\n            var yString = typeof yValue === 'number' ? toFixed(yValue) : String(yValue);\n            return titleString + \"<div class=\\\"content\\\">\" + xString + \": \" + yString + \"</div>\";\n        }\n    };\n    ColumnSeries.prototype.listSeriesItems = function (data) {\n        var _this = this;\n        if (this.data.length && this.xKey && this.yKeys.length) {\n            var _a = this, fills_1 = _a.fills, strokes_1 = _a.strokes, id_1 = _a.id;\n            this.yKeys.forEach(function (yKey, index) {\n                data.push({\n                    id: id_1,\n                    itemId: yKey,\n                    enabled: _this.yKeyEnabled.get(yKey) || false,\n                    label: {\n                        text: _this.yNames[index] || _this.yKeys[index]\n                    },\n                    marker: {\n                        fill: fills_1[index % fills_1.length],\n                        stroke: strokes_1[index % strokes_1.length],\n                        fillOpacity: _this.fillOpacity,\n                        strokeOpacity: _this.strokeOpacity\n                    }\n                });\n            });\n        }\n    };\n    ColumnSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n        this.yKeyEnabled.set(itemId, enabled);\n        var enabledYKeys = [];\n        this.yKeyEnabled.forEach(function (enabled, yKey) {\n            if (enabled) {\n                enabledYKeys.push(yKey);\n            }\n        });\n        this.groupScale.domain = enabledYKeys;\n        this.scheduleData();\n    };\n    ColumnSeries.className = 'ColumnSeries';\n    __decorate$T([\n        reactive(['dataChange'])\n    ], ColumnSeries.prototype, \"fills\", void 0);\n    __decorate$T([\n        reactive(['dataChange'])\n    ], ColumnSeries.prototype, \"strokes\", void 0);\n    __decorate$T([\n        reactive(['layoutChange'])\n    ], ColumnSeries.prototype, \"fillOpacity\", void 0);\n    __decorate$T([\n        reactive(['layoutChange'])\n    ], ColumnSeries.prototype, \"strokeOpacity\", void 0);\n    __decorate$T([\n        reactive(['layoutChange'])\n    ], ColumnSeries.prototype, \"flipXY\", void 0);\n    return ColumnSeries;\n}(CartesianSeries));\n\nvar __extends$11 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays$5 = (undefined && undefined.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar AreaSeries = /** @class */ (function (_super) {\n    __extends$11(AreaSeries, _super);\n    function AreaSeries() {\n        var _this = _super.call(this) || this;\n        _this.areaGroup = _this.group.appendChild(new Group);\n        _this.strokeGroup = _this.group.appendChild(new Group);\n        _this.markerGroup = _this.group.appendChild(new Group);\n        _this.areaSelection = Selection.select(_this.areaGroup).selectAll();\n        _this.strokeSelection = Selection.select(_this.strokeGroup).selectAll();\n        _this.markerSelection = Selection.select(_this.markerGroup).selectAll();\n        /**\n         * The assumption is that the values will be reset (to `true`)\n         * in the {@link yKeys} setter.\n         */\n        _this.yKeyEnabled = new Map();\n        _this.marker = new CartesianSeriesMarker();\n        _this._fills = borneo.fills;\n        _this._strokes = borneo.strokes;\n        _this._fillOpacity = 1;\n        _this._strokeOpacity = 1;\n        _this.xData = [];\n        _this.yData = [];\n        _this.yDomain = [];\n        _this.directionKeys = {\n            x: ['xKey'],\n            y: ['yKeys']\n        };\n        _this._xKey = '';\n        _this._xName = '';\n        _this._yKeys = [];\n        _this._yNames = [];\n        _this._strokeWidth = 2;\n        _this.highlightStyle = {\n            fill: 'yellow'\n        };\n        _this.marker.enabled = false;\n        _this.marker.addPropertyListener('type', function () { return _this.onMarkerTypeChange(); });\n        _this.marker.addEventListener('change', function () { return _this.update(); });\n        return _this;\n    }\n    AreaSeries.prototype.onMarkerTypeChange = function () {\n        this.markerSelection = this.markerSelection.setData([]);\n        this.markerSelection.exit.remove();\n        this.update();\n        this.fireEvent({ type: 'legendChange' });\n    };\n    Object.defineProperty(AreaSeries.prototype, \"fills\", {\n        get: function () {\n            return this._fills;\n        },\n        set: function (values) {\n            this._fills = values;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AreaSeries.prototype, \"strokes\", {\n        get: function () {\n            return this._strokes;\n        },\n        set: function (values) {\n            this._strokes = values;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AreaSeries.prototype, \"fillOpacity\", {\n        get: function () {\n            return this._fillOpacity;\n        },\n        set: function (value) {\n            if (this._fillOpacity !== value) {\n                this._fillOpacity = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AreaSeries.prototype, \"strokeOpacity\", {\n        get: function () {\n            return this._strokeOpacity;\n        },\n        set: function (value) {\n            if (this._strokeOpacity !== value) {\n                this._strokeOpacity = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AreaSeries.prototype, \"xKey\", {\n        get: function () {\n            return this._xKey;\n        },\n        set: function (value) {\n            if (this._xKey !== value) {\n                this._xKey = value;\n                this.xData = [];\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AreaSeries.prototype, \"xName\", {\n        get: function () {\n            return this._xName;\n        },\n        set: function (value) {\n            this._xName = value;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AreaSeries.prototype, \"yKeys\", {\n        get: function () {\n            return this._yKeys;\n        },\n        set: function (values) {\n            this._yKeys = values;\n            this.yData = [];\n            var yKeyEnabled = this.yKeyEnabled;\n            yKeyEnabled.clear();\n            values.forEach(function (key) { return yKeyEnabled.set(key, true); });\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AreaSeries.prototype, \"yNames\", {\n        get: function () {\n            return this._yNames;\n        },\n        set: function (values) {\n            this._yNames = values;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AreaSeries.prototype, \"normalizedTo\", {\n        get: function () {\n            return this._normalizedTo;\n        },\n        set: function (value) {\n            var absValue = value ? Math.abs(value) : undefined;\n            if (this._normalizedTo !== absValue) {\n                this._normalizedTo = absValue;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AreaSeries.prototype, \"strokeWidth\", {\n        get: function () {\n            return this._strokeWidth;\n        },\n        set: function (value) {\n            if (this._strokeWidth !== value) {\n                this._strokeWidth = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AreaSeries.prototype, \"shadow\", {\n        get: function () {\n            return this._shadow;\n        },\n        set: function (value) {\n            if (this._shadow !== value) {\n                this._shadow = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AreaSeries.prototype.highlightNode = function (node) {\n        if (!(node instanceof Marker)) {\n            return;\n        }\n        this.highlightedNode = node;\n        this.scheduleLayout();\n    };\n    AreaSeries.prototype.dehighlightNode = function () {\n        this.highlightedNode = undefined;\n        this.scheduleLayout();\n    };\n    AreaSeries.prototype.processData = function () {\n        var _a = this, xKey = _a.xKey, yKeys = _a.yKeys, yKeyEnabled = _a.yKeyEnabled;\n        var data = xKey && yKeys.length ? this.data : [];\n        // if (!(chart && chart.xAxis && chart.yAxis)) {\n        //     return false;\n        // }\n        // If the data is an array of rows like so:\n        //\n        // [{\n        //   xKy: 'Jan',\n        //   yKey1: 5,\n        //   yKey2: 7,\n        //   yKey3: -9,\n        // }, {\n        //   xKey: 'Feb',\n        //   yKey1: 10,\n        //   yKey2: -15,\n        //   yKey3: 20\n        // }]\n        //\n        var keysFound = true; // only warn once\n        this.xData = data.map(function (datum) {\n            if (keysFound && !(xKey in datum)) {\n                keysFound = false;\n                console.warn(\"The key '\" + xKey + \"' was not found in the data: \", datum);\n            }\n            return datum[xKey];\n        });\n        this.yData = data.map(function (datum) { return yKeys.map(function (yKey) {\n            if (keysFound && !(yKey in datum)) {\n                keysFound = false;\n                console.warn(\"The key '\" + yKey + \"' was not found in the data: \", datum);\n            }\n            var value = datum[yKey];\n            return isFinite(value) && yKeyEnabled.get(yKey) ? Math.abs(value) : 0;\n        }); });\n        // xData: ['Jan', 'Feb']\n        //\n        // yData: [\n        //   [5, 7, -9],\n        //   [10, -15, 20]\n        // ]\n        var _b = this, yData = _b.yData, normalizedTo = _b.normalizedTo;\n        var ySums = yData.map(function (values) { return sumPositiveValues(values); }); // used for normalization\n        var yMin;\n        var yMax;\n        if (normalizedTo && isFinite(normalizedTo)) {\n            yMin = 0;\n            yMax = normalizedTo;\n            yData.forEach(function (stack, i) { return stack.forEach(function (y, j) { return stack[j] = y / ySums[i] * normalizedTo; }); });\n        }\n        else {\n            // Find the height of each stack in the positive and negative directions,\n            // then find the tallest stacks in both directions.\n            yMin = Math.min.apply(Math, __spreadArrays$5([0], yData.map(function (values) { return values.reduce(function (min, value) { return value < 0 ? min - value : min; }, 0); })));\n            yMax = Math.max.apply(Math, yData.map(function (values) { return values.reduce(function (max, value) { return value > 0 ? max + value : max; }, 0); }));\n        }\n        if (yMin === 0 && yMax === 0) {\n            yMax = 1;\n        }\n        this.yDomain = this.fixNumericExtent([yMin, yMax], 'y');\n        this.fireEvent({ type: 'dataProcessed' });\n        return true;\n    };\n    AreaSeries.prototype.getDomain = function (direction) {\n        if (direction === ChartAxisDirection.X) {\n            return this.xData;\n        }\n        else {\n            return this.yDomain;\n        }\n    };\n    AreaSeries.prototype.update = function () {\n        var _a = this, visible = _a.visible, chart = _a.chart, xAxis = _a.xAxis, yAxis = _a.yAxis, xData = _a.xData, yData = _a.yData;\n        this.group.visible = visible && !!(xData.length && yData.length);\n        if (!xAxis || !yAxis || !visible || !chart || chart.layoutPending || chart.dataPending || !xData.length || !yData.length) {\n            return;\n        }\n        var _b = this.generateSelectionData(), areaSelectionData = _b.areaSelectionData, markerSelectionData = _b.markerSelectionData;\n        this.updateAreaSelection(areaSelectionData);\n        this.updateStrokeSelection(areaSelectionData);\n        this.updateMarkerSelection(markerSelectionData);\n    };\n    AreaSeries.prototype.generateSelectionData = function () {\n        var _a = this, yKeys = _a.yKeys, yNames = _a.yNames, data = _a.data, xData = _a.xData, yData = _a.yData, marker = _a.marker, fills = _a.fills, strokes = _a.strokes, xScale = _a.xAxis.scale, yScale = _a.yAxis.scale;\n        var xOffset = (xScale.bandwidth || 0) / 2;\n        var yOffset = (yScale.bandwidth || 0) / 2;\n        var areaSelectionData = [];\n        var markerSelectionData = [];\n        var last = xData.length * 2 - 1;\n        xData.forEach(function (xDatum, i) {\n            var yDatum = yData[i];\n            var seriesDatum = data[i];\n            var x = xScale.convert(xDatum) + xOffset;\n            var prev = 0;\n            yDatum.forEach(function (curr, j) {\n                var y = yScale.convert(prev + curr) + yOffset;\n                var yKey = yKeys[j];\n                var yValue = seriesDatum[yKey];\n                if (marker) {\n                    markerSelectionData.push({\n                        seriesDatum: seriesDatum,\n                        yValue: yValue,\n                        yKey: yKey,\n                        x: x,\n                        y: y,\n                        fill: fills[j % fills.length],\n                        stroke: strokes[j % strokes.length],\n                        text: yNames[j]\n                    });\n                }\n                var areaDatum = areaSelectionData[j] || (areaSelectionData[j] = { yKey: yKey, points: [] });\n                var areaPoints = areaDatum.points;\n                areaPoints[i] = { x: x, y: y };\n                areaPoints[last - i] = { x: x, y: yScale.convert(prev) + yOffset }; // bottom y\n                prev += curr;\n            });\n        });\n        return { areaSelectionData: areaSelectionData, markerSelectionData: markerSelectionData };\n    };\n    AreaSeries.prototype.updateAreaSelection = function (areaSelectionData) {\n        var _a = this, fills = _a.fills, fillOpacity = _a.fillOpacity, yKeyEnabled = _a.yKeyEnabled, shadow = _a.shadow;\n        var updateAreas = this.areaSelection.setData(areaSelectionData);\n        updateAreas.exit.remove();\n        var enterAreas = updateAreas.enter.append(Path)\n            .each(function (path) {\n            path.stroke = undefined;\n            path.pointerEvents = PointerEvents.None;\n        });\n        var areaSelection = updateAreas.merge(enterAreas);\n        areaSelection.each(function (shape, datum, index) {\n            var path = shape.path;\n            shape.fill = fills[index % fills.length];\n            shape.fillOpacity = fillOpacity;\n            shape.fillShadow = shadow;\n            shape.visible = !!yKeyEnabled.get(datum.yKey);\n            path.clear();\n            var points = datum.points;\n            points.forEach(function (_a, i) {\n                var x = _a.x, y = _a.y;\n                if (i > 0) {\n                    path.lineTo(x, y);\n                }\n                else {\n                    path.moveTo(x, y);\n                }\n            });\n            path.closePath();\n        });\n        this.areaSelection = areaSelection;\n    };\n    AreaSeries.prototype.updateStrokeSelection = function (areaSelectionData) {\n        var _a = this, strokes = _a.strokes, strokeWidth = _a.strokeWidth, strokeOpacity = _a.strokeOpacity, data = _a.data, yKeyEnabled = _a.yKeyEnabled;\n        var updateStrokes = this.strokeSelection.setData(areaSelectionData);\n        updateStrokes.exit.remove();\n        var enterStrokes = updateStrokes.enter.append(Path)\n            .each(function (path) {\n            path.fill = undefined;\n            path.lineJoin = path.lineCap = 'round';\n            path.pointerEvents = PointerEvents.None;\n        });\n        var strokeSelection = updateStrokes.merge(enterStrokes);\n        strokeSelection.each(function (shape, datum, index) {\n            var path = shape.path;\n            shape.stroke = strokes[index % strokes.length];\n            shape.strokeWidth = strokeWidth;\n            shape.visible = !!yKeyEnabled.get(datum.yKey);\n            shape.strokeOpacity = strokeOpacity;\n            path.clear();\n            var points = datum.points;\n            // The stroke doesn't go all the way around the fill, only on top,\n            // that's why we iterate until `data.length` (rather than `points.length`) and stop.\n            for (var i = 0; i < data.length; i++) {\n                var _a = points[i], x = _a.x, y = _a.y;\n                if (i > 0) {\n                    path.lineTo(x, y);\n                }\n                else {\n                    path.moveTo(x, y);\n                }\n            }\n        });\n        this.strokeSelection = strokeSelection;\n    };\n    AreaSeries.prototype.updateMarkerSelection = function (markerSelectionData) {\n        var _a = this, marker = _a.marker, xKey = _a.xKey;\n        var Marker = marker.type;\n        if (!Marker) {\n            return;\n        }\n        var markerFormatter = marker.formatter;\n        var markerStrokeWidth = marker.strokeWidth !== undefined ? marker.strokeWidth : this.strokeWidth;\n        var markerSize = marker.size;\n        var _b = this, yKeyEnabled = _b.yKeyEnabled, highlightedNode = _b.highlightedNode;\n        var _c = this.highlightStyle, highlightFill = _c.fill, highlightStroke = _c.stroke;\n        var updateMarkers = this.markerSelection.setData(markerSelectionData);\n        updateMarkers.exit.remove();\n        var enterMarkers = updateMarkers.enter.append(Marker);\n        var markerSelection = updateMarkers.merge(enterMarkers);\n        markerSelection.each(function (node, datum) {\n            var isHighlightedNode = node === highlightedNode;\n            var markerFill = isHighlightedNode && highlightFill !== undefined ? highlightFill : marker.fill || datum.fill;\n            var markerStroke = isHighlightedNode && highlightStroke !== undefined ? highlightStroke : marker.stroke || datum.stroke;\n            var markerFormat = undefined;\n            if (markerFormatter) {\n                markerFormat = markerFormatter({\n                    datum: datum.seriesDatum,\n                    xKey: xKey,\n                    yKey: datum.yKey,\n                    fill: markerFill,\n                    stroke: markerStroke,\n                    strokeWidth: markerStrokeWidth,\n                    size: markerSize,\n                    highlighted: isHighlightedNode\n                });\n            }\n            node.fill = markerFormat && markerFormat.fill || markerFill;\n            node.stroke = markerFormat && markerFormat.stroke || markerStroke;\n            node.strokeWidth = markerFormat && markerFormat.strokeWidth !== undefined\n                ? markerFormat.strokeWidth\n                : markerStrokeWidth;\n            node.size = markerFormat && markerFormat.size !== undefined\n                ? markerFormat.size\n                : markerSize;\n            node.translationX = datum.x;\n            node.translationY = datum.y;\n            node.visible = marker.enabled && node.size > 0 && !!yKeyEnabled.get(datum.yKey);\n        });\n        this.markerSelection = markerSelection;\n    };\n    AreaSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var xKey = this.xKey;\n        var yKey = nodeDatum.yKey;\n        if (!xKey || !yKey) {\n            return '';\n        }\n        var _a = this, xName = _a.xName, yKeys = _a.yKeys, yNames = _a.yNames, fills = _a.fills, tooltipRenderer = _a.tooltipRenderer;\n        var text = nodeDatum.text;\n        var yKeyIndex = yKeys.indexOf(yKey);\n        var yName = yNames[yKeyIndex];\n        var color = fills[yKeyIndex % fills.length];\n        if (tooltipRenderer) {\n            return tooltipRenderer({\n                datum: nodeDatum.seriesDatum,\n                xKey: xKey,\n                xName: xName,\n                yKey: yKey,\n                yName: yName,\n                title: text,\n                color: color,\n            });\n        }\n        else {\n            var titleStyle = \"style=\\\"color: white; background-color: \" + color + \"\\\"\";\n            var title = text ? \"<div class=\\\"title\\\" \" + titleStyle + \">\" + text + \"</div>\" : '';\n            var seriesDatum = nodeDatum.seriesDatum;\n            var xValue = seriesDatum[xKey];\n            var yValue = seriesDatum[yKey];\n            var xString = typeof xValue === 'number' ? toFixed(xValue) : String(xValue);\n            var yString = typeof yValue === 'number' ? toFixed(yValue) : String(yValue);\n            return title + \"<div class=\\\"content\\\">\" + xString + \": \" + yString + \"</div>\";\n        }\n    };\n    AreaSeries.prototype.listSeriesItems = function (data) {\n        var _a = this, id = _a.id, xKey = _a.xKey, yKeys = _a.yKeys, yNames = _a.yNames, yKeyEnabled = _a.yKeyEnabled, marker = _a.marker, fills = _a.fills, strokes = _a.strokes, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity;\n        if (this.data.length && xKey && yKeys.length) {\n            yKeys.forEach(function (yKey, index) {\n                data.push({\n                    id: id,\n                    itemId: yKey,\n                    enabled: yKeyEnabled.get(yKey) || false,\n                    label: {\n                        text: yNames[index] || yKeys[index]\n                    },\n                    marker: {\n                        type: marker.type,\n                        fill: marker.fill || fills[index % fills.length],\n                        stroke: marker.stroke || strokes[index % strokes.length],\n                        fillOpacity: fillOpacity,\n                        strokeOpacity: strokeOpacity\n                    }\n                });\n            });\n        }\n    };\n    AreaSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n        this.yKeyEnabled.set(itemId, enabled);\n        this.scheduleData();\n    };\n    AreaSeries.className = 'AreaSeries';\n    return AreaSeries;\n}(CartesianSeries));\n\nvar __extends$12 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Sector = /** @class */ (function (_super) {\n    __extends$12(Sector, _super);\n    function Sector() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.path = new Path2D();\n        _this._dirtyPath = true;\n        _this._centerX = 0;\n        _this._centerY = 0;\n        _this._centerOffset = 0;\n        _this._innerRadius = 10;\n        _this._outerRadius = 20;\n        _this._startAngle = 0;\n        _this._endAngle = Math.PI * 2;\n        _this._angleOffset = 0;\n        return _this;\n    }\n    Object.defineProperty(Sector.prototype, \"dirtyPath\", {\n        get: function () {\n            return this._dirtyPath;\n        },\n        set: function (value) {\n            if (this._dirtyPath !== value) {\n                this._dirtyPath = value;\n                if (value) {\n                    this.dirty = true;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"centerX\", {\n        get: function () {\n            return this._centerX;\n        },\n        set: function (value) {\n            if (this._centerX !== value) {\n                this._centerX = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"centerY\", {\n        get: function () {\n            return this._centerY;\n        },\n        set: function (value) {\n            if (this._centerY !== value) {\n                this._centerY = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"centerOffset\", {\n        get: function () {\n            return this._centerOffset;\n        },\n        set: function (value) {\n            if (this._centerOffset !== value) {\n                this._centerOffset = Math.max(0, value);\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"innerRadius\", {\n        get: function () {\n            return this._innerRadius;\n        },\n        set: function (value) {\n            if (this._innerRadius !== value) {\n                this._innerRadius = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"outerRadius\", {\n        get: function () {\n            return this._outerRadius;\n        },\n        set: function (value) {\n            if (this._outerRadius !== value) {\n                this._outerRadius = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"startAngle\", {\n        get: function () {\n            return this._startAngle;\n        },\n        set: function (value) {\n            if (this._startAngle !== value) {\n                this._startAngle = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"endAngle\", {\n        get: function () {\n            return this._endAngle;\n        },\n        set: function (value) {\n            if (this._endAngle !== value) {\n                this._endAngle = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"angleOffset\", {\n        get: function () {\n            return this._angleOffset;\n        },\n        set: function (value) {\n            if (this._angleOffset !== value) {\n                this._angleOffset = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Sector.prototype.computeBBox = function () {\n        var radius = this.outerRadius;\n        return new BBox(this.centerX - radius, this.centerY - radius, radius * 2, radius * 2);\n    };\n    Sector.prototype.isPointInPath = function (x, y) {\n        var point = this.transformPoint(x, y);\n        return this.path.isPointInPath(point.x, point.y);\n    };\n    Sector.prototype.isPointInStroke = function (x, y) {\n        return false;\n    };\n    Object.defineProperty(Sector.prototype, \"fullPie\", {\n        get: function () {\n            return isEqual(normalizeAngle360(this.startAngle), normalizeAngle360(this.endAngle));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Sector.prototype.updatePath = function () {\n        if (!this.dirtyPath) {\n            return;\n        }\n        var path = this.path;\n        var angleOffset = this.angleOffset;\n        var startAngle = Math.min(this.startAngle, this.endAngle) + angleOffset;\n        var endAngle = Math.max(this.startAngle, this.endAngle) + angleOffset;\n        var midAngle = (startAngle + endAngle) * 0.5;\n        var innerRadius = Math.min(this.innerRadius, this.outerRadius);\n        var outerRadius = Math.max(this.innerRadius, this.outerRadius);\n        var centerOffset = this.centerOffset;\n        var fullPie = this.fullPie;\n        // const tipOffset = radiiGap / 3;\n        // const showTip = radiiGap < outerRadius / 2;\n        var centerX = this.centerX;\n        var centerY = this.centerY;\n        path.clear();\n        if (centerOffset) {\n            centerX += centerOffset * Math.cos(midAngle);\n            centerY += centerOffset * Math.sin(midAngle);\n        }\n        if (!fullPie) {\n            path.moveTo(centerX + innerRadius * Math.cos(startAngle), centerY + innerRadius * Math.sin(startAngle));\n            // if (showTip) {\n            //     path.lineTo(\n            //         centerX + 0.5 * (innerRadius + outerRadius) * Math.cos(startAngle) + tipOffset * Math.cos(startAngle + Math.PI / 2),\n            //         centerY + 0.5 * (innerRadius + outerRadius) * Math.sin(startAngle) + tipOffset * Math.sin(startAngle + Math.PI / 2)\n            //     );\n            // }\n            path.lineTo(centerX + outerRadius * Math.cos(startAngle), centerY + outerRadius * Math.sin(startAngle));\n        }\n        path.cubicArc(centerX, centerY, outerRadius, outerRadius, 0, startAngle, endAngle, 0);\n        // path[fullPie ? 'moveTo' : 'lineTo'](\n        //     centerX + innerRadius * Math.cos(endAngle),\n        //     centerY + innerRadius * Math.sin(endAngle)\n        // );\n        if (fullPie) {\n            path.moveTo(centerX + innerRadius * Math.cos(endAngle), centerY + innerRadius * Math.sin(endAngle));\n        }\n        else {\n            // if (showTip) {\n            //     path.lineTo(\n            //         centerX + 0.5 * (innerRadius + outerRadius) * Math.cos(endAngle) + tipOffset * Math.cos(endAngle + Math.PI / 2),\n            //         centerY + 0.5 * (innerRadius + outerRadius) * Math.sin(endAngle) + tipOffset * Math.sin(endAngle + Math.PI / 2)\n            //     );\n            // }\n            // Temp workaround for https://bugs.chromium.org/p/chromium/issues/detail?id=993330\n            // Revert this commit when fixed ^^.\n            var x = centerX + innerRadius * Math.cos(endAngle);\n            path.lineTo(Math.abs(x) < 1e-8 ? 0 : x, centerY + innerRadius * Math.sin(endAngle));\n        }\n        path.cubicArc(centerX, centerY, innerRadius, innerRadius, 0, endAngle, startAngle, 1);\n        path.closePath();\n        this.dirtyPath = false;\n    };\n    Sector.prototype.render = function (ctx) {\n        if (this.dirtyTransform) {\n            this.computeTransformMatrix();\n        }\n        this.matrix.toContext(ctx);\n        this.updatePath();\n        this.scene.appendPath(this.path);\n        this.fillStroke(ctx);\n        this.dirty = false;\n    };\n    Sector.className = 'Sector';\n    return Sector;\n}(Shape));\n\nvar Color = /** @class */ (function () {\n    /**\n     * Every color component should be in the [0, 1] range.\n     * Some easing functions (such as elastic easing) can overshoot the target value by some amount.\n     * So, when animating colors, if the source or target color components are already near\n     * or at the edge of the allowed [0, 1] range, it is possible for the intermediate color\n     * component value to end up outside of that range mid-animation. For this reason the constructor\n     * performs range checking/constraining.\n     * @param r Red component.\n     * @param g Green component.\n     * @param b Blue component.\n     * @param a Alpha (opacity) component.\n     */\n    function Color(r, g, b, a) {\n        if (a === void 0) { a = 1; }\n        // NaN is treated as 0.\n        this.r = Math.min(1, Math.max(0, r || 0));\n        this.g = Math.min(1, Math.max(0, g || 0));\n        this.b = Math.min(1, Math.max(0, b || 0));\n        this.a = Math.min(1, Math.max(0, a || 0));\n    }\n    /**\n     * The given string can be in one of the following formats:\n     * - #rgb\n     * - #rrggbb\n     * - rgb(r, g, b)\n     * - rgba(r, g, b, a)\n     * - CSS color name such as 'white', 'orange', 'cyan', etc.\n     * @param str\n     */\n    Color.fromString = function (str) {\n        // hexadecimal notation\n        if (str.indexOf('#') >= 0) { // there can be some leading whitespace\n            return Color.fromHexString(str);\n        }\n        // color name\n        var hex = Color.nameToHex[str];\n        if (hex) {\n            return Color.fromHexString(hex);\n        }\n        // rgb(a) notation\n        if (str.indexOf('rgb') >= 0) {\n            return Color.fromRgbaString(str);\n        }\n        throw new Error(\"Invalid color string: '\" + str + \"'\");\n    };\n    // Using separate RegExp for the short hex notation because strings like `#abcd`\n    // are matched as ['#abcd', 'ab', 'c', 'd', undefined] when the `{1,2}` quantifier is used.\n    Color.fromHexString = function (str) {\n        var values = str.match(Color.hexRe);\n        if (values) {\n            var r = parseInt(values[1], 16);\n            var g = parseInt(values[2], 16);\n            var b = parseInt(values[3], 16);\n            var a = values[4] !== undefined ? parseInt(values[4], 16) : 255;\n            return new Color(r / 255, g / 255, b / 255, a / 255);\n        }\n        values = str.match(Color.shortHexRe);\n        if (values) {\n            var r = parseInt(values[1], 16);\n            var g = parseInt(values[2], 16);\n            var b = parseInt(values[3], 16);\n            var a = values[4] !== undefined ? parseInt(values[4], 16) : 15;\n            r += r * 16;\n            g += g * 16;\n            b += b * 16;\n            a += a * 16;\n            return new Color(r / 255, g / 255, b / 255, a / 255);\n        }\n        throw new Error(\"Malformed hexadecimal color string: '\" + str + \"'\");\n    };\n    Color.fromRgbaString = function (str) {\n        var values = str.match(Color.rgbRe);\n        if (values) {\n            return new Color(+values[1] / 255, +values[2] / 255, +values[3] / 255);\n        }\n        values = str.match(Color.rgbaRe);\n        if (values) {\n            return new Color(+values[1] / 255, +values[2] / 255, +values[3] / 255, +values[4]);\n        }\n        throw new Error(\"Malformed rgb/rgba color string: '\" + str + \"'\");\n    };\n    Color.fromArray = function (arr) {\n        if (arr.length === 4) {\n            return new Color(arr[0], arr[1], arr[2], arr[3]);\n        }\n        if (arr.length === 3) {\n            return new Color(arr[0], arr[1], arr[2]);\n        }\n        throw new Error('The given array should contain 3 or 4 color components (numbers).');\n    };\n    Color.fromHSB = function (h, s, b, alpha) {\n        if (alpha === void 0) { alpha = 1; }\n        var rgb = Color.HSBtoRGB(h, s, b);\n        return new Color(rgb[0], rgb[1], rgb[2], alpha);\n    };\n    Color.padHex = function (str) {\n        // Can't use `padStart(2, '0')` here because of IE.\n        return str.length === 1 ? '0' + str : str;\n    };\n    Color.prototype.toHexString = function () {\n        var hex = '#'\n            + Color.padHex(Math.round(this.r * 255).toString(16))\n            + Color.padHex(Math.round(this.g * 255).toString(16))\n            + Color.padHex(Math.round(this.b * 255).toString(16));\n        if (this.a < 1) {\n            hex += Color.padHex(Math.round(this.a * 255).toString(16));\n        }\n        return hex;\n    };\n    Color.prototype.toRgbaString = function (fractionDigits) {\n        if (fractionDigits === void 0) { fractionDigits = 3; }\n        var components = [\n            Math.round(this.r * 255),\n            Math.round(this.g * 255),\n            Math.round(this.b * 255)\n        ];\n        var k = Math.pow(10, fractionDigits);\n        if (this.a !== 1) {\n            components.push(Math.round(this.a * k) / k);\n            return \"rgba(\" + components.join(', ') + \")\";\n        }\n        return \"rgb(\" + components.join(', ') + \")\";\n    };\n    Color.prototype.toString = function () {\n        if (this.a === 1) {\n            return this.toHexString();\n        }\n        return this.toRgbaString();\n    };\n    Color.prototype.toHSB = function () {\n        return Color.RGBtoHSB(this.r, this.g, this.b);\n    };\n    /**\n     * Converts the given RGB triple to an array of HSB (HSV) components.\n     * The hue component will be `NaN` for achromatic colors.\n     */\n    Color.RGBtoHSB = function (r, g, b) {\n        var min = Math.min(r, g, b);\n        var max = Math.max(r, g, b);\n        var S = max !== 0 ? (max - min) / max : 0;\n        var H = NaN;\n        // min == max, means all components are the same\n        // and the color is a shade of gray with no hue (H is NaN)\n        if (min !== max) {\n            var delta = max - min;\n            var rc = (max - r) / delta;\n            var gc = (max - g) / delta;\n            var bc = (max - b) / delta;\n            if (r === max) {\n                H = bc - gc;\n            }\n            else if (g === max) {\n                H = 2.0 + rc - bc;\n            }\n            else {\n                H = 4.0 + gc - rc;\n            }\n            H /= 6.0;\n            if (H < 0) {\n                H = H + 1.0;\n            }\n        }\n        return [H * 360, S, max];\n    };\n    /**\n     * Converts the given HSB (HSV) triple to an array of RGB components.\n     */\n    Color.HSBtoRGB = function (H, S, B) {\n        if (isNaN(H)) {\n            H = 0;\n        }\n        H = (((H % 360) + 360) % 360) / 360; // normalize hue to [0, 360] interval, then scale to [0, 1]\n        var r = 0;\n        var g = 0;\n        var b = 0;\n        if (S === 0) {\n            r = g = b = B;\n        }\n        else {\n            var h = (H - Math.floor(H)) * 6;\n            var f = h - Math.floor(h);\n            var p = B * (1 - S);\n            var q = B * (1 - S * f);\n            var t = B * (1 - (S * (1 - f)));\n            switch (h >> 0) { // discard the floating point part of the number\n                case 0:\n                    r = B;\n                    g = t;\n                    b = p;\n                    break;\n                case 1:\n                    r = q;\n                    g = B;\n                    b = p;\n                    break;\n                case 2:\n                    r = p;\n                    g = B;\n                    b = t;\n                    break;\n                case 3:\n                    r = p;\n                    g = q;\n                    b = B;\n                    break;\n                case 4:\n                    r = t;\n                    g = p;\n                    b = B;\n                    break;\n                case 5:\n                    r = B;\n                    g = p;\n                    b = q;\n                    break;\n            }\n        }\n        return [r, g, b];\n    };\n    Color.prototype.derive = function (hueShift, saturationFactor, brightnessFactor, opacityFactor) {\n        var hsb = Color.RGBtoHSB(this.r, this.g, this.b);\n        var b = hsb[2];\n        if (b == 0 && brightnessFactor > 1.0) {\n            b = 0.05;\n        }\n        var h = (((hsb[0] + hueShift) % 360) + 360) % 360;\n        var s = Math.max(Math.min(hsb[1] * saturationFactor, 1.0), 0.0);\n        b = Math.max(Math.min(b * brightnessFactor, 1.0), 0.0);\n        var a = Math.max(Math.min(this.a * opacityFactor, 1.0), 0.0);\n        var rgba = Color.HSBtoRGB(h, s, b);\n        rgba.push(a);\n        return Color.fromArray(rgba);\n    };\n    Color.prototype.brighter = function () {\n        return this.derive(0, 1.0, 1.0 / 0.7, 1.0);\n    };\n    Color.prototype.darker = function () {\n        return this.derive(0, 1.0, 0.7, 1.0);\n    };\n    // See https://drafts.csswg.org/css-color/#hex-notation\n    Color.hexRe = /\\s*#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?\\s*$/;\n    Color.shortHexRe = /\\s*#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])?\\s*$/;\n    Color.rgbRe = /\\s*rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)\\s*/;\n    Color.rgbaRe = /\\s*rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*([.\\d]+)\\)\\s*/;\n    /**\n     * CSS Color Module Level 4:\n     * https://drafts.csswg.org/css-color/#named-colors\n     */\n    Color.nameToHex = Object.freeze({\n        aliceblue: '#F0F8FF',\n        antiquewhite: '#FAEBD7',\n        aqua: '#00FFFF',\n        aquamarine: '#7FFFD4',\n        azure: '#F0FFFF',\n        beige: '#F5F5DC',\n        bisque: '#FFE4C4',\n        black: '#000000',\n        blanchedalmond: '#FFEBCD',\n        blue: '#0000FF',\n        blueviolet: '#8A2BE2',\n        brown: '#A52A2A',\n        burlywood: '#DEB887',\n        cadetblue: '#5F9EA0',\n        chartreuse: '#7FFF00',\n        chocolate: '#D2691E',\n        coral: '#FF7F50',\n        cornflowerblue: '#6495ED',\n        cornsilk: '#FFF8DC',\n        crimson: '#DC143C',\n        cyan: '#00FFFF',\n        darkblue: '#00008B',\n        darkcyan: '#008B8B',\n        darkgoldenrod: '#B8860B',\n        darkgray: '#A9A9A9',\n        darkgreen: '#006400',\n        darkgrey: '#A9A9A9',\n        darkkhaki: '#BDB76B',\n        darkmagenta: '#8B008B',\n        darkolivegreen: '#556B2F',\n        darkorange: '#FF8C00',\n        darkorchid: '#9932CC',\n        darkred: '#8B0000',\n        darksalmon: '#E9967A',\n        darkseagreen: '#8FBC8F',\n        darkslateblue: '#483D8B',\n        darkslategray: '#2F4F4F',\n        darkslategrey: '#2F4F4F',\n        darkturquoise: '#00CED1',\n        darkviolet: '#9400D3',\n        deeppink: '#FF1493',\n        deepskyblue: '#00BFFF',\n        dimgray: '#696969',\n        dimgrey: '#696969',\n        dodgerblue: '#1E90FF',\n        firebrick: '#B22222',\n        floralwhite: '#FFFAF0',\n        forestgreen: '#228B22',\n        fuchsia: '#FF00FF',\n        gainsboro: '#DCDCDC',\n        ghostwhite: '#F8F8FF',\n        gold: '#FFD700',\n        goldenrod: '#DAA520',\n        gray: '#808080',\n        green: '#008000',\n        greenyellow: '#ADFF2F',\n        grey: '#808080',\n        honeydew: '#F0FFF0',\n        hotpink: '#FF69B4',\n        indianred: '#CD5C5C',\n        indigo: '#4B0082',\n        ivory: '#FFFFF0',\n        khaki: '#F0E68C',\n        lavender: '#E6E6FA',\n        lavenderblush: '#FFF0F5',\n        lawngreen: '#7CFC00',\n        lemonchiffon: '#FFFACD',\n        lightblue: '#ADD8E6',\n        lightcoral: '#F08080',\n        lightcyan: '#E0FFFF',\n        lightgoldenrodyellow: '#FAFAD2',\n        lightgray: '#D3D3D3',\n        lightgreen: '#90EE90',\n        lightgrey: '#D3D3D3',\n        lightpink: '#FFB6C1',\n        lightsalmon: '#FFA07A',\n        lightseagreen: '#20B2AA',\n        lightskyblue: '#87CEFA',\n        lightslategray: '#778899',\n        lightslategrey: '#778899',\n        lightsteelblue: '#B0C4DE',\n        lightyellow: '#FFFFE0',\n        lime: '#00FF00',\n        limegreen: '#32CD32',\n        linen: '#FAF0E6',\n        magenta: '#FF00FF',\n        maroon: '#800000',\n        mediumaquamarine: '#66CDAA',\n        mediumblue: '#0000CD',\n        mediumorchid: '#BA55D3',\n        mediumpurple: '#9370DB',\n        mediumseagreen: '#3CB371',\n        mediumslateblue: '#7B68EE',\n        mediumspringgreen: '#00FA9A',\n        mediumturquoise: '#48D1CC',\n        mediumvioletred: '#C71585',\n        midnightblue: '#191970',\n        mintcream: '#F5FFFA',\n        mistyrose: '#FFE4E1',\n        moccasin: '#FFE4B5',\n        navajowhite: '#FFDEAD',\n        navy: '#000080',\n        oldlace: '#FDF5E6',\n        olive: '#808000',\n        olivedrab: '#6B8E23',\n        orange: '#FFA500',\n        orangered: '#FF4500',\n        orchid: '#DA70D6',\n        palegoldenrod: '#EEE8AA',\n        palegreen: '#98FB98',\n        paleturquoise: '#AFEEEE',\n        palevioletred: '#DB7093',\n        papayawhip: '#FFEFD5',\n        peachpuff: '#FFDAB9',\n        peru: '#CD853F',\n        pink: '#FFC0CB',\n        plum: '#DDA0DD',\n        powderblue: '#B0E0E6',\n        purple: '#800080',\n        rebeccapurple: '#663399',\n        red: '#FF0000',\n        rosybrown: '#BC8F8F',\n        royalblue: '#4169E1',\n        saddlebrown: '#8B4513',\n        salmon: '#FA8072',\n        sandybrown: '#F4A460',\n        seagreen: '#2E8B57',\n        seashell: '#FFF5EE',\n        sienna: '#A0522D',\n        silver: '#C0C0C0',\n        skyblue: '#87CEEB',\n        slateblue: '#6A5ACD',\n        slategray: '#708090',\n        slategrey: '#708090',\n        snow: '#FFFAFA',\n        springgreen: '#00FF7F',\n        steelblue: '#4682B4',\n        tan: '#D2B48C',\n        teal: '#008080',\n        thistle: '#D8BFD8',\n        tomato: '#FF6347',\n        turquoise: '#40E0D0',\n        violet: '#EE82EE',\n        wheat: '#F5DEB3',\n        white: '#FFFFFF',\n        whitesmoke: '#F5F5F5',\n        yellow: '#FFFF00',\n        yellowgreen: '#9ACD32'\n    });\n    return Color;\n}());\n\nvar __extends$13 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$U = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PieSeriesNodeTag;\n(function (PieSeriesNodeTag) {\n    PieSeriesNodeTag[PieSeriesNodeTag[\"Sector\"] = 0] = \"Sector\";\n    PieSeriesNodeTag[PieSeriesNodeTag[\"Callout\"] = 1] = \"Callout\";\n    PieSeriesNodeTag[PieSeriesNodeTag[\"Label\"] = 2] = \"Label\";\n})(PieSeriesNodeTag || (PieSeriesNodeTag = {}));\nvar PieSeriesLabel = /** @class */ (function (_super) {\n    __extends$13(PieSeriesLabel, _super);\n    function PieSeriesLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.offset = 3; // from the callout line\n        _this.minAngle = 20; // in degrees\n        return _this;\n    }\n    __decorate$U([\n        reactive(['change'])\n    ], PieSeriesLabel.prototype, \"offset\", void 0);\n    __decorate$U([\n        reactive(['dataChange'])\n    ], PieSeriesLabel.prototype, \"minAngle\", void 0);\n    return PieSeriesLabel;\n}(Label));\nvar PieSeries = /** @class */ (function (_super) {\n    __extends$13(PieSeries, _super);\n    function PieSeries() {\n        var _this = _super.call(this) || this;\n        _this.radiusScale = new LinearScale();\n        _this.groupSelection = Selection.select(_this.group).selectAll();\n        /**\n         * The processed data that gets visualized.\n         */\n        _this.groupSelectionData = [];\n        _this.angleScale = (function () {\n            var scale = new LinearScale();\n            // Each slice is a ratio of the whole, where all ratios add up to 1.\n            scale.domain = [0, 1];\n            // Add 90 deg to start the first pie at 12 o'clock.\n            scale.range = [-Math.PI, Math.PI].map(function (angle) { return angle + Math.PI / 2; });\n            return scale;\n        })();\n        _this.dataEnabled = [];\n        /**\n         * Defaults to make the callout colors the same as {@link strokeStyle}.\n         */\n        _this._calloutColors = borneo.strokes;\n        _this._calloutStrokeWidth = 1;\n        _this._calloutLength = 10;\n        _this.label = new PieSeriesLabel();\n        _this._labelOffset = 3; // from the callout line\n        _this._labelFontSize = 12;\n        _this._labelFontFamily = 'Verdana, sans-serif';\n        _this._labelColor = 'black';\n        /**\n         * The key of the numeric field to use to determine the angle (for example,\n         * a pie slice angle).\n         */\n        _this._angleKey = '';\n        _this._angleName = '';\n        _this._fills = borneo.fills;\n        _this._strokes = borneo.strokes;\n        _this._fillOpacity = 1;\n        _this._strokeOpacity = 1;\n        /**\n         * The series rotation in degrees.\n         */\n        _this._rotation = 0;\n        _this._outerRadiusOffset = 0;\n        _this._innerRadiusOffset = 0;\n        _this._strokeWidth = 1;\n        _this.highlightStyle = {\n            fill: 'yellow'\n        };\n        _this.label.addEventListener('change', function () { return _this.scheduleLayout(); });\n        _this.label.addEventListener('dataChange', function () { return _this.scheduleData(); });\n        _this.addPropertyListener('data', function (event) {\n            event.source.dataEnabled = event.value.map(function () { return true; });\n        });\n        return _this;\n    }\n    Object.defineProperty(PieSeries.prototype, \"title\", {\n        get: function () {\n            return this._title;\n        },\n        set: function (value) {\n            var oldTitle = this._title;\n            if (oldTitle !== value) {\n                if (oldTitle) {\n                    oldTitle.removeEventListener('change', this.scheduleLayout);\n                    this.group.removeChild(oldTitle.node);\n                }\n                if (value) {\n                    value.node.textBaseline = 'bottom';\n                    value.addEventListener('change', this.scheduleLayout);\n                    this.group.appendChild(value.node);\n                }\n                this._title = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"calloutColors\", {\n        get: function () {\n            return this._calloutColors;\n        },\n        set: function (value) {\n            if (this._calloutColors !== value) {\n                this._calloutColors = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"calloutStrokeWidth\", {\n        get: function () {\n            return this._calloutStrokeWidth;\n        },\n        set: function (value) {\n            if (this._calloutStrokeWidth !== value) {\n                this._calloutStrokeWidth = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"calloutLength\", {\n        get: function () {\n            return this._calloutLength;\n        },\n        set: function (value) {\n            if (this._calloutLength !== value) {\n                this._calloutLength = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"labelOffset\", {\n        get: function () {\n            return this._labelOffset;\n        },\n        set: function (value) {\n            if (this._labelOffset !== value) {\n                this._labelOffset = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"labelFontStyle\", {\n        get: function () {\n            return this._labelFontStyle;\n        },\n        set: function (value) {\n            if (this._labelFontStyle !== value) {\n                this._labelFontStyle = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"labelFontWeight\", {\n        get: function () {\n            return this._labelFontWeight;\n        },\n        set: function (value) {\n            if (this._labelFontWeight !== value) {\n                this._labelFontWeight = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"labelFontSize\", {\n        get: function () {\n            return this._labelFontSize;\n        },\n        set: function (value) {\n            if (this._labelFontSize !== value) {\n                this._labelFontSize = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"labelFontFamily\", {\n        get: function () {\n            return this._labelFontFamily;\n        },\n        set: function (value) {\n            if (this._labelFontFamily !== value) {\n                this._labelFontFamily = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"labelColor\", {\n        get: function () {\n            return this._labelColor;\n        },\n        set: function (value) {\n            if (this._labelColor !== value) {\n                this._labelColor = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"angleKey\", {\n        get: function () {\n            return this._angleKey;\n        },\n        set: function (value) {\n            if (this._angleKey !== value) {\n                this._angleKey = value;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"angleName\", {\n        get: function () {\n            return this._angleName;\n        },\n        set: function (value) {\n            if (this._angleName !== value) {\n                this._angleName = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"radiusKey\", {\n        get: function () {\n            return this._radiusKey;\n        },\n        set: function (value) {\n            if (this._radiusKey !== value) {\n                this._radiusKey = value;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"radiusName\", {\n        get: function () {\n            return this._radiusName;\n        },\n        set: function (value) {\n            if (this._radiusName !== value) {\n                this._radiusName = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"labelKey\", {\n        get: function () {\n            return this._labelKey;\n        },\n        set: function (value) {\n            if (this._labelKey !== value) {\n                this._labelKey = value;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"labelName\", {\n        get: function () {\n            return this._labelName;\n        },\n        set: function (value) {\n            if (this._labelName !== value) {\n                this._labelName = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"fills\", {\n        get: function () {\n            return this._fills;\n        },\n        set: function (values) {\n            this._fills = values;\n            this.strokes = values.map(function (color) { return Color.fromString(color).darker().toHexString(); });\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"strokes\", {\n        get: function () {\n            return this._strokes;\n        },\n        set: function (values) {\n            this._strokes = values;\n            this.calloutColors = values;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"fillOpacity\", {\n        get: function () {\n            return this._fillOpacity;\n        },\n        set: function (value) {\n            if (this._fillOpacity !== value) {\n                this._fillOpacity = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"strokeOpacity\", {\n        get: function () {\n            return this._strokeOpacity;\n        },\n        set: function (value) {\n            if (this._strokeOpacity !== value) {\n                this._strokeOpacity = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"rotation\", {\n        get: function () {\n            return this._rotation;\n        },\n        set: function (value) {\n            if (this._rotation !== value) {\n                this._rotation = value;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"outerRadiusOffset\", {\n        get: function () {\n            return this._outerRadiusOffset;\n        },\n        set: function (value) {\n            if (this._outerRadiusOffset !== value) {\n                this._outerRadiusOffset = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"innerRadiusOffset\", {\n        get: function () {\n            return this._innerRadiusOffset;\n        },\n        set: function (value) {\n            if (this._innerRadiusOffset !== value) {\n                this._innerRadiusOffset = value;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"strokeWidth\", {\n        get: function () {\n            return this._strokeWidth;\n        },\n        set: function (value) {\n            if (this._strokeWidth !== value) {\n                this._strokeWidth = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"shadow\", {\n        get: function () {\n            return this._shadow;\n        },\n        set: function (value) {\n            if (this._shadow !== value) {\n                this._shadow = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PieSeries.prototype.highlightNode = function (node) {\n        if (!(node instanceof Sector)) {\n            return;\n        }\n        this.highlightedNode = node;\n        this.scheduleLayout();\n    };\n    PieSeries.prototype.dehighlightNode = function () {\n        this.highlightedNode = undefined;\n        this.scheduleLayout();\n    };\n    PieSeries.prototype.getDomain = function (direction) {\n        if (direction === ChartAxisDirection.X) {\n            return this.angleScale.domain;\n        }\n        else {\n            return this.radiusScale.domain;\n        }\n    };\n    PieSeries.prototype.processData = function () {\n        var _this = this;\n        var _a = this, data = _a.data, dataEnabled = _a.dataEnabled;\n        var angleData = data.map(function (datum, index) { return dataEnabled[index] && +datum[_this.angleKey] || 0; });\n        var angleDataTotal = angleData.reduce(function (a, b) { return a + b; }, 0);\n        // The ratios (in [0, 1] interval) used to calculate the end angle value for every pie slice.\n        // Each slice starts where the previous one ends, so we only keep the ratios for end angles.\n        var angleDataRatios = (function () {\n            var sum = 0;\n            return angleData.map(function (datum) { return sum += datum / angleDataTotal; });\n        })();\n        var labelKey = this.label.enabled && this.labelKey;\n        var labelData = labelKey ? data.map(function (datum) { return String(datum[labelKey]); }) : [];\n        var radiusKey = this.radiusKey;\n        var useRadiusKey = !!radiusKey && !this.innerRadiusOffset;\n        var radiusData = [];\n        if (useRadiusKey) {\n            var radii = data.map(function (datum) { return Math.abs(datum[radiusKey]); });\n            var maxDatum_1 = Math.max.apply(Math, radii);\n            radiusData = radii.map(function (value) { return value / maxDatum_1; });\n        }\n        var _b = this, angleScale = _b.angleScale, groupSelectionData = _b.groupSelectionData;\n        groupSelectionData.length = 0;\n        var rotation = toRadians(this.rotation);\n        var halfPi = Math.PI / 2;\n        var datumIndex = 0;\n        // Simply use reduce here to pair up adjacent ratios.\n        angleDataRatios.reduce(function (start, end) {\n            var radius = useRadiusKey ? radiusData[datumIndex] : 1;\n            var startAngle = angleScale.convert(start) + rotation;\n            var endAngle = angleScale.convert(end) + rotation;\n            var midAngle = (startAngle + endAngle) / 2;\n            var span = Math.abs(endAngle - startAngle);\n            var midCos = Math.cos(midAngle);\n            var midSin = Math.sin(midAngle);\n            var labelMinAngle = toRadians(_this.label.minAngle);\n            var labelVisible = labelKey && span > labelMinAngle;\n            var midAngle180 = normalizeAngle180(midAngle);\n            // Split the circle into quadrants like so: ⊗\n            var quadrantStart = -3 * Math.PI / 4; // same as `normalizeAngle180(toRadians(-135))`\n            var textAlign;\n            var textBaseline;\n            if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n                textAlign = 'center';\n                textBaseline = 'bottom';\n            }\n            else if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n                textAlign = 'left';\n                textBaseline = 'middle';\n            }\n            else if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n                textAlign = 'center';\n                textBaseline = 'hanging';\n            }\n            else {\n                textAlign = 'right';\n                textBaseline = 'middle';\n            }\n            groupSelectionData.push({\n                index: datumIndex,\n                seriesDatum: data[datumIndex],\n                radius: radius,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                midAngle: midAngle,\n                midCos: midCos,\n                midSin: midSin,\n                label: labelVisible ? {\n                    text: labelData[datumIndex],\n                    textAlign: textAlign,\n                    textBaseline: textBaseline\n                } : undefined\n            });\n            datumIndex++;\n            return end;\n        }, 0);\n        return true;\n    };\n    PieSeries.prototype.update = function () {\n        var _this = this;\n        var chart = this.chart;\n        var visible = this.group.visible = this.visible && this.dataEnabled.indexOf(true) >= 0;\n        if (!visible || !chart || chart.dataPending || chart.layoutPending) {\n            return;\n        }\n        var _a = this, fills = _a.fills, strokes = _a.strokes, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity, calloutColors = _a.calloutColors, outerRadiusOffset = _a.outerRadiusOffset, innerRadiusOffset = _a.innerRadiusOffset, radiusScale = _a.radiusScale, title = _a.title;\n        radiusScale.range = [0, this.radius];\n        this.group.translationX = this.centerX;\n        this.group.translationY = this.centerY;\n        if (title) {\n            title.node.translationY = -this.radius - outerRadiusOffset - 2;\n            title.node.visible = title.enabled;\n        }\n        var updateGroups = this.groupSelection.setData(this.groupSelectionData);\n        updateGroups.exit.remove();\n        var enterGroups = updateGroups.enter.append(Group);\n        enterGroups.append(Sector).each(function (node) { return node.tag = PieSeriesNodeTag.Sector; });\n        enterGroups.append(Line).each(function (node) {\n            node.tag = PieSeriesNodeTag.Callout;\n            node.pointerEvents = PointerEvents.None;\n        });\n        enterGroups.append(Text).each(function (node) {\n            node.tag = PieSeriesNodeTag.Label;\n            node.pointerEvents = PointerEvents.None;\n        });\n        var groupSelection = updateGroups.merge(enterGroups);\n        var outerRadii = [];\n        var centerOffsets = [];\n        var _b = this, highlightedNode = _b.highlightedNode, _c = _b.highlightStyle, fill = _c.fill, stroke = _c.stroke, centerOffset = _c.centerOffset, shadow = _b.shadow, strokeWidth = _b.strokeWidth;\n        groupSelection.selectByTag(PieSeriesNodeTag.Sector).each(function (sector, datum, index) {\n            var radius = radiusScale.convert(datum.radius);\n            var outerRadius = Math.max(0, radius + outerRadiusOffset);\n            sector.outerRadius = outerRadius;\n            sector.innerRadius = Math.max(0, innerRadiusOffset ? radius + innerRadiusOffset : 0);\n            sector.startAngle = datum.startAngle;\n            sector.endAngle = datum.endAngle;\n            sector.fill = sector === highlightedNode && fill !== undefined ? fill : fills[index % fills.length];\n            sector.stroke = sector === highlightedNode && stroke !== undefined ? stroke : strokes[index % strokes.length];\n            sector.fillOpacity = fillOpacity;\n            sector.strokeOpacity = strokeOpacity;\n            sector.centerOffset = sector === highlightedNode && centerOffset !== undefined ? centerOffset : 0;\n            sector.fillShadow = shadow;\n            sector.strokeWidth = strokeWidth;\n            sector.lineJoin = 'round';\n            outerRadii.push(outerRadius);\n            centerOffsets.push(sector.centerOffset);\n        });\n        var calloutLength = this.calloutLength;\n        groupSelection.selectByTag(PieSeriesNodeTag.Callout).each(function (line, datum, index) {\n            if (datum.label) {\n                var outerRadius = centerOffsets[index] + outerRadii[index];\n                line.strokeWidth = _this.calloutStrokeWidth;\n                line.stroke = calloutColors[index % calloutColors.length];\n                line.x1 = datum.midCos * outerRadius;\n                line.y1 = datum.midSin * outerRadius;\n                line.x2 = datum.midCos * (outerRadius + calloutLength);\n                line.y2 = datum.midSin * (outerRadius + calloutLength);\n            }\n            else {\n                line.stroke = undefined;\n            }\n        });\n        {\n            var _d = this.label, offset_1 = _d.offset, fontStyle_1 = _d.fontStyle, fontWeight_1 = _d.fontWeight, fontSize_1 = _d.fontSize, fontFamily_1 = _d.fontFamily, color_1 = _d.color;\n            groupSelection.selectByTag(PieSeriesNodeTag.Label).each(function (text, datum, index) {\n                var label = datum.label;\n                if (label) {\n                    var outerRadius = outerRadii[index];\n                    var labelRadius = centerOffsets[index] + outerRadius + calloutLength + offset_1;\n                    text.fontStyle = fontStyle_1;\n                    text.fontWeight = fontWeight_1;\n                    text.fontSize = fontSize_1;\n                    text.fontFamily = fontFamily_1;\n                    text.text = label.text;\n                    text.x = datum.midCos * labelRadius;\n                    text.y = datum.midSin * labelRadius;\n                    text.fill = color_1;\n                    text.textAlign = label.textAlign;\n                    text.textBaseline = label.textBaseline;\n                }\n                else {\n                    text.fill = undefined;\n                }\n            });\n        }\n        this.groupSelection = groupSelection;\n    };\n    PieSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var angleKey = this.angleKey;\n        if (!angleKey) {\n            return '';\n        }\n        var _a = this, title = _a.title, fills = _a.fills, tooltipRenderer = _a.tooltipRenderer, angleName = _a.angleName, radiusKey = _a.radiusKey, radiusName = _a.radiusName, labelKey = _a.labelKey, labelName = _a.labelName;\n        var text = title ? title.text : undefined;\n        var color = fills[nodeDatum.index % fills.length];\n        if (tooltipRenderer) {\n            return tooltipRenderer({\n                datum: nodeDatum.seriesDatum,\n                angleKey: angleKey,\n                angleName: angleName,\n                radiusKey: radiusKey,\n                radiusName: radiusName,\n                labelKey: labelKey,\n                labelName: labelName,\n                title: text,\n                color: color,\n            });\n        }\n        else {\n            var titleStyle = \"style=\\\"color: white; background-color: \" + color + \"\\\"\";\n            var titleString = title ? \"<div class=\\\"title\\\" \" + titleStyle + \">\" + text + \"</div>\" : '';\n            var label = labelKey ? nodeDatum.seriesDatum[labelKey] + \": \" : '';\n            var value = nodeDatum.seriesDatum[angleKey];\n            var formattedValue = typeof value === 'number' ? toFixed(value) : value.toString();\n            return titleString + \"<div class=\\\"content\\\">\" + label + formattedValue + \"</div>\";\n        }\n    };\n    PieSeries.prototype.listSeriesItems = function (data) {\n        var _this = this;\n        var labelKey = this.labelKey;\n        if (this.data.length && labelKey) {\n            var _a = this, fills_1 = _a.fills, strokes_1 = _a.strokes, id_1 = _a.id;\n            this.data.forEach(function (datum, index) {\n                data.push({\n                    id: id_1,\n                    itemId: index,\n                    enabled: _this.dataEnabled[index],\n                    label: {\n                        text: String(datum[labelKey])\n                    },\n                    marker: {\n                        fill: fills_1[index % fills_1.length],\n                        stroke: strokes_1[index % strokes_1.length],\n                        fillOpacity: _this.fillOpacity,\n                        strokeOpacity: _this.strokeOpacity\n                    }\n                });\n            });\n        }\n    };\n    PieSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n        this.dataEnabled[itemId] = enabled;\n        this.scheduleData();\n    };\n    PieSeries.className = 'PieSeries';\n    return PieSeries;\n}(PolarSeries));\n\nvar __extends$14 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$V = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar DropShadow = /** @class */ (function (_super) {\n    __extends$14(DropShadow, _super);\n    function DropShadow() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.enabled = true;\n        _this.color = 'rgba(0, 0, 0, 0.5)';\n        _this.xOffset = 0;\n        _this.yOffset = 0;\n        _this.blur = 5;\n        return _this;\n    }\n    __decorate$V([\n        reactive(['change'])\n    ], DropShadow.prototype, \"enabled\", void 0);\n    __decorate$V([\n        reactive(['change'])\n    ], DropShadow.prototype, \"color\", void 0);\n    __decorate$V([\n        reactive(['change'])\n    ], DropShadow.prototype, \"xOffset\", void 0);\n    __decorate$V([\n        reactive(['change'])\n    ], DropShadow.prototype, \"yOffset\", void 0);\n    __decorate$V([\n        reactive(['change'])\n    ], DropShadow.prototype, \"blur\", void 0);\n    return DropShadow;\n}(Observable));\n\nvar __extends$15 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar NumberAxis = /** @class */ (function (_super) {\n    __extends$15(NumberAxis, _super);\n    function NumberAxis() {\n        var _this = _super.call(this, new LinearScale()) || this;\n        _this._nice = true;\n        _this.scale.clamp = true;\n        return _this;\n    }\n    Object.defineProperty(NumberAxis.prototype, \"nice\", {\n        get: function () {\n            return this._nice;\n        },\n        set: function (value) {\n            if (this._nice !== value) {\n                this._nice = value;\n                if (value && this.scale.nice) {\n                    this.scale.nice(10);\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NumberAxis.prototype, \"domain\", {\n        get: function () {\n            return this.scale.domain;\n        },\n        set: function (value) {\n            this.scale.domain = value;\n            if (this.nice && this.scale.nice) {\n                this.scale.nice(10);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return NumberAxis;\n}(ChartAxis));\n\nvar __extends$16 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$W = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar Caption = /** @class */ (function (_super) {\n    __extends$16(Caption, _super);\n    function Caption() {\n        var _this = _super.call(this) || this;\n        _this.node = new Text();\n        _this.enabled = true;\n        _this.padding = new Padding(10);\n        var node = _this.node;\n        node.textAlign = 'center';\n        node.textBaseline = 'top';\n        node.pointerEvents = PointerEvents.None;\n        return _this;\n    }\n    __decorate$W([\n        reactive(['change'])\n    ], Caption.prototype, \"enabled\", void 0);\n    __decorate$W([\n        reactive(['change'])\n    ], Caption.prototype, \"padding\", void 0);\n    __decorate$W([\n        reactive(['change'], 'node.text')\n    ], Caption.prototype, \"text\", void 0);\n    __decorate$W([\n        reactive(['change'], 'node.fontStyle')\n    ], Caption.prototype, \"fontStyle\", void 0);\n    __decorate$W([\n        reactive(['change'], 'node.fontWeight')\n    ], Caption.prototype, \"fontWeight\", void 0);\n    __decorate$W([\n        reactive(['change'], 'node.fontSize')\n    ], Caption.prototype, \"fontSize\", void 0);\n    __decorate$W([\n        reactive(['change'], 'node.fontFamily')\n    ], Caption.prototype, \"fontFamily\", void 0);\n    __decorate$W([\n        reactive(['change'], 'node.fill')\n    ], Caption.prototype, \"color\", void 0);\n    return Caption;\n}(Observable));\n\nvar __extends$17 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar GroupedCategoryChart = /** @class */ (function (_super) {\n    __extends$17(GroupedCategoryChart, _super);\n    function GroupedCategoryChart() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupedCategoryChart.prototype.updateAxes = function () {\n        var _this = this;\n        var axes = this.axes;\n        axes.forEach(function (axis) {\n            var _a;\n            var direction = axis.direction, position = axis.position, boundSeries = axis.boundSeries;\n            var domains = [];\n            var isNumericX = undefined;\n            boundSeries.filter(function (s) { return s.visible; }).forEach(function (series) {\n                if (direction === ChartAxisDirection.X) {\n                    if (isNumericX === undefined) {\n                        // always add first X domain\n                        var domain_1 = series.getDomain(direction);\n                        domains.push(domain_1);\n                        isNumericX = typeof domain_1[0] === 'number';\n                    }\n                    else if (isNumericX) {\n                        // only add further X domains if the axis is numeric\n                        domains.push(series.getDomain(direction));\n                    }\n                }\n                else {\n                    domains.push(series.getDomain(direction));\n                }\n            });\n            var domain = (_a = new Array()).concat.apply(_a, domains);\n            axis.domain = numericExtent(domain) || domain;\n            axis.update();\n            var axisThickness = Math.floor(axis.computeBBox().width);\n            switch (position) {\n                case ChartAxisPosition.Left:\n                    _this.axisAutoPadding.left = axisThickness;\n                    break;\n                case ChartAxisPosition.Right:\n                    _this.axisAutoPadding.right = axisThickness;\n                    break;\n                case ChartAxisPosition.Bottom:\n                    _this.axisAutoPadding.bottom = axisThickness;\n                    break;\n                case ChartAxisPosition.Top:\n                    _this.axisAutoPadding.top = axisThickness;\n                    break;\n            }\n        });\n    };\n    return GroupedCategoryChart;\n}(CartesianChart));\n\nvar __extends$18 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Cross = /** @class */ (function (_super) {\n    __extends$18(Cross, _super);\n    function Cross() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Cross.prototype.updatePath = function () {\n        var _a = this, x = _a.x, y = _a.y;\n        var _b = this, path = _b.path, size = _b.size;\n        var s = size / 4.2;\n        path.clear();\n        path.moveTo(x -= s, y);\n        path.lineTo(x -= s, y -= s);\n        path.lineTo(x += s, y -= s);\n        path.lineTo(x += s, y += s);\n        path.lineTo(x += s, y -= s);\n        path.lineTo(x += s, y += s);\n        path.lineTo(x -= s, y += s);\n        path.lineTo(x += s, y += s);\n        path.lineTo(x -= s, y += s);\n        path.lineTo(x -= s, y -= s);\n        path.lineTo(x -= s, y += s);\n        path.lineTo(x -= s, y -= s);\n        path.closePath();\n    };\n    Cross.className = 'Cross';\n    return Cross;\n}(Marker));\n\nvar __extends$19 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Diamond = /** @class */ (function (_super) {\n    __extends$19(Diamond, _super);\n    function Diamond() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Diamond.prototype.updatePath = function () {\n        var _a = this, x = _a.x, y = _a.y;\n        var _b = this, path = _b.path, size = _b.size;\n        var s = size / 2;\n        path.clear();\n        path.moveTo(x, y -= s);\n        path.lineTo(x += s, y += s);\n        path.lineTo(x -= s, y += s);\n        path.lineTo(x -= s, y -= s);\n        path.lineTo(x += s, y -= s);\n        path.closePath();\n    };\n    Diamond.className = 'Diamond';\n    return Diamond;\n}(Marker));\n\nvar __extends$1a = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Plus = /** @class */ (function (_super) {\n    __extends$1a(Plus, _super);\n    function Plus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Plus.prototype.updatePath = function () {\n        var _a = this, x = _a.x, y = _a.y;\n        var _b = this, path = _b.path, size = _b.size;\n        var s = size / 3;\n        var hs = s / 2;\n        path.clear();\n        path.moveTo(x -= hs, y -= hs);\n        path.lineTo(x, y -= s);\n        path.lineTo(x += s, y);\n        path.lineTo(x, y += s);\n        path.lineTo(x += s, y);\n        path.lineTo(x, y += s);\n        path.lineTo(x -= s, y);\n        path.lineTo(x, y += s);\n        path.lineTo(x -= s, y);\n        path.lineTo(x, y -= s);\n        path.lineTo(x -= s, y);\n        path.lineTo(x, y -= s);\n        path.closePath();\n    };\n    Plus.className = 'Plus';\n    return Plus;\n}(Marker));\n\nvar __extends$1b = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Triangle = /** @class */ (function (_super) {\n    __extends$1b(Triangle, _super);\n    function Triangle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Triangle.prototype.updatePath = function () {\n        var _a = this, x = _a.x, y = _a.y;\n        var _b = this, path = _b.path, size = _b.size;\n        var s = size * 1.1;\n        path.clear();\n        path.moveTo(x, y -= s * 0.48);\n        path.lineTo(x += s * 0.5, y += s * 0.87);\n        path.lineTo(x -= s, y);\n        path.closePath();\n    };\n    Triangle.className = 'Triangle';\n    return Triangle;\n}(Marker));\n\nfunction convertToMap(list) {\n    var map = new Map();\n    list.forEach(function (_a) {\n        var key = _a[0], value = _a[1];\n        return map.set(key, value);\n    });\n    return map;\n}\n\nvar __extends$1c = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar t0 = new Date;\nvar t1 = new Date;\n/**\n * The interval methods don't mutate Date parameters.\n */\nvar TimeInterval = /** @class */ (function () {\n    function TimeInterval(floor, offset) {\n        this._floor = floor;\n        this._offset = offset;\n    }\n    /**\n     * Returns a new date representing the latest interval boundary date before or equal to date.\n     * For example, `day.floor(date)` typically returns 12:00 AM local time on the given date.\n     * @param date\n     */\n    TimeInterval.prototype.floor = function (date) {\n        date = new Date(+date);\n        this._floor(date);\n        return date;\n    };\n    /**\n     * Returns a new date representing the earliest interval boundary date after or equal to date.\n     * @param date\n     */\n    TimeInterval.prototype.ceil = function (date) {\n        date = new Date(+date - 1);\n        this._floor(date);\n        this._offset(date, 1);\n        this._floor(date);\n        return date;\n    };\n    /**\n     * Returns a new date representing the closest interval boundary date to date.\n     * @param date\n     */\n    TimeInterval.prototype.round = function (date) {\n        var d0 = this.floor(date);\n        var d1 = this.ceil(date);\n        var ms = +date;\n        return ms - d0.getTime() < d1.getTime() - ms ? d0 : d1;\n    };\n    /**\n     * Returns a new date equal to date plus step intervals.\n     * @param date\n     * @param step\n     */\n    TimeInterval.prototype.offset = function (date, step) {\n        if (step === void 0) { step = 1; }\n        date = new Date(+date);\n        this._offset(date, Math.floor(step));\n        return date;\n    };\n    /**\n     * Returns an array of dates representing every interval boundary after or equal to start (inclusive) and before stop (exclusive).\n     * @param start\n     * @param stop\n     * @param step\n     */\n    TimeInterval.prototype.range = function (start, stop, step) {\n        if (step === void 0) { step = 1; }\n        var range = [];\n        start = this.ceil(start);\n        step = Math.floor(step);\n        if (start > stop || step <= 0) {\n            return range;\n        }\n        var previous;\n        do {\n            previous = new Date(+start);\n            range.push(previous);\n            this._offset(start, step);\n            this._floor(start);\n        } while (previous < start && start < stop);\n        return range;\n    };\n    // Returns an interval that is a subset of this interval.\n    // For example, to create an interval that return 1st, 11th, 21st and 31st of each month:\n    // day.filter(date => (date.getDate() - 1) % 10 === 0)\n    TimeInterval.prototype.filter = function (test) {\n        var _this = this;\n        var floor = function (date) {\n            if (date >= date) {\n                while (_this._floor(date), !test(date)) {\n                    date.setTime(date.getTime() - 1);\n                }\n            }\n            return date;\n        };\n        var offset = function (date, step) {\n            if (date >= date) {\n                if (step < 0) {\n                    while (++step <= 0) {\n                        do {\n                            _this._offset(date, -1);\n                        } while (!test(date));\n                    }\n                }\n                else {\n                    while (--step >= 0) {\n                        do {\n                            _this._offset(date, 1);\n                        } while (!test(date));\n                    }\n                }\n            }\n            return date;\n        };\n        return new TimeInterval(floor, offset);\n    };\n    return TimeInterval;\n}());\nvar CountableTimeInterval = /** @class */ (function (_super) {\n    __extends$1c(CountableTimeInterval, _super);\n    function CountableTimeInterval(floor, offset, count, field) {\n        var _this = _super.call(this, floor, offset) || this;\n        _this._count = count;\n        _this._field = field;\n        return _this;\n    }\n    /**\n     * Returns the number of interval boundaries after start (exclusive) and before or equal to end (inclusive).\n     * @param start\n     * @param end\n     */\n    CountableTimeInterval.prototype.count = function (start, end) {\n        t0.setTime(+start);\n        t1.setTime(+end);\n        this._floor(t0);\n        this._floor(t1);\n        return Math.floor(this._count(t0, t1));\n    };\n    /**\n     * Returns a filtered view of this interval representing every step'th date.\n     * The meaning of step is dependent on this interval’s parent interval as defined by the `field` function.\n     * @param step\n     */\n    CountableTimeInterval.prototype.every = function (step) {\n        var _this = this;\n        var result;\n        step = Math.floor(step);\n        if (isFinite(step) && step > 0) {\n            if (step > 1) {\n                var field_1 = this._field;\n                if (field_1) {\n                    result = this.filter(function (d) { return field_1(d) % step === 0; });\n                }\n                else {\n                    result = this.filter(function (d) { return _this.count(0, d) % step === 0; });\n                }\n            }\n            else {\n                result = this;\n            }\n        }\n        return result;\n    };\n    return CountableTimeInterval;\n}(TimeInterval));\n\nfunction floor(date) {\n    return date;\n}\nfunction offset(date, milliseconds) {\n    date.setTime(date.getTime() + milliseconds);\n}\nfunction count(start, end) {\n    return end.getTime() - start.getTime();\n}\nvar millisecond = new CountableTimeInterval(floor, offset, count);\n\n// Common time unit sizes in milliseconds.\nvar durationSecond = 1000;\nvar durationMinute = durationSecond * 60;\nvar durationHour = durationMinute * 60;\nvar durationDay = durationHour * 24;\nvar durationWeek = durationDay * 7;\nvar durationMonth = durationDay * 30;\nvar durationYear = durationDay * 365;\n\nfunction floor$1(date) {\n    date.setTime(date.getTime() - date.getMilliseconds());\n}\nfunction offset$1(date, seconds) {\n    date.setTime(date.getTime() + seconds * durationSecond);\n}\nfunction count$1(start, end) {\n    return (end.getTime() - start.getTime()) / durationSecond;\n}\nvar second = new CountableTimeInterval(floor$1, offset$1, count$1);\n\nfunction floor$2(date) {\n    date.setTime(date.getTime() - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}\nfunction offset$2(date, minutes) {\n    date.setTime(date.getTime() + minutes * durationMinute);\n}\nfunction count$2(start, end) {\n    return (end.getTime() - start.getTime()) / durationMinute;\n}\nfunction field(date) {\n    return date.getMinutes();\n}\nvar minute = new CountableTimeInterval(floor$2, offset$2, count$2, field);\n\nfunction floor$3(date) {\n    date.setTime(date.getTime() - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}\nfunction offset$3(date, hours) {\n    date.setTime(date.getTime() + hours * durationHour);\n}\nfunction count$3(start, end) {\n    return (end.getTime() - start.getTime()) / durationHour;\n}\nfunction field$1(date) {\n    return date.getHours();\n}\nvar hour = new CountableTimeInterval(floor$3, offset$3, count$3, field$1);\n\nfunction floor$4(date) {\n    date.setHours(0, 0, 0, 0);\n}\nfunction offset$4(date, days) {\n    date.setDate(date.getDate() + days);\n}\nfunction count$4(start, end) {\n    var tzMinuteDelta = end.getTimezoneOffset() - start.getTimezoneOffset();\n    return (end.getTime() - start.getTime() - tzMinuteDelta * durationMinute) / durationDay;\n}\nfunction field$2(date) {\n    return date.getDate() - 1;\n}\nvar day = new CountableTimeInterval(floor$4, offset$4, count$4, field$2);\n\n// Set date to n-th day of the week.\nfunction weekday(n) {\n    // Sets the `date` to the start of the `n`-th day of the current week.\n    // n == 0 is Sunday.\n    function floor(date) {\n        //                  1..31            1..7\n        date.setDate(date.getDate() - (date.getDay() + 7 - n) % 7);\n        date.setHours(0, 0, 0, 0); // h, m, s, ms\n    }\n    // Offset the date by the given number of weeks.\n    function offset(date, weeks) {\n        date.setDate(date.getDate() + weeks * 7);\n    }\n    // Count the number of weeks between teh start and end dates.\n    function count(start, end) {\n        var msDelta = end.getTime() - start.getTime();\n        var tzMinuteDelta = end.getTimezoneOffset() - start.getTimezoneOffset();\n        return (msDelta - tzMinuteDelta * durationMinute) / durationWeek;\n    }\n    return new CountableTimeInterval(floor, offset, count);\n}\nvar sunday = weekday(0);\nvar monday = weekday(1);\nvar tuesday = weekday(2);\nvar wednesday = weekday(3);\nvar thursday = weekday(4);\nvar friday = weekday(5);\nvar saturday = weekday(6);\n\nfunction floor$5(date) {\n    date.setDate(1);\n    date.setHours(0, 0, 0, 0);\n}\nfunction offset$5(date, months) {\n    date.setMonth(date.getMonth() + months);\n}\nfunction count$5(start, end) {\n    return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}\nfunction field$3(date) {\n    return date.getMonth();\n}\nvar month = new CountableTimeInterval(floor$5, offset$5, count$5, field$3);\n\nfunction floor$6(date) {\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n}\nfunction offset$6(date, years) {\n    date.setFullYear(date.getFullYear() + years);\n}\nfunction count$6(start, end) {\n    return end.getFullYear() - start.getFullYear();\n}\nfunction field$4(date) {\n    return date.getFullYear();\n}\nvar year = new CountableTimeInterval(floor$6, offset$6, count$6, field$4);\n\nfunction floor$7(date) {\n    date.setUTCHours(0, 0, 0, 0);\n}\nfunction offset$7(date, days) {\n    date.setUTCDate(date.getUTCDate() + days);\n}\nfunction count$7(start, end) {\n    return (end.getTime() - start.getTime()) / durationDay;\n}\nfunction field$5(date) {\n    return date.getUTCDate() - 1;\n}\nvar utcDay = new CountableTimeInterval(floor$7, offset$7, count$7, field$5);\n\nfunction floor$8(date) {\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n}\nfunction offset$8(date, years) {\n    date.setUTCFullYear(date.getUTCFullYear() + years);\n}\nfunction count$8(start, end) {\n    return end.getUTCFullYear() - start.getUTCFullYear();\n}\nfunction field$6(date) {\n    return date.getUTCFullYear();\n}\nvar utcYear = new CountableTimeInterval(floor$8, offset$8, count$8, field$6);\n\n// Set date to n-th day of the week.\nfunction weekday$1(n) {\n    // Sets the `date` to the start of the `n`-th day of the current week.\n    // n == 0 is Sunday.\n    function floor(date) {\n        date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - n) % 7);\n        date.setHours(0, 0, 0, 0); // h, m, s, ms\n    }\n    // Offset the date by the given number of weeks.\n    function offset(date, weeks) {\n        date.setUTCDate(date.getUTCDate() + weeks * 7);\n    }\n    // Count the number of weeks between teh start and end dates.\n    function count(start, end) {\n        return (end.getTime() - start.getTime()) / durationWeek;\n    }\n    return new CountableTimeInterval(floor, offset, count);\n}\nvar utcSunday = weekday$1(0);\nvar utcMonday = weekday$1(1);\nvar utcTuesday = weekday$1(2);\nvar utcWednesday = weekday$1(3);\nvar utcThursday = weekday$1(4);\nvar utcFriday = weekday$1(5);\nvar utcSaturday = weekday$1(6);\n\nfunction localDate(d) {\n    // For JS Dates the [0, 100) interval is a time warp, a fast forward to the 20th century.\n    // For example, -1 is -0001 BC, 0 is already 1900 AD.\n    if (d.y >= 0 && d.y < 100) {\n        var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n        date.setFullYear(d.y);\n        return date;\n    }\n    return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\nfunction utcDate(d) {\n    if (d.y >= 0 && d.y < 100) {\n        var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n        date.setUTCFullYear(d.y);\n        return date;\n    }\n    return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n/**\n * Creates a lookup map for array of names to go from a name to index.\n * @param names\n */\nfunction formatLookup(names) {\n    var map = {};\n    for (var i = 0, n = names.length; i < n; i++) {\n        map[names[i].toLowerCase()] = i;\n    }\n    return map;\n}\nfunction newYear(y) {\n    return {\n        y: y,\n        m: 0,\n        d: 1,\n        H: 0,\n        M: 0,\n        S: 0,\n        L: 0\n    };\n}\nvar percentCharCode = 37;\nvar numberRe = /^\\s*\\d+/; // ignores next directive\nvar percentRe = /^%/;\nvar requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n/**\n * Prepends any character in the `requoteRe` set with a backslash.\n * @param s\n */\nvar requote = function (s) { return s.replace(requoteRe, '\\\\$&'); }; // $& - matched substring\n/**\n * Returns a RegExp that matches any string that starts with any of the given names (case insensitive).\n * @param names\n */\nvar formatRe = function (names) { return new RegExp('^(?:' + names.map(requote).join('|') + ')', 'i'); };\n// A map of padding modifiers to padding strings. Default is `0`.\nvar pads = {\n    '-': '',\n    '_': ' ',\n    '0': '0'\n};\nfunction pad(value, fill, width) {\n    var sign = value < 0 ? '-' : '';\n    var string = String(sign ? -value : value);\n    var length = string.length;\n    return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n/**\n * Create a new time-locale-based object which exposes time-formatting\n * methods for the specified locale definition.\n *\n * @param timeLocale A time locale definition.\n */\nfunction formatLocale(timeLocale) {\n    var lDateTime = timeLocale.dateTime;\n    var lDate = timeLocale.date;\n    var lTime = timeLocale.time;\n    var lPeriods = timeLocale.periods;\n    var lWeekdays = timeLocale.days;\n    var lShortWeekdays = timeLocale.shortDays;\n    var lMonths = timeLocale.months;\n    var lShortMonths = timeLocale.shortMonths;\n    var periodRe = formatRe(lPeriods);\n    var periodLookup = formatLookup(lPeriods);\n    var weekdayRe = formatRe(lWeekdays);\n    var weekdayLookup = formatLookup(lWeekdays);\n    var shortWeekdayRe = formatRe(lShortWeekdays);\n    var shortWeekdayLookup = formatLookup(lShortWeekdays);\n    var monthRe = formatRe(lMonths);\n    var monthLookup = formatLookup(lMonths);\n    var shortMonthRe = formatRe(lShortMonths);\n    var shortMonthLookup = formatLookup(lShortMonths);\n    var formats = {\n        'a': formatShortWeekday,\n        'A': formatWeekday,\n        'b': formatShortMonth,\n        'B': formatMonth,\n        'c': undefined,\n        'd': formatDayOfMonth,\n        'e': formatDayOfMonth,\n        'f': formatMicroseconds,\n        'H': formatHour24,\n        'I': formatHour12,\n        'j': formatDayOfYear,\n        'L': formatMilliseconds,\n        'm': formatMonthNumber,\n        'M': formatMinutes,\n        'p': formatPeriod,\n        'Q': formatUnixTimestamp,\n        's': formatUnixTimestampSeconds,\n        'S': formatSeconds,\n        'u': formatWeekdayNumberMonday,\n        'U': formatWeekNumberSunday,\n        'V': formatWeekNumberISO,\n        'w': formatWeekdayNumberSunday,\n        'W': formatWeekNumberMonday,\n        'x': undefined,\n        'X': undefined,\n        'y': formatYear,\n        'Y': formatFullYear,\n        'Z': formatZone,\n        '%': formatLiteralPercent\n    };\n    var utcFormats = {\n        'a': formatUTCShortWeekday,\n        'A': formatUTCWeekday,\n        'b': formatUTCShortMonth,\n        'B': formatUTCMonth,\n        'c': undefined,\n        'd': formatUTCDayOfMonth,\n        'e': formatUTCDayOfMonth,\n        'f': formatUTCMicroseconds,\n        'H': formatUTCHour24,\n        'I': formatUTCHour12,\n        'j': formatUTCDayOfYear,\n        'L': formatUTCMilliseconds,\n        'm': formatUTCMonthNumber,\n        'M': formatUTCMinutes,\n        'p': formatUTCPeriod,\n        'Q': formatUnixTimestamp,\n        's': formatUnixTimestampSeconds,\n        'S': formatUTCSeconds,\n        'u': formatUTCWeekdayNumberMonday,\n        'U': formatUTCWeekNumberSunday,\n        'V': formatUTCWeekNumberISO,\n        'w': formatUTCWeekdayNumberSunday,\n        'W': formatUTCWeekNumberMonday,\n        'x': undefined,\n        'X': undefined,\n        'y': formatUTCYear,\n        'Y': formatUTCFullYear,\n        'Z': formatUTCZone,\n        '%': formatLiteralPercent\n    };\n    var parses = {\n        'a': parseShortWeekday,\n        'A': parseWeekday,\n        'b': parseShortMonth,\n        'B': parseMonth,\n        'c': parseLocaleDateTime,\n        'd': parseDayOfMonth,\n        'e': parseDayOfMonth,\n        'f': parseMicroseconds,\n        'H': parseHour24,\n        'I': parseHour24,\n        'j': parseDayOfYear,\n        'L': parseMilliseconds,\n        'm': parseMonthNumber,\n        'M': parseMinutes,\n        'p': parsePeriod,\n        'Q': parseUnixTimestamp,\n        's': parseUnixTimestampSeconds,\n        'S': parseSeconds,\n        'u': parseWeekdayNumberMonday,\n        'U': parseWeekNumberSunday,\n        'V': parseWeekNumberISO,\n        'w': parseWeekdayNumberSunday,\n        'W': parseWeekNumberMonday,\n        'x': parseLocaleDate,\n        'X': parseLocaleTime,\n        'y': parseYear,\n        'Y': parseFullYear,\n        'Z': parseZone,\n        '%': parseLiteralPercent\n    };\n    // Recursive definitions.\n    formats.x = newFormat(lDate, formats);\n    formats.X = newFormat(lTime, formats);\n    formats.c = newFormat(lDateTime, formats);\n    utcFormats.x = newFormat(lDate, utcFormats);\n    utcFormats.X = newFormat(lTime, utcFormats);\n    utcFormats.c = newFormat(lDateTime, utcFormats);\n    function newParse(specifier, newDate) {\n        return function (str) {\n            var d = newYear(1900);\n            var i = parseSpecifier(d, specifier, str += '', 0);\n            if (i != str.length) {\n                return undefined;\n            }\n            // If a UNIX timestamp is specified, return it.\n            if ('Q' in d) {\n                return new Date(d.Q);\n            }\n            // The am-pm flag is 0 for AM, and 1 for PM.\n            if ('p' in d) {\n                d.H = d.H % 12 + d.p * 12;\n            }\n            // Convert day-of-week and week-of-year to day-of-year.\n            if ('V' in d) {\n                if (d.V < 1 || d.V > 53) {\n                    return undefined;\n                }\n                if (!('w' in d)) {\n                    d.w = 1;\n                }\n                if ('Z' in d) {\n                    var week = utcDate(newYear(d.y));\n                    var day$1 = week.getUTCDay();\n                    week = day$1 > 4 || day$1 === 0 ? utcMonday.ceil(week) : utcMonday.floor(week);\n                    week = utcDay.offset(week, (d.V - 1) * 7);\n                    d.y = week.getUTCFullYear();\n                    d.m = week.getUTCMonth();\n                    d.d = week.getUTCDate() + (d.w + 6) % 7;\n                }\n                else {\n                    var week = newDate(newYear(d.y));\n                    var day$1 = week.getDay();\n                    week = day$1 > 4 || day$1 === 0 ? monday.ceil(week) : monday.floor(week);\n                    week = day.offset(week, (d.V - 1) * 7);\n                    d.y = week.getFullYear();\n                    d.m = week.getMonth();\n                    d.d = week.getDate() + (d.w + 6) % 7;\n                }\n            }\n            else if ('W' in d || 'U' in d) {\n                if (!('w' in d)) {\n                    d.w = 'u' in d\n                        ? d.u % 7\n                        : 'W' in d ? 1 : 0;\n                }\n                var day$1 = 'Z' in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n                d.m = 0;\n                d.d = 'W' in d ? (d.w + 6) % 7 + d.W * 7 - (day$1 + 5) % 7 : d.w + d.U * 7 - (day$1 + 6) % 7;\n            }\n            // If a time zone is specified, all fields are interpreted as UTC and then\n            // offset according to the specified time zone.\n            if ('Z' in d) {\n                d.H += d.Z / 100 | 0;\n                d.M += d.Z % 100;\n                return utcDate(d);\n            }\n            // Otherwise, all fields are in local time.\n            return newDate(d);\n        };\n    }\n    /**\n     * Creates a new function that formats the given Date or timestamp according to specifier.\n     * @param specifier\n     * @param formats\n     */\n    function newFormat(specifier, formats) {\n        return function (date) {\n            var string = [];\n            var n = specifier.length;\n            var i = -1;\n            var j = 0;\n            if (!(date instanceof Date)) {\n                date = new Date(+date);\n            }\n            while (++i < n) {\n                if (specifier.charCodeAt(i) === percentCharCode) {\n                    string.push(specifier.slice(j, i)); // copy the chunks of specifier with no directives as is\n                    var c = specifier.charAt(++i);\n                    var pad_1 = pads[c];\n                    if (pad_1 != undefined) { // if format directive has a padding modifier in front of it\n                        c = specifier.charAt(++i); // fetch the directive itself\n                    }\n                    else {\n                        pad_1 = c === 'e' ? ' ' : '0'; // use the default padding modifier\n                    }\n                    var format = formats[c];\n                    if (format) { // if the directive has a corresponding formatting function\n                        c = format(date, pad_1); // replace the directive with the formatted date\n                    }\n                    string.push(c);\n                    j = i + 1;\n                }\n            }\n            string.push(specifier.slice(j, i));\n            return string.join('');\n        };\n    }\n    // Simultaneously walks over the specifier and the parsed string, populating the `d` map with parsed values.\n    // The returned number is expected to equal the length of the parsed `string`, if parsing succeeded.\n    function parseSpecifier(d, specifier, string, j) {\n        // i - `specifier` string index\n        // j - parsed `string` index\n        var i = 0;\n        var n = specifier.length;\n        var m = string.length;\n        while (i < n) {\n            if (j >= m) {\n                return -1;\n            }\n            var code = specifier.charCodeAt(i++);\n            if (code === percentCharCode) {\n                var char = specifier.charAt(i++);\n                var parse = parses[(char in pads ? specifier.charAt(i++) : char)];\n                if (!parse || ((j = parse(d, string, j)) < 0)) {\n                    return -1;\n                }\n            }\n            else if (code != string.charCodeAt(j++)) {\n                return -1;\n            }\n        }\n        return j;\n    }\n    // ----------------------------- formats ----------------------------------\n    function formatMicroseconds(date, fill) {\n        return formatMilliseconds(date, fill) + '000';\n    }\n    function formatMilliseconds(date, fill) {\n        return pad(date.getMilliseconds(), fill, 3);\n    }\n    function formatSeconds(date, fill) {\n        return pad(date.getSeconds(), fill, 2);\n    }\n    function formatMinutes(date, fill) {\n        return pad(date.getMinutes(), fill, 2);\n    }\n    function formatHour12(date, fill) {\n        return pad(date.getHours() % 12 || 12, fill, 2);\n    }\n    function formatHour24(date, fill) {\n        return pad(date.getHours(), fill, 2);\n    }\n    function formatPeriod(date) {\n        return lPeriods[date.getHours() >= 12 ? 1 : 0];\n    }\n    function formatShortWeekday(date) {\n        return lShortWeekdays[date.getDay()];\n    }\n    function formatWeekday(date) {\n        return lWeekdays[date.getDay()];\n    }\n    function formatWeekdayNumberMonday(date) {\n        var dayOfWeek = date.getDay();\n        return dayOfWeek === 0 ? 7 : dayOfWeek;\n    }\n    function formatWeekNumberSunday(date, fill) {\n        return pad(sunday.count(year.floor(date), date), fill, 2);\n    }\n    function formatWeekNumberISO(date, fill) {\n        var day = date.getDay();\n        date = (day >= 4 || day === 0) ? thursday.floor(date) : thursday.ceil(date);\n        var yearStart = year.floor(date);\n        return pad(thursday.count(yearStart, date) + (yearStart.getDay() === 4 ? 1 : 0), fill, 2);\n    }\n    function formatWeekdayNumberSunday(date) {\n        return date.getDay();\n    }\n    function formatWeekNumberMonday(date, fill) {\n        return pad(monday.count(year.floor(date), date), fill, 2);\n    }\n    function formatDayOfMonth(date, fill) {\n        return pad(date.getDate(), fill, 2);\n    }\n    function formatDayOfYear(date, fill) {\n        return pad(1 + day.count(year.floor(date), date), fill, 3);\n    }\n    function formatShortMonth(date) {\n        return lShortMonths[date.getMonth()];\n    }\n    function formatMonth(date) {\n        return lMonths[date.getMonth()];\n    }\n    function formatMonthNumber(date, fill) {\n        return pad(date.getMonth() + 1, fill, 2);\n    }\n    function formatYear(date, fill) {\n        return pad(date.getFullYear() % 100, fill, 2);\n    }\n    function formatFullYear(date, fill) {\n        return pad(date.getFullYear() % 10000, fill, 4);\n    }\n    function formatZone(date) {\n        var z = date.getTimezoneOffset();\n        return (z > 0 ? '-' : (z *= -1, '+')) + pad(Math.floor(z / 60), '0', 2) + pad(z % 60, '0', 2);\n    }\n    // -------------------------- UTC formats -----------------------------------\n    function formatUTCMicroseconds(date, fill) {\n        return formatUTCMilliseconds(date, fill) + '000';\n    }\n    function formatUTCMilliseconds(date, fill) {\n        return pad(date.getUTCMilliseconds(), fill, 3);\n    }\n    function formatUTCSeconds(date, fill) {\n        return pad(date.getUTCSeconds(), fill, 2);\n    }\n    function formatUTCMinutes(date, fill) {\n        return pad(date.getUTCMinutes(), fill, 2);\n    }\n    function formatUTCHour12(date, fill) {\n        return pad(date.getUTCHours() % 12 || 12, fill, 2);\n    }\n    function formatUTCHour24(date, fill) {\n        return pad(date.getUTCHours(), fill, 2);\n    }\n    function formatUTCPeriod(date) {\n        return lPeriods[date.getUTCHours() >= 12 ? 1 : 0];\n    }\n    function formatUTCDayOfMonth(date, fill) {\n        return pad(date.getUTCDate(), fill, 2);\n    }\n    function formatUTCDayOfYear(date, fill) {\n        return pad(1 + utcDay.count(utcYear.floor(date), date), fill, 3);\n    }\n    function formatUTCMonthNumber(date, fill) {\n        return pad(date.getUTCMonth() + 1, fill, 2);\n    }\n    function formatUTCShortMonth(date) {\n        return lShortMonths[date.getUTCMonth()];\n    }\n    function formatUTCMonth(date) {\n        return lMonths[date.getUTCMonth()];\n    }\n    function formatUTCShortWeekday(date) {\n        return lShortWeekdays[date.getUTCDay()];\n    }\n    function formatUTCWeekday(date) {\n        return lWeekdays[date.getUTCDay()];\n    }\n    function formatUTCWeekdayNumberMonday(date) {\n        var dayOfWeek = date.getUTCDay();\n        return dayOfWeek === 0 ? 7 : dayOfWeek;\n    }\n    function formatUTCWeekNumberSunday(date, fill) {\n        return pad(utcSunday.count(utcYear.floor(date), date), fill, 2);\n    }\n    function formatUTCWeekNumberISO(date, fill) {\n        var day = date.getUTCDay();\n        date = (day >= 4 || day === 0) ? utcThursday.floor(date) : utcThursday.ceil(date);\n        var yearStart = utcYear.floor(date);\n        return pad(utcThursday.count(yearStart, date) + (yearStart.getUTCDay() === 4 ? 1 : 0), fill, 4);\n    }\n    function formatUTCWeekdayNumberSunday(date) {\n        return date.getUTCDay();\n    }\n    function formatUTCWeekNumberMonday(date, fill) {\n        return pad(utcMonday.count(utcYear.floor(date), date), fill, 2);\n    }\n    function formatUTCYear(date, fill) {\n        return pad(date.getUTCFullYear() % 100, fill, 2);\n    }\n    function formatUTCFullYear(date, fill) {\n        return pad(date.getUTCFullYear() % 10000, fill, 4);\n    }\n    function formatUTCZone() {\n        return '+0000';\n    }\n    function formatLiteralPercent(date) {\n        return '%';\n    }\n    function formatUnixTimestamp(date) {\n        return date.getTime();\n    }\n    function formatUnixTimestampSeconds(date) {\n        return Math.floor(date.getTime() / 1000);\n    }\n    // ------------------------------- parsers ------------------------------------\n    function parseMicroseconds(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 6));\n        return n ? (d.L = Math.floor(parseFloat(n[0]) / 1000), i + n[0].length) : -1;\n    }\n    function parseMilliseconds(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 3));\n        return n ? (d.L = +n[0], i + n[0].length) : -1;\n    }\n    function parseSeconds(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.S = +n[0], i + n[0].length) : -1;\n    }\n    function parseMinutes(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.M = +n[0], i + n[0].length) : -1;\n    }\n    function parseHour24(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.H = +n[0], i + n[0].length) : -1;\n    }\n    function parsePeriod(d, string, i) {\n        var n = periodRe.exec(string.slice(i));\n        return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n    function parseDayOfMonth(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.d = +n[0], i + n[0].length) : -1;\n    }\n    function parseDayOfYear(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 3));\n        return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n    }\n    function parseShortWeekday(d, string, i) {\n        var n = shortWeekdayRe.exec(string.slice(i));\n        return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n    function parseWeekday(d, string, i) {\n        var n = weekdayRe.exec(string.slice(i));\n        return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n    function parseWeekdayNumberMonday(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 1));\n        return n ? (d.u = +n[0], i + n[0].length) : -1;\n    }\n    function parseWeekNumberSunday(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.U = +n[0], i + n[0].length) : -1;\n    }\n    function parseWeekNumberISO(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.V = +n[0], i + n[0].length) : -1;\n    }\n    function parseWeekNumberMonday(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.W = +n[0], i + n[0].length) : -1;\n    }\n    function parseWeekdayNumberSunday(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 1));\n        return n ? (d.w = +n[0], i + n[0].length) : -1;\n    }\n    function parseShortMonth(d, string, i) {\n        var n = shortMonthRe.exec(string.slice(i));\n        return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n    function parseMonth(d, string, i) {\n        var n = monthRe.exec(string.slice(i));\n        return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n    function parseMonthNumber(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.m = parseFloat(n[0]) - 1, i + n[0].length) : -1;\n    }\n    function parseLocaleDateTime(d, string, i) {\n        return parseSpecifier(d, lDateTime, string, i);\n    }\n    function parseLocaleDate(d, string, i) {\n        return parseSpecifier(d, lDate, string, i);\n    }\n    function parseLocaleTime(d, string, i) {\n        return parseSpecifier(d, lTime, string, i);\n    }\n    function parseUnixTimestamp(d, string, i) {\n        var n = numberRe.exec(string.slice(i));\n        return n ? (d.Q = +n[0], i + n[0].length) : -1;\n    }\n    function parseUnixTimestampSeconds(d, string, i) {\n        var n = numberRe.exec(string.slice(i));\n        return n ? (d.Q = (+n[0]) * 1000, i + n[0].length) : -1;\n    }\n    function parseYear(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n    }\n    function parseFullYear(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 4));\n        return n ? (d.y = +n[0], i + n[0].length) : -1;\n    }\n    function parseZone(d, string, i) {\n        var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n        return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || '00')), i + n[0].length) : -1;\n    }\n    function parseLiteralPercent(d, string, i) {\n        var n = percentRe.exec(string.slice(i, i + 1));\n        return n ? i + n[0].length : -1;\n    }\n    return {\n        format: function (specifier) {\n            var f = newFormat(specifier, formats);\n            f.toString = function () { return specifier; };\n            return f;\n        },\n        parse: function (specifier) {\n            var p = newParse(specifier, localDate);\n            p.toString = function () { return specifier; };\n            return p;\n        },\n        utcFormat: function (specifier) {\n            var f = newFormat(specifier, utcFormats);\n            f.toString = function () { return specifier; };\n            return f;\n        },\n        utcParse: function (specifier) {\n            var p = newParse(specifier, utcDate);\n            p.toString = function () { return specifier; };\n            return p;\n        }\n    };\n}\n\nvar locale;\nsetDefaultLocale({\n    dateTime: '%x, %X',\n    date: '%-m/%-d/%Y',\n    time: '%-I:%M:%S %p',\n    periods: ['AM', 'PM'],\n    days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    shortDays: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n    months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n    shortMonths: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n});\nfunction setDefaultLocale(definition) {\n    return locale = formatLocale(definition);\n}\n\nvar __extends$1d = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar TimeScale = /** @class */ (function (_super) {\n    __extends$1d(TimeScale, _super);\n    function TimeScale() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.year = year;\n        _this.month = month;\n        _this.week = sunday;\n        _this.day = day;\n        _this.hour = hour;\n        _this.minute = minute;\n        _this.second = second;\n        _this.millisecond = millisecond;\n        _this.format = locale.format;\n        /**\n         * Array of default tick intervals in the following format:\n         *\n         *     [\n         *         interval (unit of time),\n         *         number of units (step),\n         *         the length of that number of units in milliseconds\n         *     ]\n         */\n        _this.tickIntervals = [\n            [_this.second, 1, durationSecond],\n            [_this.second, 5, 5 * durationSecond],\n            [_this.second, 15, 15 * durationSecond],\n            [_this.second, 30, 30 * durationSecond],\n            [_this.minute, 1, durationMinute],\n            [_this.minute, 5, 5 * durationMinute],\n            [_this.minute, 15, 15 * durationMinute],\n            [_this.minute, 30, 30 * durationMinute],\n            [_this.hour, 1, durationHour],\n            [_this.hour, 3, 3 * durationHour],\n            [_this.hour, 6, 6 * durationHour],\n            [_this.hour, 12, 12 * durationHour],\n            [_this.day, 1, durationDay],\n            [_this.day, 2, 2 * durationDay],\n            [_this.week, 1, durationWeek],\n            [_this.month, 1, durationMonth],\n            [_this.month, 3, 3 * durationMonth],\n            [_this.year, 1, durationYear]\n        ];\n        _this.formatMillisecond = _this.format('.%L');\n        _this.formatSecond = _this.format(':%S');\n        _this.formatMinute = _this.format('%I:%M');\n        _this.formatHour = _this.format('%I %p');\n        _this.formatDay = _this.format('%a %d');\n        _this.formatWeek = _this.format('%b %d');\n        _this.formatMonth = _this.format('%B');\n        _this.formatYear = _this.format('%Y');\n        _this._domain = [new Date(2000, 0, 1), new Date(2000, 0, 2)];\n        return _this;\n    }\n    TimeScale.prototype.defaultTickFormat = function (date) {\n        return (this.second.floor(date) < date\n            ? this.formatMillisecond\n            : this.minute.floor(date) < date\n                ? this.formatSecond\n                : this.hour.floor(date) < date\n                    ? this.formatMinute\n                    : this.day.floor(date) < date\n                        ? this.formatHour\n                        : this.month.floor(date) < date\n                            ? (this.week.floor(date) < date ? this.formatDay : this.formatWeek)\n                            : this.year.floor(date) < date\n                                ? this.formatMonth\n                                : this.formatYear)(date);\n    };\n    /**\n     *\n     * @param interval If the `interval` is a number, it's interpreted as the desired tick count\n     * and the method tries to pick an appropriate interval automatically, based on the extent of the domain.\n     * If the `interval` is `undefined`, it defaults to `10`.\n     * If the `interval` is a time interval, simply use it.\n     * @param start The start time (timestamp).\n     * @param stop The end time (timestamp).\n     * @param step Number of intervals between ticks.\n     */\n    TimeScale.prototype.tickInterval = function (interval, start, stop, step) {\n        var _a;\n        if (interval === void 0) { interval = 10; }\n        if (typeof interval === 'number') {\n            var tickCount = interval;\n            var tickIntervals = this.tickIntervals;\n            var target = Math.abs(stop - start) / tickCount;\n            var i = complexBisectRight(tickIntervals, target, function (interval) { return interval[2]; });\n            if (i === tickIntervals.length) {\n                step = tickStep(start / durationYear, stop / durationYear, tickCount);\n                interval = this.year;\n            }\n            else if (i) {\n                _a = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i], interval = _a[0], step = _a[1];\n            }\n            else {\n                step = Math.max(tickStep(start, stop, interval), 1);\n                interval = this.millisecond;\n            }\n        }\n        return step == undefined ? interval : interval.every(step);\n    };\n    Object.defineProperty(TimeScale.prototype, \"domain\", {\n        get: function () {\n            return _super.prototype.getDomain.call(this).map(function (t) { return new Date(t); });\n        },\n        set: function (values) {\n            _super.prototype.setDomain.call(this, Array.prototype.map.call(values, function (t) { return t instanceof Date ? +t : +new Date(+t); }));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TimeScale.prototype.invert = function (y) {\n        return new Date(_super.prototype.invert.call(this, y));\n    };\n    /**\n     * Returns uniformly-spaced dates that represent the scale's domain.\n     * @param interval The desired tick count or a time interval object.\n     */\n    TimeScale.prototype.ticks = function (interval) {\n        if (interval === void 0) { interval = 10; }\n        var d = _super.prototype.getDomain.call(this);\n        var t0 = d[0];\n        var t1 = d[d.length - 1];\n        var reverse = t1 < t0;\n        if (reverse) {\n            var _ = t0;\n            t0 = t1;\n            t1 = _;\n        }\n        var t = this.tickInterval(interval, t0, t1);\n        var i = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n        return reverse ? i.reverse() : i;\n    };\n    /**\n     * Returns a time format function suitable for displaying tick values.\n     * @param count Ignored. Used only to satisfy the {@link Scale} interface.\n     * @param specifier If the specifier string is provided, this method is equivalent to\n     * the {@link TimeLocaleObject.format} method.\n     * If no specifier is provided, this method returns the default time format function.\n     */\n    TimeScale.prototype.tickFormat = function (count, specifier) {\n        return specifier == undefined ? this.defaultTickFormat.bind(this) : this.format(specifier);\n    };\n    /**\n     * Extends the domain so that it starts and ends on nice round values.\n     * This method typically modifies the scale’s domain, and may only extend the bounds to the nearest round value.\n     * @param interval\n     */\n    TimeScale.prototype.nice = function (interval) {\n        if (interval === void 0) { interval = 10; }\n        var d = _super.prototype.getDomain.call(this);\n        var i = this.tickInterval(interval, d[0], d[d.length - 1]);\n        if (i) {\n            this.domain = this._nice(d, i);\n        }\n    };\n    TimeScale.prototype._nice = function (domain, interval) {\n        var _a, _b;\n        domain = domain.slice();\n        var i0 = 0;\n        var i1 = domain.length - 1;\n        var x0 = domain[i0];\n        var x1 = domain[i1];\n        if (x1 < x0) {\n            _a = [i1, i0], i0 = _a[0], i1 = _a[1];\n            _b = [x1, x0], x0 = _b[0], x1 = _b[1];\n        }\n        domain[i0] = interval.floor(x0);\n        domain[i1] = interval.ceil(x1);\n        return domain;\n    };\n    return TimeScale;\n}(ContinuousScale));\n\nvar __extends$1e = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar TimeAxis = /** @class */ (function (_super) {\n    __extends$1e(TimeAxis, _super);\n    function TimeAxis() {\n        var _this = _super.call(this, new TimeScale()) || this;\n        _this._nice = true;\n        _this.scale.clamp = true;\n        return _this;\n    }\n    Object.defineProperty(TimeAxis.prototype, \"nice\", {\n        get: function () {\n            return this._nice;\n        },\n        set: function (value) {\n            if (this._nice !== value) {\n                this._nice = value;\n                if (value && this.scale.nice) {\n                    this.scale.nice(10);\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TimeAxis.prototype, \"domain\", {\n        get: function () {\n            return this.scale.domain;\n        },\n        set: function (value) {\n            this.scale.domain = value;\n            if (this.nice && this.scale.nice) {\n                this.scale.nice(10);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return TimeAxis;\n}(ChartAxis));\n\nvar ChartBuilder = /** @class */ (function () {\n    function ChartBuilder() {\n    }\n    ChartBuilder.createCartesianChart = function (parent, xAxis, yAxis, document) {\n        var chart = new CartesianChart(document);\n        chart.parent = parent;\n        xAxis.position = ChartAxisPosition.Bottom;\n        yAxis.position = ChartAxisPosition.Left;\n        chart.axes = [xAxis, yAxis];\n        return chart;\n    };\n    ChartBuilder.createGroupedCategoryChart = function (parent, xAxis, yAxis, document) {\n        var chart = new GroupedCategoryChart(document);\n        chart.parent = parent;\n        xAxis.position = ChartAxisPosition.Bottom;\n        yAxis.position = ChartAxisPosition.Left;\n        chart.axes = [xAxis, yAxis];\n        return chart;\n    };\n    ChartBuilder.createBarChart = function (parent, options) {\n        var chart = this.createCartesianChart(parent, ChartBuilder.createNumberAxis(options.xAxis), ChartBuilder.createCategoryAxis(options.yAxis), options.document);\n        chart.layout = CartesianChartLayout.Horizontal;\n        ChartBuilder.initChart(chart, options);\n        if (options.series) {\n            chart.series = options.series.map(function (s) { return ChartBuilder.initBarSeries(new ColumnSeries(), s); });\n        }\n        return chart;\n    };\n    ChartBuilder.createColumnChart = function (parent, options) {\n        var chart = this.createCartesianChart(parent, ChartBuilder.createCategoryAxis(options.xAxis), ChartBuilder.createNumberAxis(options.yAxis), options.document);\n        ChartBuilder.initChart(chart, options);\n        if (options.series) {\n            chart.series = options.series.map(function (s) { return ChartBuilder.initBarSeries(new ColumnSeries(), s); });\n        }\n        return chart;\n    };\n    ChartBuilder.createLineChart = function (parent, options) {\n        var chart = this.createCartesianChart(parent, ChartBuilder.createAxis(options.xAxis, 'category'), ChartBuilder.createAxis(options.yAxis, 'number'), options.document);\n        ChartBuilder.initChart(chart, options);\n        if (options.series) {\n            chart.series = options.series.map(function (s) { return ChartBuilder.initLineSeries(new LineSeries(), s); });\n        }\n        return chart;\n    };\n    ChartBuilder.createScatterChart = function (parent, options) {\n        var chart = this.createCartesianChart(parent, ChartBuilder.createAxis(options.xAxis, 'number'), ChartBuilder.createAxis(options.yAxis, 'number'), options.document);\n        ChartBuilder.initChart(chart, options);\n        if (options.series) {\n            chart.series = options.series.map(function (s) { return ChartBuilder.initScatterSeries(new ScatterSeries(), s); });\n        }\n        return chart;\n    };\n    ChartBuilder.createAreaChart = function (parent, options) {\n        var chart = this.createCartesianChart(parent, ChartBuilder.createCategoryAxis(options.xAxis), ChartBuilder.createNumberAxis(options.yAxis), options.document);\n        ChartBuilder.initChart(chart, options);\n        if (options.series) {\n            chart.series = options.series.map(function (s) { return ChartBuilder.initAreaSeries(new AreaSeries(), s); });\n        }\n        return chart;\n    };\n    ChartBuilder.createPolarChart = function (parent) {\n        var chart = new PolarChart();\n        chart.parent = parent;\n        return chart;\n    };\n    ChartBuilder.createDoughnutChart = function (parent, options) {\n        return this.createPieChart(parent, options);\n    };\n    ChartBuilder.createPieChart = function (parent, options) {\n        var chart = this.createPolarChart(parent);\n        ChartBuilder.initChart(chart, options);\n        if (options.series) {\n            chart.series = options.series.map(function (s) { return ChartBuilder.initPieSeries(new PieSeries(), s); });\n        }\n        return chart;\n    };\n    ChartBuilder.createGroupedColumnChart = function (parent, options) {\n        var chart = this.createGroupedCategoryChart(parent, ChartBuilder.createGroupedAxis(options.xAxis), ChartBuilder.createNumberAxis(options.yAxis), options.document);\n        ChartBuilder.initChart(chart, options);\n        if (options.series) {\n            chart.series = options.series.map(function (s) { return ChartBuilder.initBarSeries(new ColumnSeries(), s); });\n        }\n        return chart;\n    };\n    ChartBuilder.createGroupedBarChart = function (parent, options) {\n        var chart = this.createGroupedCategoryChart(parent, ChartBuilder.createNumberAxis(options.xAxis), ChartBuilder.createGroupedAxis(options.yAxis), options.document);\n        chart.layout = CartesianChartLayout.Horizontal;\n        ChartBuilder.initChart(chart, options);\n        if (options.series) {\n            chart.series = options.series.map(function (s) { return ChartBuilder.initBarSeries(new ColumnSeries(), s); });\n        }\n        return chart;\n    };\n    ChartBuilder.createGroupedLineChart = function (parent, options) {\n        var chart = this.createGroupedCategoryChart(parent, ChartBuilder.createGroupedAxis(options.xAxis), ChartBuilder.createNumberAxis(options.yAxis), options.document);\n        ChartBuilder.initChart(chart, options);\n        if (options.series) {\n            chart.series = options.series.map(function (s) { return ChartBuilder.initLineSeries(new LineSeries(), s); });\n        }\n        return chart;\n    };\n    ChartBuilder.createGroupedAreaChart = function (parent, options) {\n        var chart = this.createGroupedCategoryChart(parent, ChartBuilder.createGroupedAxis(options.xAxis), ChartBuilder.createNumberAxis(options.yAxis), options.document);\n        ChartBuilder.initChart(chart, options);\n        if (options.series) {\n            chart.series = options.series.map(function (s) { return ChartBuilder.initAreaSeries(new AreaSeries(), s); });\n        }\n        return chart;\n    };\n    ChartBuilder.createSeries = function (options) {\n        switch (options && options.type) {\n            case 'line':\n                return ChartBuilder.initLineSeries(new LineSeries(), options);\n            case 'scatter':\n                return ChartBuilder.initScatterSeries(new ScatterSeries(), options);\n            case 'bar':\n                return ChartBuilder.initBarSeries(new ColumnSeries(), options);\n            case 'area':\n                return ChartBuilder.initAreaSeries(new AreaSeries(), options);\n            case 'pie':\n                return ChartBuilder.initPieSeries(new PieSeries(), options);\n            default:\n                return null;\n        }\n    };\n    ChartBuilder.initChart = function (chart, options) {\n        this.setValueIfExists(chart, 'width', options.width);\n        this.setValueIfExists(chart, 'height', options.height);\n        this.setValueIfExists(chart, 'tooltipClass', options.tooltipClass);\n        this.setTransformedValueIfExists(chart, 'title', function (t) { return ChartBuilder.createTitle(t); }, options.title);\n        this.setTransformedValueIfExists(chart, 'subtitle', function (t) { return ChartBuilder.createSubtitle(t); }, options.subtitle);\n        this.setTransformedValueIfExists(chart, 'padding', function (p) { return new Padding(p.top, p.right, p.bottom, p.left); }, options.padding);\n        if (options.background) {\n            this.setValueIfExists(chart.background, 'fill', options.background.fill);\n            this.setValueIfExists(chart.background, 'visible', options.background.visible);\n        }\n        if (options.legend !== undefined) {\n            ChartBuilder.initLegend(chart.legend, options.legend);\n        }\n        return chart;\n    };\n    ChartBuilder.initSeries = function (series, options) {\n        this.setValueIfExists(series, 'visible', options.visible);\n        this.setValueIfExists(series, 'showInLegend', options.showInLegend);\n        this.setValueIfExists(series, 'data', options.data);\n        return series;\n    };\n    ChartBuilder.initLineSeries = function (series, options) {\n        ChartBuilder.initSeries(series, options);\n        this.setValueIfExists(series, 'title', options.title);\n        var field = options.field, fill = options.fill, stroke = options.stroke, highlightStyle = options.highlightStyle, marker = options.marker, tooltip = options.tooltip;\n        if (field) {\n            this.setValueIfExists(series, 'xKey', field.xKey);\n            this.setValueIfExists(series, 'xName', field.xName);\n            this.setValueIfExists(series, 'yKey', field.yKey);\n            this.setValueIfExists(series, 'yName', field.yName);\n        }\n        if (fill) {\n            this.setValueIfExists(series, 'fill', fill.color);\n            // default marker to same fill as series\n            this.setValueIfExists(series.marker, 'fill', fill.color);\n        }\n        if (stroke) {\n            this.setValueIfExists(series, 'stroke', stroke.color);\n            this.setValueIfExists(series, 'strokeWidth', stroke.width);\n            // default marker to same stroke as series\n            this.setValueIfExists(series.marker, 'stroke', stroke.color);\n            this.setValueIfExists(series.marker, 'strokeWidth', stroke.width);\n        }\n        if (highlightStyle) {\n            this.initHighlightStyle(series.highlightStyle, highlightStyle);\n        }\n        if (marker) {\n            this.initMarker(series.marker, marker);\n        }\n        if (tooltip) {\n            this.setValueIfExists(series, 'tooltipEnabled', tooltip.enabled);\n            this.setValueIfExists(series, 'tooltipRenderer', tooltip.renderer);\n        }\n        return series;\n    };\n    ChartBuilder.initScatterSeries = function (series, options) {\n        ChartBuilder.initSeries(series, options);\n        this.setValueIfExists(series, 'title', options.title);\n        var field = options.field, fill = options.fill, stroke = options.stroke, highlightStyle = options.highlightStyle, marker = options.marker, tooltip = options.tooltip;\n        if (field) {\n            this.setValueIfExists(series, 'xKey', field.xKey);\n            this.setValueIfExists(series, 'xName', field.xName);\n            this.setValueIfExists(series, 'yKey', field.yKey);\n            this.setValueIfExists(series, 'yName', field.yName);\n            this.setValueIfExists(series, 'sizeKey', field.sizeKey);\n            this.setValueIfExists(series, 'sizeName', field.sizeName);\n            this.setValueIfExists(series, 'labelKey', field.labelKey);\n            this.setValueIfExists(series, 'labelName', field.labelName);\n        }\n        if (fill) {\n            // default marker to same fill as series\n            this.setValueIfExists(series.marker, 'fill', fill.color);\n        }\n        if (stroke) {\n            // default marker to same stroke as series\n            this.setValueIfExists(series.marker, 'stroke', stroke.color);\n            this.setValueIfExists(series.marker, 'strokeWidth', stroke.width);\n        }\n        if (highlightStyle) {\n            this.initHighlightStyle(series.highlightStyle, highlightStyle);\n        }\n        if (marker) {\n            this.initMarker(series.marker, marker);\n        }\n        if (tooltip) {\n            this.setValueIfExists(series, 'tooltipEnabled', tooltip.enabled);\n            this.setValueIfExists(series, 'tooltipRenderer', tooltip.renderer);\n        }\n        return series;\n    };\n    ChartBuilder.initLabelOptions = function (series, options) {\n        this.setValueIfExists(series, 'enabled', options.enabled);\n        this.setValueIfExists(series, 'fontStyle', options.fontStyle);\n        this.setValueIfExists(series, 'fontWeight', options.fontWeight);\n        this.setValueIfExists(series, 'fontSize', options.fontSize);\n        this.setValueIfExists(series, 'fontFamily', options.fontFamily);\n        this.setValueIfExists(series, 'color', options.color);\n    };\n    ChartBuilder.initBarSeries = function (series, options) {\n        ChartBuilder.initSeries(series, options);\n        this.setValueIfExists(series, 'grouped', options.grouped);\n        this.setValueIfExists(series, 'normalizedTo', options.normalizedTo);\n        var field = options.field, fill = options.fill, stroke = options.stroke, highlightStyle = options.highlightStyle, label = options.label, tooltip = options.tooltip;\n        if (field) {\n            this.setValueIfExists(series, 'xKey', field.xKey);\n            this.setValueIfExists(series, 'yKeys', field.yKeys);\n            this.setValueIfExists(series, 'yNames', field.yNames);\n        }\n        if (fill) {\n            this.setValueIfExists(series, 'fills', fill.colors);\n            this.setValueIfExists(series, 'fillOpacity', fill.opacity);\n        }\n        if (stroke) {\n            this.setValueIfExists(series, 'strokes', stroke.colors);\n            this.setValueIfExists(series, 'strokeOpacity', stroke.opacity);\n            this.setValueIfExists(series, 'strokeWidth', stroke.width);\n        }\n        if (highlightStyle) {\n            this.initHighlightStyle(series.highlightStyle, highlightStyle);\n        }\n        if (label) {\n            ChartBuilder.initLabelOptions(series.label, label);\n            this.setValueIfExists(series.label, 'enabled', label.enabled);\n            this.setValueIfExists(series.label, 'formatter', label.formatter);\n        }\n        if (tooltip) {\n            this.setValueIfExists(series, 'tooltipEnabled', tooltip.enabled);\n            this.setValueIfExists(series, 'tooltipRenderer', tooltip.renderer);\n        }\n        this.setTransformedValueIfExists(series, 'shadow', function (s) { return ChartBuilder.createDropShadow(s); }, options.shadow);\n        return series;\n    };\n    ChartBuilder.initAreaSeries = function (series, options) {\n        ChartBuilder.initSeries(series, options);\n        this.setValueIfExists(series, 'normalizedTo', options.normalizedTo);\n        var field = options.field, fill = options.fill, stroke = options.stroke, highlightStyle = options.highlightStyle, marker = options.marker, tooltip = options.tooltip;\n        if (field) {\n            this.setValueIfExists(series, 'xKey', field.xKey);\n            this.setValueIfExists(series, 'yKeys', field.yKeys);\n            this.setValueIfExists(series, 'yNames', field.yNames);\n        }\n        if (fill) {\n            this.setValueIfExists(series, 'fills', fill.colors);\n            this.setValueIfExists(series, 'fillOpacity', fill.opacity);\n        }\n        if (stroke) {\n            this.setValueIfExists(series, 'strokes', stroke.colors);\n            this.setValueIfExists(series, 'strokeOpacity', stroke.opacity);\n            this.setValueIfExists(series, 'strokeWidth', stroke.width);\n        }\n        if (highlightStyle) {\n            this.initHighlightStyle(series.highlightStyle, highlightStyle);\n        }\n        if (marker) {\n            this.initMarker(series.marker, marker);\n        }\n        if (tooltip) {\n            this.setValueIfExists(series, 'tooltipEnabled', tooltip.enabled);\n            this.setValueIfExists(series, 'tooltipRenderer', tooltip.renderer);\n        }\n        this.setTransformedValueIfExists(series, 'shadow', function (s) { return ChartBuilder.createDropShadow(s); }, options.shadow);\n        return series;\n    };\n    ChartBuilder.initPieSeries = function (series, options) {\n        ChartBuilder.initSeries(series, options);\n        this.setTransformedValueIfExists(series, 'title', function (t) { return ChartBuilder.createPieTitle(t); }, options.title);\n        this.setValueIfExists(series, 'rotation', options.rotation);\n        this.setValueIfExists(series, 'outerRadiusOffset', options.outerRadiusOffset);\n        this.setValueIfExists(series, 'innerRadiusOffset', options.innerRadiusOffset);\n        var field = options.field, fill = options.fill, stroke = options.stroke, highlightStyle = options.highlightStyle, callout = options.callout, label = options.label, tooltip = options.tooltip;\n        if (field) {\n            this.setValueIfExists(series, 'angleKey', field.angleKey);\n            this.setValueIfExists(series, 'angleName', field.angleName);\n            this.setValueIfExists(series, 'radiusKey', field.radiusKey);\n            this.setValueIfExists(series, 'radiusName', field.radiusName);\n            this.setValueIfExists(series, 'labelKey', field.labelKey);\n            this.setValueIfExists(series, 'labelName', field.labelName);\n        }\n        if (fill) {\n            this.setValueIfExists(series, 'fills', fill.colors);\n            this.setValueIfExists(series, 'fillOpacity', fill.opacity);\n        }\n        if (stroke) {\n            this.setValueIfExists(series, 'strokes', stroke.colors);\n            this.setValueIfExists(series, 'strokeOpacity', stroke.opacity);\n            this.setValueIfExists(series, 'strokeWidth', stroke.width);\n        }\n        if (highlightStyle) {\n            this.initHighlightStyle(series.highlightStyle, highlightStyle);\n        }\n        if (callout) {\n            this.setValueIfExists(series, 'calloutColors', callout.colors);\n            this.setValueIfExists(series, 'calloutStrokeWidth', callout.strokeWidth);\n            this.setValueIfExists(series, 'calloutLength', callout.length);\n        }\n        if (label) {\n            ChartBuilder.initLabelOptions(series.label, label);\n            this.setValueIfExists(series.label, 'enabled', label.enabled);\n            this.setValueIfExists(series.label, 'minAngle', label.minRequiredAngle);\n            this.setValueIfExists(series.label, 'offset', label.offset);\n        }\n        if (tooltip) {\n            this.setValueIfExists(series, 'tooltipEnabled', tooltip.enabled);\n            this.setValueIfExists(series, 'tooltipRenderer', tooltip.renderer);\n        }\n        this.setTransformedValueIfExists(series, 'shadow', function (s) { return ChartBuilder.createDropShadow(s); }, options.shadow);\n        return series;\n    };\n    ChartBuilder.getMarkerFromType = function (type) {\n        return this.markerTypes.get(type) || Circle;\n    };\n    ChartBuilder.initLegend = function (legend, options) {\n        this.setValueIfExists(legend, 'enabled', options.enabled);\n        this.setValueIfExists(legend, 'position', options.position);\n        var item = options.item;\n        if (item) {\n            var label = item.label, marker = item.marker;\n            if (label) {\n                this.setValueIfExists(legend, 'labelFontFamily', label.fontFamily);\n                this.setValueIfExists(legend, 'labelFontSize', label.fontSize);\n                this.setValueIfExists(legend, 'labelFontStyle', label.fontStyle);\n                this.setValueIfExists(legend, 'labelFontWeight', label.fontWeight);\n                this.setValueIfExists(legend, 'labelColor', label.color);\n            }\n            if (marker) {\n                this.setValueIfExists(legend, 'markerType', ChartBuilder.getMarkerFromType(marker.type));\n                this.setValueIfExists(legend, 'markerStrokeWidth', marker.strokeWidth);\n                this.setValueIfExists(legend, 'markerSize', marker.size);\n                this.setValueIfExists(legend, 'markerPadding', marker.padding);\n            }\n            this.setValueIfExists(legend, 'itemPaddingX', item.paddingX);\n            this.setValueIfExists(legend, 'itemPaddingY', item.paddingY);\n        }\n    };\n    ChartBuilder.initMarker = function (marker, options) {\n        marker.type = ChartBuilder.getMarkerFromType(options.type);\n        this.setValueIfExists(marker, 'enabled', options.enabled);\n        this.setValueIfExists(marker, 'size', options.size);\n        this.setValueIfExists(marker, 'minSize', options.minSize);\n        this.setValueIfExists(marker, 'fill', options.fill);\n        this.setValueIfExists(marker, 'stroke', options.stroke);\n        this.setValueIfExists(marker, 'strokeWidth', options.strokeWidth);\n    };\n    ChartBuilder.initHighlightStyle = function (highlightStyle, options) {\n        this.setValueIfExists(highlightStyle, 'fill', options.fill);\n        this.setValueIfExists(highlightStyle, 'stroke', options.stroke);\n    };\n    ChartBuilder.setDefaultFontOptions = function (options, fontSize, fontWeight, fontFamily) {\n        if (fontSize === void 0) { fontSize = 16; }\n        if (fontWeight === void 0) { fontWeight = 'bold'; }\n        if (fontFamily === void 0) { fontFamily = 'Verdana, sans-serif'; }\n        if (options.fontSize === undefined) {\n            options.fontSize = fontSize;\n        }\n        if (options.fontWeight === undefined) {\n            options.fontWeight = fontWeight;\n        }\n        if (options.fontFamily === undefined) {\n            options.fontFamily = fontFamily;\n        }\n    };\n    ChartBuilder.createTitle = function (options) {\n        options = Object.create(options);\n        if (options.text === undefined) {\n            options.text = '';\n        }\n        this.setDefaultFontOptions(options);\n        return ChartBuilder.createCaption(options);\n    };\n    ChartBuilder.createSubtitle = function (options) {\n        options = Object.create(options);\n        if (options.text === undefined) {\n            options.text = '';\n        }\n        this.setDefaultFontOptions(options, 12);\n        return ChartBuilder.createCaption(options);\n    };\n    ChartBuilder.createPieTitle = function (options) {\n        options = Object.create(options);\n        this.setDefaultFontOptions(options, 12);\n        return ChartBuilder.createCaption(options);\n    };\n    ChartBuilder.createCaption = function (options) {\n        var caption = new Caption();\n        this.setValueIfExists(caption, 'enabled', options.enabled);\n        this.setValueIfExists(caption, 'text', options.text);\n        this.setValueIfExists(caption, 'fontStyle', options.fontStyle);\n        this.setValueIfExists(caption, 'fontWeight', options.fontWeight);\n        this.setValueIfExists(caption, 'fontSize', options.fontSize);\n        this.setValueIfExists(caption, 'fontFamily', options.fontFamily);\n        this.setValueIfExists(caption, 'color', options.color);\n        return caption;\n    };\n    ChartBuilder.initAxis = function (axis, options) {\n        this.setTransformedValueIfExists(axis, 'title', function (t) { return ChartBuilder.createTitle(t); }, options.title);\n        this.setValueIfExists(axis, 'gridStyle', options.gridStyle);\n        var line = options.line, tick = options.tick, label = options.label;\n        if (line) {\n            this.setValueIfExists(axis.line, 'width', line.width);\n            this.setValueIfExists(axis.line, 'color', line.color);\n        }\n        if (tick) {\n            this.setValueIfExists(axis.tick, 'width', tick.width);\n            this.setValueIfExists(axis.tick, 'size', tick.size);\n            this.setValueIfExists(axis.tick, 'color', tick.color);\n        }\n        if (label) {\n            this.setValueIfExists(axis.label, 'fontStyle', label.fontStyle);\n            this.setValueIfExists(axis.label, 'fontWeight', label.fontWeight);\n            this.setValueIfExists(axis.label, 'fontSize', label.fontSize);\n            this.setValueIfExists(axis.label, 'fontFamily', label.fontFamily);\n            this.setValueIfExists(axis.label, 'color', label.color);\n            this.setValueIfExists(axis.label, 'padding', label.padding);\n            this.setValueIfExists(axis.label, 'rotation', label.rotation);\n            this.setValueIfExists(axis.label, 'format', label.format);\n            this.setValueIfExists(axis.label, 'formatter', label.formatter);\n        }\n    };\n    ChartBuilder.createNumberAxis = function (options) {\n        var axis = new NumberAxis();\n        this.initAxis(axis, options);\n        return axis;\n    };\n    ChartBuilder.createCategoryAxis = function (options) {\n        var axis = new CategoryAxis();\n        this.initAxis(axis, options);\n        return axis;\n    };\n    ChartBuilder.createGroupedAxis = function (options) {\n        var axis = new GroupedCategoryAxis();\n        this.initAxis(axis, options);\n        return axis;\n    };\n    ChartBuilder.createTimeAxis = function (options) {\n        var axis = new TimeAxis();\n        this.initAxis(axis, options);\n        return axis;\n    };\n    ChartBuilder.createAxis = function (options, defaultType) {\n        var axis;\n        switch (options.type || defaultType) {\n            case 'category':\n                axis = new CategoryAxis();\n                break;\n            case 'number':\n                axis = new NumberAxis();\n                break;\n            case 'time':\n                axis = new TimeAxis();\n                break;\n            default:\n                throw new Error('Unknown axis type');\n        }\n        this.initAxis(axis, options);\n        return axis;\n    };\n    ChartBuilder.setValueIfExists = function (target, property, value, transform) {\n        if (value === undefined) {\n            return;\n        }\n        target[property] = transform ? transform(value) : value;\n    };\n    ChartBuilder.setTransformedValueIfExists = function (target, property, transform, value) {\n        if (value === undefined) {\n            return;\n        }\n        target[property] = transform(value);\n    };\n    ChartBuilder.markerTypes = convertToMap([\n        ['circle', Circle],\n        ['cross', Cross],\n        ['diamond', Diamond],\n        ['plus', Plus],\n        ['square', Square],\n        ['triangle', Triangle]\n    ]);\n    ChartBuilder.createDropShadow = function (options) {\n        if (options === void 0) { options = {}; }\n        var shadow = new DropShadow();\n        shadow.enabled = options.enabled == null ? true : options.enabled;\n        shadow.xOffset = options.xOffset || 0;\n        shadow.yOffset = options.yOffset || 0;\n        shadow.blur = options.blur || 5;\n        shadow.color = options.color || 'rgba(0, 0, 0, 0.5)';\n        return shadow;\n    };\n    return ChartBuilder;\n}());\n\nvar __assign$1 = (undefined && undefined.__assign) || function () {\n    __assign$1 = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign$1.apply(this, arguments);\n};\nvar ChartProxy = /** @class */ (function () {\n    function ChartProxy(chartProxyParams) {\n        var _this = this;\n        this.getChart = function () { return _this.chart; };\n        this.isDarkTheme = function () { return _this.chartProxyParams.isDarkTheme(); };\n        this.getFontColor = function () { return _this.isDarkTheme() ? 'rgb(221, 221, 221)' : 'rgb(87, 87, 87)'; };\n        this.getAxisGridColor = function () { return _this.isDarkTheme() ? 'rgb(100, 100, 100)' : 'rgb(219, 219, 219)'; };\n        this.getBackgroundColor = function () { return _this.isDarkTheme() ? '#2d3436' : 'white'; };\n        this.getChartPaddingOption = function (property) { return _this.chartOptions.padding ? \"\" + _this.chartOptions.padding[property] : ''; };\n        this.getShadowEnabled = function () { return !!_this.getShadowProperty('enabled'); };\n        this.chartProxyParams = chartProxyParams;\n        this.chartType = chartProxyParams.chartType;\n    }\n    ChartProxy.prototype.recreateChart = function (options) {\n        if (this.chart) {\n            this.destroyChart();\n        }\n        this.chart = this.createChart(options || this.chartOptions);\n    };\n    ChartProxy.prototype.initChartOptions = function () {\n        var processChartOptions = this.chartProxyParams.processChartOptions;\n        // allow users to override options before they are applied\n        if (processChartOptions) {\n            var params = { type: this.chartType, options: this.getDefaultOptions() };\n            var overriddenOptions = processChartOptions(params);\n            var safeOptions = this.getDefaultOptions();\n            // ensure we have everything we need, in case the processing removed necessary options\n            agGridCommunity._.mergeDeep(safeOptions, overriddenOptions, false);\n            this.overridePalette(safeOptions);\n            this.chartOptions = safeOptions;\n        }\n        else {\n            this.chartOptions = this.getDefaultOptions();\n        }\n        // we want to preserve the existing width/height if an existing chart is being changed to a different type,\n        // so this allows the chart defaults to be overridden\n        this.chartOptions.width = this.chartProxyParams.width || this.chartOptions.width;\n        this.chartOptions.height = this.chartProxyParams.height || this.chartOptions.height;\n    };\n    ChartProxy.prototype.overridePalette = function (chartOptions) {\n        if (!this.chartProxyParams.allowPaletteOverride) {\n            return;\n        }\n        var _a = this.getPredefinedPalette(), defaultFills = _a.fills, defaultStrokes = _a.strokes;\n        var seriesDefaults = chartOptions.seriesDefaults;\n        var fills = seriesDefaults.fill.colors, strokes = seriesDefaults.stroke.colors;\n        var fillsOverridden = fills && fills.length > 0 && fills !== defaultFills;\n        var strokesOverridden = strokes && strokes.length > 0 && strokes !== defaultStrokes;\n        if (fillsOverridden || strokesOverridden) {\n            this.customPalette = {\n                fills: fillsOverridden ? fills : defaultFills,\n                strokes: strokesOverridden ? strokes : defaultStrokes\n            };\n        }\n    };\n    ChartProxy.prototype.getChartOptions = function () {\n        return this.chartOptions;\n    };\n    ChartProxy.prototype.getCustomPalette = function () {\n        return this.customPalette;\n    };\n    ChartProxy.prototype.getChartOption = function (expression) {\n        return agGridCommunity._.get(this.chartOptions, expression, undefined);\n    };\n    ChartProxy.prototype.setChartOption = function (expression, value) {\n        agGridCommunity._.set(this.chartOptions, expression, value);\n        var mappings = {\n            'legend.item.marker.strokeWidth': 'legend.markerStrokeWidth',\n            'legend.item.marker.size': 'legend.markerSize',\n            'legend.item.marker.padding': 'legend.markerPadding',\n            'legend.item.label.fontFamily': 'legend.labelFontFamily',\n            'legend.item.label.fontStyle': 'legend.labelFontStyle',\n            'legend.item.label.fontWeight': 'legend.labelFontWeight',\n            'legend.item.label.fontSize': 'legend.labelFontSize',\n            'legend.item.label.color': 'legend.labelColor',\n            'legend.item.paddingX': 'legend.itemPaddingX',\n            'legend.item.paddingY': 'legend.itemPaddingY',\n        };\n        agGridCommunity._.set(this.chart, mappings[expression] || expression, value);\n        this.raiseChartOptionsChangedEvent();\n    };\n    ChartProxy.prototype.getSeriesOption = function (expression) {\n        return agGridCommunity._.get(this.chartOptions.seriesDefaults, expression, undefined);\n    };\n    ChartProxy.prototype.setSeriesOption = function (expression, value) {\n        agGridCommunity._.set(this.chartOptions.seriesDefaults, expression, value);\n        var mappings = {\n            'stroke.width': 'strokeWidth',\n            'stroke.opacity': 'strokeOpacity',\n            'fill.opacity': 'fillOpacity',\n            'tooltip.enabled': 'tooltipEnabled',\n            'callout.colors': 'calloutColors',\n            'callout.strokeWidth': 'calloutStrokeWidth',\n            'callout.length': 'calloutLength',\n        };\n        var series = this.chart.series;\n        series.forEach(function (s) { return agGridCommunity._.set(s, mappings[expression] || expression, value); });\n        this.raiseChartOptionsChangedEvent();\n    };\n    ChartProxy.prototype.setTitleOption = function (property, value) {\n        this.chartOptions.title[property] = value;\n        if (!this.chart.title) {\n            this.chart.title = {};\n        }\n        this.chart.title[property] = value;\n        if (property === 'text') {\n            this.setTitleOption('enabled', agGridCommunity._.exists(value));\n        }\n        this.raiseChartOptionsChangedEvent();\n    };\n    ChartProxy.prototype.setChartPaddingOption = function (property, value) {\n        var padding = this.chartOptions.padding;\n        if (!padding) {\n            padding = this.chartOptions.padding = { top: 0, right: 0, bottom: 0, left: 0 };\n            this.chart.padding = new Padding(0);\n        }\n        padding[property] = value;\n        this.chart.padding[property] = value;\n        this.chart.performLayout();\n        this.raiseChartOptionsChangedEvent();\n    };\n    ChartProxy.prototype.getShadowProperty = function (property) {\n        var seriesDefaults = this.chartOptions.seriesDefaults;\n        return seriesDefaults.shadow ? seriesDefaults.shadow[property] : '';\n    };\n    ChartProxy.prototype.setShadowProperty = function (property, value) {\n        var seriesDefaults = this.chartOptions.seriesDefaults;\n        if (!seriesDefaults.shadow) {\n            seriesDefaults.shadow = {\n                enabled: false,\n                blur: 0,\n                xOffset: 0,\n                yOffset: 0,\n                color: 'rgba(0,0,0,0.5)'\n            };\n        }\n        seriesDefaults.shadow[property] = value;\n        var series = this.getChart().series;\n        series.forEach(function (s) {\n            if (!s.shadow) {\n                var shadow = new DropShadow();\n                shadow.enabled = false;\n                shadow.blur = 0;\n                shadow.xOffset = 0;\n                shadow.yOffset = 0;\n                shadow.color = 'rgba(0,0,0,0.5)';\n                s.shadow = shadow;\n            }\n            s.shadow[property] = value;\n        });\n        this.raiseChartOptionsChangedEvent();\n    };\n    ChartProxy.prototype.raiseChartOptionsChangedEvent = function () {\n        var event = Object.freeze({\n            type: agGridCommunity.Events.EVENT_CHART_OPTIONS_CHANGED,\n            chartType: this.chartType,\n            chartPalette: this.chartProxyParams.getChartPaletteName(),\n            chartOptions: this.chartOptions,\n        });\n        this.chartProxyParams.eventService.dispatchEvent(event);\n    };\n    ChartProxy.prototype.getDefaultFontOptions = function () {\n        return {\n            fontStyle: 'normal',\n            fontWeight: 'normal',\n            fontSize: 12,\n            fontFamily: 'Verdana, sans-serif',\n            color: this.getFontColor()\n        };\n    };\n    ChartProxy.prototype.getDefaultDropShadowOptions = function () {\n        return {\n            enabled: false,\n            blur: 5,\n            xOffset: 3,\n            yOffset: 3,\n            color: 'rgba(0, 0, 0, 0.5)',\n        };\n    };\n    ChartProxy.prototype.getPredefinedPalette = function () {\n        return palettes.get(this.chartProxyParams.getChartPaletteName());\n    };\n    ChartProxy.prototype.getPalette = function () {\n        return this.customPalette || this.getPredefinedPalette();\n    };\n    ChartProxy.prototype.getDefaultChartOptions = function () {\n        var _a = this.getPredefinedPalette(), fills = _a.fills, strokes = _a.strokes;\n        var fontOptions = this.getDefaultFontOptions();\n        return {\n            background: {\n                fill: this.getBackgroundColor(),\n                visible: true,\n            },\n            width: 800,\n            height: 400,\n            padding: {\n                top: 20,\n                right: 20,\n                bottom: 20,\n                left: 20,\n            },\n            title: __assign$1(__assign$1({}, fontOptions), { enabled: false, fontWeight: 'bold', fontSize: 16 }),\n            subtitle: __assign$1(__assign$1({}, fontOptions), { enabled: false }),\n            legend: {\n                enabled: true,\n                position: 'right',\n                padding: 20,\n                item: {\n                    label: __assign$1({}, fontOptions),\n                    marker: {\n                        type: 'square',\n                        size: 15,\n                        padding: 8,\n                        strokeWidth: 1,\n                    },\n                    paddingX: 16,\n                    paddingY: 8,\n                },\n            },\n            seriesDefaults: {\n                fill: {\n                    colors: fills,\n                    opacity: 1,\n                },\n                stroke: {\n                    colors: strokes,\n                    opacity: 1,\n                    width: 1,\n                },\n                highlightStyle: {\n                    fill: 'yellow',\n                }\n            }\n        };\n    };\n    ChartProxy.prototype.transformData = function (data, categoryKey) {\n        if (this.chart.axes.filter(function (a) { return a instanceof CategoryAxis; }).length < 1) {\n            return data;\n        }\n        // replace the values for the selected category with a complex object to allow for duplicated categories\n        return data.map(function (d, index) {\n            var value = d[categoryKey];\n            var valueString = value && value.toString ? value.toString() : '';\n            var datum = __assign$1({}, d);\n            datum[categoryKey] = { id: index, value: value, toString: function () { return valueString; } };\n            return datum;\n        });\n    };\n    ChartProxy.prototype.destroy = function () {\n        this.destroyChart();\n    };\n    ChartProxy.prototype.destroyChart = function () {\n        var parentElement = this.chartProxyParams.parentElement;\n        var canvas = parentElement.querySelector('canvas');\n        if (canvas) {\n            parentElement.removeChild(canvas);\n        }\n        // store current width and height so any charts created in the future maintain the size\n        if (this.chart) {\n            this.chartOptions.width = this.chart.width;\n            this.chartOptions.height = this.chart.height;\n            this.chart.destroy();\n            this.chart = null;\n        }\n    };\n    return ChartProxy;\n}());\n\nvar __extends$1f = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign$2 = (undefined && undefined.__assign) || function () {\n    __assign$2 = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign$2.apply(this, arguments);\n};\nvar CartesianChartProxy = /** @class */ (function (_super) {\n    __extends$1f(CartesianChartProxy, _super);\n    function CartesianChartProxy(params) {\n        return _super.call(this, params) || this;\n    }\n    CartesianChartProxy.prototype.getAxisProperty = function (expression) {\n        return agGridCommunity._.get(this.chartOptions.xAxis, expression, undefined);\n    };\n    CartesianChartProxy.prototype.setAxisProperty = function (expression, value) {\n        agGridCommunity._.set(this.chartOptions.xAxis, expression, value);\n        agGridCommunity._.set(this.chartOptions.yAxis, expression, value);\n        var chart = this.chart;\n        this.chart.axes.forEach(function (axis) { return agGridCommunity._.set(axis, expression, value); });\n        chart.performLayout();\n        this.raiseChartOptionsChangedEvent();\n    };\n    CartesianChartProxy.prototype.updateLabelRotation = function (categoryId, isHorizontalChart) {\n        if (isHorizontalChart === void 0) { isHorizontalChart = false; }\n        var labelRotation = 0;\n        var axisKey = isHorizontalChart ? 'yAxis' : 'xAxis';\n        if (categoryId !== ChartDataModel.DEFAULT_CATEGORY && !this.chartProxyParams.grouping) {\n            var label = this.chartOptions[axisKey].label;\n            if (label && label.rotation) {\n                labelRotation = label.rotation;\n            }\n        }\n        var axisPosition = isHorizontalChart ? ChartAxisPosition.Left : ChartAxisPosition.Bottom;\n        var axis = find(this.chart.axes, function (axis) { return axis.position === axisPosition; });\n        if (axis) {\n            axis.label.rotation = labelRotation;\n        }\n    };\n    CartesianChartProxy.prototype.getDefaultAxisOptions = function () {\n        var fontOptions = this.getDefaultFontOptions();\n        var stroke = this.getAxisGridColor();\n        var axisColor = \"rgba(195, 195, 195, 1)\";\n        return {\n            title: __assign$2(__assign$2({}, fontOptions), { enabled: false, fontSize: 14 }),\n            line: {\n                color: axisColor,\n                width: 1,\n            },\n            tick: {\n                color: axisColor,\n                size: 6,\n                width: 1,\n            },\n            label: __assign$2(__assign$2({}, fontOptions), { padding: 5, rotation: 0 }),\n            gridStyle: [{\n                    stroke: stroke,\n                    lineDash: [4, 2]\n                }]\n        };\n    };\n    CartesianChartProxy.prototype.getDefaultCartesianChartOptions = function () {\n        var options = this.getDefaultChartOptions();\n        options.xAxis = this.getDefaultAxisOptions();\n        options.yAxis = this.getDefaultAxisOptions();\n        return options;\n    };\n    return CartesianChartProxy;\n}(ChartProxy));\n\nfunction isDate(value) {\n    return value instanceof Date;\n}\n\nvar __extends$1g = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign$3 = (undefined && undefined.__assign) || function () {\n    __assign$3 = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign$3.apply(this, arguments);\n};\nvar ScatterChartProxy = /** @class */ (function (_super) {\n    __extends$1g(ScatterChartProxy, _super);\n    function ScatterChartProxy(params) {\n        var _this = _super.call(this, params) || this;\n        _this.getMarkersEnabled = function () { return true; }; // markers are always enabled on scatter charts\n        _this.initChartOptions();\n        _this.recreateChart();\n        return _this;\n    }\n    ScatterChartProxy.prototype.createChart = function (options) {\n        return ChartBuilder.createScatterChart(this.chartProxyParams.parentElement, options);\n    };\n    ScatterChartProxy.prototype.update = function (params) {\n        if (params.fields.length < 2) {\n            this.chart.removeAllSeries();\n            return;\n        }\n        var fields = params.fields;\n        var seriesDefaults = this.chartOptions.seriesDefaults;\n        var seriesDefinitions = this.getSeriesDefinitions(fields, seriesDefaults.paired);\n        this.updateAxes(params.data[0], seriesDefinitions.map(function (d) { return d.xField.colId; }));\n        var chart = this.chart;\n        var _a = this.getPalette(), fills = _a.fills, strokes = _a.strokes;\n        var seriesOptions = __assign$3({ type: \"scatter\" }, seriesDefaults);\n        var labelFieldDefinition = params.category.id === ChartDataModel.DEFAULT_CATEGORY ? undefined : params.category;\n        var existingSeriesById = chart.series.reduceRight(function (map, series, i) {\n            var matchingIndex = agGridCommunity._.findIndex(seriesDefinitions, function (s) {\n                return s.xField.colId === series.xKey &&\n                    s.yField.colId === series.yKey &&\n                    ((!s.sizeField && !series.sizeKey) || (s.sizeField && s.sizeField.colId === series.sizeKey));\n            });\n            if (matchingIndex === i) {\n                map.set(series.yKey, series);\n            }\n            else {\n                chart.removeSeries(series);\n            }\n            return map;\n        }, new Map());\n        var previousSeries = undefined;\n        seriesDefinitions.forEach(function (seriesDefinition, index) {\n            var existingSeries = existingSeriesById.get(seriesDefinition.yField.colId);\n            var series = existingSeries || ChartBuilder.createSeries(seriesOptions);\n            if (!series) {\n                return;\n            }\n            var xFieldDefinition = seriesDefinition.xField, yFieldDefinition = seriesDefinition.yField, sizeFieldDefinition = seriesDefinition.sizeField;\n            series.title = yFieldDefinition.displayName + \" vs \" + xFieldDefinition.displayName;\n            series.xKey = xFieldDefinition.colId;\n            series.xName = xFieldDefinition.displayName;\n            series.yKey = yFieldDefinition.colId;\n            series.yName = yFieldDefinition.displayName;\n            series.data = params.data;\n            series.fill = fills[index % fills.length];\n            series.stroke = strokes[index % strokes.length];\n            if (sizeFieldDefinition) {\n                series.sizeKey = sizeFieldDefinition.colId;\n                series.sizeName = sizeFieldDefinition.displayName;\n            }\n            else {\n                series.sizeKey = series.sizeName = undefined;\n            }\n            if (labelFieldDefinition) {\n                series.labelKey = labelFieldDefinition.id;\n                series.labelName = labelFieldDefinition.name;\n            }\n            else {\n                series.labelKey = series.labelName = undefined;\n            }\n            if (!existingSeries) {\n                chart.addSeriesAfter(series, previousSeries);\n            }\n            previousSeries = series;\n        });\n    };\n    ScatterChartProxy.prototype.updateAxes = function (testDatum, xKeys) {\n        var chartOptions = this.chartOptions;\n        if (chartOptions.xAxis.type) {\n            return;\n        }\n        var xAxis = this.chart.axes.filter(function (a) { return a.position === 'bottom'; })[0];\n        if (!xAxis) {\n            return;\n        }\n        var xValuesAreDates = xKeys.map(function (xKey) { return testDatum && testDatum[xKey]; }).every(function (test) { return isDate(test); });\n        if (xValuesAreDates && !(xAxis instanceof TimeAxis)) {\n            var options = __assign$3(__assign$3({}, this.chartOptions), { xAxis: __assign$3(__assign$3({}, this.chartOptions.xAxis), { type: 'time' }) });\n            this.recreateChart(options);\n        }\n        else if (!xValuesAreDates && !(xAxis instanceof NumberAxis)) {\n            this.recreateChart();\n        }\n    };\n    ScatterChartProxy.prototype.getTooltipsEnabled = function () {\n        return this.chartOptions.seriesDefaults.tooltip != null && !!this.chartOptions.seriesDefaults.tooltip.enabled;\n    };\n    ScatterChartProxy.prototype.getDefaultOptions = function () {\n        var isBubble = this.chartType === agGridCommunity.ChartType.Bubble;\n        var options = this.getDefaultCartesianChartOptions();\n        options.seriesDefaults = __assign$3(__assign$3({}, options.seriesDefaults), { fill: __assign$3(__assign$3({}, options.seriesDefaults.fill), { opacity: isBubble ? 0.7 : 1 }), stroke: __assign$3(__assign$3({}, options.seriesDefaults.stroke), { width: 3 }), marker: {\n                type: 'circle',\n                enabled: true,\n                size: isBubble ? 30 : 6,\n                minSize: isBubble ? 6 : undefined,\n                strokeWidth: 1,\n            }, tooltip: {\n                enabled: true,\n            }, paired: false });\n        return options;\n    };\n    ScatterChartProxy.prototype.getSeriesDefinitions = function (fields, paired) {\n        if (fields.length < 2) {\n            return [];\n        }\n        var isBubbleChart = this.chartType === agGridCommunity.ChartType.Bubble;\n        if (paired) {\n            if (isBubbleChart) {\n                return fields.map(function (xField, i) { return i % 3 === 0 ? ({\n                    xField: xField,\n                    yField: fields[i + 1],\n                    sizeField: fields[i + 2],\n                }) : null; }).filter(function (x) { return x && x.yField && x.sizeField; });\n            }\n            else {\n                return fields.map(function (xField, i) { return i % 2 === 0 ? ({\n                    xField: xField,\n                    yField: fields[i + 1],\n                }) : null; }).filter(function (x) { return x && x.yField; });\n            }\n        }\n        else {\n            var xField_1 = fields[0];\n            if (isBubbleChart) {\n                return fields\n                    .map(function (yField, i) { return i % 2 === 1 ? ({\n                    xField: xField_1,\n                    yField: yField,\n                    sizeField: fields[i + 1],\n                }) : null; })\n                    .filter(function (x) { return x && x.sizeField; });\n            }\n            else {\n                return fields.filter(function (_, i) { return i > 0; }).map(function (yField) { return ({ xField: xField_1, yField: yField }); });\n            }\n        }\n    };\n    return ScatterChartProxy;\n}(CartesianChartProxy));\n\nvar __extends$1h = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$X = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MarkersPanel = /** @class */ (function (_super) {\n    __extends$1h(MarkersPanel, _super);\n    function MarkersPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.chartController = chartController;\n        return _this;\n    }\n    MarkersPanel.prototype.init = function () {\n        this.setTemplate(MarkersPanel.TEMPLATE);\n        this.initMarkers();\n    };\n    MarkersPanel.prototype.initMarkers = function () {\n        var _this = this;\n        // scatter charts should always show markers\n        var shouldHideEnabledCheckbox = this.chartController.getChartProxy() instanceof ScatterChartProxy;\n        this.seriesMarkersGroup\n            .setTitle(this.chartTranslator.translate(\"markers\"))\n            .hideEnabledCheckbox(shouldHideEnabledCheckbox)\n            .setEnabled(this.chartController.getChartProxy().getSeriesOption(\"marker.enabled\") || false)\n            .hideOpenCloseIcons(true)\n            .onEnableChange(function (newValue) { return _this.chartController.getChartProxy().setSeriesOption(\"marker.enabled\", newValue); });\n        var initInput = function (expression, input, labelKey, maxValue) {\n            input.setLabel(_this.chartTranslator.translate(labelKey))\n                .setValue(_this.chartController.getChartProxy().getSeriesOption(expression))\n                .setMaxValue(maxValue)\n                .setTextFieldWidth(45)\n                .onValueChange(function (newValue) { return _this.chartController.getChartProxy().setSeriesOption(expression, newValue); });\n        };\n        if (this.chartController.getChartType() === agGridCommunity.ChartType.Bubble) {\n            initInput(\"marker.minSize\", this.seriesMarkerMinSizeSlider, \"minSize\", 60);\n            initInput(\"marker.size\", this.seriesMarkerSizeSlider, \"maxSize\", 60);\n        }\n        else {\n            this.seriesMarkerMinSizeSlider.setDisplayed(false);\n            initInput(\"marker.size\", this.seriesMarkerSizeSlider, \"size\", 60);\n        }\n        initInput(\"marker.strokeWidth\", this.seriesMarkerStrokeWidthSlider, \"strokeWidth\", 10);\n    };\n    MarkersPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"seriesMarkersGroup\\\">\\n                <ag-slider ref=\\\"seriesMarkerMinSizeSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesMarkerSizeSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesMarkerStrokeWidthSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n    __decorate$X([\n        agGridCommunity.RefSelector('seriesMarkersGroup')\n    ], MarkersPanel.prototype, \"seriesMarkersGroup\", void 0);\n    __decorate$X([\n        agGridCommunity.RefSelector('seriesMarkerSizeSlider')\n    ], MarkersPanel.prototype, \"seriesMarkerSizeSlider\", void 0);\n    __decorate$X([\n        agGridCommunity.RefSelector('seriesMarkerMinSizeSlider')\n    ], MarkersPanel.prototype, \"seriesMarkerMinSizeSlider\", void 0);\n    __decorate$X([\n        agGridCommunity.RefSelector('seriesMarkerStrokeWidthSlider')\n    ], MarkersPanel.prototype, \"seriesMarkerStrokeWidthSlider\", void 0);\n    __decorate$X([\n        agGridCommunity.Autowired('chartTranslator')\n    ], MarkersPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$X([\n        agGridCommunity.PostConstruct\n    ], MarkersPanel.prototype, \"init\", null);\n    return MarkersPanel;\n}(agGridCommunity.Component));\n\nvar __extends$1i = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$Y = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar LineSeriesPanel = /** @class */ (function (_super) {\n    __extends$1i(LineSeriesPanel, _super);\n    function LineSeriesPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.activePanels = [];\n        _this.chartController = chartController;\n        return _this;\n    }\n    LineSeriesPanel.prototype.init = function () {\n        this.setTemplate(LineSeriesPanel.TEMPLATE);\n        this.initSeriesGroup();\n        this.initSeriesTooltips();\n        this.initSeriesLineWidth();\n        this.initMarkersPanel();\n    };\n    LineSeriesPanel.prototype.initSeriesGroup = function () {\n        this.seriesGroup\n            .setTitle(this.chartTranslator.translate(\"series\"))\n            .toggleGroupExpand(false)\n            .hideEnabledCheckbox(true);\n    };\n    LineSeriesPanel.prototype.initSeriesTooltips = function () {\n        var _this = this;\n        this.seriesTooltipsToggle\n            .setLabel(this.chartTranslator.translate(\"tooltips\"))\n            .setLabelAlignment(\"left\")\n            .setLabelWidth(\"flex\")\n            .setInputWidth(40)\n            .setValue(this.getChartProxy().getSeriesOption(\"tooltip.enabled\") || false)\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"tooltip.enabled\", newValue); });\n    };\n    LineSeriesPanel.prototype.initSeriesLineWidth = function () {\n        var _this = this;\n        this.seriesLineWidthSlider\n            .setLabel(this.chartTranslator.translate('lineWidth'))\n            .setMaxValue(10)\n            .setTextFieldWidth(45)\n            .setValue(this.getChartProxy().getSeriesOption(\"stroke.width\"))\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"stroke.width\", newValue); });\n    };\n    LineSeriesPanel.prototype.initMarkersPanel = function () {\n        var markersPanelComp = this.wireBean(new MarkersPanel(this.chartController));\n        this.seriesGroup.addItem(markersPanelComp);\n        this.activePanels.push(markersPanelComp);\n    };\n    LineSeriesPanel.prototype.destroyActivePanels = function () {\n        this.activePanels.forEach(function (panel) {\n            agGridCommunity._.removeFromParent(panel.getGui());\n            panel.destroy();\n        });\n    };\n    LineSeriesPanel.prototype.getChartProxy = function () {\n        return this.chartController.getChartProxy();\n    };\n    LineSeriesPanel.prototype.destroy = function () {\n        this.destroyActivePanels();\n        _super.prototype.destroy.call(this);\n    };\n    LineSeriesPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"seriesGroup\\\">\\n                <ag-toggle-button ref=\\\"seriesTooltipsToggle\\\"></ag-toggle-button>\\n                <ag-slider ref=\\\"seriesLineWidthSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n    __decorate$Y([\n        agGridCommunity.RefSelector('seriesGroup')\n    ], LineSeriesPanel.prototype, \"seriesGroup\", void 0);\n    __decorate$Y([\n        agGridCommunity.RefSelector('seriesTooltipsToggle')\n    ], LineSeriesPanel.prototype, \"seriesTooltipsToggle\", void 0);\n    __decorate$Y([\n        agGridCommunity.RefSelector('seriesLineWidthSlider')\n    ], LineSeriesPanel.prototype, \"seriesLineWidthSlider\", void 0);\n    __decorate$Y([\n        agGridCommunity.Autowired('chartTranslator')\n    ], LineSeriesPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$Y([\n        agGridCommunity.PostConstruct\n    ], LineSeriesPanel.prototype, \"init\", null);\n    return LineSeriesPanel;\n}(agGridCommunity.Component));\n\nvar __extends$1j = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$Z = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar CalloutPanel = /** @class */ (function (_super) {\n    __extends$1j(CalloutPanel, _super);\n    function CalloutPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.chartController = chartController;\n        return _this;\n    }\n    CalloutPanel.prototype.init = function () {\n        this.setTemplate(CalloutPanel.TEMPLATE);\n        this.initCalloutOptions();\n    };\n    CalloutPanel.prototype.initCalloutOptions = function () {\n        var _this = this;\n        this.calloutGroup\n            .setTitle(this.chartTranslator.translate(\"callout\"))\n            .setEnabled(true)\n            .hideOpenCloseIcons(true)\n            .hideEnabledCheckbox(true);\n        var initInput = function (expression, input, labelKey, maxValue) {\n            input.setLabel(_this.chartTranslator.translate(labelKey))\n                .setValue(_this.chartController.getChartProxy().getSeriesOption(expression))\n                .setMaxValue(maxValue)\n                .setTextFieldWidth(45)\n                .onValueChange(function (newValue) { return _this.chartController.getChartProxy().setSeriesOption(expression, newValue); });\n        };\n        initInput(\"callout.length\", this.calloutLengthSlider, \"length\", 40);\n        initInput(\"callout.strokeWidth\", this.calloutStrokeWidthSlider, \"strokeWidth\", 10);\n        initInput(\"label.offset\", this.labelOffsetSlider, \"offset\", 30);\n    };\n    CalloutPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"calloutGroup\\\">\\n                <ag-slider ref=\\\"calloutLengthSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"calloutStrokeWidthSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"labelOffsetSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n    __decorate$Z([\n        agGridCommunity.RefSelector('calloutGroup')\n    ], CalloutPanel.prototype, \"calloutGroup\", void 0);\n    __decorate$Z([\n        agGridCommunity.RefSelector('calloutLengthSlider')\n    ], CalloutPanel.prototype, \"calloutLengthSlider\", void 0);\n    __decorate$Z([\n        agGridCommunity.RefSelector('calloutStrokeWidthSlider')\n    ], CalloutPanel.prototype, \"calloutStrokeWidthSlider\", void 0);\n    __decorate$Z([\n        agGridCommunity.RefSelector('labelOffsetSlider')\n    ], CalloutPanel.prototype, \"labelOffsetSlider\", void 0);\n    __decorate$Z([\n        agGridCommunity.Autowired('chartTranslator')\n    ], CalloutPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$Z([\n        agGridCommunity.PostConstruct\n    ], CalloutPanel.prototype, \"init\", null);\n    return CalloutPanel;\n}(agGridCommunity.Component));\n\nvar __extends$1k = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$_ = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PieSeriesPanel = /** @class */ (function (_super) {\n    __extends$1k(PieSeriesPanel, _super);\n    function PieSeriesPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.activePanels = [];\n        _this.chartController = chartController;\n        return _this;\n    }\n    PieSeriesPanel.prototype.init = function () {\n        this.setTemplate(PieSeriesPanel.TEMPLATE);\n        this.initGroup();\n        this.initSeriesTooltips();\n        this.initSeriesStrokeWidth();\n        this.initOpacity();\n        this.initLabelPanel();\n        this.initShadowPanel();\n    };\n    PieSeriesPanel.prototype.initGroup = function () {\n        this.seriesGroup\n            .setTitle(this.chartTranslator.translate(\"series\"))\n            .toggleGroupExpand(false)\n            .hideEnabledCheckbox(true);\n    };\n    PieSeriesPanel.prototype.initSeriesTooltips = function () {\n        var _this = this;\n        this.seriesTooltipsToggle\n            .setLabel(this.chartTranslator.translate(\"tooltips\"))\n            .setLabelAlignment(\"left\")\n            .setLabelWidth(\"flex\")\n            .setInputWidth(40)\n            .setValue(this.getChartProxy().getSeriesOption(\"tooltip.enabled\") || false)\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"tooltip.enabled\", newValue); });\n    };\n    PieSeriesPanel.prototype.initSeriesStrokeWidth = function () {\n        var _this = this;\n        this.seriesStrokeWidthSlider\n            .setLabel(this.chartTranslator.translate(\"strokeWidth\"))\n            .setMaxValue(10)\n            .setTextFieldWidth(45)\n            .setValue(this.getChartProxy().getSeriesOption(\"stroke.width\"))\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"stroke.width\", newValue); });\n    };\n    PieSeriesPanel.prototype.initOpacity = function () {\n        var _this = this;\n        this.seriesLineOpacitySlider\n            .setLabel(this.chartTranslator.translate(\"strokeOpacity\"))\n            .setStep(0.05)\n            .setMaxValue(1)\n            .setTextFieldWidth(45)\n            .setValue(this.getChartProxy().getSeriesOption(\"stroke.opacity\") || \"1\")\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"stroke.opacity\", newValue); });\n        this.seriesFillOpacitySlider\n            .setLabel(this.chartTranslator.translate(\"fillOpacity\"))\n            .setStep(0.05)\n            .setMaxValue(1)\n            .setTextFieldWidth(45)\n            .setValue(this.getChartProxy().getSeriesOption(\"fillOpacity\") || \"1\")\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"fillOpacity\", newValue); });\n    };\n    PieSeriesPanel.prototype.initLabelPanel = function () {\n        var _this = this;\n        var chartProxy = this.getChartProxy();\n        var initialFont = {\n            family: chartProxy.getSeriesOption(\"label.fontFamily\"),\n            style: chartProxy.getSeriesOption(\"label.fontStyle\"),\n            weight: chartProxy.getSeriesOption(\"label.fontWeight\"),\n            size: chartProxy.getSeriesOption(\"label.fontSize\"),\n            color: chartProxy.getSeriesOption(\"label.color\")\n        };\n        var setFont = function (font) {\n            var chartProxy = _this.getChartProxy();\n            if (font.family) {\n                chartProxy.setSeriesOption(\"label.fontFamily\", font.family);\n            }\n            if (font.weight) {\n                chartProxy.setSeriesOption(\"label.fontWeight\", font.weight);\n            }\n            if (font.style) {\n                chartProxy.setSeriesOption(\"label.fontStyle\", font.style);\n            }\n            if (font.size) {\n                chartProxy.setSeriesOption(\"label.fontSize\", font.size);\n            }\n            if (font.color) {\n                chartProxy.setSeriesOption(\"label.color\", font.color);\n            }\n        };\n        var params = {\n            name: this.chartTranslator.translate('labels'),\n            enabled: chartProxy.getSeriesOption(\"label.enabled\") || false,\n            setEnabled: function (enabled) { return _this.getChartProxy().setSeriesOption(\"label.enabled\", enabled); },\n            suppressEnabledCheckbox: false,\n            initialFont: initialFont,\n            setFont: setFont\n        };\n        var labelPanelComp = this.wireBean(new FontPanel(params));\n        this.activePanels.push(labelPanelComp);\n        var calloutPanelComp = this.wireBean(new CalloutPanel(this.chartController));\n        labelPanelComp.addCompToPanel(calloutPanelComp);\n        this.activePanels.push(calloutPanelComp);\n        this.seriesGroup.addItem(labelPanelComp);\n    };\n    PieSeriesPanel.prototype.initShadowPanel = function () {\n        var shadowPanelComp = this.wireBean(new ShadowPanel(this.chartController));\n        this.seriesGroup.getGui().appendChild(shadowPanelComp.getGui());\n        this.seriesGroup.addItem(shadowPanelComp);\n    };\n    PieSeriesPanel.prototype.destroyActivePanels = function () {\n        this.activePanels.forEach(function (panel) {\n            agGridCommunity._.removeFromParent(panel.getGui());\n            panel.destroy();\n        });\n    };\n    PieSeriesPanel.prototype.getChartProxy = function () {\n        return this.chartController.getChartProxy();\n    };\n    PieSeriesPanel.prototype.destroy = function () {\n        this.destroyActivePanels();\n        _super.prototype.destroy.call(this);\n    };\n    PieSeriesPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"seriesGroup\\\">\\n                <ag-toggle-button ref=\\\"seriesTooltipsToggle\\\"></ag-toggle-button>\\n                <ag-slider ref=\\\"seriesStrokeWidthSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesLineOpacitySlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesFillOpacitySlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n    __decorate$_([\n        agGridCommunity.RefSelector('seriesGroup')\n    ], PieSeriesPanel.prototype, \"seriesGroup\", void 0);\n    __decorate$_([\n        agGridCommunity.RefSelector('seriesTooltipsToggle')\n    ], PieSeriesPanel.prototype, \"seriesTooltipsToggle\", void 0);\n    __decorate$_([\n        agGridCommunity.RefSelector('seriesStrokeWidthSlider')\n    ], PieSeriesPanel.prototype, \"seriesStrokeWidthSlider\", void 0);\n    __decorate$_([\n        agGridCommunity.RefSelector('seriesLineOpacitySlider')\n    ], PieSeriesPanel.prototype, \"seriesLineOpacitySlider\", void 0);\n    __decorate$_([\n        agGridCommunity.RefSelector('seriesFillOpacitySlider')\n    ], PieSeriesPanel.prototype, \"seriesFillOpacitySlider\", void 0);\n    __decorate$_([\n        agGridCommunity.Autowired('chartTranslator')\n    ], PieSeriesPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$_([\n        agGridCommunity.PostConstruct\n    ], PieSeriesPanel.prototype, \"init\", null);\n    return PieSeriesPanel;\n}(agGridCommunity.Component));\n\nvar __extends$1l = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$$ = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PaddingPanel = /** @class */ (function (_super) {\n    __extends$1l(PaddingPanel, _super);\n    function PaddingPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.chartController = chartController;\n        return _this;\n    }\n    PaddingPanel.prototype.init = function () {\n        this.setTemplate(PaddingPanel.TEMPLATE);\n        this.initGroup();\n        this.initChartPaddingItems();\n    };\n    PaddingPanel.prototype.initGroup = function () {\n        this.chartPaddingGroup\n            .setTitle(this.chartTranslator.translate(\"padding\"))\n            .hideOpenCloseIcons(true)\n            .hideEnabledCheckbox(true);\n    };\n    PaddingPanel.prototype.initChartPaddingItems = function () {\n        var _this = this;\n        var initInput = function (property, input) {\n            input.setLabel(_this.chartTranslator.translate(property))\n                .setValue(_this.chartController.getChartProxy().getChartPaddingOption(property))\n                .setMaxValue(200)\n                .setTextFieldWidth(45)\n                .onValueChange(function (newValue) { return _this.chartController.getChartProxy().setChartPaddingOption(property, newValue); });\n        };\n        initInput('top', this.paddingTopSlider);\n        initInput('right', this.paddingRightSlider);\n        initInput('bottom', this.paddingBottomSlider);\n        initInput('left', this.paddingLeftSlider);\n    };\n    PaddingPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"chartPaddingGroup\\\">\\n                <ag-slider ref=\\\"paddingTopSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"paddingRightSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"paddingBottomSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"paddingLeftSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        <div>\";\n    __decorate$$([\n        agGridCommunity.RefSelector('chartPaddingGroup')\n    ], PaddingPanel.prototype, \"chartPaddingGroup\", void 0);\n    __decorate$$([\n        agGridCommunity.RefSelector('paddingTopSlider')\n    ], PaddingPanel.prototype, \"paddingTopSlider\", void 0);\n    __decorate$$([\n        agGridCommunity.RefSelector('paddingRightSlider')\n    ], PaddingPanel.prototype, \"paddingRightSlider\", void 0);\n    __decorate$$([\n        agGridCommunity.RefSelector('paddingBottomSlider')\n    ], PaddingPanel.prototype, \"paddingBottomSlider\", void 0);\n    __decorate$$([\n        agGridCommunity.RefSelector('paddingLeftSlider')\n    ], PaddingPanel.prototype, \"paddingLeftSlider\", void 0);\n    __decorate$$([\n        agGridCommunity.Autowired('chartTranslator')\n    ], PaddingPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$$([\n        agGridCommunity.PostConstruct\n    ], PaddingPanel.prototype, \"init\", null);\n    return PaddingPanel;\n}(agGridCommunity.Component));\n\nvar __extends$1m = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$10 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar BackgroundPanel = /** @class */ (function (_super) {\n    __extends$1m(BackgroundPanel, _super);\n    function BackgroundPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.chartController = chartController;\n        return _this;\n    }\n    BackgroundPanel.prototype.init = function () {\n        this.setTemplate(BackgroundPanel.TEMPLATE);\n        this.initGroup();\n        this.initColorPicker();\n    };\n    BackgroundPanel.prototype.initGroup = function () {\n        var _this = this;\n        this.group\n            .setTitle(this.chartTranslator.translate('background'))\n            .setEnabled(this.chartController.getChartProxy().getChartOption('background.visible'))\n            .hideOpenCloseIcons(true)\n            .hideEnabledCheckbox(false)\n            .onEnableChange(function (enabled) { return _this.chartController.getChartProxy().setChartOption('background.visible', enabled); });\n    };\n    BackgroundPanel.prototype.initColorPicker = function () {\n        var _this = this;\n        this.colorPicker\n            .setLabel(this.chartTranslator.translate('color'))\n            .setLabelWidth('flex')\n            .setInputWidth(45)\n            .setValue(this.chartController.getChartProxy().getChartOption('background.fill'))\n            .onValueChange(function (newColor) { return _this.chartController.getChartProxy().setChartOption('background.fill', newColor); });\n    };\n    BackgroundPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"chartBackgroundGroup\\\">\\n                <ag-color-picker ref=\\\"colorPicker\\\"></ag-color-picker>\\n            </ag-group-component>\\n        <div>\";\n    __decorate$10([\n        agGridCommunity.RefSelector('chartBackgroundGroup')\n    ], BackgroundPanel.prototype, \"group\", void 0);\n    __decorate$10([\n        agGridCommunity.RefSelector('colorPicker')\n    ], BackgroundPanel.prototype, \"colorPicker\", void 0);\n    __decorate$10([\n        agGridCommunity.Autowired('chartTranslator')\n    ], BackgroundPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$10([\n        agGridCommunity.PostConstruct\n    ], BackgroundPanel.prototype, \"init\", null);\n    return BackgroundPanel;\n}(agGridCommunity.Component));\n\nvar __extends$1n = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$11 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartPanel = /** @class */ (function (_super) {\n    __extends$1n(ChartPanel, _super);\n    function ChartPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.activePanels = [];\n        _this.chartController = chartController;\n        return _this;\n    }\n    ChartPanel.prototype.init = function () {\n        this.setTemplate(ChartPanel.TEMPLATE);\n        this.initGroup();\n        this.initTitles();\n        this.initPaddingPanel();\n        this.initBackgroundPanel();\n    };\n    ChartPanel.prototype.initGroup = function () {\n        this.chartGroup\n            .setTitle(this.chartTranslator.translate('chart'))\n            .toggleGroupExpand(false)\n            .hideEnabledCheckbox(true);\n    };\n    ChartPanel.prototype.initTitles = function () {\n        var _this = this;\n        var chartProxy = this.chartController.getChartProxy();\n        var title = chartProxy.getChartOption('title');\n        var text = title && title.text ? title.text : '';\n        var setFont = function (font) {\n            var chartProxy = _this.chartController.getChartProxy();\n            if (font.family) {\n                chartProxy.setTitleOption('fontFamily', font.family);\n            }\n            if (font.weight) {\n                chartProxy.setTitleOption('fontWeight', font.weight);\n            }\n            if (font.style) {\n                chartProxy.setTitleOption('fontStyle', font.style);\n            }\n            if (font.size) {\n                chartProxy.setTitleOption('fontSize', font.size);\n            }\n            if (font.color) {\n                chartProxy.setTitleOption('color', font.color);\n            }\n        };\n        var initialFont = {\n            family: title ? chartProxy.getChartOption('title.fontFamily') : 'Verdana, sans-serif',\n            style: title ? chartProxy.getChartOption('title.fontStyle') : undefined,\n            weight: title ? chartProxy.getChartOption('title.fontWeight') : undefined,\n            size: title ? chartProxy.getChartOption('title.fontSize') : 22,\n            color: title ? chartProxy.getChartOption('title.color') : 'black'\n        };\n        if (!title) {\n            setFont(initialFont);\n        }\n        this.titleInput\n            .setLabel(this.chartTranslator.translate('title'))\n            .setLabelAlignment('top')\n            .setLabelWidth('flex')\n            .setValue(text)\n            .onValueChange(function (value) {\n            _this.chartController.getChartProxy().setTitleOption('text', value);\n            // only show font panel when title exists\n            fontPanelComp.setEnabled(agGridCommunity._.exists(value));\n        });\n        var params = {\n            name: this.chartTranslator.translate('font'),\n            enabled: true,\n            suppressEnabledCheckbox: true,\n            initialFont: initialFont,\n            setFont: setFont,\n        };\n        var fontPanelComp = this.wireBean(new FontPanel(params));\n        this.chartGroup.addItem(fontPanelComp);\n        this.activePanels.push(fontPanelComp);\n        fontPanelComp.setEnabled(agGridCommunity._.exists(text));\n    };\n    ChartPanel.prototype.initPaddingPanel = function () {\n        var paddingPanelComp = this.wireBean(new PaddingPanel(this.chartController));\n        this.chartGroup.addItem(paddingPanelComp);\n        this.activePanels.push(paddingPanelComp);\n    };\n    ChartPanel.prototype.initBackgroundPanel = function () {\n        var backgroundPanelComp = this.wireBean(new BackgroundPanel(this.chartController));\n        this.chartGroup.addItem(backgroundPanelComp);\n        this.activePanels.push(backgroundPanelComp);\n    };\n    ChartPanel.prototype.destroyActivePanels = function () {\n        this.activePanels.forEach(function (panel) {\n            agGridCommunity._.removeFromParent(panel.getGui());\n            panel.destroy();\n        });\n    };\n    ChartPanel.prototype.destroy = function () {\n        this.destroyActivePanels();\n        _super.prototype.destroy.call(this);\n    };\n    ChartPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"chartGroup\\\">\\n                <ag-input-text-area ref=\\\"titleInput\\\"></ag-input-text-area>\\n            </ag-group-component>\\n        <div>\";\n    __decorate$11([\n        agGridCommunity.RefSelector('chartGroup')\n    ], ChartPanel.prototype, \"chartGroup\", void 0);\n    __decorate$11([\n        agGridCommunity.RefSelector('titleInput')\n    ], ChartPanel.prototype, \"titleInput\", void 0);\n    __decorate$11([\n        agGridCommunity.Autowired('chartTranslator')\n    ], ChartPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$11([\n        agGridCommunity.PostConstruct\n    ], ChartPanel.prototype, \"init\", null);\n    return ChartPanel;\n}(agGridCommunity.Component));\n\nvar __extends$1o = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$12 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AreaSeriesPanel = /** @class */ (function (_super) {\n    __extends$1o(AreaSeriesPanel, _super);\n    function AreaSeriesPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.activePanels = [];\n        _this.chartController = chartController;\n        return _this;\n    }\n    AreaSeriesPanel.prototype.init = function () {\n        this.setTemplate(AreaSeriesPanel.TEMPLATE);\n        this.initSeriesGroup();\n        this.initSeriesTooltips();\n        this.initSeriesLineWidth();\n        this.initOpacity();\n        this.initMarkersPanel();\n        this.initShadowPanel();\n    };\n    AreaSeriesPanel.prototype.initSeriesGroup = function () {\n        this.seriesGroup\n            .setTitle(this.chartTranslator.translate(\"series\"))\n            .toggleGroupExpand(false)\n            .hideEnabledCheckbox(true);\n    };\n    AreaSeriesPanel.prototype.initSeriesTooltips = function () {\n        var _this = this;\n        this.seriesTooltipsToggle\n            .setLabel(this.chartTranslator.translate(\"tooltips\"))\n            .setLabelAlignment(\"left\")\n            .setLabelWidth(\"flex\")\n            .setInputWidth(40)\n            .setValue(this.getChartProxy().getSeriesOption(\"tooltip.enabled\") || false)\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"tooltip.enabled\", newValue); });\n    };\n    AreaSeriesPanel.prototype.initSeriesLineWidth = function () {\n        var _this = this;\n        this.seriesLineWidthSlider\n            .setLabel(this.chartTranslator.translate(\"lineWidth\"))\n            .setMaxValue(10)\n            .setTextFieldWidth(45)\n            .setValue(this.getChartProxy().getSeriesOption(\"stroke.width\"))\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"stroke.width\", newValue); });\n    };\n    AreaSeriesPanel.prototype.initOpacity = function () {\n        var _this = this;\n        this.seriesLineOpacitySlider\n            .setLabel(this.chartTranslator.translate(\"strokeOpacity\"))\n            .setStep(0.05)\n            .setMaxValue(1)\n            .setTextFieldWidth(45)\n            .setValue(this.getChartProxy().getSeriesOption(\"stroke.opacity\") || \"1\")\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"stroke.opacity\", newValue); });\n        this.seriesFillOpacitySlider\n            .setLabel(this.chartTranslator.translate(\"fillOpacity\"))\n            .setStep(0.05)\n            .setMaxValue(1)\n            .setTextFieldWidth(45)\n            .setValue(this.getChartProxy().getSeriesOption(\"fill.opacity\") || \"1\")\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"fill.opacity\", newValue); });\n    };\n    AreaSeriesPanel.prototype.initMarkersPanel = function () {\n        var markersPanelComp = this.wireBean(new MarkersPanel(this.chartController));\n        this.seriesGroup.addItem(markersPanelComp);\n        this.activePanels.push(markersPanelComp);\n    };\n    AreaSeriesPanel.prototype.initShadowPanel = function () {\n        var shadowPanelComp = this.wireBean(new ShadowPanel(this.chartController));\n        this.seriesGroup.addItem(shadowPanelComp);\n        this.activePanels.push(shadowPanelComp);\n    };\n    AreaSeriesPanel.prototype.destroyActivePanels = function () {\n        this.activePanels.forEach(function (panel) {\n            agGridCommunity._.removeFromParent(panel.getGui());\n            panel.destroy();\n        });\n    };\n    AreaSeriesPanel.prototype.getChartProxy = function () {\n        return this.chartController.getChartProxy();\n    };\n    AreaSeriesPanel.prototype.destroy = function () {\n        this.destroyActivePanels();\n        _super.prototype.destroy.call(this);\n    };\n    AreaSeriesPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"seriesGroup\\\">\\n                <ag-toggle-button ref=\\\"seriesTooltipsToggle\\\"></ag-toggle-button>\\n                <ag-slider ref=\\\"seriesLineWidthSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesLineOpacitySlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesFillOpacitySlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n    __decorate$12([\n        agGridCommunity.RefSelector('seriesGroup')\n    ], AreaSeriesPanel.prototype, \"seriesGroup\", void 0);\n    __decorate$12([\n        agGridCommunity.RefSelector('seriesTooltipsToggle')\n    ], AreaSeriesPanel.prototype, \"seriesTooltipsToggle\", void 0);\n    __decorate$12([\n        agGridCommunity.RefSelector('seriesLineWidthSlider')\n    ], AreaSeriesPanel.prototype, \"seriesLineWidthSlider\", void 0);\n    __decorate$12([\n        agGridCommunity.RefSelector('seriesLineOpacitySlider')\n    ], AreaSeriesPanel.prototype, \"seriesLineOpacitySlider\", void 0);\n    __decorate$12([\n        agGridCommunity.RefSelector('seriesFillOpacitySlider')\n    ], AreaSeriesPanel.prototype, \"seriesFillOpacitySlider\", void 0);\n    __decorate$12([\n        agGridCommunity.Autowired('chartTranslator')\n    ], AreaSeriesPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$12([\n        agGridCommunity.PostConstruct\n    ], AreaSeriesPanel.prototype, \"init\", null);\n    return AreaSeriesPanel;\n}(agGridCommunity.Component));\n\nvar __extends$1p = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$13 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ScatterSeriesPanel = /** @class */ (function (_super) {\n    __extends$1p(ScatterSeriesPanel, _super);\n    function ScatterSeriesPanel(chartController) {\n        var _this = _super.call(this) || this;\n        _this.activePanels = [];\n        _this.chartController = chartController;\n        return _this;\n    }\n    ScatterSeriesPanel.prototype.init = function () {\n        this.setTemplate(ScatterSeriesPanel.TEMPLATE);\n        this.initSeriesGroup();\n        this.initSeriesTooltips();\n        this.initMarkersPanel();\n    };\n    ScatterSeriesPanel.prototype.initSeriesGroup = function () {\n        this.seriesGroup\n            .setTitle(this.chartTranslator.translate(\"series\"))\n            .toggleGroupExpand(false)\n            .hideEnabledCheckbox(true);\n    };\n    ScatterSeriesPanel.prototype.initSeriesTooltips = function () {\n        var _this = this;\n        this.seriesTooltipsToggle\n            .setLabel(this.chartTranslator.translate(\"tooltips\"))\n            .setLabelAlignment(\"left\")\n            .setLabelWidth(\"flex\")\n            .setInputWidth(40)\n            .setValue(this.getChartProxy().getSeriesOption(\"tooltip.enabled\") || false)\n            .onValueChange(function (newValue) { return _this.getChartProxy().setSeriesOption(\"tooltip.enabled\", newValue); });\n    };\n    ScatterSeriesPanel.prototype.initMarkersPanel = function () {\n        var markersPanelComp = this.wireBean(new MarkersPanel(this.chartController));\n        this.seriesGroup.addItem(markersPanelComp);\n        this.activePanels.push(markersPanelComp);\n    };\n    ScatterSeriesPanel.prototype.destroyActivePanels = function () {\n        this.activePanels.forEach(function (panel) {\n            agGridCommunity._.removeFromParent(panel.getGui());\n            panel.destroy();\n        });\n    };\n    ScatterSeriesPanel.prototype.getChartProxy = function () {\n        return this.chartController.getChartProxy();\n    };\n    ScatterSeriesPanel.prototype.destroy = function () {\n        this.destroyActivePanels();\n        _super.prototype.destroy.call(this);\n    };\n    ScatterSeriesPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"seriesGroup\\\">\\n                <ag-toggle-button ref=\\\"seriesTooltipsToggle\\\"></ag-toggle-button>\\n            </ag-group-component>\\n        </div>\";\n    __decorate$13([\n        agGridCommunity.RefSelector('seriesGroup')\n    ], ScatterSeriesPanel.prototype, \"seriesGroup\", void 0);\n    __decorate$13([\n        agGridCommunity.RefSelector('seriesTooltipsToggle')\n    ], ScatterSeriesPanel.prototype, \"seriesTooltipsToggle\", void 0);\n    __decorate$13([\n        agGridCommunity.Autowired('chartTranslator')\n    ], ScatterSeriesPanel.prototype, \"chartTranslator\", void 0);\n    __decorate$13([\n        agGridCommunity.PostConstruct\n    ], ScatterSeriesPanel.prototype, \"init\", null);\n    return ScatterSeriesPanel;\n}(agGridCommunity.Component));\n\nvar __extends$1q = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$14 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartFormattingPanel = /** @class */ (function (_super) {\n    __extends$1q(ChartFormattingPanel, _super);\n    function ChartFormattingPanel(chartController) {\n        var _this = _super.call(this, ChartFormattingPanel.TEMPLATE) || this;\n        _this.panels = [];\n        _this.chartController = chartController;\n        return _this;\n    }\n    ChartFormattingPanel.prototype.init = function () {\n        this.createPanels();\n        this.addDestroyableEventListener(this.chartController, ChartController.EVENT_CHART_UPDATED, this.createPanels.bind(this));\n    };\n    ChartFormattingPanel.prototype.createPanels = function () {\n        var chartType = this.chartController.getChartType();\n        if (chartType === this.chartType) {\n            // same chart type, so keep existing panels\n            return;\n        }\n        this.destroyPanels();\n        this.addComponent(new ChartPanel(this.chartController));\n        this.addComponent(new LegendPanel(this.chartController));\n        switch (chartType) {\n            case agGridCommunity.ChartType.GroupedColumn:\n            case agGridCommunity.ChartType.StackedColumn:\n            case agGridCommunity.ChartType.NormalizedColumn:\n            case agGridCommunity.ChartType.GroupedBar:\n            case agGridCommunity.ChartType.StackedBar:\n            case agGridCommunity.ChartType.NormalizedBar:\n                this.addComponent(new AxisPanel(this.chartController));\n                this.addComponent(new BarSeriesPanel(this.chartController));\n                break;\n            case agGridCommunity.ChartType.Pie:\n            case agGridCommunity.ChartType.Doughnut:\n                this.addComponent(new PieSeriesPanel(this.chartController));\n                break;\n            case agGridCommunity.ChartType.Line:\n                this.addComponent(new AxisPanel(this.chartController));\n                this.addComponent(new LineSeriesPanel(this.chartController));\n                break;\n            case agGridCommunity.ChartType.Scatter:\n            case agGridCommunity.ChartType.Bubble:\n                this.addComponent(new AxisPanel(this.chartController));\n                this.addComponent(new ScatterSeriesPanel(this.chartController));\n                break;\n            case agGridCommunity.ChartType.Area:\n            case agGridCommunity.ChartType.StackedArea:\n            case agGridCommunity.ChartType.NormalizedArea:\n                this.addComponent(new AxisPanel(this.chartController));\n                this.addComponent(new AreaSeriesPanel(this.chartController));\n                break;\n            default:\n                console.warn(\"ag-Grid: ChartFormattingPanel - unexpected chart type index: \" + chartType + \" supplied\");\n        }\n        this.chartType = chartType;\n    };\n    ChartFormattingPanel.prototype.addComponent = function (component) {\n        this.wireBean(component);\n        this.panels.push(component);\n        this.getGui().appendChild(component.getGui());\n    };\n    ChartFormattingPanel.prototype.destroyPanels = function () {\n        this.panels.forEach(function (panel) {\n            agGridCommunity._.removeFromParent(panel.getGui());\n            panel.destroy();\n        });\n    };\n    ChartFormattingPanel.prototype.destroy = function () {\n        this.destroyPanels();\n        _super.prototype.destroy.call(this);\n    };\n    ChartFormattingPanel.TEMPLATE = \"<div class=\\\"ag-chart-format-wrapper\\\"></div>\";\n    __decorate$14([\n        agGridCommunity.PostConstruct\n    ], ChartFormattingPanel.prototype, \"init\", null);\n    return ChartFormattingPanel;\n}(agGridCommunity.Component));\n\nvar __extends$1r = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$15 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MiniChart = /** @class */ (function (_super) {\n    __extends$1r(MiniChart, _super);\n    function MiniChart(parent, tooltipName) {\n        var _this = _super.call(this) || this;\n        _this.size = 58;\n        _this.padding = 5;\n        _this.root = new Group();\n        var scene = new Scene();\n        scene.width = _this.size;\n        scene.height = _this.size;\n        scene.root = _this.root;\n        scene.parent = parent;\n        _this.scene = scene;\n        _this.tooltipName = tooltipName;\n        return _this;\n    }\n    MiniChart.prototype.init = function () {\n        this.scene.canvas.element.title = this.chartTranslator.translate(this.tooltipName);\n    };\n    __decorate$15([\n        agGridCommunity.Autowired('chartTranslator')\n    ], MiniChart.prototype, \"chartTranslator\", void 0);\n    __decorate$15([\n        agGridCommunity.PostConstruct\n    ], MiniChart.prototype, \"init\", null);\n    return MiniChart;\n}(agGridCommunity.Component));\n\nvar __extends$1s = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$16 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MiniChartWithAxes = /** @class */ (function (_super) {\n    __extends$1s(MiniChartWithAxes, _super);\n    function MiniChartWithAxes(parent, tooltipName) {\n        var _this = _super.call(this, parent, tooltipName) || this;\n        _this.stroke = 'gray';\n        _this.axisOvershoot = 3;\n        return _this;\n    }\n    MiniChartWithAxes.prototype.addAxes = function () {\n        var size = this.size;\n        var padding = this.padding;\n        var leftAxis = new Line();\n        leftAxis.x1 = padding;\n        leftAxis.y1 = padding;\n        leftAxis.x2 = padding;\n        leftAxis.y2 = size - padding + this.axisOvershoot;\n        leftAxis.stroke = this.stroke;\n        var bottomAxis = new Line();\n        bottomAxis.x1 = padding - this.axisOvershoot + 1;\n        bottomAxis.y1 = size - padding;\n        bottomAxis.x2 = size - padding + 1;\n        bottomAxis.y2 = size - padding;\n        bottomAxis.stroke = this.stroke;\n        var root = this.root;\n        root.append(leftAxis);\n        root.append(bottomAxis);\n    };\n    __decorate$16([\n        agGridCommunity.PostConstruct\n    ], MiniChartWithAxes.prototype, \"addAxes\", null);\n    return MiniChartWithAxes;\n}(MiniChart));\n\nvar __extends$1t = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniColumn = /** @class */ (function (_super) {\n    __extends$1t(MiniColumn, _super);\n    function MiniColumn(parent, fills, strokes) {\n        var _this = _super.call(this, parent, \"groupedColumnTooltip\") || this;\n        var padding = _this.padding;\n        var size = _this.size;\n        var data = [2, 3, 4];\n        var xScale = new BandScale();\n        xScale.domain = [0, 1, 2];\n        xScale.range = [padding, size - padding];\n        xScale.paddingInner = 0.3;\n        xScale.paddingOuter = 0.3;\n        var yScale = scaleLinear();\n        yScale.domain = [0, 4];\n        yScale.range = [size - padding, padding];\n        var bottom = yScale.convert(0);\n        var width = xScale.bandwidth;\n        _this.bars = data.map(function (datum, i) {\n            var top = yScale.convert(datum);\n            var rect = new Rect();\n            rect.x = xScale.convert(i);\n            rect.y = top;\n            rect.width = width;\n            rect.height = bottom - top;\n            rect.strokeWidth = 1;\n            rect.crisp = true;\n            return rect;\n        });\n        _this.updateColors(fills, strokes);\n        _this.root.append(_this.bars);\n        return _this;\n    }\n    MiniColumn.prototype.updateColors = function (fills, strokes) {\n        this.bars.forEach(function (bar, i) {\n            bar.fill = fills[i];\n            bar.stroke = strokes[i];\n        });\n    };\n    MiniColumn.chartType = agGridCommunity.ChartType.GroupedColumn;\n    return MiniColumn;\n}(MiniChartWithAxes));\n\nvar __extends$1u = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniStackedColumn = /** @class */ (function (_super) {\n    __extends$1u(MiniStackedColumn, _super);\n    function MiniStackedColumn(parent, fills, strokes, data, yScaleDomain, tooltipName) {\n        if (data === void 0) { data = MiniStackedColumn.data; }\n        if (yScaleDomain === void 0) { yScaleDomain = [0, 16]; }\n        if (tooltipName === void 0) { tooltipName = \"stackedColumnTooltip\"; }\n        var _this = _super.call(this, parent, tooltipName) || this;\n        var padding = _this.padding;\n        var size = _this.size;\n        var xScale = new BandScale();\n        xScale.domain = [0, 1, 2];\n        xScale.range = [padding, size - padding];\n        xScale.paddingInner = 0.3;\n        xScale.paddingOuter = 0.3;\n        var yScale = scaleLinear();\n        yScale.domain = yScaleDomain;\n        yScale.range = [size - padding, padding];\n        var bottom = yScale.convert(0);\n        var width = xScale.bandwidth;\n        _this.bars = data.map(function (series) {\n            return series.map(function (datum, i) {\n                var top = yScale.convert(datum);\n                var rect = new Rect();\n                rect.x = xScale.convert(i);\n                rect.y = top;\n                rect.width = width;\n                rect.height = bottom - top;\n                rect.strokeWidth = 1;\n                rect.crisp = true;\n                return rect;\n            });\n        });\n        _this.updateColors(fills, strokes);\n        _this.root.append([].concat.apply([], _this.bars));\n        return _this;\n    }\n    MiniStackedColumn.prototype.updateColors = function (fills, strokes) {\n        this.bars.forEach(function (series, i) {\n            return series.forEach(function (bar) {\n                bar.fill = fills[i];\n                bar.stroke = strokes[i];\n            });\n        });\n    };\n    MiniStackedColumn.chartType = agGridCommunity.ChartType.StackedColumn;\n    MiniStackedColumn.data = [\n        [8, 12, 16],\n        [6, 9, 12],\n        [2, 3, 4]\n    ];\n    return MiniStackedColumn;\n}(MiniChartWithAxes));\n\nvar __extends$1v = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniNormalizedColumn = /** @class */ (function (_super) {\n    __extends$1v(MiniNormalizedColumn, _super);\n    function MiniNormalizedColumn(parent, fills, strokes) {\n        return _super.call(this, parent, fills, strokes, MiniNormalizedColumn.data, [0, 10], \"normalizedColumnTooltip\") || this;\n    }\n    MiniNormalizedColumn.chartType = agGridCommunity.ChartType.NormalizedColumn;\n    MiniNormalizedColumn.data = [\n        [10, 10, 10],\n        [6, 7, 8],\n        [2, 4, 6]\n    ];\n    return MiniNormalizedColumn;\n}(MiniStackedColumn));\n\nvar __extends$1w = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniBar = /** @class */ (function (_super) {\n    __extends$1w(MiniBar, _super);\n    function MiniBar(parent, fills, strokes) {\n        var _this = _super.call(this, parent, \"groupedBarTooltip\") || this;\n        var padding = _this.padding;\n        var size = _this.size;\n        var data = [2, 3, 4];\n        var yScale = new BandScale();\n        yScale.domain = [0, 1, 2];\n        yScale.range = [padding, size - padding];\n        yScale.paddingInner = 0.3;\n        yScale.paddingOuter = 0.3;\n        var xScale = scaleLinear();\n        xScale.domain = [0, 4];\n        xScale.range = [size - padding, padding];\n        var bottom = xScale.convert(0);\n        var height = yScale.bandwidth;\n        _this.bars = data.map(function (datum, i) {\n            var rect = new Rect();\n            rect.x = padding;\n            rect.y = yScale.convert(i);\n            rect.width = bottom - xScale.convert(datum);\n            rect.height = height;\n            rect.strokeWidth = 1;\n            rect.crisp = true;\n            return rect;\n        });\n        _this.updateColors(fills, strokes);\n        _this.root.append(_this.bars);\n        return _this;\n    }\n    MiniBar.prototype.updateColors = function (fills, strokes) {\n        this.bars.forEach(function (bar, i) {\n            bar.fill = fills[i];\n            bar.stroke = strokes[i];\n        });\n    };\n    MiniBar.chartType = agGridCommunity.ChartType.GroupedBar;\n    return MiniBar;\n}(MiniChartWithAxes));\n\nvar __extends$1x = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniStackedBar = /** @class */ (function (_super) {\n    __extends$1x(MiniStackedBar, _super);\n    function MiniStackedBar(parent, fills, strokes, data, xScaleDomain, tooltipName) {\n        if (data === void 0) { data = MiniStackedBar.data; }\n        if (xScaleDomain === void 0) { xScaleDomain = [0, 16]; }\n        if (tooltipName === void 0) { tooltipName = \"stackedBarTooltip\"; }\n        var _this = _super.call(this, parent, tooltipName) || this;\n        var size = _this.size;\n        var padding = _this.padding;\n        var yScale = new BandScale();\n        yScale.domain = [0, 1, 2];\n        yScale.range = [padding, size - padding];\n        yScale.paddingInner = 0.3;\n        yScale.paddingOuter = 0.3;\n        var xScale = scaleLinear();\n        xScale.domain = xScaleDomain;\n        xScale.range = [size - padding, padding];\n        var bottom = xScale.convert(0);\n        var height = yScale.bandwidth;\n        _this.bars = data.map(function (series) {\n            return series.map(function (datum, i) {\n                var rect = new Rect();\n                rect.x = padding;\n                rect.y = yScale.convert(i);\n                rect.width = bottom - xScale.convert(datum);\n                rect.height = height;\n                rect.strokeWidth = 1;\n                rect.crisp = true;\n                return rect;\n            });\n        });\n        _this.updateColors(fills, strokes);\n        _this.root.append([].concat.apply([], _this.bars));\n        return _this;\n    }\n    MiniStackedBar.prototype.updateColors = function (fills, strokes) {\n        this.bars.forEach(function (series, i) {\n            return series.forEach(function (bar) {\n                bar.fill = fills[i];\n                bar.stroke = strokes[i];\n            });\n        });\n    };\n    MiniStackedBar.chartType = agGridCommunity.ChartType.StackedBar;\n    MiniStackedBar.data = [\n        [8, 12, 16],\n        [6, 9, 12],\n        [2, 3, 4]\n    ];\n    return MiniStackedBar;\n}(MiniChartWithAxes));\n\nvar __extends$1y = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniNormalizedBar = /** @class */ (function (_super) {\n    __extends$1y(MiniNormalizedBar, _super);\n    function MiniNormalizedBar(parent, fills, strokes) {\n        return _super.call(this, parent, fills, strokes, MiniNormalizedBar.data, [0, 10], \"normalizedBarTooltip\") || this;\n    }\n    MiniNormalizedBar.chartType = agGridCommunity.ChartType.NormalizedBar;\n    MiniNormalizedBar.data = [\n        [10, 10, 10],\n        [6, 7, 8],\n        [2, 4, 6]\n    ];\n    return MiniNormalizedBar;\n}(MiniStackedBar));\n\nvar __extends$1z = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniDoughnut = /** @class */ (function (_super) {\n    __extends$1z(MiniDoughnut, _super);\n    function MiniDoughnut(parent, fills, strokes, centerRadiusScaler, tooltipName) {\n        if (centerRadiusScaler === void 0) { centerRadiusScaler = 0.6; }\n        if (tooltipName === void 0) { tooltipName = \"doughnutTooltip\"; }\n        var _this = _super.call(this, parent, tooltipName) || this;\n        var radius = (_this.size - _this.padding * 2) / 2;\n        var center = radius + _this.padding;\n        var angles = [\n            [toRadians(-90), toRadians(30)],\n            [toRadians(30), toRadians(120)],\n            [toRadians(120), toRadians(180)],\n            [toRadians(180), toRadians(210)],\n            [toRadians(210), toRadians(240)],\n            [toRadians(240), toRadians(270)]\n        ];\n        _this.sectors = angles.map(function (_a) {\n            var startAngle = _a[0], endAngle = _a[1];\n            var sector = new Sector();\n            sector.centerX = center;\n            sector.centerY = center;\n            sector.innerRadius = radius * centerRadiusScaler;\n            sector.outerRadius = radius;\n            sector.startAngle = startAngle;\n            sector.endAngle = endAngle;\n            sector.stroke = undefined;\n            return sector;\n        });\n        _this.updateColors(fills, strokes);\n        _this.root.append(_this.sectors);\n        return _this;\n    }\n    MiniDoughnut.prototype.updateColors = function (fills, strokes) {\n        this.sectors.forEach(function (sector, i) {\n            sector.fill = fills[i % fills.length];\n            sector.stroke = strokes[i % strokes.length];\n        });\n    };\n    MiniDoughnut.chartType = agGridCommunity.ChartType.Doughnut;\n    return MiniDoughnut;\n}(MiniChart));\n\nvar __extends$1A = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniPie = /** @class */ (function (_super) {\n    __extends$1A(MiniPie, _super);\n    function MiniPie(parent, fills, strokes) {\n        return _super.call(this, parent, fills, strokes, 0, \"pieTooltip\") || this;\n    }\n    MiniPie.chartType = agGridCommunity.ChartType.Pie;\n    return MiniPie;\n}(MiniDoughnut));\n\nvar __extends$1B = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Acts as `Group` node but with specified bounds that form a rectangle.\n * Any parts of the child nodes outside that rectangle will not be visible.\n * Unlike the `Group` node, the `ClipRect` node cannot be transformed.\n */\nvar ClipRect = /** @class */ (function (_super) {\n    __extends$1B(ClipRect, _super);\n    function ClipRect() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isContainerNode = true;\n        _this.path = new Path2D();\n        _this._active = true;\n        _this._dirtyPath = true;\n        _this._x = 0;\n        _this._y = 0;\n        _this._width = 10;\n        _this._height = 10;\n        return _this;\n    }\n    ClipRect.prototype.isPointInNode = function (x, y) {\n        var point = this.transformPoint(x, y);\n        return point.x >= this.x && point.x <= this.x + this.width\n            && point.y >= this.y && point.y <= this.y + this.height;\n    };\n    Object.defineProperty(ClipRect.prototype, \"active\", {\n        get: function () {\n            return this._active;\n        },\n        set: function (value) {\n            if (this._active !== value) {\n                this._active = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ClipRect.prototype, \"dirtyPath\", {\n        get: function () {\n            return this._dirtyPath;\n        },\n        set: function (value) {\n            if (this._dirtyPath !== value) {\n                this._dirtyPath = value;\n                if (value) {\n                    this.dirty = true;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ClipRect.prototype, \"x\", {\n        get: function () {\n            return this._x;\n        },\n        set: function (value) {\n            if (this._x !== value) {\n                this._x = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ClipRect.prototype, \"y\", {\n        get: function () {\n            return this._y;\n        },\n        set: function (value) {\n            if (this._y !== value) {\n                this._y = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ClipRect.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        set: function (value) {\n            if (this._width !== value) {\n                this._width = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ClipRect.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        set: function (value) {\n            if (this._height !== value) {\n                this._height = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ClipRect.prototype.updatePath = function () {\n        var path = this.path;\n        path.clear();\n        path.rect(this.x, this.y, this.width, this.height);\n        this.dirtyPath = false;\n    };\n    ClipRect.prototype.render = function (ctx) {\n        if (this.active) {\n            if (this.dirtyPath) {\n                this.updatePath();\n            }\n            this.scene.appendPath(this.path);\n            ctx.clip();\n        }\n        var children = this.children;\n        var n = children.length;\n        for (var i = 0; i < n; i++) {\n            ctx.save();\n            var child = children[i];\n            if (child.visible) {\n                child.render(ctx);\n            }\n            ctx.restore();\n        }\n    };\n    ClipRect.className = 'ClipRect';\n    return ClipRect;\n}(Node));\n\nvar __extends$1C = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniLine = /** @class */ (function (_super) {\n    __extends$1C(MiniLine, _super);\n    function MiniLine(parent, fills, strokes) {\n        var _this = _super.call(this, parent, \"lineTooltip\") || this;\n        var size = _this.size;\n        var padding = _this.padding;\n        var xScale = scaleLinear();\n        xScale.domain = [0, 4];\n        xScale.range = [padding, size - padding];\n        var yScale = scaleLinear();\n        yScale.domain = [0, 10];\n        yScale.range = [size - padding, padding];\n        var data = [\n            [9, 7, 8, 5, 6],\n            [5, 6, 3, 4, 1],\n            [1, 3, 4, 8, 7]\n        ];\n        _this.lines = data.map(function (series) {\n            var line = new Path();\n            line.strokeWidth = 3;\n            line.lineCap = \"round\";\n            line.fill = undefined;\n            series.forEach(function (datum, i) {\n                line.path[i > 0 ? \"lineTo\" : \"moveTo\"](xScale.convert(i), yScale.convert(datum));\n            });\n            return line;\n        });\n        _this.updateColors(fills, strokes);\n        var clipRect = new ClipRect();\n        clipRect.x = clipRect.y = padding;\n        clipRect.width = clipRect.height = size - padding * 2;\n        clipRect.append(_this.lines);\n        _this.root.append(clipRect);\n        return _this;\n    }\n    MiniLine.prototype.updateColors = function (fills, strokes) {\n        this.lines.forEach(function (line, i) {\n            line.stroke = fills[i];\n        });\n    };\n    MiniLine.chartType = agGridCommunity.ChartType.Line;\n    return MiniLine;\n}(MiniChartWithAxes));\n\nvar __extends$1D = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniScatter = /** @class */ (function (_super) {\n    __extends$1D(MiniScatter, _super);\n    function MiniScatter(parent, fills, strokes) {\n        var _this = _super.call(this, parent, \"scatterTooltip\") || this;\n        var size = _this.size;\n        var padding = _this.padding;\n        // [x, y] pairs\n        var data = [\n            [[0.3, 3], [1.1, 0.9], [2, 0.4], [3.4, 2.4]],\n            [[0, 0.3], [1, 2], [2.4, 1.4], [3, 0]]\n        ];\n        var xScale = scaleLinear();\n        xScale.domain = [-0.5, 4];\n        xScale.range = [padding * 2, size - padding];\n        var yScale = scaleLinear();\n        yScale.domain = [-0.5, 3.5];\n        yScale.range = [size - padding, padding];\n        var points = [];\n        data.forEach(function (series) {\n            series.forEach(function (_a) {\n                var x = _a[0], y = _a[1];\n                var arc = new Arc();\n                arc.strokeWidth = 1;\n                arc.centerX = xScale.convert(x);\n                arc.centerY = yScale.convert(y);\n                arc.radiusX = arc.radiusY = 2.5;\n                points.push(arc);\n            });\n        });\n        _this.points = points;\n        _this.updateColors(fills, strokes);\n        var clipRect = new ClipRect();\n        clipRect.x = clipRect.y = padding;\n        clipRect.width = clipRect.height = size - padding * 2;\n        clipRect.append(_this.points);\n        _this.root.append(clipRect);\n        return _this;\n    }\n    MiniScatter.prototype.updateColors = function (fills, strokes) {\n        this.points.forEach(function (line, i) {\n            line.stroke = strokes[i % strokes.length];\n            line.fill = fills[i % fills.length];\n        });\n    };\n    MiniScatter.chartType = agGridCommunity.ChartType.Scatter;\n    return MiniScatter;\n}(MiniChartWithAxes));\n\nvar __extends$1E = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniBubble = /** @class */ (function (_super) {\n    __extends$1E(MiniBubble, _super);\n    function MiniBubble(parent, fills, strokes) {\n        var _this = _super.call(this, parent, \"bubbleTooltip\") || this;\n        var size = _this.size;\n        var padding = _this.padding;\n        // [x, y, radius] triples\n        var data = [\n            [[0.1, 0.3, 5], [0.5, 0.4, 7], [0.2, 0.8, 7]], [[0.8, 0.7, 5], [0.7, 0.3, 9]]\n        ];\n        var xScale = scaleLinear();\n        xScale.domain = [0, 1];\n        xScale.range = [padding * 2, size - padding];\n        var yScale = scaleLinear();\n        yScale.domain = [0, 1];\n        yScale.range = [size - padding, padding];\n        var points = [];\n        data.forEach(function (series) {\n            series.forEach(function (_a) {\n                var x = _a[0], y = _a[1], radius = _a[2];\n                var arc = new Arc();\n                arc.strokeWidth = 1;\n                arc.centerX = xScale.convert(x);\n                arc.centerY = yScale.convert(y);\n                arc.radiusX = arc.radiusY = radius;\n                arc.fillOpacity = 0.7;\n                points.push(arc);\n            });\n        });\n        _this.points = points;\n        _this.updateColors(fills, strokes);\n        var clipRect = new ClipRect();\n        clipRect.x = padding;\n        clipRect.y = padding;\n        clipRect.width = size - padding * 2;\n        clipRect.height = size - padding * 2;\n        clipRect.append(_this.points);\n        _this.root.append(clipRect);\n        return _this;\n    }\n    MiniBubble.prototype.updateColors = function (fills, strokes) {\n        this.points.forEach(function (line, i) {\n            line.stroke = strokes[i % strokes.length];\n            line.fill = fills[i % fills.length];\n        });\n    };\n    MiniBubble.chartType = agGridCommunity.ChartType.Bubble;\n    return MiniBubble;\n}(MiniChartWithAxes));\n\nvar __extends$1F = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniArea = /** @class */ (function (_super) {\n    __extends$1F(MiniArea, _super);\n    function MiniArea(parent, fills, strokes, data) {\n        if (data === void 0) { data = MiniArea.data; }\n        var _this = _super.call(this, parent, \"groupedAreaTooltip\") || this;\n        var size = _this.size;\n        var padding = _this.padding;\n        var xScale = new BandScale();\n        xScale.domain = [0, 1, 2];\n        xScale.paddingInner = 1;\n        xScale.paddingOuter = 0;\n        xScale.range = [padding + 0.5, size - padding - 0.5];\n        var yScale = scaleLinear();\n        yScale.domain = [0, 6];\n        yScale.range = [size - padding + 0.5, padding];\n        var xCount = data.length;\n        var last = xCount * 2 - 1;\n        var pathData = [];\n        var bottomY = yScale.convert(0);\n        data.forEach(function (datum, i) {\n            var x = xScale.convert(i);\n            datum.forEach(function (yDatum, j) {\n                var y = yScale.convert(yDatum);\n                var points = pathData[j] || (pathData[j] = []);\n                points[i] = {\n                    x: x,\n                    y: y\n                };\n                points[last - i] = {\n                    x: x,\n                    y: bottomY\n                };\n            });\n        });\n        _this.areas = pathData.reverse().map(function (points) {\n            var area = new Path();\n            area.strokeWidth = 1;\n            area.fillOpacity = 0.7;\n            var path = area.path;\n            path.clear();\n            points.forEach(function (point, i) { return path[i > 0 ? \"lineTo\" : \"moveTo\"](point.x, point.y); });\n            path.closePath();\n            return area;\n        });\n        _this.updateColors(fills, strokes);\n        _this.root.append(_this.areas);\n        return _this;\n    }\n    MiniArea.prototype.updateColors = function (fills, strokes) {\n        this.areas.forEach(function (area, i) {\n            area.fill = fills[i];\n            area.stroke = strokes[i];\n        });\n    };\n    MiniArea.chartType = agGridCommunity.ChartType.Area;\n    MiniArea.data = [\n        [1, 3, 5],\n        [2, 6, 4],\n        [5, 3, 1]\n    ];\n    return MiniArea;\n}(MiniChartWithAxes));\n\nvar __extends$1G = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniStackedArea = /** @class */ (function (_super) {\n    __extends$1G(MiniStackedArea, _super);\n    function MiniStackedArea(parent, fills, strokes, data, tooltipName) {\n        if (data === void 0) { data = MiniStackedArea.data; }\n        if (tooltipName === void 0) { tooltipName = \"stackedAreaTooltip\"; }\n        var _this = _super.call(this, parent, tooltipName) || this;\n        var size = _this.size;\n        var padding = _this.padding;\n        var xScale = new BandScale();\n        xScale.domain = [0, 1, 2];\n        xScale.paddingInner = 1;\n        xScale.paddingOuter = 0;\n        xScale.range = [padding + 0.5, size - padding - 0.5];\n        var yScale = scaleLinear();\n        yScale.domain = [0, 16];\n        yScale.range = [size - padding + 0.5, padding + 0.5];\n        var xCount = data.length;\n        var last = xCount * 2 - 1;\n        var pathData = [];\n        data.forEach(function (datum, i) {\n            var x = xScale.convert(i);\n            var total = 0;\n            datum.forEach(function (yDatum, j) {\n                var y = yScale.convert(total + yDatum);\n                var points = pathData[j] || (pathData[j] = []);\n                points[i] = {\n                    x: x,\n                    y: y\n                };\n                points[last - i] = {\n                    x: x,\n                    y: yScale.convert(total) // bottom y\n                };\n                total += yDatum;\n            });\n        });\n        _this.areas = pathData.map(function (points) {\n            var area = new Path();\n            area.strokeWidth = 1;\n            var path = area.path;\n            path.clear();\n            points.forEach(function (point, i) { return path[i > 0 ? \"lineTo\" : \"moveTo\"](point.x, point.y); });\n            path.closePath();\n            return area;\n        });\n        _this.updateColors(fills, strokes);\n        _this.root.append(_this.areas);\n        return _this;\n    }\n    MiniStackedArea.prototype.updateColors = function (fills, strokes) {\n        this.areas.forEach(function (area, i) {\n            area.fill = fills[i];\n            area.stroke = strokes[i];\n        });\n    };\n    MiniStackedArea.chartType = agGridCommunity.ChartType.StackedArea;\n    MiniStackedArea.data = [\n        [2, 3, 2],\n        [3, 6, 5],\n        [6, 2, 2]\n    ];\n    return MiniStackedArea;\n}(MiniChartWithAxes));\n\nvar __extends$1H = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MiniNormalizedArea = /** @class */ (function (_super) {\n    __extends$1H(MiniNormalizedArea, _super);\n    function MiniNormalizedArea(parent, fills, strokes, data) {\n        if (data === void 0) { data = MiniNormalizedArea.data; }\n        return _super.call(this, parent, fills, strokes, data, \"normalizedAreaTooltip\") || this;\n    }\n    MiniNormalizedArea.chartType = agGridCommunity.ChartType.NormalizedArea;\n    MiniNormalizedArea.data = MiniStackedArea.data.map(function (stack) {\n        var sum = stack.reduce(function (p, c) { return p + c; }, 0);\n        return stack.map(function (v) { return v / sum * 16; });\n    });\n    return MiniNormalizedArea;\n}(MiniStackedArea));\n\nvar __extends$1I = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$17 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MiniChartsContainer = /** @class */ (function (_super) {\n    __extends$1I(MiniChartsContainer, _super);\n    function MiniChartsContainer(chartController, fills, strokes) {\n        var _this = _super.call(this, MiniChartsContainer.TEMPLATE) || this;\n        _this.wrappers = {};\n        _this.chartController = chartController;\n        _this.fills = fills;\n        _this.strokes = strokes;\n        return _this;\n    }\n    MiniChartsContainer.prototype.init = function () {\n        var _this = this;\n        var chartGroups = {\n            columnGroup: [\n                MiniColumn,\n                MiniStackedColumn,\n                MiniNormalizedColumn\n            ],\n            barGroup: [\n                MiniBar,\n                MiniStackedBar,\n                MiniNormalizedBar\n            ],\n            pieGroup: [\n                MiniPie,\n                MiniDoughnut\n            ],\n            lineGroup: [\n                MiniLine\n            ],\n            scatterGroup: [\n                MiniScatter,\n                MiniBubble\n            ],\n            areaGroup: [\n                MiniArea,\n                MiniStackedArea,\n                MiniNormalizedArea\n            ]\n        };\n        var eGui = this.getGui();\n        Object.keys(chartGroups).forEach(function (group) {\n            var chartGroup = chartGroups[group];\n            var groupComponent = _this.wireBean(new agGridCommunity.AgGroupComponent({\n                title: _this.chartTranslator.translate(group),\n                suppressEnabledCheckbox: true,\n                enabled: true,\n                suppressOpenCloseIcons: true\n            }));\n            chartGroup.forEach(function (MiniClass) {\n                var miniWrapper = document.createElement('div');\n                agGridCommunity._.addCssClass(miniWrapper, 'ag-chart-mini-thumbnail');\n                _this.addDestroyableEventListener(miniWrapper, 'click', function () {\n                    _this.chartController.setChartType(MiniClass.chartType);\n                    _this.refreshSelected();\n                });\n                _this.wrappers[MiniClass.chartType] = miniWrapper;\n                _this.wireBean(new MiniClass(miniWrapper, _this.fills, _this.strokes));\n                groupComponent.addItem(miniWrapper);\n            });\n            eGui.appendChild(groupComponent.getGui());\n        });\n        this.refreshSelected();\n    };\n    MiniChartsContainer.prototype.refreshSelected = function () {\n        var type = this.chartController.getChartType();\n        for (var wrapper in this.wrappers) {\n            agGridCommunity._.addOrRemoveCssClass(this.wrappers[wrapper], 'ag-selected', wrapper === type);\n        }\n    };\n    MiniChartsContainer.TEMPLATE = '<div class=\"ag-chart-settings-mini-wrapper\"></div>';\n    __decorate$17([\n        agGridCommunity.Autowired('chartTranslator')\n    ], MiniChartsContainer.prototype, \"chartTranslator\", void 0);\n    __decorate$17([\n        agGridCommunity.PostConstruct\n    ], MiniChartsContainer.prototype, \"init\", null);\n    return MiniChartsContainer;\n}(agGridCommunity.Component));\n\nvar __extends$1J = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$18 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartSettingsPanel = /** @class */ (function (_super) {\n    __extends$1J(ChartSettingsPanel, _super);\n    function ChartSettingsPanel(chartController) {\n        var _this = _super.call(this, ChartSettingsPanel.TEMPLATE) || this;\n        _this.miniCharts = [];\n        _this.cardItems = [];\n        _this.chartController = chartController;\n        return _this;\n    }\n    ChartSettingsPanel.prototype.postConstruct = function () {\n        this.resetPalettes();\n        this.ePrevBtn.insertAdjacentElement('afterbegin', agGridCommunity._.createIconNoSpan('smallLeft', this.gridOptionsWrapper));\n        this.eNextBtn.insertAdjacentElement('afterbegin', agGridCommunity._.createIconNoSpan('smallRight', this.gridOptionsWrapper));\n        this.addDestroyableEventListener(this.ePrevBtn, 'click', this.prev.bind(this));\n        this.addDestroyableEventListener(this.eNextBtn, 'click', this.next.bind(this));\n        this.addDestroyableEventListener(this.chartController, ChartController.EVENT_CHART_UPDATED, this.resetPalettes.bind(this));\n    };\n    ChartSettingsPanel.prototype.resetPalettes = function () {\n        var _this = this;\n        var palettes = this.chartController.getPalettes();\n        if (palettes === this.palettes) {\n            return;\n        }\n        this.palettes = palettes;\n        this.activePalette = this.chartController.getPaletteName();\n        if (!this.palettes.has(this.activePalette)) {\n            this.activePalette = undefined;\n        }\n        this.paletteNames = [];\n        this.cardItems = [];\n        agGridCommunity._.clearElement(this.eCardSelector);\n        this.destroyMiniCharts();\n        this.palettes.forEach(function (palette, name) {\n            if (!_this.activePalette) {\n                _this.activePalette = name;\n            }\n            _this.paletteNames.push(name);\n            var isActivePalette = _this.activePalette === name;\n            var fills = palette.fills, strokes = palette.strokes;\n            var miniChartsContainer = _this.wireBean(new MiniChartsContainer(_this.chartController, fills, strokes));\n            _this.miniCharts.push(miniChartsContainer);\n            _this.eMiniChartsContainer.appendChild(miniChartsContainer.getGui());\n            _this.addCardLink(name);\n            if (isActivePalette) {\n                miniChartsContainer.refreshSelected();\n            }\n            else {\n                agGridCommunity._.addCssClass(miniChartsContainer.getGui(), 'ag-hidden');\n            }\n        });\n        agGridCommunity._.addOrRemoveCssClass(this.eNavBar, 'ag-hidden', this.palettes.size <= 1);\n    };\n    ChartSettingsPanel.prototype.addCardLink = function (paletteName) {\n        var _this = this;\n        var link = document.createElement('div');\n        agGridCommunity._.addCssClass(link, 'ag-nav-card-item');\n        if (paletteName === this.activePalette) {\n            agGridCommunity._.addCssClass(link, 'ag-selected');\n        }\n        this.addDestroyableEventListener(link, 'click', function () {\n            var _a = _this, activePalette = _a.activePalette, isAnimating = _a.isAnimating, paletteNames = _a.paletteNames;\n            if (paletteName === activePalette || isAnimating) {\n                return;\n            }\n            _this.setActivePalette(paletteName, paletteNames.indexOf(paletteName) < paletteNames.indexOf(activePalette) ? 'left' : 'right');\n        });\n        this.eCardSelector.appendChild(link);\n        this.cardItems.push(link);\n    };\n    ChartSettingsPanel.prototype.getPrev = function () {\n        var prev = this.paletteNames.indexOf(this.activePalette) - 1;\n        if (prev < 0) {\n            prev = this.paletteNames.length - 1;\n        }\n        return prev;\n    };\n    ChartSettingsPanel.prototype.prev = function () {\n        if (this.isAnimating) {\n            return;\n        }\n        this.setActivePalette(this.paletteNames[this.getPrev()], 'left');\n    };\n    ChartSettingsPanel.prototype.getNext = function () {\n        var next = this.paletteNames.indexOf(this.activePalette) + 1;\n        if (next >= this.paletteNames.length) {\n            next = 0;\n        }\n        return next;\n    };\n    ChartSettingsPanel.prototype.next = function () {\n        if (this.isAnimating) {\n            return;\n        }\n        this.setActivePalette(this.paletteNames[this.getNext()], 'right');\n    };\n    ChartSettingsPanel.prototype.setActivePalette = function (paletteName, animationDirection) {\n        var _this = this;\n        var paletteIndex = this.paletteNames.indexOf(paletteName);\n        agGridCommunity._.radioCssClass(this.cardItems[paletteIndex], 'ag-selected');\n        var currentPalette = this.miniCharts[this.paletteNames.indexOf(this.activePalette)];\n        var currentGui = currentPalette.getGui();\n        var futurePalette = this.miniCharts[paletteIndex];\n        var futureGui = futurePalette.getGui();\n        currentPalette.refreshSelected();\n        futurePalette.refreshSelected();\n        var multiplier = animationDirection === 'left' ? -1 : 1;\n        var final = futureGui.style.left = (agGridCommunity._.getAbsoluteWidth(this.getGui()) * multiplier) + \"px\";\n        agGridCommunity._.removeCssClass(futureGui, 'ag-hidden');\n        agGridCommunity._.addCssClass(currentGui, 'ag-animating');\n        agGridCommunity._.addCssClass(futureGui, 'ag-animating');\n        this.activePalette = paletteName;\n        this.chartController.setChartPaletteName(this.activePalette);\n        this.isAnimating = true;\n        window.setTimeout(function () {\n            currentGui.style.left = parseFloat(final) * -1 + \"px\";\n            futureGui.style.left = '0px';\n        }, 50);\n        window.setTimeout(function () {\n            _this.isAnimating = false;\n            agGridCommunity._.removeCssClass(currentGui, 'ag-animating');\n            agGridCommunity._.removeCssClass(futureGui, 'ag-animating');\n            agGridCommunity._.addCssClass(currentGui, 'ag-hidden');\n        }, 500);\n    };\n    ChartSettingsPanel.prototype.destroyMiniCharts = function () {\n        agGridCommunity._.clearElement(this.eMiniChartsContainer);\n        if (this.miniCharts) {\n            this.miniCharts.forEach(function (c) { return c.destroy(); });\n        }\n        this.miniCharts = [];\n    };\n    ChartSettingsPanel.prototype.destroy = function () {\n        this.destroyMiniCharts();\n        _super.prototype.destroy.call(this);\n    };\n    ChartSettingsPanel.TEMPLATE = \"<div class=\\\"ag-chart-settings-wrapper\\\">\\n            <div ref=\\\"eMiniChartsContainer\\\" class=\\\"ag-chart-settings-mini-charts-container\\\"></div>\\n            <div ref=\\\"eNavBar\\\" class=\\\"ag-chart-settings-nav-bar\\\">\\n                <div ref=\\\"ePrevBtn\\\" class=\\\"ag-chart-settings-prev-btn\\\">\\n                    <button type=\\\"button\\\"></button>\\n                </div>\\n                <div ref=\\\"eCardSelector\\\" class=\\\"ag-nav-card-selector\\\"></div>\\n                <div ref=\\\"eNextBtn\\\" class=\\\"ag-chart-settings-next-btn\\\">\\n                    <button type=\\\"button\\\"></button>\\n                </div>\\n            </div>\\n        </div>\";\n    __decorate$18([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ChartSettingsPanel.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$18([\n        agGridCommunity.RefSelector('eMiniChartsContainer')\n    ], ChartSettingsPanel.prototype, \"eMiniChartsContainer\", void 0);\n    __decorate$18([\n        agGridCommunity.RefSelector('eNavBar')\n    ], ChartSettingsPanel.prototype, \"eNavBar\", void 0);\n    __decorate$18([\n        agGridCommunity.RefSelector('eCardSelector')\n    ], ChartSettingsPanel.prototype, \"eCardSelector\", void 0);\n    __decorate$18([\n        agGridCommunity.RefSelector('ePrevBtn')\n    ], ChartSettingsPanel.prototype, \"ePrevBtn\", void 0);\n    __decorate$18([\n        agGridCommunity.RefSelector('eNextBtn')\n    ], ChartSettingsPanel.prototype, \"eNextBtn\", void 0);\n    __decorate$18([\n        agGridCommunity.PostConstruct\n    ], ChartSettingsPanel.prototype, \"postConstruct\", null);\n    __decorate$18([\n        agGridCommunity.PreDestroy\n    ], ChartSettingsPanel.prototype, \"destroy\", null);\n    return ChartSettingsPanel;\n}(agGridCommunity.Component));\n\nvar __extends$1K = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$19 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar TabbedChartMenu = /** @class */ (function (_super) {\n    __extends$1K(TabbedChartMenu, _super);\n    function TabbedChartMenu(params) {\n        var _this = _super.call(this) || this;\n        _this.tabs = [];\n        _this.chartIcons = {};\n        var controller = params.controller, type = params.type, panels = params.panels;\n        _this.chartController = controller;\n        _this.currentChartType = type;\n        _this.panels = panels;\n        return _this;\n    }\n    TabbedChartMenu.prototype.init = function () {\n        var _this = this;\n        this.panels.forEach(function (panel) {\n            var panelType = panel.replace('chart', '').toLowerCase();\n            var _a = _this.createTab(panel, panelType, _this.getPanelClass(panelType)), comp = _a.comp, tab = _a.tab;\n            _this.tabs.push(tab);\n            _this.addDestroyFunc(function () { return comp.destroy(); });\n        });\n        this.tabbedLayout = new agGridCommunity.TabbedLayout({\n            items: this.tabs,\n            cssClass: 'ag-chart-tabbed-menu'\n        });\n    };\n    TabbedChartMenu.prototype.createTab = function (name, title, ChildClass) {\n        var eWrapperDiv = document.createElement('div');\n        agGridCommunity._.addCssClass(eWrapperDiv, \"ag-chart-\" + title);\n        var comp = new ChildClass(this.chartController);\n        this.getContext().wireBean(comp);\n        eWrapperDiv.appendChild(comp.getGui());\n        var titleEl = document.createElement('div');\n        titleEl.innerText = this.chartTranslator.translate(title);\n        return {\n            comp: comp,\n            tab: {\n                title: titleEl,\n                bodyPromise: agGridCommunity.Promise.resolve(eWrapperDiv),\n                name: name\n            }\n        };\n    };\n    TabbedChartMenu.prototype.getMinDimensions = function () {\n        return this.tabbedLayout.getMinDimensions();\n    };\n    TabbedChartMenu.prototype.updateCurrentChartType = function (chartType) {\n        agGridCommunity._.removeCssClass(this.chartIcons[this.currentChartType], 'ag-selected');\n        this.currentChartType = chartType;\n        agGridCommunity._.addCssClass(this.chartIcons[chartType], 'ag-selected');\n    };\n    TabbedChartMenu.prototype.showTab = function (tab) {\n        var tabItem = this.tabs[tab];\n        this.tabbedLayout.showItem(tabItem);\n    };\n    TabbedChartMenu.prototype.getGui = function () {\n        return this.tabbedLayout && this.tabbedLayout.getGui();\n    };\n    TabbedChartMenu.prototype.destroy = function () {\n        if (this.parentComponent && this.parentComponent.isAlive()) {\n            this.parentComponent.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    TabbedChartMenu.prototype.getPanelClass = function (panelType) {\n        switch (panelType) {\n            case TabbedChartMenu.TAB_DATA:\n                return ChartDataPanel;\n            case TabbedChartMenu.TAB_FORMAT:\n                return ChartFormattingPanel;\n            default:\n                return ChartSettingsPanel;\n        }\n    };\n    TabbedChartMenu.EVENT_TAB_SELECTED = 'tabSelected';\n    TabbedChartMenu.TAB_MAIN = 'settings';\n    TabbedChartMenu.TAB_DATA = 'data';\n    TabbedChartMenu.TAB_FORMAT = 'format';\n    __decorate$19([\n        agGridCommunity.Autowired('chartTranslator')\n    ], TabbedChartMenu.prototype, \"chartTranslator\", void 0);\n    __decorate$19([\n        agGridCommunity.PostConstruct\n    ], TabbedChartMenu.prototype, \"init\", null);\n    return TabbedChartMenu;\n}(agGridCommunity.Component));\n\nvar __extends$1L = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1a = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartMenu = /** @class */ (function (_super) {\n    __extends$1L(ChartMenu, _super);\n    function ChartMenu(chartController) {\n        var _this = _super.call(this, ChartMenu.TEMPLATE) || this;\n        _this.buttons = {\n            chartSettings: ['menu', function () { return _this.showMenu(\"chartSettings\"); }],\n            chartData: ['menu', function () { return _this.showMenu(\"chartData\"); }],\n            chartFormat: ['menu', function () { return _this.showMenu(\"chartFormat\"); }],\n            chartUnlink: ['linked', function (e) { return _this.toggleDetached(e); }],\n            chartDownload: ['save', function () { return _this.saveChart(); }]\n        };\n        _this.tabs = [];\n        _this.chartController = chartController;\n        return _this;\n    }\n    ChartMenu.prototype.postConstruct = function () {\n        this.createButtons();\n    };\n    ChartMenu.prototype.getToolbarOptions = function () {\n        var _this = this;\n        var tabOptions = [\n            'chartSettings',\n            'chartData',\n            'chartFormat',\n            'chartUnlink',\n            'chartDownload'\n        ];\n        var toolbarItemsFunc = this.gridOptionsWrapper.getChartToolbarItemsFunc();\n        if (toolbarItemsFunc) {\n            var params = {\n                api: this.gridOptionsWrapper.getApi(),\n                columnApi: this.gridOptionsWrapper.getColumnApi(),\n                defaultItems: tabOptions\n            };\n            tabOptions = toolbarItemsFunc(params).filter(function (option) {\n                if (!_this.buttons[option]) {\n                    console.warn(\"ag-Grid: '\" + option + \" is not a valid Chart Toolbar Option\");\n                    return false;\n                }\n                return true;\n            });\n        }\n        // pivot charts use the column tool panel instead of the data panel\n        if (this.chartController.isPivotChart()) {\n            tabOptions = tabOptions.filter(function (option) { return option !== 'chartData'; });\n        }\n        var ignoreOptions = ['chartUnlink', 'chartDownload'];\n        this.tabs = tabOptions.filter(function (option) { return ignoreOptions.indexOf(option) === -1; });\n        return tabOptions.filter(function (value) {\n            return ignoreOptions.indexOf(value) !== -1 ||\n                (_this.tabs.length && value === _this.tabs[0]);\n        });\n    };\n    ChartMenu.prototype.toggleDetached = function (e) {\n        var target = e.target;\n        var active = agGridCommunity._.containsClass(target, 'ag-icon-linked');\n        agGridCommunity._.addOrRemoveCssClass(target, 'ag-icon-linked', !active);\n        agGridCommunity._.addOrRemoveCssClass(target, 'ag-icon-unlinked', active);\n        this.chartController.detachChartRange();\n    };\n    ChartMenu.prototype.createButtons = function () {\n        var _this = this;\n        var chartToolbarOptions = this.getToolbarOptions();\n        chartToolbarOptions.forEach(function (button) {\n            var buttonConfig = _this.buttons[button];\n            var iconName = buttonConfig[0], callback = buttonConfig[1];\n            var buttonEl = agGridCommunity._.createIconNoSpan(iconName, _this.gridOptionsWrapper, undefined, true);\n            _this.addDestroyableEventListener(buttonEl, 'click', callback);\n            _this.getGui().appendChild(buttonEl);\n        });\n    };\n    ChartMenu.prototype.saveChart = function () {\n        var event = { type: ChartMenu.EVENT_DOWNLOAD_CHART };\n        this.dispatchEvent(event);\n    };\n    ChartMenu.prototype.createMenu = function (defaultTab) {\n        var _this = this;\n        var chartComp = this.getParentComponent();\n        var dockedContainer = chartComp.getDockedContainer();\n        var context = this.getContext();\n        var menuPanel = this.menuPanel = new agGridCommunity.AgPanel({\n            minWidth: this.gridOptionsWrapper.chartMenuPanelWidth(),\n            width: this.gridOptionsWrapper.chartMenuPanelWidth(),\n            height: '100%',\n            closable: true,\n            hideTitleBar: true\n        });\n        context.wireBean(this.menuPanel);\n        menuPanel.setParentComponent(this);\n        dockedContainer.appendChild(menuPanel.getGui());\n        this.tabbedMenu = new TabbedChartMenu({\n            controller: this.chartController,\n            type: chartComp.getCurrentChartType(),\n            panels: this.tabs\n        });\n        context.wireBean(this.tabbedMenu);\n        this.addDestroyableEventListener(this.menuPanel, agGridCommunity.Component.EVENT_DESTROYED, function () { return _this.tabbedMenu.destroy(); });\n        return new agGridCommunity.Promise(function (res) {\n            window.setTimeout(function () {\n                menuPanel.setBodyComponent(_this.tabbedMenu);\n                _this.tabbedMenu.showTab(defaultTab);\n                _this.addDestroyableEventListener(chartComp.getChartComponentsWrapper(), 'click', function () {\n                    if (agGridCommunity._.containsClass(chartComp.getGui(), 'ag-has-menu')) {\n                        _this.hideMenu();\n                    }\n                });\n                res(menuPanel);\n            }, 100);\n        });\n    };\n    ChartMenu.prototype.slideDockedContainer = function () {\n        var _this = this;\n        var chartComp = this.getParentComponent();\n        chartComp.slideDockedOut(this.menuPanel.getWidth());\n        window.setTimeout(function () {\n            agGridCommunity._.addCssClass(_this.getParentComponent().getGui(), 'ag-has-menu');\n        }, 500);\n    };\n    ChartMenu.prototype.showMenu = function (tabName) {\n        var _this = this;\n        var tab = this.tabs.indexOf(tabName);\n        if (!this.menuPanel) {\n            this.createMenu(tab).then(function () {\n                _this.slideDockedContainer();\n            });\n        }\n        else {\n            this.slideDockedContainer();\n        }\n    };\n    ChartMenu.prototype.hideMenu = function () {\n        var chartComp = this.getParentComponent();\n        chartComp.slideDockedIn();\n        agGridCommunity._.removeCssClass(this.getParentComponent().getGui(), 'ag-has-menu');\n    };\n    ChartMenu.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.menuPanel && this.menuPanel.isAlive()) {\n            this.menuPanel.destroy();\n        }\n    };\n    ChartMenu.EVENT_DOWNLOAD_CHART = \"downloadChart\";\n    ChartMenu.TEMPLATE = \"<div class=\\\"ag-chart-menu\\\"></div>\";\n    __decorate$1a([\n        agGridCommunity.Autowired(\"gridOptionsWrapper\")\n    ], ChartMenu.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1a([\n        agGridCommunity.PostConstruct\n    ], ChartMenu.prototype, \"postConstruct\", null);\n    return ChartMenu;\n}(agGridCommunity.Component));\n\nvar __extends$1M = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign$4 = (undefined && undefined.__assign) || function () {\n    __assign$4 = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign$4.apply(this, arguments);\n};\nvar BarChartProxy = /** @class */ (function (_super) {\n    __extends$1M(BarChartProxy, _super);\n    function BarChartProxy(params) {\n        var _this = _super.call(this, params) || this;\n        _this.initChartOptions();\n        _this.recreateChart();\n        var barSeries = ChartBuilder.createSeries(_this.getSeriesDefaults());\n        if (barSeries) {\n            barSeries.flipXY = !_this.isColumnChart();\n            _this.chart.addSeries(barSeries);\n        }\n        return _this;\n    }\n    BarChartProxy.prototype.createChart = function (options) {\n        var _a = this.chartProxyParams, grouping = _a.grouping, parentElement = _a.parentElement;\n        var builderFunction;\n        if (this.isColumnChart()) {\n            builderFunction = grouping ? 'createGroupedColumnChart' : 'createColumnChart';\n        }\n        else {\n            builderFunction = grouping ? 'createGroupedBarChart' : 'createBarChart';\n        }\n        return ChartBuilder[builderFunction](parentElement, options);\n    };\n    BarChartProxy.prototype.update = function (params) {\n        var chart = this.chart;\n        var barSeries = chart.series[0];\n        var _a = this.getPalette(), fills = _a.fills, strokes = _a.strokes;\n        barSeries.data = this.transformData(params.data, params.category.id);\n        barSeries.xKey = params.category.id;\n        barSeries.xName = params.category.name;\n        barSeries.yKeys = params.fields.map(function (f) { return f.colId; });\n        barSeries.yNames = params.fields.map(function (f) { return f.displayName; });\n        barSeries.fills = fills;\n        barSeries.strokes = strokes;\n        this.updateLabelRotation(params.category.id, !this.isColumnChart());\n    };\n    BarChartProxy.prototype.getDefaultOptions = function () {\n        var isColumnChart = this.isColumnChart();\n        var fontOptions = this.getDefaultFontOptions();\n        var options = this.getDefaultCartesianChartOptions();\n        options.xAxis.label.rotation = isColumnChart ? 335 : 0;\n        options.yAxis.label.rotation = isColumnChart ? 0 : 335;\n        options.seriesDefaults = __assign$4(__assign$4({}, options.seriesDefaults), { tooltip: {\n                enabled: true,\n            }, label: __assign$4(__assign$4({}, fontOptions), { enabled: false }), shadow: this.getDefaultDropShadowOptions() });\n        return options;\n    };\n    BarChartProxy.prototype.isColumnChart = function () {\n        return agGridCommunity._.includes([agGridCommunity.ChartType.GroupedColumn, agGridCommunity.ChartType.StackedColumn, agGridCommunity.ChartType.NormalizedColumn], this.chartType);\n    };\n    BarChartProxy.prototype.getSeriesDefaults = function () {\n        var chartType = this.chartType;\n        var isGrouped = chartType === agGridCommunity.ChartType.GroupedColumn || chartType === agGridCommunity.ChartType.GroupedBar;\n        var isNormalized = chartType === agGridCommunity.ChartType.NormalizedColumn || chartType === agGridCommunity.ChartType.NormalizedBar;\n        return __assign$4(__assign$4({}, this.chartOptions.seriesDefaults), { type: 'bar', grouped: isGrouped, normalizedTo: isNormalized ? 100 : undefined });\n    };\n    return BarChartProxy;\n}(CartesianChartProxy));\n\nvar __extends$1N = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign$5 = (undefined && undefined.__assign) || function () {\n    __assign$5 = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign$5.apply(this, arguments);\n};\nvar AreaChartProxy = /** @class */ (function (_super) {\n    __extends$1N(AreaChartProxy, _super);\n    function AreaChartProxy(params) {\n        var _this = _super.call(this, params) || this;\n        _this.initChartOptions();\n        _this.recreateChart();\n        var areaSeries = ChartBuilder.createSeries(_this.getSeriesDefaults());\n        if (areaSeries) {\n            _this.chart.addSeries(areaSeries);\n        }\n        return _this;\n    }\n    AreaChartProxy.prototype.createChart = function (options) {\n        var _a = this.chartProxyParams, grouping = _a.grouping, parentElement = _a.parentElement;\n        var chart = ChartBuilder[grouping ? \"createGroupedAreaChart\" : \"createAreaChart\"](parentElement, options);\n        chart.axes\n            .filter(function (axis) { return axis.position === ChartAxisPosition.Bottom && axis instanceof CategoryAxis; })\n            .forEach(function (axis) {\n            axis.scale.paddingInner = 1;\n            axis.scale.paddingOuter = 0;\n        });\n        return chart;\n    };\n    AreaChartProxy.prototype.update = function (params) {\n        if (this.chartType === agGridCommunity.ChartType.Area) {\n            // area charts have multiple series\n            this.updateAreaChart(params);\n        }\n        else {\n            // stacked and normalized has a single series\n            var areaSeries = this.chart.series[0];\n            var _a = this.getPalette(), fills = _a.fills, strokes = _a.strokes;\n            areaSeries.data = this.transformData(params.data, params.category.id);\n            areaSeries.xKey = params.category.id;\n            areaSeries.xName = params.category.name;\n            areaSeries.yKeys = params.fields.map(function (f) { return f.colId; });\n            areaSeries.yNames = params.fields.map(function (f) { return f.displayName; });\n            areaSeries.fills = fills;\n            areaSeries.strokes = strokes;\n        }\n        this.updateLabelRotation(params.category.id);\n    };\n    AreaChartProxy.prototype.updateAreaChart = function (params) {\n        var _this = this;\n        var chart = this.chart;\n        if (params.fields.length === 0) {\n            chart.removeAllSeries();\n            return;\n        }\n        var fieldIds = params.fields.map(function (f) { return f.colId; });\n        var _a = this.getPalette(), fills = _a.fills, strokes = _a.strokes;\n        var existingSeriesById = chart.series.reduceRight(function (map, series, i) {\n            var id = series.yKeys[0];\n            if (fieldIds.indexOf(id) === i) {\n                map.set(id, series);\n            }\n            else {\n                chart.removeSeries(series);\n            }\n            return map;\n        }, new Map());\n        var data = this.transformData(params.data, params.category.id);\n        var previousSeries = undefined;\n        params.fields.forEach(function (f, index) {\n            var areaSeries = existingSeriesById.get(f.colId);\n            var fill = fills[index % fills.length];\n            var stroke = strokes[index % strokes.length];\n            if (areaSeries) {\n                areaSeries.data = data;\n                areaSeries.xKey = params.category.id;\n                areaSeries.xName = params.category.name;\n                areaSeries.yKeys = [f.colId];\n                areaSeries.yNames = [f.displayName];\n                areaSeries.fills = [fill];\n                areaSeries.strokes = [stroke];\n            }\n            else {\n                var seriesDefaults = _this.getSeriesDefaults();\n                var options = __assign$5(__assign$5({}, seriesDefaults), { data: data, field: {\n                        xKey: params.category.id,\n                        xName: params.category.name,\n                        yKeys: [f.colId],\n                        yNames: [f.displayName],\n                    }, fill: __assign$5(__assign$5({}, seriesDefaults.fill), { colors: [fill] }), stroke: __assign$5(__assign$5({}, seriesDefaults.stroke), { colors: [stroke] }) });\n                areaSeries = ChartBuilder.createSeries(options);\n                chart.addSeriesAfter(areaSeries, previousSeries);\n            }\n            previousSeries = areaSeries;\n        });\n    };\n    AreaChartProxy.prototype.getDefaultOptions = function () {\n        var options = this.getDefaultCartesianChartOptions();\n        options.xAxis.label.rotation = 335;\n        options.seriesDefaults = __assign$5(__assign$5({}, options.seriesDefaults), { fill: __assign$5(__assign$5({}, options.seriesDefaults.fill), { opacity: this.chartType === agGridCommunity.ChartType.Area ? 0.7 : 1 }), stroke: __assign$5(__assign$5({}, options.seriesDefaults.stroke), { width: 3 }), marker: {\n                type: 'circle',\n                enabled: true,\n                size: 6,\n                strokeWidth: 1,\n            }, tooltip: {\n                enabled: true,\n            }, shadow: this.getDefaultDropShadowOptions() });\n        return options;\n    };\n    AreaChartProxy.prototype.getSeriesDefaults = function () {\n        return __assign$5(__assign$5({}, this.chartOptions.seriesDefaults), { type: 'area', normalizedTo: this.chartType === agGridCommunity.ChartType.NormalizedArea ? 100 : undefined });\n    };\n    return AreaChartProxy;\n}(CartesianChartProxy));\n\nvar __extends$1O = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign$6 = (undefined && undefined.__assign) || function () {\n    __assign$6 = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign$6.apply(this, arguments);\n};\nvar LineChartProxy = /** @class */ (function (_super) {\n    __extends$1O(LineChartProxy, _super);\n    function LineChartProxy(params) {\n        var _this = _super.call(this, params) || this;\n        _this.initChartOptions();\n        _this.recreateChart();\n        return _this;\n    }\n    LineChartProxy.prototype.createChart = function (options) {\n        var _a = this.chartProxyParams, grouping = _a.grouping, parentElement = _a.parentElement;\n        return ChartBuilder[grouping ? \"createGroupedLineChart\" : \"createLineChart\"](parentElement, options);\n    };\n    LineChartProxy.prototype.update = function (params) {\n        var _this = this;\n        if (params.fields.length === 0) {\n            this.chart.removeAllSeries();\n            return;\n        }\n        this.updateAxes(params.data[0], params.category.id);\n        var chart = this.chart;\n        var fieldIds = params.fields.map(function (f) { return f.colId; });\n        var _a = this.getPalette(), fills = _a.fills, strokes = _a.strokes;\n        var data = this.transformData(params.data, params.category.id);\n        var existingSeriesById = chart.series.reduceRight(function (map, series, i) {\n            var id = series.yKey;\n            if (fieldIds.indexOf(id) === i) {\n                map.set(id, series);\n            }\n            else {\n                chart.removeSeries(series);\n            }\n            return map;\n        }, new Map());\n        var previousSeries = undefined;\n        params.fields.forEach(function (f, index) {\n            var lineSeries = existingSeriesById.get(f.colId);\n            var fill = fills[index % fills.length];\n            var stroke = strokes[index % strokes.length];\n            if (lineSeries) {\n                lineSeries.title = f.displayName;\n                lineSeries.data = data;\n                lineSeries.xKey = params.category.id;\n                lineSeries.xName = params.category.name;\n                lineSeries.yKey = f.colId;\n                lineSeries.yName = f.displayName;\n                lineSeries.fill = fill;\n                lineSeries.stroke = fill; // this is deliberate, so that the line colours match the fills of other series\n            }\n            else {\n                var seriesDefaults = _this.chartOptions.seriesDefaults;\n                var options = __assign$6(__assign$6({}, seriesDefaults), { type: 'line', title: f.displayName, data: data, field: {\n                        xKey: params.category.id,\n                        xName: params.category.name,\n                        yKey: f.colId,\n                        yName: f.displayName,\n                    }, fill: __assign$6(__assign$6({}, seriesDefaults.fill), { color: fill }), stroke: __assign$6(__assign$6({}, seriesDefaults.stroke), { color: fill }), marker: __assign$6(__assign$6({}, seriesDefaults.marker), { stroke: stroke }) });\n                lineSeries = ChartBuilder.createSeries(options);\n                chart.addSeriesAfter(lineSeries, previousSeries);\n            }\n            previousSeries = lineSeries;\n        });\n        this.updateLabelRotation(params.category.id);\n    };\n    LineChartProxy.prototype.updateAxes = function (testDatum, categoryKey) {\n        var chartOptions = this.chartOptions;\n        if (chartOptions.xAxis.type) {\n            return;\n        }\n        var xAxis = this.chart.axes.filter(function (a) { return a.position === 'bottom'; })[0];\n        if (!xAxis) {\n            return;\n        }\n        var categoryIsDate = isDate(testDatum && testDatum[categoryKey]);\n        if (categoryIsDate && !(xAxis instanceof TimeAxis)) {\n            var options = __assign$6(__assign$6({}, this.chartOptions), { xAxis: __assign$6(__assign$6({}, this.chartOptions.xAxis), { type: 'time' }) });\n            this.recreateChart(options);\n        }\n        else if (!categoryIsDate && !(xAxis instanceof CategoryAxis)) {\n            this.recreateChart();\n        }\n    };\n    LineChartProxy.prototype.getDefaultOptions = function () {\n        var options = this.getDefaultCartesianChartOptions();\n        options.xAxis.label.rotation = 335;\n        options.seriesDefaults = __assign$6(__assign$6({}, options.seriesDefaults), { stroke: __assign$6(__assign$6({}, options.seriesDefaults.stroke), { width: 3 }), marker: {\n                enabled: true,\n                type: 'circle',\n                size: 6,\n                strokeWidth: 1,\n            }, tooltip: {\n                enabled: true,\n            } });\n        return options;\n    };\n    return LineChartProxy;\n}(CartesianChartProxy));\n\nvar __extends$1P = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar PolarChartProxy = /** @class */ (function (_super) {\n    __extends$1P(PolarChartProxy, _super);\n    function PolarChartProxy(params) {\n        return _super.call(this, params) || this;\n    }\n    return PolarChartProxy;\n}(ChartProxy));\n\nvar __extends$1Q = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign$7 = (undefined && undefined.__assign) || function () {\n    __assign$7 = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign$7.apply(this, arguments);\n};\nvar PieChartProxy = /** @class */ (function (_super) {\n    __extends$1Q(PieChartProxy, _super);\n    function PieChartProxy(params) {\n        var _this = _super.call(this, params) || this;\n        _this.initChartOptions();\n        _this.recreateChart();\n        return _this;\n    }\n    PieChartProxy.prototype.createChart = function (options) {\n        return ChartBuilder.createPieChart(this.chartProxyParams.parentElement, options);\n    };\n    PieChartProxy.prototype.update = function (params) {\n        var chart = this.chart;\n        if (params.fields.length === 0) {\n            chart.removeAllSeries();\n            return;\n        }\n        var existingSeries = chart.series[0];\n        var existingSeriesId = existingSeries && existingSeries.angleKey;\n        var pieSeriesField = params.fields[0];\n        var _a = this.getPalette(), fills = _a.fills, strokes = _a.strokes;\n        var seriesDefaults = this.chartOptions.seriesDefaults;\n        var pieSeries = existingSeries;\n        var calloutColors = seriesDefaults.callout && seriesDefaults.callout.colors;\n        if (existingSeriesId !== pieSeriesField.colId) {\n            chart.removeSeries(existingSeries);\n            var seriesOptions = __assign$7(__assign$7({}, seriesDefaults), { type: \"pie\", field: {\n                    angleKey: pieSeriesField.colId,\n                }, title: __assign$7(__assign$7({}, seriesDefaults.title), { text: seriesDefaults.title.text || params.fields[0].displayName }) });\n            pieSeries = ChartBuilder.createSeries(seriesOptions);\n        }\n        pieSeries.angleName = pieSeriesField.displayName;\n        pieSeries.labelKey = params.category.id;\n        pieSeries.labelName = params.category.name;\n        pieSeries.data = params.data;\n        pieSeries.fills = fills;\n        pieSeries.strokes = strokes;\n        if (calloutColors) {\n            pieSeries.calloutColors = calloutColors;\n        }\n        chart.addSeries(pieSeries);\n    };\n    PieChartProxy.prototype.getDefaultOptions = function () {\n        var strokes = this.getPredefinedPalette().strokes;\n        var options = this.getDefaultChartOptions();\n        var fontOptions = this.getDefaultFontOptions();\n        options.seriesDefaults = __assign$7(__assign$7({}, options.seriesDefaults), { title: __assign$7(__assign$7({}, fontOptions), { enabled: false, fontSize: 12, fontWeight: 'bold' }), callout: {\n                colors: strokes,\n                length: 10,\n                strokeWidth: 2,\n            }, label: __assign$7(__assign$7({}, fontOptions), { enabled: false, offset: 3, minRequiredAngle: 0 }), tooltip: {\n                enabled: true,\n            }, shadow: this.getDefaultDropShadowOptions() });\n        return options;\n    };\n    return PieChartProxy;\n}(PolarChartProxy));\n\nvar __extends$1R = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign$8 = (undefined && undefined.__assign) || function () {\n    __assign$8 = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign$8.apply(this, arguments);\n};\nvar DoughnutChartProxy = /** @class */ (function (_super) {\n    __extends$1R(DoughnutChartProxy, _super);\n    function DoughnutChartProxy(params) {\n        var _this = _super.call(this, params) || this;\n        _this.initChartOptions();\n        _this.recreateChart();\n        return _this;\n    }\n    DoughnutChartProxy.prototype.createChart = function (options) {\n        return ChartBuilder.createDoughnutChart(this.chartProxyParams.parentElement, options);\n    };\n    DoughnutChartProxy.prototype.update = function (params) {\n        if (params.fields.length === 0) {\n            this.chart.removeAllSeries();\n            return;\n        }\n        var doughnutChart = this.chart;\n        var fieldIds = params.fields.map(function (f) { return f.colId; });\n        var seriesMap = {};\n        doughnutChart.series.forEach(function (series) {\n            var pieSeries = series;\n            var id = pieSeries.angleKey;\n            if (agGridCommunity._.includes(fieldIds, id)) {\n                seriesMap[id] = pieSeries;\n            }\n        });\n        var seriesDefaults = this.chartOptions.seriesDefaults;\n        var _a = this.getPalette(), fills = _a.fills, strokes = _a.strokes;\n        var offset = 0;\n        params.fields.forEach(function (f, index) {\n            var existingSeries = seriesMap[f.colId];\n            var seriesOptions = __assign$8(__assign$8({}, seriesDefaults), { type: \"pie\", field: {\n                    angleKey: f.colId,\n                }, showInLegend: index === 0, title: __assign$8(__assign$8({}, seriesDefaults.title), { text: seriesDefaults.title.text || f.displayName }) });\n            var calloutColors = seriesOptions.callout && seriesOptions.callout.colors;\n            var pieSeries = existingSeries || ChartBuilder.createSeries(seriesOptions);\n            pieSeries.angleName = f.displayName;\n            pieSeries.labelKey = params.category.id;\n            pieSeries.labelName = params.category.name;\n            pieSeries.data = params.data;\n            pieSeries.fills = fills;\n            pieSeries.strokes = strokes;\n            // Normally all series provide legend items for every slice.\n            // For our use case, where all series have the same number of slices in the same order with the same labels\n            // (all of which can be different in other use cases) we don't want to show repeating labels in the legend,\n            // so we only show legend items for the first series, and then when the user toggles the slices of the\n            // first series in the legend, we programmatically toggle the corresponding slices of other series.\n            if (index === 0) {\n                pieSeries.toggleSeriesItem = function (itemId, enabled) {\n                    if (doughnutChart) {\n                        doughnutChart.series.forEach(function (series) {\n                            series.dataEnabled[itemId] = enabled;\n                        });\n                    }\n                    pieSeries.scheduleData();\n                };\n            }\n            pieSeries.outerRadiusOffset = offset;\n            offset -= 20;\n            pieSeries.innerRadiusOffset = offset;\n            offset -= 20;\n            if (calloutColors) {\n                pieSeries.calloutColors = calloutColors;\n            }\n            if (!existingSeries) {\n                seriesMap[f.colId] = pieSeries;\n            }\n        });\n        // Because repaints are automatic, it's important to remove/add/update series at once,\n        // so that we don't get painted twice.\n        doughnutChart.series = agGridCommunity._.values(seriesMap);\n    };\n    DoughnutChartProxy.prototype.getDefaultOptions = function () {\n        var strokes = this.getPredefinedPalette().strokes;\n        var options = this.getDefaultChartOptions();\n        var fontOptions = this.getDefaultFontOptions();\n        options.seriesDefaults = __assign$8(__assign$8({}, options.seriesDefaults), { title: __assign$8(__assign$8({}, fontOptions), { enabled: true, fontSize: 12, fontWeight: 'bold' }), callout: {\n                colors: strokes,\n                length: 10,\n                strokeWidth: 2,\n            }, label: __assign$8(__assign$8({}, fontOptions), { enabled: false, offset: 3, minRequiredAngle: 0 }), tooltip: {\n                enabled: true,\n            }, shadow: this.getDefaultDropShadowOptions() });\n        return options;\n    };\n    return DoughnutChartProxy;\n}(PolarChartProxy));\n\nvar __extends$1S = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1b = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar GridChartComp = /** @class */ (function (_super) {\n    __extends$1S(GridChartComp, _super);\n    function GridChartComp(params) {\n        var _this = _super.call(this, GridChartComp.TEMPLATE) || this;\n        _this.getChartPaletteName = function () { return _this.chartController.getPaletteName(); };\n        _this.getChartComponentsWrapper = function () { return _this.eChartComponentsWrapper; };\n        _this.getDockedContainer = function () { return _this.eDockedContainer; };\n        _this.getCurrentChartType = function () { return _this.chartType; };\n        _this.params = params;\n        return _this;\n    }\n    GridChartComp.prototype.init = function () {\n        var modelParams = {\n            pivotChart: this.params.pivotChart,\n            chartType: this.params.chartType,\n            aggFunc: this.params.aggFunc,\n            cellRange: this.params.cellRange,\n            suppressChartRanges: this.params.suppressChartRanges,\n        };\n        this.model = this.wireBean(new ChartDataModel(modelParams));\n        this.chartController = this.wireBean(new ChartController(this.model, this.params.chartPaletteName));\n        this.createChart();\n        if (this.params.insideDialog) {\n            this.addDialog();\n        }\n        this.addResizeListener();\n        this.addMenu();\n        this.addDestroyableEventListener(this.getGui(), 'focusin', this.setActiveChartCellRange.bind(this));\n        this.addDestroyableEventListener(this.chartController, ChartController.EVENT_CHART_UPDATED, this.refresh.bind(this));\n        this.addDestroyableEventListener(this.chartMenu, ChartMenu.EVENT_DOWNLOAD_CHART, this.downloadChart.bind(this));\n        this.refresh();\n    };\n    GridChartComp.prototype.createChart = function () {\n        var width, height;\n        // if chart already exists, destroy it and remove it from DOM\n        if (this.chartProxy) {\n            var chart = this.chartProxy.getChart();\n            if (chart) {\n                // preserve existing width/height\n                width = chart.width;\n                height = chart.height;\n            }\n            this.chartProxy.destroy();\n        }\n        var processChartOptionsFunc = this.params.processChartOptions ?\n            this.params.processChartOptions : this.gridOptionsWrapper.getProcessChartOptionsFunc();\n        var categorySelected = this.model.getSelectedDimension().colId !== ChartDataModel.DEFAULT_CATEGORY;\n        var chartType = this.model.getChartType();\n        var isGrouping = this.model.isGrouping();\n        var chartProxyParams = {\n            chartType: chartType,\n            processChartOptions: processChartOptionsFunc,\n            getChartPaletteName: this.getChartPaletteName.bind(this),\n            allowPaletteOverride: !this.params.chartPaletteName,\n            isDarkTheme: this.environment.isThemeDark.bind(this.environment),\n            parentElement: this.eChart,\n            width: width,\n            height: height,\n            eventService: this.eventService,\n            categorySelected: categorySelected,\n            grouping: isGrouping,\n            document: this.gridOptionsWrapper.getDocument()\n        };\n        // set local state used to detect when chart type changes\n        this.chartType = chartType;\n        this.chartGroupingActive = isGrouping;\n        this.chartProxy = this.createChartProxy(chartProxyParams);\n        this.chartController.setChartProxy(this.chartProxy);\n    };\n    GridChartComp.prototype.createChartProxy = function (chartProxyParams) {\n        switch (chartProxyParams.chartType) {\n            case agGridCommunity.ChartType.GroupedColumn:\n            case agGridCommunity.ChartType.StackedColumn:\n            case agGridCommunity.ChartType.NormalizedColumn:\n            case agGridCommunity.ChartType.GroupedBar:\n            case agGridCommunity.ChartType.StackedBar:\n            case agGridCommunity.ChartType.NormalizedBar:\n                return new BarChartProxy(chartProxyParams);\n            case agGridCommunity.ChartType.Pie:\n                return new PieChartProxy(chartProxyParams);\n            case agGridCommunity.ChartType.Doughnut:\n                return new DoughnutChartProxy(chartProxyParams);\n            case agGridCommunity.ChartType.Area:\n            case agGridCommunity.ChartType.StackedArea:\n            case agGridCommunity.ChartType.NormalizedArea:\n                return new AreaChartProxy(chartProxyParams);\n            case agGridCommunity.ChartType.Line:\n                return new LineChartProxy(chartProxyParams);\n            case agGridCommunity.ChartType.Scatter:\n            case agGridCommunity.ChartType.Bubble:\n                return new ScatterChartProxy(chartProxyParams);\n        }\n    };\n    GridChartComp.prototype.addDialog = function () {\n        var _this = this;\n        var title = this.chartTranslator.translate(this.params.pivotChart ? 'pivotChartTitle' : 'rangeChartTitle');\n        this.chartDialog = new agGridCommunity.AgDialog({\n            resizable: true,\n            movable: true,\n            maximizable: true,\n            title: title,\n            component: this,\n            centered: true,\n            closable: true\n        });\n        this.getContext().wireBean(this.chartDialog);\n        this.chartDialog.addEventListener(agGridCommunity.AgDialog.EVENT_DESTROYED, function () { return _this.destroy(); });\n    };\n    GridChartComp.prototype.addMenu = function () {\n        this.chartMenu = new ChartMenu(this.chartController);\n        this.chartMenu.setParentComponent(this);\n        this.getContext().wireBean(this.chartMenu);\n        this.eChartComponentsWrapper.appendChild(this.chartMenu.getGui());\n    };\n    GridChartComp.prototype.refresh = function () {\n        if (this.shouldRecreateChart()) {\n            this.createChart();\n        }\n        this.updateChart();\n    };\n    GridChartComp.prototype.shouldRecreateChart = function () {\n        var chartTypeChanged = this.chartType !== this.model.getChartType();\n        var groupingChanged = this.chartGroupingActive !== this.model.isGrouping();\n        return chartTypeChanged || groupingChanged;\n    };\n    GridChartComp.prototype.slideDockedOut = function (width) {\n        this.eDockedContainer.style.minWidth = width + \"px\";\n    };\n    GridChartComp.prototype.slideDockedIn = function () {\n        this.eDockedContainer.style.minWidth = '0';\n    };\n    GridChartComp.prototype.getChartModel = function () {\n        return this.chartController.getChartModel();\n    };\n    GridChartComp.prototype.updateChart = function () {\n        var _a = this, model = _a.model, chartProxy = _a.chartProxy;\n        var selectedCols = model.getSelectedValueColState();\n        var fields = selectedCols.map(function (c) { return ({ colId: c.colId, displayName: c.displayName }); });\n        var data = model.getData();\n        var chartEmpty = this.handleEmptyChart(data, fields);\n        if (chartEmpty) {\n            return;\n        }\n        var selectedDimension = model.getSelectedDimension();\n        var chartUpdateParams = {\n            data: data,\n            category: {\n                id: selectedDimension.colId,\n                name: selectedDimension.displayName\n            },\n            fields: fields\n        };\n        chartProxy.update(chartUpdateParams);\n    };\n    GridChartComp.prototype.handleEmptyChart = function (data, fields) {\n        var parent = this.chartProxy.getChart().parent;\n        var pivotModeDisabled = this.model.isPivotChart() && !this.model.isPivotMode();\n        var minFieldsRequired = 1;\n        if (this.chartController.isActiveXYChart()) {\n            minFieldsRequired = this.model.getChartType() === agGridCommunity.ChartType.Bubble ? 3 : 2;\n        }\n        var isEmptyChart = fields.length < minFieldsRequired || data.length === 0;\n        if (parent) {\n            agGridCommunity._.addOrRemoveCssClass(parent, 'ag-chart-empty', pivotModeDisabled || isEmptyChart);\n        }\n        if (pivotModeDisabled) {\n            this.eEmpty.innerText = this.chartTranslator.translate('pivotChartRequiresPivotMode');\n            return true;\n        }\n        if (isEmptyChart) {\n            this.eEmpty.innerText = this.chartTranslator.translate('noDataToChart');\n            return true;\n        }\n        return false;\n    };\n    GridChartComp.prototype.downloadChart = function () {\n        var chart = this.chartProxy.getChart();\n        var fileName = chart.title ? chart.title.text : 'chart';\n        chart.scene.download(fileName);\n    };\n    GridChartComp.prototype.refreshCanvasSize = function () {\n        var eChartWrapper = this.eChart;\n        var chart = this.chartProxy.getChart();\n        chart.height = agGridCommunity._.getInnerHeight(eChartWrapper);\n        chart.width = agGridCommunity._.getInnerWidth(eChartWrapper);\n    };\n    GridChartComp.prototype.addResizeListener = function () {\n        var _this = this;\n        var eGui = this.getGui();\n        var resizeFunc = function () {\n            if (!eGui || !eGui.offsetParent) {\n                observeResizeFunc();\n                return;\n            }\n            _this.refreshCanvasSize();\n        };\n        var observeResizeFunc = this.resizeObserverService.observeResize(this.eChart, resizeFunc, 5);\n    };\n    GridChartComp.prototype.setActiveChartCellRange = function (focusEvent) {\n        if (this.getGui().contains(focusEvent.relatedTarget)) {\n            return;\n        }\n        this.chartController.setChartRange();\n    };\n    GridChartComp.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.chartController) {\n            this.chartController.destroy();\n        }\n        if (this.chartProxy) {\n            this.chartProxy.destroy();\n        }\n        if (this.chartMenu) {\n            this.chartMenu.destroy();\n        }\n        // don't want to invoke destroy() on the Dialog / MessageBox (prevents destroy loop)\n        if (this.chartDialog && this.chartDialog.isAlive()) {\n            this.chartDialog.destroy();\n        }\n        // if the user is providing containers for the charts, we need to clean up, otherwise the old chart\n        // data will still be visible although the chart is no longer bound to the grid\n        var eGui = this.getGui();\n        agGridCommunity._.clearElement(eGui);\n        // remove from parent, so if user provided container, we detach from the provided dom element\n        agGridCommunity._.removeFromParent(eGui);\n    };\n    GridChartComp.TEMPLATE = \"<div class=\\\"ag-chart\\\" tabindex=\\\"-1\\\">\\n            <div ref=\\\"eChartComponentsWrapper\\\" tabindex=\\\"-1\\\" class=\\\"ag-chart-components-wrapper\\\">\\n                <div ref=\\\"eChart\\\" class=\\\"ag-chart-canvas-wrapper\\\">\\n                    <div ref=\\\"eEmpty\\\" class=\\\"ag-chart-empty-text ag-unselectable\\\"></div>\\n                </div>\\n            </div>\\n            <div ref=\\\"eDockedContainer\\\" class=\\\"ag-chart-docked-container\\\"></div>\\n        </div>\";\n    __decorate$1b([\n        agGridCommunity.RefSelector('eChart')\n    ], GridChartComp.prototype, \"eChart\", void 0);\n    __decorate$1b([\n        agGridCommunity.RefSelector('eChartComponentsWrapper')\n    ], GridChartComp.prototype, \"eChartComponentsWrapper\", void 0);\n    __decorate$1b([\n        agGridCommunity.RefSelector('eDockedContainer')\n    ], GridChartComp.prototype, \"eDockedContainer\", void 0);\n    __decorate$1b([\n        agGridCommunity.RefSelector('eEmpty')\n    ], GridChartComp.prototype, \"eEmpty\", void 0);\n    __decorate$1b([\n        agGridCommunity.Autowired('resizeObserverService')\n    ], GridChartComp.prototype, \"resizeObserverService\", void 0);\n    __decorate$1b([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], GridChartComp.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1b([\n        agGridCommunity.Autowired('environment')\n    ], GridChartComp.prototype, \"environment\", void 0);\n    __decorate$1b([\n        agGridCommunity.Autowired('chartTranslator')\n    ], GridChartComp.prototype, \"chartTranslator\", void 0);\n    __decorate$1b([\n        agGridCommunity.Autowired('eventService')\n    ], GridChartComp.prototype, \"eventService\", void 0);\n    __decorate$1b([\n        agGridCommunity.PostConstruct\n    ], GridChartComp.prototype, \"init\", null);\n    return GridChartComp;\n}(agGridCommunity.Component));\n\nvar __decorate$1c = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartService = /** @class */ (function () {\n    function ChartService() {\n        // we destroy all charts bound to this grid when grid is destroyed. activeCharts contains all charts, including\n        // those in developer provided containers.\n        this.activeCharts = new Set();\n        this.activeChartComps = new Set();\n    }\n    ChartService.prototype.getChartModels = function () {\n        var models = [];\n        this.activeChartComps.forEach(function (c) { return models.push(c.getChartModel()); });\n        return models;\n    };\n    ChartService.prototype.createChartFromCurrentRange = function (chartType) {\n        if (chartType === void 0) { chartType = agGridCommunity.ChartType.GroupedColumn; }\n        var selectedRange = this.getSelectedRange();\n        return this.createChart(selectedRange, chartType);\n    };\n    ChartService.prototype.createRangeChart = function (params) {\n        var cellRange = this.rangeController\n            ? this.rangeController.createCellRangeFromCellRangeParams(params.cellRange)\n            : undefined;\n        if (!cellRange) {\n            console.warn(\"ag-Grid - unable to create chart as no range is selected\");\n            return;\n        }\n        return this.createChart(cellRange, params.chartType, params.chartPalette, false, params.suppressChartRanges, params.chartContainer, params.aggFunc, params.processChartOptions);\n    };\n    ChartService.prototype.createPivotChart = function (params) {\n        // if required enter pivot mode\n        if (!this.columnController.isPivotMode()) {\n            this.columnController.setPivotMode(true, \"pivotChart\");\n        }\n        // pivot chart range contains all visible column without a row range to include all rows\n        var chartAllRangeParams = {\n            columns: this.columnController.getAllDisplayedColumns().map(function (col) { return col.getColId(); })\n        };\n        var cellRange = this.rangeController\n            ? this.rangeController.createCellRangeFromCellRangeParams(chartAllRangeParams)\n            : undefined;\n        if (!cellRange) {\n            console.warn(\"ag-Grid - unable to create chart as there are no columns in the grid.\");\n            return;\n        }\n        return this.createChart(cellRange, params.chartType, params.chartPalette, true, true, params.chartContainer, undefined, params.processChartOptions);\n    };\n    ChartService.prototype.createChart = function (cellRange, chartType, chartPaletteName, pivotChart, suppressChartRanges, container, aggFunc, processChartOptions) {\n        var _this = this;\n        if (pivotChart === void 0) { pivotChart = false; }\n        if (suppressChartRanges === void 0) { suppressChartRanges = false; }\n        var createChartContainerFunc = this.gridOptionsWrapper.getCreateChartContainerFunc();\n        var params = {\n            pivotChart: pivotChart,\n            cellRange: cellRange,\n            chartType: chartType,\n            chartPaletteName: chartPaletteName,\n            insideDialog: !(container || createChartContainerFunc),\n            suppressChartRanges: suppressChartRanges,\n            aggFunc: aggFunc,\n            processChartOptions: processChartOptions,\n        };\n        var chartComp = new GridChartComp(params);\n        this.context.wireBean(chartComp);\n        var chartRef = this.createChartRef(chartComp);\n        if (container) {\n            // if container exists, means developer initiated chart create via API, so place in provided container\n            container.appendChild(chartComp.getGui());\n            // if the chart container was placed outside of an element that\n            // has the grid's theme, we manually add the current theme to\n            // make sure all styles for the chartMenu are rendered correctly\n            var theme = this.environment.getTheme();\n            if (theme.el && !theme.el.contains(container)) {\n                agGridCommunity._.addCssClass(container, theme.theme);\n            }\n        }\n        else if (createChartContainerFunc) {\n            // otherwise user created chart via grid UI, check if developer provides containers (eg if the application\n            // is using its own dialogs rather than the grid provided dialogs)\n            createChartContainerFunc(chartRef);\n        }\n        else {\n            // add listener to remove from active charts list when charts are destroyed, e.g. closing chart dialog\n            chartComp.addEventListener(GridChartComp.EVENT_DESTROYED, function () {\n                _this.activeChartComps.delete(chartComp);\n                _this.activeCharts.delete(chartRef);\n            });\n        }\n        return chartRef;\n    };\n    ChartService.prototype.createChartRef = function (chartComp) {\n        var _this = this;\n        var chartRef = {\n            destroyChart: function () {\n                if (_this.activeCharts.has(chartRef)) {\n                    chartComp.destroy();\n                    _this.activeChartComps.delete(chartComp);\n                    _this.activeCharts.delete(chartRef);\n                }\n            },\n            chartElement: chartComp.getGui()\n        };\n        this.activeCharts.add(chartRef);\n        this.activeChartComps.add(chartComp);\n        return chartRef;\n    };\n    ChartService.prototype.getSelectedRange = function () {\n        var ranges = this.rangeController.getCellRanges();\n        return ranges.length > 0 ? ranges[0] : {};\n    };\n    ChartService.prototype.destroyAllActiveCharts = function () {\n        this.activeCharts.forEach(function (chart) { return chart.destroyChart(); });\n    };\n    __decorate$1c([\n        agGridCommunity.Optional('rangeController')\n    ], ChartService.prototype, \"rangeController\", void 0);\n    __decorate$1c([\n        agGridCommunity.Autowired('columnController')\n    ], ChartService.prototype, \"columnController\", void 0);\n    __decorate$1c([\n        agGridCommunity.Autowired('environment')\n    ], ChartService.prototype, \"environment\", void 0);\n    __decorate$1c([\n        agGridCommunity.Autowired('context')\n    ], ChartService.prototype, \"context\", void 0);\n    __decorate$1c([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ChartService.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1c([\n        agGridCommunity.PreDestroy\n    ], ChartService.prototype, \"destroyAllActiveCharts\", null);\n    ChartService = __decorate$1c([\n        agGridCommunity.Bean('chartService')\n    ], ChartService);\n    return ChartService;\n}());\n\nvar __decorate$1d = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartTranslator = /** @class */ (function () {\n    function ChartTranslator() {\n    }\n    ChartTranslator_1 = ChartTranslator;\n    ChartTranslator.prototype.translate = function (toTranslate) {\n        var translate = this.gridOptionsWrapper.getLocaleTextFunc();\n        var defaultTranslation = ChartTranslator_1.DEFAULT_TRANSLATIONS[toTranslate];\n        return translate(toTranslate, defaultTranslation);\n    };\n    var ChartTranslator_1;\n    ChartTranslator.DEFAULT_TRANSLATIONS = {\n        pivotChartTitle: 'Pivot Chart',\n        rangeChartTitle: 'Range Chart',\n        settings: 'Settings',\n        data: 'Data',\n        format: 'Format',\n        categories: 'Categories',\n        series: 'Series',\n        xyValues: 'X Y Values',\n        paired: 'Paired Mode',\n        axis: 'Axis',\n        color: 'Color',\n        thickness: 'Thickness',\n        xRotation: 'X Rotation',\n        yRotation: 'Y Rotation',\n        ticks: 'Ticks',\n        width: 'Width',\n        length: 'Length',\n        padding: 'Padding',\n        chart: 'Chart',\n        title: 'Title',\n        background: 'Background',\n        font: 'Font',\n        top: 'Top',\n        right: 'Right',\n        bottom: 'Bottom',\n        left: 'Left',\n        labels: 'Labels',\n        size: 'Size',\n        minSize: 'Minimum Size',\n        maxSize: 'Maximum Size',\n        legend: 'Legend',\n        position: 'Position',\n        markerSize: 'Marker Size',\n        markerStroke: 'Marker Stroke',\n        markerPadding: 'Marker Padding',\n        itemPaddingX: 'Item Padding X',\n        itemPaddingY: 'Item Padding Y',\n        strokeWidth: 'Stroke Width',\n        offset: 'Offset',\n        offsets: 'Offsets',\n        tooltips: 'Tooltips',\n        callout: 'Callout',\n        markers: 'Markers',\n        shadow: 'Shadow',\n        blur: 'Blur',\n        xOffset: 'X Offset',\n        yOffset: 'Y Offset',\n        lineWidth: 'Line Width',\n        normal: 'Normal',\n        bold: 'Bold',\n        italic: 'Italic',\n        boldItalic: 'Bold Italic',\n        predefined: 'Predefined',\n        fillOpacity: 'Fill Opacity',\n        strokeOpacity: 'Line Opacity',\n        columnGroup: 'Column',\n        barGroup: 'Bar',\n        pieGroup: 'Pie',\n        lineGroup: 'Line',\n        scatterGroup: 'X Y (Scatter)',\n        areaGroup: 'Area',\n        groupedColumnTooltip: 'Grouped',\n        stackedColumnTooltip: 'Stacked',\n        normalizedColumnTooltip: '100% Stacked',\n        groupedBarTooltip: 'Grouped',\n        stackedBarTooltip: 'Stacked',\n        normalizedBarTooltip: '100% Stacked',\n        pieTooltip: 'Pie',\n        doughnutTooltip: 'Doughnut',\n        lineTooltip: 'Line',\n        groupedAreaTooltip: 'Area',\n        stackedAreaTooltip: 'Stacked',\n        normalizedAreaTooltip: '100% Stacked',\n        scatterTooltip: 'Scatter',\n        bubbleTooltip: 'Bubble',\n        noDataToChart: 'No data available to be charted.',\n        pivotChartRequiresPivotMode: 'Pivot Chart requires Pivot Mode enabled.',\n    };\n    __decorate$1d([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ChartTranslator.prototype, \"gridOptionsWrapper\", void 0);\n    ChartTranslator = ChartTranslator_1 = __decorate$1d([\n        agGridCommunity.Bean(\"chartTranslator\")\n    ], ChartTranslator);\n    return ChartTranslator;\n}());\n\nvar __decorate$1e = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays$6 = (undefined && undefined.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar RangeController = /** @class */ (function () {\n    function RangeController() {\n        this.cellRanges = [];\n        this.bodyScrollListener = this.onBodyScroll.bind(this);\n        this.dragging = false;\n    }\n    RangeController.prototype.registerGridComp = function (gridPanel) {\n        this.gridPanel = gridPanel;\n        this.autoScrollService = new AutoScrollService(this.gridPanel, this.gridOptionsWrapper);\n    };\n    RangeController.prototype.init = function () {\n        this.logger = this.loggerFactory.create('RangeController');\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.removeAllCellRanges.bind(this));\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.removeAllCellRanges.bind(this));\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.removeAllCellRanges.bind(this));\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_COLUMN_GROUP_OPENED, this.refreshLastRangeStart.bind(this));\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_COLUMN_MOVED, this.refreshLastRangeStart.bind(this));\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_COLUMN_PINNED, this.refreshLastRangeStart.bind(this));\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_COLUMN_VISIBLE, this.onColumnVisibleChange.bind(this));\n    };\n    RangeController.prototype.onColumnVisibleChange = function () {\n        var _this = this;\n        // first move start column in last cell range (i.e. series chart range)\n        this.refreshLastRangeStart();\n        // then check if the column visibility has changed in any cell range\n        this.cellRanges.forEach(function (cellRange) {\n            var beforeCols = cellRange.columns;\n            // remove hidden cols from cell range\n            cellRange.columns = cellRange.columns.filter(function (col) { return col.isVisible(); });\n            var colsInRangeChanged = !agGridCommunity._.compareArrays(beforeCols, cellRange.columns);\n            if (colsInRangeChanged) {\n                // notify users and other parts of grid (i.e. status panel) that range has changed\n                _this.dispatchChangedEvent(false, true, cellRange.id);\n            }\n        });\n    };\n    RangeController.prototype.refreshLastRangeStart = function () {\n        var lastRange = agGridCommunity._.last(this.cellRanges);\n        if (!lastRange) {\n            return;\n        }\n        this.refreshRangeStart(lastRange);\n    };\n    RangeController.prototype.isContiguousRange = function (cellRange) {\n        var rangeColumns = cellRange.columns;\n        if (!rangeColumns.length) {\n            return false;\n        }\n        var allColumns = this.columnController.getAllDisplayedColumns();\n        var allPositions = rangeColumns.map(function (c) { return allColumns.indexOf(c); }).sort(function (a, b) { return a - b; });\n        return agGridCommunity._.last(allPositions) - allPositions[0] + 1 === rangeColumns.length;\n    };\n    RangeController.prototype.getRangeStartRow = function (cellRange) {\n        if (cellRange.startRow && cellRange.endRow) {\n            return this.rowPositionUtils.before(cellRange.startRow, cellRange.endRow) ?\n                cellRange.startRow : cellRange.endRow;\n        }\n        var rowPinned = this.pinnedRowModel.getPinnedTopRowCount() > 0 ? agGridCommunity.Constants.PINNED_TOP : undefined;\n        return { rowIndex: 0, rowPinned: rowPinned };\n    };\n    RangeController.prototype.getRangeEndRow = function (cellRange) {\n        if (cellRange.startRow && cellRange.endRow) {\n            return this.rowPositionUtils.before(cellRange.startRow, cellRange.endRow) ?\n                cellRange.endRow : cellRange.startRow;\n        }\n        var pinnedBottomRowCount = this.pinnedRowModel.getPinnedBottomRowCount();\n        var pinnedBottom = pinnedBottomRowCount > 0;\n        if (pinnedBottom) {\n            return {\n                rowIndex: pinnedBottomRowCount - 1,\n                rowPinned: agGridCommunity.Constants.PINNED_BOTTOM\n            };\n        }\n        return {\n            rowIndex: this.rowModel.getRowCount() - 1,\n            rowPinned: undefined\n        };\n    };\n    RangeController.prototype.setRangeToCell = function (cell, appendRange) {\n        if (appendRange === void 0) { appendRange = false; }\n        if (!this.gridOptionsWrapper.isEnableRangeSelection()) {\n            return;\n        }\n        var columns = this.calculateColumnsBetween(cell.column, cell.column);\n        if (!columns) {\n            return;\n        }\n        var suppressMultiRangeSelections = this.gridOptionsWrapper.isSuppressMultiRangeSelection();\n        // if not appending, then clear previous range selections\n        if (suppressMultiRangeSelections || !appendRange || agGridCommunity._.missing(this.cellRanges)) {\n            this.removeAllCellRanges(true);\n        }\n        var rowForCell = {\n            rowIndex: cell.rowIndex,\n            rowPinned: cell.rowPinned\n        };\n        // if there is already a range for this cell, then we reuse the same range, otherwise the user\n        // can ctrl & click a cell many times and hit ctrl+c, which would result in the cell getting copied\n        // many times to the clipboard.\n        var cellRange;\n        for (var i = 0; i < this.cellRanges.length; i++) {\n            var range = this.cellRanges[i];\n            var matches = \n            // check cols are same\n            (range.columns && range.columns.length === 1 && range.columns[0] === cell.column) &&\n                // check rows are same\n                this.rowPositionUtils.sameRow(rowForCell, range.startRow) &&\n                this.rowPositionUtils.sameRow(rowForCell, range.endRow);\n            if (matches) {\n                cellRange = range;\n                break;\n            }\n        }\n        if (cellRange) {\n            // we need it at the end of the list, as the dragStart picks the last created\n            // range as the start point for the drag\n            var atEndOfList = agGridCommunity._.last(this.cellRanges) === cellRange;\n            if (!atEndOfList) {\n                agGridCommunity._.removeFromArray(this.cellRanges, cellRange);\n                this.cellRanges.push(cellRange);\n            }\n        }\n        else {\n            cellRange = {\n                startRow: rowForCell,\n                endRow: rowForCell,\n                columns: columns,\n                startColumn: cell.column\n            };\n            this.cellRanges.push(cellRange);\n        }\n        this.newestRangeStartCell = cell;\n        this.onDragStop();\n        this.dispatchChangedEvent(false, true, cellRange.id);\n    };\n    RangeController.prototype.extendLatestRangeToCell = function (cellPosition) {\n        if (this.isEmpty() || !this.newestRangeStartCell) {\n            return;\n        }\n        var cellRange = agGridCommunity._.last(this.cellRanges);\n        this.updateRangeEnd(cellRange, cellPosition);\n    };\n    RangeController.prototype.updateRangeEnd = function (cellRange, cellPosition, silent) {\n        var endColumn = cellPosition.column;\n        var colsToAdd = this.calculateColumnsBetween(cellRange.startColumn, endColumn);\n        if (!colsToAdd) {\n            return;\n        }\n        cellRange.columns = colsToAdd;\n        cellRange.endRow = { rowIndex: cellPosition.rowIndex, rowPinned: cellPosition.rowPinned };\n        if (!silent) {\n            this.dispatchChangedEvent(false, true, cellRange.id);\n        }\n    };\n    RangeController.prototype.refreshRangeStart = function (cellRange) {\n        var startColumn = cellRange.startColumn, columns = cellRange.columns;\n        var moveColInCellRange = function (colToMove, moveToFront) {\n            var otherCols = cellRange.columns.filter(function (col) { return col !== colToMove; });\n            if (colToMove) {\n                cellRange.startColumn = colToMove;\n                cellRange.columns = moveToFront ? __spreadArrays$6([colToMove], otherCols) : __spreadArrays$6(otherCols, [colToMove]);\n            }\n            else {\n                cellRange.columns = otherCols;\n            }\n        };\n        var _a = this.getRangeEdgeColumns(cellRange), left = _a.left, right = _a.right;\n        var shouldMoveLeftCol = startColumn === columns[0] && startColumn !== left;\n        if (shouldMoveLeftCol) {\n            moveColInCellRange(left, true);\n            return;\n        }\n        var shouldMoveRightCol = startColumn === agGridCommunity._.last(columns) && startColumn === right;\n        if (shouldMoveRightCol) {\n            moveColInCellRange(right, false);\n            return;\n        }\n    };\n    RangeController.prototype.getRangeEdgeColumns = function (cellRange) {\n        var allColumns = this.columnController.getAllDisplayedColumns();\n        var allIndices = cellRange.columns\n            .map(function (c) { return allColumns.indexOf(c); })\n            .filter(function (i) { return i > -1; })\n            .sort(function (a, b) { return a - b; });\n        return {\n            left: allColumns[allIndices[0]],\n            right: allColumns[agGridCommunity._.last(allIndices)]\n        };\n    };\n    // returns true if successful, false if not successful\n    RangeController.prototype.extendLatestRangeInDirection = function (key) {\n        if (this.isEmpty() || !this.newestRangeStartCell) {\n            return;\n        }\n        var lastRange = agGridCommunity._.last(this.cellRanges);\n        var startCell = this.newestRangeStartCell;\n        var firstCol = lastRange.columns[0];\n        var lastCol = agGridCommunity._.last(lastRange.columns);\n        // find the cell that is at the furthest away corner from the starting cell\n        var endCellIndex = lastRange.endRow.rowIndex;\n        var endCellFloating = lastRange.endRow.rowPinned;\n        var endCellColumn = startCell.column === firstCol ? lastCol : firstCol;\n        var endCell = { column: endCellColumn, rowIndex: endCellIndex, rowPinned: endCellFloating };\n        var newEndCell = this.cellNavigationService.getNextCellToFocus(key, endCell);\n        // if user is at end of grid, so no cell to extend to, we return false\n        if (!newEndCell) {\n            return;\n        }\n        this.setCellRange({\n            rowStartIndex: startCell.rowIndex,\n            rowStartPinned: startCell.rowPinned,\n            rowEndIndex: newEndCell.rowIndex,\n            rowEndPinned: newEndCell.rowPinned,\n            columnStart: startCell.column,\n            columnEnd: newEndCell.column\n        });\n        return newEndCell;\n    };\n    RangeController.prototype.setCellRange = function (params) {\n        if (!this.gridOptionsWrapper.isEnableRangeSelection()) {\n            return;\n        }\n        this.removeAllCellRanges(true);\n        this.addCellRange(params);\n    };\n    RangeController.prototype.setCellRanges = function (cellRanges) {\n        var _this = this;\n        this.removeAllCellRanges(true);\n        cellRanges.forEach(function (newRange) {\n            if (newRange.columns && newRange.startRow) {\n                _this.newestRangeStartCell = {\n                    rowIndex: newRange.startRow.rowIndex,\n                    rowPinned: newRange.startRow.rowPinned,\n                    column: newRange.columns[0]\n                };\n            }\n            _this.cellRanges.push(newRange);\n        });\n        this.dispatchChangedEvent(false, true);\n    };\n    RangeController.prototype.createCellRangeFromCellRangeParams = function (params) {\n        var _this = this;\n        var columns;\n        if (params.columns) {\n            columns = params.columns.map(function (c) { return _this.columnController.getColumnWithValidation(c); }).filter(function (c) { return c; });\n        }\n        else {\n            var columnStart = this.columnController.getColumnWithValidation(params.columnStart);\n            var columnEnd = this.columnController.getColumnWithValidation(params.columnEnd);\n            if (!columnStart || !columnEnd) {\n                return;\n            }\n            columns = this.calculateColumnsBetween(columnStart, columnEnd);\n        }\n        if (!columns) {\n            return;\n        }\n        var startRow = params.rowStartIndex != null ? {\n            rowIndex: params.rowStartIndex,\n            rowPinned: params.rowStartPinned\n        } : undefined;\n        var endRow = params.rowEndIndex != null ? {\n            rowIndex: params.rowEndIndex,\n            rowPinned: params.rowEndPinned\n        } : undefined;\n        return {\n            startRow: startRow,\n            endRow: endRow,\n            columns: columns,\n            startColumn: columns[0]\n        };\n    };\n    RangeController.prototype.addCellRange = function (params) {\n        if (!this.gridOptionsWrapper.isEnableRangeSelection()) {\n            return;\n        }\n        var newRange = this.createCellRangeFromCellRangeParams(params);\n        if (newRange) {\n            this.cellRanges.push(newRange);\n            this.dispatchChangedEvent(false, true, newRange.id);\n        }\n    };\n    RangeController.prototype.getCellRanges = function () {\n        return this.cellRanges;\n    };\n    RangeController.prototype.isEmpty = function () {\n        return this.cellRanges.length === 0;\n    };\n    RangeController.prototype.isMoreThanOneCell = function () {\n        if (this.cellRanges.length === 0) {\n            // no ranges, so not more than one cell\n            return false;\n        }\n        else if (this.cellRanges.length > 1) {\n            // many ranges, so more than one cell\n            return true;\n        }\n        // only one range, return true if range has more than one\n        var range = this.cellRanges[0];\n        var startRow = this.getRangeStartRow(range);\n        var endRow = this.getRangeEndRow(range);\n        return startRow.rowPinned !== endRow.rowPinned ||\n            startRow.rowIndex !== endRow.rowIndex ||\n            range.columns.length !== 1;\n    };\n    RangeController.prototype.removeAllCellRanges = function (silent) {\n        if (this.isEmpty()) {\n            return;\n        }\n        this.onDragStop();\n        this.cellRanges.length = 0;\n        if (!silent) {\n            this.dispatchChangedEvent(false, true);\n        }\n    };\n    // as the user is dragging outside of the panel, the div starts to scroll, which in turn\n    // means we are selection more (or less) cells, but the mouse isn't moving, so we recalculate\n    // the selection my mimicking a new mouse event\n    RangeController.prototype.onBodyScroll = function () {\n        this.onDragging(this.lastMouseEvent);\n    };\n    RangeController.prototype.isCellInAnyRange = function (cell) {\n        return this.getCellRangeCount(cell) > 0;\n    };\n    RangeController.prototype.isCellInSpecificRange = function (cell, range) {\n        var columnInRange = range.columns !== null && agGridCommunity._.includes(range.columns, cell.column);\n        var rowInRange = this.isRowInRange(cell.rowIndex, cell.rowPinned, range);\n        return columnInRange && rowInRange;\n    };\n    RangeController.prototype.isLastCellOfRange = function (cellRange, cell) {\n        var allColumns = this.columnController.getAllDisplayedColumns();\n        var allPositions = cellRange.columns.map(function (c) { return allColumns.indexOf(c); }).sort(function (a, b) { return a - b; });\n        var startRow = cellRange.startRow, endRow = cellRange.endRow;\n        var lastRow = this.rowPositionUtils.before(startRow, endRow) ? endRow : startRow;\n        var isLastColumn = allColumns.indexOf(cell.column) === agGridCommunity._.last(allPositions);\n        var isLastRow = cell.rowIndex === lastRow.rowIndex && cell.rowPinned === lastRow.rowPinned;\n        return isLastColumn && isLastRow;\n    };\n    // returns the number of ranges this cell is in\n    RangeController.prototype.getCellRangeCount = function (cell) {\n        var _this = this;\n        if (this.isEmpty()) {\n            return 0;\n        }\n        return this.cellRanges.filter(function (cellRange) { return _this.isCellInSpecificRange(cell, cellRange); }).length;\n    };\n    RangeController.prototype.isRowInRange = function (rowIndex, floating, cellRange) {\n        var firstRow = this.getRangeStartRow(cellRange);\n        var lastRow = this.getRangeEndRow(cellRange);\n        var thisRow = { rowIndex: rowIndex, rowPinned: floating };\n        // compare rowPinned with == instead of === because it can be `null` or `undefined`\n        var equalsFirstRow = thisRow.rowIndex === firstRow.rowIndex && thisRow.rowPinned == firstRow.rowPinned;\n        var equalsLastRow = thisRow.rowIndex === lastRow.rowIndex && thisRow.rowPinned == lastRow.rowPinned;\n        if (equalsFirstRow || equalsLastRow) {\n            return true;\n        }\n        var afterFirstRow = !this.rowPositionUtils.before(thisRow, firstRow);\n        var beforeLastRow = this.rowPositionUtils.before(thisRow, lastRow);\n        return afterFirstRow && beforeLastRow;\n    };\n    RangeController.prototype.getDraggingRange = function () {\n        return this.draggingRange;\n    };\n    RangeController.prototype.onDragStart = function (mouseEvent) {\n        if (!this.gridOptionsWrapper.isEnableRangeSelection()) {\n            return;\n        }\n        var ctrlKey = mouseEvent.ctrlKey, metaKey = mouseEvent.metaKey, shiftKey = mouseEvent.shiftKey;\n        // ctrlKey for windows, metaKey for Apple\n        var multiKeyPressed = ctrlKey || metaKey;\n        var allowMulti = !this.gridOptionsWrapper.isSuppressMultiRangeSelection();\n        var multiSelectKeyPressed = allowMulti ? multiKeyPressed : false;\n        var mouseCell = this.mouseEventService.getCellPositionForEvent(mouseEvent);\n        if (agGridCommunity._.missing(mouseCell)) {\n            // if drag wasn't on cell, then do nothing, including do not set dragging=true,\n            // (which them means onDragging and onDragStop do nothing)\n            return;\n        }\n        if (!multiSelectKeyPressed && (!shiftKey || agGridCommunity._.exists(agGridCommunity._.last(this.cellRanges).type))) {\n            this.removeAllCellRanges(true);\n        }\n        this.dragging = true;\n        this.draggingCell = mouseCell;\n        this.lastMouseEvent = mouseEvent;\n        if (!shiftKey) {\n            this.newestRangeStartCell = mouseCell;\n        }\n        // if we didn't clear the ranges, then dragging means the user clicked, and when the\n        // user clicks it means a range of one cell was created. we need to extend this range\n        // rather than creating another range. otherwise we end up with two distinct ranges\n        // from a drag operation (one from click, and one from drag).\n        if (this.cellRanges.length > 0) {\n            this.draggingRange = agGridCommunity._.last(this.cellRanges);\n        }\n        else {\n            var mouseRowPosition = {\n                rowIndex: mouseCell.rowIndex,\n                rowPinned: mouseCell.rowPinned\n            };\n            this.draggingRange = {\n                startRow: mouseRowPosition,\n                endRow: mouseRowPosition,\n                columns: [mouseCell.column],\n                startColumn: this.newestRangeStartCell.column\n            };\n            this.cellRanges.push(this.draggingRange);\n        }\n        this.gridPanel.addScrollEventListener(this.bodyScrollListener);\n        this.dispatchChangedEvent(true, false, this.draggingRange.id);\n    };\n    RangeController.prototype.onDragging = function (mouseEvent) {\n        var _this = this;\n        if (!this.dragging || !mouseEvent) {\n            return;\n        }\n        this.lastMouseEvent = mouseEvent;\n        var cellPosition = this.mouseEventService.getCellPositionForEvent(mouseEvent);\n        var isMouseAndStartInPinned = function (position) {\n            return cellPosition && cellPosition.rowPinned === position && _this.newestRangeStartCell.rowPinned === position;\n        };\n        var skipVerticalScroll = isMouseAndStartInPinned('top') || isMouseAndStartInPinned('bottom');\n        this.autoScrollService.check(mouseEvent, skipVerticalScroll);\n        if (!cellPosition ||\n            !this.draggingCell ||\n            this.cellPositionUtils.equals(this.draggingCell, cellPosition)) {\n            return;\n        }\n        var columns = this.calculateColumnsBetween(this.newestRangeStartCell.column, cellPosition.column);\n        if (!columns) {\n            return;\n        }\n        this.draggingCell = cellPosition;\n        this.draggingRange.endRow = {\n            rowIndex: cellPosition.rowIndex,\n            rowPinned: cellPosition.rowPinned\n        };\n        this.draggingRange.columns = columns;\n        this.dispatchChangedEvent(false, false, this.draggingRange.id);\n    };\n    RangeController.prototype.onDragStop = function () {\n        if (!this.dragging) {\n            return;\n        }\n        var id = this.draggingRange.id;\n        this.autoScrollService.ensureCleared();\n        this.gridPanel.removeScrollEventListener(this.bodyScrollListener);\n        this.lastMouseEvent = null;\n        this.dragging = false;\n        this.draggingRange = undefined;\n        this.draggingCell = undefined;\n        this.dispatchChangedEvent(false, true, id);\n    };\n    RangeController.prototype.dispatchChangedEvent = function (started, finished, id) {\n        var event = Object.freeze({\n            type: agGridCommunity.Events.EVENT_RANGE_SELECTION_CHANGED,\n            api: this.gridApi,\n            columnApi: this.columnApi,\n            started: started,\n            finished: finished,\n            id: id,\n        });\n        this.eventService.dispatchEvent(event);\n    };\n    RangeController.prototype.calculateColumnsBetween = function (columnFrom, columnTo) {\n        var allColumns = this.columnController.getAllDisplayedColumns();\n        var isSameColumn = columnFrom === columnTo;\n        var fromIndex = allColumns.indexOf(columnFrom);\n        if (fromIndex < 0) {\n            console.warn(\"ag-Grid: column \" + columnFrom.getId() + \" is not visible\");\n            return undefined;\n        }\n        var toIndex = isSameColumn ? fromIndex : allColumns.indexOf(columnTo);\n        if (toIndex < 0) {\n            console.warn(\"ag-Grid: column \" + columnTo.getId() + \" is not visible\");\n            return undefined;\n        }\n        if (isSameColumn) {\n            return [columnFrom];\n        }\n        var firstIndex = Math.min(fromIndex, toIndex);\n        var lastIndex = firstIndex === fromIndex ? toIndex : fromIndex;\n        var columns = [];\n        for (var i = firstIndex; i <= lastIndex; i++) {\n            columns.push(allColumns[i]);\n        }\n        return columns;\n    };\n    __decorate$1e([\n        agGridCommunity.Autowired('loggerFactory')\n    ], RangeController.prototype, \"loggerFactory\", void 0);\n    __decorate$1e([\n        agGridCommunity.Autowired('rowModel')\n    ], RangeController.prototype, \"rowModel\", void 0);\n    __decorate$1e([\n        agGridCommunity.Autowired('eventService')\n    ], RangeController.prototype, \"eventService\", void 0);\n    __decorate$1e([\n        agGridCommunity.Autowired('columnController')\n    ], RangeController.prototype, \"columnController\", void 0);\n    __decorate$1e([\n        agGridCommunity.Autowired('mouseEventService')\n    ], RangeController.prototype, \"mouseEventService\", void 0);\n    __decorate$1e([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], RangeController.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1e([\n        agGridCommunity.Autowired('columnApi')\n    ], RangeController.prototype, \"columnApi\", void 0);\n    __decorate$1e([\n        agGridCommunity.Autowired('gridApi')\n    ], RangeController.prototype, \"gridApi\", void 0);\n    __decorate$1e([\n        agGridCommunity.Autowired('cellNavigationService')\n    ], RangeController.prototype, \"cellNavigationService\", void 0);\n    __decorate$1e([\n        agGridCommunity.Autowired(\"pinnedRowModel\")\n    ], RangeController.prototype, \"pinnedRowModel\", void 0);\n    __decorate$1e([\n        agGridCommunity.Autowired('rowPositionUtils')\n    ], RangeController.prototype, \"rowPositionUtils\", void 0);\n    __decorate$1e([\n        agGridCommunity.Autowired('cellPositionUtils')\n    ], RangeController.prototype, \"cellPositionUtils\", void 0);\n    __decorate$1e([\n        agGridCommunity.PostConstruct\n    ], RangeController.prototype, \"init\", null);\n    RangeController = __decorate$1e([\n        agGridCommunity.Bean('rangeController')\n    ], RangeController);\n    return RangeController;\n}());\nvar AutoScrollService = /** @class */ (function () {\n    function AutoScrollService(gridPanel, gridOptionsWrapper) {\n        this.tickingInterval = null;\n        this.gridPanel = gridPanel;\n        this.gridOptionsWrapper = gridOptionsWrapper;\n    }\n    AutoScrollService.prototype.check = function (mouseEvent, skipVerticalScroll) {\n        if (skipVerticalScroll === void 0) { skipVerticalScroll = false; }\n        var rect = this.gridPanel.getBodyClientRect();\n        skipVerticalScroll = skipVerticalScroll || this.gridOptionsWrapper.getDomLayout() !== agGridCommunity.Constants.DOM_LAYOUT_NORMAL;\n        // we don't do ticking if grid is auto height unless we have a horizontal scroller\n        if (skipVerticalScroll && !this.gridPanel.isHorizontalScrollShowing()) {\n            return;\n        }\n        this.tickLeft = mouseEvent.clientX < (rect.left + 20);\n        this.tickRight = mouseEvent.clientX > (rect.right - 20);\n        this.tickUp = mouseEvent.clientY < (rect.top + 20) && !skipVerticalScroll;\n        this.tickDown = mouseEvent.clientY > (rect.bottom - 20) && !skipVerticalScroll;\n        if (this.tickLeft || this.tickRight || this.tickUp || this.tickDown) {\n            this.ensureTickingStarted();\n        }\n        else {\n            this.ensureCleared();\n        }\n    };\n    AutoScrollService.prototype.ensureTickingStarted = function () {\n        if (this.tickingInterval === null) {\n            this.tickingInterval = window.setInterval(this.doTick.bind(this), 100);\n            this.tickCount = 0;\n        }\n    };\n    AutoScrollService.prototype.doTick = function () {\n        this.tickCount++;\n        var vScrollPosition = this.gridPanel.getVScrollPosition();\n        var hScrollPosition = this.gridPanel.getHScrollPosition();\n        var tickAmount;\n        tickAmount = this.tickCount > 20 ? 200 : (this.tickCount > 10 ? 80 : 40);\n        if (this.tickUp) {\n            this.gridPanel.setVerticalScrollPosition(vScrollPosition.top - tickAmount);\n        }\n        if (this.tickDown) {\n            this.gridPanel.setVerticalScrollPosition(vScrollPosition.top + tickAmount);\n        }\n        if (this.tickLeft) {\n            this.gridPanel.setHorizontalScrollPosition(hScrollPosition.left - tickAmount);\n        }\n        if (this.tickRight) {\n            this.gridPanel.setHorizontalScrollPosition(hScrollPosition.left + tickAmount);\n        }\n    };\n    AutoScrollService.prototype.ensureCleared = function () {\n        if (this.tickingInterval) {\n            window.clearInterval(this.tickingInterval);\n            this.tickingInterval = null;\n        }\n    };\n    return AutoScrollService;\n}());\n\nvar __extends$1T = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1f = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AbstractSelectionHandle = /** @class */ (function (_super) {\n    __extends$1T(AbstractSelectionHandle, _super);\n    function AbstractSelectionHandle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.changedCell = false;\n        _this.dragging = false;\n        _this.shouldDestroyOnEndDragging = false;\n        return _this;\n    }\n    AbstractSelectionHandle.prototype.init = function () {\n        var _this = this;\n        this.dragService.addDragSource({\n            dragStartPixels: 0,\n            eElement: this.getGui(),\n            onDragStart: this.onDragStart.bind(this),\n            onDragging: function (e) {\n                _this.dragging = true;\n                _this.rangeController.autoScrollService.check(e);\n                if (_this.changedCell) {\n                    _this.onDrag(e);\n                }\n            },\n            onDragStop: function (e) {\n                _this.dragging = false;\n                _this.onDragEnd(e);\n                _this.clearValues();\n                _this.rangeController.autoScrollService.ensureCleared();\n                agGridCommunity._.removeCssClass(document.body, \"ag-dragging-\" + _this.type + \"-handle\");\n                if (_this.shouldDestroyOnEndDragging) {\n                    _this.destroy();\n                }\n            }\n        });\n        this.addDestroyableEventListener(this.getGui(), 'mousedown', this.preventRangeExtension.bind(this));\n    };\n    AbstractSelectionHandle.prototype.isDragging = function () {\n        return this.dragging;\n    };\n    AbstractSelectionHandle.prototype.getCellComp = function () {\n        return this.cellComp;\n    };\n    AbstractSelectionHandle.prototype.setCellComp = function (cellComp) {\n        this.cellComp = cellComp;\n    };\n    AbstractSelectionHandle.prototype.getCellRange = function () {\n        return this.cellRange;\n    };\n    AbstractSelectionHandle.prototype.setCellRange = function (range) {\n        this.cellRange = range;\n    };\n    AbstractSelectionHandle.prototype.getRangeStartRow = function () {\n        return this.rangeStartRow;\n    };\n    AbstractSelectionHandle.prototype.setRangeStartRow = function (row) {\n        this.rangeStartRow = row;\n    };\n    AbstractSelectionHandle.prototype.getRangeEndRow = function () {\n        return this.rangeEndRow;\n    };\n    AbstractSelectionHandle.prototype.setRangeEndRow = function (row) {\n        this.rangeEndRow = row;\n    };\n    AbstractSelectionHandle.prototype.getLastCellHovered = function () {\n        return this.lastCellHovered;\n    };\n    AbstractSelectionHandle.prototype.preventRangeExtension = function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n    };\n    AbstractSelectionHandle.prototype.onDragStart = function (e) {\n        this.cellHoverListener = this.addDestroyableEventListener(this.rowRenderer.getGridCore().getRootGui(), 'mousemove', this.updateLastCellPositionHovered.bind(this));\n        agGridCommunity._.addCssClass(document.body, \"ag-dragging-\" + this.type + \"-handle\");\n    };\n    AbstractSelectionHandle.prototype.updateLastCellPositionHovered = function (e) {\n        var cell = this.mouseEventService.getCellPositionForEvent(e);\n        if (cell === this.lastCellHovered) {\n            this.changedCell = false;\n            return;\n        }\n        this.lastCellHovered = cell;\n        this.changedCell = true;\n    };\n    AbstractSelectionHandle.prototype.getType = function () {\n        return this.type;\n    };\n    AbstractSelectionHandle.prototype.refresh = function (cellComp) {\n        var _this = this;\n        var oldCellComp = this.getCellComp();\n        var eGui = this.getGui();\n        var cellRange = agGridCommunity._.last(this.rangeController.getCellRanges());\n        var start = cellRange.startRow;\n        var end = cellRange.endRow;\n        if (start && end) {\n            var isBefore = this.rowPositionUtils.before(end, start);\n            if (isBefore) {\n                this.setRangeStartRow(end);\n                this.setRangeEndRow(start);\n            }\n            else {\n                this.setRangeStartRow(start);\n                this.setRangeEndRow(end);\n            }\n        }\n        if (oldCellComp !== cellComp || !agGridCommunity._.isVisible(eGui)) {\n            this.setCellComp(cellComp);\n            window.setTimeout(function () {\n                if (_this.isAlive()) {\n                    cellComp.appendChild(eGui);\n                }\n            }, 1);\n        }\n        this.setCellRange(cellRange);\n    };\n    AbstractSelectionHandle.prototype.clearValues = function () {\n        this.lastCellHovered = undefined;\n        this.removeListeners();\n    };\n    AbstractSelectionHandle.prototype.removeListeners = function () {\n        if (this.cellHoverListener) {\n            this.cellHoverListener();\n            this.cellHoverListener = undefined;\n        }\n    };\n    AbstractSelectionHandle.prototype.destroy = function () {\n        if (!this.shouldDestroyOnEndDragging && this.isDragging()) {\n            agGridCommunity._.setDisplayed(this.getGui(), false);\n            this.shouldDestroyOnEndDragging = true;\n            return;\n        }\n        this.shouldDestroyOnEndDragging = false;\n        _super.prototype.destroy.call(this);\n        this.removeListeners();\n        var eGui = this.getGui();\n        if (eGui.parentElement) {\n            eGui.parentElement.removeChild(eGui);\n        }\n    };\n    __decorate$1f([\n        agGridCommunity.Autowired(\"rowRenderer\")\n    ], AbstractSelectionHandle.prototype, \"rowRenderer\", void 0);\n    __decorate$1f([\n        agGridCommunity.Autowired(\"dragService\")\n    ], AbstractSelectionHandle.prototype, \"dragService\", void 0);\n    __decorate$1f([\n        agGridCommunity.Autowired(\"rangeController\")\n    ], AbstractSelectionHandle.prototype, \"rangeController\", void 0);\n    __decorate$1f([\n        agGridCommunity.Autowired(\"mouseEventService\")\n    ], AbstractSelectionHandle.prototype, \"mouseEventService\", void 0);\n    __decorate$1f([\n        agGridCommunity.Autowired(\"columnController\")\n    ], AbstractSelectionHandle.prototype, \"columnController\", void 0);\n    __decorate$1f([\n        agGridCommunity.Autowired(\"cellNavigationService\")\n    ], AbstractSelectionHandle.prototype, \"cellNavigationService\", void 0);\n    __decorate$1f([\n        agGridCommunity.Autowired('rowPositionUtils')\n    ], AbstractSelectionHandle.prototype, \"rowPositionUtils\", void 0);\n    __decorate$1f([\n        agGridCommunity.PostConstruct\n    ], AbstractSelectionHandle.prototype, \"init\", null);\n    return AbstractSelectionHandle;\n}(agGridCommunity.Component));\n\nvar __extends$1U = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign$9 = (undefined && undefined.__assign) || function () {\n    __assign$9 = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign$9.apply(this, arguments);\n};\nvar __decorate$1g = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays$7 = (undefined && undefined.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar FillHandle = /** @class */ (function (_super) {\n    __extends$1U(FillHandle, _super);\n    function FillHandle() {\n        var _this = _super.call(this, FillHandle.TEMPLATE) || this;\n        _this.markedCellComps = [];\n        _this.cellValues = [];\n        _this.isUp = false;\n        _this.isLeft = false;\n        _this.isReduce = false;\n        _this.type = 'fill';\n        return _this;\n    }\n    FillHandle.prototype.onDrag = function (e) {\n        if (!this.initialXY) {\n            var _a = this.getGui().getBoundingClientRect(), left = _a.left, top_1 = _a.top;\n            this.initialXY = { x: left, y: top_1 };\n        }\n        var _b = this.initialXY, x = _b.x, y = _b.y;\n        var diffX = Math.abs(x - e.clientX);\n        var diffY = Math.abs(y - e.clientY);\n        var direction = diffX > diffY ? 'x' : 'y';\n        if (direction !== this.dragAxis) {\n            this.dragAxis = direction;\n        }\n        if (!this.initialPosition) {\n            var cellComp = this.getCellComp();\n            if (!cellComp) {\n                return;\n            }\n            this.initialPosition = cellComp.getCellPosition();\n        }\n        var lastCellHovered = this.getLastCellHovered();\n        if (lastCellHovered && lastCellHovered !== this.lastCellMarked) {\n            this.lastCellMarked = lastCellHovered;\n            this.markPathFrom(this.initialPosition, lastCellHovered);\n        }\n    };\n    FillHandle.prototype.onDragEnd = function (e) {\n        if (!this.markedCellComps.length) {\n            return;\n        }\n        var isX = this.dragAxis === 'x';\n        var initialRange = this.getCellRange();\n        var colLen = initialRange.columns.length;\n        var rangeStartRow = this.getRangeStartRow();\n        var rangeEndRow = this.getRangeEndRow();\n        var finalRange;\n        if (!this.isUp && !this.isLeft) {\n            finalRange = this.rangeController.createCellRangeFromCellRangeParams({\n                rowStartIndex: rangeStartRow.rowIndex,\n                rowStartPinned: rangeStartRow.rowPinned,\n                columnStart: initialRange.columns[0],\n                rowEndIndex: isX ? rangeEndRow.rowIndex : this.lastCellMarked.rowIndex,\n                rowEndPinned: isX ? rangeEndRow.rowPinned : this.lastCellMarked.rowPinned,\n                columnEnd: isX ? this.lastCellMarked.column : initialRange.columns[colLen - 1]\n            });\n        }\n        else {\n            var startRow = isX ? rangeStartRow : this.lastCellMarked;\n            finalRange = this.rangeController.createCellRangeFromCellRangeParams({\n                rowStartIndex: startRow.rowIndex,\n                rowStartPinned: startRow.rowPinned,\n                columnStart: isX ? this.lastCellMarked.column : initialRange.columns[0],\n                rowEndIndex: rangeEndRow.rowIndex,\n                rowEndPinned: rangeEndRow.rowPinned,\n                columnEnd: initialRange.columns[colLen - 1]\n            });\n        }\n        if (finalRange) {\n            // raising fill events for undo / redo\n            this.raiseFillStartEvent();\n            this.handleValueChanged(initialRange, finalRange, e);\n            this.rangeController.setCellRanges([finalRange]);\n            this.raiseFillEndEvent(initialRange, finalRange);\n        }\n    };\n    FillHandle.prototype.raiseFillStartEvent = function () {\n        var fillStartEvent = {\n            type: agGridCommunity.Events.EVENT_FILL_START,\n            columnApi: this.gridOptionsWrapper.getColumnApi(),\n            api: this.gridOptionsWrapper.getApi()\n        };\n        this.eventService.dispatchEvent(fillStartEvent);\n    };\n    FillHandle.prototype.raiseFillEndEvent = function (initialRange, finalRange) {\n        var fillEndEvent = {\n            type: agGridCommunity.Events.EVENT_FILL_END,\n            columnApi: this.gridOptionsWrapper.getColumnApi(),\n            api: this.gridOptionsWrapper.getApi(),\n            initialRange: initialRange,\n            finalRange: finalRange\n        };\n        this.eventService.dispatchEvent(fillEndEvent);\n    };\n    FillHandle.prototype.handleValueChanged = function (initialRange, finalRange, e) {\n        var _this = this;\n        var initialRangeEndRow = this.rangeController.getRangeEndRow(initialRange);\n        var initialRangeStartRow = this.rangeController.getRangeStartRow(initialRange);\n        var finalRangeEndRow = this.rangeController.getRangeEndRow(finalRange);\n        var finalRangeStartRow = this.rangeController.getRangeStartRow(finalRange);\n        var isVertical = this.dragAxis === 'y';\n        // if the range is being reduced in size, all we need to do is\n        // clear the cells that are no longer part of the range\n        if (this.isReduce && !this.gridOptionsWrapper.isSuppressClearOnFillReduction()) {\n            var columns = isVertical\n                ? initialRange.columns\n                : initialRange.columns.filter(function (col) { return finalRange.columns.indexOf(col) < 0; });\n            var startRow = isVertical ? this.cellNavigationService.getRowBelow(finalRangeEndRow) : finalRangeStartRow;\n            if (startRow) {\n                this.clearCellsInRange(startRow, initialRangeEndRow, columns);\n            }\n            return;\n        }\n        var withinInitialRange = true;\n        var values = [];\n        var initialValues = [];\n        var idx = 0;\n        var resetValues = function () {\n            values.length = 0;\n            initialValues.length = 0;\n            idx = 0;\n        };\n        var iterateAcrossCells = function (column, columns) {\n            var currentRow = _this.isUp ? initialRangeEndRow : initialRangeStartRow;\n            var finished = false;\n            if (isVertical) {\n                withinInitialRange = true;\n                resetValues();\n            }\n            var _loop_1 = function () {\n                var rowNode = _this.rowPositionUtils.getRowNode(currentRow);\n                if (!rowNode) {\n                    return \"break\";\n                }\n                if (isVertical && column) {\n                    fillValues(values, column, rowNode, function () {\n                        return !_this.rowPositionUtils.sameRow(currentRow, _this.isUp ? initialRangeStartRow : initialRangeEndRow);\n                    });\n                }\n                else if (columns) {\n                    withinInitialRange = true;\n                    resetValues();\n                    columns.forEach(function (col) { return fillValues(values, col, rowNode, function () { return col !== (_this.isLeft ? initialRange.columns[0] : agGridCommunity._.last(initialRange.columns)); }); });\n                }\n                finished = _this.rowPositionUtils.sameRow(currentRow, _this.isUp ? finalRangeStartRow : finalRangeEndRow);\n                currentRow = _this.isUp\n                    ? _this.cellNavigationService.getRowAbove(currentRow)\n                    : _this.cellNavigationService.getRowBelow(currentRow);\n            };\n            while (!finished && currentRow) {\n                var state_1 = _loop_1();\n                if (state_1 === \"break\")\n                    break;\n            }\n        };\n        var fillValues = function (values, col, rowNode, updateInitialSet) {\n            var currentValue;\n            if (withinInitialRange) {\n                currentValue = _this.valueService.getValue(col, rowNode);\n                initialValues.push(currentValue);\n                withinInitialRange = updateInitialSet();\n            }\n            else {\n                currentValue = _this.processValues(e, values, initialValues, col, rowNode, idx++);\n                if (col.isCellEditable(rowNode)) {\n                    _this.valueService.setValue(rowNode, col, currentValue);\n                }\n            }\n            values.push(currentValue);\n        };\n        if (isVertical) {\n            initialRange.columns.forEach(function (col) {\n                iterateAcrossCells(col);\n            });\n        }\n        else {\n            var columns = this.isLeft ? __spreadArrays$7(finalRange.columns).reverse() : finalRange.columns;\n            iterateAcrossCells(undefined, columns);\n        }\n    };\n    FillHandle.prototype.clearCellsInRange = function (startRow, endRow, columns) {\n        var _this = this;\n        var currentRow = startRow;\n        var finished = false;\n        var _loop_2 = function () {\n            var rowNode = this_1.rowPositionUtils.getRowNode(currentRow);\n            // should never happen, defensive programming\n            if (!rowNode) {\n                return \"break\";\n            }\n            columns.forEach(function (col) {\n                if (col.isCellEditable(rowNode)) {\n                    _this.valueService.setValue(rowNode, col, null);\n                }\n            });\n            finished = this_1.rowPositionUtils.sameRow(currentRow, endRow);\n            currentRow = this_1.cellNavigationService.getRowBelow(currentRow);\n        };\n        var this_1 = this;\n        while (!finished && currentRow) {\n            var state_2 = _loop_2();\n            if (state_2 === \"break\")\n                break;\n        }\n    };\n    FillHandle.prototype.processValues = function (event, values, initialValues, col, rowNode, idx) {\n        var userFillOperation = this.gridOptionsWrapper.getFillOperation();\n        var isVertical = this.dragAxis === 'y';\n        var direction;\n        if (isVertical) {\n            direction = this.isUp ? 'up' : 'down';\n        }\n        else {\n            direction = this.isLeft ? 'left' : 'right';\n        }\n        if (userFillOperation) {\n            var userResult = userFillOperation({\n                event: event,\n                values: values,\n                initialValues: initialValues,\n                currentIndex: idx,\n                api: this.gridOptionsWrapper.getApi(),\n                columnApi: this.gridOptionsWrapper.getColumnApi(),\n                context: this.gridOptionsWrapper.getContext(),\n                direction: direction,\n                column: isVertical ? col : undefined,\n                rowNode: !isVertical ? rowNode : undefined // only present if left / right\n            });\n            if (userResult !== false) {\n                return userResult;\n            }\n        }\n        var allNumbers = !values.some(function (val) { return isNaN(parseFloat(val)); });\n        // values should be copied in order if the alt key is pressed\n        // or if the values contain strings and numbers\n        // However, if we only have one initial value selected, and that\n        // value is a number and we are also pressing alt, then we should\n        // increment or decrement the value by 1 based on direction.\n        if (event.altKey || !allNumbers) {\n            if (allNumbers && initialValues.length === 1) {\n                var multiplier = (this.isUp || this.isLeft) ? -1 : 1;\n                return agGridCommunity._.last(values) + 1 * multiplier;\n            }\n            return values[idx % values.length];\n        }\n        return agGridCommunity._.last(agGridCommunity._.findLineByLeastSquares(values.map(Number)));\n    };\n    FillHandle.prototype.clearValues = function () {\n        this.clearMarkedPath();\n        this.clearCellValues();\n        this.lastCellMarked = undefined;\n        _super.prototype.clearValues.call(this);\n    };\n    FillHandle.prototype.clearMarkedPath = function () {\n        this.markedCellComps.forEach(function (cellComp) {\n            var eGui = cellComp.getGui();\n            agGridCommunity._.removeCssClass(eGui, 'ag-selection-fill-top');\n            agGridCommunity._.removeCssClass(eGui, 'ag-selection-fill-right');\n            agGridCommunity._.removeCssClass(eGui, 'ag-selection-fill-bottom');\n            agGridCommunity._.removeCssClass(eGui, 'ag-selection-fill-left');\n        });\n        this.markedCellComps.length = 0;\n        this.isUp = false;\n        this.isLeft = false;\n        this.isReduce = false;\n    };\n    FillHandle.prototype.clearCellValues = function () {\n        this.cellValues.length = 0;\n    };\n    FillHandle.prototype.markPathFrom = function (initialPosition, currentPosition) {\n        this.clearMarkedPath();\n        this.clearCellValues();\n        if (this.dragAxis === 'y') {\n            if (this.rowPositionUtils.sameRow(currentPosition, initialPosition)) {\n                return;\n            }\n            var isBefore = this.rowPositionUtils.before(currentPosition, initialPosition);\n            var rangeStartRow = this.getRangeStartRow();\n            var rangeEndRow = this.getRangeEndRow();\n            if (isBefore && ((currentPosition.rowPinned == rangeStartRow.rowPinned &&\n                currentPosition.rowIndex >= rangeStartRow.rowIndex) ||\n                (rangeStartRow.rowPinned != rangeEndRow.rowPinned &&\n                    currentPosition.rowPinned == rangeEndRow.rowPinned &&\n                    currentPosition.rowIndex <= rangeEndRow.rowIndex))) {\n                this.reduceVertical(initialPosition, currentPosition);\n                this.isReduce = true;\n            }\n            else {\n                this.extendVertical(initialPosition, currentPosition, isBefore);\n                this.isReduce = false;\n            }\n        }\n        else {\n            var initialColumn = initialPosition.column;\n            var currentColumn = currentPosition.column;\n            if (initialColumn === currentColumn) {\n                return;\n            }\n            var displayedColumns = this.columnController.getAllDisplayedColumns();\n            var initialIndex = displayedColumns.indexOf(initialColumn);\n            var currentIndex = displayedColumns.indexOf(currentColumn);\n            if (currentIndex <= initialIndex && currentIndex >= displayedColumns.indexOf(this.getCellRange().columns[0])) {\n                this.reduceHorizontal(initialPosition, currentPosition);\n                this.isReduce = true;\n            }\n            else {\n                this.extendHorizontal(initialPosition, currentPosition, currentIndex < initialIndex);\n                this.isReduce = false;\n            }\n        }\n    };\n    FillHandle.prototype.extendVertical = function (initialPosition, endPosition, isMovingUp) {\n        var _a = this, rowRenderer = _a.rowRenderer, rangeController = _a.rangeController;\n        var row = initialPosition;\n        do {\n            var cellRange = this.getCellRange();\n            var colLen = cellRange.columns.length;\n            for (var i = 0; i < colLen; i++) {\n                var column = cellRange.columns[i];\n                var rowPos = { rowIndex: row.rowIndex, rowPinned: row.rowPinned };\n                var cellPos = __assign$9(__assign$9({}, rowPos), { column: column });\n                var cellInRange = rangeController.isCellInSpecificRange(cellPos, cellRange);\n                var isInitialRow = this.rowPositionUtils.sameRow(row, initialPosition);\n                if (isMovingUp) {\n                    this.isUp = true;\n                }\n                if (!isInitialRow) {\n                    var cellComp = rowRenderer.getComponentForCell(cellPos);\n                    if (cellComp) {\n                        this.markedCellComps.push(cellComp);\n                        var eGui = cellComp.getGui();\n                        if (!cellInRange) {\n                            agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-left', i === 0);\n                            agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-right', i === colLen - 1);\n                        }\n                        agGridCommunity._.addOrRemoveCssClass(eGui, isMovingUp ? 'ag-selection-fill-top' : 'ag-selection-fill-bottom', this.rowPositionUtils.sameRow(row, endPosition));\n                    }\n                }\n            }\n            if (this.rowPositionUtils.sameRow(row, endPosition)) {\n                break;\n            }\n        } while (row = isMovingUp ?\n            this.cellNavigationService.getRowAbove(row) :\n            this.cellNavigationService.getRowBelow(row));\n    };\n    FillHandle.prototype.reduceVertical = function (initialPosition, endPosition) {\n        var row = initialPosition;\n        do {\n            var cellRange = this.getCellRange();\n            var colLen = cellRange.columns.length;\n            var isLastRow = this.rowPositionUtils.sameRow(row, endPosition);\n            for (var i = 0; i < colLen; i++) {\n                var rowPos = { rowIndex: row.rowIndex, rowPinned: row.rowPinned };\n                var celPos = __assign$9(__assign$9({}, rowPos), { column: cellRange.columns[i] });\n                var cellComp = this.rowRenderer.getComponentForCell(celPos);\n                if (cellComp) {\n                    this.markedCellComps.push(cellComp);\n                    var eGui = cellComp.getGui();\n                    agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-bottom', this.rowPositionUtils.sameRow(row, endPosition));\n                }\n            }\n            if (isLastRow) {\n                break;\n            }\n        } while (row = this.cellNavigationService.getRowAbove(row));\n    };\n    FillHandle.prototype.extendHorizontal = function (initialPosition, endPosition, isMovingLeft) {\n        var _this = this;\n        var allCols = this.columnController.getAllDisplayedColumns();\n        var startCol = allCols.indexOf(isMovingLeft ? endPosition.column : initialPosition.column);\n        var endCol = allCols.indexOf(isMovingLeft ? this.getCellRange().columns[0] : endPosition.column);\n        var offset = isMovingLeft ? 0 : 1;\n        var colsToMark = allCols.slice(startCol + offset, endCol + offset);\n        var rangeStartRow = this.getRangeStartRow();\n        var rangeEndRow = this.getRangeEndRow();\n        colsToMark.forEach(function (column) {\n            var row = rangeStartRow;\n            var isLastRow = false;\n            do {\n                isLastRow = _this.rowPositionUtils.sameRow(row, rangeEndRow);\n                var cellComp = _this.rowRenderer.getComponentForCell({\n                    rowIndex: row.rowIndex,\n                    rowPinned: row.rowPinned,\n                    column: column\n                });\n                if (cellComp) {\n                    _this.markedCellComps.push(cellComp);\n                    var eGui = cellComp.getGui();\n                    agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-top', _this.rowPositionUtils.sameRow(row, rangeStartRow));\n                    agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-bottom', _this.rowPositionUtils.sameRow(row, rangeEndRow));\n                    if (isMovingLeft) {\n                        _this.isLeft = true;\n                        agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-left', column === colsToMark[0]);\n                    }\n                    else {\n                        agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-right', column === agGridCommunity._.last(colsToMark));\n                    }\n                }\n                row = _this.cellNavigationService.getRowBelow(row);\n            } while (!isLastRow);\n        });\n    };\n    FillHandle.prototype.reduceHorizontal = function (initialPosition, endPosition) {\n        var _this = this;\n        var allCols = this.columnController.getAllDisplayedColumns();\n        var startCol = allCols.indexOf(endPosition.column);\n        var endCol = allCols.indexOf(initialPosition.column);\n        var colsToMark = allCols.slice(startCol, endCol);\n        var rangeStartRow = this.getRangeStartRow();\n        var rangeEndRow = this.getRangeEndRow();\n        colsToMark.forEach(function (column) {\n            var row = rangeStartRow;\n            var isLastRow = false;\n            do {\n                isLastRow = _this.rowPositionUtils.sameRow(row, rangeEndRow);\n                var cellComp = _this.rowRenderer.getComponentForCell({\n                    rowIndex: row.rowIndex,\n                    rowPinned: row.rowPinned,\n                    column: column\n                });\n                if (cellComp) {\n                    _this.markedCellComps.push(cellComp);\n                    var eGui = cellComp.getGui();\n                    agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-right', column === colsToMark[0]);\n                }\n                row = _this.cellNavigationService.getRowBelow(row);\n            } while (!isLastRow);\n        });\n    };\n    FillHandle.prototype.refresh = function (cellComp) {\n        var cellRange = this.rangeController.getCellRanges()[0];\n        var isColumnRange = !cellRange.startRow || !cellRange.endRow;\n        if (isColumnRange) {\n            this.destroy();\n            return;\n        }\n        _super.prototype.refresh.call(this, cellComp);\n    };\n    FillHandle.TEMPLATE = '<div class=\"ag-fill-handle\"></div>';\n    __decorate$1g([\n        agGridCommunity.Autowired('valueService')\n    ], FillHandle.prototype, \"valueService\", void 0);\n    __decorate$1g([\n        agGridCommunity.Autowired('eventService')\n    ], FillHandle.prototype, \"eventService\", void 0);\n    __decorate$1g([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], FillHandle.prototype, \"gridOptionsWrapper\", void 0);\n    return FillHandle;\n}(AbstractSelectionHandle));\n\nvar __extends$1V = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign$a = (undefined && undefined.__assign) || function () {\n    __assign$a = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign$a.apply(this, arguments);\n};\nvar RangeHandle = /** @class */ (function (_super) {\n    __extends$1V(RangeHandle, _super);\n    function RangeHandle() {\n        var _this = _super.call(this, RangeHandle.TEMPLATE) || this;\n        _this.type = 'range';\n        _this.rangeFixed = false;\n        return _this;\n    }\n    RangeHandle.prototype.onDrag = function (e) {\n        var lastCellHovered = this.getLastCellHovered();\n        if (!lastCellHovered) {\n            return;\n        }\n        var cellRanges = this.rangeController.getCellRanges();\n        var lastRange = agGridCommunity._.last(cellRanges);\n        if (!this.rangeFixed) {\n            this.fixRangeStartEnd(lastRange);\n            this.rangeFixed = true;\n        }\n        this.endPosition = {\n            rowIndex: lastCellHovered.rowIndex,\n            rowPinned: lastCellHovered.rowPinned,\n            column: lastCellHovered.column\n        };\n        // check if the cell ranges are for a chart\n        if (cellRanges.length === 2 && cellRanges[0].type === agGridCommunity.CellRangeType.DIMENSION && lastRange.type === agGridCommunity.CellRangeType.VALUE) {\n            var rowChanged = !this.rowPositionUtils.sameRow(this.endPosition, this.rangeController.getRangeEndRow(lastRange));\n            if (rowChanged) {\n                // ensure the dimension range is kept in sync with the value range (which has the handle)\n                this.rangeController.updateRangeEnd(cellRanges[0], __assign$a(__assign$a({}, this.endPosition), { column: cellRanges[0].columns[0] }), true);\n            }\n        }\n        this.rangeController.extendLatestRangeToCell(this.endPosition);\n    };\n    RangeHandle.prototype.onDragEnd = function (e) {\n        var cellRange = agGridCommunity._.last(this.rangeController.getCellRanges());\n        this.fixRangeStartEnd(cellRange);\n        this.rangeFixed = false;\n    };\n    RangeHandle.prototype.fixRangeStartEnd = function (cellRange) {\n        var startRow = this.rangeController.getRangeStartRow(cellRange);\n        var endRow = this.rangeController.getRangeEndRow(cellRange);\n        var column = cellRange.columns[0];\n        cellRange.startRow = startRow;\n        cellRange.endRow = endRow;\n        cellRange.startColumn = column;\n    };\n    RangeHandle.TEMPLATE = '<div class=\"ag-range-handle\"></div>';\n    return RangeHandle;\n}(AbstractSelectionHandle));\n\nvar RangeSelectionModule = {\n    moduleName: agGridCommunity.ModuleNames.RangeSelectionModule,\n    beans: [RangeController],\n    agStackComponents: [\n        { componentName: 'AgFillHandle', componentClass: FillHandle },\n        { componentName: 'AgRangeHandle', componentClass: RangeHandle }\n    ],\n    dependantModules: [\n        EnterpriseCoreModule\n    ]\n};\n\nvar GridChartsModule = {\n    moduleName: agGridCommunity.ModuleNames.GridChartsModule,\n    beans: [\n        ChartService, ChartTranslator\n    ],\n    dependantModules: [\n        RangeSelectionModule,\n        EnterpriseCoreModule\n    ]\n};\n\nvar __extends$1W = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1h = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar DetailCellRenderer = /** @class */ (function (_super) {\n    __extends$1W(DetailCellRenderer, _super);\n    function DetailCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.needRefresh = false;\n        return _this;\n    }\n    DetailCellRenderer.prototype.refresh = function () {\n        // if we return true, it means we pretend to the grid\n        // that we have refreshed, so refresh will never happen.\n        if (this.suppressRefresh) {\n            return true;\n        }\n        // otherwise we only refresh if the data has changed in the node\n        // since the last time. this happens when user updates data using transaction.\n        var res = !this.needRefresh;\n        this.needRefresh = false;\n        return res;\n    };\n    DetailCellRenderer.prototype.init = function (params) {\n        var _this = this;\n        this.rowId = params.node.id;\n        this.masterGridApi = params.api;\n        this.suppressRefresh = params.suppressRefresh;\n        this.selectAndSetTemplate(params);\n        if (agGridCommunity._.exists(this.eDetailGrid)) {\n            this.addThemeToDetailGrid();\n            this.createDetailsGrid(params);\n            this.registerDetailWithMaster(params.node);\n            this.loadRowData(params);\n            window.setTimeout(function () {\n                // ensure detail grid api still exists (grid may be destroyed when async call tries to set data)\n                if (_this.detailGridOptions.api) {\n                    _this.detailGridOptions.api.doLayout();\n                }\n            }, 0);\n        }\n        else {\n            console.warn('ag-Grid: reference to eDetailGrid was missing from the details template. ' +\n                'Please add ref=\"eDetailGrid\" to the template.');\n        }\n        this.addDestroyableEventListener(params.node.parent, agGridCommunity.RowNode.EVENT_DATA_CHANGED, function () {\n            _this.needRefresh = true;\n        });\n    };\n    DetailCellRenderer.prototype.addThemeToDetailGrid = function () {\n        // this is needed by environment service of the child grid, the class needs to be on\n        // the grid div itself - the browser's CSS on the other hand just inherits from the parent grid theme.\n        var theme = this.environment.getTheme().theme;\n        if (theme) {\n            agGridCommunity._.addCssClass(this.eDetailGrid, theme);\n        }\n    };\n    DetailCellRenderer.prototype.registerDetailWithMaster = function (rowNode) {\n        var _this = this;\n        var gridInfo = {\n            id: this.rowId,\n            api: this.detailGridOptions.api,\n            columnApi: this.detailGridOptions.columnApi\n        };\n        // register with api\n        this.masterGridApi.addDetailGridInfo(this.rowId, gridInfo);\n        // register with node\n        rowNode.detailGridInfo = gridInfo;\n        this.addDestroyFunc(function () {\n            _this.masterGridApi.removeDetailGridInfo(_this.rowId); // unregister from api\n            rowNode.detailGridInfo = null; // unregister from node\n        });\n    };\n    DetailCellRenderer.prototype.selectAndSetTemplate = function (params) {\n        var paramsAny = params;\n        if (agGridCommunity._.missing(paramsAny.template)) {\n            // use default template\n            this.setTemplate(DetailCellRenderer.TEMPLATE);\n        }\n        else {\n            // use user provided template\n            if (typeof paramsAny.template === 'string') {\n                this.setTemplate(paramsAny.template);\n            }\n            else if (typeof paramsAny.template === 'function') {\n                var templateFunc = paramsAny.template;\n                var template = templateFunc(params);\n                this.setTemplate(template);\n            }\n            else {\n                console.warn('ag-Grid: detailCellRendererParams.template should be function or string');\n                this.setTemplate(DetailCellRenderer.TEMPLATE);\n            }\n        }\n    };\n    DetailCellRenderer.prototype.createDetailsGrid = function (params) {\n        // we clone the detail grid options, as otherwise it would be shared\n        // across many instances, and that would be a problem because we set\n        // api and columnApi into gridOptions\n        var _this = this;\n        var gridOptions = params.detailGridOptions;\n        if (agGridCommunity._.missing(gridOptions)) {\n            console.warn('ag-Grid: could not find detail grid options for master detail, ' +\n                'please set gridOptions.detailCellRendererParams.detailGridOptions');\n        }\n        // IMPORTANT - gridOptions must be cloned\n        this.detailGridOptions = agGridCommunity._.cloneObject(gridOptions);\n        // tslint:disable-next-line\n        new agGridCommunity.Grid(this.eDetailGrid, this.detailGridOptions, {\n            $scope: params.$scope,\n            $compile: params.$compile,\n            providedBeanInstances: {\n                // a temporary fix for AG-1574\n                // AG-1715 raised to do a wider ranging refactor to improve this\n                agGridReact: params.agGridReact,\n                // AG-1716 - directly related to AG-1574 and AG-1715\n                frameworkComponentWrapper: params.frameworkComponentWrapper\n            }\n        });\n        this.addDestroyFunc(function () {\n            if (_this.detailGridOptions.api) {\n                _this.detailGridOptions.api.destroy();\n            }\n        });\n    };\n    DetailCellRenderer.prototype.loadRowData = function (params) {\n        var userFunc = params.getDetailRowData;\n        if (!userFunc) {\n            console.warn('ag-Grid: could not find getDetailRowData for master / detail, ' +\n                'please set gridOptions.detailCellRendererParams.getDetailRowData');\n            return;\n        }\n        var funcParams = {\n            node: params.node,\n            data: params.data,\n            successCallback: this.setRowData.bind(this)\n        };\n        userFunc(funcParams);\n    };\n    DetailCellRenderer.prototype.setRowData = function (rowData) {\n        // ensure detail grid api still exists (grid may be destroyed when async call tries to set data)\n        if (this.detailGridOptions.api) {\n            this.detailGridOptions.api.setRowData(rowData);\n        }\n    };\n    DetailCellRenderer.TEMPLATE = \"<div class=\\\"ag-details-row\\\">\\n            <div ref=\\\"eDetailGrid\\\" class=\\\"ag-details-grid\\\"/>\\n        </div>\";\n    __decorate$1h([\n        agGridCommunity.RefSelector('eDetailGrid')\n    ], DetailCellRenderer.prototype, \"eDetailGrid\", void 0);\n    __decorate$1h([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], DetailCellRenderer.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1h([\n        agGridCommunity.Autowired('environment')\n    ], DetailCellRenderer.prototype, \"environment\", void 0);\n    return DetailCellRenderer;\n}(agGridCommunity.Component));\n\nvar MasterDetailModule = {\n    moduleName: agGridCommunity.ModuleNames.MasterDetailModule,\n    beans: [],\n    userComponents: [\n        { componentName: 'agDetailCellRenderer', componentClass: DetailCellRenderer }\n    ],\n    dependantModules: [\n        EnterpriseCoreModule\n    ]\n};\n\nvar __extends$1X = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1i = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MenuItemComponent = /** @class */ (function (_super) {\n    __extends$1X(MenuItemComponent, _super);\n    function MenuItemComponent(params) {\n        var _this = _super.call(this, MenuItemComponent.TEMPLATE) || this;\n        _this.params = params;\n        return _this;\n    }\n    MenuItemComponent.prototype.init = function () {\n        var _this = this;\n        if (this.params.checked) {\n            this.eIcon.appendChild(agGridCommunity._.createIconNoSpan('check', this.gridOptionsWrapper));\n        }\n        else if (this.params.icon) {\n            if (agGridCommunity._.isNodeOrElement(this.params.icon)) {\n                this.eIcon.appendChild(this.params.icon);\n            }\n            else if (typeof this.params.icon === 'string') {\n                this.eIcon.innerHTML = this.params.icon;\n            }\n            else {\n                console.warn('ag-Grid: menu item icon must be DOM node or string');\n            }\n        }\n        else {\n            // if i didn't put space here, the alignment was messed up, probably\n            // fixable with CSS but i was spending to much time trying to figure\n            // it out.\n            this.eIcon.innerHTML = '&nbsp;';\n        }\n        if (this.params.tooltip) {\n            this.tooltip = this.params.tooltip;\n            if (this.gridOptionsWrapper.isEnableBrowserTooltips()) {\n                this.getGui().setAttribute('title', this.tooltip);\n            }\n            else {\n                this.tooltipManager.registerTooltip(this);\n            }\n        }\n        if (this.params.shortcut) {\n            this.eShortcut.innerHTML = this.params.shortcut;\n        }\n        if (this.params.subMenu) {\n            if (this.gridOptionsWrapper.isEnableRtl()) {\n                // for RTL, we show arrow going left\n                this.ePopupPointer.appendChild(agGridCommunity._.createIconNoSpan('smallLeft', this.gridOptionsWrapper));\n            }\n            else {\n                // for normal, we show arrow going right\n                this.ePopupPointer.appendChild(agGridCommunity._.createIconNoSpan('smallRight', this.gridOptionsWrapper));\n            }\n        }\n        else {\n            this.ePopupPointer.innerHTML = '&nbsp;';\n        }\n        this.eName.innerHTML = this.params.name;\n        if (this.params.disabled) {\n            agGridCommunity._.addCssClass(this.getGui(), 'ag-menu-option-disabled');\n        }\n        else {\n            this.addGuiEventListener('click', this.onOptionSelected.bind(this));\n        }\n        if (this.params.cssClasses) {\n            this.params.cssClasses.forEach(function (it) { return agGridCommunity._.addCssClass(_this.getGui(), it); });\n        }\n    };\n    MenuItemComponent.prototype.getTooltipText = function () {\n        return this.tooltip;\n    };\n    MenuItemComponent.prototype.getComponentHolder = function () {\n        return undefined;\n    };\n    MenuItemComponent.prototype.onOptionSelected = function (mouseEvent) {\n        var event = {\n            type: MenuItemComponent.EVENT_ITEM_SELECTED,\n            action: this.params.action,\n            checked: this.params.checked,\n            cssClasses: this.params.cssClasses,\n            disabled: this.params.disabled,\n            icon: this.params.icon,\n            name: this.params.name,\n            shortcut: this.params.shortcut,\n            subMenu: this.params.subMenu,\n            tooltip: this.params.tooltip,\n            mouseEvent: mouseEvent\n        };\n        this.dispatchEvent(event);\n        if (this.params.action) {\n            this.params.action();\n        }\n    };\n    MenuItemComponent.prototype.destroy = function () {\n        // console.log('MenuItemComponent->destroy() ' + this.instance);\n        _super.prototype.destroy.call(this);\n    };\n    // private instance = Math.random();\n    MenuItemComponent.TEMPLATE = \"<div class=\\\"ag-menu-option\\\">\\n            <span ref=\\\"eIcon\\\" class=\\\"ag-menu-option-icon\\\"></span>\\n            <span ref=\\\"eName\\\" class=\\\"ag-menu-option-text\\\"></span>\\n            <span ref=\\\"eShortcut\\\" class=\\\"ag-menu-option-shortcut\\\"></span>\\n            <span ref=\\\"ePopupPointer\\\" class=\\\"ag-menu-option-popup-pointer\\\"></span>\\n        </div>\";\n    MenuItemComponent.EVENT_ITEM_SELECTED = 'itemSelected';\n    __decorate$1i([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], MenuItemComponent.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1i([\n        agGridCommunity.Autowired('tooltipManager')\n    ], MenuItemComponent.prototype, \"tooltipManager\", void 0);\n    __decorate$1i([\n        agGridCommunity.RefSelector('eIcon')\n    ], MenuItemComponent.prototype, \"eIcon\", void 0);\n    __decorate$1i([\n        agGridCommunity.RefSelector('eName')\n    ], MenuItemComponent.prototype, \"eName\", void 0);\n    __decorate$1i([\n        agGridCommunity.RefSelector('eShortcut')\n    ], MenuItemComponent.prototype, \"eShortcut\", void 0);\n    __decorate$1i([\n        agGridCommunity.RefSelector('ePopupPointer')\n    ], MenuItemComponent.prototype, \"ePopupPointer\", void 0);\n    __decorate$1i([\n        agGridCommunity.PostConstruct\n    ], MenuItemComponent.prototype, \"init\", null);\n    return MenuItemComponent;\n}(agGridCommunity.Component));\n\nvar __extends$1Y = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1j = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MenuList = /** @class */ (function (_super) {\n    __extends$1Y(MenuList, _super);\n    function MenuList() {\n        var _this = _super.call(this, MenuList.TEMPLATE) || this;\n        _this.timerCount = 0;\n        _this.removeChildFuncs = [];\n        return _this;\n    }\n    MenuList.prototype.clearActiveItem = function () {\n        this.removeActiveItem();\n        this.removeChildPopup();\n    };\n    MenuList.prototype.addMenuItems = function (menuItems) {\n        var _this = this;\n        if (!menuItems || agGridCommunity._.missing(menuItems)) {\n            return;\n        }\n        menuItems.forEach(function (menuItemOrString) {\n            if (menuItemOrString === 'separator') {\n                _this.addSeparator();\n            }\n            else if (typeof menuItemOrString === 'string') {\n                console.warn(\"ag-Grid: unrecognised menu item \" + menuItemOrString);\n            }\n            else {\n                var menuItem = menuItemOrString;\n                _this.addItem(menuItem);\n            }\n        });\n    };\n    MenuList.prototype.addItem = function (menuItemDef) {\n        var _this = this;\n        var cMenuItem = new MenuItemComponent(menuItemDef);\n        this.getContext().wireBean(cMenuItem);\n        this.getGui().appendChild(cMenuItem.getGui());\n        this.addDestroyFunc(function () { return cMenuItem.destroy(); });\n        cMenuItem.addEventListener(MenuItemComponent.EVENT_ITEM_SELECTED, function (event) {\n            if (menuItemDef.subMenu && !menuItemDef.action) {\n                _this.showChildMenu(menuItemDef, cMenuItem, event.mouseEvent);\n            }\n            else {\n                _this.dispatchEvent(event);\n            }\n        });\n        cMenuItem.addGuiEventListener('mouseenter', this.mouseEnterItem.bind(this, menuItemDef, cMenuItem));\n        cMenuItem.addGuiEventListener('mouseleave', this.mouseLeaveItem.bind(this));\n    };\n    MenuList.prototype.mouseEnterItem = function (menuItemParams, menuItem) {\n        if (menuItemParams.disabled) {\n            return;\n        }\n        if (this.activeMenuItemParams !== menuItemParams) {\n            this.removeChildPopup();\n        }\n        this.removeActiveItem();\n        this.activeMenuItemParams = menuItemParams;\n        this.activeMenuItem = menuItem;\n        agGridCommunity._.addCssClass(this.activeMenuItem.getGui(), 'ag-menu-option-active');\n        if (menuItemParams.subMenu) {\n            this.addHoverForChildPopup(menuItemParams, menuItem);\n        }\n    };\n    MenuList.prototype.mouseLeaveItem = function () {\n        this.timerCount++;\n        this.removeActiveItem();\n    };\n    MenuList.prototype.removeActiveItem = function () {\n        if (this.activeMenuItem) {\n            agGridCommunity._.removeCssClass(this.activeMenuItem.getGui(), 'ag-menu-option-active');\n            this.activeMenuItem = null;\n            this.activeMenuItemParams = null;\n        }\n    };\n    MenuList.prototype.addHoverForChildPopup = function (menuItemDef, menuItemComp) {\n        var _this = this;\n        var timerCountCopy = this.timerCount;\n        window.setTimeout(function () {\n            var shouldShow = timerCountCopy === _this.timerCount;\n            var showingThisMenu = _this.subMenuParentDef === menuItemDef;\n            if (shouldShow && !showingThisMenu) {\n                _this.showChildMenu(menuItemDef, menuItemComp, null);\n            }\n        }, 300);\n    };\n    MenuList.prototype.addSeparator = function () {\n        this.getGui().appendChild(agGridCommunity._.loadTemplate(MenuList.SEPARATOR_TEMPLATE));\n    };\n    MenuList.prototype.showChildMenu = function (menuItemDef, menuItemComp, mouseEvent) {\n        var _this = this;\n        this.removeChildPopup();\n        var childMenu = new MenuList();\n        this.getContext().wireBean(childMenu);\n        childMenu.addMenuItems(menuItemDef.subMenu);\n        var ePopup = agGridCommunity._.loadTemplate('<div class=\"ag-menu\"></div>');\n        ePopup.appendChild(childMenu.getGui());\n        var hidePopupFunc = this.popupService.addAsModalPopup(ePopup, true, undefined, mouseEvent);\n        this.popupService.positionPopupForMenu({\n            eventSource: menuItemComp.getGui(),\n            ePopup: ePopup\n        });\n        this.subMenuParentDef = menuItemDef;\n        var selectedListener = function (event) {\n            _this.dispatchEvent(event);\n        };\n        childMenu.addEventListener(MenuItemComponent.EVENT_ITEM_SELECTED, selectedListener);\n        this.removeChildFuncs.push(function () {\n            childMenu.clearActiveItem();\n            childMenu.destroy();\n            _this.subMenuParentDef = null;\n            childMenu.removeEventListener(MenuItemComponent.EVENT_ITEM_SELECTED, selectedListener);\n            hidePopupFunc();\n        });\n    };\n    MenuList.prototype.removeChildPopup = function () {\n        this.removeChildFuncs.forEach(function (func) { return func(); });\n        this.removeChildFuncs = [];\n    };\n    MenuList.prototype.destroy = function () {\n        this.removeChildPopup();\n        _super.prototype.destroy.call(this);\n    };\n    MenuList.TEMPLATE = '<div class=\"ag-menu-list\"></div>';\n    MenuList.SEPARATOR_TEMPLATE = \"<div class=\\\"ag-menu-separator\\\">\\n            <span class=\\\"ag-menu-separator-cell\\\"></span>\\n            <span class=\\\"ag-menu-separator-cell\\\"></span>\\n            <span class=\\\"ag-menu-separator-cell\\\"></span>\\n            <span class=\\\"ag-menu-separator-cell\\\"></span>\\n        </div>\";\n    __decorate$1j([\n        agGridCommunity.Autowired('popupService')\n    ], MenuList.prototype, \"popupService\", void 0);\n    return MenuList;\n}(agGridCommunity.Component));\n\nvar __extends$1Z = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1k = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar EnterpriseMenuFactory = /** @class */ (function () {\n    function EnterpriseMenuFactory() {\n    }\n    EnterpriseMenuFactory.prototype.hideActiveMenu = function () {\n        if (this.activeMenu) {\n            this.activeMenu.destroy();\n        }\n    };\n    EnterpriseMenuFactory.prototype.showMenuAfterMouseEvent = function (column, mouseEvent, defaultTab) {\n        var _this = this;\n        this.showMenu(column, function (menu) {\n            _this.popupService.positionPopupUnderMouseEvent({\n                column: column,\n                type: 'columnMenu',\n                mouseEvent: mouseEvent,\n                ePopup: menu.getGui()\n            });\n            if (defaultTab) {\n                menu.showTab(defaultTab);\n            }\n        }, defaultTab);\n    };\n    EnterpriseMenuFactory.prototype.showMenuAfterButtonClick = function (column, eventSource, defaultTab, restrictToTabs) {\n        var _this = this;\n        var multiplier = -1;\n        var alignSide = 'left';\n        if (this.gridOptionsWrapper.isEnableRtl()) {\n            multiplier = 1;\n            alignSide = 'right';\n        }\n        this.showMenu(column, function (menu) {\n            var minDims = menu.getMinDimensions();\n            _this.popupService.positionPopupUnderComponent({\n                column: column,\n                type: 'columnMenu',\n                eventSource: eventSource,\n                ePopup: menu.getGui(),\n                nudgeX: 9 * multiplier,\n                nudgeY: -23,\n                minWidth: minDims.width,\n                minHeight: minDims.height,\n                alignSide: alignSide,\n                keepWithinBounds: true\n            });\n            if (defaultTab) {\n                menu.showTab(defaultTab);\n            }\n        }, defaultTab, restrictToTabs);\n    };\n    EnterpriseMenuFactory.prototype.showMenu = function (column, positionCallback, defaultTab, restrictToTabs) {\n        var _this = this;\n        var menu = new EnterpriseMenu(column, this.lastSelectedTab, restrictToTabs);\n        this.context.wireBean(menu);\n        var eMenuGui = menu.getGui();\n        // need to show filter before positioning, as only after filter\n        // is visible can we find out what the width of it is\n        var hidePopup = this.popupService.addAsModalPopup(eMenuGui, true, function () {\n            menu.destroy();\n            column.setMenuVisible(false, \"contextMenu\");\n        });\n        menu.afterGuiAttached({\n            hidePopup: hidePopup\n        });\n        positionCallback(menu);\n        if (!defaultTab) {\n            menu.showTabBasedOnPreviousSelection();\n        }\n        menu.addEventListener(EnterpriseMenu.EVENT_TAB_SELECTED, function (event) {\n            _this.lastSelectedTab = event.key;\n        });\n        column.setMenuVisible(true, \"contextMenu\");\n        this.activeMenu = menu;\n        menu.addEventListener(agGridCommunity.BeanStub.EVENT_DESTROYED, function () {\n            if (_this.activeMenu === menu) {\n                _this.activeMenu = null;\n            }\n        });\n    };\n    EnterpriseMenuFactory.prototype.isMenuEnabled = function (column) {\n        return column.getMenuTabs(EnterpriseMenu.TABS_DEFAULT).length > 0;\n    };\n    __decorate$1k([\n        agGridCommunity.Autowired('context')\n    ], EnterpriseMenuFactory.prototype, \"context\", void 0);\n    __decorate$1k([\n        agGridCommunity.Autowired('popupService')\n    ], EnterpriseMenuFactory.prototype, \"popupService\", void 0);\n    __decorate$1k([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], EnterpriseMenuFactory.prototype, \"gridOptionsWrapper\", void 0);\n    EnterpriseMenuFactory = __decorate$1k([\n        agGridCommunity.Bean('menuFactory')\n    ], EnterpriseMenuFactory);\n    return EnterpriseMenuFactory;\n}());\nvar EnterpriseMenu = /** @class */ (function (_super) {\n    __extends$1Z(EnterpriseMenu, _super);\n    function EnterpriseMenu(column, initialSelection, restrictTo) {\n        var _this = _super.call(this) || this;\n        _this.tabFactories = {};\n        _this.includeChecks = {};\n        _this.timeOfLastColumnChange = Date.now();\n        _this.column = column;\n        _this.initialSelection = initialSelection;\n        _this.tabFactories[EnterpriseMenu.TAB_GENERAL] = _this.createMainPanel.bind(_this);\n        _this.tabFactories[EnterpriseMenu.TAB_FILTER] = _this.createFilterPanel.bind(_this);\n        _this.tabFactories[EnterpriseMenu.TAB_COLUMNS] = _this.createColumnsPanel.bind(_this);\n        _this.includeChecks[EnterpriseMenu.TAB_GENERAL] = function () { return true; };\n        _this.includeChecks[EnterpriseMenu.TAB_FILTER] = function () { return column.isFilterAllowed(); };\n        _this.includeChecks[EnterpriseMenu.TAB_COLUMNS] = function () { return true; };\n        _this.restrictTo = restrictTo;\n        return _this;\n    }\n    EnterpriseMenu.prototype.getMinDimensions = function () {\n        return this.tabbedLayout.getMinDimensions();\n    };\n    EnterpriseMenu.prototype.init = function () {\n        var _this = this;\n        var tabs = this.getTabsToCreate()\n            .map(function (menuTabName) { return _this.createTab(menuTabName); });\n        this.tabbedLayout = new agGridCommunity.TabbedLayout({\n            items: tabs,\n            cssClass: 'ag-menu',\n            onActiveItemClicked: this.onHidePopup.bind(this),\n            onItemClicked: this.onTabItemClicked.bind(this)\n        });\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayedColumnsChanged.bind(this));\n    };\n    EnterpriseMenu.prototype.getTabsToCreate = function () {\n        var _this = this;\n        if (this.restrictTo) {\n            return this.restrictTo;\n        }\n        return this.column.getMenuTabs(EnterpriseMenu.TABS_DEFAULT)\n            .filter(function (tabName) { return _this.isValidMenuTabItem(tabName); })\n            .filter(function (tabName) { return _this.isNotSuppressed(tabName); })\n            .filter(function (tabName) { return _this.isModuleLoaded(tabName); });\n    };\n    EnterpriseMenu.prototype.isModuleLoaded = function (menuTabName) {\n        if (menuTabName === EnterpriseMenu.TAB_COLUMNS) {\n            return agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.ColumnToolPanelModule);\n        }\n        else {\n            return true;\n        }\n    };\n    EnterpriseMenu.prototype.isValidMenuTabItem = function (menuTabName) {\n        var isValid = true;\n        var itemsToConsider = EnterpriseMenu.TABS_DEFAULT;\n        if (this.restrictTo != null) {\n            isValid = this.restrictTo.indexOf(menuTabName) > -1;\n            itemsToConsider = this.restrictTo;\n        }\n        isValid = isValid && EnterpriseMenu.TABS_DEFAULT.indexOf(menuTabName) > -1;\n        if (!isValid) {\n            console.warn(\"Trying to render an invalid menu item '\" + menuTabName + \"'. Check that your 'menuTabs' contains one of [\" + itemsToConsider + \"]\");\n        }\n        return isValid;\n    };\n    EnterpriseMenu.prototype.isNotSuppressed = function (menuTabName) {\n        return this.includeChecks[menuTabName]();\n    };\n    EnterpriseMenu.prototype.createTab = function (name) {\n        return this.tabFactories[name]();\n    };\n    EnterpriseMenu.prototype.showTabBasedOnPreviousSelection = function () {\n        // show the tab the user was on last time they had a menu open\n        this.showTab(this.initialSelection);\n    };\n    EnterpriseMenu.prototype.showTab = function (toShow) {\n        if (this.tabItemColumns && toShow === EnterpriseMenu.TAB_COLUMNS) {\n            this.tabbedLayout.showItem(this.tabItemColumns);\n        }\n        else if (this.tabItemFilter && toShow === EnterpriseMenu.TAB_FILTER) {\n            this.tabbedLayout.showItem(this.tabItemFilter);\n        }\n        else if (this.tabItemGeneral && toShow === EnterpriseMenu.TAB_GENERAL) {\n            this.tabbedLayout.showItem(this.tabItemGeneral);\n        }\n        else {\n            this.tabbedLayout.showFirstItem();\n        }\n    };\n    EnterpriseMenu.prototype.onTabItemClicked = function (event) {\n        var key = null;\n        switch (event.item) {\n            case this.tabItemColumns:\n                key = EnterpriseMenu.TAB_COLUMNS;\n                break;\n            case this.tabItemFilter:\n                key = EnterpriseMenu.TAB_FILTER;\n                break;\n            case this.tabItemGeneral:\n                key = EnterpriseMenu.TAB_GENERAL;\n                break;\n        }\n        if (key) {\n            var ev = {\n                type: EnterpriseMenu.EVENT_TAB_SELECTED,\n                key: key\n            };\n            this.dispatchEvent(ev);\n        }\n    };\n    EnterpriseMenu.prototype.destroy = function () {\n        if (this.columnSelectPanel) {\n            this.columnSelectPanel.destroy();\n        }\n        if (this.mainMenuList) {\n            this.mainMenuList.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    EnterpriseMenu.prototype.getMenuItems = function () {\n        var defaultMenuOptions = this.getDefaultMenuOptions();\n        var result;\n        var userFunc = this.gridOptionsWrapper.getMainMenuItemsFunc();\n        if (userFunc) {\n            var userOptions = userFunc({\n                column: this.column,\n                api: this.gridOptionsWrapper.getApi(),\n                columnApi: this.gridOptionsWrapper.getColumnApi(),\n                context: this.gridOptionsWrapper.getContext(),\n                defaultItems: defaultMenuOptions\n            });\n            result = userOptions;\n        }\n        else {\n            result = defaultMenuOptions;\n        }\n        // GUI looks weird when two separators are side by side. this can happen accidentally\n        // if we remove items from the menu then two separators can edit up adjacent.\n        agGridCommunity._.removeRepeatsFromArray(result, EnterpriseMenu.MENU_ITEM_SEPARATOR);\n        return result;\n    };\n    EnterpriseMenu.prototype.getDefaultMenuOptions = function () {\n        var result = [];\n        var allowPinning = !this.column.getColDef().lockPinned;\n        var rowGroupCount = this.columnController.getRowGroupColumns().length;\n        var doingGrouping = rowGroupCount > 0;\n        var groupedByThisColumn = this.columnController.getRowGroupColumns().indexOf(this.column) >= 0;\n        var allowValue = this.column.isAllowValue();\n        var allowRowGroup = this.column.isAllowRowGroup();\n        var isPrimary = this.column.isPrimary();\n        var pivotModeOn = this.columnController.isPivotMode();\n        var isInMemoryRowModel = this.rowModel.getType() === agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE;\n        var usingTreeData = this.gridOptionsWrapper.isTreeData();\n        var allowValueAgg = \n        // if primary, then only allow aggValue if grouping and it's a value columns\n        (isPrimary && doingGrouping && allowValue)\n            // secondary columns can always have aggValue, as it means it's a pivot value column\n            || !isPrimary;\n        if (allowPinning) {\n            result.push('pinSubMenu');\n        }\n        if (allowValueAgg) {\n            result.push('valueAggSubMenu');\n        }\n        if (allowPinning || allowValueAgg) {\n            result.push(EnterpriseMenu.MENU_ITEM_SEPARATOR);\n        }\n        result.push('autoSizeThis');\n        result.push('autoSizeAll');\n        result.push(EnterpriseMenu.MENU_ITEM_SEPARATOR);\n        if (allowRowGroup && this.column.isPrimary()) {\n            if (groupedByThisColumn) {\n                result.push('rowUnGroup');\n            }\n            else {\n                result.push('rowGroup');\n            }\n        }\n        result.push(EnterpriseMenu.MENU_ITEM_SEPARATOR);\n        result.push('resetColumns');\n        // only add grouping expand/collapse if grouping in the InMemoryRowModel\n        // if pivoting, we only have expandable groups if grouping by 2 or more columns\n        // as the lowest level group is not expandable while pivoting.\n        // if not pivoting, then any active row group can be expanded.\n        var allowExpandAndContract = false;\n        if (isInMemoryRowModel) {\n            if (usingTreeData) {\n                allowExpandAndContract = true;\n            }\n            else {\n                allowExpandAndContract = pivotModeOn ? rowGroupCount > 1 : rowGroupCount > 0;\n            }\n        }\n        if (allowExpandAndContract) {\n            result.push('expandAll');\n            result.push('contractAll');\n        }\n        return result;\n    };\n    EnterpriseMenu.prototype.createMainPanel = function () {\n        this.mainMenuList = new MenuList();\n        this.getContext().wireBean(this.mainMenuList);\n        var menuItems = this.getMenuItems();\n        var menuItemsMapped = this.menuItemMapper.mapWithStockItems(menuItems, this.column);\n        this.mainMenuList.addMenuItems(menuItemsMapped);\n        this.mainMenuList.addEventListener(MenuItemComponent.EVENT_ITEM_SELECTED, this.onHidePopup.bind(this));\n        this.tabItemGeneral = {\n            title: agGridCommunity._.createIconNoSpan('menu', this.gridOptionsWrapper, this.column),\n            bodyPromise: agGridCommunity.Promise.resolve(this.mainMenuList.getGui()),\n            name: EnterpriseMenu.TAB_GENERAL\n        };\n        return this.tabItemGeneral;\n    };\n    EnterpriseMenu.prototype.onHidePopup = function () {\n        this.hidePopupFunc();\n    };\n    EnterpriseMenu.prototype.createFilterPanel = function () {\n        var filterWrapper = this.filterManager.getOrCreateFilterWrapper(this.column, 'COLUMN_MENU');\n        var afterFilterAttachedCallback = null;\n        // slightly odd block this - this promise will always have been resolved by the time it gets here, so won't be\n        // async (_unless_ in react or similar, but if so why not encountered before now?).\n        // I'd suggest a future improvement would be to remove/replace this promise as this block just wont work if it is\n        // async and is confusing if you don't have this context\n        if (filterWrapper.filterPromise) {\n            filterWrapper.filterPromise.then(function (filter) {\n                if (filter.afterGuiAttached) {\n                    afterFilterAttachedCallback = filter.afterGuiAttached.bind(filter);\n                }\n            });\n        }\n        this.tabItemFilter = {\n            title: agGridCommunity._.createIconNoSpan('filter', this.gridOptionsWrapper, this.column),\n            bodyPromise: filterWrapper.guiPromise.promise,\n            afterAttachedCallback: afterFilterAttachedCallback,\n            name: EnterpriseMenu.TAB_FILTER\n        };\n        return this.tabItemFilter;\n    };\n    EnterpriseMenu.prototype.createColumnsPanel = function () {\n        var eWrapperDiv = document.createElement('div');\n        agGridCommunity._.addCssClass(eWrapperDiv, 'ag-menu-column-select-wrapper');\n        this.columnSelectPanel = this.getContext().createComponent('AG-PRIMARY-COLS');\n        this.columnSelectPanel.init(false, {\n            suppressValues: false,\n            suppressPivots: false,\n            suppressRowGroups: false,\n            suppressPivotMode: false,\n            contractColumnSelection: false,\n            suppressColumnExpandAll: false,\n            suppressColumnFilter: false,\n            suppressColumnSelectAll: false,\n            suppressSideButtons: false,\n            suppressSyncLayoutWithGrid: false,\n            api: this.gridApi\n        });\n        eWrapperDiv.appendChild(this.columnSelectPanel.getGui());\n        this.tabItemColumns = {\n            title: agGridCommunity._.createIconNoSpan('columns', this.gridOptionsWrapper, this.column),\n            bodyPromise: agGridCommunity.Promise.resolve(eWrapperDiv),\n            name: EnterpriseMenu.TAB_COLUMNS\n        };\n        return this.tabItemColumns;\n    };\n    EnterpriseMenu.prototype.afterGuiAttached = function (params) {\n        var _this = this;\n        this.tabbedLayout.setAfterAttachedParams({ hidePopup: params.hidePopup });\n        this.hidePopupFunc = params.hidePopup;\n        var initialScroll = this.gridApi.getHorizontalPixelRange().left;\n        // if the user scrolls the grid horizontally, we want to hide the menu, as the menu will not appear in the right location anymore\n        var onBodyScroll = function (event) {\n            // If the user hides columns using the columns tab in this menu, it will change the size of the\n            // grid content and lead to a bodyScroll event. But we don't want to hide the menu for that kind\n            // of indirect scrolling. Assume that any bodyScroll that happens right after a column change is\n            // caused by that change, and ignore it.\n            var msSinceLastColumnChange = Date.now() - _this.timeOfLastColumnChange;\n            if (msSinceLastColumnChange < 500) {\n                return;\n            }\n            // if h scroll, popup is no longer over the column\n            if (event.direction === 'horizontal') {\n                var newScroll = _this.gridApi.getHorizontalPixelRange().left;\n                if (Math.abs(newScroll - initialScroll) > _this.gridOptionsWrapper.getScrollbarWidth()) {\n                    params.hidePopup();\n                }\n            }\n        };\n        this.addDestroyFunc(params.hidePopup);\n        this.addDestroyableEventListener(this.eventService, 'bodyScroll', onBodyScroll);\n    };\n    EnterpriseMenu.prototype.getGui = function () {\n        return this.tabbedLayout.getGui();\n    };\n    EnterpriseMenu.prototype.onDisplayedColumnsChanged = function () {\n        this.timeOfLastColumnChange = Date.now();\n    };\n    EnterpriseMenu.EVENT_TAB_SELECTED = 'tabSelected';\n    EnterpriseMenu.TAB_FILTER = 'filterMenuTab';\n    EnterpriseMenu.TAB_GENERAL = 'generalMenuTab';\n    EnterpriseMenu.TAB_COLUMNS = 'columnsMenuTab';\n    EnterpriseMenu.TABS_DEFAULT = [EnterpriseMenu.TAB_GENERAL, EnterpriseMenu.TAB_FILTER, EnterpriseMenu.TAB_COLUMNS];\n    EnterpriseMenu.MENU_ITEM_SEPARATOR = 'separator';\n    __decorate$1k([\n        agGridCommunity.Autowired('columnController')\n    ], EnterpriseMenu.prototype, \"columnController\", void 0);\n    __decorate$1k([\n        agGridCommunity.Autowired('filterManager')\n    ], EnterpriseMenu.prototype, \"filterManager\", void 0);\n    __decorate$1k([\n        agGridCommunity.Autowired('gridApi')\n    ], EnterpriseMenu.prototype, \"gridApi\", void 0);\n    __decorate$1k([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], EnterpriseMenu.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1k([\n        agGridCommunity.Autowired('eventService')\n    ], EnterpriseMenu.prototype, \"eventService\", void 0);\n    __decorate$1k([\n        agGridCommunity.Autowired('menuItemMapper')\n    ], EnterpriseMenu.prototype, \"menuItemMapper\", void 0);\n    __decorate$1k([\n        agGridCommunity.Autowired('rowModel')\n    ], EnterpriseMenu.prototype, \"rowModel\", void 0);\n    __decorate$1k([\n        agGridCommunity.PostConstruct\n    ], EnterpriseMenu.prototype, \"init\", null);\n    return EnterpriseMenu;\n}(agGridCommunity.BeanStub));\n\nvar __extends$1_ = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1l = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ContextMenuFactory = /** @class */ (function () {\n    function ContextMenuFactory() {\n    }\n    ContextMenuFactory.prototype.init = function () {\n    };\n    ContextMenuFactory.prototype.hideActiveMenu = function () {\n        if (!this.activeMenu) {\n            return;\n        }\n        this.activeMenu.destroy();\n    };\n    ContextMenuFactory.prototype.getMenuItems = function (node, column, value) {\n        var defaultMenuOptions = [];\n        if (agGridCommunity._.exists(node) && agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.ClipboardModule)) {\n            if (column) {\n                // only makes sense if column exists, could have originated from a row\n                defaultMenuOptions.push('copy', 'copyWithHeaders', 'paste', 'separator');\n            }\n        }\n        if (this.gridOptionsWrapper.isEnableCharts() &&\n            agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.RangeSelectionModule) &&\n            agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.GridChartsModule)) {\n            if (this.columnController.isPivotMode()) {\n                defaultMenuOptions.push('pivotChart');\n            }\n            if (this.rangeController && !this.rangeController.isEmpty()) {\n                defaultMenuOptions.push('chartRange');\n            }\n        }\n        if (agGridCommunity._.exists(node)) {\n            // if user clicks a cell\n            var csvModuleMissing = !agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.CsvExportModule);\n            var excelModuleMissing = !agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.ExcelExportModule);\n            var suppressExcel = this.gridOptionsWrapper.isSuppressExcelExport() || excelModuleMissing;\n            var suppressCsv = this.gridOptionsWrapper.isSuppressCsvExport() || csvModuleMissing;\n            var onIPad = agGridCommunity._.isIOSUserAgent();\n            var anyExport = !onIPad && (!suppressExcel || !suppressCsv);\n            if (anyExport) {\n                defaultMenuOptions.push('export');\n            }\n        }\n        if (this.gridOptionsWrapper.getContextMenuItemsFunc()) {\n            var userFunc = this.gridOptionsWrapper.getContextMenuItemsFunc();\n            var params = {\n                node: node,\n                column: column,\n                value: value,\n                defaultItems: defaultMenuOptions.length ? defaultMenuOptions : undefined,\n                api: this.gridOptionsWrapper.getApi(),\n                columnApi: this.gridOptionsWrapper.getColumnApi(),\n                context: this.gridOptionsWrapper.getContext()\n            };\n            return userFunc ? userFunc(params) : undefined;\n        }\n        return defaultMenuOptions;\n    };\n    ContextMenuFactory.prototype.showMenu = function (node, column, value, mouseEvent) {\n        var _this = this;\n        var menuItems = this.getMenuItems(node, column, value);\n        if (menuItems === undefined || agGridCommunity._.missingOrEmpty(menuItems)) {\n            return;\n        }\n        var menu = new ContextMenu(menuItems);\n        this.context.wireBean(menu);\n        var eMenuGui = menu.getGui();\n        // need to show filter before positioning, as only after filter\n        // is visible can we find out what the width of it is\n        var hidePopup = this.popupService.addAsModalPopup(eMenuGui, true, function () { return menu.destroy(); }, mouseEvent);\n        this.popupService.positionPopupUnderMouseEvent({\n            column: column,\n            rowNode: node,\n            type: 'contextMenu',\n            mouseEvent: mouseEvent,\n            ePopup: eMenuGui\n        });\n        menu.afterGuiAttached({\n            hidePopup: hidePopup\n        });\n        this.activeMenu = menu;\n        menu.addEventListener(agGridCommunity.BeanStub.EVENT_DESTROYED, function () {\n            if (_this.activeMenu === menu) {\n                _this.activeMenu = null;\n            }\n        });\n    };\n    __decorate$1l([\n        agGridCommunity.Autowired('context')\n    ], ContextMenuFactory.prototype, \"context\", void 0);\n    __decorate$1l([\n        agGridCommunity.Autowired('popupService')\n    ], ContextMenuFactory.prototype, \"popupService\", void 0);\n    __decorate$1l([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ContextMenuFactory.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1l([\n        agGridCommunity.Autowired('rowModel')\n    ], ContextMenuFactory.prototype, \"rowModel\", void 0);\n    __decorate$1l([\n        agGridCommunity.Optional('rangeController')\n    ], ContextMenuFactory.prototype, \"rangeController\", void 0);\n    __decorate$1l([\n        agGridCommunity.Autowired('columnController')\n    ], ContextMenuFactory.prototype, \"columnController\", void 0);\n    __decorate$1l([\n        agGridCommunity.PostConstruct\n    ], ContextMenuFactory.prototype, \"init\", null);\n    ContextMenuFactory = __decorate$1l([\n        agGridCommunity.Bean('contextMenuFactory')\n    ], ContextMenuFactory);\n    return ContextMenuFactory;\n}());\nvar ContextMenu = /** @class */ (function (_super) {\n    __extends$1_(ContextMenu, _super);\n    function ContextMenu(menuItems) {\n        var _this = _super.call(this, '<div class=\"ag-menu\"></div>') || this;\n        _this.menuItems = menuItems;\n        return _this;\n    }\n    ContextMenu.prototype.addMenuItems = function () {\n        var menuList = new MenuList();\n        this.getContext().wireBean(menuList);\n        var menuItemsMapped = this.menuItemMapper.mapWithStockItems(this.menuItems, null);\n        menuList.addMenuItems(menuItemsMapped);\n        this.appendChild(menuList);\n        menuList.addEventListener(MenuItemComponent.EVENT_ITEM_SELECTED, this.destroy.bind(this));\n    };\n    ContextMenu.prototype.afterGuiAttached = function (params) {\n        if (params.hidePopup) {\n            this.addDestroyFunc(params.hidePopup);\n        }\n        // if the body scrolls, we want to hide the menu, as the menu will not appear in the right location anymore\n        this.addDestroyableEventListener(this.eventService, 'bodyScroll', this.destroy.bind(this));\n    };\n    __decorate$1l([\n        agGridCommunity.Autowired('eventService')\n    ], ContextMenu.prototype, \"eventService\", void 0);\n    __decorate$1l([\n        agGridCommunity.Autowired('menuItemMapper')\n    ], ContextMenu.prototype, \"menuItemMapper\", void 0);\n    __decorate$1l([\n        agGridCommunity.PostConstruct\n    ], ContextMenu.prototype, \"addMenuItems\", null);\n    return ContextMenu;\n}(agGridCommunity.Component));\n\nvar __decorate$1m = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MenuItemMapper = /** @class */ (function () {\n    function MenuItemMapper() {\n    }\n    MenuItemMapper.prototype.mapWithStockItems = function (originalList, column) {\n        var _this = this;\n        if (!originalList) {\n            return [];\n        }\n        var resultList = [];\n        originalList.forEach(function (menuItemOrString) {\n            var result;\n            if (typeof menuItemOrString === 'string') {\n                result = _this.getStockMenuItem(menuItemOrString, column);\n            }\n            else {\n                result = menuItemOrString;\n            }\n            // if no mapping, can happen when module is not loaded but user tries to use module anyway\n            if (!result) {\n                return;\n            }\n            if (result.subMenu) {\n                var resultDef = result;\n                resultDef.subMenu = _this.mapWithStockItems(resultDef.subMenu, column);\n            }\n            if (result != null) {\n                resultList.push(result);\n            }\n        });\n        return resultList;\n    };\n    MenuItemMapper.prototype.getStockMenuItem = function (key, column) {\n        var _this = this;\n        var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n        var skipHeaderOnAutoSize = this.gridOptionsWrapper.isSkipHeaderOnAutoSize();\n        switch (key) {\n            case 'pinSubMenu':\n                return {\n                    name: localeTextFunc('pinColumn', 'Pin Column'),\n                    icon: agGridCommunity._.createIconNoSpan('menuPin', this.gridOptionsWrapper, null),\n                    subMenu: ['pinLeft', 'pinRight', 'clearPinned']\n                };\n            case 'pinLeft':\n                return {\n                    name: localeTextFunc('pinLeft', 'Pin Left'),\n                    action: function () { return _this.columnController.setColumnPinned(column, agGridCommunity.Constants.PINNED_LEFT, \"contextMenu\"); },\n                    checked: column.isPinnedLeft()\n                };\n            case 'pinRight':\n                return {\n                    name: localeTextFunc('pinRight', 'Pin Right'),\n                    action: function () { return _this.columnController.setColumnPinned(column, agGridCommunity.Constants.PINNED_RIGHT, \"contextMenu\"); },\n                    checked: column.isPinnedRight()\n                };\n            case 'clearPinned':\n                return {\n                    name: localeTextFunc('noPin', 'No Pin'),\n                    action: function () { return _this.columnController.setColumnPinned(column, null, \"contextMenu\"); },\n                    checked: !column.isPinned()\n                };\n            case 'valueAggSubMenu':\n                if (agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.RowGroupingModule, 'Aggregation from Menu')) {\n                    return {\n                        name: localeTextFunc('valueAggregation', 'Value Aggregation'),\n                        icon: agGridCommunity._.createIconNoSpan('menuValue', this.gridOptionsWrapper, null),\n                        subMenu: this.createAggregationSubMenu(column)\n                    };\n                }\n                else {\n                    return null;\n                }\n            case 'autoSizeThis':\n                return {\n                    name: localeTextFunc('autosizeThiscolumn', 'Autosize This Column'),\n                    action: function () { return _this.columnController.autoSizeColumn(column, skipHeaderOnAutoSize, \"contextMenu\"); }\n                };\n            case 'autoSizeAll':\n                return {\n                    name: localeTextFunc('autosizeAllColumns', 'Autosize All Columns'),\n                    action: function () { return _this.columnController.autoSizeAllColumns(skipHeaderOnAutoSize, \"contextMenu\"); }\n                };\n            case 'rowGroup':\n                return {\n                    name: localeTextFunc('groupBy', 'Group by') + ' ' + agGridCommunity._.escape(this.columnController.getDisplayNameForColumn(column, 'header')),\n                    action: function () { return _this.columnController.addRowGroupColumn(column, \"contextMenu\"); },\n                    icon: agGridCommunity._.createIconNoSpan('menuAddRowGroup', this.gridOptionsWrapper, null)\n                };\n            case 'rowUnGroup':\n                return {\n                    name: localeTextFunc('ungroupBy', 'Un-Group by') + ' ' + agGridCommunity._.escape(this.columnController.getDisplayNameForColumn(column, 'header')),\n                    action: function () { return _this.columnController.removeRowGroupColumn(column, \"contextMenu\"); },\n                    icon: agGridCommunity._.createIconNoSpan('menuRemoveRowGroup', this.gridOptionsWrapper, null)\n                };\n            case 'resetColumns':\n                return {\n                    name: localeTextFunc('resetColumns', 'Reset Columns'),\n                    action: function () { return _this.columnController.resetColumnState(false, \"contextMenu\"); }\n                };\n            case 'expandAll':\n                return {\n                    name: localeTextFunc('expandAll', 'Expand All'),\n                    action: function () { return _this.gridApi.expandAll(); }\n                };\n            case 'contractAll':\n                return {\n                    name: localeTextFunc('collapseAll', 'Collapse All'),\n                    action: function () { return _this.gridApi.collapseAll(); }\n                };\n            case 'copy':\n                if (agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.ClipboardModule, 'Copy from Menu')) {\n                    return {\n                        name: localeTextFunc('copy', 'Copy'),\n                        shortcut: localeTextFunc('ctrlC', 'Ctrl+C'),\n                        icon: agGridCommunity._.createIconNoSpan('clipboardCopy', this.gridOptionsWrapper, null),\n                        action: function () { return _this.clipboardService.copyToClipboard(false); }\n                    };\n                }\n                else {\n                    return null;\n                }\n            case 'copyWithHeaders':\n                if (agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.ClipboardModule, 'Copy with Headers from Menu')) {\n                    return {\n                        name: localeTextFunc('copyWithHeaders', 'Copy with Headers'),\n                        // shortcut: localeTextFunc('ctrlC','Ctrl+C'),\n                        icon: agGridCommunity._.createIconNoSpan('clipboardCopy', this.gridOptionsWrapper, null),\n                        action: function () { return _this.clipboardService.copyToClipboard(true); }\n                    };\n                }\n                else {\n                    return null;\n                }\n            case 'paste':\n                if (agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.ClipboardModule, 'Copy with Headers from Menu')) {\n                    return {\n                        name: localeTextFunc('paste', 'Paste'),\n                        shortcut: localeTextFunc('ctrlV', 'Ctrl+V'),\n                        disabled: true,\n                        icon: agGridCommunity._.createIconNoSpan('clipboardPaste', this.gridOptionsWrapper, null),\n                        action: function () { return _this.clipboardService.pasteFromClipboard(); }\n                    };\n                }\n                else {\n                    return null;\n                }\n            case 'export':\n                var exportSubMenuItems = [];\n                var csvModuleLoaded = agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.CsvExportModule);\n                var excelModuleLoaded = agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.ExcelExportModule);\n                if (!this.gridOptionsWrapper.isSuppressCsvExport() && csvModuleLoaded) {\n                    exportSubMenuItems.push('csvExport');\n                }\n                if (!this.gridOptionsWrapper.isSuppressExcelExport() && excelModuleLoaded) {\n                    exportSubMenuItems.push('excelExport');\n                    exportSubMenuItems.push('excelXmlExport');\n                }\n                return {\n                    name: localeTextFunc('export', 'Export'),\n                    subMenu: exportSubMenuItems,\n                    icon: agGridCommunity._.createIconNoSpan('save', this.gridOptionsWrapper, null),\n                };\n            case 'csvExport':\n                return {\n                    name: localeTextFunc('csvExport', 'CSV Export'),\n                    action: function () { return _this.gridApi.exportDataAsCsv({}); }\n                };\n            case 'excelExport':\n                return {\n                    name: localeTextFunc('excelExport', 'Excel Export (.xlsx)&lrm;'),\n                    action: function () { return _this.gridApi.exportDataAsExcel({\n                        exportMode: 'xlsx'\n                    }); }\n                };\n            case 'excelXmlExport':\n                return {\n                    name: localeTextFunc('excelXmlExport', 'Excel Export (.xml)&lrm;'),\n                    action: function () { return _this.gridApi.exportDataAsExcel({\n                        exportMode: 'xml'\n                    }); }\n                };\n            case 'separator':\n                return 'separator';\n            default:\n                var chartMenuItem = this.getChartItems(key);\n                if (chartMenuItem) {\n                    return chartMenuItem;\n                }\n                else {\n                    console.warn(\"ag-Grid: unknown menu item type \" + key);\n                    return null;\n                }\n        }\n    };\n    MenuItemMapper.prototype.getChartItems = function (key) {\n        var _this = this;\n        var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n        var pivotChartMenuItem = function (localeKey, defaultText, chartType) {\n            return {\n                name: localeTextFunc(localeKey, defaultText),\n                action: function () { return _this.chartService.createPivotChart({ chartType: chartType }); }\n            };\n        };\n        var rangeChartMenuItem = function (localeKey, defaultText, chartType) {\n            return {\n                name: localeTextFunc(localeKey, defaultText),\n                action: function () { return _this.chartService.createChartFromCurrentRange(chartType); }\n            };\n        };\n        switch (key) {\n            // case 'pivotChartAndPivotMode':\n            //     return {\n            //         name: localeTextFunc('pivotChartAndPivotMode', 'Pivot Chart & Pivot Mode&lrm;'),\n            //         action: () => this.chartService.pivotChart(ChartType.GroupedColumn),\n            //         icon: _.createIconNoSpan('chart', this.gridOptionsWrapper, null)\n            //     };\n            case 'pivotChart':\n                return {\n                    name: localeTextFunc('pivotChart', 'Pivot Chart'),\n                    subMenu: [\n                        'pivotColumnChart',\n                        'pivotBarChart',\n                        'pivotPieChart',\n                        'pivotLineChart',\n                        'pivotXYChart',\n                        'pivotAreaChart'\n                    ],\n                    icon: agGridCommunity._.createIconNoSpan('chart', this.gridOptionsWrapper, null),\n                };\n            case 'chartRange':\n                return {\n                    name: localeTextFunc('chartRange', 'Chart Range'),\n                    subMenu: [\n                        'rangeColumnChart',\n                        'rangeBarChart',\n                        'rangePieChart',\n                        'rangeLineChart',\n                        'rangeXYChart',\n                        'rangeAreaChart'\n                    ],\n                    icon: agGridCommunity._.createIconNoSpan('chart', this.gridOptionsWrapper, null),\n                };\n            case 'pivotColumnChart':\n                return {\n                    name: localeTextFunc('columnChart', 'Column'),\n                    subMenu: ['pivotGroupedColumn', 'pivotStackedColumn', 'pivotNormalizedColumn']\n                };\n            case 'pivotGroupedColumn':\n                return pivotChartMenuItem('groupedColumn', 'Grouped&lrm;', agGridCommunity.ChartType.GroupedColumn);\n            case 'pivotStackedColumn':\n                return pivotChartMenuItem('stackedColumn', 'Stacked&lrm;', agGridCommunity.ChartType.StackedColumn);\n            case 'pivotNormalizedColumn':\n                return pivotChartMenuItem('normalizedColumn', '100% Stacked&lrm;', agGridCommunity.ChartType.NormalizedColumn);\n            case 'rangeColumnChart':\n                return {\n                    name: localeTextFunc('columnChart', 'Column'),\n                    subMenu: ['rangeGroupedColumn', 'rangeStackedColumn', 'rangeNormalizedColumn']\n                };\n            case 'rangeGroupedColumn':\n                return rangeChartMenuItem('groupedColumn', 'Grouped&lrm;', agGridCommunity.ChartType.GroupedColumn);\n            case 'rangeStackedColumn':\n                return rangeChartMenuItem('stackedColumn', 'Stacked&lrm;', agGridCommunity.ChartType.StackedColumn);\n            case 'rangeNormalizedColumn':\n                return rangeChartMenuItem('normalizedColumn', '100% Stacked&lrm;', agGridCommunity.ChartType.NormalizedColumn);\n            case 'pivotBarChart':\n                return {\n                    name: localeTextFunc('barChart', 'Bar'),\n                    subMenu: ['pivotGroupedBar', 'pivotStackedBar', 'pivotNormalizedBar']\n                };\n            case 'pivotGroupedBar':\n                return pivotChartMenuItem('groupedBar', 'Grouped&lrm;', agGridCommunity.ChartType.GroupedBar);\n            case 'pivotStackedBar':\n                return pivotChartMenuItem('stackedBar', 'Stacked&lrm;', agGridCommunity.ChartType.StackedBar);\n            case 'pivotNormalizedBar':\n                return pivotChartMenuItem('normalizedBar', '100% Stacked&lrm;', agGridCommunity.ChartType.NormalizedBar);\n            case 'rangeBarChart':\n                return {\n                    name: localeTextFunc('barChart', 'Bar'),\n                    subMenu: ['rangeGroupedBar', 'rangeStackedBar', 'rangeNormalizedBar']\n                };\n            case 'rangeGroupedBar':\n                return rangeChartMenuItem('groupedBar', 'Grouped&lrm;', agGridCommunity.ChartType.GroupedBar);\n            case 'rangeStackedBar':\n                return rangeChartMenuItem('stackedBar', 'Stacked&lrm;', agGridCommunity.ChartType.StackedBar);\n            case 'rangeNormalizedBar':\n                return rangeChartMenuItem('normalizedBar', '100% Stacked&lrm;', agGridCommunity.ChartType.NormalizedBar);\n            case 'pivotPieChart':\n                return {\n                    name: localeTextFunc('pieChart', 'Pie'),\n                    subMenu: ['pivotPie', 'pivotDoughnut']\n                };\n            case 'pivotPie':\n                return pivotChartMenuItem('pie', 'Pie&lrm;', agGridCommunity.ChartType.Pie);\n            case 'pivotDoughnut':\n                return pivotChartMenuItem('doughnut', 'Doughnut&lrm;', agGridCommunity.ChartType.Doughnut);\n            case 'rangePieChart':\n                return {\n                    name: localeTextFunc('pieChart', 'Pie'),\n                    subMenu: ['rangePie', 'rangeDoughnut']\n                };\n            case 'rangePie':\n                return rangeChartMenuItem('pie', 'Pie&lrm;', agGridCommunity.ChartType.Pie);\n            case 'rangeDoughnut':\n                return rangeChartMenuItem('doughnut', 'Doughnut&lrm;', agGridCommunity.ChartType.Doughnut);\n            case 'pivotLineChart':\n                return pivotChartMenuItem('line', 'Line&lrm;', agGridCommunity.ChartType.Line);\n            case 'rangeLineChart':\n                return rangeChartMenuItem('line', 'Line&lrm;', agGridCommunity.ChartType.Line);\n            case 'pivotXYChart':\n                return {\n                    name: localeTextFunc('xyChart', 'X Y (Scatter)'),\n                    subMenu: ['pivotScatter', 'pivotBubble']\n                };\n            case 'pivotScatter':\n                return pivotChartMenuItem('scatter', 'Scatter&lrm;', agGridCommunity.ChartType.Scatter);\n            case 'pivotBubble':\n                return pivotChartMenuItem('bubble', 'Bubble&lrm;', agGridCommunity.ChartType.Bubble);\n            case 'rangeXYChart':\n                return {\n                    name: localeTextFunc('xyChart', 'X Y (Scatter)'),\n                    subMenu: ['rangeScatter', 'rangeBubble']\n                };\n            case 'rangeScatter':\n                return rangeChartMenuItem('scatter', 'Scatter&lrm;', agGridCommunity.ChartType.Scatter);\n            case 'rangeBubble':\n                return rangeChartMenuItem('bubble', 'Bubble&lrm;', agGridCommunity.ChartType.Bubble);\n            case 'pivotAreaChart':\n                return {\n                    name: localeTextFunc('areaChart', 'Area'),\n                    subMenu: ['pivotArea', 'pivotStackedArea', 'pivotNormalizedArea']\n                };\n            case 'pivotArea':\n                return pivotChartMenuItem('area', 'Area&lrm;', agGridCommunity.ChartType.Area);\n            case 'pivotStackedArea':\n                return pivotChartMenuItem('stackedArea', 'Stacked&lrm;', agGridCommunity.ChartType.StackedArea);\n            case 'pivotNormalizedArea':\n                return pivotChartMenuItem('normalizedArea', '100% Stacked&lrm;', agGridCommunity.ChartType.NormalizedArea);\n            case 'rangeAreaChart':\n                return {\n                    name: localeTextFunc('areaChart', 'Area'),\n                    subMenu: ['rangeArea', 'rangeStackedArea', 'rangeNormalizedArea']\n                };\n            case 'rangeArea':\n                return rangeChartMenuItem('area', 'Area&lrm;', agGridCommunity.ChartType.Area);\n            case 'rangeStackedArea':\n                return rangeChartMenuItem('stackedArea', 'Stacked&lrm;', agGridCommunity.ChartType.StackedArea);\n            case 'rangeNormalizedArea':\n                return rangeChartMenuItem('normalizedArea', '100% Stacked&lrm;', agGridCommunity.ChartType.NormalizedArea);\n            default:\n                return null;\n        }\n    };\n    MenuItemMapper.prototype.createAggregationSubMenu = function (column) {\n        var _this = this;\n        var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n        var columnIsAlreadyAggValue = column.isValueActive();\n        var funcNames = this.aggFuncService.getFuncNames(column);\n        var columnToUse;\n        if (column.isPrimary()) {\n            columnToUse = column;\n        }\n        else {\n            var pivotValueColumn = column.getColDef().pivotValueColumn;\n            columnToUse = agGridCommunity._.exists(pivotValueColumn) ? pivotValueColumn : undefined;\n        }\n        var result = [];\n        funcNames.forEach(function (funcName) {\n            result.push({\n                name: localeTextFunc(funcName, funcName),\n                action: function () {\n                    _this.columnController.setColumnAggFunc(columnToUse, funcName, \"contextMenu\");\n                    _this.columnController.addValueColumn(columnToUse, \"contextMenu\");\n                },\n                checked: columnIsAlreadyAggValue && columnToUse.getAggFunc() === funcName\n            });\n        });\n        return result;\n    };\n    __decorate$1m([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], MenuItemMapper.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1m([\n        agGridCommunity.Autowired('columnController')\n    ], MenuItemMapper.prototype, \"columnController\", void 0);\n    __decorate$1m([\n        agGridCommunity.Autowired('gridApi')\n    ], MenuItemMapper.prototype, \"gridApi\", void 0);\n    __decorate$1m([\n        agGridCommunity.Optional('clipboardService')\n    ], MenuItemMapper.prototype, \"clipboardService\", void 0);\n    __decorate$1m([\n        agGridCommunity.Optional('aggFuncService')\n    ], MenuItemMapper.prototype, \"aggFuncService\", void 0);\n    __decorate$1m([\n        agGridCommunity.Optional('chartService')\n    ], MenuItemMapper.prototype, \"chartService\", void 0);\n    __decorate$1m([\n        agGridCommunity.Optional('context')\n    ], MenuItemMapper.prototype, \"context\", void 0);\n    MenuItemMapper = __decorate$1m([\n        agGridCommunity.Bean('menuItemMapper')\n    ], MenuItemMapper);\n    return MenuItemMapper;\n}());\n\nvar MenuModule = {\n    moduleName: agGridCommunity.ModuleNames.MenuModule,\n    beans: [EnterpriseMenuFactory, ContextMenuFactory, MenuItemMapper],\n    dependantModules: [\n        EnterpriseCoreModule\n    ]\n};\n\nvar __extends$1$ = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1n = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar RichSelectRow = /** @class */ (function (_super) {\n    __extends$1$(RichSelectRow, _super);\n    function RichSelectRow(params) {\n        var _this = _super.call(this, '<div class=\"ag-rich-select-row\"></div>') || this;\n        _this.params = params;\n        return _this;\n    }\n    RichSelectRow.prototype.setState = function (value, valueFormatted, selected) {\n        var rendererSuccessful = this.populateWithRenderer(value, valueFormatted);\n        if (!rendererSuccessful) {\n            this.populateWithoutRenderer(value, valueFormatted);\n        }\n        agGridCommunity._.addOrRemoveCssClass(this.getGui(), 'ag-rich-select-row-selected', selected);\n    };\n    RichSelectRow.prototype.populateWithoutRenderer = function (value, valueFormatted) {\n        var valueFormattedExits = valueFormatted !== null && valueFormatted !== undefined;\n        var valueToRender = valueFormattedExits ? valueFormatted : value;\n        if (agGridCommunity._.exists(valueToRender) && valueToRender !== '') {\n            // not using innerHTML to prevent injection of HTML\n            // https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML#Security_considerations\n            this.getGui().textContent = valueToRender.toString();\n        }\n        else {\n            // putting in blank, so if missing, at least the user can click on it\n            this.getGui().innerHTML = '&nbsp;';\n        }\n    };\n    RichSelectRow.prototype.populateWithRenderer = function (value, valueFormatted) {\n        var _this = this;\n        // bad coder here - we are not populating all values of the cellRendererParams\n        var params = {\n            value: value,\n            valueFormatted: valueFormatted,\n            api: this.gridOptionsWrapper.getApi()\n        };\n        var cellRendererPromise = this.userComponentFactory.newCellRenderer(this.params, params);\n        if (cellRendererPromise != null) {\n            agGridCommunity._.bindCellRendererToHtmlElement(cellRendererPromise, this.getGui());\n        }\n        else {\n            this.getGui().innerText = params.valueFormatted != null ? params.valueFormatted : params.value;\n        }\n        if (cellRendererPromise) {\n            cellRendererPromise.then(function (childComponent) {\n                if (childComponent && childComponent.destroy) {\n                    _this.addDestroyFunc(childComponent.destroy.bind(childComponent));\n                }\n            });\n            return true;\n        }\n        return false;\n    };\n    __decorate$1n([\n        agGridCommunity.Autowired('userComponentFactory')\n    ], RichSelectRow.prototype, \"userComponentFactory\", void 0);\n    __decorate$1n([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], RichSelectRow.prototype, \"gridOptionsWrapper\", void 0);\n    return RichSelectRow;\n}(agGridCommunity.Component));\n\nvar __extends$20 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1o = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar RichSelectCellEditor = /** @class */ (function (_super) {\n    __extends$20(RichSelectCellEditor, _super);\n    function RichSelectCellEditor() {\n        var _this = _super.call(this, RichSelectCellEditor.TEMPLATE) || this;\n        _this.selectionConfirmed = false;\n        _this.searchString = '';\n        return _this;\n    }\n    RichSelectCellEditor.prototype.init = function (params) {\n        this.params = params;\n        this.selectedValue = params.value;\n        this.originalSelectedValue = params.value;\n        this.focusAfterAttached = params.cellStartedEdit;\n        this.eValue.appendChild(agGridCommunity._.createIconNoSpan('smallDown', this.gridOptionsWrapper));\n        this.virtualList = new agGridCommunity.VirtualList();\n        this.getContext().wireBean(this.virtualList);\n        this.virtualList.setComponentCreator(this.createRowComponent.bind(this));\n        this.eList.appendChild(this.virtualList.getGui());\n        if (agGridCommunity._.exists(this.params.cellHeight)) {\n            this.virtualList.setRowHeight(this.params.cellHeight);\n        }\n        this.renderSelectedValue();\n        if (agGridCommunity._.missing(params.values)) {\n            console.warn('ag-Grid: richSelectCellEditor requires values for it to work');\n            return;\n        }\n        var values = params.values;\n        this.virtualList.setModel({\n            getRowCount: function () { return values.length; },\n            getRow: function (index) { return values[index]; }\n        });\n        this.addGuiEventListener('keydown', this.onKeyDown.bind(this));\n        var virtualListGui = this.virtualList.getGui();\n        this.addDestroyableEventListener(virtualListGui, 'click', this.onClick.bind(this));\n        this.addDestroyableEventListener(virtualListGui, 'mousemove', this.onMouseMove.bind(this));\n        this.clearSearchString = agGridCommunity._.debounce(this.clearSearchString, 300);\n        if (agGridCommunity._.exists(params.charPress)) {\n            this.searchText(params.charPress);\n        }\n    };\n    RichSelectCellEditor.prototype.onKeyDown = function (event) {\n        var key = event.which || event.keyCode;\n        switch (key) {\n            case agGridCommunity.Constants.KEY_ENTER:\n                this.onEnterKeyDown();\n                break;\n            case agGridCommunity.Constants.KEY_DOWN:\n            case agGridCommunity.Constants.KEY_UP:\n                this.onNavigationKeyPressed(event, key);\n                break;\n            default:\n                this.searchText(event);\n        }\n    };\n    RichSelectCellEditor.prototype.onEnterKeyDown = function () {\n        this.selectionConfirmed = true;\n        this.params.stopEditing();\n    };\n    RichSelectCellEditor.prototype.onNavigationKeyPressed = function (event, key) {\n        // if we don't stop propagation, then the grids navigation kicks in\n        event.stopPropagation();\n        var oldIndex = this.params.values.indexOf(this.selectedValue);\n        var newIndex = key === agGridCommunity.Constants.KEY_UP ? oldIndex - 1 : oldIndex + 1;\n        if (newIndex >= 0 && newIndex < this.params.values.length) {\n            var valueToSelect = this.params.values[newIndex];\n            this.setSelectedValue(valueToSelect);\n        }\n    };\n    RichSelectCellEditor.prototype.searchText = function (key) {\n        if (typeof key !== 'string') {\n            if (!agGridCommunity._.isCharacterKey(key)) {\n                return;\n            }\n            key = key.key;\n        }\n        this.searchString += key;\n        this.runSearch();\n        this.clearSearchString();\n    };\n    RichSelectCellEditor.prototype.runSearch = function () {\n        var values = this.params.values;\n        var searchStrings;\n        if (typeof values[0] === \"number\" || typeof values[0] === \"string\") {\n            searchStrings = values.map(String);\n        }\n        if (typeof values[0] === \"object\" && this.params.colDef.keyCreator) {\n            searchStrings = values.map(this.params.colDef.keyCreator);\n        }\n        if (!searchStrings) {\n            return;\n        }\n        var topSuggestion = agGridCommunity._.fuzzySuggestions(this.searchString, searchStrings, true, true)[0];\n        if (!topSuggestion) {\n            return;\n        }\n        var topSuggestionIndex = searchStrings.indexOf(topSuggestion);\n        var topValue = values[topSuggestionIndex];\n        this.setSelectedValue(topValue);\n    };\n    RichSelectCellEditor.prototype.clearSearchString = function () {\n        this.searchString = '';\n    };\n    RichSelectCellEditor.prototype.renderSelectedValue = function () {\n        var _this = this;\n        var valueFormatted = this.params.formatValue(this.selectedValue);\n        var eValue = this.eValue;\n        var params = {\n            value: this.selectedValue,\n            valueFormatted: valueFormatted,\n            api: this.gridOptionsWrapper.getApi()\n        };\n        var promise = this.userComponentFactory.newCellRenderer(this.params, params);\n        if (promise != null) {\n            agGridCommunity._.bindCellRendererToHtmlElement(promise, eValue);\n        }\n        else {\n            eValue.innerText = params.valueFormatted != null ? params.valueFormatted : params.value;\n        }\n        if (promise) {\n            promise.then(function (renderer) {\n                if (renderer && renderer.destroy) {\n                    _this.addDestroyFunc(function () { return renderer.destroy(); });\n                }\n            });\n        }\n        else {\n            if (agGridCommunity._.exists(this.selectedValue)) {\n                eValue.innerHTML = valueFormatted;\n            }\n            else {\n                agGridCommunity._.clearElement(eValue);\n            }\n        }\n    };\n    RichSelectCellEditor.prototype.setSelectedValue = function (value) {\n        if (this.selectedValue === value) {\n            return;\n        }\n        var index = this.params.values.indexOf(value);\n        if (index >= 0) {\n            this.selectedValue = value;\n            this.virtualList.ensureIndexVisible(index);\n            this.virtualList.refresh();\n        }\n    };\n    RichSelectCellEditor.prototype.createRowComponent = function (value) {\n        var valueFormatted = this.params.formatValue(value);\n        var row = new RichSelectRow(this.params);\n        this.getContext().wireBean(row);\n        row.setState(value, valueFormatted, value === this.selectedValue);\n        return row;\n    };\n    RichSelectCellEditor.prototype.onMouseMove = function (mouseEvent) {\n        var rect = this.virtualList.getGui().getBoundingClientRect();\n        var scrollTop = this.virtualList.getScrollTop();\n        var mouseY = mouseEvent.clientY - rect.top + scrollTop;\n        var row = Math.floor(mouseY / this.virtualList.getRowHeight());\n        var value = this.params.values[row];\n        // not using utils.exist() as want empty string test to pass\n        if (value !== undefined) {\n            this.setSelectedValue(value);\n        }\n    };\n    RichSelectCellEditor.prototype.onClick = function () {\n        this.selectionConfirmed = true;\n        this.params.stopEditing();\n    };\n    // we need to have the gui attached before we can draw the virtual rows, as the\n    // virtual row logic needs info about the gui state\n    RichSelectCellEditor.prototype.afterGuiAttached = function () {\n        var selectedIndex = this.params.values.indexOf(this.selectedValue);\n        // we have to call this here to get the list to have the right height, ie\n        // otherwise it would not have scrolls yet and ensureIndexVisible would do nothing\n        this.virtualList.refresh();\n        if (selectedIndex >= 0) {\n            this.virtualList.ensureIndexVisible(selectedIndex);\n        }\n        // we call refresh again, as the list could of moved, and we need to render the new rows\n        this.virtualList.refresh();\n        if (this.focusAfterAttached) {\n            this.getGui().focus();\n        }\n    };\n    RichSelectCellEditor.prototype.getValue = function () {\n        // NOTE: we don't use valueParser for Set Filter. The user should provide values that are to be\n        // set into the data. valueParser only really makese sense when the user is typing in text (not picking\n        // form a set).\n        return this.selectionConfirmed ? this.selectedValue : this.originalSelectedValue;\n    };\n    // tab index is needed so we can focus, which is needed for keyboard events\n    RichSelectCellEditor.TEMPLATE = \"<div class=\\\"ag-rich-select\\\" tabindex=\\\"0\\\">\\n            <div ref=\\\"eValue\\\" class=\\\"ag-rich-select-value\\\"></div>\\n            <div ref=\\\"eList\\\" class=\\\"ag-rich-select-list\\\"></div>\\n        </div>\";\n    __decorate$1o([\n        agGridCommunity.Autowired('userComponentFactory')\n    ], RichSelectCellEditor.prototype, \"userComponentFactory\", void 0);\n    __decorate$1o([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], RichSelectCellEditor.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1o([\n        agGridCommunity.RefSelector('eValue')\n    ], RichSelectCellEditor.prototype, \"eValue\", void 0);\n    __decorate$1o([\n        agGridCommunity.RefSelector('eList')\n    ], RichSelectCellEditor.prototype, \"eList\", void 0);\n    return RichSelectCellEditor;\n}(agGridCommunity.PopupComponent));\n\nvar RichSelectModule = {\n    moduleName: agGridCommunity.ModuleNames.RichSelectModule,\n    beans: [],\n    userComponents: [\n        { componentName: 'agRichSelect', componentClass: RichSelectCellEditor },\n        { componentName: 'agRichSelectCellEditor', componentClass: RichSelectCellEditor }\n    ],\n    dependantModules: [\n        EnterpriseCoreModule\n    ]\n};\n\nvar __extends$21 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1p = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (undefined && undefined.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ServerSideBlock = /** @class */ (function (_super) {\n    __extends$21(ServerSideBlock, _super);\n    function ServerSideBlock(pageNumber, parentRowNode, params, parentCache) {\n        var _this = _super.call(this, pageNumber, params) || this;\n        _this.params = params;\n        _this.parentRowNode = parentRowNode;\n        _this.parentCache = parentCache;\n        _this.level = parentRowNode.level + 1;\n        _this.groupLevel = params.rowGroupCols ? _this.level < params.rowGroupCols.length : undefined;\n        _this.leafGroup = params.rowGroupCols ? _this.level === params.rowGroupCols.length - 1 : false;\n        return _this;\n    }\n    ServerSideBlock.prototype.init = function () {\n        this.usingTreeData = this.gridOptionsWrapper.isTreeData();\n        this.usingMasterDetail = this.gridOptionsWrapper.isMasterDetail();\n        if (!this.usingTreeData && this.groupLevel) {\n            var groupColVo = this.params.rowGroupCols[this.level];\n            this.groupField = groupColVo.field;\n            this.rowGroupColumn = this.columnController.getRowGroupColumns()[this.level];\n        }\n        this.createNodeIdPrefix();\n        _super.prototype.init.call(this, {\n            context: this.getContext(),\n            rowRenderer: this.rowRenderer\n        });\n    };\n    ServerSideBlock.prototype.setBeans = function (loggerFactory) {\n        this.logger = loggerFactory.create('ServerSideBlock');\n    };\n    ServerSideBlock.prototype.createNodeIdPrefix = function () {\n        var parts = [];\n        var rowNode = this.parentRowNode;\n        // pull keys from all parent nodes, but do not include the root node\n        while (rowNode && rowNode.level >= 0) {\n            parts.push(rowNode.key);\n            rowNode = rowNode.parent;\n        }\n        if (parts.length > 0) {\n            this.nodeIdPrefix = parts.reverse().join('-') + '-';\n        }\n    };\n    ServerSideBlock.prototype.createIdForIndex = function (index) {\n        if (agGridCommunity._.exists(this.nodeIdPrefix)) {\n            return this.nodeIdPrefix + index.toString();\n        }\n        else {\n            return index.toString();\n        }\n    };\n    ServerSideBlock.prototype.getNodeIdPrefix = function () {\n        return this.nodeIdPrefix;\n    };\n    ServerSideBlock.prototype.getRow = function (displayRowIndex) {\n        var bottomPointer = this.getStartRow();\n        // the end row depends on whether all this block is used or not. if the virtual row count\n        // is before the end, then not all the row is used\n        var virtualRowCount = this.parentCache.getVirtualRowCount();\n        var endRow = this.getEndRow();\n        var actualEnd = (virtualRowCount < endRow) ? virtualRowCount : endRow;\n        var topPointer = actualEnd - 1;\n        if (agGridCommunity._.missing(topPointer) || agGridCommunity._.missing(bottomPointer)) {\n            console.warn(\"ag-grid: error: topPointer = \" + topPointer + \", bottomPointer = \" + bottomPointer);\n            return null;\n        }\n        while (true) {\n            var midPointer = Math.floor((bottomPointer + topPointer) / 2);\n            var currentRowNode = _super.prototype.getRowUsingLocalIndex.call(this, midPointer);\n            // first check current row for index\n            if (currentRowNode.rowIndex === displayRowIndex) {\n                return currentRowNode;\n            }\n            // then check if current row contains a detail row with the index\n            var expandedMasterRow = currentRowNode.master && currentRowNode.expanded;\n            if (expandedMasterRow && currentRowNode.detailNode.rowIndex === displayRowIndex) {\n                return currentRowNode.detailNode;\n            }\n            // then check if child cache contains index\n            var childrenCache = currentRowNode.childrenCache;\n            if (currentRowNode.expanded && childrenCache && childrenCache.isDisplayIndexInCache(displayRowIndex)) {\n                return childrenCache.getRow(displayRowIndex);\n            }\n            // otherwise adjust pointers to continue searching for index\n            if (currentRowNode.rowIndex < displayRowIndex) {\n                bottomPointer = midPointer + 1;\n            }\n            else if (currentRowNode.rowIndex > displayRowIndex) {\n                topPointer = midPointer - 1;\n            }\n            else {\n                console.warn(\"ag-Grid: error: unable to locate rowIndex = \" + displayRowIndex + \" in cache\");\n                return null;\n            }\n        }\n    };\n    ServerSideBlock.prototype.setDataAndId = function (rowNode, data, index) {\n        var _this = this;\n        rowNode.stub = false;\n        if (agGridCommunity._.exists(data)) {\n            // if the user is not providing id's, then we build an id based on the index.\n            // for infinite scrolling, the index is used on it's own. for Server Side Row Model,\n            // we combine the index with the level and group key, so that the id is\n            // unique across the set.\n            //\n            // unique id is needed for selection (so selection can be maintained when\n            // doing server side sorting / filtering) - if user is not providing id's\n            // (and we use the indexes) then selection will not work between sorting &\n            // filtering.\n            //\n            // id's are also used by the row renderer for updating the dom as it identifies\n            // rowNodes by id\n            var idToUse = this.createIdForIndex(index);\n            rowNode.setDataAndId(data, idToUse);\n            rowNode.setRowHeight(this.gridOptionsWrapper.getRowHeightForNode(rowNode).height);\n            if (this.usingTreeData) {\n                var getServerSideGroupKey = this.gridOptionsWrapper.getServerSideGroupKeyFunc();\n                if (agGridCommunity._.exists(getServerSideGroupKey) && getServerSideGroupKey) {\n                    rowNode.key = getServerSideGroupKey(rowNode.data);\n                }\n                var isServerSideGroup = this.gridOptionsWrapper.getIsServerSideGroupFunc();\n                if (agGridCommunity._.exists(isServerSideGroup) && isServerSideGroup) {\n                    rowNode.group = isServerSideGroup(rowNode.data);\n                }\n            }\n            else if (rowNode.group) {\n                rowNode.key = this.valueService.getValue(this.rowGroupColumn, rowNode);\n                if (rowNode.key === null || rowNode.key === undefined) {\n                    agGridCommunity._.doOnce(function () {\n                        console.warn(\"null and undefined values are not allowed for server side row model keys\");\n                        if (_this.rowGroupColumn) {\n                            console.warn(\"column = \" + _this.rowGroupColumn.getId());\n                        }\n                        console.warn(\"data is \", rowNode.data);\n                    }, 'ServerSideBlock-CannotHaveNullOrUndefinedForKey');\n                }\n            }\n            else if (this.usingMasterDetail) {\n                var isRowMasterFunc = this.gridOptionsWrapper.getIsRowMasterFunc();\n                if (agGridCommunity._.exists(isRowMasterFunc) && isRowMasterFunc) {\n                    rowNode.master = isRowMasterFunc(rowNode.data);\n                }\n                else {\n                    rowNode.master = true;\n                }\n            }\n        }\n        else {\n            rowNode.setDataAndId(undefined, undefined);\n            rowNode.key = null;\n        }\n        if (this.usingTreeData || this.groupLevel) {\n            this.setGroupDataIntoRowNode(rowNode);\n            this.setChildCountIntoRowNode(rowNode);\n        }\n    };\n    ServerSideBlock.prototype.setChildCountIntoRowNode = function (rowNode) {\n        var getChildCount = this.gridOptionsWrapper.getChildCountFunc();\n        if (getChildCount) {\n            rowNode.allChildrenCount = getChildCount(rowNode.data);\n        }\n    };\n    ServerSideBlock.prototype.setGroupDataIntoRowNode = function (rowNode) {\n        var _this = this;\n        var groupDisplayCols = this.columnController.getGroupDisplayColumns();\n        var usingTreeData = this.gridOptionsWrapper.isTreeData();\n        groupDisplayCols.forEach(function (col) {\n            if (usingTreeData) {\n                if (agGridCommunity._.missing(rowNode.groupData)) {\n                    rowNode.groupData = {};\n                }\n                rowNode.groupData[col.getColId()] = rowNode.key;\n            }\n            else if (col.isRowGroupDisplayed(_this.rowGroupColumn.getId())) {\n                var groupValue = _this.valueService.getValue(_this.rowGroupColumn, rowNode);\n                if (agGridCommunity._.missing(rowNode.groupData)) {\n                    rowNode.groupData = {};\n                }\n                rowNode.groupData[col.getColId()] = groupValue;\n            }\n        });\n    };\n    ServerSideBlock.prototype.loadFromDatasource = function () {\n        var _this = this;\n        var params = this.createLoadParams();\n        window.setTimeout(function () {\n            if (_this.params.datasource) {\n                _this.params.datasource.getRows(params);\n            }\n        }, 0);\n    };\n    ServerSideBlock.prototype.createBlankRowNode = function (rowIndex) {\n        var rowNode = _super.prototype.createBlankRowNode.call(this, rowIndex);\n        rowNode.group = this.groupLevel;\n        rowNode.leafGroup = this.leafGroup;\n        rowNode.level = this.level;\n        rowNode.uiLevel = this.level;\n        rowNode.parent = this.parentRowNode;\n        // stub gets set to true here, and then false when this rowNode gets it's data\n        rowNode.stub = true;\n        if (rowNode.group) {\n            rowNode.expanded = false;\n            rowNode.field = this.groupField;\n            rowNode.rowGroupColumn = this.rowGroupColumn;\n        }\n        return rowNode;\n    };\n    ServerSideBlock.prototype.createGroupKeys = function (groupNode) {\n        var keys = [];\n        var pointer = groupNode;\n        while (pointer && pointer.level >= 0) {\n            keys.push(pointer.key);\n            pointer = pointer.parent;\n        }\n        keys.reverse();\n        return keys;\n    };\n    ServerSideBlock.prototype.isPixelInRange = function (pixel) {\n        return pixel >= this.blockTop && pixel < (this.blockTop + this.blockHeight);\n    };\n    ServerSideBlock.prototype.getRowBounds = function (index, virtualRowCount) {\n        var start = this.getStartRow();\n        var end = this.getEndRow();\n        var extractRowBounds = function (rowNode) {\n            return {\n                rowHeight: rowNode.rowHeight,\n                rowTop: rowNode.rowTop\n            };\n        };\n        for (var i = start; i <= end; i++) {\n            // the blocks can have extra rows in them, if they are the last block\n            // in the cache and the virtual row count doesn't divide evenly by the\n            if (i >= virtualRowCount) {\n                continue;\n            }\n            var rowNode = this.getRowUsingLocalIndex(i);\n            if (rowNode) {\n                if (rowNode.rowIndex === index) {\n                    return extractRowBounds(rowNode);\n                }\n                if (rowNode.group && rowNode.expanded && agGridCommunity._.exists(rowNode.childrenCache)) {\n                    var serverSideCache = rowNode.childrenCache;\n                    if (serverSideCache.isDisplayIndexInCache(index)) {\n                        return serverSideCache.getRowBounds(index);\n                    }\n                }\n                else if (rowNode.master && rowNode.expanded && agGridCommunity._.exists(rowNode.detailNode)) {\n                    if (rowNode.detailNode.rowIndex === index) {\n                        return extractRowBounds(rowNode.detailNode);\n                    }\n                }\n            }\n        }\n        console.error(\" ag-Grid: looking for invalid row index in Server Side Row Model, index=\" + index);\n        return null;\n    };\n    ServerSideBlock.prototype.getRowIndexAtPixel = function (pixel, virtualRowCount) {\n        var start = this.getStartRow();\n        var end = this.getEndRow();\n        for (var i = start; i <= end; i++) {\n            // the blocks can have extra rows in them, if they are the last block\n            // in the cache and the virtual row count doesn't divide evenly by the\n            if (i >= virtualRowCount) {\n                continue;\n            }\n            var rowNode = this.getRowUsingLocalIndex(i);\n            if (rowNode) {\n                // first check if pixel is in range of current row\n                if (rowNode.isPixelInRange(pixel)) {\n                    return rowNode.rowIndex;\n                }\n                // then check if current row contains a detail row with pixel in range\n                var expandedMasterRow = rowNode.master && rowNode.expanded;\n                if (expandedMasterRow && rowNode.detailNode.isPixelInRange(pixel)) {\n                    return rowNode.detailNode.rowIndex;\n                }\n                // then check if it's a group row with a child cache with pixel in range\n                if (rowNode.group && rowNode.expanded && agGridCommunity._.exists(rowNode.childrenCache)) {\n                    var serverSideCache = rowNode.childrenCache;\n                    if (serverSideCache.isPixelInRange(pixel)) {\n                        return serverSideCache.getRowIndexAtPixel(pixel);\n                    }\n                }\n            }\n        }\n        console.warn(\"ag-Grid: invalid pixel range for server side block \" + pixel);\n        return 0;\n    };\n    ServerSideBlock.prototype.clearRowTops = function (virtualRowCount) {\n        this.forEachRowNode(virtualRowCount, function (rowNode) {\n            rowNode.clearRowTop();\n            var hasChildCache = rowNode.group && agGridCommunity._.exists(rowNode.childrenCache);\n            if (hasChildCache) {\n                var serverSideCache = rowNode.childrenCache;\n                serverSideCache.clearRowTops();\n            }\n        });\n    };\n    ServerSideBlock.prototype.setDisplayIndexes = function (displayIndexSeq, virtualRowCount, nextRowTop) {\n        this.displayIndexStart = displayIndexSeq.peek();\n        this.blockTop = nextRowTop.value;\n        this.forEachRowNode(virtualRowCount, function (rowNode) {\n            rowNode.setRowIndex(displayIndexSeq.next());\n            rowNode.setRowTop(nextRowTop.value);\n            nextRowTop.value += rowNode.rowHeight;\n            var hasDetailRow = rowNode.master && rowNode.expanded;\n            if (hasDetailRow) {\n                rowNode.detailNode.setRowIndex(displayIndexSeq.next());\n                rowNode.detailNode.setRowTop(nextRowTop.value);\n                nextRowTop.value += rowNode.detailNode.rowHeight;\n            }\n            var hasChildCache = rowNode.group && agGridCommunity._.exists(rowNode.childrenCache);\n            if (hasChildCache) {\n                var serverSideCache = rowNode.childrenCache;\n                if (rowNode.expanded) {\n                    serverSideCache.setDisplayIndexes(displayIndexSeq, nextRowTop);\n                }\n                else {\n                    // we need to clear the row tops, as the row renderer depends on\n                    // this to know if the row should be faded out\n                    serverSideCache.clearRowTops();\n                }\n            }\n        });\n        this.displayIndexEnd = displayIndexSeq.peek();\n        this.blockHeight = nextRowTop.value - this.blockTop;\n    };\n    ServerSideBlock.prototype.forEachRowNode = function (virtualRowCount, callback) {\n        var start = this.getStartRow();\n        var end = this.getEndRow();\n        for (var i = start; i <= end; i++) {\n            // the blocks can have extra rows in them, if they are the last block\n            // in the cache and the virtual row count doesn't divide evenly by the\n            if (i >= virtualRowCount) {\n                continue;\n            }\n            var rowNode = this.getRowUsingLocalIndex(i);\n            if (rowNode) {\n                callback(rowNode);\n            }\n        }\n    };\n    ServerSideBlock.prototype.createLoadParams = function () {\n        var groupKeys = this.createGroupKeys(this.parentRowNode);\n        var request = {\n            startRow: this.getStartRow(),\n            endRow: this.getEndRow(),\n            rowGroupCols: this.params.rowGroupCols,\n            valueCols: this.params.valueCols,\n            pivotCols: this.params.pivotCols,\n            pivotMode: this.params.pivotMode,\n            groupKeys: groupKeys,\n            filterModel: this.params.filterModel,\n            sortModel: this.params.sortModel\n        };\n        var params = {\n            successCallback: this.pageLoaded.bind(this, this.getVersion()),\n            failCallback: this.pageLoadFailed.bind(this),\n            request: request,\n            parentNode: this.parentRowNode\n        };\n        return params;\n    };\n    ServerSideBlock.prototype.isDisplayIndexInBlock = function (displayIndex) {\n        return displayIndex >= this.displayIndexStart && displayIndex < this.displayIndexEnd;\n    };\n    ServerSideBlock.prototype.isBlockBefore = function (displayIndex) {\n        return displayIndex >= this.displayIndexEnd;\n    };\n    ServerSideBlock.prototype.getDisplayIndexStart = function () {\n        return this.displayIndexStart;\n    };\n    ServerSideBlock.prototype.getDisplayIndexEnd = function () {\n        return this.displayIndexEnd;\n    };\n    ServerSideBlock.prototype.getBlockHeight = function () {\n        return this.blockHeight;\n    };\n    ServerSideBlock.prototype.getBlockTop = function () {\n        return this.blockTop;\n    };\n    ServerSideBlock.prototype.isGroupLevel = function () {\n        return this.groupLevel;\n    };\n    ServerSideBlock.prototype.getGroupField = function () {\n        return this.groupField;\n    };\n    ServerSideBlock.DefaultBlockSize = 100;\n    __decorate$1p([\n        agGridCommunity.Autowired('rowRenderer')\n    ], ServerSideBlock.prototype, \"rowRenderer\", void 0);\n    __decorate$1p([\n        agGridCommunity.Autowired('columnController')\n    ], ServerSideBlock.prototype, \"columnController\", void 0);\n    __decorate$1p([\n        agGridCommunity.Autowired('valueService')\n    ], ServerSideBlock.prototype, \"valueService\", void 0);\n    __decorate$1p([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ServerSideBlock.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1p([\n        agGridCommunity.PostConstruct\n    ], ServerSideBlock.prototype, \"init\", null);\n    __decorate$1p([\n        __param(0, agGridCommunity.Qualifier('loggerFactory'))\n    ], ServerSideBlock.prototype, \"setBeans\", null);\n    return ServerSideBlock;\n}(agGridCommunity.RowNodeBlock));\n\nvar __extends$22 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1q = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param$1 = (undefined && undefined.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ServerSideCache = /** @class */ (function (_super) {\n    __extends$22(ServerSideCache, _super);\n    function ServerSideCache(cacheParams, parentRowNode) {\n        var _this = _super.call(this, cacheParams) || this;\n        // this will always be zero for the top level cache only,\n        // all the other ones change as the groups open and close\n        _this.displayIndexStart = 0;\n        _this.displayIndexEnd = 0; // not sure if setting this one to zero is necessary\n        _this.cacheTop = 0;\n        _this.blockHeights = {};\n        _this.parentRowNode = parentRowNode;\n        return _this;\n    }\n    ServerSideCache.prototype.setBeans = function (loggerFactory) {\n        this.logger = loggerFactory.create('ServerSideCache');\n    };\n    ServerSideCache.prototype.init = function () {\n        _super.prototype.init.call(this);\n    };\n    ServerSideCache.prototype.getRowBounds = function (index) {\n        var _this = this;\n        this.logger.log(\"getRowBounds(\" + index + \")\");\n        // we return null if row not found\n        // note - cast to \"any\" due to https://github.com/Microsoft/TypeScript/issues/11498\n        // should be RowBounds\n        var result;\n        var blockFound = false;\n        // note - cast to \"any\" due to https://github.com/Microsoft/TypeScript/issues/11498\n        // should be ServerSideBlock\n        var lastBlock = null;\n        this.forEachBlockInOrder(function (block) {\n            if (blockFound) {\n                return;\n            }\n            if (block.isDisplayIndexInBlock(index)) {\n                result = block.getRowBounds(index, _this.getVirtualRowCount());\n                blockFound = true;\n            }\n            else if (block.isBlockBefore(index)) {\n                lastBlock = block;\n            }\n        });\n        if (!blockFound) {\n            var nextRowTop = void 0;\n            var nextRowIndex = void 0;\n            if (lastBlock !== null) {\n                nextRowTop = lastBlock.getBlockTop() + lastBlock.getBlockHeight();\n                nextRowIndex = lastBlock.getDisplayIndexEnd();\n            }\n            else {\n                nextRowTop = this.cacheTop;\n                nextRowIndex = this.displayIndexStart;\n            }\n            var rowsBetween = index - nextRowIndex;\n            result = {\n                rowHeight: this.cacheParams.rowHeight,\n                rowTop: nextRowTop + rowsBetween * this.cacheParams.rowHeight\n            };\n        }\n        // NOTE: what about purged blocks\n        this.logger.log(\"getRowBounds(\" + index + \"), result = \" + result);\n        return result;\n    };\n    ServerSideCache.prototype.destroyBlock = function (block) {\n        _super.prototype.destroyBlock.call(this, block);\n    };\n    ServerSideCache.prototype.getRowIndexAtPixel = function (pixel) {\n        var _this = this;\n        this.logger.log(\"getRowIndexAtPixel(\" + pixel + \")\");\n        // we return null if row not found\n        // note - cast to \"any\" due to https://github.com/Microsoft/TypeScript/issues/11498\n        // should be number\n        var result;\n        var blockFound = false;\n        // note - cast to \"any\" due to https://github.com/Microsoft/TypeScript/issues/11498\n        // should be ServerSideBlock\n        var lastBlock;\n        this.forEachBlockInOrder(function (block) {\n            if (blockFound) {\n                return;\n            }\n            if (block.isPixelInRange(pixel)) {\n                result = block.getRowIndexAtPixel(pixel, _this.getVirtualRowCount());\n                blockFound = true;\n            }\n            else if (block.getBlockTop() < pixel) {\n                lastBlock = block;\n            }\n        });\n        if (!blockFound) {\n            var nextRowTop = void 0;\n            var nextRowIndex = void 0;\n            if (lastBlock) {\n                nextRowTop = lastBlock.getBlockTop() + lastBlock.getBlockHeight();\n                nextRowIndex = lastBlock.getDisplayIndexEnd();\n            }\n            else {\n                nextRowTop = this.cacheTop;\n                nextRowIndex = this.displayIndexStart;\n            }\n            var pixelsBetween = pixel - nextRowTop;\n            var rowsBetween = (pixelsBetween / this.cacheParams.rowHeight) | 0;\n            result = nextRowIndex + rowsBetween;\n        }\n        var lastAllowedIndex = this.getDisplayIndexEnd() - 1;\n        if (result > lastAllowedIndex) {\n            result = lastAllowedIndex;\n        }\n        //NOTE: purged\n        this.logger.log(\"getRowIndexAtPixel(\" + pixel + \") result = \" + result);\n        return result;\n    };\n    ServerSideCache.prototype.clearRowTops = function () {\n        var _this = this;\n        this.forEachBlockInOrder(function (block) { return block.clearRowTops(_this.getVirtualRowCount()); });\n    };\n    ServerSideCache.prototype.setDisplayIndexes = function (displayIndexSeq, nextRowTop) {\n        var _this = this;\n        this.displayIndexStart = displayIndexSeq.peek();\n        this.cacheTop = nextRowTop.value;\n        var lastBlockId = -1;\n        var blockSize = this.getBlockSize();\n        this.forEachBlockInOrder(function (currentBlock, blockId) {\n            // if we skipped blocks, then we need to skip the row indexes. we assume that all missing\n            // blocks are made up of closed RowNodes only (if they were groups), as we never expire from\n            // the cache if any row nodes are open.\n            var blocksSkippedCount = blockId - lastBlockId - 1;\n            var rowsSkippedCount = blocksSkippedCount * blockSize;\n            if (rowsSkippedCount > 0) {\n                displayIndexSeq.skip(rowsSkippedCount);\n            }\n            for (var i = 1; i <= blocksSkippedCount; i++) {\n                var blockToAddId = blockId - i;\n                if (agGridCommunity._.exists(_this.blockHeights[blockToAddId])) {\n                    nextRowTop.value += _this.blockHeights[blockToAddId];\n                }\n                else {\n                    nextRowTop.value += blockSize * _this.cacheParams.rowHeight;\n                }\n            }\n            lastBlockId = blockId;\n            currentBlock.setDisplayIndexes(displayIndexSeq, _this.getVirtualRowCount(), nextRowTop);\n            _this.blockHeights[blockId] = currentBlock.getBlockHeight();\n        });\n        // if any blocks missing at the end, need to increase the row index for them also\n        // eg if block size = 10, we have total rows of 25 (indexes 0 .. 24), but first 2 blocks loaded (because\n        // last row was ejected from cache), then:\n        // lastVisitedRow = 19, virtualRowCount = 25, rows not accounted for = 5 (24 - 19)\n        var lastVisitedRow = ((lastBlockId + 1) * blockSize) - 1;\n        var rowCount = this.getVirtualRowCount();\n        var rowsNotAccountedFor = rowCount - lastVisitedRow - 1;\n        if (rowsNotAccountedFor > 0) {\n            displayIndexSeq.skip(rowsNotAccountedFor);\n            nextRowTop.value += rowsNotAccountedFor * this.cacheParams.rowHeight;\n        }\n        this.displayIndexEnd = displayIndexSeq.peek();\n        this.cacheHeight = nextRowTop.value - this.cacheTop;\n    };\n    // gets called in a) init() above and b) by the grid\n    ServerSideCache.prototype.getRow = function (displayRowIndex, dontCreateBlock) {\n        if (dontCreateBlock === void 0) { dontCreateBlock = false; }\n        // this can happen if asking for a row that doesn't exist in the model,\n        // eg if a cell range is selected, and the user filters so rows no longer\n        // exist\n        if (!this.isDisplayIndexInCache(displayRowIndex)) {\n            return null;\n        }\n        // if we have the block, then this is the block\n        var block = null;\n        // this is the last block that we have BEFORE the right block\n        // note - cast to \"any\" due to https://github.com/Microsoft/TypeScript/issues/11498\n        // should be ServerSideBlock\n        var beforeBlock = null;\n        this.forEachBlockInOrder(function (currentBlock) {\n            if (currentBlock.isDisplayIndexInBlock(displayRowIndex)) {\n                block = currentBlock;\n            }\n            else if (currentBlock.isBlockBefore(displayRowIndex)) {\n                // this will get assigned many times, but the last time will\n                // be the closest block to the required block that is BEFORE\n                beforeBlock = currentBlock;\n            }\n        });\n        // when we are moving rows around, we don't want to trigger loads\n        if (agGridCommunity._.missing(block) && dontCreateBlock) {\n            return null;\n        }\n        var blockSize = this.getBlockSize();\n        // if block not found, we need to load it\n        if (agGridCommunity._.missing(block)) {\n            var blockNumber = void 0;\n            var displayIndexStart_1;\n            var nextRowTop = void 0;\n            // because missing blocks are always fully closed, we can work out\n            // the start index of the block we want by hopping from the closest block,\n            // as we know the row count in closed blocks is equal to the page size\n            if (beforeBlock) {\n                blockNumber = beforeBlock.getBlockNumber() + 1;\n                displayIndexStart_1 = beforeBlock.getDisplayIndexEnd();\n                nextRowTop = beforeBlock.getBlockHeight() + beforeBlock.getBlockTop();\n                var isInRange = function () {\n                    return displayRowIndex >= displayIndexStart_1 && displayRowIndex < (displayIndexStart_1 + blockSize);\n                };\n                while (!isInRange()) {\n                    displayIndexStart_1 += blockSize;\n                    var cachedBlockHeight = this.blockHeights[blockNumber];\n                    if (agGridCommunity._.exists(cachedBlockHeight)) {\n                        nextRowTop += cachedBlockHeight;\n                    }\n                    else {\n                        nextRowTop += this.cacheParams.rowHeight * blockSize;\n                    }\n                    blockNumber++;\n                }\n            }\n            else {\n                var localIndex = displayRowIndex - this.displayIndexStart;\n                blockNumber = Math.floor(localIndex / blockSize);\n                displayIndexStart_1 = this.displayIndexStart + (blockNumber * blockSize);\n                nextRowTop = this.cacheTop + (blockNumber * blockSize * this.cacheParams.rowHeight);\n            }\n            block = this.createBlock(blockNumber, displayIndexStart_1, { value: nextRowTop });\n            this.logger.log(\"block missing, rowIndex = \" + displayRowIndex + \", creating #\" + blockNumber + \", displayIndexStart = \" + displayIndexStart_1);\n        }\n        return block ? block.getRow(displayRowIndex) : null;\n    };\n    ServerSideCache.prototype.getBlockSize = function () {\n        return this.cacheParams.blockSize ? this.cacheParams.blockSize : ServerSideBlock.DefaultBlockSize;\n    };\n    ServerSideCache.prototype.getTopLevelRowDisplayedIndex = function (topLevelIndex) {\n        var blockSize = this.getBlockSize();\n        var blockId = Math.floor(topLevelIndex / blockSize);\n        var block = this.getBlock(blockId);\n        if (block) {\n            // if we found a block, means row is in memory, so we can report the row index directly\n            var rowNode = block.getRowUsingLocalIndex(topLevelIndex, true);\n            return rowNode.rowIndex;\n        }\n        else {\n            // otherwise we need to calculate it from the previous block\n            var blockBefore_1;\n            this.forEachBlockInOrder(function (currentBlock, currentId) {\n                if (blockId > currentId) {\n                    // this will get assigned many times, but the last time will\n                    // be the closest block to the required block that is BEFORE\n                    blockBefore_1 = currentBlock;\n                }\n            });\n            if (blockBefore_1) {\n                // note: the local index is the same as the top level index, two terms for same thing\n                //\n                // get index of the last row before this row\n                // eg if blocksize = 100, then:\n                //   last row of first block is 99 (100 * 1) -1;\n                //   last row of second block is 199 (100 * 2) -1;\n                var lastRowTopLevelIndex = (blockSize * (blockBefore_1.getBlockNumber() + 1)) - 1;\n                // this is the last loaded rownode in the cache that is before the row we are interested in.\n                // we are guaranteed no rows are open. so the difference between the topTopIndex will be the\n                // same as the difference between the displayed index\n                var indexDiff = topLevelIndex - lastRowTopLevelIndex;\n                var lastRowNode = blockBefore_1.getRowUsingLocalIndex(lastRowTopLevelIndex, true);\n                return lastRowNode.rowIndex + indexDiff;\n            }\n            else {\n                return topLevelIndex;\n            }\n        }\n    };\n    ServerSideCache.prototype.createBlock = function (blockNumber, displayIndex, nextRowTop) {\n        var newBlock = new ServerSideBlock(blockNumber, this.parentRowNode, this.cacheParams, this);\n        this.getContext().wireBean(newBlock);\n        var displayIndexSequence = new agGridCommunity.NumberSequence(displayIndex);\n        newBlock.setDisplayIndexes(displayIndexSequence, this.getVirtualRowCount(), nextRowTop);\n        this.postCreateBlock(newBlock);\n        return newBlock;\n    };\n    ServerSideCache.prototype.getDisplayIndexEnd = function () {\n        return this.displayIndexEnd;\n    };\n    ServerSideCache.prototype.isDisplayIndexInCache = function (displayIndex) {\n        if (this.getVirtualRowCount() === 0) {\n            return false;\n        }\n        return displayIndex >= this.displayIndexStart && displayIndex < this.displayIndexEnd;\n    };\n    ServerSideCache.prototype.getChildCache = function (keys) {\n        var _this = this;\n        if (agGridCommunity._.missingOrEmpty(keys)) {\n            return this;\n        }\n        var nextKey = keys[0];\n        var nextServerSideCache = null;\n        this.forEachBlockInOrder(function (block) {\n            // callback: (rowNode: RowNode, index: number) => void, sequence: NumberSequence, rowCount: number\n            block.forEachNodeShallow(function (rowNode) {\n                if (rowNode.key === nextKey) {\n                    nextServerSideCache = rowNode.childrenCache;\n                }\n            }, new agGridCommunity.NumberSequence(), _this.getVirtualRowCount());\n        });\n        if (nextServerSideCache) {\n            var keyListForNextLevel = keys.slice(1, keys.length);\n            return nextServerSideCache ? nextServerSideCache.getChildCache(keyListForNextLevel) : null;\n        }\n        else {\n            return null;\n        }\n    };\n    ServerSideCache.prototype.isPixelInRange = function (pixel) {\n        if (this.getVirtualRowCount() === 0) {\n            return false;\n        }\n        return pixel >= this.cacheTop && pixel < (this.cacheTop + this.cacheHeight);\n    };\n    ServerSideCache.prototype.refreshCacheAfterSort = function (changedColumnsInSort, rowGroupColIds) {\n        var _this = this;\n        var level = this.parentRowNode.level + 1;\n        var grouping = level < this.cacheParams.rowGroupCols.length;\n        var shouldPurgeCache;\n        if (grouping) {\n            var groupColVo = this.cacheParams.rowGroupCols[level];\n            var groupField = groupColVo.field;\n            var rowGroupBlock = rowGroupColIds.indexOf(groupField) > -1;\n            var sortingByGroup = changedColumnsInSort.indexOf(groupField) > -1;\n            shouldPurgeCache = rowGroupBlock && sortingByGroup;\n        }\n        else {\n            shouldPurgeCache = true;\n        }\n        if (shouldPurgeCache) {\n            this.purgeCache();\n        }\n        else {\n            this.forEachBlockInOrder(function (block) {\n                if (block.isGroupLevel()) {\n                    var callback = function (rowNode) {\n                        var nextCache = rowNode.childrenCache;\n                        if (nextCache) {\n                            nextCache.refreshCacheAfterSort(changedColumnsInSort, rowGroupColIds);\n                        }\n                    };\n                    block.forEachNodeShallow(callback, new agGridCommunity.NumberSequence(), _this.getVirtualRowCount());\n                }\n            });\n        }\n    };\n    __decorate$1q([\n        agGridCommunity.Autowired('eventService')\n    ], ServerSideCache.prototype, \"eventService\", void 0);\n    __decorate$1q([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ServerSideCache.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1q([\n        __param$1(0, agGridCommunity.Qualifier('loggerFactory'))\n    ], ServerSideCache.prototype, \"setBeans\", null);\n    __decorate$1q([\n        agGridCommunity.PostConstruct\n    ], ServerSideCache.prototype, \"init\", null);\n    return ServerSideCache;\n}(agGridCommunity.RowNodeCache));\n\nvar __extends$23 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1r = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param$2 = (undefined && undefined.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ServerSideRowModel = /** @class */ (function (_super) {\n    __extends$23(ServerSideRowModel, _super);\n    function ServerSideRowModel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // we don't implement as lazy row heights is not supported in this row model\n    ServerSideRowModel.prototype.ensureRowHeightsValid = function (startPixel, endPixel, startLimitIndex, endLimitIndex) { return false; };\n    ServerSideRowModel.prototype.postConstruct = function () {\n        this.rowHeight = this.gridOptionsWrapper.getRowHeightAsNumber();\n        this.addEventListeners();\n    };\n    ServerSideRowModel.prototype.start = function () {\n        var datasource = this.gridOptionsWrapper.getServerSideDatasource();\n        if (datasource) {\n            this.setDatasource(datasource);\n        }\n    };\n    ServerSideRowModel.prototype.destroyDatasource = function () {\n        if (this.datasource) {\n            if (this.datasource.destroy) {\n                this.datasource.destroy();\n            }\n            this.rowRenderer.datasourceChanged();\n            this.datasource = undefined;\n        }\n    };\n    ServerSideRowModel.prototype.setBeans = function (loggerFactory) {\n        this.logger = loggerFactory.create('ServerSideRowModel');\n    };\n    ServerSideRowModel.prototype.addEventListeners = function () {\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onColumnRowGroupChanged.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_ROW_GROUP_OPENED, this.onRowGroupOpened.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.onPivotModeChanged.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.onColumnEverything.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGED, this.onValueChanged.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGED, this.onColumnPivotChanged.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_SORT_CHANGED, this.onSortChanged.bind(this));\n    };\n    ServerSideRowModel.prototype.setDatasource = function (datasource) {\n        this.destroyDatasource();\n        this.datasource = datasource;\n        this.reset();\n    };\n    ServerSideRowModel.prototype.isLastRowFound = function () {\n        if (this.cacheExists()) {\n            return this.rootNode.childrenCache.isMaxRowFound();\n        }\n        else {\n            return false;\n        }\n    };\n    ServerSideRowModel.prototype.onColumnEverything = function () {\n        // this is a hack for one customer only, so they can suppress the resetting of the columns.\n        // The problem the customer had was they were api.setColumnDefs() after the data source came\n        // back with data. So this stops the reload from the grid after the data comes back.\n        // Once we have \"AG-1591 Allow delta changes to columns\" fixed, then this hack can be taken out.\n        if (this.gridOptionsWrapper.isSuppressEnterpriseResetOnNewColumns()) {\n            return;\n        }\n        // every other customer can continue as normal and have it working!!!\n        // check if anything pertaining to fetching data has changed, and if it has, reset, but if\n        // it has not, don't reset\n        var resetRequired;\n        if (!this.cacheParams) {\n            resetRequired = true;\n        }\n        else {\n            var rowGroupColumnVos = this.toValueObjects(this.columnController.getRowGroupColumns());\n            var valueColumnVos = this.toValueObjects(this.columnController.getValueColumns());\n            var pivotColumnVos = this.toValueObjects(this.columnController.getPivotColumns());\n            var sortModelDifferent = !agGridCommunity._.jsonEquals(this.cacheParams.sortModel, this.sortController.getSortModel());\n            var rowGroupDifferent = !agGridCommunity._.jsonEquals(this.cacheParams.rowGroupCols, rowGroupColumnVos);\n            var pivotDifferent = !agGridCommunity._.jsonEquals(this.cacheParams.pivotCols, pivotColumnVos);\n            var valuesDifferent = !agGridCommunity._.jsonEquals(this.cacheParams.valueCols, valueColumnVos);\n            resetRequired = sortModelDifferent || rowGroupDifferent || pivotDifferent || valuesDifferent;\n        }\n        if (resetRequired) {\n            this.reset();\n        }\n    };\n    ServerSideRowModel.prototype.onFilterChanged = function () {\n        this.reset();\n    };\n    // returns back all the cols that were effected by the sorting. eg if we were sorting by col A,\n    // and now we are sorting by col B, the list of impacted cols should be A and B. so if a cache\n    // is impacted by sorting on A or B then it needs to be refreshed. this includes where the cache\n    // was previously sorted by A and then the A sort now needs to be cleared.\n    ServerSideRowModel.prototype.findChangedColumnsInSort = function (newSortModel, oldSortModel) {\n        var allColsInBothSorts = [];\n        [newSortModel, oldSortModel].forEach(function (sortModel) {\n            if (sortModel) {\n                var ids = sortModel.map(function (sm) { return sm.colId; });\n                allColsInBothSorts = allColsInBothSorts.concat(ids);\n            }\n        });\n        var differentSorts = function (oldSortItem, newSortItem) {\n            var oldSort = oldSortItem ? oldSortItem.sort : null;\n            var newSort = newSortItem ? newSortItem.sort : null;\n            return oldSort !== newSort;\n        };\n        var differentIndexes = function (oldSortItem, newSortItem) {\n            var oldIndex = oldSortModel.indexOf(oldSortItem);\n            var newIndex = newSortModel.indexOf(newSortItem);\n            return oldIndex !== newIndex;\n        };\n        return allColsInBothSorts.filter(function (colId) {\n            var oldSortItem = agGridCommunity._.find(oldSortModel, function (sm) { return sm.colId === colId; });\n            var newSortItem = agGridCommunity._.find(newSortModel, function (sm) { return sm.colId === colId; });\n            return differentSorts(oldSortItem, newSortItem) || differentIndexes(oldSortItem, newSortItem);\n        });\n    };\n    ServerSideRowModel.prototype.onSortChanged = function () {\n        if (!this.cacheExists()) {\n            return;\n        }\n        var newSortModel = this.extractSortModel();\n        var oldSortModel = this.cacheParams.sortModel;\n        var changedColumnsInSort = this.findChangedColumnsInSort(newSortModel, oldSortModel);\n        this.cacheParams.sortModel = newSortModel;\n        var rowGroupColIds = this.columnController.getRowGroupColumns().map(function (col) { return col.getId(); });\n        var serverSideCache = this.rootNode.childrenCache;\n        var sortingWithValueCol = this.isSortingWithValueColumn(changedColumnsInSort);\n        var sortingWithSecondaryCol = this.isSortingWithSecondaryColumn(changedColumnsInSort);\n        var sortAlwaysResets = this.gridOptionsWrapper.isServerSideSortingAlwaysResets();\n        if (sortAlwaysResets || sortingWithValueCol || sortingWithSecondaryCol) {\n            this.reset();\n        }\n        else {\n            serverSideCache.refreshCacheAfterSort(changedColumnsInSort, rowGroupColIds);\n        }\n    };\n    ServerSideRowModel.prototype.onValueChanged = function () {\n        this.reset();\n    };\n    ServerSideRowModel.prototype.onColumnRowGroupChanged = function () {\n        this.reset();\n    };\n    ServerSideRowModel.prototype.onColumnPivotChanged = function () {\n        this.reset();\n    };\n    ServerSideRowModel.prototype.onPivotModeChanged = function () {\n        this.reset();\n    };\n    ServerSideRowModel.prototype.onRowGroupOpened = function (event) {\n        var _this = this;\n        var rowNode = event.node;\n        if (rowNode.expanded) {\n            if (rowNode.master) {\n                this.createDetailNode(rowNode);\n            }\n            else if (agGridCommunity._.missing(rowNode.childrenCache)) {\n                this.createNodeCache(rowNode);\n            }\n        }\n        else {\n            if (this.gridOptionsWrapper.isPurgeClosedRowNodes() && agGridCommunity._.exists(rowNode.childrenCache)) {\n                rowNode.childrenCache.destroy();\n                rowNode.childrenCache = null;\n            }\n        }\n        var shouldAnimate = function () {\n            var rowAnimationEnabled = _this.gridOptionsWrapper.isAnimateRows();\n            if (rowNode.master) {\n                return rowAnimationEnabled && rowNode.expanded;\n            }\n            return rowAnimationEnabled;\n        };\n        this.updateRowIndexesAndBounds();\n        var modelUpdatedEvent = {\n            type: agGridCommunity.Events.EVENT_MODEL_UPDATED,\n            api: this.gridOptionsWrapper.getApi(),\n            columnApi: this.gridOptionsWrapper.getColumnApi(),\n            newPage: false,\n            newData: false,\n            animate: shouldAnimate(),\n            keepRenderedRows: true\n        };\n        this.eventService.dispatchEvent(modelUpdatedEvent);\n    };\n    ServerSideRowModel.prototype.reset = function () {\n        this.rootNode = new agGridCommunity.RowNode();\n        this.rootNode.group = true;\n        this.rootNode.level = -1;\n        this.getContext().wireBean(this.rootNode);\n        if (this.datasource) {\n            this.createNewRowNodeBlockLoader();\n            this.cacheParams = this.createCacheParams();\n            this.createNodeCache(this.rootNode);\n            this.updateRowIndexesAndBounds();\n        }\n        // this event: 1) clears selection 2) updates filters 3) shows/hides 'no rows' overlay\n        var rowDataChangedEvent = {\n            type: agGridCommunity.Events.EVENT_ROW_DATA_CHANGED,\n            api: this.gridApi,\n            columnApi: this.columnApi\n        };\n        this.eventService.dispatchEvent(rowDataChangedEvent);\n        // this gets the row to render rows (or remove the previously rendered rows, as it's blank to start).\n        // important to NOT pass in an event with keepRenderedRows or animate, as we want the renderer\n        // to treat the rows as new rows, as it's all new data\n        var modelUpdatedEvent = {\n            type: agGridCommunity.Events.EVENT_MODEL_UPDATED,\n            api: this.gridApi,\n            columnApi: this.columnApi,\n            animate: false,\n            keepRenderedRows: false,\n            newData: false,\n            newPage: false\n        };\n        this.eventService.dispatchEvent(modelUpdatedEvent);\n    };\n    ServerSideRowModel.prototype.createNewRowNodeBlockLoader = function () {\n        this.destroyRowNodeBlockLoader();\n        var maxConcurrentRequests = this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();\n        var blockLoadDebounceMillis = this.gridOptionsWrapper.getBlockLoadDebounceMillis();\n        this.rowNodeBlockLoader = new agGridCommunity.RowNodeBlockLoader(maxConcurrentRequests, blockLoadDebounceMillis);\n        this.getContext().wireBean(this.rowNodeBlockLoader);\n    };\n    ServerSideRowModel.prototype.destroyRowNodeBlockLoader = function () {\n        if (this.rowNodeBlockLoader) {\n            this.rowNodeBlockLoader.destroy();\n            this.rowNodeBlockLoader = undefined;\n        }\n    };\n    ServerSideRowModel.prototype.toValueObjects = function (columns) {\n        var _this = this;\n        return columns.map(function (col) { return ({\n            id: col.getId(),\n            aggFunc: col.getAggFunc(),\n            displayName: _this.columnController.getDisplayNameForColumn(col, 'model'),\n            field: col.getColDef().field\n        }); });\n    };\n    ServerSideRowModel.prototype.createCacheParams = function () {\n        var rowGroupColumnVos = this.toValueObjects(this.columnController.getRowGroupColumns());\n        var valueColumnVos = this.toValueObjects(this.columnController.getValueColumns());\n        var pivotColumnVos = this.toValueObjects(this.columnController.getPivotColumns());\n        var dynamicRowHeight = this.gridOptionsWrapper.isDynamicRowHeight();\n        var maxBlocksInCache = this.gridOptionsWrapper.getMaxBlocksInCache();\n        if (dynamicRowHeight && maxBlocksInCache >= 0) {\n            console.warn('ag-Grid: Server Side Row Model does not support Dynamic Row Height and Cache Purging. ' +\n                'Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.');\n            maxBlocksInCache = undefined;\n        }\n        if (maxBlocksInCache >= 0 && this.columnController.isAutoRowHeightActive()) {\n            console.warn('ag-Grid: Server Side Row Model does not support Auto Row Height and Cache Purging. ' +\n                'Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.');\n            maxBlocksInCache = undefined;\n        }\n        var params = {\n            // the columns the user has grouped and aggregated by\n            valueCols: valueColumnVos,\n            rowGroupCols: rowGroupColumnVos,\n            pivotCols: pivotColumnVos,\n            pivotMode: this.columnController.isPivotMode(),\n            // sort and filter model\n            filterModel: this.filterManager.getFilterModel(),\n            sortModel: this.extractSortModel(),\n            rowNodeBlockLoader: this.rowNodeBlockLoader,\n            datasource: this.datasource,\n            lastAccessedSequence: new agGridCommunity.NumberSequence(),\n            overflowSize: 1,\n            initialRowCount: 1,\n            maxConcurrentRequests: this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests() || 0,\n            maxBlocksInCache: maxBlocksInCache,\n            blockSize: this.gridOptionsWrapper.getCacheBlockSize(),\n            rowHeight: this.rowHeight,\n            dynamicRowHeight: dynamicRowHeight\n        };\n        // set defaults\n        if (!(params.maxConcurrentRequests >= 1)) {\n            params.maxConcurrentRequests = 2;\n        }\n        // page size needs to be 1 or greater. having it at 1 would be silly, as you would be hitting the\n        // server for one page at a time. so the default if not specified is 100.\n        if (!(params.blockSize >= 1)) {\n            params.blockSize = ServerSideBlock.DefaultBlockSize;\n        }\n        // if user doesn't give initial rows to display, we assume zero\n        if (!(params.initialRowCount >= 1)) {\n            params.initialRowCount = 0;\n        }\n        // if user doesn't provide overflow, we use default overflow of 1, so user can scroll past\n        // the current page and request first row of next page\n        if (!(params.overflowSize >= 1)) {\n            params.overflowSize = 1;\n        }\n        return params;\n    };\n    ServerSideRowModel.prototype.createNodeCache = function (rowNode) {\n        var cache = new ServerSideCache(this.cacheParams, rowNode);\n        this.getContext().wireBean(cache);\n        cache.addEventListener(agGridCommunity.RowNodeCache.EVENT_CACHE_UPDATED, this.onCacheUpdated.bind(this));\n        rowNode.childrenCache = cache;\n    };\n    ServerSideRowModel.prototype.onCacheUpdated = function () {\n        this.updateRowIndexesAndBounds();\n        var modelUpdatedEvent = {\n            type: agGridCommunity.Events.EVENT_MODEL_UPDATED,\n            api: this.gridApi,\n            columnApi: this.columnApi,\n            animate: this.gridOptionsWrapper.isAnimateRows(),\n            keepRenderedRows: true,\n            newPage: false,\n            newData: false\n        };\n        this.eventService.dispatchEvent(modelUpdatedEvent);\n    };\n    ServerSideRowModel.prototype.updateRowIndexesAndBounds = function () {\n        if (this.cacheExists()) {\n            // NOTE: should not be casting here, the RowModel should use IServerSideRowModel interface?\n            var serverSideCache = this.rootNode.childrenCache;\n            this.resetRowTops(serverSideCache);\n            this.setDisplayIndexes(serverSideCache);\n        }\n    };\n    ServerSideRowModel.prototype.setDisplayIndexes = function (cache) {\n        var numberSequence = new agGridCommunity.NumberSequence();\n        var nextRowTop = { value: 0 };\n        cache.setDisplayIndexes(numberSequence, nextRowTop);\n    };\n    // resetting row tops is needed for animation, as part of the operation is saving the old location,\n    // which is needed for rows that are transitioning in\n    ServerSideRowModel.prototype.resetRowTops = function (cache) {\n        var numberSequence = new agGridCommunity.NumberSequence();\n        cache.forEachNodeDeep(function (rowNode) { return rowNode.clearRowTop(); }, numberSequence);\n    };\n    ServerSideRowModel.prototype.getRow = function (index) {\n        if (this.cacheExists()) {\n            return this.rootNode.childrenCache.getRow(index);\n        }\n        return null;\n    };\n    ServerSideRowModel.prototype.getRowCount = function () {\n        if (!this.cacheExists()) {\n            return 1;\n        }\n        var serverSideCache = this.rootNode.childrenCache;\n        var res = serverSideCache.getDisplayIndexEnd();\n        return res;\n    };\n    ServerSideRowModel.prototype.getTopLevelRowCount = function () {\n        if (!this.cacheExists()) {\n            return 1;\n        }\n        var serverSideCache = this.rootNode.childrenCache;\n        return serverSideCache.getVirtualRowCount();\n    };\n    ServerSideRowModel.prototype.getTopLevelRowDisplayedIndex = function (topLevelIndex) {\n        if (!this.cacheExists()) {\n            return topLevelIndex;\n        }\n        var serverSideCache = this.rootNode.childrenCache;\n        return serverSideCache.getTopLevelRowDisplayedIndex(topLevelIndex);\n    };\n    ServerSideRowModel.prototype.getRowBounds = function (index) {\n        if (!this.cacheExists()) {\n            return {\n                rowTop: 0,\n                rowHeight: this.rowHeight\n            };\n        }\n        var serverSideCache = this.rootNode.childrenCache;\n        return serverSideCache.getRowBounds(index);\n    };\n    ServerSideRowModel.prototype.getRowIndexAtPixel = function (pixel) {\n        if (pixel === 0) {\n            return 0;\n        }\n        if (!this.cacheExists()) {\n            return 0;\n        }\n        var serverSideCache = this.rootNode.childrenCache;\n        return serverSideCache.getRowIndexAtPixel(pixel);\n    };\n    ServerSideRowModel.prototype.getCurrentPageHeight = function () {\n        return this.rowHeight * this.getRowCount();\n    };\n    ServerSideRowModel.prototype.isEmpty = function () {\n        return false;\n    };\n    ServerSideRowModel.prototype.isRowsToRender = function () {\n        return this.cacheExists() && this.getRowCount() > 0;\n    };\n    ServerSideRowModel.prototype.getType = function () {\n        return agGridCommunity.Constants.ROW_MODEL_TYPE_SERVER_SIDE;\n    };\n    ServerSideRowModel.prototype.forEachNode = function (callback) {\n        if (this.cacheExists()) {\n            this.rootNode.childrenCache.forEachNodeDeep(callback);\n        }\n    };\n    ServerSideRowModel.prototype.executeOnCache = function (route, callback) {\n        if (this.cacheExists()) {\n            var topLevelCache = this.rootNode.childrenCache;\n            var cacheToPurge = topLevelCache.getChildCache(route);\n            if (cacheToPurge) {\n                callback(cacheToPurge);\n            }\n        }\n    };\n    ServerSideRowModel.prototype.purgeCache = function (route) {\n        if (route === void 0) { route = []; }\n        this.executeOnCache(route, function (cache) { return cache.purgeCache(); });\n    };\n    ServerSideRowModel.prototype.getNodesInRangeForSelection = function (firstInRange, lastInRange) {\n        if (agGridCommunity._.exists(firstInRange) && firstInRange.parent !== lastInRange.parent) {\n            return [];\n        }\n        return lastInRange.parent.childrenCache.getRowNodesInRange(firstInRange, lastInRange);\n    };\n    ServerSideRowModel.prototype.getRowNode = function (id) {\n        var result = null;\n        this.forEachNode(function (rowNode) {\n            if (rowNode.id === id) {\n                result = rowNode;\n            }\n            if (rowNode.detailNode && rowNode.detailNode.id === id) {\n                result = rowNode.detailNode;\n            }\n        });\n        return result;\n    };\n    ServerSideRowModel.prototype.getBlockState = function () {\n        if (this.rowNodeBlockLoader) {\n            return this.rowNodeBlockLoader.getBlockState();\n        }\n        else {\n            return null;\n        }\n    };\n    // always returns true - this is used by the\n    ServerSideRowModel.prototype.isRowPresent = function (rowNode) {\n        var foundRowNode = this.getRowNode(rowNode.id);\n        return !!foundRowNode;\n    };\n    ServerSideRowModel.prototype.extractSortModel = function () {\n        var sortModel = this.sortController.getSortModel();\n        // when using tree data we just return the sort model with the 'ag-Grid-AutoColumn' as is, i.e not broken out\n        // into it's constitute group columns as they are not defined up front and can vary per node.\n        if (this.gridOptionsWrapper.isTreeData()) {\n            return sortModel;\n        }\n        var rowGroupCols = this.toValueObjects(this.columnController.getRowGroupColumns());\n        // find index of auto group column in sort model\n        var autoGroupIndex = -1;\n        for (var i = 0; i < sortModel.length; ++i) {\n            if (sortModel[i].colId === agGridCommunity.Constants.GROUP_AUTO_COLUMN_ID) {\n                autoGroupIndex = i;\n                break;\n            }\n        }\n        // replace auto column with individual group columns\n        if (autoGroupIndex > -1) {\n            var individualGroupCols = rowGroupCols.map(function (group) {\n                return {\n                    colId: group.field,\n                    sort: sortModel[autoGroupIndex].sort\n                };\n            });\n            // remove auto group column\n            sortModel.splice(autoGroupIndex, 1);\n            var _loop_1 = function (i) {\n                var individualGroupCol = individualGroupCols[i];\n                // don't add individual group column if non group column already exists as it gets precedence\n                var sameNonGroupColumnExists = sortModel.some(function (sm) { return sm.colId === individualGroupCol.colId; });\n                if (sameNonGroupColumnExists) {\n                    return \"continue\";\n                }\n                sortModel.splice(autoGroupIndex++, 0, individualGroupCol);\n            };\n            // insert individual group columns\n            for (var i = 0; i < individualGroupCols.length; i++) {\n                _loop_1(i);\n            }\n        }\n        // strip out multi-column prefix on colId's\n        if (this.gridOptionsWrapper.isGroupMultiAutoColumn()) {\n            var multiColumnPrefix = agGridCommunity.Constants.GROUP_AUTO_COLUMN_ID + \"-\";\n            for (var i = 0; i < sortModel.length; ++i) {\n                if (sortModel[i].colId.indexOf(multiColumnPrefix) > -1) {\n                    sortModel[i].colId = sortModel[i].colId.substr(multiColumnPrefix.length);\n                }\n            }\n        }\n        return sortModel;\n    };\n    ServerSideRowModel.prototype.isSortingWithValueColumn = function (changedColumnsInSort) {\n        var valueColIds = this.columnController.getValueColumns().map(function (col) { return col.getColId(); });\n        for (var i = 0; i < changedColumnsInSort.length; i++) {\n            if (valueColIds.indexOf(changedColumnsInSort[i]) > -1) {\n                return true;\n            }\n        }\n        return false;\n    };\n    ServerSideRowModel.prototype.isSortingWithSecondaryColumn = function (changedColumnsInSort) {\n        if (!this.columnController.getSecondaryColumns()) {\n            return false;\n        }\n        var secondaryColIds = this.columnController.getSecondaryColumns().map(function (col) { return col.getColId(); });\n        for (var i = 0; i < changedColumnsInSort.length; i++) {\n            if (secondaryColIds.indexOf(changedColumnsInSort[i]) > -1) {\n                return true;\n            }\n        }\n        return false;\n    };\n    ServerSideRowModel.prototype.cacheExists = function () {\n        return agGridCommunity._.exists(this.rootNode) && agGridCommunity._.exists(this.rootNode.childrenCache);\n    };\n    ServerSideRowModel.prototype.createDetailNode = function (masterNode) {\n        if (agGridCommunity._.exists(masterNode.detailNode)) {\n            return masterNode.detailNode;\n        }\n        else {\n            var detailNode = new agGridCommunity.RowNode();\n            this.getContext().wireBean(detailNode);\n            detailNode.detail = true;\n            detailNode.selectable = false;\n            detailNode.parent = masterNode;\n            if (agGridCommunity._.exists(masterNode.id)) {\n                detailNode.id = 'detail_' + masterNode.id;\n            }\n            detailNode.data = masterNode.data;\n            detailNode.level = masterNode.level + 1;\n            var defaultDetailRowHeight = 200;\n            var rowHeight = this.gridOptionsWrapper.getRowHeightForNode(detailNode).height;\n            detailNode.rowHeight = rowHeight ? rowHeight : defaultDetailRowHeight;\n            masterNode.detailNode = detailNode;\n            return detailNode;\n        }\n    };\n    ServerSideRowModel.prototype.isLoading = function () {\n        return this.rowNodeBlockLoader ? this.rowNodeBlockLoader.isLoading() : false;\n    };\n    __decorate$1r([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ServerSideRowModel.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1r([\n        agGridCommunity.Autowired('eventService')\n    ], ServerSideRowModel.prototype, \"eventService\", void 0);\n    __decorate$1r([\n        agGridCommunity.Autowired('columnController')\n    ], ServerSideRowModel.prototype, \"columnController\", void 0);\n    __decorate$1r([\n        agGridCommunity.Autowired('filterManager')\n    ], ServerSideRowModel.prototype, \"filterManager\", void 0);\n    __decorate$1r([\n        agGridCommunity.Autowired('sortController')\n    ], ServerSideRowModel.prototype, \"sortController\", void 0);\n    __decorate$1r([\n        agGridCommunity.Autowired('gridApi')\n    ], ServerSideRowModel.prototype, \"gridApi\", void 0);\n    __decorate$1r([\n        agGridCommunity.Autowired('columnApi')\n    ], ServerSideRowModel.prototype, \"columnApi\", void 0);\n    __decorate$1r([\n        agGridCommunity.Autowired('rowRenderer')\n    ], ServerSideRowModel.prototype, \"rowRenderer\", void 0);\n    __decorate$1r([\n        agGridCommunity.PostConstruct\n    ], ServerSideRowModel.prototype, \"postConstruct\", null);\n    __decorate$1r([\n        agGridCommunity.PreDestroy\n    ], ServerSideRowModel.prototype, \"destroyDatasource\", null);\n    __decorate$1r([\n        __param$2(0, agGridCommunity.Qualifier('loggerFactory'))\n    ], ServerSideRowModel.prototype, \"setBeans\", null);\n    ServerSideRowModel = __decorate$1r([\n        agGridCommunity.Bean('rowModel')\n    ], ServerSideRowModel);\n    return ServerSideRowModel;\n}(agGridCommunity.BeanStub));\n\nvar ServerSideRowModelModule = {\n    moduleName: agGridCommunity.ModuleNames.ServerSideRowModelModule,\n    rowModels: { 'serverSide': ServerSideRowModel },\n    dependantModules: [\n        EnterpriseCoreModule\n    ]\n};\n\n// we cannot have 'null' as a key in a JavaScript map,\n// it needs to be a string. so we use this string for\n// storing null values.\nvar NULL_VALUE = '___NULL___';\nvar SetFilterModelValuesType;\n(function (SetFilterModelValuesType) {\n    SetFilterModelValuesType[SetFilterModelValuesType[\"PROVIDED_LIST\"] = 0] = \"PROVIDED_LIST\";\n    SetFilterModelValuesType[SetFilterModelValuesType[\"PROVIDED_CB\"] = 1] = \"PROVIDED_CB\";\n    SetFilterModelValuesType[SetFilterModelValuesType[\"NOT_PROVIDED\"] = 2] = \"NOT_PROVIDED\";\n})(SetFilterModelValuesType || (SetFilterModelValuesType = {}));\nvar SetValueModel = /** @class */ (function () {\n    function SetValueModel(colDef, rowModel, valueGetter, doesRowPassOtherFilters, suppressSorting, modelUpdatedFunc, isLoadingFunc, valueFormatterService, column) {\n        this.suppressSorting = suppressSorting;\n        this.colDef = colDef;\n        this.valueGetter = valueGetter;\n        this.doesRowPassOtherFilters = doesRowPassOtherFilters;\n        this.modelUpdatedFunc = modelUpdatedFunc;\n        this.isLoadingFunc = isLoadingFunc;\n        this.valueFormatterService = valueFormatterService;\n        this.column = column;\n        if (rowModel.getType() === agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {\n            this.clientSideRowModel = rowModel;\n        }\n        this.filterParams = this.colDef.filterParams ? this.colDef.filterParams : {};\n        if (agGridCommunity._.exists(this.filterParams) && agGridCommunity._.exists(this.filterParams.values)) {\n            this.valuesType = Array.isArray(this.filterParams.values) ?\n                SetFilterModelValuesType.PROVIDED_LIST :\n                SetFilterModelValuesType.PROVIDED_CB;\n            this.showingAvailableOnly = this.filterParams.suppressRemoveEntries !== true;\n        }\n        else {\n            this.valuesType = SetFilterModelValuesType.NOT_PROVIDED;\n            this.showingAvailableOnly = true;\n        }\n        this.createAllUniqueValues();\n        this.createAvailableUniqueValues();\n        // by default, no filter, so we display everything\n        this.displayedValues = this.availableUniqueValues;\n        this.miniFilter = null;\n        // we use a map rather than an array for the selected values as the lookup\n        // for a map is much faster than the lookup for an array, especially when\n        // the length of the array is thousands of records long\n        this.selectedValuesMap = {};\n        this.selectAllUsingMiniFilter();\n        this.formatter = this.filterParams.textFormatter ? this.filterParams.textFormatter : agGridCommunity.TextFilter.DEFAULT_FORMATTER;\n    }\n    // if keepSelection not set will always select all filters\n    // if keepSelection set will keep current state of selected filters\n    //    unless selectAll chosen in which case will select all\n    SetValueModel.prototype.refreshAfterNewRowsLoaded = function (keepSelection, everythingSelected) {\n        this.createAllUniqueValues();\n        this.refreshSelection(keepSelection, everythingSelected);\n    };\n    // if keepSelection not set will always select all filters\n    // if keepSelection set will keep current state of selected filters\n    //    unless selectAll chosen in which case will select all\n    SetValueModel.prototype.refreshValues = function (valuesToUse, keepSelection, isSelectAll) {\n        this.setValues(valuesToUse);\n        this.refreshSelection(keepSelection, isSelectAll);\n    };\n    SetValueModel.prototype.refreshSelection = function (keepSelection, isSelectAll) {\n        this.createAvailableUniqueValues();\n        var oldModel = Object.keys(this.selectedValuesMap);\n        this.selectedValuesMap = {};\n        this.processMiniFilter();\n        if (keepSelection) {\n            this.setModel(oldModel, isSelectAll);\n        }\n        else {\n            this.selectAllUsingMiniFilter();\n        }\n    };\n    SetValueModel.prototype.refreshAfterAnyFilterChanged = function () {\n        if (this.showingAvailableOnly) {\n            this.createAvailableUniqueValues();\n            this.processMiniFilter();\n        }\n    };\n    SetValueModel.prototype.createAllUniqueValues = function () {\n        if (this.areValuesSync()) {\n            var valuesToUse = this.extractSyncValuesToUse();\n            this.setValues(valuesToUse);\n            this.filterValuesPromise = agGridCommunity.Promise.resolve([]);\n        }\n        else {\n            this.filterValuesExternalPromise = agGridCommunity.Promise.external();\n            this.filterValuesPromise = this.filterValuesExternalPromise.promise;\n            this.isLoadingFunc(true);\n            this.setValues([]);\n            var callback_1 = this.filterParams.values;\n            var params_1 = {\n                success: this.onAsyncValuesLoaded.bind(this),\n                colDef: this.colDef\n            };\n            window.setTimeout(function () { return callback_1(params_1); }, 0);\n        }\n    };\n    SetValueModel.prototype.onAsyncValuesLoaded = function (values) {\n        this.modelUpdatedFunc(values);\n        this.isLoadingFunc(false);\n        this.filterValuesExternalPromise.resolve(values);\n    };\n    SetValueModel.prototype.areValuesSync = function () {\n        return this.valuesType == SetFilterModelValuesType.PROVIDED_LIST || this.valuesType == SetFilterModelValuesType.NOT_PROVIDED;\n    };\n    SetValueModel.prototype.setValuesType = function (value) {\n        this.valuesType = value;\n    };\n    SetValueModel.prototype.getValuesType = function () {\n        return this.valuesType;\n    };\n    SetValueModel.prototype.setValues = function (valuesToUse) {\n        this.allUniqueValues = valuesToUse;\n        if (!this.suppressSorting) {\n            this.sortValues(this.allUniqueValues);\n        }\n    };\n    SetValueModel.prototype.extractSyncValuesToUse = function () {\n        var valuesToUse;\n        if (this.valuesType == SetFilterModelValuesType.PROVIDED_LIST) {\n            if (Array.isArray(this.filterParams.values)) {\n                valuesToUse = agGridCommunity._.toStrings(this.filterParams.values);\n            }\n            else {\n                // In this case the values are async but have already been resolved, so we can reuse them\n                valuesToUse = this.allUniqueValues;\n            }\n        }\n        else if (this.valuesType == SetFilterModelValuesType.PROVIDED_CB) {\n            throw Error(\"ag-grid: Error extracting values to use. We should not extract the values synchronously when using a callback for the filterParams.values\");\n        }\n        else {\n            var uniqueValuesAsAnyObjects = this.getUniqueValues(false);\n            valuesToUse = agGridCommunity._.toStrings(uniqueValuesAsAnyObjects);\n        }\n        return valuesToUse;\n    };\n    SetValueModel.prototype.createAvailableUniqueValues = function () {\n        var dontCheckAvailableValues = !this.showingAvailableOnly || this.valuesType == SetFilterModelValuesType.PROVIDED_LIST || this.valuesType == SetFilterModelValuesType.PROVIDED_CB;\n        if (dontCheckAvailableValues) {\n            this.availableUniqueValues = this.allUniqueValues;\n            return;\n        }\n        var uniqueValuesAsAnyObjects = this.getUniqueValues(true);\n        this.availableUniqueValues = agGridCommunity._.toStrings(uniqueValuesAsAnyObjects);\n        this.sortValues(this.availableUniqueValues);\n    };\n    SetValueModel.prototype.sortValues = function (values) {\n        if (this.filterParams && this.filterParams.comparator) {\n            values.sort(this.filterParams.comparator);\n        }\n        else if (this.colDef.comparator) {\n            values.sort(this.colDef.comparator);\n        }\n        else {\n            values.sort(agGridCommunity._.defaultComparator);\n        }\n    };\n    SetValueModel.prototype.getUniqueValues = function (filterOutNotAvailable) {\n        var _this = this;\n        var uniqueCheck = {};\n        var result = [];\n        if (!this.clientSideRowModel) {\n            console.error('ag-Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values');\n            return [];\n        }\n        this.clientSideRowModel.forEachLeafNode(function (node) {\n            // only pull values from rows that have data. this means we skip filler group nodes.\n            if (!node.data) {\n                return;\n            }\n            var value = _this.valueGetter(node);\n            if (_this.colDef.keyCreator) {\n                value = _this.colDef.keyCreator({ value: value });\n            }\n            if (value === \"\" || value === undefined) {\n                value = null;\n            }\n            if (filterOutNotAvailable) {\n                if (!_this.doesRowPassOtherFilters(node)) {\n                    return;\n                }\n            }\n            if (value != null && Array.isArray(value)) {\n                for (var j = 0; j < value.length; j++) {\n                    addUniqueValueIfMissing(value[j]);\n                }\n            }\n            else {\n                addUniqueValueIfMissing(value);\n            }\n        });\n        function addUniqueValueIfMissing(value) {\n            if (!uniqueCheck.hasOwnProperty(value)) {\n                result.push(value);\n                uniqueCheck[value] = 1;\n            }\n        }\n        return result;\n    };\n    //sets mini filter. returns true if it changed from last value, otherwise false\n    SetValueModel.prototype.setMiniFilter = function (newMiniFilter) {\n        newMiniFilter = agGridCommunity._.makeNull(newMiniFilter);\n        if (this.miniFilter === newMiniFilter) {\n            //do nothing if filter has not changed\n            return false;\n        }\n        this.miniFilter = newMiniFilter;\n        this.processMiniFilter();\n        return true;\n    };\n    SetValueModel.prototype.getMiniFilter = function () {\n        return this.miniFilter;\n    };\n    SetValueModel.prototype.processMiniFilter = function () {\n        // if no filter, just use the unique values\n        if (this.miniFilter === null) {\n            this.displayedValues = this.availableUniqueValues;\n            return;\n        }\n        // if filter present, we filter down the list\n        this.displayedValues = [];\n        var miniFilter = this.formatter(this.miniFilter);\n        // make upper case to have search case insensitive\n        var miniFilterUpperCase = miniFilter.toUpperCase();\n        //This function encapsulates the logic to check if a string matches the mini filter\n        var matchesFn = function (valueToCheck) {\n            if (valueToCheck == null) {\n                return false;\n            }\n            // allow for case insensitive searches, make both filter and value uppercase\n            var valueUpperCase = valueToCheck.toUpperCase();\n            return valueUpperCase.indexOf(miniFilterUpperCase) >= 0;\n        };\n        for (var i = 0, l = this.availableUniqueValues.length; i < l; i++) {\n            var value = this.availableUniqueValues[i];\n            if (value) {\n                var displayedValue = this.formatter(value.toString());\n                var formattedValue = this.valueFormatterService.formatValue(this.column, null, null, displayedValue);\n                if (matchesFn(displayedValue) || matchesFn(formattedValue)) {\n                    this.displayedValues.push(value);\n                }\n            }\n        }\n    };\n    SetValueModel.prototype.getDisplayedValueCount = function () {\n        return this.displayedValues.length;\n    };\n    SetValueModel.prototype.getDisplayedValue = function (index) {\n        return this.displayedValues[index];\n    };\n    SetValueModel.prototype.selectAllUsingMiniFilter = function () {\n        if (this.miniFilter) {\n            this.selectOn(this.displayedValues);\n        }\n        else {\n            this.selectOn(this.allUniqueValues);\n        }\n    };\n    SetValueModel.prototype.selectOn = function (toSelectOn) {\n        var count = toSelectOn.length;\n        for (var i = 0; i < count; i++) {\n            var key = toSelectOn[i];\n            var safeKey = this.valueToKey(key);\n            this.selectedValuesMap[safeKey] = null;\n        }\n        this.selectedValuesCount = Object.keys(this.selectedValuesMap).length;\n    };\n    SetValueModel.prototype.valueToKey = function (key) {\n        if (key === null) {\n            return NULL_VALUE;\n        }\n        else {\n            return key;\n        }\n    };\n    SetValueModel.prototype.keyToValue = function (value) {\n        if (value === NULL_VALUE) {\n            return null;\n        }\n        else {\n            return value;\n        }\n    };\n    SetValueModel.prototype.isFilterActive = function () {\n        return this.allUniqueValues.length !== this.selectedValuesCount;\n    };\n    SetValueModel.prototype.selectNothingUsingMiniFilter = function () {\n        var _this = this;\n        if (this.miniFilter) {\n            this.displayedValues.forEach(function (it) { return _this.unselectValue(it); });\n        }\n        else {\n            this.selectNothing();\n        }\n    };\n    SetValueModel.prototype.selectNothing = function () {\n        this.selectedValuesMap = {};\n        this.selectedValuesCount = 0;\n    };\n    SetValueModel.prototype.getUniqueValueCount = function () {\n        return this.allUniqueValues.length;\n    };\n    SetValueModel.prototype.getUniqueValue = function (index) {\n        return this.allUniqueValues[index];\n    };\n    SetValueModel.prototype.unselectValue = function (value) {\n        var safeKey = this.valueToKey(value);\n        if (this.selectedValuesMap[safeKey] !== undefined) {\n            delete this.selectedValuesMap[safeKey];\n            this.selectedValuesCount--;\n        }\n    };\n    SetValueModel.prototype.selectAllFromMiniFilter = function () {\n        this.selectNothing();\n        this.selectAllUsingMiniFilter();\n    };\n    SetValueModel.prototype.selectValue = function (value) {\n        var safeKey = this.valueToKey(value);\n        if (this.selectedValuesMap[safeKey] === undefined) {\n            this.selectedValuesMap[safeKey] = null;\n            this.selectedValuesCount++;\n        }\n    };\n    SetValueModel.prototype.isValueSelected = function (value) {\n        var safeKey = this.valueToKey(value);\n        return this.selectedValuesMap[safeKey] !== undefined;\n    };\n    SetValueModel.prototype.isEverythingSelected = function () {\n        var _this = this;\n        if (this.miniFilter) {\n            return this.displayedValues.filter(function (it) { return _this.isValueSelected(it); }).length === this.displayedValues.length;\n        }\n        else {\n            return this.allUniqueValues.length === this.selectedValuesCount;\n        }\n    };\n    SetValueModel.prototype.isNothingSelected = function () {\n        var _this = this;\n        if (this.miniFilter) {\n            return this.displayedValues.filter(function (it) { return _this.isValueSelected(it); }).length === 0;\n        }\n        else {\n            return this.selectedValuesCount === 0;\n        }\n    };\n    SetValueModel.prototype.getModel = function () {\n        var _this = this;\n        if (!this.isFilterActive()) {\n            return null;\n        }\n        var selectedValues = [];\n        agGridCommunity._.iterateObject(this.selectedValuesMap, function (key) {\n            var value = _this.keyToValue(key);\n            selectedValues.push(value);\n        });\n        return selectedValues;\n    };\n    SetValueModel.prototype.setModel = function (model, isSelectAll) {\n        var _this = this;\n        if (isSelectAll === void 0) { isSelectAll = false; }\n        if (this.areValuesSync()) {\n            this.setSyncModel(model, isSelectAll);\n        }\n        else {\n            this.filterValuesExternalPromise.promise.then(function (values) {\n                _this.setSyncModel(model, isSelectAll);\n                _this.modelUpdatedFunc(values, model);\n            });\n        }\n    };\n    SetValueModel.prototype.setSyncModel = function (model, isSelectAll) {\n        if (isSelectAll === void 0) { isSelectAll = false; }\n        if (model && !isSelectAll) {\n            this.selectNothingUsingMiniFilter();\n            for (var i = 0; i < model.length; i++) {\n                var rawValue = model[i];\n                var value = this.keyToValue(rawValue);\n                if (this.allUniqueValues.indexOf(value) >= 0) {\n                    this.selectValue(value);\n                }\n            }\n        }\n        else {\n            this.selectAllUsingMiniFilter();\n        }\n    };\n    SetValueModel.prototype.onFilterValuesReady = function (callback) {\n        //This guarantees that if the user is racing to set values async into the set filter, only the first instance\n        //will be used\n        // ie Values are async and the user manually wants to override them before the retrieval of values is triggered\n        // (set filter values in the following example)\n        // http://plnkr.co/edit/eFka7ynvPj68tL3VJFWf?p=preview\n        this.filterValuesPromise.firstOneOnly(callback);\n    };\n    return SetValueModel;\n}());\n\nvar __extends$24 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1s = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SetFilterListItem = /** @class */ (function (_super) {\n    __extends$24(SetFilterListItem, _super);\n    function SetFilterListItem(value, column) {\n        var _this = _super.call(this, SetFilterListItem.TEMPLATE) || this;\n        _this.selected = true;\n        _this.value = value;\n        _this.column = column;\n        return _this;\n    }\n    SetFilterListItem.prototype.useCellRenderer = function (target, eTarget, params) {\n        var cellRendererPromise = this.userComponentFactory.newCellRenderer(target.filterParams, params);\n        if (cellRendererPromise != null) {\n            agGridCommunity._.bindCellRendererToHtmlElement(cellRendererPromise, eTarget);\n        }\n        else {\n            if (params.valueFormatted == null && params.value == null) {\n                var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n                eTarget.innerText = '(' + localeTextFunc('blanks', 'Blanks') + ')';\n            }\n            else {\n                eTarget.innerText = params.valueFormatted != null ? params.valueFormatted : params.value;\n            }\n        }\n        return cellRendererPromise;\n    };\n    SetFilterListItem.prototype.init = function () {\n        var _this = this;\n        this.eCheckedIcon = agGridCommunity._.createIconNoSpan('checkboxChecked', this.gridOptionsWrapper, this.column);\n        this.eUncheckedIcon = agGridCommunity._.createIconNoSpan('checkboxUnchecked', this.gridOptionsWrapper, this.column);\n        this.eCheckbox = this.queryForHtmlElement('.ag-filter-checkbox');\n        if (this.gridOptionsWrapper.useNativeCheckboxes()) {\n            this.eNativeCheckbox = document.createElement('input');\n            this.eNativeCheckbox.type = 'checkbox';\n            this.eNativeCheckbox.className = 'ag-native-checkbox';\n            this.eCheckbox.appendChild(this.eNativeCheckbox);\n        }\n        this.eClickableArea = this.getGui();\n        this.updateCheckboxIcon();\n        this.render();\n        var listener = function (mouseEvent) {\n            mouseEvent.preventDefault();\n            agGridCommunity._.addAgGridEventPath(mouseEvent);\n            _this.selected = !_this.selected;\n            _this.updateCheckboxIcon();\n            var event = {\n                type: SetFilterListItem.EVENT_SELECTED\n            };\n            return _this.dispatchEvent(event);\n        };\n        this.addDestroyableEventListener(this.eClickableArea, 'click', listener);\n    };\n    SetFilterListItem.prototype.isSelected = function () {\n        return this.selected;\n    };\n    SetFilterListItem.prototype.setSelected = function (selected) {\n        this.selected = selected;\n        this.updateCheckboxIcon();\n    };\n    SetFilterListItem.prototype.updateCheckboxIcon = function () {\n        if (this.gridOptionsWrapper.useNativeCheckboxes()) {\n            this.eNativeCheckbox.checked = this.isSelected();\n        }\n        else {\n            agGridCommunity._.clearElement(this.eCheckbox);\n            if (this.isSelected()) {\n                this.eCheckbox.appendChild(this.eCheckedIcon);\n            }\n            else {\n                this.eCheckbox.appendChild(this.eUncheckedIcon);\n            }\n        }\n    };\n    SetFilterListItem.prototype.render = function () {\n        var _this = this;\n        var valueElement = this.queryForHtmlElement('.ag-filter-value');\n        var valueFormatted = this.valueFormatterService.formatValue(this.column, null, null, this.value);\n        var colDef = this.column.getColDef();\n        var params = {\n            value: this.value,\n            valueFormatted: valueFormatted,\n            api: this.gridOptionsWrapper.getApi()\n        };\n        var componentPromise = this.useCellRenderer(colDef, valueElement, params);\n        if (!componentPromise) {\n            return;\n        }\n        componentPromise.then(function (component) {\n            if (component && component.destroy) {\n                _this.addDestroyFunc(component.destroy.bind(component));\n            }\n        });\n    };\n    SetFilterListItem.EVENT_SELECTED = 'selected';\n    SetFilterListItem.TEMPLATE = \"<label class=\\\"ag-set-filter-item\\\">\\n            <div class=\\\"ag-filter-checkbox\\\"></div>\\n            <span class=\\\"ag-filter-value\\\"></span>\\n        </label>\";\n    __decorate$1s([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], SetFilterListItem.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1s([\n        agGridCommunity.Autowired('valueFormatterService')\n    ], SetFilterListItem.prototype, \"valueFormatterService\", void 0);\n    __decorate$1s([\n        agGridCommunity.Autowired('userComponentFactory')\n    ], SetFilterListItem.prototype, \"userComponentFactory\", void 0);\n    __decorate$1s([\n        agGridCommunity.PostConstruct\n    ], SetFilterListItem.prototype, \"init\", null);\n    return SetFilterListItem;\n}(agGridCommunity.Component));\n\nvar __extends$25 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1t = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar CheckboxState;\n(function (CheckboxState) {\n    CheckboxState[CheckboxState[\"CHECKED\"] = 0] = \"CHECKED\";\n    CheckboxState[CheckboxState[\"UNCHECKED\"] = 1] = \"UNCHECKED\";\n    CheckboxState[CheckboxState[\"INTERMEDIATE\"] = 2] = \"INTERMEDIATE\";\n})(CheckboxState || (CheckboxState = {}));\nvar SetFilter = /** @class */ (function (_super) {\n    __extends$25(SetFilter, _super);\n    function SetFilter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // unlike the simple filter's, nothing in the set filter UI shows/hides.\n    // maybe this method belongs in abstractSimpleFilter???\n    SetFilter.prototype.updateUiVisibility = function () { };\n    SetFilter.prototype.createBodyTemplate = function () {\n        var translate = this.gridOptionsWrapper.getLocaleTextFunc();\n        return \"<div ref=\\\"ag-filter-loading\\\" class=\\\"loading-filter ag-hidden\\\">\" + translate('loadingOoo', 'Loading...') + \"</div>\\n                <div>\\n                    <div class=\\\"ag-filter-header-container\\\" role=\\\"presentation\\\">\\n                        <div class=\\\"ag-input-wrapper\\\" id=\\\"ag-mini-filter\\\" role=\\\"presentation\\\">\\n                            <input ref=\\\"eMiniFilter\\\" class=\\\"ag-filter-filter\\\" type=\\\"text\\\" placeholder=\\\"\" + translate('searchOoo', 'Search...') + \"\\\"/>\\n                        </div>\\n                        <label ref=\\\"eSelectAllContainer\\\" class=\\\"ag-set-filter-item\\\">\\n                            <div ref=\\\"eSelectAll\\\" class=\\\"ag-filter-checkbox\\\"></div><span class=\\\"ag-filter-value\\\">(\" + translate('selectAll', 'Select All') + \")</span>\\n                        </label>\\n                    </div>\\n                    <div ref=\\\"eSetFilterList\\\" class=\\\"ag-set-filter-list\\\" role=\\\"presentation\\\"></div>\\n                </div>\";\n    };\n    SetFilter.prototype.resetUiToDefaults = function () {\n        this.setMiniFilter(null);\n        this.valueModel.setModel(null, true);\n        this.selectEverything();\n    };\n    SetFilter.prototype.setModelIntoUi = function (model) {\n        this.resetUiToDefaults();\n        if (model) {\n            if (model instanceof Array) {\n                var message_1 = 'ag-Grid: The Set Filter Model is no longer an array and models as arrays are ' +\n                    'deprecated. Please check the docs on what the set filter model looks like. Future versions of ' +\n                    'ag-Grid will have the array version of the model removed.';\n                agGridCommunity._.doOnce(function () { return console.warn(message_1); }, 'setFilter.modelAsArray');\n            }\n            // also supporting old filter model for backwards compatibility\n            var newValues = (model instanceof Array) ? model : model.values;\n            this.valueModel.setModel(newValues);\n            this.updateSelectAll();\n            this.virtualList.refresh();\n        }\n    };\n    SetFilter.prototype.getModelFromUi = function () {\n        var values = this.valueModel.getModel();\n        if (!values) {\n            return null;\n        }\n        if (this.gridOptionsWrapper.isEnableOldSetFilterModel()) {\n            // this is a hack, it breaks casting rules, to apply with old model\n            return values;\n        }\n        else {\n            return {\n                values: values,\n                filterType: 'set'\n            };\n        }\n    };\n    SetFilter.prototype.areModelsEqual = function (a, b) {\n        return false;\n    };\n    SetFilter.prototype.setParams = function (params) {\n        _super.prototype.setParams.call(this, params);\n        this.checkSetFilterDeprecatedParams(params);\n        this.setFilterParams = params;\n        this.eCheckedIcon = agGridCommunity._.createIconNoSpan('checkboxChecked', this.gridOptionsWrapper, this.setFilterParams.column);\n        this.eUncheckedIcon = agGridCommunity._.createIconNoSpan('checkboxUnchecked', this.gridOptionsWrapper, this.setFilterParams.column);\n        this.eIndeterminateCheckedIcon = agGridCommunity._.createIconNoSpan('checkboxIndeterminate', this.gridOptionsWrapper, this.setFilterParams.column);\n        if (this.gridOptionsWrapper.useNativeCheckboxes()) {\n            this.eSelectAllCheckbox = document.createElement(\"input\");\n            this.eSelectAllCheckbox.type = \"checkbox\";\n            this.eSelectAllCheckbox.className = \"ag-native-checkbox\";\n            this.eSelectAll.appendChild(this.eSelectAllCheckbox);\n        }\n        this.initialiseFilterBodyUi();\n        var syncValuesAfterDataChange = !params.suppressSyncValuesAfterDataChange\n            // sync values only with CSRM\n            && this.rowModel.getType() === agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE\n            // sync only needed if user not providing values\n            && !params.values;\n        if (syncValuesAfterDataChange) {\n            this.setupSyncValuesAfterDataChange();\n        }\n    };\n    SetFilter.prototype.checkSetFilterDeprecatedParams = function (params) {\n        if (params.syncValuesLikeExcel) {\n            var message_2 = 'ag-Grid: since version 22.x, the Set Filter param syncValuesLikeExcel is no longer' +\n                ' used as this is the default behaviour. To turn this default behaviour off, use the' +\n                ' param suppressSyncValuesAfterDataChange';\n            agGridCommunity._.doOnce(function () { return console.warn(message_2); }, 'syncValuesLikeExcel deprecated');\n        }\n        if (params.selectAllOnMiniFilter) {\n            var message_3 = 'ag-Grid: since version 22.x, the Set Filter param selectAllOnMiniFilter is no longer' +\n                ' used as this is the default behaviour.';\n            agGridCommunity._.doOnce(function () { return console.warn(message_3); }, 'selectAllOnMiniFilter deprecated');\n        }\n    };\n    SetFilter.prototype.resetFilterValuesAndReapplyModel = function () {\n        var modelBeforeUpdate = this.getModel();\n        this.resetFilterValues();\n        if (modelBeforeUpdate) {\n            this.setModel(modelBeforeUpdate);\n        }\n    };\n    SetFilter.prototype.setupSyncValuesAfterDataChange = function () {\n        var _this = this;\n        var col = this.setFilterParams.column;\n        var rowDataUpdatedListener = function () {\n            _this.resetFilterValuesAndReapplyModel();\n        };\n        var cellValueChangedListener = function (event) {\n            // only interested in changes to do with this column\n            if (event.column !== col) {\n                return;\n            }\n            _this.resetFilterValuesAndReapplyModel();\n        };\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_ROW_DATA_UPDATED, rowDataUpdatedListener);\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_CELL_VALUE_CHANGED, cellValueChangedListener);\n    };\n    SetFilter.prototype.updateCheckboxIcon = function () {\n        if (this.gridOptionsWrapper.useNativeCheckboxes()) {\n            this.eSelectAllCheckbox.checked = this.selectAllState === CheckboxState.CHECKED;\n            this.eSelectAllCheckbox.indeterminate = this.selectAllState === CheckboxState.INTERMEDIATE;\n        }\n        else {\n            agGridCommunity._.clearElement(this.eSelectAll);\n            var icon = void 0;\n            switch (this.selectAllState) {\n                case CheckboxState.INTERMEDIATE:\n                    icon = this.eIndeterminateCheckedIcon;\n                    break;\n                case CheckboxState.CHECKED:\n                    icon = this.eCheckedIcon;\n                    break;\n                case CheckboxState.UNCHECKED:\n                    icon = this.eUncheckedIcon;\n                    break;\n                default: // default happens when initialising for first time\n                    icon = this.eCheckedIcon;\n                    break;\n            }\n            this.eSelectAll.appendChild(icon);\n        }\n    };\n    SetFilter.prototype.setLoading = function (loading) {\n        agGridCommunity._.setDisplayed(this.eFilterLoading, loading);\n    };\n    SetFilter.prototype.initialiseFilterBodyUi = function () {\n        var _this = this;\n        this.virtualList = new agGridCommunity.VirtualList();\n        this.getContext().wireBean(this.virtualList);\n        var eSetFilterList = this.getRefElement('eSetFilterList');\n        if (eSetFilterList) {\n            eSetFilterList.appendChild(this.virtualList.getGui());\n        }\n        this.virtualList.setComponentCreator(this.createSetListItem.bind(this));\n        this.valueModel = new SetValueModel(this.setFilterParams.colDef, this.setFilterParams.rowModel, this.setFilterParams.valueGetter, this.setFilterParams.doesRowPassOtherFilter, this.setFilterParams.suppressSorting, function (values, toSelect) { return _this.setFilterValues(values, toSelect ? false : true, toSelect ? true : false, toSelect); }, this.setLoading.bind(this), this.valueFormatterService, this.setFilterParams.column);\n        this.virtualList.setModel(new ModelWrapper(this.valueModel));\n        agGridCommunity._.setDisplayed(this.getGui().querySelector('#ag-mini-filter'), !this.setFilterParams.suppressMiniFilter);\n        this.eMiniFilter.value = this.valueModel.getMiniFilter();\n        this.addDestroyableEventListener(this.eMiniFilter, 'input', this.onMiniFilterInput.bind(this));\n        this.addDestroyableEventListener(this.eMiniFilter, 'keypress', this.onMiniFilterKeyPress.bind(this));\n        this.updateCheckboxIcon();\n        this.addDestroyableEventListener(this.eSelectAllContainer, 'click', this.onSelectAll.bind(this));\n        this.updateSelectAll();\n        if (this.setFilterParams.suppressSelectAll) {\n            agGridCommunity._.setDisplayed(this.eSelectAllContainer, false);\n        }\n        this.virtualList.refresh();\n    };\n    SetFilter.prototype.createSetListItem = function (value) {\n        var _this = this;\n        var listItem = new SetFilterListItem(value, this.setFilterParams.column);\n        this.getContext().wireBean(listItem);\n        listItem.setSelected(this.valueModel.isValueSelected(value));\n        listItem.addEventListener(SetFilterListItem.EVENT_SELECTED, function () {\n            _this.onItemSelected(value, listItem.isSelected());\n        });\n        return listItem;\n    };\n    // we need to have the gui attached before we can draw the virtual rows, as the\n    // virtual row logic needs info about the gui state\n    SetFilter.prototype.afterGuiAttached = function (params) {\n        this.virtualList.refresh();\n        this.eMiniFilter.focus();\n    };\n    SetFilter.prototype.refreshVirtualList = function () {\n        this.virtualList.refresh();\n    };\n    SetFilter.prototype.applyModel = function () {\n        var _this = this;\n        var res = _super.prototype.applyModel.call(this);\n        // keep the appliedModelValuesMapped in sync with the applied model\n        var appliedModel = this.getModel();\n        if (appliedModel) {\n            this.appliedModelValuesMapped = {};\n            appliedModel.values.forEach(function (value) { return _this.appliedModelValuesMapped[value] = true; });\n        }\n        else {\n            this.appliedModelValuesMapped = undefined;\n        }\n        return res;\n    };\n    SetFilter.prototype.doesFilterPass = function (params) {\n        // should never happen, if filter model not set, then this method should never be called\n        if (!this.appliedModelValuesMapped) {\n            return true;\n        }\n        var value = this.setFilterParams.valueGetter(params.node);\n        if (this.setFilterParams.colDef.keyCreator) {\n            value = this.setFilterParams.colDef.keyCreator({ value: value });\n        }\n        value = agGridCommunity._.makeNull(value);\n        if (Array.isArray(value)) {\n            for (var i = 0; i < value.length; i++) {\n                var valueExistsInMap = !!this.appliedModelValuesMapped[value[i]];\n                if (valueExistsInMap) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        return !!this.appliedModelValuesMapped[value];\n    };\n    SetFilter.prototype.onNewRowsLoaded = function () {\n        var valuesType = this.valueModel.getValuesType();\n        var valuesTypeProvided = valuesType === SetFilterModelValuesType.PROVIDED_CB\n            || valuesType === SetFilterModelValuesType.PROVIDED_LIST;\n        // if the user is providing values, and we are keeping the previous selection, then\n        // loading new rows into the grid should have no impact.\n        var newRowsActionKeep = this.isNewRowsActionKeep();\n        if (newRowsActionKeep && valuesTypeProvided) {\n            return;\n        }\n        var everythingSelected = !this.getModel();\n        // default is reset\n        this.valueModel.refreshAfterNewRowsLoaded(newRowsActionKeep, everythingSelected);\n        this.updateSelectAll();\n        this.virtualList.refresh();\n        this.applyModel();\n    };\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Public method provided so the user can change the value of the filter once\n     * the filter has been already started\n     * @param options The options to use.\n     * @param selectAll If by default all the values should be selected.\n     * @param notify If we should let know the model that the values of the filter have changed\n     * @param toSelect The subset of options to subselect\n     */\n    SetFilter.prototype.setFilterValues = function (options, selectAll, notify, toSelect) {\n        var _this = this;\n        if (selectAll === void 0) { selectAll = false; }\n        if (notify === void 0) { notify = true; }\n        this.valueModel.onFilterValuesReady(function () {\n            var keepSelection = _this.setFilterParams && _this.setFilterParams.newRowsAction === 'keep';\n            _this.valueModel.setValuesType(SetFilterModelValuesType.PROVIDED_LIST);\n            _this.valueModel.refreshValues(options, keepSelection, selectAll);\n            _this.updateSelectAll();\n            var actualToSelect = toSelect ? toSelect : options;\n            actualToSelect.forEach(function (option) { return _this.valueModel.selectValue(option); });\n            _this.virtualList.refresh();\n            if (notify) {\n                // this.onUiChangedListener(true);\n                _this.onUiChanged();\n            }\n        });\n    };\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * Public method provided so the user can reset the values of the filter once that it has started\n     * @param options The options to use.\n     */\n    SetFilter.prototype.resetFilterValues = function () {\n        this.valueModel.setValuesType(SetFilterModelValuesType.NOT_PROVIDED);\n        this.onNewRowsLoaded();\n    };\n    SetFilter.prototype.onAnyFilterChanged = function () {\n        this.valueModel.refreshAfterAnyFilterChanged();\n        this.virtualList.refresh();\n    };\n    SetFilter.prototype.updateSelectAll = function () {\n        if (this.valueModel.isEverythingSelected()) {\n            this.selectAllState = CheckboxState.CHECKED;\n        }\n        else if (this.valueModel.isNothingSelected()) {\n            this.selectAllState = CheckboxState.UNCHECKED;\n        }\n        else {\n            this.selectAllState = CheckboxState.INTERMEDIATE;\n        }\n        this.updateCheckboxIcon();\n    };\n    SetFilter.prototype.onMiniFilterKeyPress = function (e) {\n        if (agGridCommunity._.isKeyPressed(e, agGridCommunity.Constants.KEY_ENTER)) {\n            this.onEnterKeyOnMiniFilter();\n        }\n    };\n    SetFilter.prototype.onEnterKeyOnMiniFilter = function () {\n        this.valueModel.selectAllFromMiniFilter();\n        this.virtualList.refresh();\n        this.updateSelectAll();\n        this.onUiChanged();\n    };\n    SetFilter.prototype.onMiniFilterInput = function () {\n        var miniFilterChanged = this.valueModel.setMiniFilter(this.eMiniFilter.value);\n        if (miniFilterChanged) {\n            this.virtualList.refresh();\n        }\n        this.updateSelectAll();\n    };\n    SetFilter.prototype.onSelectAll = function (event) {\n        event.preventDefault();\n        agGridCommunity._.addAgGridEventPath(event);\n        if (this.selectAllState === CheckboxState.CHECKED) {\n            this.selectAllState = CheckboxState.UNCHECKED;\n        }\n        else {\n            this.selectAllState = CheckboxState.CHECKED;\n        }\n        this.doSelectAll();\n    };\n    SetFilter.prototype.doSelectAll = function () {\n        var checked = this.selectAllState === CheckboxState.CHECKED;\n        if (checked) {\n            this.valueModel.selectAllUsingMiniFilter();\n        }\n        else {\n            this.valueModel.selectNothingUsingMiniFilter();\n        }\n        this.virtualList.refresh();\n        this.onUiChanged();\n        this.updateSelectAll();\n    };\n    SetFilter.prototype.onItemSelected = function (value, selected) {\n        if (selected) {\n            this.valueModel.selectValue(value);\n        }\n        else {\n            this.valueModel.unselectValue(value);\n        }\n        this.updateSelectAll();\n        this.onUiChanged();\n    };\n    SetFilter.prototype.setMiniFilter = function (newMiniFilter) {\n        this.valueModel.setMiniFilter(newMiniFilter);\n        this.eMiniFilter.value = this.valueModel.getMiniFilter();\n    };\n    SetFilter.prototype.getMiniFilter = function () {\n        return this.valueModel.getMiniFilter();\n    };\n    SetFilter.prototype.selectEverything = function () {\n        this.valueModel.selectAllUsingMiniFilter();\n        this.updateSelectAll();\n        this.virtualList.refresh();\n    };\n    SetFilter.prototype.selectNothing = function () {\n        this.valueModel.selectNothingUsingMiniFilter();\n        this.updateSelectAll();\n        this.virtualList.refresh();\n    };\n    SetFilter.prototype.unselectValue = function (value) {\n        this.valueModel.unselectValue(value);\n        this.updateSelectAll();\n        this.virtualList.refresh();\n    };\n    SetFilter.prototype.selectValue = function (value) {\n        this.valueModel.selectValue(value);\n        this.updateSelectAll();\n        this.virtualList.refresh();\n    };\n    SetFilter.prototype.isValueSelected = function (value) {\n        return this.valueModel.isValueSelected(value);\n    };\n    SetFilter.prototype.isEverythingSelected = function () {\n        return this.valueModel.isEverythingSelected();\n    };\n    SetFilter.prototype.isNothingSelected = function () {\n        return this.valueModel.isNothingSelected();\n    };\n    SetFilter.prototype.getUniqueValueCount = function () {\n        return this.valueModel.getUniqueValueCount();\n    };\n    SetFilter.prototype.getUniqueValue = function (index) {\n        return this.valueModel.getUniqueValue(index);\n    };\n    __decorate$1t([\n        agGridCommunity.RefSelector('eSelectAll')\n    ], SetFilter.prototype, \"eSelectAll\", void 0);\n    __decorate$1t([\n        agGridCommunity.RefSelector('eSelectAllContainer')\n    ], SetFilter.prototype, \"eSelectAllContainer\", void 0);\n    __decorate$1t([\n        agGridCommunity.RefSelector('eMiniFilter')\n    ], SetFilter.prototype, \"eMiniFilter\", void 0);\n    __decorate$1t([\n        agGridCommunity.RefSelector('ag-filter-loading')\n    ], SetFilter.prototype, \"eFilterLoading\", void 0);\n    __decorate$1t([\n        agGridCommunity.Autowired('valueFormatterService')\n    ], SetFilter.prototype, \"valueFormatterService\", void 0);\n    __decorate$1t([\n        agGridCommunity.Autowired('eventService')\n    ], SetFilter.prototype, \"eventService\", void 0);\n    return SetFilter;\n}(agGridCommunity.ProvidedFilter));\nvar ModelWrapper = /** @class */ (function () {\n    function ModelWrapper(model) {\n        this.model = model;\n    }\n    ModelWrapper.prototype.getRowCount = function () {\n        return this.model.getDisplayedValueCount();\n    };\n    ModelWrapper.prototype.getRow = function (index) {\n        return this.model.getDisplayedValue(index);\n    };\n    return ModelWrapper;\n}());\n\nvar __extends$26 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1u = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SetFloatingFilterComp = /** @class */ (function (_super) {\n    __extends$26(SetFloatingFilterComp, _super);\n    function SetFloatingFilterComp() {\n        return _super.call(this, \"<div class=\\\"ag-input-wrapper\\\" role=\\\"presentation\\\"><input ref=\\\"eFloatingFilterText\\\" class=\\\"ag-floating-filter-input\\\"></div>\") || this;\n    }\n    SetFloatingFilterComp.prototype.init = function (params) {\n        this.eFloatingFilterText.disabled = true;\n        this.column = params.column;\n    };\n    SetFloatingFilterComp.prototype.onParentModelChanged = function (parentModel) {\n        var _this = this;\n        if (!parentModel) {\n            this.eFloatingFilterText.value = '';\n            return;\n        }\n        // also supporting old filter model for backwards compatibility\n        var values = (parentModel instanceof Array) ? parentModel : parentModel.values;\n        if (!values || values.length === 0) {\n            this.eFloatingFilterText.value = '';\n            return;\n        }\n        // format all the values, if a formatter is provided\n        var formattedValues = values.map(function (value) {\n            var formattedValue = _this.valueFormatterService.formatValue(_this.column, null, null, value);\n            return formattedValue != null ? formattedValue : value;\n        });\n        var arrayToDisplay = formattedValues.length > 10 ? formattedValues.slice(0, 10).concat('...') : formattedValues;\n        var valuesString = \"(\" + values.length + \") \" + arrayToDisplay.join(\",\");\n        this.eFloatingFilterText.value = valuesString;\n    };\n    __decorate$1u([\n        agGridCommunity.RefSelector('eFloatingFilterText')\n    ], SetFloatingFilterComp.prototype, \"eFloatingFilterText\", void 0);\n    __decorate$1u([\n        agGridCommunity.Autowired('valueFormatterService')\n    ], SetFloatingFilterComp.prototype, \"valueFormatterService\", void 0);\n    return SetFloatingFilterComp;\n}(agGridCommunity.Component));\n\nvar SetFilterModule = {\n    moduleName: agGridCommunity.ModuleNames.SetFilterModule,\n    beans: [],\n    userComponents: [\n        { componentName: 'agSetColumnFilter', componentClass: SetFilter },\n        { componentName: 'agSetColumnFloatingFilter', componentClass: SetFloatingFilterComp },\n    ],\n    dependantModules: [\n        EnterpriseCoreModule\n    ]\n};\n\nvar __decorate$1v = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar StatusBarService = /** @class */ (function () {\n    // tslint:disable-next-line\n    function StatusBarService() {\n        this.allComponents = {};\n    }\n    StatusBarService.prototype.registerStatusPanel = function (key, component) {\n        this.allComponents[key] = component;\n    };\n    StatusBarService.prototype.getStatusPanel = function (key) {\n        return this.allComponents[key];\n    };\n    StatusBarService = __decorate$1v([\n        agGridCommunity.Bean('statusBarService')\n    ], StatusBarService);\n    return StatusBarService;\n}());\n\nvar __extends$27 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1w = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar StatusBar = /** @class */ (function (_super) {\n    __extends$27(StatusBar, _super);\n    function StatusBar() {\n        return _super.call(this, StatusBar.TEMPLATE) || this;\n    }\n    StatusBar.prototype.postConstruct = function () {\n        if (this.gridOptions.statusBar && this.gridOptions.statusBar.statusPanels) {\n            var leftStatusPanelComponents = this.gridOptions.statusBar.statusPanels\n                .filter(function (componentConfig) { return componentConfig.align === 'left'; });\n            this.createAndRenderComponents(leftStatusPanelComponents, this.eStatusBarLeft);\n            var centerStatusPanelComponents = this.gridOptions.statusBar.statusPanels\n                .filter(function (componentConfig) { return componentConfig.align === 'center'; });\n            this.createAndRenderComponents(centerStatusPanelComponents, this.eStatusBarCenter);\n            var rightStatusPanelComponents = this.gridOptions.statusBar.statusPanels\n                .filter(function (componentConfig) { return (!componentConfig.align || componentConfig.align === 'right'); });\n            this.createAndRenderComponents(rightStatusPanelComponents, this.eStatusBarRight);\n        }\n    };\n    StatusBar.prototype.createAndRenderComponents = function (statusBarComponents, ePanelComponent) {\n        var _this = this;\n        var componentDetails = [];\n        statusBarComponents.forEach(function (componentConfig) {\n            var params = {\n                api: _this.gridOptionsWrapper.getApi(),\n                columnApi: _this.gridOptionsWrapper.getColumnApi(),\n                context: _this.gridOptionsWrapper.getContext()\n            };\n            var promise = _this.userComponentFactory.newStatusPanelComponent(componentConfig, params);\n            componentDetails.push({\n                // default to the component name if no key supplied\n                key: componentConfig.key || componentConfig.statusPanel,\n                promise: promise\n            });\n        });\n        agGridCommunity.Promise.all(componentDetails.map(function (details) { return details.promise; }))\n            .then(function () {\n            componentDetails.forEach(function (componentDetail) {\n                componentDetail.promise.then(function (component) {\n                    var destroyFunc = function () {\n                        if (component.destroy) {\n                            component.destroy();\n                        }\n                    };\n                    if (_this.isAlive()) {\n                        _this.statusBarService.registerStatusPanel(componentDetail.key, component);\n                        ePanelComponent.appendChild(component.getGui());\n                        _this.addDestroyFunc(destroyFunc);\n                    }\n                    else {\n                        destroyFunc();\n                    }\n                });\n            });\n        });\n    };\n    StatusBar.TEMPLATE = \"<div class=\\\"ag-status-bar\\\">\\n        <div ref=\\\"eStatusBarLeft\\\" class=\\\"ag-status-bar-left\\\"></div>\\n        <div ref=\\\"eStatusBarCenter\\\" class=\\\"ag-status-bar-center\\\"></div>\\n        <div ref=\\\"eStatusBarRight\\\" class=\\\"ag-status-bar-right\\\"></div>\\n    </div>\";\n    __decorate$1w([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], StatusBar.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1w([\n        agGridCommunity.Autowired('gridOptions')\n    ], StatusBar.prototype, \"gridOptions\", void 0);\n    __decorate$1w([\n        agGridCommunity.Autowired('userComponentFactory')\n    ], StatusBar.prototype, \"userComponentFactory\", void 0);\n    __decorate$1w([\n        agGridCommunity.Autowired('statusBarService')\n    ], StatusBar.prototype, \"statusBarService\", void 0);\n    __decorate$1w([\n        agGridCommunity.RefSelector('eStatusBarLeft')\n    ], StatusBar.prototype, \"eStatusBarLeft\", void 0);\n    __decorate$1w([\n        agGridCommunity.RefSelector('eStatusBarCenter')\n    ], StatusBar.prototype, \"eStatusBarCenter\", void 0);\n    __decorate$1w([\n        agGridCommunity.RefSelector('eStatusBarRight')\n    ], StatusBar.prototype, \"eStatusBarRight\", void 0);\n    __decorate$1w([\n        agGridCommunity.PostConstruct\n    ], StatusBar.prototype, \"postConstruct\", null);\n    return StatusBar;\n}(agGridCommunity.Component));\n\nvar __extends$28 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1x = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar NameValueComp = /** @class */ (function (_super) {\n    __extends$28(NameValueComp, _super);\n    function NameValueComp() {\n        return _super.call(this, NameValueComp.TEMPLATE) || this;\n    }\n    NameValueComp.prototype.setLabel = function (key, defaultValue) {\n        // we want to hide until the first value comes in\n        this.setDisplayed(false);\n        var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n        this.eLabel.innerHTML = localeTextFunc(key, defaultValue);\n    };\n    NameValueComp.prototype.setValue = function (value) {\n        this.eValue.innerHTML = value;\n    };\n    NameValueComp.TEMPLATE = \"<div class=\\\"ag-name-value\\\">  \\n            <span ref=\\\"eLabel\\\"></span>:&nbsp;\\n            <span ref=\\\"eValue\\\" class=\\\"ag-name-value-value\\\"></span>\\n        </div>\";\n    __decorate$1x([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], NameValueComp.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1x([\n        agGridCommunity.RefSelector('eLabel')\n    ], NameValueComp.prototype, \"eLabel\", void 0);\n    __decorate$1x([\n        agGridCommunity.RefSelector('eValue')\n    ], NameValueComp.prototype, \"eValue\", void 0);\n    return NameValueComp;\n}(agGridCommunity.Component));\n\nvar __extends$29 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1y = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar TotalAndFilteredRowsComp = /** @class */ (function (_super) {\n    __extends$29(TotalAndFilteredRowsComp, _super);\n    function TotalAndFilteredRowsComp() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TotalAndFilteredRowsComp.prototype.postConstruct = function () {\n        // this component is only really useful with client side row model\n        if (this.gridApi.getModel().getType() !== 'clientSide') {\n            console.warn(\"ag-Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.\");\n            return;\n        }\n        this.setLabel('totalAndFilteredRows', 'Rows');\n        this.addCssClass('ag-status-panel');\n        this.addCssClass('ag-status-panel-total-and-filtered-row-count');\n        this.setDisplayed(true);\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_MODEL_UPDATED, this.onDataChanged.bind(this));\n    };\n    TotalAndFilteredRowsComp.prototype.onDataChanged = function () {\n        var rowCount = agGridCommunity._.formatNumberCommas(this.getFilteredRowCountValue());\n        var totalRowCount = agGridCommunity._.formatNumberCommas(this.getTotalRowCount());\n        if (rowCount === totalRowCount) {\n            this.setValue(rowCount);\n        }\n        else {\n            var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n            this.setValue(rowCount + \" \" + localeTextFunc('of', 'of') + \" \" + totalRowCount);\n        }\n    };\n    TotalAndFilteredRowsComp.prototype.getFilteredRowCountValue = function () {\n        var filteredRowCount = 0;\n        this.gridApi.forEachNodeAfterFilter(function (node) {\n            if (!node.group) {\n                filteredRowCount++;\n            }\n        });\n        return filteredRowCount;\n    };\n    TotalAndFilteredRowsComp.prototype.getTotalRowCount = function () {\n        var totalRowCount = 0;\n        this.gridApi.forEachNode(function (node) {\n            if (!node.group) {\n                totalRowCount++;\n            }\n        });\n        return totalRowCount;\n    };\n    TotalAndFilteredRowsComp.prototype.init = function () { };\n    __decorate$1y([\n        agGridCommunity.Autowired('gridApi')\n    ], TotalAndFilteredRowsComp.prototype, \"gridApi\", void 0);\n    __decorate$1y([\n        agGridCommunity.Autowired('eventService')\n    ], TotalAndFilteredRowsComp.prototype, \"eventService\", void 0);\n    __decorate$1y([\n        agGridCommunity.PostConstruct\n    ], TotalAndFilteredRowsComp.prototype, \"postConstruct\", null);\n    return TotalAndFilteredRowsComp;\n}(NameValueComp));\n\nvar __extends$2a = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1z = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar FilteredRowsComp = /** @class */ (function (_super) {\n    __extends$2a(FilteredRowsComp, _super);\n    function FilteredRowsComp() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FilteredRowsComp.prototype.postConstruct = function () {\n        this.setLabel('filteredRows', 'Filtered');\n        // this component is only really useful with client side row model\n        if (this.gridApi.getModel().getType() !== 'clientSide') {\n            console.warn(\"ag-Grid: agFilteredRowCountComponent should only be used with the client side row model.\");\n            return;\n        }\n        this.addCssClass('ag-status-panel');\n        this.addCssClass('ag-status-panel-filtered-row-count');\n        this.setDisplayed(true);\n        var listener = this.onDataChanged.bind(this);\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_MODEL_UPDATED, listener);\n    };\n    FilteredRowsComp.prototype.onDataChanged = function () {\n        var totalRowCountValue = this.getTotalRowCountValue();\n        var filteredRowCountValue = this.getFilteredRowCountValue();\n        this.setValue(agGridCommunity._.formatNumberCommas(filteredRowCountValue));\n        this.setDisplayed(totalRowCountValue !== filteredRowCountValue);\n    };\n    FilteredRowsComp.prototype.getTotalRowCountValue = function () {\n        var totalRowCount = 0;\n        this.gridApi.forEachNode(function (node) { return totalRowCount += 1; });\n        return totalRowCount;\n    };\n    FilteredRowsComp.prototype.getFilteredRowCountValue = function () {\n        var filteredRowCount = 0;\n        this.gridApi.forEachNodeAfterFilter(function (node) {\n            if (!node.group) {\n                filteredRowCount += 1;\n            }\n        });\n        return filteredRowCount;\n    };\n    FilteredRowsComp.prototype.init = function () { };\n    __decorate$1z([\n        agGridCommunity.Autowired('eventService')\n    ], FilteredRowsComp.prototype, \"eventService\", void 0);\n    __decorate$1z([\n        agGridCommunity.Autowired('gridApi')\n    ], FilteredRowsComp.prototype, \"gridApi\", void 0);\n    __decorate$1z([\n        agGridCommunity.PostConstruct\n    ], FilteredRowsComp.prototype, \"postConstruct\", null);\n    return FilteredRowsComp;\n}(NameValueComp));\n\nvar __extends$2b = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1A = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar TotalRowsComp = /** @class */ (function (_super) {\n    __extends$2b(TotalRowsComp, _super);\n    function TotalRowsComp() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TotalRowsComp.prototype.postConstruct = function () {\n        this.setLabel('totalRows', 'Total Rows');\n        // this component is only really useful with client side row model\n        if (this.gridApi.getModel().getType() !== 'clientSide') {\n            console.warn(\"ag-Grid: agTotalRowCountComponent should only be used with the client side row model.\");\n            return;\n        }\n        this.addCssClass('ag-status-panel');\n        this.addCssClass('ag-status-panel-total-row-count');\n        this.setDisplayed(true);\n        var listener = this.onDataChanged.bind(this);\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_MODEL_UPDATED, listener);\n    };\n    TotalRowsComp.prototype.onDataChanged = function () {\n        this.setValue(agGridCommunity._.formatNumberCommas(this.getRowCountValue()));\n    };\n    TotalRowsComp.prototype.getRowCountValue = function () {\n        var totalRowCount = 0;\n        this.gridApi.forEachLeafNode(function (node) { return totalRowCount += 1; });\n        return totalRowCount;\n    };\n    TotalRowsComp.prototype.init = function () {\n    };\n    __decorate$1A([\n        agGridCommunity.Autowired('eventService')\n    ], TotalRowsComp.prototype, \"eventService\", void 0);\n    __decorate$1A([\n        agGridCommunity.Autowired('gridApi')\n    ], TotalRowsComp.prototype, \"gridApi\", void 0);\n    __decorate$1A([\n        agGridCommunity.PostConstruct\n    ], TotalRowsComp.prototype, \"postConstruct\", null);\n    return TotalRowsComp;\n}(NameValueComp));\n\nvar __extends$2c = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1B = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SelectedRowsComp = /** @class */ (function (_super) {\n    __extends$2c(SelectedRowsComp, _super);\n    function SelectedRowsComp() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SelectedRowsComp.prototype.postConstruct = function () {\n        if (!this.isValidRowModel()) {\n            console.warn(\"ag-Grid: agSelectedRowCountComponent should only be used with the client and server side row model.\");\n            return;\n        }\n        this.setLabel('selectedRows', 'Selected');\n        this.addCssClass('ag-status-panel');\n        this.addCssClass('ag-status-panel-selected-row-count');\n        var selectedRowCount = this.gridApi.getSelectedRows().length;\n        this.setValue(agGridCommunity._.formatNumberCommas(selectedRowCount));\n        this.setDisplayed(selectedRowCount > 0);\n        var eventListener = this.onRowSelectionChanged.bind(this);\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_MODEL_UPDATED, eventListener);\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_SELECTION_CHANGED, eventListener);\n    };\n    SelectedRowsComp.prototype.isValidRowModel = function () {\n        // this component is only really useful with client or server side rowmodels\n        var rowModelType = this.gridApi.getModel().getType();\n        return rowModelType === 'clientSide' || rowModelType === 'serverSide';\n    };\n    SelectedRowsComp.prototype.onRowSelectionChanged = function () {\n        var selectedRowCount = this.gridApi.getSelectedRows().length;\n        this.setValue(agGridCommunity._.formatNumberCommas(selectedRowCount));\n        this.setDisplayed(selectedRowCount > 0);\n    };\n    SelectedRowsComp.prototype.init = function () {\n    };\n    __decorate$1B([\n        agGridCommunity.Autowired('eventService')\n    ], SelectedRowsComp.prototype, \"eventService\", void 0);\n    __decorate$1B([\n        agGridCommunity.Autowired('gridApi')\n    ], SelectedRowsComp.prototype, \"gridApi\", void 0);\n    __decorate$1B([\n        agGridCommunity.PostConstruct\n    ], SelectedRowsComp.prototype, \"postConstruct\", null);\n    return SelectedRowsComp;\n}(NameValueComp));\n\nvar __extends$2d = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1C = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AggregationComp = /** @class */ (function (_super) {\n    __extends$2d(AggregationComp, _super);\n    function AggregationComp() {\n        return _super.call(this, AggregationComp.TEMPLATE) || this;\n    }\n    AggregationComp.prototype.postConstruct = function () {\n        if (!this.isValidRowModel()) {\n            console.warn(\"ag-Grid: agAggregationComponent should only be used with the client and server side row model.\");\n            return;\n        }\n        this.avgAggregationComp.setLabel('average', 'Average');\n        this.countAggregationComp.setLabel('count', 'Count');\n        this.minAggregationComp.setLabel('min', 'Min');\n        this.maxAggregationComp.setLabel('max', 'Max');\n        this.sumAggregationComp.setLabel('sum', 'Sum');\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_RANGE_SELECTION_CHANGED, this.onRangeSelectionChanged.bind(this));\n        this.addDestroyableEventListener(this.eventService, agGridCommunity.Events.EVENT_MODEL_UPDATED, this.onRangeSelectionChanged.bind(this));\n    };\n    AggregationComp.prototype.isValidRowModel = function () {\n        // this component is only really useful with client or server side rowmodels\n        var rowModelType = this.gridApi.getModel().getType();\n        return rowModelType === 'clientSide' || rowModelType === 'serverSide';\n    };\n    AggregationComp.prototype.init = function () {\n    };\n    AggregationComp.prototype.setAggregationComponentValue = function (aggFuncName, value, visible) {\n        var statusBarValueComponent = this.getAggregationValueComponent(aggFuncName);\n        if (agGridCommunity._.exists(statusBarValueComponent) && statusBarValueComponent) {\n            statusBarValueComponent.setValue(agGridCommunity._.formatNumberTwoDecimalPlacesAndCommas(value));\n            statusBarValueComponent.setDisplayed(visible);\n        }\n    };\n    AggregationComp.prototype.getAggregationValueComponent = function (aggFuncName) {\n        // converts user supplied agg name to our reference - eg: sum => sumAggregationComp\n        var refComponentName = aggFuncName + \"AggregationComp\";\n        // if the user has specified the agAggregationPanelComp but no aggFuncs we show the all\n        // if the user has specified the agAggregationPanelComp and aggFuncs, then we only show the aggFuncs listed\n        var statusBarValueComponent = null;\n        var aggregationPanelConfig = agGridCommunity._.exists(this.gridOptions.statusBar) && this.gridOptions.statusBar ? agGridCommunity._.find(this.gridOptions.statusBar.statusPanels, function (panel) { return panel.statusPanel === 'agAggregationComponent'; }) : null;\n        if (agGridCommunity._.exists(aggregationPanelConfig) && aggregationPanelConfig) {\n            // a little defensive here - if no statusPanelParams show it, if componentParams we also expect aggFuncs\n            if (!agGridCommunity._.exists(aggregationPanelConfig.statusPanelParams) ||\n                (agGridCommunity._.exists(aggregationPanelConfig.statusPanelParams) &&\n                    agGridCommunity._.exists(aggregationPanelConfig.statusPanelParams.aggFuncs) &&\n                    agGridCommunity._.exists(agGridCommunity._.find(aggregationPanelConfig.statusPanelParams.aggFuncs, function (func) { return func === aggFuncName; })))) {\n                statusBarValueComponent = this[refComponentName];\n            }\n        }\n        else {\n            // components not specified - assume we can show this component\n            statusBarValueComponent = this[refComponentName];\n        }\n        // either we can't find it (which would indicate a typo or similar user side), or the user has deliberately\n        // not listed the component in aggFuncs\n        return statusBarValueComponent;\n    };\n    AggregationComp.prototype.onRangeSelectionChanged = function () {\n        var _this = this;\n        var cellRanges = this.rangeController ? this.rangeController.getCellRanges() : undefined;\n        var sum = 0;\n        var count = 0;\n        var numberCount = 0;\n        var min = null;\n        var max = null;\n        var cellsSoFar = {};\n        if (cellRanges && !agGridCommunity._.missingOrEmpty(cellRanges)) {\n            cellRanges.forEach(function (cellRange) {\n                var currentRow = _this.rangeController.getRangeStartRow(cellRange);\n                var lastRow = _this.rangeController.getRangeEndRow(cellRange);\n                while (true) {\n                    var finishedAllRows = agGridCommunity._.missing(currentRow) || !currentRow || _this.rowPositionUtils.before(lastRow, currentRow);\n                    if (finishedAllRows || !currentRow || !cellRange.columns) {\n                        break;\n                    }\n                    cellRange.columns.forEach(function (col) {\n                        if (currentRow === null) {\n                            return;\n                        }\n                        // we only want to include each cell once, in case a cell is in multiple ranges\n                        var cellId = _this.cellPositionUtils.createId({\n                            rowPinned: currentRow.rowPinned,\n                            column: col,\n                            rowIndex: currentRow.rowIndex\n                        });\n                        if (cellsSoFar[cellId]) {\n                            return;\n                        }\n                        cellsSoFar[cellId] = true;\n                        var rowNode = _this.rowRenderer.getRowNode(currentRow);\n                        if (agGridCommunity._.missing(rowNode)) {\n                            return;\n                        }\n                        var value = _this.valueService.getValue(col, rowNode);\n                        // if empty cell, skip it, doesn't impact count or anything\n                        if (agGridCommunity._.missing(value) || value === '') {\n                            return;\n                        }\n                        // see if value is wrapped, can happen when doing count() or avg() functions\n                        if (value.value) {\n                            value = value.value;\n                        }\n                        if (typeof value === 'string') {\n                            value = Number(value);\n                        }\n                        if (typeof value === 'number' && !isNaN(value)) {\n                            sum += value;\n                            if (max === null || value > max) {\n                                max = value;\n                            }\n                            if (min === null || value < min) {\n                                min = value;\n                            }\n                            numberCount++;\n                        }\n                        count++;\n                    });\n                    currentRow = _this.cellNavigationService.getRowBelow(currentRow);\n                }\n            });\n        }\n        var gotResult = count > 1;\n        var gotNumberResult = numberCount > 1;\n        // we show count even if no numbers\n        this.setAggregationComponentValue('count', count, gotResult);\n        // show if numbers found\n        this.setAggregationComponentValue('sum', sum, gotNumberResult);\n        this.setAggregationComponentValue('min', min, gotNumberResult);\n        this.setAggregationComponentValue('max', max, gotNumberResult);\n        this.setAggregationComponentValue('avg', (sum / numberCount), gotNumberResult);\n    };\n    AggregationComp.TEMPLATE = \"<div class=\\\"ag-status-panel ag-status-panel-aggregations\\\">\\n                <ag-name-value ref=\\\"avgAggregationComp\\\"></ag-name-value>\\n                <ag-name-value ref=\\\"countAggregationComp\\\"></ag-name-value>\\n                <ag-name-value ref=\\\"minAggregationComp\\\"></ag-name-value>\\n                <ag-name-value ref=\\\"maxAggregationComp\\\"></ag-name-value>\\n                <ag-name-value ref=\\\"sumAggregationComp\\\"></ag-name-value>\\n            </div>\";\n    __decorate$1C([\n        agGridCommunity.Autowired('eventService')\n    ], AggregationComp.prototype, \"eventService\", void 0);\n    __decorate$1C([\n        agGridCommunity.Optional('rangeController')\n    ], AggregationComp.prototype, \"rangeController\", void 0);\n    __decorate$1C([\n        agGridCommunity.Autowired('valueService')\n    ], AggregationComp.prototype, \"valueService\", void 0);\n    __decorate$1C([\n        agGridCommunity.Autowired('cellNavigationService')\n    ], AggregationComp.prototype, \"cellNavigationService\", void 0);\n    __decorate$1C([\n        agGridCommunity.Autowired('rowRenderer')\n    ], AggregationComp.prototype, \"rowRenderer\", void 0);\n    __decorate$1C([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], AggregationComp.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1C([\n        agGridCommunity.Autowired('gridOptions')\n    ], AggregationComp.prototype, \"gridOptions\", void 0);\n    __decorate$1C([\n        agGridCommunity.Autowired('gridApi')\n    ], AggregationComp.prototype, \"gridApi\", void 0);\n    __decorate$1C([\n        agGridCommunity.Autowired('cellPositionUtils')\n    ], AggregationComp.prototype, \"cellPositionUtils\", void 0);\n    __decorate$1C([\n        agGridCommunity.Autowired('rowPositionUtils')\n    ], AggregationComp.prototype, \"rowPositionUtils\", void 0);\n    __decorate$1C([\n        agGridCommunity.RefSelector('sumAggregationComp')\n    ], AggregationComp.prototype, \"sumAggregationComp\", void 0);\n    __decorate$1C([\n        agGridCommunity.RefSelector('countAggregationComp')\n    ], AggregationComp.prototype, \"countAggregationComp\", void 0);\n    __decorate$1C([\n        agGridCommunity.RefSelector('minAggregationComp')\n    ], AggregationComp.prototype, \"minAggregationComp\", void 0);\n    __decorate$1C([\n        agGridCommunity.RefSelector('maxAggregationComp')\n    ], AggregationComp.prototype, \"maxAggregationComp\", void 0);\n    __decorate$1C([\n        agGridCommunity.RefSelector('avgAggregationComp')\n    ], AggregationComp.prototype, \"avgAggregationComp\", void 0);\n    __decorate$1C([\n        agGridCommunity.PostConstruct\n    ], AggregationComp.prototype, \"postConstruct\", null);\n    return AggregationComp;\n}(agGridCommunity.Component));\n\nvar StatusBarModule = {\n    moduleName: agGridCommunity.ModuleNames.StatusBarModule,\n    beans: [StatusBarService],\n    agStackComponents: [\n        { componentName: 'AgStatusBar', componentClass: StatusBar },\n        { componentName: 'AgNameValue', componentClass: NameValueComp },\n    ],\n    userComponents: [\n        { componentName: 'agAggregationComponent', componentClass: AggregationComp },\n        { componentName: 'agSelectedRowCountComponent', componentClass: SelectedRowsComp },\n        { componentName: 'agTotalRowCountComponent', componentClass: TotalRowsComp },\n        { componentName: 'agFilteredRowCountComponent', componentClass: FilteredRowsComp },\n        { componentName: 'agTotalAndFilteredRowCountComponent', componentClass: TotalAndFilteredRowsComp }\n    ],\n    dependantModules: [\n        EnterpriseCoreModule\n    ]\n};\n\nvar __decorate$1D = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ViewportRowModel = /** @class */ (function () {\n    function ViewportRowModel() {\n        // rowRenderer tells us these\n        this.firstRow = -1;\n        this.lastRow = -1;\n        // datasource tells us this\n        this.rowCount = -1;\n        this.rowNodesByIndex = {};\n    }\n    // we don't implement as lazy row heights is not supported in this row model\n    ViewportRowModel.prototype.ensureRowHeightsValid = function (startPixel, endPixel, startLimitIndex, endLimitIndex) { return false; };\n    ViewportRowModel.prototype.init = function () {\n        this.rowHeight = this.gridOptionsWrapper.getRowHeightAsNumber();\n        this.eventService.addEventListener(agGridCommunity.Events.EVENT_VIEWPORT_CHANGED, this.onViewportChanged.bind(this));\n    };\n    ViewportRowModel.prototype.start = function () {\n        if (this.gridOptionsWrapper.getViewportDatasource()) {\n            this.setViewportDatasource(this.gridOptionsWrapper.getViewportDatasource());\n        }\n    };\n    ViewportRowModel.prototype.isLastRowFound = function () {\n        return true;\n    };\n    ViewportRowModel.prototype.destroyDatasource = function () {\n        if (this.viewportDatasource) {\n            if (this.viewportDatasource.destroy) {\n                this.viewportDatasource.destroy();\n            }\n            this.rowRenderer.datasourceChanged();\n            this.firstRow = -1;\n            this.lastRow = -1;\n        }\n    };\n    ViewportRowModel.prototype.calculateFirstRow = function (firstRenderedRow) {\n        var bufferSize = this.gridOptionsWrapper.getViewportRowModelBufferSize();\n        var pageSize = this.gridOptionsWrapper.getViewportRowModelPageSize();\n        var afterBuffer = firstRenderedRow - bufferSize;\n        if (afterBuffer < 0) {\n            return 0;\n        }\n        else {\n            return Math.floor(afterBuffer / pageSize) * pageSize;\n        }\n    };\n    ViewportRowModel.prototype.calculateLastRow = function (lastRenderedRow) {\n        if (lastRenderedRow === -1) {\n            return lastRenderedRow;\n        }\n        var bufferSize = this.gridOptionsWrapper.getViewportRowModelBufferSize();\n        var pageSize = this.gridOptionsWrapper.getViewportRowModelPageSize();\n        var afterBuffer = lastRenderedRow + bufferSize;\n        var result = Math.ceil(afterBuffer / pageSize) * pageSize;\n        var lastRowIndex = this.rowCount - 1;\n        return Math.min(result, lastRowIndex);\n    };\n    ViewportRowModel.prototype.onViewportChanged = function (event) {\n        var newFirst = this.calculateFirstRow(event.firstRow);\n        var newLast = this.calculateLastRow(event.lastRow);\n        if (this.firstRow !== newFirst || this.lastRow !== newLast) {\n            this.firstRow = newFirst;\n            this.lastRow = newLast;\n            this.purgeRowsNotInViewport();\n            if (this.viewportDatasource) {\n                this.viewportDatasource.setViewportRange(this.firstRow, this.lastRow);\n            }\n        }\n    };\n    ViewportRowModel.prototype.purgeRowsNotInViewport = function () {\n        var _this = this;\n        Object.keys(this.rowNodesByIndex).forEach(function (indexStr) {\n            var index = parseInt(indexStr, 10);\n            if (index < _this.firstRow || index > _this.lastRow) {\n                delete _this.rowNodesByIndex[index];\n            }\n        });\n    };\n    ViewportRowModel.prototype.setViewportDatasource = function (viewportDatasource) {\n        this.destroyDatasource();\n        this.viewportDatasource = viewportDatasource;\n        this.rowCount = 0;\n        if (!viewportDatasource.init) {\n            console.warn('ag-Grid: viewport is missing init method.');\n        }\n        else {\n            viewportDatasource.init({\n                setRowCount: this.setRowCount.bind(this),\n                setRowData: this.setRowData.bind(this),\n                getRow: this.getRow.bind(this)\n            });\n        }\n    };\n    ViewportRowModel.prototype.getType = function () {\n        return agGridCommunity.Constants.ROW_MODEL_TYPE_VIEWPORT;\n    };\n    ViewportRowModel.prototype.getRow = function (rowIndex) {\n        if (!this.rowNodesByIndex[rowIndex]) {\n            this.rowNodesByIndex[rowIndex] = this.createBlankRowNode(rowIndex);\n        }\n        return this.rowNodesByIndex[rowIndex];\n    };\n    ViewportRowModel.prototype.getRowNode = function (id) {\n        var result = null;\n        this.forEachNode(function (rowNode) {\n            if (rowNode.id === id) {\n                result = rowNode;\n            }\n        });\n        return result;\n    };\n    ViewportRowModel.prototype.getRowCount = function () {\n        return this.rowCount;\n    };\n    ViewportRowModel.prototype.getRowIndexAtPixel = function (pixel) {\n        if (this.rowHeight !== 0) { // avoid divide by zero error\n            return Math.floor(pixel / this.rowHeight);\n        }\n        else {\n            return 0;\n        }\n    };\n    ViewportRowModel.prototype.getRowBounds = function (index) {\n        return {\n            rowHeight: this.rowHeight,\n            rowTop: this.rowHeight * index\n        };\n    };\n    ViewportRowModel.prototype.getTopLevelRowCount = function () {\n        return this.getRowCount();\n    };\n    ViewportRowModel.prototype.getTopLevelRowDisplayedIndex = function (topLevelIndex) {\n        return topLevelIndex;\n    };\n    ViewportRowModel.prototype.getCurrentPageHeight = function () {\n        return this.rowCount * this.rowHeight;\n    };\n    ViewportRowModel.prototype.isEmpty = function () {\n        return this.rowCount > 0;\n    };\n    ViewportRowModel.prototype.isRowsToRender = function () {\n        return this.rowCount > 0;\n    };\n    ViewportRowModel.prototype.getNodesInRangeForSelection = function (firstInRange, lastInRange) {\n        var firstIndex = agGridCommunity._.missing(firstInRange) ? 0 : firstInRange.rowIndex;\n        var lastIndex = lastInRange.rowIndex;\n        var firstNodeOutOfRange = firstIndex < this.firstRow || firstIndex > this.lastRow;\n        var lastNodeOutOfRange = lastIndex < this.firstRow || lastIndex > this.lastRow;\n        if (firstNodeOutOfRange || lastNodeOutOfRange) {\n            return [];\n        }\n        var result = [];\n        var startIndex = firstIndex <= lastIndex ? firstIndex : lastIndex;\n        var endIndex = firstIndex <= lastIndex ? lastIndex : firstIndex;\n        for (var i = startIndex; i <= endIndex; i++) {\n            result.push(this.rowNodesByIndex[i]);\n        }\n        return result;\n    };\n    ViewportRowModel.prototype.forEachNode = function (callback) {\n        var _this = this;\n        var callbackCount = 0;\n        Object.keys(this.rowNodesByIndex).forEach(function (indexStr) {\n            var index = parseInt(indexStr, 10);\n            var rowNode = _this.rowNodesByIndex[index];\n            callback(rowNode, callbackCount);\n            callbackCount++;\n        });\n    };\n    ViewportRowModel.prototype.setRowData = function (rowData) {\n        var _this = this;\n        agGridCommunity._.iterateObject(rowData, function (indexStr, dataItem) {\n            var index = parseInt(indexStr, 10);\n            // we should never keep rows that we didn't specifically ask for, this\n            // guarantees the contract we have with the server.\n            if (index >= _this.firstRow && index <= _this.lastRow) {\n                var rowNode = _this.rowNodesByIndex[index];\n                // the abnormal case is we requested a row even though the grid didn't need it\n                // as a result of the paging and buffer (ie the row is off screen), in which\n                // case we need to create a new node now\n                if (agGridCommunity._.missing(rowNode)) {\n                    rowNode = _this.createBlankRowNode(index);\n                    _this.rowNodesByIndex[index] = rowNode;\n                }\n                // now we deffo have a row node, so set in the details\n                // if the grid already asked for this row (the normal case), then we would\n                // of put a placeholder node in place.\n                rowNode.setDataAndId(dataItem, index.toString());\n            }\n        });\n    };\n    ViewportRowModel.prototype.createBlankRowNode = function (rowIndex) {\n        var rowNode = new agGridCommunity.RowNode();\n        this.context.wireBean(rowNode);\n        rowNode.setRowHeight(this.rowHeight);\n        rowNode.setRowTop(this.rowHeight * rowIndex);\n        rowNode.setRowIndex(rowIndex);\n        return rowNode;\n    };\n    ViewportRowModel.prototype.setRowCount = function (rowCount, keepRenderedRows) {\n        if (keepRenderedRows === void 0) { keepRenderedRows = false; }\n        if (rowCount !== this.rowCount) {\n            this.rowCount = rowCount;\n            var event_1 = {\n                type: agGridCommunity.Events.EVENT_MODEL_UPDATED,\n                api: this.gridApi,\n                columnApi: this.columnApi,\n                newData: false,\n                newPage: false,\n                keepRenderedRows: keepRenderedRows,\n                animate: false\n            };\n            this.eventService.dispatchEvent(event_1);\n        }\n    };\n    ViewportRowModel.prototype.isRowPresent = function (rowNode) {\n        return false;\n    };\n    __decorate$1D([\n        agGridCommunity.Autowired('gridOptionsWrapper')\n    ], ViewportRowModel.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate$1D([\n        agGridCommunity.Autowired('eventService')\n    ], ViewportRowModel.prototype, \"eventService\", void 0);\n    __decorate$1D([\n        agGridCommunity.Autowired('selectionController')\n    ], ViewportRowModel.prototype, \"selectionController\", void 0);\n    __decorate$1D([\n        agGridCommunity.Autowired('context')\n    ], ViewportRowModel.prototype, \"context\", void 0);\n    __decorate$1D([\n        agGridCommunity.Autowired('gridApi')\n    ], ViewportRowModel.prototype, \"gridApi\", void 0);\n    __decorate$1D([\n        agGridCommunity.Autowired('columnApi')\n    ], ViewportRowModel.prototype, \"columnApi\", void 0);\n    __decorate$1D([\n        agGridCommunity.Autowired('rowRenderer')\n    ], ViewportRowModel.prototype, \"rowRenderer\", void 0);\n    __decorate$1D([\n        agGridCommunity.PostConstruct\n    ], ViewportRowModel.prototype, \"init\", null);\n    __decorate$1D([\n        agGridCommunity.PreDestroy\n    ], ViewportRowModel.prototype, \"destroyDatasource\", null);\n    ViewportRowModel = __decorate$1D([\n        agGridCommunity.Bean('rowModel')\n    ], ViewportRowModel);\n    return ViewportRowModel;\n}());\n\nvar ViewportRowModelModule = {\n    moduleName: agGridCommunity.ModuleNames.ViewportRowModelModule,\n    rowModels: { 'viewport': ViewportRowModel },\n    dependantModules: [\n        EnterpriseCoreModule\n    ]\n};\n\nagGridCommunity.ModuleRegistry.register(ColumnsToolPanelModule);\r\nagGridCommunity.ModuleRegistry.register(ExcelExportModule);\r\nagGridCommunity.ModuleRegistry.register(FiltersToolPanelModule);\r\nagGridCommunity.ModuleRegistry.register(GridChartsModule);\r\nagGridCommunity.ModuleRegistry.register(MasterDetailModule);\r\nagGridCommunity.ModuleRegistry.register(MenuModule);\r\nagGridCommunity.ModuleRegistry.register(RangeSelectionModule);\r\nagGridCommunity.ModuleRegistry.register(RichSelectModule);\r\nagGridCommunity.ModuleRegistry.register(RowGroupingModule);\r\nagGridCommunity.ModuleRegistry.register(ServerSideRowModelModule);\r\nagGridCommunity.ModuleRegistry.register(SetFilterModule);\r\nagGridCommunity.ModuleRegistry.register(SideBarModule);\r\nagGridCommunity.ModuleRegistry.register(StatusBarModule);\r\nagGridCommunity.ModuleRegistry.register(ViewportRowModelModule);\n\nexports.LicenseManager = LicenseManager;\n","export default \"<div class=\\\"enrollment-details-card\\\" #gridCardWrapper>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"saveBtnIcon justify-content-start no-left-padding\\\">\\r\\n            <a class=\\\"enrollment-nav-link\\\">\\r\\n                <img class=\\\"icon-arrow-back\\\" src=\\\"assets/images/save-icon.png\\\">\\r\\n                <span>Save</span>\\r\\n            </a>\\r\\n        </div>\\r\\n        <div class=\\\"mapCohortIcon justify-content-start no-left-padding\\\" >\\r\\n            <a class=\\\"enrollment-nav-link\\\">\\r\\n                <img class=\\\"icon-arrow-back\\\" src=\\\"assets/images/manageplans/cohort-icon-blue.png\\\">\\r\\n                <span>Map Cohorts/Sites</span>\\r\\n            </a>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<div style=\\\"margin-top:05px;\\\" class=\\\"ag_container\\\">\\r\\n    <ag-grid-angular #agGrid \\r\\n        id=\\\"ED_Grid\\\"\\r\\n        class=\\\"ag-theme-material\\\"\\r\\n        \\r\\n        [autoGroupColumnDef]=\\\"autoGroupColumnDef\\\"\\r\\n        [getDataPath]=\\\"getDataPath\\\"\\r\\n        [treeData]=\\\"true\\\"\\r\\n        [columnDefs]=\\\"columnDefs\\\" \\r\\n        [context]=\\\"getContext()\\\"\\r\\n        [defaultColDef]=\\\"defaultColDef\\\" \\r\\n        [frameworkComponents]=\\\"frameworkComponents\\\"\\r\\n        [enableColResize]=\\\"true\\\"\\r\\n        [gridOptions]=\\\"gridOptions\\\"\\r\\n        [groupDefaultExpanded]=\\\"groupDefaultExpanded\\\" \\r\\n        [rowClassRules]=\\\"rowClassRules\\\" \\r\\n        [rowData]=\\\"rowData\\\" \\r\\n        [isExternalFilterPresent]=\\\"isExternalFilterPresent\\\"\\r\\n        [doesExternalFilterPass]=\\\"doesExternalFilterPass\\\"    \\r\\n        (gridReady)=\\\"gridReady($event)\\\"\\r\\n        [groupRowAggNodes]=\\\"groupRowAggNodes\\\"\\r\\n        (rowDataUpdated)=\\\"onRowDataUpdated($event)\\\"\\r\\n        (rowDataChanged)=\\\"rowDataChanged($event)\\\"\\r\\n        (rowGroupOpened)=\\\"onrowGroupOpened($event)\\\"\\r\\n        (columnVisible)=\\\"columnVisible($event)\\\"\\r\\n        (dragStopped)=\\\"dragStopped($event)\\\"\\r\\n        >\\r\\n    </ag-grid-angular>\\r\\n    <!-- <ag-grid-angular #agGrid style=\\\"width: 100%;\\\" id=\\\"myGrid\\\" class=\\\"ag-theme-material\\\"\\r\\n        [aggFuncs]=\\\"aggFuncs\\\"\\r\\n        [autoGroupColumnDef]=\\\"autoGroupColumnDef\\\" [columnDefs]=\\\"columnDefs\\\" [context]=\\\"getContext()\\\"\\r\\n        [defaultColDef]=\\\"defaultColDef\\\" [domLayout]=\\\"domLayout\\\" [enableFilter]=\\\"true\\\" [enableSorting]=\\\"true\\\"\\r\\n        [frameworkComponents]=\\\"frameworkComponents\\\" [getDataPath]=\\\"getDataPath\\\" [gridOptions]=\\\"gridOptions\\\"\\r\\n        [groupDefaultExpanded]=\\\"groupDefaultExpanded\\\" [pinnedTopRowData]=\\\"pinnedTopRowData\\\"\\r\\n        [processRowPostCreate]=\\\"processRowPostCreate\\\" [rowClassRules]=\\\"rowClassRules\\\" [rowData]=\\\"rowData\\\"\\r\\n        [rowMultiSelectWithClick]=\\\"true\\\" [rowSelection]=\\\"'multiple'\\\" [singleClickEdit]=\\\"true\\\"\\r\\n        [suppressContextMenu]=\\\"true\\\" [suppressDragLeaveHidesColumns]=\\\"true\\\" [suppressRowClickSelection]=\\\"true\\\"\\r\\n        [treeData]=\\\"true\\\" (cellFocused)=\\\"onCellFocused($event)\\\" (cellValueChanged)=\\\"onCellValueChanged($event)\\\"\\r\\n        (columnVisible)=\\\"columnVisible($event)\\\" (dragStopped)=\\\"dragStopped($event)\\\"\\r\\n        (filterChanged)=\\\"onFilterChanged($event)\\\" (firstDataRendered)=\\\"firstDataRendered($event)\\\"\\r\\n        (gridColumnsChanged)=\\\"onGridColumnsChanged($event)\\\" (gridReady)=\\\"gridReady($event)\\\"\\r\\n        (rowClicked)=\\\"onRowClicked($event)\\\" (rowDataChanged)=\\\"rowDataChanged($event)\\\"\\r\\n        (rowDataUpdated)=\\\"onRowDataUpdated($event)\\\" (rowGroupOpened)=\\\"onrowGroupOpened($event)\\\"\\r\\n        (selectionChanged)=\\\"onSelectionChanged($event)\\\" (sortChanged)=\\\"onSortChanged($event)\\\"\\r\\n        (viewportChanged)=\\\"viewportChanged($event)\\\" (rowSelected)=\\\"onRowSelected($event)\\\">\\r\\n    </ag-grid-angular> -->\\r\\n</div>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { EnrollmentDetailsComponent } from './enrollment-details.component';\r\n\r\nconst routes: Routes = [{ path: '', component: EnrollmentDetailsComponent }];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class EnrollmentDetailsRoutingModule { }\r\n","import 'ag-grid-enterprise';\r\nimport {\r\n  ColumnApi,\r\n  ColumnVisibleEvent,\r\n  GridApi,\r\n  GridColumnsChangedEvent,\r\n  GridReadyEvent,\r\n  ICellRendererParams,\r\n  RefreshCellsParams,\r\n  RowDataUpdatedEvent,\r\n  RowNode,\r\n  SortChangedEvent,\r\n  GridOptions,\r\n  DragStoppedEvent,\r\n  Column,\r\n  RowDataChangedEvent,\r\n  RowGroupOpenedEvent,\r\n  ViewportChangedEvent\r\n} from 'ag-grid-community';\r\nimport { Component, OnInit, ViewEncapsulation, OnDestroy, Renderer2, ViewChild, ElementRef } from '@angular/core';\r\nimport { UserDataService, StudySummaryService, GROUP_ACTIONS, DOMLAYOUT,\r\n   PrefGridColumnsKeys, ColumnPreferenceService} from 'so-common-library';\r\nimport { EnrollmentDetailsService } from './enrollment-details.service';\r\nimport { EdColDefService } from './grid/ed-col-def.service';\r\nimport { AppUtil } from 'common-library';\r\nimport { EdGridService } from './grid/ed-grid.service';\r\nimport { GridFilterService } from '../grid-filter.service';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { GEOGRAPHY_LEVEL, MAPPED_COHORT } from '@app4/app.constant';\r\nimport { environment } from 'environments/environment';\r\n\r\n@Component({\r\n  selector: 'ctos-enrollment-details',\r\n  templateUrl: './enrollment-details.component.html',\r\n  providers: [StudySummaryService, EnrollmentDetailsService],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class EnrollmentDetailsComponent implements OnInit, OnDestroy {\r\n\r\n  // AG-Grid variables\r\n  private gridApi: GridApi;\r\n  private columnApi: ColumnApi;\r\n  private gridColumnApi;\r\n  getDataPath: (data: any) => any;\r\n  autoGroupColumnDef: any;\r\n  columnDefs;\r\n  context;\r\n  defaultColDef: any;\r\n  frameworkComponents: any;\r\n  rowData = [];\r\n  gridOptions: GridOptions;\r\n  groupDefaultExpanded = -1;\r\n  aggFuncs;\r\n\r\n  rowClassRules = {\r\n    'ag-row-focus': function (params) {\r\n      return params.node.isSelected();\r\n    }\r\n  };\r\n  @ViewChild('agGrid', { read: ElementRef, static: true }) edGrid: ElementRef;\r\n  @ViewChild('gridCardWrapper', { read: ElementRef, static: true }) gridCardWrapper: ElementRef;\r\n\r\n  private readonly subscriptions: Subject<void> = new Subject<void>();\r\n\r\n  constructor(private userDataService: UserDataService,\r\n    private enrollmentDetailsService: EnrollmentDetailsService,\r\n    private edColDefService: EdColDefService,\r\n    private edGridService: EdGridService,\r\n    private gridFilterService: GridFilterService,\r\n    private columnPreferencesService: ColumnPreferenceService,\r\n    private renderer: Renderer2) { }\r\n\r\n  ngOnInit() {\r\n    this.autoGroupColumnDef = this.edColDefService.getAutogroupColDef();\r\n    this.getDataPath = function (data) {\r\n      return data.geoHierarchy;\r\n    };\r\n    this.setGridOptions();\r\n    this.setDefaultColumnDef();\r\n    this.isExternalFilterChanged();\r\n    this.edColDefService.setReportingFreq(this.enrollmentDetailsService.getReportingFreqData(this.getStudyKey()));\r\n    this.setColumnDef();\r\n  }\r\n\r\n  getStudyKey(): number {\r\n    return this.userDataService.getLastVisitedStudyKey();\r\n  }\r\n\r\n  getContext() {\r\n    return {\r\n      componentParent: this\r\n    };\r\n  }\r\n\r\n  setDefaultColumnDef() {\r\n    this.defaultColDef = this.edColDefService.getDefaultColumnDef();\r\n  }\r\n\r\n  setColumnDef() {\r\n    this.columnDefs = this.edColDefService.getColumnDef();\r\n  }\r\n\r\n  disableArrowKeys(params): boolean {\r\n    const KEY_LEFT = 37;\r\n    const KEY_UP = 38;\r\n    const KEY_RIGHT = 39;\r\n    const KEY_DOWN = 40;\r\n\r\n    // return true (to suppress) if editing and user hit up/down keys\r\n    const keyCode = params.event.keyCode;\r\n    const gridShouldDoNothing =\r\n      params.editing &&\r\n      (keyCode === KEY_UP ||\r\n        keyCode === KEY_DOWN ||\r\n        keyCode === KEY_LEFT ||\r\n        keyCode === KEY_RIGHT);\r\n\r\n    return gridShouldDoNothing;\r\n  }\r\n\r\n  setGridOptions() {\r\n    this.gridOptions = {\r\n      domLayout: DOMLAYOUT.normal,\r\n      suppressMovableColumns: false,\r\n      suppressNoRowsOverlay: true,\r\n      enableFilter: true,\r\n      enableSorting: true,\r\n      rowSelection: 'single',\r\n      rowMultiSelectWithClick: false,\r\n      singleClickEdit: true,\r\n      suppressContextMenu: environment.toSuppressContextMenu,\r\n      suppressDragLeaveHidesColumns: true,\r\n      suppressRowClickSelection: false,\r\n      excludeChildrenWhenTreeDataFiltering: true,\r\n      getRowClass: (params) => {\r\n        return '';\r\n      },\r\n    };\r\n  }\r\n\r\n  getRowNodeId(data) {\r\n    let id = null;\r\n    switch (data.geographyLevel) {\r\n      case 'WW':\r\n        id = 'WW';\r\n        break;\r\n      case 'Region':\r\n        id = data.geographyKey;\r\n        break;\r\n      case 'Country':\r\n        id = data.geographyKey;\r\n        break;\r\n      case 'Site':\r\n        id = data.studyCenterKey;\r\n        break;\r\n      case 'Cohort':\r\n        id = data.countryName + '_' + data.studyCohortKey;\r\n        break;\r\n      default:\r\n        id = data.geographyKey;\r\n        break;\r\n    }\r\n    return id;\r\n  }\r\n\r\n  gridReady(params: GridReadyEvent) {\r\n    console.log('gridheight : grid ready');\r\n    this.gridApi = params.api;\r\n    this.columnApi = params.columnApi;\r\n    this.gridColumnApi = params.columnApi;\r\n    this.enrollmentDetailsService.getEnrollmentDetailsGridData(this.getStudyKey()).pipe(takeUntil(this.subscriptions)).subscribe(data => {\r\n      if (data) {\r\n        console.log('gridheight : setting row data grid ready subscription');\r\n        this.rowData = data.rowData;\r\n        const reportingFreqData = this.enrollmentDetailsService.getReportingFreqData(this.getStudyKey());\r\n        this.edColDefService.setReportingFreq(reportingFreqData);\r\n        this.edGridService.refreshColumnData(reportingFreqData, this.columnApi);\r\n        this.gridApi.refreshHeader();\r\n        this.edGridService.showHideCohortColumns(this.columnApi, data.isCohortStudy);\r\n        this.gridApi.onFilterChanged();\r\n      } else {\r\n        console.log('Grid Data not received');\r\n        // throw new Error('Error in loading data for grid from API');\r\n      }\r\n    });\r\n    this.setGridPrefences();\r\n\r\n  }\r\n   setGridPrefences(): void {\r\n    const self = this;\r\n    if (self.\r\n      columnPreferencesService.getPrefForGridColumns().\r\n      PreferenceGridColumns[PrefGridColumnsKeys.SITE_ENROLLMENT_GRID] !== '' &&\r\n      self.\r\n      columnPreferencesService.getPrefForGridColumns().\r\n      PreferenceGridColumns[PrefGridColumnsKeys.SITE_ENROLLMENT_GRID] !== undefined) {\r\n        self.columnApi.setColumnState(self.\r\n          columnPreferencesService.getPrefForGridColumns().PreferenceGridColumns[PrefGridColumnsKeys.SITE_ENROLLMENT_GRID]);\r\n      }\r\n    self.columnPreferencesService.getGridPreference().subscribe(data => {\r\n      if (data) {\r\n     if (self.\r\n      columnPreferencesService.getPrefForGridColumns().\r\n      PreferenceGridColumns[PrefGridColumnsKeys.SITE_ENROLLMENT_GRID] !== '' &&\r\n      self.\r\n      columnPreferencesService.getPrefForGridColumns().\r\n      PreferenceGridColumns[PrefGridColumnsKeys.SITE_ENROLLMENT_GRID] !== undefined) {\r\n        self.columnApi.setColumnState(self.\r\n          columnPreferencesService.getPrefForGridColumns().PreferenceGridColumns[PrefGridColumnsKeys.SITE_ENROLLMENT_GRID]);\r\n        }\r\n     }\r\n    });\r\n  }\r\n  columnVisible(event: ColumnVisibleEvent) {\r\n    const self = this;\r\n    if (!event.column) {\r\n      return;\r\n    }\r\n    self.columnPreferencesService.sendUpdateColumnPrefRequest(\r\n      self.gridColumnApi.getColumnState(), PrefGridColumnsKeys.SITE_ENROLLMENT_GRID);\r\n    // sessionStorage.setItem(PrefGridColumnsKeys.SITE_DATA_MANAGEMENT_GRID, this.gridColumnApi.getColumnState()) ;\r\n  }\r\n\r\n\r\n  dragStopped(event: DragStoppedEvent): void {\r\n    this.columnPreferencesService.sendUpdateColumnPrefRequest(\r\n      this.gridColumnApi.getColumnState(), PrefGridColumnsKeys.SITE_ENROLLMENT_GRID);\r\n  }\r\n\r\n  firstDataRendered(event) {\r\n    console.log('gridheight : firstDataRendered');\r\n    event.api.refreshClientSideRowModel('filter');\r\n  }\r\n\r\n  onRowDataUpdated(event) {\r\n    console.log('gridheight : onRowDataUpdated');\r\n    event.api.refreshClientSideRowModel('filter');\r\n  }\r\n\r\n  rowDataChanged(event: RowDataChangedEvent) {\r\n    console.log('gridheight : rowDataChanged');\r\n    this.setCountryGridHeight(event, GROUP_ACTIONS.EXPAND);\r\n  }\r\n  onrowGroupOpened(event: RowGroupOpenedEvent) {\r\n    console.log('gridheight : onrowGroupOpened');\r\n    this.setCountryGridHeight(event, GROUP_ACTIONS.EXPAND);\r\n  }\r\n\r\n  setCountryGridHeight(event, action = GROUP_ACTIONS.EXPAND) {\r\n    const parentDiv = this.edGrid.nativeElement;\r\n    const gridCardWrapperHeight = this.gridCardWrapper && this.gridCardWrapper.nativeElement.offsetHeight;\r\n    const gridHeight = this.edGridService.setGridHeight(action, event.api, gridCardWrapperHeight);\r\n    this.renderer.setStyle(parentDiv, 'height', gridHeight + 'px');\r\n    event.api.refreshView();\r\n  }\r\n\r\n  groupRowAggNodes(nodes) {\r\n    const result = {\r\n      totalScreened: 0,\r\n      subInScreening: 0,\r\n      exitScreened: 0,\r\n      totalScreenFailed: 0,\r\n      totalPlanEnrolled: 0,\r\n      screenFailureRate: 0,\r\n      screenRate: 0,\r\n      actualEnrolled: 0,\r\n      RR: 0,\r\n      multipliedSubjectsPerDay: 0,\r\n      totalDropOuts: 0,\r\n      dropOutRate: 0,\r\n      // srcFSIDt: null,\r\n      siteInitiatedDt: null,\r\n      cohortMapping: null,\r\n      cohortActivityExpected: null,\r\n      // actualLSSDt: null,\r\n      // actualLSFVDt: null,\r\n      actualFSSVCountForRegion: 0,\r\n      actualFSSVCountForWW: 0,\r\n      totalScreenRateForRegion: 0,\r\n      totalScreenRateForWW: 0,\r\n\r\n      actualFSSVCountForRegionForRR: 0,\r\n      actualFSSVCountForWWForRR: 0,\r\n      totalRRForRegion: 0,\r\n      totalRRForWW: 0\r\n    };\r\n    let cohortActivityExpectedCount = 0;\r\n    let cohortActivityExpectedTotalCount = 0;\r\n    let mappedCohortCount = 0;\r\n    let totalCohortCount = 0;\r\n    let actualFSSVCount = 0;\r\n\r\n    let actualFSSVCountForSubjectPerPay = 0;\r\n\r\n    let currentGeoLevel = null;\r\n    nodes.forEach((node) => {\r\n      const resources = (this && this.edColDefService && this.edColDefService.getResourceForMapping()) || { ALL: 'ALL', OF: 'of' };\r\n      let data = null;\r\n      if (node.data) {\r\n        if (node.data.isLeafNode) {\r\n          data = node.data;\r\n        } else {\r\n          data = node.aggData;\r\n        }\r\n\r\n        if (!data) {\r\n          console.log('data is undefined : ', node);\r\n        }\r\n        if (data && data.totalScreened && typeof data.totalScreened === 'number' && !data.cohortID) {\r\n          result.totalScreened += data.totalScreened;\r\n        } else {\r\n          if (data && data.siteKey) {\r\n            result.totalScreened = data.siteTotalScreenedCount;\r\n          }\r\n        }\r\n\r\n        if (data && typeof data.subInScreening === 'number' && !data.cohortID) {\r\n          result.subInScreening += data.subInScreening;\r\n        } else {\r\n          if (data && data.siteKey) {\r\n            result.subInScreening = data.siteSubInScreenedCount;\r\n          }\r\n        }\r\n\r\n        if (data && typeof data.exitScreened === 'number' && !data.cohortID) {\r\n          result.exitScreened += data.exitScreened;\r\n        } else {\r\n          if (data && data.siteKey) {\r\n            result.exitScreened = data.siteExitScreenedCount;\r\n          }\r\n        }\r\n\r\n        if (data && typeof data.totalScreenFailed === 'number' && !data.cohortID) {\r\n          result.totalScreenFailed += data.totalScreenFailed;\r\n        } else {\r\n          if (data && data.siteKey) {\r\n            result.totalScreenFailed = data.siteTotalScreenFailedCount;\r\n          }\r\n        }\r\n        result.screenFailureRate = (result.totalScreenFailed / result.exitScreened) * 100;\r\n\r\n        if (data && typeof data.screenRate === 'number' && !data.cohortID) {\r\n          if (node.data.geographyLevel === GEOGRAPHY_LEVEL.SITE) {\r\n            if (node.data.actualFSFVDt && !isNaN(node.data.screenRate) && node.data.screenRate > 0) {\r\n              actualFSSVCount++;\r\n              result.actualFSSVCountForRegion++;\r\n              result.totalScreenRateForRegion += (data.screenRate);\r\n              result.screenRate += (node.data.screenRate);\r\n            }\r\n            currentGeoLevel = GEOGRAPHY_LEVEL.SITE;\r\n          } else if (node.data.geographyLevel === GEOGRAPHY_LEVEL.COUNTRY) {\r\n            result.totalScreenRateForRegion += data.totalScreenRateForRegion;\r\n            result.actualFSSVCountForRegion += data.actualFSSVCountForRegion;\r\n            currentGeoLevel = GEOGRAPHY_LEVEL.COUNTRY;\r\n          } else if (node.data.geographyLevel === GEOGRAPHY_LEVEL.REGION) {\r\n            currentGeoLevel = GEOGRAPHY_LEVEL.REGION;\r\n            result.actualFSSVCountForWW += data.actualFSSVCountForRegion;\r\n            result.totalScreenRateForWW += data.totalScreenRateForRegion;\r\n          } else {\r\n            actualFSSVCount++;\r\n            result.screenRate += (node.data.screenRate);\r\n          }\r\n        } else {\r\n          if (node.data && node.data.siteKey) {\r\n            result.screenRate = node.data.siteScreenRate;\r\n          }\r\n        }\r\n\r\n        if (data && typeof data.RR === 'number' && !data.cohortID) {\r\n          // result.totalScreenFailed += data.totalScreenFailed;\r\n          if (node.data.geographyLevel === GEOGRAPHY_LEVEL.SITE) {\r\n            if (node.data.actualFSFVDt && !isNaN(node.data.RR)) {\r\n              actualFSSVCountForSubjectPerPay++;\r\n              result.actualFSSVCountForRegionForRR++;\r\n              // result.actualFSSVCountForWW++;\r\n              result.totalRRForRegion += (node.data.RR);\r\n              // result.totalScreenRateForWW += (data.RR);\r\n              result.RR += (node.data.RR);\r\n            }\r\n            currentGeoLevel = GEOGRAPHY_LEVEL.SITE;\r\n          } else if (node.data.geographyLevel === GEOGRAPHY_LEVEL.COUNTRY) {\r\n            result.totalRRForRegion += data.totalRRForRegion;\r\n            // result.totalScreenRateForWW += data.totalScreenRateForWW;\r\n            result.actualFSSVCountForRegionForRR += data.actualFSSVCountForRegionForRR;\r\n            // result.actualFSSVCountForWW += data.actualFSSVCountForWW;\r\n            currentGeoLevel = GEOGRAPHY_LEVEL.COUNTRY;\r\n          } else if (node.data.geographyLevel === GEOGRAPHY_LEVEL.REGION) {\r\n            currentGeoLevel = GEOGRAPHY_LEVEL.REGION;\r\n            result.actualFSSVCountForWWForRR += data.actualFSSVCountForRegionForRR;\r\n            result.totalRRForWW += data.totalRRForRegion;\r\n          } else {\r\n            actualFSSVCountForSubjectPerPay++;\r\n            result.RR += (node.data.RR);\r\n            // if (data && data.siteKey) {\r\n            //   result.screenRate = data.siteScreenRate;\r\n            // }\r\n          }\r\n        } else {\r\n          if (node.data && node.data.siteKey) {\r\n            result.RR = node.data.siteRR;\r\n          }\r\n        }\r\n\r\n\r\n\r\n        if (data && typeof data.totalPlanEnrolled === 'number' && !data.cohortID) {\r\n          result.totalPlanEnrolled += data.totalPlanEnrolled;\r\n        } else {\r\n          if (data && data.siteKey) {\r\n            result.totalPlanEnrolled = data.siteTotalPlanEnrolled;\r\n          }\r\n        }\r\n\r\n        if (data && typeof data.actualEnrolled === 'number' && !data.cohortID) {\r\n          result.actualEnrolled += data.actualEnrolled;\r\n        } else {\r\n          if (data && data.siteKey) {\r\n            result.actualEnrolled = data.siteActualEnrolled;\r\n          }\r\n        }\r\n\r\n        if (data && typeof data.multipliedSubjectsPerDay === 'number' && !data.cohortID) {\r\n          result.multipliedSubjectsPerDay += data.multipliedSubjectsPerDay;\r\n        } else {\r\n          if (data && data.siteKey) {\r\n            result.multipliedSubjectsPerDay = data.siteMultipliedSubjectsPerDay;\r\n          }\r\n        }\r\n\r\n        if (data && typeof data.totalDropOuts === 'number' && !data.cohortID) {\r\n          result.totalDropOuts += data.totalDropOuts;\r\n        } else {\r\n          if (data && data.siteKey) {\r\n            result.totalDropOuts = data.siteTotalDropOuts;\r\n          }\r\n        }\r\n        if (result.actualEnrolled === 0 && result.totalDropOuts > 0) {\r\n          result.dropOutRate = 100;\r\n        } else {\r\n          const calcDropOutRate = (result.totalDropOuts / result.actualEnrolled) * 100;\r\n          result.dropOutRate = isNaN(calcDropOutRate) ? 0 : calcDropOutRate;\r\n        }\r\n\r\n        // // #srcFSIDt\r\n        // if (node.data.geographyLevel === GEOGRAPHY_LEVEL.COUNTRY) {\r\n        //   data = node.aggData;\r\n        // } else {\r\n        //   data = node.data;\r\n        // }\r\n        // if (data) {\r\n        //   if (node.data.geographyLevel === GEOGRAPHY_LEVEL.SITE) {\r\n        //     if (AppUtil.isDefined(result.srcFSIDt)) {\r\n        //       if (!AppUtil.dateCompare(result.srcFSIDt, data.srcFSIDt)) {\r\n        //         result.srcFSIDt = data.srcFSIDt;\r\n        //       }\r\n        //     } else {\r\n        //       result.srcFSIDt = data.srcFSIDt;\r\n        //     }\r\n        //   } else if (node.data.geographyLevel === GEOGRAPHY_LEVEL.COUNTRY) {\r\n        //     result.srcFSIDt = null;\r\n        //   } else {\r\n        //     result.srcFSIDt = data.srcFSIDt;\r\n        //   }\r\n        // }\r\n        // // #siteInitiatedDt\r\n        // if (node.data.geographyLevel === GEOGRAPHY_LEVEL.COUNTRY) {\r\n        //   data = node.aggData;\r\n        // } else {\r\n        //   data = node.data;\r\n        // }\r\n        // if (data) {\r\n        //   if (node.data.geographyLevel === GEOGRAPHY_LEVEL.SITE) {\r\n        //     if (AppUtil.isDefined(result.siteInitiatedDt)) {\r\n        //       if (!AppUtil.dateCompare(result.siteInitiatedDt, data.siteInitiatedDt)) {\r\n        //         result.siteInitiatedDt = data.siteInitiatedDt;\r\n        //       }\r\n        //     } else {\r\n        //       result.siteInitiatedDt = data.siteInitiatedDt;\r\n        //     }\r\n        //   } else if (node.data.geographyLevel === GEOGRAPHY_LEVEL.COUNTRY) {\r\n        //     result.siteInitiatedDt = null;\r\n        //   } else {\r\n        //     result.siteInitiatedDt = data.siteInitiatedDt;\r\n        //   }\r\n        // }\r\n        // // #isCohActExp\r\n        if (node.data.geographyLevel === GEOGRAPHY_LEVEL.SITE) {\r\n          data = node.aggData;\r\n        } else {\r\n          data = node.data;\r\n        }\r\n        if (data) {\r\n          if (node.data.geographyLevel === GEOGRAPHY_LEVEL.COHORT) {\r\n            if (data.isCohActExp) {\r\n              cohortActivityExpectedCount++;\r\n            }\r\n            cohortActivityExpectedTotalCount++;\r\n            if (nodes.length === cohortActivityExpectedTotalCount) {\r\n              if (cohortActivityExpectedCount === cohortActivityExpectedTotalCount) {\r\n                result.cohortActivityExpected = resources.ALL;\r\n              } else {\r\n                result.cohortActivityExpected = cohortActivityExpectedCount + ' ' + resources.OF + ' ' + cohortActivityExpectedTotalCount;\r\n              }\r\n            }\r\n          } else {\r\n            result.cohortActivityExpected = null;\r\n          }\r\n        }\r\n\r\n        // // # cohortID or Cohort Mapping\r\n        if (node.data.geographyLevel === GEOGRAPHY_LEVEL.SITE) {\r\n          data = node.aggData;\r\n        } else {\r\n          data = node.data;\r\n        }\r\n        if (data) {\r\n          if (node.data.geographyLevel === GEOGRAPHY_LEVEL.COHORT) {\r\n            if (data.isMappedInPlan === true) {\r\n              mappedCohortCount++;\r\n            }\r\n            totalCohortCount++;\r\n            if (nodes.length === totalCohortCount) {\r\n              if (mappedCohortCount === totalCohortCount) {\r\n                result.cohortMapping = resources.ALL;\r\n              } else {\r\n                result.cohortMapping = mappedCohortCount + ' ' + resources.OF + ' ' + totalCohortCount;\r\n              }\r\n            }\r\n          } else {\r\n            result.cohortMapping = null;\r\n          }\r\n        }\r\n        // // #actualLSSDt\r\n        // if (node.data.geographyLevel === GEOGRAPHY_LEVEL.COUNTRY) {\r\n        //   data = node.aggData;\r\n        // } else {\r\n        //   data = node.data;\r\n        // }\r\n        // if (data) {\r\n        //   if (node.data.geographyLevel === GEOGRAPHY_LEVEL.SITE) {\r\n        //     if (AppUtil.isDefined(result.actualLSSDt)) {\r\n        //       if (!AppUtil.dateCompare(data.actualLSSDt, result.actualLSSDt)) {\r\n        //         result.actualLSSDt = data.actualLSSDt;\r\n        //       }\r\n        //     } else {\r\n        //       result.actualLSSDt = data.actualLSSDt;\r\n        //     }\r\n        //   } else if (node.data.geographyLevel === GEOGRAPHY_LEVEL.COUNTRY) {\r\n        //     result.actualLSSDt = null;\r\n        //   } else {\r\n        //     result.actualLSSDt = data.actualLSSDt;\r\n        //   }\r\n        // }\r\n        // //  #actualLSFVDt\r\n        // if (node.data.geographyLevel === GEOGRAPHY_LEVEL.COUNTRY) {\r\n        //   data = node.aggData;\r\n        // } else {\r\n        //   data = node.data;\r\n        // }\r\n        // if (data) {\r\n        //   if (node.data.geographyLevel === GEOGRAPHY_LEVEL.SITE) {\r\n        //     if (AppUtil.isDefined(result.actualLSFVDt)) {\r\n        //       if (!AppUtil.dateCompare(data.actualLSFVDt, result.actualLSFVDt)) {\r\n        //         result.actualLSFVDt = data.actualLSFVDt;\r\n        //       }\r\n        //     } else {\r\n        //       result.actualLSFVDt = data.actualLSFVDt;\r\n        //     }\r\n        //   } else if (node.data.geographyLevel === GEOGRAPHY_LEVEL.COUNTRY) {\r\n        //     result.actualLSFVDt = null;\r\n        //   } else {\r\n        //     result.actualLSFVDt = data.actualLSFVDt;\r\n        //   }\r\n        // }\r\n      }\r\n    });\r\n\r\n    if (currentGeoLevel === GEOGRAPHY_LEVEL.SITE) {\r\n      result.screenRate = (result.screenRate / actualFSSVCount);\r\n      result.RR = (result.RR / actualFSSVCountForSubjectPerPay);\r\n    } else if (currentGeoLevel === GEOGRAPHY_LEVEL.COUNTRY) {\r\n      result.screenRate = result.totalScreenRateForRegion / result.actualFSSVCountForRegion;\r\n      result.RR = result.totalRRForRegion / result.actualFSSVCountForRegionForRR;\r\n    } else if (currentGeoLevel === GEOGRAPHY_LEVEL.REGION) {\r\n      result.screenRate = result.totalScreenRateForWW / result.actualFSSVCountForWW;\r\n      result.RR = result.totalRRForWW / result.actualFSSVCountForWWForRR;\r\n    } else {\r\n    }\r\n    return result;\r\n  }\r\n\r\n  isExternalFilterChanged() {\r\n    this.enrollmentDetailsService.externalFilterChanged()\r\n      .pipe(takeUntil(this.subscriptions))\r\n      .subscribe(data => {\r\n        if (data) {\r\n          this.gridApi.onFilterChanged();\r\n          this.gridApi.refreshCells();\r\n        }\r\n      });\r\n  }\r\n\r\n  isExternalFilterPresent() {\r\n    return true;\r\n  }\r\n\r\n  doesExternalFilterPass = (node) => {\r\n    return this.gridFilterService.filterEnrollmentGridData(node);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subscriptions.next();\r\n    this.subscriptions.complete();\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { EnrollmentDetailsRoutingModule } from './enrollment-details-routing.module';\r\nimport { EnrollmentDetailsComponent } from './enrollment-details.component';\r\nimport { AgGridModule } from 'ag-grid-angular';\r\n\r\n@NgModule({\r\n  declarations: [EnrollmentDetailsComponent],\r\n  imports: [\r\n    CommonModule,\r\n    EnrollmentDetailsRoutingModule,\r\n    AgGridModule.withComponents([])\r\n  ]\r\n})\r\nexport class EnrollmentDetailsModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { StudyListService, AppDataService } from 'so-common-library';\r\nimport { map } from 'rxjs/operators';\r\nimport { Observable } from 'rxjs';\r\nimport { SiteFilterService } from '../sites-filter/sites-filter.service';\r\nimport { SitesService } from '../sites.service';\r\nimport { GEOGRAPHY_LEVEL, SITE_API_FORKJOIN_SEQ, SELECT_WORLD_WIDE } from '@app4/app.constant';\r\n\r\n\r\n\r\n@Injectable()\r\nexport class EnrollmentDetailsService {\r\n\r\n  constructor(\r\n    private sitesService: SitesService,\r\n    private siteFilterService: SiteFilterService,\r\n    public studyListService: StudyListService,\r\n    public appDataService: AppDataService\r\n  ) { }\r\n\r\n  getEnrollmentDetailsGridData(studyKey?: number): Observable<any> {\r\n    return this.sitesService.getDataObservable().pipe(\r\n      // catchError(error => of(error)),\r\n      map(response => {\r\n        if (response) {\r\n          console.log('response data : ', response);\r\n          const data = this.getRowData(response[SITE_API_FORKJOIN_SEQ.CENTER_SUMMARY],\r\n            response[SITE_API_FORKJOIN_SEQ.RECRUITMENT_CENTER_LIST],\r\n            response[SITE_API_FORKJOIN_SEQ.STUDY_SUMMARY]);\r\n          const studyID = this.sitesService.getLastVisitedStudyKey();\r\n          return { rowData: data, isCohortStudy: this.sitesService.isCohortStudy(studyID) };\r\n        } else {\r\n          return null;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  getReportingFreqData(studyKey: number) {\r\n    return this.sitesService.getReportingPeriod(studyKey);\r\n  }\r\n\r\n  getRowData(centerSummaryData: any, recruitmentCenterListData: any, studySummaryData: any) {\r\n    let centerSummaryModel: any = [];\r\n    if (this.isValidCenterSummaryData(centerSummaryData)) {\r\n      centerSummaryModel = this.convertCenterSummaryModel([].concat(centerSummaryData.centerSummary.centerThumbnail));\r\n    }\r\n    const studyID = this.sitesService.getLastVisitedStudyKey();\r\n    const isCohortStudy = this.sitesService.isCohortStudy(studyID);\r\n    if (this.isValidRecruitmentCenterListData(recruitmentCenterListData)) {\r\n      return this.convertRecruitmentCenterListModel([].concat(recruitmentCenterListData.recruitmentCenterList.recGeoList.geography),\r\n        centerSummaryModel, isCohortStudy);\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  isValidCenterSummaryData(centerSummaryData: any): boolean {\r\n    return centerSummaryData && centerSummaryData.centerSummary && centerSummaryData.centerSummary.centerThumbnail;\r\n  }\r\n\r\n  isValidRecruitmentCenterListData(recruitmentCenterListData): boolean {\r\n    return (recruitmentCenterListData\r\n      && recruitmentCenterListData.recruitmentCenterList\r\n      && recruitmentCenterListData.recruitmentCenterList.recGeoList\r\n      && recruitmentCenterListData.recruitmentCenterList.recGeoList.geography);\r\n  }\r\n\r\n  isCohortStudy(studySummaryData: any): boolean {\r\n    return studySummaryData\r\n      && studySummaryData.studyThumbnail\r\n      && studySummaryData.studyThumbnail.cohortList\r\n      && studySummaryData.studyThumbnail.cohortList.cohortPlanParams\r\n      && [].concat(studySummaryData.studyThumbnail.cohortList.cohortPlanParams).length > 0;\r\n  }\r\n\r\n  convertRecruitmentCenterListModel(geographies: any[], centerSummaryModel: any, isCohortStudy: boolean) {\r\n    const rowData: any[] = [];\r\n    let currentRegion = null;\r\n    if (!geographies) {\r\n      return;\r\n    }\r\n    for (let index = 0; index < geographies.length; index++) {\r\n      const element = geographies[index];\r\n      if (element.geographyLevel === GEOGRAPHY_LEVEL.COUNTRY) {\r\n        element.regionKey = currentRegion.geographyKey;\r\n        element.regionName = currentRegion.geographyName;\r\n        element.geoHierarchy = [SELECT_WORLD_WIDE, element.regionName, element.geographyName];\r\n        rowData.push(element);\r\n        element.centerList.recCenterThumbnail = (element.centerList && element.centerList.recCenterThumbnail)\r\n          ? [].concat(element.centerList.recCenterThumbnail) : [];\r\n        const centerRowData = this.getCenterDataFromCountry(element,\r\n          element.centerList.recCenterThumbnail, centerSummaryModel, isCohortStudy);\r\n        rowData.push(...centerRowData);\r\n      } else if (element.geographyLevel === GEOGRAPHY_LEVEL.REGION) {\r\n        element.regionName = element.geographyName;\r\n        element.geoHierarchy = [SELECT_WORLD_WIDE, element.geographyName];\r\n        rowData.push(element);\r\n        currentRegion = element;\r\n      } else if (element.geographyLevel === GEOGRAPHY_LEVEL.WORLDWIDE) {\r\n        element.geoHierarchy = [SELECT_WORLD_WIDE];\r\n        rowData.push(element);\r\n      }\r\n    }\r\n    return rowData;\r\n  }\r\n\r\n  convertCenterSummaryModel(centerThumbnail: any[]) {\r\n    const model = {};\r\n    if (!centerThumbnail) {\r\n      return;\r\n    }\r\n    for (let index = 0; index < centerThumbnail.length; index++) {\r\n      const element = centerThumbnail[index];\r\n      model[element.studyCenterKey] = element;\r\n    }\r\n    return model;\r\n  }\r\n\r\n  getCenterDataFromCountry(country: any, centers: any[], centerSummaryModel: any, isCohortStudy: boolean) {\r\n    const rowData = [];\r\n    if (!centers) {\r\n      return;\r\n    }\r\n    for (let index = 0; index < centers.length; index++) {\r\n      const element = {\r\n        ...centers[index]\r\n      };\r\n      element.geographyLevel = GEOGRAPHY_LEVEL.SITE;\r\n      element.countryName = country.geographyName;\r\n      element.countryKey = country.geographyKey;\r\n      element.regionKey = country.regionKey;\r\n      element.regionName = country.regionName;\r\n      element.isLeafNode = !isCohortStudy;\r\n      element.screenRate = element.screenRate;\r\n      element.RR = element.subjectsPerDay;\r\n      Object.assign(element, centerSummaryModel[element.studyCenterKey]);\r\n      element.monitors = this.getCenterMonitors(element.centerMonitorList);\r\n      element.geoHierarchy = [SELECT_WORLD_WIDE, element.regionName, element.countryName, element.id];\r\n      rowData.push(element);\r\n      if (element.cohortDetails) {\r\n        const cohortDetailRows = this.getCohortDetailRowData(element);\r\n        rowData.push(...cohortDetailRows);\r\n      }\r\n    }\r\n    return rowData;\r\n  }\r\n\r\n  getCenterMonitors(centerMonitorList): string {\r\n    if (centerMonitorList && centerMonitorList.centerMonitor) {\r\n      return [].concat(centerMonitorList.centerMonitor).map(data => data.monitorName).join();\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  getCohortDetailRowData(siteRow: any) {\r\n    const cohortDetailRows = [];\r\n    const cohorts = siteRow && siteRow.cohortDetails && siteRow.cohortDetails.cohortParams\r\n      ? [].concat(siteRow.cohortDetails.cohortParams) : [];\r\n    for (let index = 0; index < cohorts.length; index++) {\r\n      const element = { ...cohorts[index] };\r\n      element.siteKey = siteRow.studyCenterKey;\r\n      element.siteTotalScreenedCount = siteRow.totalScreened;\r\n      element.siteSubInScreenedCount = siteRow.subInScreening;\r\n      element.siteExitScreenedCount = siteRow.exitScreened;\r\n      element.siteTotalScreenFailedCount = siteRow.totalScreenFailed;\r\n      element.siteScreenFailureRate = siteRow.screenFailureRate;\r\n      element.siteScreenRate = siteRow.screenRate;\r\n      element.screenRate = element.screenRate;\r\n      element.siteRR = siteRow.RR;\r\n      element.RR = element.subjectsPerDay;\r\n      element.siteTotalPlanEnrolled = siteRow.totalPlanEnrolled;\r\n      element.investigatorName = siteRow.investigatorName;\r\n      element.centerMonitorList = siteRow.centerMonitorList;\r\n      element.monitors = siteRow.monitors;\r\n      element.name = siteRow.name;\r\n      element.isLeafNode = !siteRow.isLeafNode;\r\n\r\n      element.siteActualEnrolled = siteRow.actualEnrolled;\r\n      element.siteMultipliedSubjectsPerDay = siteRow.multipliedSubjectsPerDay;\r\n\r\n      element.siteTotalDropOuts = siteRow.totalDropOuts;\r\n      element.siteDropOutRate = siteRow.dropOutRate;\r\n\r\n      element.countryName = siteRow.country;\r\n      element.regionName = siteRow.region;\r\n      element.countryKey = siteRow.countryKey;\r\n      element.regionKey = siteRow.regionKey;\r\n      element.geoHierarchy = [SELECT_WORLD_WIDE, siteRow.region, siteRow.country, siteRow.id,\r\n      (element.cohortName ? element.cohortName : element.cohortID)];\r\n      element.geographyLevel = GEOGRAPHY_LEVEL.COHORT;\r\n      cohortDetailRows.push(element);\r\n    }\r\n    return cohortDetailRows;\r\n  }\r\n\r\n  externalFilterChanged(): Observable<Boolean> {\r\n    return this.siteFilterService.filterHasBeenChanged$;\r\n  }\r\n\r\n  getReportingPeriod(studyKey: number): number {\r\n    const reportingPriodFreq = this.studyListService.getStudyInfoByKey(\r\n      studyKey\r\n    );\r\n    let reportingFreq: any = {};\r\n    if (reportingPriodFreq) {\r\n      reportingFreq = this.appDataService.getReportingFreqDefByName(\r\n        reportingPriodFreq.reportingPeriod\r\n      );\r\n    }\r\n    return reportingFreq.Value;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EdResourceService } from './ed-resource.service';\r\nimport { ValueFormatterParams } from 'ag-grid-community/dist/lib/entities/colDef';\r\nimport { DatePipe, DecimalPipe } from '@angular/common';\r\nimport { StudyListService, AppDataService } from 'so-common-library';\r\nimport { ICON_CLEAR_TEMPLATE, GEOGRAPHY_LEVEL, MAPPED_COHORT, ICON_DONE_TEMPLATE } from '@app4/app.constant';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EdColDefService {\r\n  columnResources: any;\r\n  private reportingFreqData: any;\r\n\r\n  constructor(private resourceService: EdResourceService,\r\n    public studyListService: StudyListService,\r\n    public appDataService: AppDataService) {\r\n\r\n  }\r\n\r\n  getAutogroupColDef() {\r\n    return {\r\n      headerName: this.resourceService.columnResource.SITE_ID,\r\n      rowGroup: true,\r\n      cellRendererParams: {\r\n        suppressCount: true\r\n      },\r\n      cellStyle: (params) => {\r\n        if (params.data.isLeafNode) {\r\n          return { 'padding-left': '30px', 'text-align': 'left' };\r\n        } else {\r\n          return null;\r\n          // return { 'text-align': 'left' };\r\n        }\r\n      },\r\n      cellDoubleClicked: (params) => {\r\n        this.redirectToScoreCardsTab();\r\n      },\r\n      pinned: true,\r\n      width: 200\r\n    };\r\n  }\r\n\r\n  setReportingFreq(reportingFreqData) {\r\n    this.reportingFreqData = reportingFreqData;\r\n  }\r\n\r\n  getColumnDef() {\r\n    const columnResources = this.resourceService.columnResource;\r\n    const colDefs = [];\r\n    // #cohort\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'cohortName',\r\n    }, columnResources.COHORT));\r\n\r\n    // #siteName\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'name',\r\n    }, columnResources.SITE_NAME));\r\n\r\n    // #regionName\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'regionName',\r\n      rowGroup: true,\r\n    }, columnResources.REGION));\r\n    // #countryName\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'countryName',\r\n      rowGroup: true,\r\n    }, columnResources.COUNTRY));\r\n\r\n    // #investigatorName\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'investigatorName',\r\n    }, columnResources.INVESTIGATOR_NAME));\r\n\r\n    // #monitor\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'monitors',\r\n      // valueGetter: this.monitorListValueGetter\r\n    }, columnResources.MONITOR));\r\n\r\n    // #sourceFSI\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'srcFSIDt',\r\n      valueFormatter: this.dateFormatter\r\n    }, columnResources.SOURCE_FSI));\r\n\r\n    // #siteSelectionVisit\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'actualSSVDt',\r\n      valueGetter : this.siteSlectionVisitValueGetter,\r\n      valueFormatter: this.dateFormatter\r\n    }, columnResources.SITE_SELECTION_VISIT));\r\n\r\n    // #initiationDate\r\n\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'siteInitiatedDt',\r\n      valueFormatter: this.dateFormatter\r\n    }, columnResources.INITIATION_DATE));\r\n\r\n    // #cohortReadinessDate\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'crd',\r\n      valueFormatter: this.dateFormatter\r\n    }, columnResources.COHORT_READINESS_DATE));\r\n\r\n    // #cohortActivityDate\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'cohortActivityExpected',\r\n      cellRenderer: (params) => {\r\n        if (params.data.geographyLevel === GEOGRAPHY_LEVEL.COHORT) {\r\n          if (params.data.isCohActExp === true) {\r\n            return ICON_DONE_TEMPLATE;\r\n          } else {\r\n            return ICON_CLEAR_TEMPLATE;\r\n          }\r\n        } else {\r\n          return params.value;\r\n        }\r\n      },\r\n      tooltip: (params) => {\r\n        if (params.data.geographyLevel === GEOGRAPHY_LEVEL.COHORT) {\r\n          if (params.data.isCohActExp) {\r\n            return columnResources.COHORT_ACTIVITY_EXPECTED_TOOLTIP;\r\n          } else {\r\n            return columnResources.COHORT_ACTIVITY_NOT_EXPECTED_TOOLTIP;\r\n          }\r\n        }\r\n        return params.value;\r\n      }\r\n      // valueGetter: this.cohortActivityExpectedValueGetter\r\n    }, columnResources.COHORT_ACTIVITY_DATE));\r\n\r\n    // #cohortPlanMapping\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'cohortMapping',\r\n      cellRenderer: (params) => {\r\n        if (params.data.geographyLevel === GEOGRAPHY_LEVEL.COHORT) {\r\n          if (params.data.isMappedInPlan === true && params.data.cohortName) {\r\n            return ICON_DONE_TEMPLATE;\r\n          } else if (params.data.cohortName) {\r\n            return ICON_CLEAR_TEMPLATE;\r\n          } else {\r\n            return null;\r\n          }\r\n        } else {\r\n          return params.value;\r\n        }\r\n      },\r\n      tooltip: (params) => {\r\n        if (params.data.geographyLevel === GEOGRAPHY_LEVEL.COHORT) {\r\n          if (params.data.isMappedInPlan === true && params.data.cohortName) {\r\n            return columnResources.SITE_MAPPED_COHORT_TOOLTIP;\r\n          } else if (params.data.cohortName) {\r\n            return columnResources.SITE_UNMAPPED_COHORT_TOOLTIP;\r\n          } else {\r\n            return null;\r\n          }\r\n        }\r\n        return params.value;\r\n      }\r\n    }, columnResources.COHORT_PLAN_MAPPING));\r\n\r\n    // #FSSDate\r\n    colDefs.push(this.getColDefWithResourceData(\r\n      {\r\n        field: 'actualFSFVDt',\r\n        valueFormatter: this.dateFormatter\r\n      }, columnResources.FIRST_SUB_SCREENED_DATE));\r\n\r\n    colDefs.push(this.getColDefWithResourceData(\r\n      {\r\n        field: 'siToFSS',\r\n      }, columnResources.FSI_TO_FSS));\r\n\r\n    // #screeningPerf\r\n    const screeningPerfChildren = [\r\n      this.getColDefWithResourceData(\r\n        {\r\n          field: 'totalScreened'\r\n        }, columnResources.TOTAL),\r\n      this.getColDefWithResourceData(\r\n        {\r\n          field: 'subInScreening',\r\n          cellClass: (params) => {\r\n            if (params.value < 0) {\r\n              return 'red-text';\r\n            } else {\r\n              return null;\r\n            }\r\n          }\r\n        }, columnResources.IN_SCREENING),\r\n      this.getColDefWithResourceData({\r\n        field: 'exitScreened',\r\n      }, columnResources.COMPLETED),\r\n      this.getColDefWithResourceData({\r\n        field: 'totalScreenFailed',\r\n      }, columnResources.FAILED),\r\n      this.getColDefWithResourceData({\r\n        field: 'screenFailureRate',\r\n        valueFormatter: this.oneDecimalPercFormatter,\r\n      }, columnResources.ACTUAL_SCREEN_FAILURE_PERC),\r\n      this.getColDefWithResourceData({\r\n        field: 'screenRate',\r\n        valueFormatter: (params: ValueFormatterParams) => {\r\n          const numberPipe = new DecimalPipe('en_US');\r\n          if (isNaN(params.value)) {\r\n            return '';\r\n          }\r\n          return numberPipe.transform(\r\n            (this.reportingFreqData ? (params.value * this.reportingFreqData.reportingFreq) : params.value), '1.0-3');\r\n        }\r\n      }, this.reportingFreqData ?\r\n      columnResources.ACTUAL_SR.replace('{0}', columnResources[this.reportingFreqData.reportingFreqLabel]) : columnResources.ACTUAL_SR )\r\n    ];\r\n\r\n    // #randomizationPerf\r\n    colDefs.push(this.getColDefWithResourceData(\r\n      {\r\n        field: '',\r\n        children: screeningPerfChildren,\r\n        headerClass: 'group-header-class',\r\n        marryChildren: true\r\n      }, columnResources.SCREENING_PERFORMANCE));\r\n\r\n    const randomizationPerfChildren = [\r\n      this.getColDefWithResourceData(\r\n        {\r\n          field: 'totalPlanEnrolled',\r\n        }, columnResources.SOURCE_TARGET),\r\n      this.getColDefWithResourceData(\r\n        {\r\n          field: 'randomized',\r\n        }, columnResources.PLAN_TARGET),\r\n      this.getColDefWithResourceData({\r\n        field: 'actualEnrolled',\r\n      }, columnResources.ACTUAL_RANDOMIZATION),\r\n      this.getColDefWithResourceData({\r\n        field: 'RR',\r\n        // valueFormatter: this.threeDecimalFormatter,\r\n        // valueGetter: (params) => {\r\n        //   return isNaN(params.data.subjectsPerDay) ? null : reportingFreqData.reportingFreq * params.data.subjectsPerDay;\r\n        // },\r\n        valueFormatter: (params: ValueFormatterParams) => {\r\n          const numberPipe = new DecimalPipe('en_US');\r\n          if (isNaN(params.value)) {\r\n            return '';\r\n          }\r\n          return numberPipe.transform(\r\n            (this.reportingFreqData ? (params.value * this.reportingFreqData.reportingFreq) : params.value), '1.0-3');\r\n        }\r\n      // }, columnResources.ACTUAL_RR.replace('{0}', reportingFreqLabelValue))\r\n      }, this.reportingFreqData ?\r\n      columnResources.ACTUAL_RR.replace('{0}', columnResources[this.reportingFreqData.reportingFreqLabel]) : columnResources.ACTUAL_RR )\r\n    // }, columnResources.ACTUAL_RR)\r\n    ];\r\n    colDefs.push(this.getColDefWithResourceData(\r\n      {\r\n        field: '',\r\n        children: randomizationPerfChildren,\r\n        headerClass: 'group-header-class',\r\n        marryChildren: true\r\n      }, columnResources.RANDOMIZATION_PERFORMANCE));\r\n\r\n    // #latestSiteActivity\r\n    const latestSiteActivityChildren = [\r\n      this.getColDefWithResourceData(\r\n        {\r\n          field: 'latestSubjScrnDt',\r\n          valueFormatter: this.dateFormatter\r\n        }, columnResources.SCREENED),\r\n      this.getColDefWithResourceData(\r\n        {\r\n          field: 'latestSubjRandDt',\r\n          valueFormatter: this.dateFormatter\r\n        }, columnResources.RANDOMIZED),\r\n      this.getColDefWithResourceData({\r\n        field: 'stopProjDt',\r\n        valueFormatter: this.dateFormatter\r\n      }, columnResources.STOP_PROJECTION),\r\n      this.getColDefWithResourceData({\r\n        field: 'ModifiedDt',\r\n        valueFormatter: this.dateFormatter\r\n      }, columnResources.MODIFIED_DATE),\r\n      this.getColDefWithResourceData({\r\n        field: 'ModifiedBy',\r\n      }, columnResources.MODIFIED_BY),\r\n      this.getColDefWithResourceData({\r\n        field: 'noProjContInd',\r\n        cellRenderer: (params) => {\r\n            if (params.value === true) {\r\n              return ICON_CLEAR_TEMPLATE;\r\n            } else if (params.value === false) {\r\n              return ICON_DONE_TEMPLATE;\r\n            } else {\r\n              return null;\r\n            }\r\n        },\r\n        tooltip: (params) => {\r\n          if (params.value === true) {\r\n            return columnResources.SITE_NOT_INCLUDED_IN_PROJECTION_TOOLTIP;\r\n          } else if (params.value === false) {\r\n            return columnResources.SITE_INCLUDED_IN_PROJECTION_TOOLTIP;\r\n          } else {\r\n            return params.value;\r\n          }\r\n        }\r\n      }, columnResources.PROJECTIONS)\r\n    ];\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      children: latestSiteActivityChildren,\r\n      headerClass: 'group-header-class',\r\n      marryChildren: true\r\n    }, columnResources.LATEST_SITE_ACTIVITY));\r\n\r\n    // #retention\r\n    const retentionChildren = [\r\n      this.getColDefWithResourceData(\r\n        {\r\n          field: 'totalDropOuts',\r\n        }, columnResources.DROPOUTS),\r\n      this.getColDefWithResourceData({\r\n        field: 'dropOutRate',\r\n        valueFormatter: this.oneDecimalPercFormatter\r\n      }, columnResources.DROPOUTS_PERC),\r\n    ];\r\n    colDefs.push(this.getColDefWithResourceData(\r\n      {\r\n        field: '',\r\n        children: retentionChildren,\r\n        headerClass: 'group-header-class',\r\n        marryChildren: true\r\n      }, columnResources.RETENTION));\r\n\r\n    colDefs.push(this.getColDefWithResourceData(\r\n      {\r\n        field: 'activeDuration',\r\n      }, columnResources.ENROLLMENT_DURATION));\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'actualLSSDt',\r\n      valueFormatter: this.dateFormatter\r\n    }, columnResources.LSS_DATE));\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'actualLSFVDt',\r\n      valueFormatter: this.dateFormatter\r\n    }, columnResources.LSR_DATE));\r\n    colDefs.push(this.getColDefWithResourceData({\r\n      field: 'status',\r\n    }, columnResources.SITE_STATUS));\r\n    // colDefs.push(this.getColDefWithResourceData({\r\n    //   field: 'isCoe',\r\n    // }, columnResources.CENTER_OF_EXCELLENCE));\r\n    // colDefs.push(this.getColDefWithResourceData({\r\n    //   field: 'notesLength',\r\n    // }, columnResources.NOTES));\r\n    return colDefs;\r\n  }\r\n\r\n  getColDefWithResourceData(colDef: any, resourceValue: string) {\r\n    return Object.assign({\r\n      headerName: resourceValue,\r\n      headerTooltip: resourceValue,\r\n      colName: resourceValue,\r\n      colValueToMap: resourceValue,\r\n      width: 200,\r\n      enableValue: true,\r\n      tooltip: function (params) {\r\n        return (params.valueFormatted ? params.valueFormatted : params.value);\r\n      }\r\n    }, colDef);\r\n  }\r\n\r\n  getDefaultColumnDef() {\r\n    return {\r\n      width: 100,\r\n      editable: false,\r\n      menuTabs: ['filterMenuTab', 'columnsMenuTab'],\r\n      filterParams: { suppressMiniFilter: true },\r\n      cellStyle: { 'text-align': 'center' },\r\n      lockPinned: true\r\n    };\r\n  }\r\n\r\n  public dateFormatter = (params: ValueFormatterParams) => {\r\n    const datePipe = new DatePipe('en_US');\r\n    let date = null;\r\n    if (params.value instanceof Date) {\r\n      date = params.value;\r\n    } else {\r\n      date = new Date((params.value || '').replace(/-/g, '/'));\r\n    }\r\n    if (!params.value || isNaN(date.getTime())) {\r\n      return '';\r\n    }\r\n\r\n    return datePipe.transform(date, 'dd-MMM-yyyy');\r\n  }\r\n\r\n  public threeDecimalFormatter = (params: ValueFormatterParams) => {\r\n    const numberPipe = new DecimalPipe('en_US');\r\n    if (isNaN(params.value)) {\r\n      return '';\r\n    }\r\n\r\n    return numberPipe.transform(params.value, '1.0-3');\r\n  }\r\n\r\n  public monitorListValueGetter = (params) => {\r\n    console.log('monitor : ', params.value);\r\n    if (params.data.centerMonitorList && params.data.centerMonitorList.centerMonitor) {\r\n      return [].concat(params.data.centerMonitorList.centerMonitor).map(data => data.monitorName).join();\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public oneDecimalFormatter = (params: ValueFormatterParams) => {\r\n    const numberPipe = new DecimalPipe('en_US');\r\n    if (isNaN(params.value)) {\r\n      return '';\r\n    }\r\n\r\n    return numberPipe.transform(params.value, '1.0-1');\r\n  }\r\n\r\n  public oneDecimalPercFormatter = (params: ValueFormatterParams) => {\r\n    const numberPipe = new DecimalPipe('en_US');\r\n    if (isNaN(params.value)) {\r\n      return '';\r\n    }\r\n\r\n    return numberPipe.transform(params.value, '1.0-1') + '%';\r\n  }\r\n\r\n  getReportingPeriodResource(columnResources: any, label: string): string {\r\n    switch (label) {\r\n      case 'DAILY':\r\n        return columnResources.DAILY;\r\n      case 'WEEK':\r\n        return columnResources.WEEKLY;\r\n      case 'MONTH':\r\n        return columnResources.MONTHLY;\r\n      case 'QUARTER':\r\n        return columnResources.QUARTERLY;\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  getResourceForMapping() {\r\n    const resources = this.resourceService.columnResource;\r\n    return {\r\n      OF: resources.OF,\r\n      ALL: resources.ALL\r\n    };\r\n  }\r\n\r\n  redirectToScoreCardsTab() {\r\n    console.log('Redirect to score card tab');\r\n  }\r\n\r\n  public siteSlectionVisitValueGetter = (params) => {\r\n    if (params.data.geographyLevel === GEOGRAPHY_LEVEL.COUNTRY) {\r\n      return params.data.countryActualSSVDt;\r\n    } else {\r\n      return params.data.actualSSVDt;\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}