(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{hLHt:function(e,t,s){"use strict";s.r(t);var a=s("LoAr"),o=function(){return function(){}}(),r=s("C9Ky"),l=s("Cko2"),i=s("B4Rk"),u=s("uMZP"),n=s("ZGLG"),c=s("glrp"),S=function(){function e(e,t){this.localeAppResourcesService=e,this.studyHeaderService=t,this.buildColumnDef()}return e.prototype.buildColumnDef=function(){this.columnDefList=[{headerName:this.getHeaderResource().STUDY_MILESTONES,headerTooltip:this.getHeaderResource().STUDY_MILESTONES,headerClass:["text-left","column-separator"],pinned:"left",suppressMovable:!0,suppressMenu:!0,suppressColumnsToolPanel:!0,lockPosition:!0,field:"name",width:130,suppressSizeToFit:!0,cellClass:["text-left"]},{headerName:this.getHeaderResource().FINAL_PROTOCOL_APPROVED,headerTooltip:this.getHeaderResource().FINAL_PROTOCOL_APPROVED,headerClass:["text-left","column-separator"],field:"FPA",valueFormatter:n.a.dateFormatter,cellStyle:n.a.varianceStyle,cellClass:n.a.dateColumnClass},{headerName:this.getHeaderResource().REGULATORY_SUBMISSION,headerTooltip:this.getHeaderResource().REGULATORY_SUBMISSION,headerClass:["text-left","column-separator"],field:"REGSUB",valueFormatter:n.a.dateFormatter,cellStyle:n.a.varianceStyle,cellClass:n.a.dateColumnClass},{headerName:this.getHeaderResource().FIRST_SITE_INITIATED,headerTooltip:this.getHeaderResource().FIRST_SITE_INITIATED,headerClass:["text-left","column-separator"],field:"FSI",valueFormatter:n.a.dateFormatter,cellStyle:n.a.varianceStyle,cellClass:n.a.dateColumnClass},{headerName:this.getHeaderResource().FIRST_SUBJECT_SCREENED,headerTooltip:this.getHeaderResource().FIRST_SUBJECT_SCREENED,headerClass:["text-left","column-separator"],field:"FSS",valueFormatter:n.a.dateFormatter,cellStyle:n.a.varianceStyle,cellClass:n.a.dateColumnClass},{headerName:this.getHeaderResource().FIRST_SUBJECT_RANDOMIZED,headerTooltip:this.getHeaderResource().FIRST_SUBJECT_RANDOMIZED,headerClass:["text-left","column-separator"],field:"FSR",valueFormatter:n.a.dateFormatter,cellStyle:n.a.varianceStyle,cellClass:n.a.dateColumnClass},{headerName:this.getHeaderResource().LAST_SUBJECT_SCREENED,headerTooltip:this.getHeaderResource().LAST_SUBJECT_SCREENED,headerClass:["text-left","column-separator"],field:"LSS",valueFormatter:n.a.dateFormatter,cellStyle:n.a.varianceStyle,cellClass:n.a.dateColumnClass},{headerName:this.getHeaderResource().LAST_SUBJECT_RANDOMIZED,headerTooltip:this.getHeaderResource().LAST_SUBJECT_RANDOMIZED,headerClass:["text-left","column-separator"],field:"LSR",valueFormatter:n.a.dateFormatter,cellStyle:n.a.varianceStyle,cellClass:n.a.dateColumnClass},{headerName:this.getHeaderResource().LAST_SUBJECT_TREATED,headerTooltip:this.getHeaderResource().LAST_SUBJECT_TREATED,headerClass:["text-left","column-separator"],field:"LST",valueFormatter:n.a.dateFormatter,cellStyle:n.a.varianceStyle,cellClass:n.a.dateColumnClass},{headerName:this.getHeaderResource().DATABASE_FREEZE,headerTooltip:this.getHeaderResource().DATABASE_FREEZE,headerClass:["text-left","column-separator"],field:"DBF",valueFormatter:n.a.dateFormatter,cellStyle:n.a.varianceStyle,cellClass:n.a.dateColumnClass},{headerName:this.getHeaderResource().STATISTICAL_ANALYSIS_COMPLETE,headerTooltip:this.getHeaderResource().STATISTICAL_ANALYSIS_COMPLETE,headerClass:["text-left","column-separator"],field:"SAC",valueFormatter:n.a.dateFormatter,cellStyle:n.a.varianceStyle,cellClass:n.a.dateColumnClass},{headerName:this.getHeaderResource().CLINICAL_STUDY_REPORT_COMPLETE,headerTooltip:this.getHeaderResource().CLINICAL_STUDY_REPORT_COMPLETE,headerClass:["text-left"],field:"IACSR",valueFormatter:n.a.dateFormatter,cellStyle:n.a.varianceStyle,cellClass:n.a.dateColumnClass}]},e.prototype.getHeaderResource=function(){return{STUDY_MILESTONES:this.localeAppResourcesService.getResource("SMColTitle"),FINAL_PROTOCOL_APPROVED:this.localeAppResourcesService.getResource("SMColFPA"),REGULATORY_SUBMISSION:this.localeAppResourcesService.getResource("SMColREGSUB"),FIRST_SITE_INITIATED:this.localeAppResourcesService.getResource("SMColFSI"),FIRST_SUBJECT_SCREENED:this.localeAppResourcesService.getResource("SMColFSS"),FIRST_SUBJECT_RANDOMIZED:this.localeAppResourcesService.getResource("SMColFSR"),LAST_SUBJECT_SCREENED:this.localeAppResourcesService.getResource("SMColLSS"),LAST_SUBJECT_RANDOMIZED:this.localeAppResourcesService.getResource("SMColLSR"),LAST_SUBJECT_TREATED:this.localeAppResourcesService.getResource("SMColLST"),DATABASE_FREEZE:this.localeAppResourcesService.getResource("SMColDBF"),STATISTICAL_ANALYSIS_COMPLETE:this.localeAppResourcesService.getResource("SMColSAC"),CLINICAL_STUDY_REPORT_COMPLETE:this.localeAppResourcesService.getResource("SMColIACSR")}},e}(),d=s("6nV5"),p=s("wgY5"),R=s("5IsW"),h=s("s0CM"),g=p,C=function(){function e(e,t,s,a){this.localeAppResourcesService=e,this.studyMilestonesColumnService=t,this.studyService=s,this.studyHeaderService=a,this.studyMilestonesData=[]}return Object.defineProperty(e.prototype,"studyDetails",{get:function(){return this.studyService.selectedEntityDetails},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnDefList",{get:function(){return this.studyMilestonesColumnService.columnDefList},enumerable:!0,configurable:!0}),e.prototype.getResource=function(e){return this.localeAppResourcesService.getResource(e)},e.prototype.isSelectedStudyCohort=function(e){return this.studyHeaderService.isSelectedStudyCohort(e)},e.prototype.getSelectedCohortKey=function(){return this.studyService.selectedCohortKey},e.prototype.getRow=function(e,t){var s=null;switch(t){case R.n.SOURCE:var a=e.milestone.find((function(e){return e.name===t}));(s=Object.assign({},a)).name=this.localeAppResourcesService.getResource("SMVDSourceTarget");break;case R.n.STUDY_TARGET:var o=e.milestone.find((function(e){return e.name===R.n.PLANNED})),r=e.milestone.find((function(e){return e.name===R.n.TARGET}));null!=(s=s=Object.assign({},o)).FSI&&(s.FSI=r.FSI),null!=s.FSR&&(s.FSR=r.FSR),null!=s.LSS&&(s.LSS=r.LSS),null!=s.LSR&&(s.LSR=r.LSR),s.name=this.localeAppResourcesService.getResource("SMVDPlanned");break;case R.n.ACTUAL_PROJECTED:var l=e.milestone.find((function(e){return e.name===R.n.ACTUAL}));l=Object.assign({},l);var i=e.milestone.find((function(e){return e.name===R.n.PROJECTED}));i=Object.assign({},i),s={name:this.localeAppResourcesService.getResource("SMVDActualsProjected"),FSI:this.getActualProjectedValue(l.FSI,i.FSI),FSS:this.getActualProjectedValue(l.FSS,i.FSS),FSR:this.getActualProjectedValue(l.FSR,i.FSR),LSS:this.getActualProjectedValue(l.LSS,i.LSS),LSR:this.getActualProjectedValue(l.LSR,i.LSR),FPA:this.getActualProjectedValue(l.FPA,i.FPA),LST:this.getActualProjectedValue(l.LST,i.LST),DBF:this.getActualProjectedValue(l.DBF,i.DBF),SAC:this.getActualProjectedValue(l.SAC,i.SAC),IACSR:this.getActualProjectedValue(l.IACSR,i.IACSR),REGSUB:this.getActualProjectedValue(l.REGSUB,i.REGSUB)};break;case R.n.ACTUAL_PROJECTED_RAW:var u=e.milestone.find((function(e){return e.name===R.n.ACTUAL}));u=Object.assign({},u);var n=e.milestone.find((function(e){return e.name===R.n.PROJECTED}));n=Object.assign({},n),s={name:this.localeAppResourcesService.getResource("SMVDActualsProjected"),FSI:this.getComparativeValue(u.FSI,n.FSI),FSS:this.getComparativeValue(u.FSS,n.FSS),FSR:this.getComparativeValue(u.FSR,n.FSR),LSS:this.getComparativeValue(u.LSS,n.LSS),LSR:this.getComparativeValue(u.LSR,n.LSR),FPA:this.getComparativeValue(u.FPA,n.FPA),LST:this.getComparativeValue(u.LST,n.LST),DBF:this.getComparativeValue(u.DBF,n.DBF),SAC:this.getComparativeValue(u.SAC,n.SAC),IACSR:this.getComparativeValue(u.IACSR,n.IACSR),REGSUB:this.getComparativeValue(u.REGSUB,n.REGSUB)}}return s},e.prototype.getActualProjectedValue=function(e,t){var s=this.getComparativeValue(e,t),a=this.getIndicator(null==e);return d.c.isDefined(s)&&(s+=a),s},e.prototype.getComparativeValue=function(e,t){return null!=e?e:t},e.prototype.getIndicator=function(e){return e?R.l:""},e.prototype.getVarianceRow=function(e,t,s){return{name:this.localeAppResourcesService.getResource("SMVDDifference"),FPA:this.getDateDiff(this.getComparativeValue(t.FPA,e.FPA),s.FPA),REGSUB:this.getDateDiff(this.getComparativeValue(t.REGSUB,e.REGSUB),s.REGSUB),FSI:this.getDateDiff(this.getComparativeValue(t.FSI,e.FSI),s.FSI),FSS:this.getDateDiff(this.getComparativeValue(t.FSS,e.FSS),s.FSS),FSR:this.getDateDiff(this.getComparativeValue(t.FSR,e.FSR),s.FSR),LSS:this.getDateDiff(this.getComparativeValue(t.LSS,e.LSS),s.LSS),LSR:this.getDateDiff(this.getComparativeValue(t.LSR,e.LSR),s.LSR),LST:this.getDateDiff(this.getComparativeValue(t.LST,e.LST),s.LST),DBF:this.getDateDiff(this.getComparativeValue(t.DBF,e.DBF),s.DBF),SAC:this.getDateDiff(this.getComparativeValue(t.SAC,e.SAC),s.SAC),IACSR:this.getDateDiff(this.getComparativeValue(t.IACSR,e.IACSR),s.IACSR)}},e.prototype.getDateDiff=function(e,t){var s=null;if(d.c.isDefined(e)&&d.c.isDefined(t)){var a=g(e),o=g(t);s=a.diff(o,"days").toString()}return s},e}(),f=function(){function e(e,t){this.localeAppResourcesService=e,this.studyHeaderService=t,this.buildColumnDef()}return Object.defineProperty(e.prototype,"studyStagesList",{get:function(){return this.studyHeaderService.studyStagesList},enumerable:!0,configurable:!0}),e.prototype.buildColumnDef=function(){var e=this;e.columnDefList=[{headerName:this.localeAppResourcesService.getResource("StageName"),headerTooltip:this.localeAppResourcesService.getResource("StageName"),headerClass:["text-left","column-separator"],pinned:"left",suppressMovable:!0,suppressMenu:!0,suppressColumnsToolPanel:!0,lockPosition:!0,field:"name",width:130,suppressSizeToFit:!0,cellClass:["text-left"]}],e.getStudyStageHeaders().forEach((function(t,s){e.columnDefList.push({headerName:t.label,headerTooltip:t.label,headerClass:["text-right","column-separator"],field:t.field,cellStyle:n.a.varianceStyle,cellClass:n.a.numberColumnClass,suppressMenu:!0,suppressColumnsToolPanel:!0,suppressMovable:!0})})),e.columnDefList.push({headerName:this.localeAppResourcesService.getResource("StageTotal"),headerTooltip:this.localeAppResourcesService.getResource("StageTotal"),headerClass:["text-right"],field:"total",cellStyle:n.a.varianceStyle,cellClass:n.a.numberColumnClass})},e.prototype.getStudyStageHeaders=function(){var e=this,t=[],s=this.localeAppResourcesService.getResource("MilestoneRange");return this.studyStagesList.forEach((function(a){var o=e.localeAppResourcesService.getResource(a.code),r=e.localeAppResourcesService.getResource("SS"+a.startMilestone),l=e.localeAppResourcesService.getResource("SS"+a.endMilestone);t.push({code:a.code,field:a.code,label:d.U.interpolate(s,[o,r,l])})})),t},e}(),m=function(){function e(e,t){this.localeAppResourcesService=e,this.studyStagesColumnService=t,this.studyStagesData=[]}return Object.defineProperty(e.prototype,"columnDefList",{get:function(){return this.studyStagesColumnService.columnDefList},enumerable:!0,configurable:!0}),e.prototype.getStagesRow=function(e,t){var s=null;switch(t){case R.n.PLANNED:var a=e.studyStage.find((function(e){return e.name===R.n.PLANNED}));(s=this.getStudyStageRow(a,!1)).name=this.localeAppResourcesService.getResource("SMVDSourceTarget");break;case R.n.ACTUAL_PROJECTED:var o=e.studyStage.find((function(e){return e.name===R.n.ACTUAL_PROJECTED}));(s=this.getStudyStageRow(o,!0)).name=this.localeAppResourcesService.getResource("SMVDActualsProjected");break;case R.n.ACTUAL_PROJECTED_RAW:var r=e.studyStage.find((function(e){return e.name===R.n.ACTUAL_PROJECTED}));s=this.getStudyStageRow(r,!1)}return s},e.prototype.getStudyStageRow=function(e,t){void 0===t&&(t=!1);var s={};return e&&e.stage&&([].concat(e.stage).forEach((function(e){var a=e.cycleTime;t&&e.projectedInd&&(a+=R.l),s[e.code]=d.c.isDefined(a)?a:R.g})),s.total=e.total),this.setRemainingCodes(s),s},e.prototype.setRemainingCodes=function(e){var t=this.getDefaultCodeList();return Object.assign(t,e)},e.prototype.getDefaultCodeList=function(){var e={};return this.studyStagesColumnService.studyStagesList.forEach((function(t){e[t.code]=R.g})),e},e.prototype.getVarianceRow=function(e,t){var s=this.getDefaultCodeList();return Object.keys(s).forEach((function(a){s[a]=n.a.difference(e[a],t[a])})),s.total=n.a.difference(e.total,t.total),s.name=this.localeAppResourcesService.getResource("SMVDDifference"),s},e}(),A=function(){function e(e,t){this.studyMilestonesService=e,this.studyStagesService=t}return e.prototype.ngOnInit=function(){this.subscriptions=new Array,this.studyMilestonesPrefGridColumnsKey=u.E.STUDY_MILESTONES_GRID,this.studyMilestonesColDefList=this.studyMilestonesService.columnDefList,this.getStudyDetails(),this.studyMilestonesRowData=this.studyMilestonesService.studyMilestonesData,this.studyStagesColDefList=this.studyStagesService.columnDefList,this.studyStagesRowData=this.studyStagesService.studyStagesData},e.prototype.getStudyDetails=function(){var e=this,t=this.studyMilestonesService.studyDetails.subscribe((function(t){if(t){var s=e.studyMilestonesService.getSelectedCohortKey(),a=null,o=null;if(e.studyMilestonesService.isSelectedStudyCohort()&&d.c.isDefined(s)&&s!==R.f){if(t.cohortDetails&&t.cohortDetails.cohortParams&&t.cohortDetails.cohortParams.length>0){var r=t.cohortDetails.cohortParams.find((function(e){return e.cohortKey===s}));a=r.milestonesList,o=r.studyStageList}}else a=t.milestoneList,o=t.studyStageList;if(console.log("milesStoneList",a),console.log("studyStagesList",o),e.studyMilestonesService.studyMilestonesData=[],a){var l=e.studyMilestonesService.getRow(a,R.n.SOURCE);l&&e.studyMilestonesService.studyMilestonesData.push(l);var i=e.studyMilestonesService.getRow(a,R.n.STUDY_TARGET);i&&e.studyMilestonesService.studyMilestonesData.push(i),(n=e.studyMilestonesService.getRow(a,R.n.ACTUAL_PROJECTED))&&e.studyMilestonesService.studyMilestonesData.push(n);var u=e.studyMilestonesService.getRow(a,R.n.ACTUAL_PROJECTED_RAW);(c=e.studyMilestonesService.getVarianceRow(l,i,u))&&e.studyMilestonesService.studyMilestonesData.push(c)}if(e.studyMilestonesRowData=e.studyMilestonesService.studyMilestonesData,e.studyStagesService.studyStagesData=[],o){var n,c,S=e.studyStagesService.getStagesRow(o,R.n.PLANNED);S&&e.studyStagesService.studyStagesData.push(S),(n=e.studyStagesService.getStagesRow(o,R.n.ACTUAL_PROJECTED))&&e.studyStagesService.studyStagesData.push(n),u=e.studyStagesService.getStagesRow(o,R.n.ACTUAL_PROJECTED_RAW),(c=e.studyStagesService.getVarianceRow(S,u))&&e.studyStagesService.studyStagesData.push(c)}e.studyStagesRowData=e.studyStagesService.studyStagesData}else e.studyMilestonesRowData=[],e.studyStagesRowData=[]}));this.subscriptions.push(t)},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){e.unsubscribe()})),this.subscriptions=null},e}(),y=a["ɵcrt"]({encapsulation:2,styles:[],data:{}});function D(e){return a["ɵvid"](0,[(e()(),a["ɵeld"](0,0,null,null,4,"div",[["class","full-height ctos-study-milestones"]],null,null,null,null,null)),(e()(),a["ɵeld"](1,0,null,null,1,"ctos-grid-behaviour",[],null,null,null,l.b,l.a)),a["ɵdid"](2,114688,null,0,i.a,[u.k],{columnDefList:[0,"columnDefList"],rowData:[1,"rowData"],prefGridColumnsKey:[2,"prefGridColumnsKey"]},null),(e()(),a["ɵeld"](3,0,null,null,1,"ctos-grid-behaviour",[],null,null,null,l.b,l.a)),a["ɵdid"](4,114688,null,0,i.a,[u.k],{columnDefList:[0,"columnDefList"],rowData:[1,"rowData"]},null)],(function(e,t){var s=t.component;e(t,2,0,s.studyMilestonesColDefList,s.studyMilestonesRowData,s.studyMilestonesPrefGridColumnsKey),e(t,4,0,s.studyStagesColDefList,s.studyStagesRowData)}),null)}function v(e){return a["ɵvid"](0,[(e()(),a["ɵeld"](0,0,null,null,5,"ctos-study-milestones",[],null,null,null,D,y)),a["ɵprd"](512,null,S,S,[d.J,c.a]),a["ɵprd"](512,null,C,C,[d.J,S,h.a,c.a]),a["ɵprd"](512,null,f,f,[d.J,c.a]),a["ɵprd"](512,null,m,m,[d.J,f]),a["ɵdid"](5,245760,null,0,A,[C,m],null,null)],(function(e,t){e(t,5,0)}),null)}var T=a["ɵccf"]("ctos-study-milestones",A,v,{},{},[]),E=s("WT9V"),L=s("981U"),F=function(){return function(){}}(),M=s("9C04"),I=s("PCNd");s.d(t,"StudyMilestonesModuleNgFactory",(function(){return _}));var _=a["ɵcmf"](o,[],(function(e){return a["ɵmod"]([a["ɵmpd"](512,a.ComponentFactoryResolver,a["ɵCodegenComponentFactoryResolver"],[[8,[r.a,T]],[3,a.ComponentFactoryResolver],a.NgModuleRef]),a["ɵmpd"](4608,E.NgLocalization,E.NgLocaleLocalization,[a.LOCALE_ID,[2,E["ɵangular_packages_common_common_a"]]]),a["ɵmpd"](1073742336,E.CommonModule,E.CommonModule,[]),a["ɵmpd"](1073742336,L.o,L.o,[[2,L.t],[2,L.m]]),a["ɵmpd"](1073742336,F,F,[]),a["ɵmpd"](1073742336,M.AgGridModule,M.AgGridModule,[]),a["ɵmpd"](1073742336,I.a,I.a,[]),a["ɵmpd"](1073742336,o,o,[]),a["ɵmpd"](1024,L.k,(function(){return[[{path:"",component:A}]]}),[])])}))}}]);